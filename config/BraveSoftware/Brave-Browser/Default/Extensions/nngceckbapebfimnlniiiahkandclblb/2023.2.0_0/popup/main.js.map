{"version":3,"file":"popup/main.js","mappings":"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AQA,EAAIC,cACd,CDrCS,GAAA/H,QAAS,EACT,GAAAC,QAAS,EACT,GAAAG,WAAY,EACZ,GAAAC,iBAAkB,EAClB,GAAAE,sBAAuB,EACvB,GAAAE,OAAwB,KAExB,GAAAuH,wBACL,02BACc,GAAAlE,WAAuB,CAAC,aAohB1C,GAAMmE,OCtfC,MAAeC,IC9DtB,IAAYC,GCAAC,GCAAC,GCAAC,GCAAC,GCAAC,GCAAC,GCGAC,GAMAC,GAUAC,IPnBZ,SAAYT,GACV,uCACA,sDACA,4CACA,8CACA,gDACA,8CACA,oDACA,8DACA,8DACA,0EAEA,0CACA,0CACA,0CACA,8DACA,8DACA,wCACA,gEACA,oDACA,oFACA,0FACA,oFACA,oEACA,0EACA,oEACA,4DACA,kDACA,4CACA,wFAEA,kDACA,kDACA,kDAEA,wCACA,wCACA,wCAEA,8DACA,kEACA,8DACA,8DACA,0EACA,sEACA,wFACA,4FACA,oFACA,wEACA,0EACA,8DACA,gEAEA,sDACA,8DACA,8EACA,kEACA,4DACA,8DACA,8EACA,gFACA,4EAEA,0CAEA,sDACA,0DACA,sDACA,sDAEA,sEACA,kEACA,sEACA,iFACD,CA1ED,CAAYA,KAAAA,GAAS,KCArB,SAAYC,GACV,yBACA,2BACA,6BACA,yBACD,CALD,CAAYA,KAAAA,GAA0B,KCAtC,SAAYC,GACV,yDACA,uCACA,6CACA,6BACA,+BACA,6CACA,iCACA,iCACA,qCACA,iDACA,+DACD,CAZD,CAAYA,KAAAA,GAAU,KCAtB,SAAYC,GACV,wBACD,CAFD,CAAYA,KAAAA,GAAc,KCA1B,SAAYC,GACV,uBACA,mBACA,+BACA,qBACA,6CACA,oBACD,CAPD,CAAYA,KAAAA,GAAY,KCAxB,SAAYC,GACV,mBACA,0BACD,CAHD,CAAYA,KAAAA,GAAkB,KCA9B,SAAYC,GACV,qBACA,+BACA,mBACA,0BACD,CALD,CAAYA,KAAAA,GAAU,KCGtB,SAAYC,GACV,6BACA,4BACD,CAHD,CAAYA,KAAAA,GAAa,KAMzB,SAAYC,GACV,yCACA,6BACA,2BACA,qBACA,uBACA,wBACD,CAPD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AChBrtE,EAAM5Z,OAAOwtF,GACM,IAAf5zE,EAAM1nB,MACRo7F,EAAOttF,OAAOld,K,EAelB,OAZAggB,EAAW4jF,EACRv9F,MAAMrG,KAAMk5E,GACZz1D,MAAMqB,IACLq/E,IACOr/E,KAERwsD,OAAO8yB,IAEN,MADAD,IACMC,CAAG,IAGbttE,EAAMvuB,IAAImiG,EAAc1qF,GACjBA,CACT,EACD,CAEL,CCvDO,MAAM2qF,GAAkB,CAC7B,SACA,UACA,YACA,QACA,UACA,UACA,SACA,OACA,WACA,WACA,WACA,UACA,UACA,SACA,WACA,UACA,WACA,WACA,WACA,WACA,UACA,UACA,WACA,SACA,SACA,UACA,YACA,YACA,UACA,WACA,WACA,WACA,UACA,WACA,SACA,OACA,QACA,WACA,UACA,OACA,UACA,UACA,SACA,SACA,WACA,YACA,SACA,WACA,WACA,WACA,UACA,OACA,UACA,YACA,WACA,WACA,UACA,YACA,OACA,SACA,WACA,YACA,YACA,YACA,YACA,SACA,QACA,YACA,WACA,SACA,UACA,SACA,SACA,WACA,QACA,SACA,YACA,YACA,YACA,YACA,YACA,OACA,UACA,SACA,SACA,QACA,YACA,SACA,QACA,UACA,QACA,WACA,UACA,YACA,QACA,YACA,YACA,SACA,WACA,YACA,UACA,QACA,OACA,OACA,OACA,MACA,OACA,YACA,QACA,YACA,QACA,UACA,UACA,YACA,QACA,QACA,YACA,WACA,SACA,QACA,QACA,WACA,WACA,UACA,WACA,SACA,OACA,QACA,QACA,QACA,YACA,QACA,WACA,UACA,WACA,WACA,OACA,WACA,SACA,SACA,WACA,QACA,YACA,QACA,WACA,YACA,YACA,WACA,YACA,YACA,SACA,YACA,YACA,SACA,UACA,UACA,WACA,OACA,QACA,QACA,QACA,UACA,WACA,UACA,WACA,QACA,SACA,WACA,QACA,YACA,UACA,QACA,QACA,SACA,WACA,SACA,YACA,SACA,UACA,WACA,YACA,UACA,YACA,UACA,SACA,UACA,UACA,UACA,SACA,SACA,WACA,OACA,YACA,UACA,QACA,SACA,SACA,SACA,UACA,UACA,YACA,YACA,UACA,SACA,UACA,YACA,YACA,WACA,QACA,YACA,QACA,QACA,WACA,YACA,WACA,WACA,UACA,WACA,UACA,YACA,UACA,YACA,WACA,WACA,WACA,SACA,UACA,YACA,WACA,SACA,WACA,WACA,YACA,WACA,YACA,WACA,YACA,YACA,YACA,YACA,SACA,UACA,QACA,QACA,UACA,SACA,UACA,SACA,WACA,WACA,UACA,SACA,WACA,QACA,SACA,UACA,YACA,SACA,UACA,YACA,YACA,WACA,WACA,YACA,UACA,WACA,QACA,YACA,YACA,UACA,QACA,YACA,YACA,YACA,YACA,WACA,WACA,UACA,UACA,QACA,QACA,WACA,QACA,OACA,WACA,YACA,YACA,WACA,OACA,QACA,WACA,WACA,QACA,QACA,YACA,UACA,WACA,QACA,SACA,UACA,SACA,UACA,UACA,UACA,SACA,UACA,OACA,QACA,QACA,SACA,UACA,UACA,QACA,SACA,UACA,SACA,YACA,WACA,QACA,MACA,SACA,YACA,SACA,YACA,UACA,QACA,QACA,OACA,QACA,QACA,SACA,YACA,SACA,WACA,SACA,UACA,WACA,UACA,UACA,YACA,YACA,YACA,SACA,WACA,QACA,OACA,WACA,OACA,SACA,YACA,UACA,SACA,SACA,UACA,YACA,WACA,YACA,YACA,SACA,QACA,SACA,WACA,YACA,YACA,WACA,UACA,YACA,WACA,UACA,UACA,WACA,QACA,WACA,YACA,SACA,YACA,SACA,SACA,WACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,SACA,SACA,WACA,SACA,UACA,WACA,QACA,WACA,UACA,OACA,QACA,QACA,SACA,QACA,QACA,SACA,UACA,SACA,QACA,OACA,OACA,SACA,WACA,SACA,SACA,WACA,YACA,YACA,WACA,SACA,SACA,YACA,WACA,WACA,UACA,YACA,WACA,WACA,YACA,UACA,UACA,WACA,YACA,WACA,WACA,YACA,WACA,WACA,YACA,WACA,WACA,YACA,WACA,YACA,SACA,WACA,WACA,YACA,WACA,QACA,WACA,YACA,SACA,QACA,UACA,QACA,UACA,SACA,WACA,QACA,SACA,UACA,SACA,SACA,YACA,UACA,QACA,UACA,WACA,QACA,SACA,WACA,SACA,UACA,YACA,UACA,QACA,WACA,SACA,SACA,SACA,WACA,QACA,WACA,WACA,SACA,SACA,UACA,WACA,WACA,SACA,YACA,UACA,SACA,WACA,SACA,UACA,SACA,UACA,QACA,WACA,UACA,WACA,SACA,UACA,SACA,OACA,YACA,UACA,YACA,SACA,WACA,YACA,UACA,WACA,YACA,WACA,OACA,YACA,SACA,QACA,QACA,QACA,SACA,SACA,QACA,OACA,QACA,OACA,YACA,WACA,YACA,UACA,UACA,SACA,SACA,UACA,UACA,UACA,QACA,OACA,QACA,UACA,YACA,YACA,QACA,YACA,YACA,QACA,WACA,YACA,SACA,UACA,SACA,QACA,QACA,UACA,QACA,QACA,WACA,QACA,QACA,UACA,UACA,WACA,SACA,OACA,WACA,QACA,WACA,UACA,WACA,OACA,OACA,WACA,WACA,UACA,OACA,SACA,UACA,QACA,SACA,YACA,QACA,QACA,UACA,SACA,QACA,QACA,WACA,UACA,WACA,WACA,OACA,SACA,UACA,SACA,SACA,UACA,UACA,YACA,OACA,SACA,SACA,QACA,OACA,MACA,UACA,OACA,UACA,SACA,UACA,WACA,QACA,WACA,WACA,WACA,QACA,UACA,SACA,SACA,QACA,OACA,YACA,YACA,OACA,YACA,SACA,QACA,SACA,UACA,WACA,UACA,QACA,QACA,QACA,SACA,UACA,WACA,YACA,OACA,YACA,WACA,SACA,QACA,OACA,SACA,WACA,SACA,SACA,WACA,SACA,WACA,YACA,YACA,SACA,SACA,QACA,SACA,UACA,OACA,SACA,SACA,WACA,YACA,UACA,WACA,SACA,SACA,WACA,UACA,UACA,QACA,QACA,QACA,QACA,UACA,UACA,SACA,YACA,OACA,QACA,QACA,UACA,UACA,YACA,UACA,UACA,YACA,YACA,UACA,UACA,YACA,YACA,YACA,UACA,WACA,SACA,SACA,YACA,SACA,SACA,WACA,QACA,QACA,UACA,WACA,YACA,SACA,WACA,WACA,SACA,WACA,QACA,QACA,WACA,QACA,YACA,SACA,WACA,SACA,YACA,SACA,SACA,SACA,WACA,WACA,YACA,YACA,WACA,WACA,UACA,QACA,SACA,UACA,SACA,SACA,UACA,UACA,QACA,OACA,QACA,YACA,SACA,OACA,UACA,YACA,YACA,WACA,WACA,UACA,UACA,UACA,WACA,WACA,WACA,QACA,QACA,SACA,SACA,SACA,UACA,YACA,WACA,QACA,OACA,SACA,OACA,SACA,UACA,OACA,WACA,OACA,SACA,UACA,SACA,YACA,QACA,UACA,QACA,SACA,QACA,SACA,SACA,QACA,QACA,WACA,UACA,OACA,UACA,OACA,WACA,WACA,UACA,YACA,WACA,UACA,YACA,OACA,UACA,UACA,UACA,YACA,QACA,SACA,WACA,SACA,WACA,UACA,WACA,SACA,QACA,SACA,SACA,UACA,SACA,QACA,OACA,SACA,WACA,WACA,SACA,UACA,SACA,SACA,SACA,QACA,YACA,SACA,UACA,SACA,UACA,UACA,WACA,OACA,YACA,UACA,UACA,SACA,YACA,UACA,UACA,UACA,YACA,UACA,YACA,UACA,UACA,QACA,UACA,SACA,YACA,SACA,UACA,WACA,WACA,YACA,YACA,YACA,WACA,SACA,YACA,QACA,SACA,UACA,UACA,WACA,UACA,YACA,WACA,YACA,QACA,YACA,YACA,UACA,UACA,UACA,SACA,YACA,QACA,SACA,WACA,SACA,UACA,YACA,YACA,QACA,UACA,UACA,UACA,OACA,OACA,SACA,SACA,SACA,WACA,WACA,WACA,WACA,UACA,WACA,WACA,WACA,WACA,YACA,UACA,YACA,UACA,WACA,SACA,UACA,WACA,WACA,UACA,YACA,WACA,UACA,SACA,SACA,SACA,UACA,YACA,SACA,QACA,UACA,YACA,SACA,SACA,YACA,QACA,UACA,YACA,UACA,WACA,WACA,UACA,SACA,SACA,QACA,SACA,YACA,WACA,WACA,SACA,SACA,SACA,WACA,WACA,YACA,YACA,YACA,UACA,WACA,WACA,QACA,WACA,QACA,QACA,UACA,YACA,UACA,YACA,WACA,SACA,SACA,UACA,QACA,QACA,YACA,WACA,UACA,QACA,UACA,YACA,YACA,WACA,UACA,WACA,UACA,UACA,QACA,UACA,UACA,WACA,QACA,UACA,SACA,WACA,WACA,WACA,UACA,WACA,SACA,WACA,UACA,QACA,QACA,SACA,SACA,OACA,YACA,UACA,QACA,YACA,SACA,QACA,QACA,UACA,QACA,WACA,SACA,UACA,QACA,QACA,YACA,YACA,YACA,WACA,YACA,YACA,QACA,QACA,QACA,OACA,WACA,SACA,WACA,WACA,QACA,WACA,WACA,SACA,YACA,UACA,QACA,UACA,WACA,SACA,OACA,SACA,UACA,WACA,SACA,SACA,QACA,OACA,SACA,QACA,QACA,QACA,QACA,QACA,WACA,QACA,SACA,WACA,SACA,WACA,WACA,YACA,SACA,UACA,UACA,WACA,UACA,SACA,SACA,OACA,QACA,QACA,OACA,QACA,WACA,SACA,SACA,QACA,YACA,QACA,WACA,UACA,UACA,WACA,UACA,WACA,UACA,QACA,QACA,QACA,UACA,SACA,WACA,OACA,OACA,QACA,QACA,QACA,UACA,QACA,SACA,YACA,WACA,QACA,SACA,UACA,SACA,UACA,WACA,QACA,SACA,WACA,OACA,SACA,QACA,UACA,QACA,QACA,UACA,WACA,UACA,UACA,WACA,QACA,SACA,UACA,WACA,YACA,QACA,WACA,SACA,SACA,YACA,SACA,UACA,QACA,YACA,UACA,UACA,WACA,YACA,YACA,OACA,WACA,SACA,UACA,SACA,QACA,UACA,MACA,WACA,SACA,UACA,SACA,YACA,YACA,YACA,WACA,YACA,WACA,WACA,OACA,OACA,OACA,OACA,WACA,WACA,UACA,WACA,SACA,YACA,YACA,UACA,SACA,YACA,WACA,WACA,WACA,SACA,WACA,OACA,OACA,OACA,UACA,QACA,QACA,SACA,QACA,WACA,UACA,UACA,WACA,UACA,YACA,YACA,SACA,YACA,UACA,YACA,YACA,YACA,YACA,YACA,YACA,UACA,UACA,SACA,UACA,SACA,YACA,WACA,WACA,YACA,UACA,YACA,WACA,WACA,YACA,WACA,YACA,UACA,UACA,UACA,WACA,UACA,YACA,UACA,QACA,YACA,UACA,WACA,WACA,SACA,WACA,YACA,YACA,UACA,YACA,YACA,UACA,OACA,UACA,WACA,YACA,YACA,WACA,YACA,YACA,WACA,YACA,UACA,WACA,UACA,WACA,WACA,WACA,YACA,YACA,YACA,YACA,WACA,WACA,UACA,YACA,UACA,WACA,YACA,YACA,YACA,UACA,UACA,YACA,YACA,YACA,WACA,YACA,YACA,YACA,UACA,WACA,YACA,UACA,YACA,WACA,UACA,YACA,YACA,WACA,UACA,UACA,UACA,UACA,WACA,UACA,YACA,UACA,UACA,YACA,OACA,SACA,SACA,UACA,SACA,UACA,SACA,OACA,QACA,OACA,WACA,YACA,UACA,SACA,SACA,SACA,YACA,YACA,WACA,WACA,YACA,QACA,WACA,UACA,WACA,YACA,SACA,UACA,WACA,UACA,YACA,YACA,UACA,SACA,SACA,WACA,YACA,SACA,SACA,YACA,OACA,UACA,SACA,QACA,QACA,QACA,YACA,YACA,WACA,YACA,UACA,SACA,UACA,WACA,QACA,UACA,WACA,UACA,SACA,WACA,OACA,WACA,YACA,WACA,WACA,SACA,WACA,UACA,WACA,YACA,YACA,SACA,QACA,YACA,QACA,UACA,UACA,QACA,QACA,QACA,UACA,WACA,WACA,WACA,WACA,SACA,SACA,UACA,YACA,QACA,UACA,UACA,YACA,SACA,WACA,YACA,SACA,WACA,WACA,WACA,WACA,WACA,SACA,QACA,QACA,SACA,QACA,QACA,WACA,UACA,WACA,YACA,UACA,WACA,UACA,WACA,OACA,UACA,QACA,QACA,QACA,UACA,SACA,WACA,UACA,UACA,UACA,WACA,UACA,YACA,SACA,WACA,UACA,QACA,QACA,QACA,QACA,OACA,QACA,SACA,UACA,UACA,QACA,QACA,UACA,UACA,YACA,UACA,YACA,UACA,QACA,YACA,SACA,UACA,WACA,WACA,YACA,UACA,WACA,YACA,UACA,UACA,WACA,QACA,OACA,SACA,UACA,UACA,YACA,OACA,UACA,UACA,WACA,SACA,SACA,WACA,WACA,YACA,WACA,UACA,YACA,WACA,UACA,YACA,UACA,QACA,SACA,UACA,UACA,UACA,SACA,OACA,SACA,SACA,SACA,SACA,YACA,UACA,QACA,QACA,QACA,UACA,SACA,UACA,SACA,SACA,YACA,QACA,QACA,QACA,OACA,SACA,UACA,YACA,UACA,YACA,WACA,YACA,UACA,MACA,QACA,SACA,UACA,UACA,WACA,SACA,YACA,YACA,MACA,MACA,WACA,SACA,QACA,WACA,SACA,QACA,QACA,WACA,QACA,UACA,YACA,SACA,WACA,QACA,SACA,SACA,WACA,YACA,QACA,WACA,WACA,YACA,UACA,WACA,WACA,UACA,OACA,OACA,YACA,OACA,YACA,OACA,WACA,SACA,WACA,WACA,UACA,OACA,SACA,WACA,UACA,WACA,WACA,UACA,UACA,UACA,UACA,WACA,SACA,YACA,WACA,SACA,UACA,YACA,QACA,OACA,YACA,SACA,WACA,QACA,UACA,WACA,SACA,QACA,SACA,SACA,QACA,QACA,YACA,QACA,WACA,SACA,WACA,YACA,WACA,UACA,SACA,YACA,YACA,UACA,YACA,UACA,YACA,WACA,OACA,WACA,UACA,SACA,YACA,YACA,YACA,QACA,WACA,SACA,WACA,YACA,SACA,SACA,OACA,OACA,SACA,SACA,WACA,SACA,WACA,SACA,UACA,SACA,YACA,YACA,YACA,WACA,UACA,YACA,WACA,WACA,WACA,UACA,SACA,WACA,SACA,WACA,UACA,YACA,WACA,YACA,YACA,QACA,WACA,UACA,UACA,SACA,SACA,OACA,WACA,YACA,WACA,SACA,YACA,QACA,WACA,QACA,WACA,YACA,SACA,WACA,WACA,WACA,YACA,YACA,YACA,WACA,YACA,WACA,UACA,QACA,SACA,WACA,SACA,YACA,YACA,WACA,SACA,YACA,WACA,SACA,WACA,YACA,YACA,WACA,SACA,QACA,SACA,QACA,UACA,SACA,UACA,UACA,OACA,YACA,YACA,WACA,YACA,SACA,UACA,YACA,WACA,SACA,SACA,SACA,WACA,YACA,YACA,UACA,UACA,QACA,WACA,SACA,SACA,WACA,QACA,UACA,YACA,UACA,YACA,YACA,WACA,WACA,YACA,YACA,UACA,WACA,WACA,UACA,UACA,UACA,UACA,YACA,WACA,WACA,SACA,YACA,YACA,WACA,YACA,YACA,SACA,WACA,YACA,WACA,UACA,QACA,UACA,WACA,UACA,UACA,YACA,WACA,SACA,UACA,YACA,UACA,WACA,WACA,YACA,WACA,YACA,YACA,WACA,WACA,WACA,YACA,YACA,UACA,OACA,WACA,SACA,YACA,QACA,OACA,SACA,UACA,YACA,WACA,YACA,WACA,WACA,YACA,YACA,MACA,WACA,YACA,WACA,OACA,SACA,OACA,WACA,QACA,SACA,SACA,UACA,SACA,QACA,UACA,SACA,YACA,QACA,QACA,SACA,SACA,UACA,UACA,UACA,SACA,SACA,UACA,WACA,YACA,YACA,WACA,YACA,WACA,YACA,WACA,WACA,WACA,SACA,WACA,WACA,UACA,YACA,WACA,UACA,UACA,YACA,WACA,WACA,WACA,YACA,WACA,UACA,UACA,YACA,YACA,WACA,OACA,YACA,UACA,OACA,UACA,YACA,YACA,WACA,WACA,YACA,SACA,UACA,WACA,UACA,WACA,SACA,YACA,YACA,WACA,WACA,YACA,YACA,YACA,WACA,UACA,YACA,WACA,UACA,WACA,UACA,YACA,UACA,WACA,WACA,UACA,WACA,UACA,WACA,UACA,WACA,WACA,WACA,WACA,QACA,QACA,QACA,YACA,UACA,WACA,WACA,WACA,WACA,SACA,WACA,YACA,YACA,WACA,WACA,WACA,YACA,QACA,SACA,SACA,OACA,WACA,WACA,QACA,QACA,QACA,QACA,OACA,SACA,YACA,SACA,QACA,UACA,SACA,WACA,WACA,WACA,WACA,UACA,WACA,UACA,QACA,QACA,SACA,WACA,YACA,WACA,UACA,UACA,WACA,WACA,WACA,WACA,UACA,QACA,OACA,YACA,SACA,SACA,OACA,SACA,WACA,SACA,OACA,OACA,QACA,OACA,OACA,WACA,YACA,YACA,WACA,YACA,WACA,UACA,UACA,YACA,WACA,YACA,QACA,UACA,UACA,OACA,UACA,WACA,YACA,YACA,WACA,YACA,YACA,YACA,SACA,SACA,WACA,SACA,SACA,QACA,OACA,UACA,QACA,QACA,QACA,UACA,WACA,YACA,WACA,WACA,SACA,WACA,SACA,SACA,WACA,UACA,UACA,UACA,QACA,QACA,QACA,YACA,UACA,WACA,UACA,UACA,UACA,QACA,QACA,WACA,SACA,OACA,MACA,SACA,YACA,UACA,WACA,UACA,WACA,WACA,QACA,OACA,OACA,SACA,SACA,MACA,OACA,SACA,WACA,OACA,UACA,WACA,WACA,MACA,OACA,SACA,YACA,YACA,UACA,UACA,WACA,SACA,SACA,OACA,OACA,UACA,OACA,QACA,QACA,QACA,UACA,UACA,WACA,UACA,YACA,UACA,WACA,UACA,WACA,WACA,OACA,QACA,UACA,UACA,UACA,SACA,UACA,QACA,UACA,UACA,WACA,WACA,WACA,UACA,UACA,UACA,YACA,YACA,UACA,YACA,SACA,SACA,UACA,QACA,UACA,SACA,WACA,SACA,YACA,YACA,SACA,WACA,UACA,QACA,SACA,SACA,OACA,OACA,QACA,QACA,QACA,YACA,OACA,SACA,UACA,YACA,UACA,WACA,YACA,UACA,YACA,YACA,OACA,WACA,SACA,OACA,UACA,SACA,WACA,YACA,WACA,MACA,YACA,UACA,YACA,SACA,YACA,SACA,SACA,WACA,WACA,YACA,UACA,YACA,SACA,QACA,YACA,UACA,SACA,QACA,YACA,UACA,SACA,YACA,WACA,WACA,WACA,UACA,YACA,YACA,WACA,SACA,MACA,WACA,WACA,YACA,QACA,UACA,SACA,MACA,UACA,WACA,MACA,YACA,QACA,YACA,WACA,YACA,QACA,UACA,QACA,QACA,UACA,SACA,UACA,YACA,YACA,QACA,WACA,UACA,SACA,SACA,WACA,SACA,YACA,QACA,UACA,YACA,WACA,OACA,QACA,WACA,UACA,WACA,UACA,UACA,WACA,WACA,YACA,WACA,YACA,WACA,WACA,WACA,WACA,UACA,UACA,YACA,QACA,MACA,SACA,YACA,SACA,YACA,YACA,WACA,UACA,YACA,SACA,SACA,YACA,YACA,WACA,UACA,UACA,WACA,WACA,YACA,QACA,SACA,UACA,UACA,YACA,YACA,UACA,YACA,WACA,YACA,YACA,WACA,YACA,WACA,SACA,WACA,WACA,UACA,WACA,SACA,UACA,WACA,WACA,YACA,UACA,SACA,UACA,YACA,YACA,YACA,UACA,WACA,YACA,WACA,YACA,YACA,WACA,WACA,SACA,SACA,SACA,UACA,UACA,SACA,SACA,YACA,WACA,YACA,WACA,SACA,UACA,SACA,SACA,YACA,SACA,SACA,WACA,UACA,WACA,UACA,YACA,WACA,WACA,WACA,UACA,WACA,QACA,OACA,SACA,OACA,WACA,YACA,YACA,WACA,WACA,YACA,WACA,WACA,UACA,QACA,SACA,WACA,UACA,UACA,YACA,SACA,YACA,YACA,WACA,SACA,SACA,UACA,YACA,SACA,SACA,UACA,QACA,QACA,WACA,YACA,YACA,WACA,WACA,WACA,SACA,YACA,YACA,WACA,UACA,QACA,UACA,YACA,YACA,SACA,WACA,WACA,YACA,YACA,WACA,UACA,UACA,WACA,UACA,QACA,YACA,SACA,YACA,WACA,UACA,QACA,WACA,YACA,YACA,UACA,UACA,OACA,YACA,YACA,YACA,WACA,WACA,QACA,WACA,UACA,OACA,QACA,YACA,SACA,QACA,UACA,UACA,WACA,YACA,YACA,YACA,SACA,WACA,YACA,WACA,UACA,UACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,SACA,YACA,YACA,YACA,YACA,QACA,OACA,YACA,SACA,UACA,SACA,QACA,WACA,OACA,SACA,YACA,WACA,WACA,SACA,UACA,YACA,YACA,YACA,YACA,YACA,QACA,SACA,WACA,YACA,SACA,SACA,WACA,UACA,YACA,WACA,UACA,UACA,UACA,YACA,WACA,WACA,YACA,SACA,WACA,UACA,YACA,YACA,WACA,YACA,SACA,YACA,WACA,WACA,UACA,YACA,YACA,SACA,YACA,UACA,YACA,YACA,QACA,SACA,WACA,WACA,YACA,WACA,WACA,WACA,YACA,UACA,SACA,WACA,SACA,YACA,UACA,UACA,SACA,YACA,UACA,UACA,OACA,SACA,UACA,SACA,OACA,QACA,UACA,OACA,WACA,SACA,SACA,WACA,UACA,UACA,YACA,QACA,UACA,OACA,UACA,YACA,YACA,UACA,UACA,WACA,SACA,UACA,WACA,SACA,YACA,YACA,UACA,WACA,WACA,MACA,QACA,UACA,SACA,SACA,OACA,OACA,SACA,SACA,WACA,WACA,WACA,WACA,WACA,QACA,QACA,UACA,SACA,UACA,WACA,YACA,WACA,SACA,SACA,QACA,SACA,SACA,WACA,UACA,YACA,QACA,QACA,QACA,QACA,UACA,SACA,WACA,WACA,YACA,UACA,UACA,QACA,WACA,QACA,UACA,SACA,WACA,SACA,SACA,SACA,UACA,OACA,SACA,QACA,WACA,SACA,WACA,WACA,UACA,UACA,YACA,QACA,WACA,QACA,UACA,WACA,WACA,YACA,SACA,UACA,UACA,WACA,MACA,OACA,UACA,UACA,WACA,WACA,YACA,YACA,QACA,UACA,QACA,QACA,YACA,UACA,WACA,WACA,OACA,UACA,YACA,YACA,YACA,WACA,WACA,SACA,QACA,UACA,WACA,SACA,WACA,UACA,YACA,YACA,WACA,UACA,WACA,WACA,WACA,YACA,YACA,WACA,OACA,UACA,SACA,QACA,QACA,SACA,SACA,QACA,QACA,OACA,QACA,QACA,QACA,WACA,OACA,SACA,UACA,QACA,WACA,UACA,UACA,QACA,SACA,UACA,WACA,OACA,MACA,MACA,OACA,QACA,OACA,WACA,SACA,WACA,SACA,WACA,SACA,OACA,OACA,OACA,UACA,WACA,WACA,YACA,SACA,WACA,WACA,WACA,UACA,WACA,UACA,WACA,UACA,WACA,YACA,WACA,UACA,WACA,WACA,WACA,SACA,SACA,UACA,WACA,WACA,MACA,QACA,WACA,WACA,UACA,YACA,WACA,YACA,WACA,QACA,QACA,UACA,UACA,YACA,SACA,UACA,QACA,WACA,WACA,WACA,UACA,UACA,UACA,WACA,WACA,UACA,WACA,SACA,YACA,WACA,YACA,WACA,UACA,WACA,YACA,WACA,UACA,SACA,WACA,SACA,YACA,WACA,QACA,UACA,UACA,WACA,SACA,SACA,QACA,SACA,WACA,YACA,YACA,WACA,QACA,SACA,UACA,QACA,UACA,YACA,SACA,OACA,QACA,YACA,UACA,WACA,WACA,YACA,SACA,QACA,QACA,SACA,WACA,YACA,WACA,QACA,YACA,SACA,MACA,QACA,MACA,YACA,UACA,QACA,OACA,YACA,WACA,UACA,SACA,SACA,UACA,YACA,SACA,YACA,WACA,OACA,SACA,QACA,SACA,SACA,WACA,UACA,MACA,SACA,UACA,SACA,SACA,UACA,SACA,UACA,SACA,UACA,SACA,MACA,WACA,YACA,SACA,UACA,WACA,QACA,OACA,OACA,SACA,OACA,QACA,OACA,SACA,MACA,SACA,UACA,WACA,WACA,QACA,UACA,YACA,SACA,QACA,YACA,WACA,YACA,UACA,YACA,WACA,WACA,SACA,YACA,YACA,YACA,WACA,YACA,UACA,YACA,UACA,UACA,UACA,QACA,QACA,YACA,SACA,UACA,YACA,QACA,OACA,WACA,YACA,WACA,SACA,WACA,SACA,SACA,SACA,QACA,UACA,SACA,WACA,QACA,QACA,SACA,QACA,UACA,UACA,UACA,QACA,YACA,SACA,YACA,UACA,SACA,WACA,YACA,QACA,UACA,QACA,WACA,UACA,WACA,UACA,SACA,UACA,UACA,UACA,UACA,SACA,UACA,SACA,UACA,WACA,WACA,SACA,YACA,YACA,UACA,WACA,QACA,QACA,QACA,UACA,WACA,UACA,OACA,SACA,YACA,UACA,SACA,OACA,OACA,WACA,OACA,UACA,QACA,WACA,WACA,YACA,OACA,UACA,QACA,UACA,OACA,OACA,OACA,QACA,WACA,YACA,QACA,SACA,OACA,SACA,OACA,SACA,WACA,OACA,UACA,SACA,SACA,SACA,OACA,OACA,OACA,WACA,YACA,WACA,YACA,SACA,SACA,WACA,UACA,YACA,WACA,WACA,UACA,WACA,QACA,WACA,WACA,UACA,UACA,UACA,WACA,UACA,SACA,UACA,QACA,WACA,QACA,QACA,UACA,YACA,QACA,QACA,YACA,UACA,UACA,YACA,WACA,SACA,YACA,SACA,YACA,YACA,UACA,QACA,OACA,UACA,WACA,WACA,YACA,SACA,QACA,UACA,WACA,OACA,YACA,OACA,QACA,YACA,WACA,WACA,QACA,UACA,YACA,QACA,YACA,QACA,SACA,WACA,OACA,UACA,OACA,WACA,SACA,QACA,QACA,SACA,WACA,SACA,QACA,SACA,UACA,QACA,QACA,SACA,UACA,QACA,OACA,SACA,WACA,WACA,UACA,UACA,YACA,UACA,WACA,SACA,QACA,YACA,WACA,WACA,QACA,UACA,YACA,QACA,OACA,WACA,QACA,OACA,UACA,UACA,YACA,UACA,QACA,SACA,WACA,OACA,OACA,QACA,QACA,UACA,OACA,SACA,MACA,UACA,WACA,YACA,WACA,UACA,WACA,SACA,SACA,UACA,UACA,MACA,UACA,QACA,OACA,UACA,OACA,SACA,SACA,YACA,SACA,UACA,SACA,UACA,YACA,UACA,WACA,WACA,YACA,WACA,WACA,YACA,YACA,WACA,SACA,UACA,WACA,UACA,WACA,YACA,YACA,YACA,UACA,UACA,WACA,WACA,UACA,WACA,YACA,WACA,UACA,UACA,YACA,YACA,YACA,WACA,WACA,YACA,YACA,WACA,WACA,UACA,WACA,SACA,YACA,SACA,QACA,YACA,YACA,UACA,WACA,UACA,YACA,QACA,SACA,WACA,WACA,YACA,WACA,WACA,WACA,YACA,UACA,WACA,YACA,SACA,WACA,WACA,WACA,YACA,WACA,QACA,UACA,WACA,YACA,YACA,YACA,UACA,UACA,UACA,QACA,UACA,OACA,SACA,QACA,UACA,YACA,QACA,SACA,YACA,WACA,UACA,WACA,YACA,OACA,UACA,SACA,QACA,QACA,SACA,WACA,SACA,WACA,SACA,OACA,WACA,WACA,YACA,YACA,YACA,SACA,SACA,YACA,WACA,UACA,WACA,WACA,WACA,YACA,YACA,WACA,WACA,YACA,UACA,WACA,YACA,YACA,UACA,WACA,OACA,OACA,QACA,UACA,YACA,UACA,QACA,UACA,YACA,QACA,SACA,SACA,SACA,UACA,UACA,WACA,WACA,UACA,YACA,QACA,WACA,QACA,SACA,SACA,YACA,QACA,WACA,SACA,UACA,UACA,UACA,UACA,QACA,YACA,WACA,WACA,UACA,WACA,SACA,SACA,WACA,OACA,MACA,OACA,OACA,OACA,QACA,SACA,WACA,SACA,QACA,YACA,WACA,UACA,SACA,YACA,WACA,YACA,WACA,WACA,SACA,SACA,YACA,YACA,SACA,WACA,SACA,OACA,SACA,UACA,WACA,WACA,SACA,SACA,SACA,UACA,SACA,YACA,UACA,QACA,OACA,UACA,OACA,SACA,YACA,MACA,SACA,UACA,WACA,YACA,WACA,YACA,YACA,YACA,SACA,WACA,WACA,WACA,YACA,YACA,YACA,YACA,YACA,YACA,MACA,UACA,QACA,OACA,OACA,MACA,WACA,WACA,WACA,UACA,YACA,YACA,WACA,WACA,WACA,SACA,QACA,OACA,QACA,WACA,SACA,SACA,YACA,WACA,WACA,QACA,YACA,WACA,UACA,WACA,UACA,YACA,WACA,UACA,YACA,WACA,WACA,WACA,YACA,WACA,YACA,YACA,WACA,WACA,WACA,SACA,SACA,YACA,UACA,WACA,YACA,YACA,WACA,SACA,UACA,YACA,YACA,WACA,UACA,YACA,YACA,QACA,WACA,YACA,WACA,SACA,WACA,YACA,YACA,WACA,UACA,YACA,UACA,WACA,YACA,WACA,UACA,YACA,YACA,YACA,UACA,YACA,SACA,WACA,SACA,SACA,MACA,OACA,SACA,OACA,QACA,MACA,OACA,YACA,WACA,YACA,YACA,WACA,WACA,UACA,WACA,WACA,YACA,YACA,UACA,QACA,UACA,YACA,UACA,OACA,YACA,SACA,QACA,MACA,MACA,SACA,SACA,YACA,UACA,WACA,YACA,SACA,YACA,WACA,MACA,UACA,UACA,SACA,UACA,UACA,WACA,QACA,OACA,QACA,UACA,UACA,OACA,UACA,YACA,OACA,OACA,YACA,UACA,QACA,SACA,SACA,MACA,QACA,SACA,QACA,SACA,WACA,OACA,UACA,UACA,MACA,SACA,YACA,SACA,UACA,OACA,UACA,WACA,WACA,YACA,QACA,OACA,MACA,SACA,WACA,YACA,SACA,UACA,WACA,YACA,WACA,QACA,YACA,WACA,YACA,OACA,SACA,WACA,UACA,QACA,YACA,QACA,UACA,UACA,OACA,SACA,QACA,OACA,WACA,WACA,OACA,SACA,UACA,SACA,UACA,WACA,SACA,QACA,OACA,UACA,YACA,UACA,SACA,WACA,WACA,QACA,WACA,UACA,SACA,QACA,QACA,SACA,WACA,OACA,MACA,OACA,SACA,OACA,WACA,WACA,SACA,OACA,OACA,WACA,WACA,YACA,WACA,OACA,SACA,SACA,WACA,SACA,WACA,UACA,UACA,UACA,OACA,UACA,UACA,YACA,WACA,SACA,UACA,UACA,OACA,SACA,QACA,OACA,UACA,WACA,OACA,QACA,WACA,QACA,QACA,QACA,SACA,UACA,QACA,OACA,UACA,UACA,WACA,YACA,WACA,SACA,SACA,QACA,UACA,WACA,SACA,UACA,SACA,OACA,OACA,QACA,SACA,WACA,WACA,UACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,YACA,YACA,WACA,YACA,WACA,YACA,QACA,UACA,SACA,QACA,SACA,UACA,SACA,OACA,QACA,OACA,OACA,QACA,OACA,QACA,OACA,SACA,WACA,UACA,SACA,WACA,SACA,UACA,UACA,SACA,WACA,SACA,WACA,SACA,WACA,OACA,WACA,OACA,SACA,QACA,SACA,SACA,WACA,UACA,UACA,YACA,OACA,UACA,SACA,YACA,UACA,QACA,OACA,SACA,OACA,OACA,UACA,SACA,UACA,YACA,WACA,SACA,UACA,QACA,WACA,SACA,WACA,YACA,YACA,SACA,UACA,YACA,UACA,UACA,WACA,MACA,OACA,SACA,UACA,UACA,WACA,SACA,WACA,WACA,SACA,QACA,QACA,OACA,OACA,UACA,YACA,QACA,QACA,UACA,WACA,OACA,QACA,WACA,WACA,SACA,SACA,WACA,UACA,OACA,OACA,MACA,UACA,UACA,SACA,OACA,OACA,WACA,YACA,SACA,SACA,SACA,UACA,QACA,SACA,QACA,YACA,UACA,SACA,SACA,YACA,YACA,QACA,UACA,YACA,WACA,YACA,YACA,SACA,WACA,UACA,SACA,YACA,WACA,YACA,UACA,UACA,SACA,QACA,WACA,WACA,YACA,YACA,OACA,QACA,OACA,YACA,OACA,SACA,WACA,SACA,YACA,UACA,YACA,WACA,QACA,YACA,SACA,QACA,YACA,WACA,WACA,SACA,WACA,WACA,QACA,OACA,UACA,YACA,WACA,UACA,SACA,UACA,WACA,QACA,YACA,WACA,YACA,YACA,YACA,UACA,YACA,WACA,WACA,SACA,WACA,UACA,YACA,WACA,WACA,QACA,YACA,SACA,YACA,OACA,OACA,SACA,UACA,YACA,UACA,WACA,UACA,WACA,UACA,YACA,WACA,SACA,SACA,QACA,QACA,YACA,UACA,UACA,UACA,YACA,WACA,YACA,SACA,UACA,UACA,YACA,QACA,UACA,SACA,UACA,QACA,WACA,SACA,SACA,SACA,OACA,MACA,WACA,YACA,UACA,UACA,WACA,QACA,QACA,YACA,YACA,SACA,WACA,SACA,SACA,UACA,WACA,SACA,YACA,SACA,UACA,SACA,QACA,YACA,SACA,YACA,YACA,UACA,SACA,YACA,SACA,UACA,WACA,SACA,UACA,UACA,UACA,YACA,WACA,UACA,WACA,YACA,WACA,WACA,YACA,OACA,SACA,YACA,YACA,SACA,SACA,SACA,SACA,WACA,WACA,WACA,QACA,WACA,WACA,UACA,QACA,SACA,YACA,SACA,UACA,SACA,WACA,WACA,UACA,QACA,SACA,SACA,WACA,SACA,UACA,YACA,SACA,UACA,YACA,WACA,QACA,WACA,OACA,YACA,WACA,WACA,UACA,MACA,YACA,SACA,WACA,WACA,YACA,YACA,YACA,WACA,UACA,UACA,WACA,WACA,WACA,YACA,WACA,WACA,WACA,WACA,WACA,WACA,UACA,YACA,UACA,WACA,UACA,YACA,QACA,SACA,WACA,SACA,YACA,WACA,UACA,WACA,YACA,YACA,YACA,WACA,MACA,SACA,WACA,UACA,YACA,WACA,WACA,WACA,QACA,YACA,WACA,YACA,YACA,UACA,WACA,SACA,QACA,OACA,WACA,YACA,SACA,WACA,YACA,SACA,YACA,QACA,QACA,YACA,WACA,UACA,WACA,UACA,WACA,QACA,YACA,YACA,QACA,QACA,UACA,OACA,QACA,SACA,QACA,SACA,OACA,OACA,MACA,MACA,WACA,QACA,OACA,SACA,UACA,WACA,WACA,YACA,YACA,SACA,WACA,QACA,YACA,UACA,QACA,QACA,WACA,UACA,YACA,SACA,QACA,YACA,QACA,YACA,WACA,SACA,UACA,YACA,WACA,QACA,QACA,SACA,YACA,QACA,UACA,UACA,SACA,YACA,QACA,UACA,SACA,WACA,OACA,YACA,YACA,SACA,OACA,SACA,SACA,SACA,UACA,YACA,UACA,OACA,QACA,MACA,OACA,OACA,SACA,QACA,YACA,OACA,SACA,SACA,UACA,QACA,SACA,UACA,YACA,WACA,SACA,WACA,UACA,SACA,WACA,WACA,WACA,YACA,OACA,SACA,UACA,SACA,WACA,SACA,WACA,SACA,YACA,SACA,SACA,WACA,WACA,YACA,WACA,YACA,YACA,UACA,UACA,OACA,SACA,OACA,UACA,QACA,OACA,MACA,YACA,SACA,WACA,WACA,SACA,UACA,QACA,OACA,SACA,WACA,WACA,QACA,QACA,SACA,SACA,WACA,YACA,QACA,WACA,QACA,UACA,SACA,UACA,SACA,UACA,SACA,UACA,SACA,WACA,UACA,WACA,YACA,UACA,WACA,WACA,UACA,UACA,UACA,UACA,UACA,SACA,WACA,WACA,YACA,QACA,SACA,QACA,MACA,MACA,QACA,MACA,YACA,WACA,WACA,SACA,WACA,UACA,WACA,YACA,SACA,YACA,OACA,UACA,YACA,YACA,WACA,YACA,WACA,YACA,YACA,WACA,WACA,YACA,WACA,SACA,YACA,SACA,UACA,YACA,YACA,WACA,WACA,SACA,QACA,SACA,UACA,SACA,UACA,UACA,OACA,MACA,OACA,WACA,OACA,MACA,QACA,WACA,QACA,OACA,UACA,WACA,OACA,WACA,UACA,WACA,UACA,QACA,SACA,WACA,OACA,WACA,QACA,UACA,YACA,UACA,OACA,SACA,OACA,OACA,OACA,OACA,UACA,OACA,OACA,WACA,UACA,YACA,YACA,YACA,WACA,QACA,UACA,WACA,SACA,WACA,WACA,YACA,YACA,MACA,YACA,UACA,QACA,QACA,OACA,QACA,QACA,SACA,UACA,SACA,WACA,WACA,WACA,WACA,UACA,WACA,UACA,WACA,WACA,QACA,WACA,SACA,WACA,WACA,UACA,WACA,SACA,UACA,SACA,UACA,UACA,WACA,WACA,UACA,YACA,YACA,UACA,UACA,SACA,UACA,UACA,WACA,WACA,WACA,UACA,WACA,WACA,WACA,YACA,WACA,YACA,YACA,WACA,WACA,UACA,WACA,SACA,OACA,QACA,OACA,UACA,UACA,WACA,UACA,WACA,WACA,YACA,YACA,WACA,YACA,WACA,WACA,WACA,WACA,YACA,YACA,YACA,YACA,YACA,UACA,YACA,YACA,YACA,UACA,WACA,WACA,WACA,WACA,YACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,YACA,WACA,YACA,WACA,UACA,UACA,WACA,WACA,WACA,YACA,YACA,WACA,UACA,YACA,WACA,YACA,YACA,WACA,YACA,YACA,WACA,WACA,WACA,UACA,YACA,WACA,YACA,YACA,YACA,WACA,YACA,YACA,WACA,WACA,YACA,YACA,YACA,WACA,YACA,WACA,UACA,WACA,WACA,WACA,UACA,YACA,WACA,YACA,MACA,SACA,UACA,YACA,UACA,YACA,SACA,WACA,SACA,QACA,QACA,YACA,UACA,WACA,WACA,WACA,SACA,SACA,UACA,SACA,WACA,UACA,QACA,QACA,SACA,UACA,SACA,YACA,OACA,WACA,YACA,SACA,WACA,WACA,UACA,WACA,SACA,UACA,WACA,QACA,WACA,OACA,YACA,QACA,UACA,WACA,YACA,UACA,YACA,SACA,QACA,YACA,YACA,SACA,QACA,UACA,UACA,WACA,YACA,SACA,UACA,YACA,WACA,YACA,YACA,YACA,WACA,YACA,YACA,YACA,WACA,WACA,YACA,SACA,UACA,YACA,SACA,SACA,QACA,UACA,UACA,SACA,WACA,SACA,SACA,UACA,UACA,UACA,SACA,UACA,YACA,SACA,UACA,YACA,QACA,WACA,WACA,UACA,WACA,YACA,WACA,UACA,UACA,UACA,YACA,WACA,WACA,WACA,QACA,SACA,SACA,UACA,SACA,WACA,UACA,QACA,YACA,SACA,WACA,YACA,OACA,WACA,UACA,QACA,YACA,UACA,SACA,YACA,YACA,SACA,WACA,QACA,YACA,WACA,SACA,SACA,UACA,UACA,WACA,SACA,QACA,QACA,SACA,UACA,WACA,UACA,SACA,SACA,QACA,SACA,WACA,WACA,YACA,WACA,WACA,YACA,WACA,UACA,SACA,OACA,SACA,WACA,UACA,SACA,UACA,UACA,YACA,WACA,UACA,YACA,QACA,SACA,UACA,WACA,YACA,MACA,WACA,UACA,QACA,YACA,YACA,YACA,YACA,UACA,YACA,SACA,WACA,UACA,YACA,QACA,OACA,WACA,YACA,YACA,YACA,YACA,YACA,YACA,QACA,OACA,YACA,YACA,SACA,YACA,QACA,SACA,WACA,QACA,YACA,SACA,YACA,YACA,QACA,UACA,UACA,SACA,UACA,YACA,SACA,UACA,YACA,QACA,YACA,QACA,SACA,WACA,UACA,UACA,WACA,QACA,UACA,QACA,SACA,UACA,UACA,SACA,WACA,UACA,WACA,WACA,UACA,WACA,YACA,YACA,WACA,WACA,SACA,UACA,YACA,YACA,UACA,WACA,YACA,WACA,UACA,UACA,WACA,UACA,YACA,WACA,QACA,WACA,QACA,SACA,YACA,SACA,WACA,YACA,UACA,OACA,OACA,OACA,OACA,OACA,QACA,OACA,UACA,WACA,SACA,OACA,YACA,UACA,QACA,MACA,OACA,OACA,OACA,UACA,UACA,WACA,YACA,SACA,QACA,SACA,QACA,SACA,QACA,SACA,SACA,QACA,SACA,WACA,QACA,OACA,YACA,UACA,YACA,UACA,SACA,OACA,OACA,UACA,OACA,SACA,SACA,QACA,WACA,WACA,UACA,WACA,YACA,OACA,SACA,WACA,WACA,SACA,YACA,WACA,UACA,SACA,WACA,QACA,OACA,SACA,WACA,WACA,SACA,UACA,SACA,UACA,WACA,SACA,SACA,UACA,YACA,UACA,UACA,QACA,SACA,WACA,QACA,UACA,OACA,WACA,YACA,UACA,QACA,SACA,MACA,WACA,SACA,WACA,UACA,WACA,YACA,SACA,UACA,WACA,YACA,UACA,WACA,WACA,UACA,YACA,UACA,SACA,WACA,YACA,UACA,UACA,SACA,YACA,YACA,UACA,YACA,WACA,YACA,YACA,SACA,UACA,WACA,WACA,UACA,WACA,YACA,WACA,UACA,SACA,UACA,SACA,YACA,YACA,YACA,SACA,UACA,YACA,UACA,QACA,UACA,YACA,UACA,YACA,YACA,WACA,UACA,SACA,UACA,UACA,YACA,UACA,UACA,WACA,SACA,YACA,WACA,QACA,SACA,YACA,UACA,UACA,SACA,QACA,WACA,QACA,QACA,QACA,SACA,SACA,WACA,UACA,UACA,YACA,QACA,YACA,WACA,WACA,YACA,QACA,UACA,YACA,UACA,YACA,UACA,WACA,YACA,WACA,WACA,UACA,UACA,UACA,UACA,YACA,YACA,YACA,UACA,WACA,YACA,UACA,YACA,UACA,WACA,YACA,WACA,YACA,YACA,YACA,WACA,YACA,WACA,WACA,QACA,QACA,YACA,SACA,WACA,YACA,SACA,YACA,WACA,WACA,YACA,WACA,UACA,QACA,UACA,YACA,WACA,SACA,YACA,YACA,WACA,WACA,QACA,WACA,SACA,SACA,WACA,WACA,YACA,WACA,UACA,UACA,YACA,YACA,UACA,UACA,WACA,YACA,QACA,SACA,QACA,YACA,QACA,UACA,MACA,UACA,SACA,YACA,SACA,SACA,MACA,OACA,YACA,OACA,UACA,QACA,YACA,OACA,SACA,SACA,QACA,WACA,YACA,YACA,UACA,WACA,OACA,QACA,SACA,QACA,WACA,YACA,WACA,SACA,WACA,YACA,QACA,UACA,WACA,SACA,SACA,UACA,SACA,SACA,WACA,YACA,OACA,QACA,YACA,WACA,UACA,WACA,WACA,YACA,SACA,YACA,UACA,WACA,UACA,SACA,QACA,UACA,OACA,SACA,WACA,UACA,YACA,SACA,QACA,WACA,QACA,WACA,QACA,UACA,YACA,YACA,UACA,UACA,QACA,UACA,UACA,SACA,YACA,YACA,WACA,UACA,SACA,QACA,UACA,UACA,YACA,YACA,YACA,QACA,QACA,QACA,UACA,YACA,QACA,OACA,SACA,YACA,WACA,YACA,QACA,QACA,OACA,SACA,SACA,OACA,SACA,QACA,SACA,WACA,YACA,WACA,YACA,WACA,QACA,SACA,SACA,OACA,OACA,SACA,SACA,UACA,SACA,UACA,UACA,WACA,UACA,SACA,OACA,SACA,QACA,SACA,WACA,OACA,SACA,QACA,YACA,SACA,SACA,SACA,UACA,SACA,UACA,UACA,UACA,QACA,OACA,SACA,SACA,OACA,UACA,SACA,QACA,SACA,SACA,UACA,YACA,WACA,QACA,YACA,WACA,WACA,UACA,WACA,OACA,YACA,WACA,UACA,YACA,YACA,YACA,WACA,SACA,WACA,WACA,WACA,UACA,YACA,SACA,QACA,UACA,SACA,SACA,UACA,SACA,UACA,UACA,WACA,WACA,SACA,SACA,YACA,SACA,SACA,SACA,SACA,YACA,YACA,UACA,SACA,WACA,UACA,WACA,YACA,UACA,YACA,YACA,SACA,YACA,UACA,YACA,YACA,YACA,SACA,SACA,UACA,SACA,WACA,WACA,SACA,YACA,YACA,UACA,WACA,WACA,YACA,WACA,UACA,UACA,UACA,YACA,YACA,UACA,YACA,SACA,YACA,UACA,WACA,WACA,WACA,YACA,YACA,SACA,SACA,UACA,SACA,WACA,WACA,WACA,WACA,YACA,UACA,UACA,WACA,UACA,UACA,YACA,SACA,YACA,YACA,UACA,SACA,WACA,YACA,SACA,SACA,UACA,UACA,SACA,SACA,SACA,WACA,YACA,WACA,UACA,YACA,UACA,UACA,WACA,YACA,QACA,SACA,SACA,YACA,YACA,UACA,YACA,UACA,YACA,SACA,WACA,UACA,YACA,YACA,UACA,WACA,WACA,QACA,QACA,UACA,UACA,YACA,WACA,WACA,WACA,UACA,QACA,UACA,YACA,UACA,SACA,SACA,SACA,WACA,SACA,YACA,OACA,SACA,SACA,UACA,UACA,WACA,SACA,WACA,WACA,YACA,YACA,QACA,UACA,YACA,SACA,UACA,SACA,YACA,UACA,UACA,UACA,WACA,SACA,WACA,YACA,YACA,WACA,YACA,YACA,UACA,UACA,WACA,WACA,YACA,WACA,SACA,SACA,SACA,WACA,UACA,SACA,UACA,YACA,YACA,UACA,SACA,SACA,WACA,YACA,SACA,WACA,WACA,SACA,WACA,UACA,SACA,UACA,QACA,WACA,SACA,YACA,SACA,YACA,YACA,UACA,UACA,WACA,YACA,YACA,YACA,OACA,UACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,UACA,UACA,YACA,UACA,QACA,SACA,WACA,UACA,SACA,WACA,WACA,WACA,WACA,SACA,SACA,QACA,UACA,UACA,YACA,YACA,YACA,WACA,WACA,UACA,WACA,YACA,YACA,YACA,SACA,WACA,WACA,WACA,WACA,SACA,WACA,UACA,WACA,SACA,SACA,WACA,YACA,YACA,SACA,WACA,YACA,SACA,YACA,YACA,UACA,UACA,UACA,UACA,WACA,SACA,SACA,WACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,YACA,YACA,QACA,SACA,UACA,SACA,UACA,UACA,WACA,QACA,SACA,UACA,UACA,UACA,SACA,UACA,YACA,WACA,WACA,UACA,YACA,YACA,SACA,YACA,SACA,WACA,UACA,YACA,UACA,UACA,WACA,YACA,SACA,SACA,WACA,YACA,SACA,SACA,SACA,SACA,SACA,SACA,SACA,UACA,QACA,SACA,UACA,OACA,SACA,SACA,WACA,UACA,UACA,WACA,SACA,OACA,SACA,UACA,OACA,UACA,QACA,QACA,UACA,SACA,OACA,OACA,QACA,UACA,OACA,UACA,WACA,WACA,UACA,SACA,WACA,UACA,OACA,SACA,OACA,UACA,UACA,QACA,QACA,YACA,WACA,YACA,YACA,UACA,WACA,SACA,UACA,QACA,UACA,OACA,QACA,WACA,SACA,WACA,SACA,SACA,WACA,YACA,UACA,WACA,YACA,WACA,QACA,QACA,QACA,OACA,OACA,SACA,SACA,OACA,SACA,UACA,UACA,WACA,WACA,WACA,YACA,UACA,YACA,UACA,UACA,QACA,SACA,QACA,SACA,SACA,UACA,SACA,UACA,OACA,SACA,SACA,MACA,SACA,OACA,SACA,WACA,UACA,QACA,YACA,UACA,SACA,UACA,QACA,OACA,SACA,UACA,QACA,OACA,OACA,OACA,MACA,UACA,WACA,YACA,SACA,YACA,SACA,YACA,UACA,WACA,QACA,UACA,SACA,YACA,YACA,SACA,WACA,UACA,OACA,OACA,UACA,QACA,OACA,QACA,OACA,QACA,SACA,WACA,SACA,SACA,QACA,SACA,QACA,OACA,WACA,SACA,UACA,YACA,YACA,OACA,SACA,WACA,WACA,WACA,YACA,SACA,UACA,WACA,UACA,YACA,UACA,SACA,WACA,UACA,UACA,YACA,UACA,YACA,YACA,WACA,QACA,WACA,YACA,OACA,QACA,UACA,YACA,QACA,UACA,YACA,UACA,OACA,YACA,QACA,UACA,WACA,QACA,YACA,YACA,UACA,WACA,WACA,YACA,QACA,QACA,SACA,UACA,QACA,UACA,SACA,QACA,YACA,MACA,UACA,SACA,UACA,WACA,QACA,UACA,WACA,UACA,WACA,OACA,UACA,UACA,WACA,QACA,YACA,SACA,WACA,YACA,SACA,QACA,UACA,YACA,WACA,QACA,YACA,SACA,WACA,YACA,SACA,WACA,YACA,WACA,UACA,UACA,YACA,QACA,QACA,WACA,QACA,QACA,UACA,QACA,SACA,YACA,YACA,SACA,YACA,SACA,UACA,QACA,WACA,SACA,YACA,UACA,WACA,WACA,SACA,WACA,WACA,WACA,YACA,YACA,QACA,UACA,UACA,SACA,WACA,SACA,WACA,YACA,SACA,SACA,UACA,YACA,WACA,WACA,UACA,UACA,WACA,QACA,QACA,WACA,YACA,SACA,UACA,WACA,YACA,YACA,SACA,UACA,SACA,YACA,SACA,UACA,WACA,WACA,QACA,SACA,WACA,WACA,WACA,SACA,WACA,UACA,UACA,UACA,SACA,WACA,YACA,YACA,WACA,OACA,UACA,WACA,WACA,YACA,YACA,UACA,WACA,YACA,SACA,UACA,OACA,SACA,WACA,YACA,YACA,YACA,YACA,WACA,QACA,YACA,SACA,SACA,SACA,WACA,YACA,SACA,SACA,YACA,UACA,WACA,QACA,UACA,UACA,SACA,WACA,UACA,UACA,SACA,WACA,QACA,YACA,YACA,UACA,UACA,WACA,SACA,QACA,SACA,UACA,YACA,UACA,SACA,QACA,QACA,WACA,UACA,YACA,UACA,QACA,QACA,UACA,UACA,QACA,UACA,WACA,QACA,SACA,QACA,UACA,QACA,YACA,UACA,UACA,UACA,YACA,QACA,SACA,OACA,QACA,QACA,QACA,QACA,UACA,SACA,WACA,SACA,SACA,UACA,WACA,YACA,SACA,UACA,SACA,UACA,QACA,UACA,YACA,UACA,QACA,OACA,QACA,YACA,QACA,QACA,WACA,UACA,WACA,WACA,QACA,WACA,YACA,WACA,UACA,UACA,YACA,YACA,UACA,YACA,SACA,YACA,SACA,QACA,QACA,UACA,WACA,WACA,SACA,WACA,UACA,UACA,QACA,UACA,YACA,YACA,WACA,QACA,SACA,WACA,WACA,YACA,WACA,SACA,SACA,SACA,SACA,SACA,UACA,WACA,YACA,SACA,QACA,SACA,WACA,UACA,UACA,YACA,OACA,QACA,OACA,MACA,UACA,WACA,UACA,SACA,SACA,SACA,OACA,UACA,WACA,WACA,SACA,SACA,UACA,OACA,YACA,QACA,OACA,OACA,SACA,YACA,SACA,YACA,SACA,WACA,SACA,UACA,YACA,SACA,UACA,SACA,WACA,WACA,UACA,SACA,UACA,MACA,QACA,SACA,SACA,SACA,UACA,WACA,YACA,UACA,UACA,QACA,UACA,WACA,YACA,UACA,UACA,OACA,SACA,SACA,WACA,SACA,UACA,YACA,WACA,WACA,UACA,SACA,SACA,SACA,OACA,QACA,QACA,QACA,SACA,UACA,UACA,WACA,UACA,UACA,WACA,WACA,WACA,WACA,WACA,WACA,SACA,YACA,UACA,WACA,WACA,QACA,UACA,WACA,WACA,UACA,QACA,YACA,UACA,OACA,UACA,UACA,WACA,YACA,SACA,QACA,OACA,UACA,QACA,WACA,YACA,UACA,WACA,QACA,UACA,OACA,OACA,QACA,QACA,QACA,SACA,QACA,YACA,SACA,SACA,UACA,QACA,SACA,YACA,UACA,WACA,YACA,WACA,WACA,QACA,WACA,YACA,SACA,OACA,OACA,SACA,WACA,SACA,SACA,UACA,WACA,SACA,OACA,YACA,UACA,SACA,OACA,OACA,QACA,QACA,MACA,QACA,UACA,YACA,UACA,WACA,UACA,QACA,WACA,QACA,YACA,QACA,QACA,QACA,UACA,QACA,OACA,SACA,YACA,YACA,UACA,QACA,UACA,SACA,UACA,SACA,SACA,WACA,YACA,SACA,WACA,QACA,UACA,UACA,OACA,QACA,QACA,SACA,QACA,QACA,SACA,WACA,QACA,QACA,UACA,WACA,SACA,UACA,SACA,QACA,UACA,UACA,QACA,QACA,WACA,YACA,YACA,UACA,YACA,WACA,WACA,YACA,YACA,YACA,WACA,UACA,WACA,WACA,YACA,WACA,QACA,OACA,QACA,UACA,SACA,WACA,QACA,YACA,YACA,WACA,YACA,UACA,WACA,UACA,WACA,SACA,YACA,YACA,WACA,YACA,SACA,QACA,YACA,UACA,WACA,YACA,UACA,WACA,QACA,OACA,SACA,YACA,SACA,SACA,QACA,SACA,QACA,QACA,UACA,SACA,UACA,UACA,WACA,UACA,WACA,QACA,SACA,WACA,YACA,UACA,YACA,WACA,YACA,UACA,WACA,SACA,WACA,WACA,SACA,WACA,WACA,WACA,UACA,WACA,UACA,UACA,WACA,SACA,SACA,YACA,SACA,SACA,UACA,QACA,WACA,SACA,QACA,QACA,QACA,WACA,SACA,SACA,WACA,YACA,UACA,UACA,WACA,SACA,UACA,SACA,QACA,SACA,SACA,SACA,QACA,QACA,QACA,SACA,YACA,YACA,SACA,SACA,SACA,SACA,SACA,OACA,OACA,OACA,UACA,WACA,WACA,QACA,SACA,WACA,SACA,WACA,WACA,YACA,SACA,WACA,YACA,YACA,WACA,UACA,YACA,QACA,WACA,WACA,SACA,SACA,SACA,YACA,UACA,YACA,YACA,SACA,QACA,UACA,QACA,QACA,UACA,WACA,WACA,YACA,UACA,WACA,YACA,YACA,YACA,WACA,WACA,UACA,UACA,QACA,QACA,QACA,SACA,WACA,YACA,SACA,UACA,WACA,WACA,YACA,UACA,QACA,WACA,UACA,YACA,UACA,WACA,SACA,WACA,UACA,WACA,UACA,YACA,UACA,UACA,WACA,QACA,QACA,SACA,YACA,SACA,UACA,SACA,UACA,YACA,UACA,QACA,YACA,WACA,WACA,YACA,QACA,QACA,QACA,YACA,WACA,YACA,YACA,UACA,OACA,SACA,UACA,OACA,SACA,UACA,YACA,YACA,WACA,YACA,UACA,OACA,QACA,UACA,UACA,YACA,SACA,WACA,YACA,QACA,YACA,YACA,UACA,WACA,UACA,WACA,WACA,WACA,SACA,WACA,SACA,UACA,YACA,OACA,SACA,QACA,QACA,QACA,QACA,QACA,YACA,YACA,YACA,UACA,QACA,QACA,SACA,QACA,QACA,YACA,YACA,WACA,UACA,UACA,WACA,YACA,WACA,UACA,YACA,YACA,QACA,QACA,QACA,WACA,UACA,WACA,YACA,WACA,WACA,YACA,YACA,WACA,WACA,YACA,WACA,UACA,QACA,QACA,SACA,SACA,SACA,WACA,YACA,QACA,SACA,UACA,SACA,WACA,SACA,SACA,SACA,SACA,WACA,SACA,WACA,SACA,SACA,WACA,YACA,WACA,YACA,SACA,YACA,UACA,WACA,QACA,SACA,QACA,UACA,UACA,UACA,WACA,SACA,QACA,UACA,UACA,SACA,QACA,UACA,WACA,SACA,UACA,YACA,QACA,QACA,UACA,UACA,WACA,QACA,SACA,WACA,SACA,UACA,YACA,UACA,WACA,SACA,QACA,YACA,YACA,YACA,UACA,WACA,WACA,WACA,YACA,UACA,WACA,SACA,WACA,UACA,YACA,WACA,YACA,YACA,WACA,SACA,UACA,WACA,YACA,YACA,YACA,UACA,YACA,YACA,UACA,UACA,WACA,YACA,YACA,UACA,WACA,SACA,WACA,WACA,UACA,SACA,SACA,YACA,UACA,YACA,OACA,UACA,SACA,SACA,OACA,WACA,YACA,UACA,SACA,YACA,WACA,QACA,UACA,QACA,WACA,WACA,WACA,SACA,UACA,UACA,UACA,SACA,OACA,SACA,WACA,YACA,SACA,YACA,YACA,YACA,WACA,WACA,WACA,WACA,YACA,YACA,SACA,WACA,SACA,UACA,YACA,UACA,YACA,SACA,WACA,UACA,YACA,YACA,SACA,UACA,WACA,UACA,UACA,UACA,UACA,WACA,UACA,YACA,YACA,WACA,SACA,WACA,UACA,YACA,WACA,QACA,UACA,UACA,WACA,YACA,YACA,OACA,YACA,UACA,YACA,OACA,WACA,QACA,OACA,QACA,QACA,QACA,QACA,QACA,SACA,UACA,UACA,YACA,YACA,UACA,WACA,WACA,WACA,UACA,WACA,QACA,QACA,SACA,SACA,UACA,UACA,QACA,SACA,QACA,QACA,QACA,WACA,WACA,YACA,WACA,UACA,UACA,WACA,UACA,WACA,WACA,YACA,YACA,QACA,SACA,UACA,UACA,QACA,WACA,SACA,SACA,YACA,UACA,YACA,UACA,SACA,WACA,QACA,OACA,UACA,WACA,UACA,UACA,WACA,UACA,YACA,MACA,UACA,OACA,SACA,SACA,WACA,OACA,QACA,SACA,WACA,QACA,SACA,OACA,SACA,UACA,UACA,UACA,WACA,UACA,WACA,WACA,UACA,UACA,OACA,YACA,SACA,SACA,UACA,QACA,SACA,SACA,WACA,OACA,SACA,QACA,YACA,UACA,QACA,WACA,SACA,WACA,SACA,QACA,SACA,QACA,OACA,OACA,UACA,YACA,OACA,QACA,QACA,WACA,WACA,UACA,UACA,YACA,QACA,SACA,WACA,UACA,UACA,YACA,WACA,WACA,QACA,UACA,QACA,QACA,SACA,UACA,WACA,WACA,YACA,YACA,UACA,WACA,SACA,QACA,QACA,QACA,WACA,SACA,SACA,WACA,YACA,SACA,SACA,SACA,WACA,SACA,YACA,SACA,WACA,YACA,YACA,UACA,WACA,OACA,QACA,WACA,WACA,OACA,YACA,UACA,QACA,QACA,QACA,SACA,WACA,UACA,OACA,QACA,UACA,UACA,YACA,YACA,WACA,UACA,OACA,SACA,OACA,OACA,QACA,SACA,UACA,YACA,UACA,SACA,WACA,SACA,SACA,WACA,SACA,WACA,OACA,UACA,OACA,SACA,SACA,SACA,UACA,YACA,SACA,SACA,SACA,QACA,UACA,QACA,WACA,UACA,QACA,UACA,YACA,UACA,UACA,WACA,YACA,QACA,UACA,SACA,WACA,WACA,YACA,YACA,YACA,YACA,YACA,WACA,UACA,YACA,UACA,UACA,WACA,QACA,QACA,SACA,WACA,WACA,OACA,YACA,WACA,YACA,UACA,QACA,SACA,OACA,UACA,UACA,YACA,SACA,SACA,QACA,WACA,SACA,QACA,WACA,YACA,WACA,UACA,YACA,UACA,UACA,WACA,WACA,WACA,UACA,YACA,SACA,WACA,WACA,UACA,QACA,SACA,YACA,WACA,UACA,YACA,UACA,WACA,WACA,UACA,OACA,SACA,WACA,UACA,UACA,UACA,WACA,WACA,SACA,WACA,UACA,UACA,YACA,SACA,WACA,QACA,SACA,QACA,QACA,UACA,QACA,SACA,YACA,UACA,WACA,WACA,YACA,QACA,MACA,QACA,WACA,UACA,UACA,UACA,MACA,UACA,QACA,SACA,WACA,QACA,SACA,UACA,WACA,WACA,YACA,OACA,SACA,UACA,SACA,SACA,OACA,QACA,OACA,MACA,QACA,QACA,QACA,WACA,SACA,YACA,SACA,QACA,QACA,UACA,YACA,OACA,WACA,QACA,QACA,QACA,YACA,UACA,UACA,WACA,SACA,SACA,UACA,SACA,QACA,OACA,QACA,WACA,YACA,QACA,YACA,WACA,SACA,YACA,SACA,YACA,YACA,WACA,UACA,YACA,YACA,YACA,YACA,YACA,UACA,UACA,UACA,YACA,WACA,SACA,SACA,WACA,WACA,YACA,YACA,UACA,WACA,YACA,UACA,YACA,WACA,WACA,YACA,WACA,WACA,WACA,UACA,WACA,WACA,YACA,UACA,YACA,YACA,UACA,UACA,SACA,YACA,YACA,UACA,QACA,SACA,UACA,SACA,YACA,WACA,WACA,YACA,WACA,WACA,WACA,SACA,YACA,YACA,WACA,UACA,UACA,UACA,UACA,YACA,UACA,YACA,WACA,QACA,YACA,UACA,YACA,SACA,YACA,YACA,WACA,WACA,YACA,YACA,WACA,WACA,YACA,WACA,YACA,YACA,UACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,WACA,YACA,YACA,YACA,YACA,WACA,WACA,YACA,YACA,YACA,YACA,YACA,YACA,WACA,UACA,SACA,YACA,UACA,YACA,WACA,UACA,WACA,UACA,SACA,WACA,SACA,YACA,UACA,WACA,YACA,WACA,YACA,WACA,UACA,YACA,SACA,YACA,YACA,YACA,SACA,WACA,UACA,YACA,UACA,WACA,WACA,YACA,YACA,UACA,WACA,YACA,SACA,YACA,WACA,WACA,YACA,WACA,WACA,WACA,WACA,SACA,UACA,WACA,YACA,YACA,WACA,YACA,UACA,WACA,YACA,UACA,YACA,WACA,YACA,WACA,UACA,YACA,SACA,SACA,UACA,WACA,UACA,UACA,YACA,YACA,QACA,YACA,YACA,YACA,YACA,YACA,QACA,WACA,YACA,SACA,WACA,OACA,YACA,WACA,WACA,UACA,SACA,YACA,YACA,UACA,UACA,UACA,WACA,WACA,YACA,UACA,SACA,YACA,YACA,YACA,YACA,UACA,WACA,WACA,QACA,YACA,WACA,WACA,WACA,YACA,YACA,UACA,WACA,WACA,YACA,UACA,SACA,YACA,WACA,WACA,WACA,WACA,YACA,YACA,YACA,YACA,UACA,WACA,UACA,YACA,UACA,WACA,YACA,UACA,YACA,WACA,UACA,YACA,YACA,WACA,YACA,SACA,WACA,SACA,YACA,WACA,UACA,WACA,WACA,YACA,WACA,YACA,YACA,YACA,YACA,WACA,SACA,YACA,WACA,UACA,WACA,UACA,YACA,YACA,SACA,SACA,YACA,YACA,YACA,WACA,SACA,YACA,YACA,WACA,SACA,YACA,YACA,UACA,SACA,YACA,SACA,WACA,WACA,SACA,SACA,WACA,UACA,WACA,YACA,YACA,UACA,WACA,WACA,YACA,WACA,WACA,SACA,WACA,YACA,SACA,YACA,YACA,WACA,WACA,WACA,YACA,YACA,YACA,WACA,YACA,WACA,WACA,SACA,WACA,WACA,SACA,WACA,WACA,YACA,WACA,WACA,YACA,YACA,WACA,YACA,YACA,WACA,YACA,UACA,YACA,YACA,WACA,WACA,WACA,SACA,UACA,WACA,YACA,UACA,UACA,YACA,WACA,UACA,WACA,WACA,SACA,QACA,QACA,UACA,WACA,WACA,YACA,SACA,YACA,YACA,YACA,YACA,UACA,YACA,SACA,UACA,WACA,UACA,UACA,WACA,SACA,UACA,WACA,WACA,YACA,WACA,YACA,WACA,WACA,YACA,UACA,WACA,YACA,SACA,WACA,YACA,UACA,QACA,YACA,SACA,WACA,YACA,SACA,UACA,YACA,YACA,YACA,SACA,YACA,WACA,UACA,UACA,YACA,YACA,QACA,SACA,UACA,WACA,YACA,SACA,UACA,UACA,WACA,SACA,SACA,SACA,WACA,YACA,SACA,OACA,QACA,UACA,WACA,UACA,SACA,SACA,UACA,SACA,UACA,WACA,UACA,UACA,WACA,WACA,UACA,SACA,UACA,SACA,WACA,SACA,SACA,UACA,QACA,SACA,WACA,UACA,SACA,SACA,YACA,UACA,SACA,QACA,UACA,OACA,YACA,OACA,QACA,QACA,UACA,UACA,UACA,SACA,SACA,QACA,UACA,SACA,SACA,WACA,WACA,WACA,YACA,UACA,YACA,UACA,QACA,SACA,SACA,YACA,QACA,UACA,SACA,SACA,WACA,UACA,YACA,WACA,WACA,SACA,UACA,UACA,UACA,UACA,UACA,UACA,WACA,WACA,SACA,WACA,OACA,QACA,SACA,YACA,SACA,WACA,SACA,WACA,UACA,SACA,YACA,WACA,WACA,YACA,UACA,QACA,QACA,YACA,WACA,UACA,UACA,SACA,QACA,UACA,SACA,YACA,WACA,UACA,OACA,SACA,OACA,UACA,OACA,WACA,YACA,SACA,QACA,OACA,WACA,UACA,QACA,WACA,SACA,UACA,WACA,YACA,WACA,UACA,UACA,YACA,WACA,UACA,UACA,YACA,WACA,SACA,SACA,QACA,QACA,UACA,WACA,QACA,OACA,YACA,UACA,WACA,UACA,UACA,SACA,WACA,UACA,QACA,QACA,WACA,WACA,UACA,WACA,YACA,UACA,YACA,QACA,WACA,WACA,UACA,WACA,QACA,UACA,OACA,WACA,SACA,UACA,UACA,QACA,SACA,UACA,QACA,QACA,SACA,YACA,MACA,QACA,SACA,QACA,QACA,QACA,SACA,QACA,OACA,SACA,OACA,UACA,SACA,SACA,QACA,OACA,UACA,SACA,UACA,SACA,WACA,YACA,YACA,WACA,YACA,UACA,SACA,SACA,YACA,UACA,UACA,WACA,YACA,UACA,OACA,UACA,QACA,QACA,WACA,SACA,OACA,WACA,SACA,OACA,QACA,QACA,WACA,QACA,YACA,SACA,QACA,WACA,UACA,QACA,WACA,UACA,WACA,SACA,MACA,OACA,SACA,QACA,SACA,QACA,QACA,YACA,UACA,OACA,OACA,YACA,WACA,UACA,SACA,WACA,WACA,WACA,WACA,SACA,WACA,SACA,YACA,UACA,SACA,YACA,OACA,OACA,QACA,UACA,OACA,OACA,UACA,SACA,WACA,SACA,OACA,QACA,WACA,SACA,OACA,SACA,OACA,OACA,WACA,QACA,UACA,SACA,SACA,WACA,SACA,MACA,OACA,YACA,YACA,YACA,YACA,YACA,UACA,OACA,OACA,SACA,OACA,QACA,OACA,OACA,UACA,UACA,YACA,QACA,YACA,YACA,QACA,QACA,QACA,MACA,UACA,QACA,SACA,WACA,UACA,WACA,SACA,UACA,UACA,UACA,UACA,QACA,UACA,UACA,YACA,UACA,WACA,UACA,YACA,UACA,OACA,QACA,QACA,MACA,UACA,UACA,OACA,OACA,OACA,WACA,WACA,SACA,WACA,QACA,UACA,OACA,MACA,YACA,UACA,QACA,MACA,SACA,QACA,QACA,OACA,SACA,SACA,OACA,QACA,MACA,UACA,QACA,MACA,WACA,OACA,YACA,QACA,YACA,UACA,UACA,QACA,OACA,MACA,SACA,SACA,OACA,SACA,YACA,YACA,UACA,Q,2SC3lPK,MAAeC,GAGpBttG,gBAAgBgiB,GACd,OAAQA,EAAK3P,MACX,IAAK,eACH,OAAO,IAAIk7F,GAAyBvrF,EAAK/Q,KAE3C,IAAK,WACH,OAAO,IAAIu8F,GAAiCxrF,EAAK/Q,IAAK+Q,EAAKqmE,YAE7D,QACE,OAAO,KAEb,EAGK,MAAMklB,GACX/tG,YAAoByR,GAAA,KAAAA,IAAAA,CAAc,CAE5BiN,QAAQmS,G,0CACZ,MAAMo9E,QAAiBp9E,EAAckyB,WAAW7/C,KAAKuO,KACrD,OAAO,IAAID,GAAmBy8F,EAChC,G,CAEAC,SACE,MAAO,CACLr7F,KAAM,eACNpB,IAAKvO,KAAKuO,IAEd,EAGK,MAAMu8F,GACXhuG,YAAoByR,EAAqBo3E,GAArB,KAAAp3E,IAAAA,EAAqB,KAAAo3E,WAAAA,CAA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,OAAQA,IAChEiwF,KAAM,CAACr4I,KAET,CACExE,QAASm6E,GACTl6E,SAAU,MAEZ,CACED,QAASs6E,GACTr6E,UAAU,GAEZ,CACED,QAASu/C,GACTo3B,SAAU,GACVkmE,KAAM,CAAC3hE,KAET,CACEl7E,QAAS0Y,GACTi+D,SAAU,GACVkmE,KAAM,CAACv9F,GAAkCznB,KAE3C,CACE73B,QAASuE,GACToyE,SAAU,GACVkmE,KAAM,CACJjlH,GACAC,GACAmX,GACAuQ,GACA9mC,GACAjU,GACAwU,GACAvU,GACAk7B,GACAhnB,GACAw2C,GACAptD,KAGJ,CACE/B,QAASsY,GACTskI,WAAY,CACV3sH,EACAwjH,EACA17G,EACAq7F,EACAnxH,EACA6qE,EACAlzD,EACAJ,EACAsW,IAEA,IAAI,GACFG,EACAwjH,EACA17G,EACAq7F,EACAnxH,GACA,IAAM6qE,EAAS30D,IAAI+mB,KACnBtlB,EACAJ,EACAsW,GAEJ+sH,KAAM,CACJjlH,GACAojD,GACAnjD,GACAgjD,GACA94E,GACA,MACAiX,GACAL,GACAgiE,KAGJ,CACE36E,QAASuY,GACTo+D,SAAU,GACVkmE,KAAM,CACJjlH,GACA71B,GACAuW,GACAK,KAGJ,CACE3Y,QAASwY,GACTqc,YAAatc,IAEf,CACEvY,QAAS0lE,GACTiR,SAAU2iE,GACVuD,KAAM,CAACtkI,GAA0Bsf,KAEnC,CACE73B,QCnRC,QDoRD22E,SE/QC,MACLv3E,YACU24B,EACAirC,EACAppD,EACAmjI,GAHA,KAAAhlH,WAAAA,EACA,KAAAirC,wBAAAA,EACA,KAAAppD,WAAAA,EACA,KAAAmjI,eAAAA,CACP,CAEGC,cAAc1T,G,0CAClB,IACE,MAAM2T,QAA4B36I,KAAK0gE,wBAAwBqmE,aAAaC,SACtEhnI,KAAKy1B,WAAW1yB,KAAK,SAAU,YAAa43I,GAAqB,GAAM,GAC7E36I,KAAKy6I,eAAev9H,Q,CACpB,MAAO3S,GAEP,MADAvK,KAAKsX,WAAWkF,MAAMjS,GAChBA,C,CAEV,G,GF+PIgwI,KAAM,CACJhlH,GACAirC,GACA9pD,GACAwhE,KAGJ,CACEx6E,QAASu6E,GACT5D,SG5RC,MACLv3E,YAAoByF,EAA4C+U,GAA5C,KAAA/U,iBAAAA,EAA4C,KAAA+U,WAAAA,CAAyB,CAEnF4F,S,0CACJ,IACEld,KAAKuC,iBAAiBQ,KAAK,S,CAC3B,MAAOwH,GAEP,MADAvK,KAAKsX,WAAWkF,MAAMjS,GAChBA,C,CAEV,G,GHmRIgwI,KAAM,CAACr4I,GAA6BwU,KAEtC,CACEhZ,QAASw6E,GACT3lD,YAAa0lD,IAEf,CACEv6E,QIrSC,MAAP,cACE,KAAAw+E,cAAgB,IAAI0+D,GAAA,CAGtB,GJkSMvmE,SAAU,GACVkmE,KAAM,CAAChlH,GAAuBlf,KAEhC,CAAE3Y,QAASgZ,GAAY4jI,WAAY,IAAM,IAAI1wC,IAAkB,IAC/D,CACElsG,QAAS4Y,GACT+9D,SAAU,GACVkmE,KAAM,CAACjlH,GAA0B71B,GAAwB4W,KAE3D,CACE3Y,QAAS2/B,GACTg3C,SAAU,GACVkmE,KAAM,CAAClkI,KAET,CACE3Y,QAAS6gC,GACT81C,SAAU,GACVkmE,KAAM,CAACv9F,GAAkCtmC,GAAYL,KAEvD,CAAE3Y,QAASgvC,GAAyB2nC,SAAU,GAAckmE,KAAM,CAAClkI,KACnE,CACE3Y,QAAS43B,GACT++C,SAAU,GACVkmE,KAAM,CACJv9F,GACAq7B,GACAliE,GACAO,GACAL,KAGJ,CACE3Y,QAASw/C,GACTm3B,SAAU,GACVkmE,KAAM,CAACjlH,GAA0B9e,GAA0BH,KAE7D,CACE3Y,QAASk0D,GACTyiB,SAAU,GACVkmE,KAAM,CAACjlH,GAA0Bjf,GAAyBkf,KAE5D,CACE73B,QAAS63B,GACT8+C,SAAU,GACVkmE,KAAM,CACJ7tG,GACAv2B,GACAknB,GACA4f,GACA26B,KAGJ,CACEl6E,QAAS66E,GACTlE,SAAU,GACVkmE,KAAM,CAAC7jI,GAAY6e,KAErB,CACE73B,QAASi/B,GACT03C,SAAU,GACVkmE,KAAM,CACJhlH,GACAmjD,GACAziE,GACAD,GACAsf,GACAhf,GACApU,GACAsU,GACAk/C,GACAh/C,GACAvU,GACAkU,GACAoiE,GACArV,GACAp3D,GACA4rE,KAGJ,CAAEl6E,QAASg/B,GAA+B23C,SAAU,IACpD,CACE32E,QAASg7E,GACTrE,SAAU,GACVkmE,KAAM,CAAClkI,KAET,CACE3Y,QAAS03C,GACTi/B,SAAU,GACVkmE,KAAM,CACJjlH,GACAoX,GACAl2B,GACAH,KAGJ,CACE3Y,QAASy3C,GACTk/B,SAAU,GACVkmE,KAAM,CACJvkI,GACAC,GACAK,GACAgf,GACAnf,GACAjU,GACA06B,GACAz6B,GACAkU,GACApU,GACAmzC,GACAyiC,GACAD,KAGJ,CACEl6E,QAAS2Y,GACTg+D,SAAU,GACVkmE,KAAM,CACJ3hE,GACAnB,GACAD,GACA9gE,GACAiiE,GACAjB,GACAC,KAGJ,CACEj6E,QAASi7E,GACTtE,SAAU,GACVkmE,KAAM,CAAC3hE,GAAwBnB,GAAgBC,KAEjD,CACEh6E,QAAS6iE,GACT8T,SAAU,GACVkmE,KAAM,CACJtkI,GACAD,GACAuf,GACAD,GACA0nB,KAGJ,CACEt/C,QAASk/B,GACTy3C,SAAU,GACVkmE,KAAM,CAACvkI,GAA0BU,GAAYjX,KAE/C,CACE/B,QAAS86E,GACTnE,SAAU,GACVkmE,KAAM,CACJ59G,GACAsgB,GACA1nB,GACA8H,GACAu6C,GACAlhE,GACAL,GACApU,GACAC,KAGJ,CACExE,QAASs/C,GACTq3B,SAAUy2D,GACVyP,KAAM,CAAChjE,KAET,CACE75E,QAAS26E,GACTiiE,WAqJN,SACEO,EACAvjI,EACA47F,GAEA,OAAOxgE,GAAY,yBACf,IAAIujE,GAAwC4kC,EAAuBvjI,EAAY47F,GAC/E,IAAID,GAA6B4nC,EAAuBvjI,EAAY47F,EAC1E,EA5JMqnC,KAAM,CAACv9F,GAAkCtmC,GAAYshE,KAEvD,CACEt6E,QAAS46E,GACTjE,SAAU,GACVkmE,KAAM,CAAChlH,GAAuBlf,GAAyBK,KAEzD,CACEhZ,QAAS6Y,GACT89D,SAAU,GACVkmE,KAAM,CACJvkI,GACAK,GACArK,GACAssE,KAGJ,CACE56E,QAAS8Y,GACT69D,SAAU,GAC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gBACA,SACA,iBACA,SACA,UACA,cACA,WAEA,eACA,gBACA,gBACA,iBACA,aACA,eAGc,GAAAC,wBAAoC,CAClD,kBACA,UACA,eACA,UAGc,GAAAC,sBAAkC,CAChD,QACA,WACA,SACA,OACA,SACA,QACA,QACA,UAIG,MAAMC,IACK,GAAAC,eAA2B,CACzC,mBACA,cACA,WACA,SACA,YACA,cACA,aACA,YACA,gBAGc,GAAAC,uBAAmC,IAC9CF,GAA4BC,eAC/B,eAGc,GAAAE,qBAAiC,CAC/C,UACA,YACA,kBACA,aACA,OACA,OAGc,GAAAC,0BAAsC,CACpD,UACA,YACA,kBACA,aACA,UAGc,GAAAC,qBAAiC,CAC/C,YACA,SACA,cACA,WACA,SACA,KACA,QACA,UACA,cACA,eACA,QACA,eACA,YACA,UAGc,GAAAC,0BAAsC,CACpD,YACA,SACA,cACA,WACA,QACA,UACA,eACA,YACA,UAGc,GAAAC,qBAAiC,CAC/C,SACA,WACA,gBACA,kBACA,QACA,UACA,cACA,cACA,WACA,aACA,SACA,QACA,UACA,QACA,UACA,kBACA,0BACA,mBAGc,GAAAC,0BAAsC,CACpD,QACA,UACA,QACA,UACA,kBACA,2BAGc,GAAAC,sBAAkC,CAChD,YACA,eACA,WACA,aACA,QACA,UACA,SACA,cACA,YACA,wBACA,mBACA,QACA,OACA,UACA,SACA,cACA,YACA,SACA,QACA,eACA,YACA,eACA,YACA,oBACA,iBACA,oBACA,iBACA,gBACA,kBACA,aACA,eACA,0BACA,wBACA,qBACA,UACA,cACA,cACA,eACA,UAGc,GAAAC,qBAAiC,CAC/C,WACA,cACA,UACA,YACA,QACA,UACA,SACA,cACA,YACA,uBACA,kBACA,QACA,OACA,UACA,SACA,cACA,YACA,SACA,QACA,UACA,YACA,gBACA,cACA,cACA,YACA,cACA,YACA,mBACA,iBACA,mBACA,iBACA,cACA,gBACA,iBACA,mBACA,yBACA,uBACA,cACA,qBACA,uBACA,gBACA,gBACA,UAGc,GAAAC,cAA0B,CACxC,MACA,MACA,O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","sources":["webpack:///webpack/runtime/chunk loaded","webpack:///webpack/runtime/create fake namespace object","webpack:///./src/popup/locales.ts","webpack:///../../libs/angular/src/components/toastr.component.ts","webpack:///../../libs/angular/src/pipes/credit-card-number.pipe.ts","webpack:///../../libs/common/src/abstractions/i18n.service.ts","webpack:///../../libs/common/src/abstractions/translation.service.ts","webpack:///../../libs/angular/src/pipes/i18n.pipe.ts","webpack:///../../libs/angular/src/pipes/search.pipe.ts","webpack:///../../libs/angular/src/pipes/user-name.pipe.ts","webpack:///../../libs/common/src/enums/organizationUserType.ts","webpack:///../../libs/angular/src/pipes/user-type.pipe.ts","webpack:///../../libs/angular/src/jslib.module.ts","webpack:///../../libs/common/src/enums/authenticationStatus.ts","webpack:///../../libs/common/src/abstractions/auth.service.ts","webpack:///../../libs/common/src/abstractions/messaging.service.ts","webpack:///../../libs/common/src/abstractions/keyConnector.service.ts","webpack:///../../libs/angular/src/guards/auth.guard.ts","webpack:///../../libs/angular/src/guards/lock.guard.ts","webpack:///../../libs/angular/src/guards/unauth.guard.ts","webpack:///../../libs/common/src/misc/utils.ts","webpack:///../../libs/common/src/abstractions/organization/organization.service.abstraction.ts","webpack:///../../libs/common/src/enums/eventType.ts","webpack:///../../libs/common/src/enums/organizationUserStatusType.ts","webpack:///../../libs/common/src/enums/policyType.ts","webpack:///../../libs/common/src/enums/secureNoteType.ts","webpack:///../../libs/common/src/enums/uriMatchType.ts","webpack:///../../libs/common/src/vault/enums/cipher-reprompt-type.ts","webpack:///../../libs/common/src/vault/enums/cipher-type.ts","webpack:///../../libs/common/src/enums/linkedIdType.ts","webpack:///../../libs/common/src/misc/linkedFieldOption.decorator.ts","webpack:///../../libs/common/src/vault/models/view/item.view.ts","webpack:///../../libs/common/src/services/cryptography/initializer-key.ts","webpack:///../../libs/common/src/enums/encryptionType.ts","webpack:///../../libs/common/src/vault/models/view/card.view.ts","webpack:///../../libs/common/src/models/domain/symmetric-crypto-key.ts","webpack:///../../libs/common/src/vault/models/view/attachment.view.ts","webpack:///../../libs/common/src/vault/models/view/field.view.ts","webpack:///../../libs/common/src/vault/models/view/identity.view.ts","webpack:///../../libs/common/src/vault/models/view/login-uri.view.ts","webpack:///../../libs/common/src/vault/models/view/login.view.ts","webpack:///../../libs/common/src/vault/models/view/password-history.view.ts","webpack:///../../libs/common/src/vault/models/view/secure-note.view.ts","webpack:///../../libs/common/src/vault/models/view/cipher.view.ts","webpack:///../../libs/common/src/vault/abstractions/cipher.service.ts","webpack:///../../libs/common/src/vault/abstractions/folder/folder.service.abstraction.ts","webpack:///../../libs/common/src/abstractions/platformUtils.service.ts","webpack:///../../libs/common/src/abstractions/audit.service.ts","webpack:///../../libs/common/src/abstractions/state.service.ts","webpack:///../../libs/common/src/abstractions/collection.service.ts","webpack:///../../libs/common/src/abstractions/event/event-collection.service.ts","webpack:///../../libs/common/src/abstractions/policy/policy.service.abstraction.ts","webpack:///../../libs/common/src/abstractions/log.service.ts","webpack:///../../libs/common/src/vault/abstractions/password-reprompt.service.ts","webpack:///../../libs/common/src/enums/clientType.ts","webpack:///../../libs/common/src/enums/deviceType.ts","webpack:///../../libs/angular/src/vault/components/add-edit.component.ts","webpack:///./src/browser/safariApp.ts","webpack:///./src/services/browserPlatformUtils.service.ts","webpack:///./src/browser/browserApi.ts","webpack:///./src/popup/services/popup-utils.service.ts","webpack:///../../libs/angular/src/directives/a11y-title.directive.ts","webpack:///../../libs/common/src/abstractions/validation.service.ts","webpack:///../../libs/angular/src/directives/api-action.directive.ts","webpack:///../../libs/angular/src/directives/box-row.directive.ts","webpack:///../../libs/common/src/models/domain/enc-string.ts","webpack:///../../libs/common/src/models/domain/domain-base.ts","webpack:///../../libs/common/src/models/domain/master-password-policy-options.ts","webpack:///../../libs/angular/src/components/callout.component.html","webpack:///../../libs/angular/src/components/callout.component.ts","webpack:///../../libs/angular/src/directives/input-verbatim.directive.ts","webpack:///../../libs/angular/src/directives/stop-click.directive.ts","webpack:///../../libs/common/src/enums/fieldType.ts","webpack:///../../libs/angular/src/vault/components/add-edit-custom-fields.component.ts","webpack:///../../libs/angular/src/directives/true-false-value.directive.ts","webpack:///./src/vault/popup/components/vault/add-edit-custom-fields.component.html","webpack:///./src/vault/popup/components/vault/add-edit-custom-fields.component.ts","webpack:///./src/vault/popup/components/vault/add-edit.component.html","webpack:///./src/vault/popup/components/vault/add-edit.component.ts","webpack:///../../libs/common/src/models/domain/enc-array-buffer.ts","webpack:///../../libs/common/src/models/response/base.response.ts","webpack:///../../libs/common/src/models/response/error.response.ts","webpack:///../../libs/common/src/abstractions/crypto.service.ts","webpack:///../../libs/common/src/abstractions/api.service.ts","webpack:///../../libs/common/src/abstractions/fileDownload/fileDownload.service.ts","webpack:///../../libs/angular/src/vault/components/attachments.component.ts","webpack:///./src/vault/popup/components/vault/attachments.component.html","webpack:///./src/vault/popup/components/vault/attachments.component.ts","webpack:///../../libs/angular/src/vault/vault-filter/models/vault-filter.model.ts","webpack:///../../libs/common/src/models/domain/tree-node.ts","webpack:///../../libs/common/src/misc/serviceUtils.ts","webpack:///../../libs/common/src/vault/models/view/folder.view.ts","webpack:///../../libs/angular/src/vault/vault-filter/models/dynamic-tree-node.model.ts","webpack:///../../libs/angular/src/vault/vault-filter/services/vault-filter.service.ts","webpack:///./src/vault/services/vault-filter.service.ts","webpack:///./src/autofill/services/abstractions/autofill.service.ts","webpack:///../../libs/common/src/abstractions/broadcaster.service.ts","webpack:///../../libs/common/src/vault/abstractions/sync/sync.service.abstraction.ts","webpack:///../../libs/common/src/abstractions/search.service.ts","webpack:///../../libs/angular/src/directives/autofocus.directive.ts","webpack:///../../libs/common/src/abstractions/environment.service.ts","webpack:///../../libs/angular/src/directives/fallback-src.directive.ts","webpack:///../../libs/angular/src/vault/components/icon.component.html","webpack:///../../libs/angular/src/vault/components/icon.component.ts","webpack:///../../libs/common/src/abstractions/totp.service.ts","webpack:///../../libs/angular/src/directives/stop-prop.directive.ts","webpack:///./src/vault/popup/components/action-buttons.component.html","webpack:///./src/vault/popup/components/action-buttons.component.ts","webpack:///./src/vault/popup/components/cipher-row.component.html","webpack:///./src/vault/popup/components/cipher-row.component.ts","webpack:///./src/popup/components/pop-out.component.html","webpack:///./src/popup/components/pop-out.component.ts","webpack:///./src/vault/popup/components/vault/vault-select.component.html","webpack:///./src/vault/popup/components/vault/vault-select.component.ts","webpack:///./src/vault/popup/components/vault/current-tab.component.html","webpack:///./src/vault/popup/components/vault/current-tab.component.ts","webpack:///../../libs/angular/src/vault/components/password-history.component.ts","webpack:///../../libs/angular/src/pipes/color-password.pipe.ts","webpack:///./src/vault/popup/components/vault/password-history.component.html","webpack:///./src/vault/popup/components/vault/password-history.component.ts","webpack:///../../libs/common/src/types/checkable.ts","webpack:///../../libs/angular/src/components/share.component.ts","webpack:///./src/vault/popup/components/vault/share.component.html","webpack:///./src/vault/popup/components/vault/share.component.ts","webpack:///./src/models/browserComponentState.ts","webpack:///./src/models/browserGroupingsComponentState.ts","webpack:///./src/services/abstractions/browser-state.service.ts","webpack:///./src/vault/popup/components/vault/vault-filter.component.html","webpack:///./src/vault/popup/components/vault/vault-filter.component.ts","webpack:///../../libs/angular/src/vault/components/vault-items.component.ts","webpack:///./src/vault/popup/components/vault/vault-items.component.html","webpack:///./src/vault/popup/components/vault/vault-items.component.ts","webpack:///../../libs/common/src/abstractions/token.service.ts","webpack:///../../libs/angular/src/vault/components/view.component.ts","webpack:///../../libs/angular/src/directives/select-copy.directive.ts","webpack:///../../libs/angular/src/vault/components/view-custom-fields.component.ts","webpack:///../../libs/angular/src/pipes/color-password-count.pipe.ts","webpack:///./src/vault/popup/components/vault/view-custom-fields.component.html","webpack:///./src/vault/popup/components/vault/view-custom-fields.component.ts","webpack:///./src/vault/popup/components/vault/view.component.html","webpack:///./src/vault/popup/components/vault/view.component.ts","webpack:///../../libs/angular/src/components/environment.component.ts","webpack:///../../libs/common/src/models/domain/environment-urls.ts","webpack:///../../libs/common/src/services/environment.service.ts","webpack:///../../libs/common/src/misc/flags.ts","webpack:///./src/flags.ts","webpack:///./src/services/browser-environment.service.ts","webpack:///./src/popup/accounts/environment.component.html","webpack:///./src/popup/accounts/environment.component.ts","webpack:///../../libs/common/src/models/request/password-hint.request.ts","webpack:///../../libs/common/src/abstractions/login.service.ts","webpack:///../../libs/angular/src/components/hint.component.ts","webpack:///./src/popup/accounts/hint.component.ts","webpack:///./src/popup/accounts/hint.component.html","webpack:///../../libs/common/src/enums/hashPurpose.ts","webpack:///../../libs/common/src/enums/keySuffixOptions.ts","webpack:///./src/popup/accounts/home.component.html","webpack:///./src/popup/accounts/home.component.ts","webpack:///../../libs/common/src/models/request/secret-verification.request.ts","webpack:///../../libs/common/src/abstractions/vaultTimeout/vaultTimeout.service.ts","webpack:///../../libs/common/src/abstractions/vaultTimeout/vaultTimeoutSettings.service.ts","webpack:///../../libs/angular/src/components/lock.component.ts","webpack:///./src/models/biometricErrors.ts","webpack:///./src/popup/components/private-mode-warning.component.html","webpack:///./src/popup/components/private-mode-warning.component.ts","webpack:///./src/popup/accounts/lock.component.html","webpack:///./src/popup/accounts/lock.component.ts","webpack:///../../libs/common/src/enums/authRequestType.ts","webpack:///../../libs/common/src/enums/authenticationType.ts","webpack:///../../libs/common/src/models/domain/log-in-credentials.ts","webpack:///../../libs/common/src/models/request/passwordless-create-auth.request.ts","webpack:///../../libs/common/src/misc/captcha_iframe.ts","webpack:///../../libs/common/src/misc/iframe_component.ts","webpack:///../../libs/angular/src/components/captchaProtected.component.ts","webpack:///../../libs/common/src/abstractions/cryptoFunction.service.ts","webpack:///../../libs/common/src/abstractions/appId.service.ts","webpack:///../../libs/common/src/abstractions/passwordGeneration.service.ts","webpack:///../../libs/common/src/abstractions/anonymousHub.service.ts","webpack:///../../libs/angular/src/components/login-with-device.component.ts","webpack:///./src/popup/accounts/login-with-device.component.html","webpack:///./src/popup/accounts/login-with-device.component.ts","webpack:///../../libs/common/src/abstractions/formValidationErrors.service.ts","webpack:///../../libs/angular/src/components/login.component.ts","webpack:///./src/popup/accounts/login.component.html","webpack:///./src/popup/accounts/login.component.ts","webpack:///../../libs/common/src/models/domain/kdf-config.ts","webpack:///../../libs/common/src/enums/kdfType.ts","webpack:///../../libs/common/src/models/request/keys.request.ts","webpack:///../../libs/common/src/models/request/register.request.ts","webpack:///../../libs/angular/src/validators/inputsFieldMatch.validator.ts","webpack:///../../libs/angular/src/components/register.component.ts","webpack:///../../libs/angular/src/shared/components/password-strength/password-strength.component.html","webpack:///../../libs/angular/src/shared/components/password-strength/password-strength.component.ts","webpack:///./src/popup/accounts/register.component.html","webpack:///./src/popup/accounts/register.component.ts","webpack:///../../libs/common/src/abstractions/organization/organization-api.service.abstraction.ts","webpack:///../../libs/angular/src/components/remove-password.component.ts","webpack:///./src/popup/accounts/remove-password.component.html","webpack:///./src/popup/accounts/remove-password.component.ts","webpack:///../../libs/common/src/abstractions/organization-user/requests/organization-user-reset-password-enrollment.request.ts","webpack:///../../libs/common/src/models/request/set-password.request.ts","webpack:///../../libs/angular/src/components/change-password.component.ts","webpack:///../../libs/common/src/abstractions/policy/policy-api.service.abstraction.ts","webpack:///../../libs/common/src/abstractions/organization-user/organization-user.service.ts","webpack:///../../libs/angular/src/components/set-password.component.ts","webpack:///./src/popup/accounts/set-password.component.html","webpack:///./src/popup/accounts/set-password.component.ts","webpack:///../../libs/angular/src/components/sso.component.ts","webpack:///./src/popup/accounts/sso.component.ts","webpack:///../../libs/common/src/abstractions/twoFactor.service.ts","webpack:///../../libs/angular/src/components/two-factor-options.component.ts","webpack:///./src/popup/accounts/two-factor-options.component.html","webpack:///./src/popup/accounts/two-factor-options.component.ts","webpack:///../../libs/common/src/enums/twoFactorProviderType.ts","webpack:///../../libs/common/src/misc/webauthn_iframe.ts","webpack:///../../libs/common/src/models/request/identity-token/token-two-factor.request.ts","webpack:///../../libs/common/src/models/request/two-factor-email.request.ts","webpack:///../../libs/common/src/services/twoFactor.service.ts","webpack:///../../libs/angular/src/components/two-factor.component.ts","webpack:///./src/popup/accounts/two-factor.component.html","webpack:///./src/popup/accounts/two-factor.component.ts","webpack:///../../libs/common/src/models/request/update-temp-password.request.ts","webpack:///../../libs/common/src/abstractions/organization-user/requests/organization-user-reset-password.request.ts","webpack:///../../libs/angular/src/components/update-temp-password.component.ts","webpack:///./src/popup/accounts/update-temp-password.component.html","webpack:///./src/popup/accounts/update-temp-password.component.ts","webpack:///../../libs/common/src/abstractions/usernameGeneration.service.ts","webpack:///../../libs/angular/src/components/generator.component.ts","webpack:///./src/popup/generator/generator.component.html","webpack:///./src/popup/generator/generator.component.ts","webpack:///../../libs/common/src/enums/sendType.ts","webpack:///../../libs/angular/src/components/password-generator-history.component.ts","webpack:///./src/popup/generator/password-generator-history.component.html","webpack:///./src/popup/generator/password-generator-history.component.ts","webpack:///../../libs/common/src/models/view/send-file.view.ts","webpack:///../../libs/common/src/models/view/send-text.view.ts","webpack:///../../libs/common/src/models/view/send.view.ts","webpack:///../../libs/common/src/abstractions/send.service.ts","webpack:///../../libs/angular/src/components/send/efflux-dates.component.ts","webpack:///../../libs/angular/src/components/send/add-edit.component.ts","webpack:///./src/popup/send/efflux-dates.component.html","webpack:///./src/popup/send/efflux-dates.component.ts","webpack:///./src/popup/send/send-add-edit.component.html","webpack:///./src/popup/send/send-add-edit.component.ts","webpack:///../../libs/angular/src/components/send/send.component.ts","webpack:///./src/models/browserSendComponentState.ts","webpack:///./src/popup/components/send-list.component.html","webpack:///./src/popup/components/send-list.component.ts","webpack:///./src/popup/send/send-groupings.component.html","webpack:///./src/popup/send/send-groupings.component.ts","webpack:///./src/popup/send/send-type.component.html","webpack:///./src/popup/send/send-type.component.ts","webpack:///./src/popup/services/debounceNavigationService.ts","webpack:///./src/popup/settings/autofill.component.html","webpack:///./src/popup/settings/autofill.component.ts","webpack:///./src/popup/settings/excluded-domains.component.html","webpack:///./src/popup/settings/excluded-domains.component.ts","webpack:///../../libs/common/src/enums/encryptedExportType.ts","webpack:///../../libs/common/src/abstractions/export.service.ts","webpack:///../../libs/common/src/abstractions/userVerification/userVerification.service.abstraction.ts","webpack:///../../libs/angular/src/components/export.component.ts","webpack:///../../libs/common/src/enums/verificationType.ts","webpack:///../../libs/angular/src/components/export-scope-callout.component.html","webpack:///../../libs/angular/src/components/export-scope-callout.component.ts","webpack:///../../libs/angular/src/components/user-verification.component.ts","webpack:///./src/popup/components/user-verification.component.html","webpack:///./src/popup/components/user-verification.component.ts","webpack:///./src/popup/settings/export.component.html","webpack:///./src/popup/settings/export.component.ts","webpack:///../../libs/common/src/vault/abstractions/folder/folder-api.service.abstraction.ts","webpack:///../../libs/angular/src/vault/components/folder-add-edit.component.ts","webpack:///../../libs/common/src/enums/themeType.ts","webpack:///./src/popup/settings/folder-add-edit.component.html","webpack:///./src/popup/settings/folder-add-edit.component.ts","webpack:///./src/popup/settings/folders.component.html","webpack:///./src/popup/settings/folders.component.ts","webpack:///../../libs/angular/src/services/theming/theming.service.abstraction.ts","webpack:///./src/popup/settings/options.component.html","webpack:///./src/popup/settings/options.component.ts","webpack:///../../libs/angular/src/vault/components/premium.component.ts","webpack:///./src/popup/settings/premium.component.html","webpack:///./src/popup/settings/premium.component.ts","webpack:///../../libs/angular/src/components/modal/modal.ref.ts","webpack:///../../libs/angular/src/components/modal/dynamic-modal.component.ts","webpack:///../../libs/angular/src/components/modal/modal-injector.ts","webpack:///../../libs/angular/src/services/modal.service.ts","webpack:///../../libs/angular/src/components/set-pin.component.ts","webpack:///./src/popup/components/set-pin.component.html","webpack:///./src/popup/components/set-pin.component.ts","webpack:///../../libs/common/src/abstractions/config/config.service.abstraction.ts","webpack:///./src/popup/settings/about.component.html","webpack:///./src/popup/settings/about.component.ts","webpack:///../../libs/angular/src/components/settings/vault-timeout-input.component.ts","webpack:///./src/popup/settings/vault-timeout-input.component.html","webpack:///./src/popup/settings/vault-timeout-input.component.ts","webpack:///./src/popup/settings/settings.component.html","webpack:///./src/popup/settings/settings.component.ts","webpack:///./src/popup/settings/sync.component.ts","webpack:///./src/popup/tabs.component.html","webpack:///./src/popup/settings/sync.component.html","webpack:///./src/popup/tabs.component.ts","webpack:///../../libs/angular/src/components/collections.component.ts","webpack:///./src/popup/vault/collections.component.html","webpack:///./src/popup/vault/collections.component.ts","webpack:///./src/popup/app-routing.module.ts","webpack:///./src/popup/app-routing.animations.ts","webpack:///./src/popup/app.component.ts","webpack:///../../libs/angular/src/services/injection-tokens.ts","webpack:///../../libs/common/src/abstractions/account/account.service.ts","webpack:///../../libs/common/src/enums/stateVersion.ts","webpack:///../../libs/common/src/abstractions/config/config-api.service.abstraction.ts","webpack:///../../libs/common/src/abstractions/encrypt.service.ts","webpack:///../../libs/common/src/abstractions/event/event-upload.service.ts","webpack:///../../libs/common/src/abstractions/fileUpload.service.ts","webpack:///../../libs/common/src/abstractions/notifications.service.ts","webpack:///../../libs/common/src/abstractions/provider.service.ts","webpack:///../../libs/common/src/abstractions/settings.service.ts","webpack:///../../libs/common/src/abstractions/stateMigration.service.ts","webpack:///../../libs/common/src/abstractions/storage.service.ts","webpack:///../../libs/common/src/abstractions/userVerification/userVerification-api.service.abstraction.ts","webpack:///../../libs/common/src/factories/accountFactory.ts","webpack:///../../libs/common/src/factories/globalStateFactory.ts","webpack:///../../libs/common/src/factories/stateFactory.ts","webpack:///../../libs/common/src/models/data/server-config.data.ts","webpack:///../../libs/common/src/models/domain/account.ts","webpack:///../../libs/common/src/models/domain/window-state.ts","webpack:///../../libs/common/src/models/domain/global-state.ts","webpack:///../../libs/common/src/models/request/update-avatar.request.ts","webpack:///../../libs/common/src/services/account/avatar-update.service.ts","webpack:///../../libs/common/src/enums/notificationType.ts","webpack:///../../libs/common/src/models/response/notification.response.ts","webpack:///../../libs/common/src/services/anonymousHub.service.ts","webpack:///../../libs/common/src/models/request/device.request.ts","webpack:///../../libs/common/src/models/request/identity-token/token.request.ts","webpack:///../../libs/common/src/models/request/identity-token/user-api-token.request.ts","webpack:///../../libs/common/src/models/response/api-key.response.ts","webpack:///../../libs/common/src/models/response/auth-request.response.ts","webpack:///../../libs/common/src/models/response/authentication/register.response.ts","webpack:///../../libs/common/src/models/response/billing.response.ts","webpack:///../../libs/common/src/models/response/billing-history.response.ts","webpack:///../../libs/common/src/models/response/billing-payment.response.ts","webpack:///../../libs/common/src/models/response/breach-account.response.ts","webpack:///../../libs/common/src/models/response/selection-read-only.response.ts","webpack:///../../libs/common/src/models/response/collection.response.ts","webpack:///../../libs/common/src/models/response/device-verification.response.ts","webpack:///../../libs/common/src/models/response/global-domain.response.ts","webpack:///../../libs/common/src/models/response/domains.response.ts","webpack:///../../libs/common/src/models/api/card.api.ts","webpack:///../../libs/common/src/models/api/field.api.ts","webpack:///../../libs/common/src/models/api/identity.api.ts","webpack:///../../libs/common/src/models/api/login-uri.api.ts","webpack:///../../libs/common/src/models/api/login.api.ts","webpack:///../../libs/common/src/models/api/secure-note.api.ts","webpack:///../../libs/common/src/vault/models/response/attachment.response.ts","webpack:///../../libs/common/src/vault/models/response/password-history.response.ts","webpack:///../../libs/common/src/vault/models/response/cipher.response.ts","webpack:///../../libs/common/src/models/response/emergency-access.response.ts","webpack:///../../libs/common/src/models/response/event.response.ts","webpack:///../../libs/common/src/models/response/identity-captcha.response.ts","webpack:///../../libs/common/src/models/response/identity-token.response.ts","webpack:///../../libs/common/src/models/response/identity-two-factor.response.ts","webpack:///../../libs/common/src/models/response/key-connector-user-key.response.ts","webpack:///../../libs/common/src/models/response/list.response.ts","webpack:///../../libs/common/src/models/response/organization-connection.response.ts","webpack:///../../libs/common/src/models/response/organization-export.response.ts","webpack:///../../libs/common/src/models/response/organization-sponsorship-sync-status.response.ts","webpack:///../../libs/common/src/models/api/permissions.api.ts","webpack:///../../libs/common/src/models/response/profile-organization.response.ts","webpack:///../../libs/common/src/models/response/profile-provider-organization.response.ts","webpack:///../../libs/common/src/models/response/profile-provider.response.ts","webpack:///../../libs/common/src/models/response/profile.response.ts","webpack:///../../libs/common/src/models/response/payment.response.ts","webpack:///../../libs/common/src/models/response/plan.response.ts","webpack:///../../libs/common/src/models/response/policy.response.ts","webpack:///../../libs/common/src/models/response/prelogin.response.ts","webpack:///../../libs/common/src/models/response/provider/provider-organization.response.ts","webpack:///../../libs/common/src/abstractions/organization-user/responses/organization-user-bulk-public-key.response.ts","webpack:///../../libs/common/src/models/response/provider/provider-user-bulk-public-key.response.ts","webpack:///../../libs/common/src/models/response/provider/provider-user-bulk.response.ts","webpack:///../../libs/common/src/models/response/provider/provider-user.response.ts","webpack:///../../libs/common/src/models/response/provider/provider.response.ts","webpack:///../../libs/common/src/models/api/send-file.api.ts","webpack:///../../libs/common/src/models/api/send-text.api.ts","webpack:///../../libs/common/src/models/response/send-access.response.ts","webpack:///../../libs/common/src/models/response/send-file-download-data.response.ts","webpack:///../../libs/common/src/models/response/send.response.ts","webpack:///../../libs/common/src/models/response/send-file-upload-data.response.ts","webpack:///../../libs/common/src/models/response/sso-pre-validate.response.ts","webpack:///../../libs/common/src/models/response/subscription.response.ts","webpack:///../../libs/common/src/models/response/tax-info.response.ts","webpack:///../../libs/common/src/models/response/tax-rate.response.ts","webpack:///../../libs/common/src/models/response/two-factor-authenticator.response.ts","webpack:///../../libs/common/src/models/response/two-factor-duo.response.ts","webpack:///../../libs/common/src/models/response/two-factor-email.response.ts","webpack:///../../libs/common/src/models/response/two-factor-provider.response.ts","webpack:///../../libs/common/src/models/response/two-factor-recover.response.ts","webpack:///../../libs/common/src/models/response/two-factor-web-authn.response.ts","webpack:///../../libs/common/src/models/response/two-factor-yubi-key.response.ts","webpack:///../../libs/common/src/models/response/user-key.response.ts","webpack:///../../libs/common/src/vault/models/response/attachment-upload-data.response.ts","webpack:///../../libs/common/src/vault/models/response/folder.response.ts","webpack:///../../libs/common/src/vault/models/response/sync.response.ts","webpack:///../../libs/common/src/enums/htmlStorageLocation.ts","webpack:///../../libs/common/src/services/api.service.ts","webpack:///../../libs/common/src/services/appId.service.ts","webpack:///../../libs/common/src/services/audit.service.ts","webpack:///../../libs/common/src/misc/throttle.ts","webpack:///../../libs/common/src/models/request/identity-token/password-token.request.ts","webpack:///../../libs/common/src/models/domain/auth-result.ts","webpack:///../../libs/common/src/misc/logInStrategies/logIn.strategy.ts","webpack:///../../libs/common/src/misc/logInStrategies/passwordLogin.strategy.ts","webpack:///../../libs/common/src/misc/logInStrategies/passwordlessLogin.strategy.ts","webpack:///../../libs/common/src/models/request/identity-token/sso-token.request.ts","webpack:///../../libs/common/src/misc/logInStrategies/ssoLogin.strategy.ts","webpack:///../../libs/common/src/misc/logInStrategies/user-api-login.strategy.ts","webpack:///../../libs/common/src/models/request/passwordless-auth.request.ts","webpack:///../../libs/common/src/models/request/prelogin.request.ts","webpack:///../../libs/common/src/services/auth.service.ts","webpack:///../../libs/common/src/models/data/collection.data.ts","webpack:///../../libs/common/src/models/view/collection.view.ts","webpack:///../../libs/common/src/models/domain/collection.ts","webpack:///../../libs/common/src/services/collection.service.ts","webpack:///../../libs/common/src/models/response/server-config.response.ts","webpack:///../../libs/common/src/abstractions/config/server-config.ts","webpack:///../../libs/common/src/enums/logLevelType.ts","webpack:///../../libs/common/src/services/config/config.service.ts","webpack:///../../libs/common/src/services/consoleLog.service.ts","webpack:///../../libs/common/src/misc/sequentialize.ts","webpack:///../../libs/common/src/misc/wordlist.ts","webpack:///../../libs/common/src/models/domain/encrypted-organization-key.ts","webpack:///../../libs/common/src/services/crypto.service.ts","webpack:///../../libs/common/src/models/domain/encrypted-object.ts","webpack:///../../libs/common/src/services/cryptography/encrypt.service.implementation.ts","webpack:///../../libs/common/src/vault/models/data/attachment.data.ts","webpack:///../../libs/common/src/vault/models/data/card.data.ts","webpack:///../../libs/common/src/vault/models/data/field.data.ts","webpack:///../../libs/common/src/vault/models/data/identity.data.ts","webpack:///../../libs/common/src/vault/models/data/login-uri.data.ts","webpack:///../../libs/common/src/vault/models/data/login.data.ts","webpack:///../../libs/common/src/vault/models/data/password-history.data.ts","webpack:///../../libs/common/src/vault/models/data/secure-note.data.ts","webpack:///../../libs/common/src/vault/models/data/cipher.data.ts","webpack:///../../libs/common/src/vault/models/domain/attachment.ts","webpack:///../../libs/common/src/vault/models/domain/card.ts","webpack:///../../libs/common/src/vault/models/domain/field.ts","webpack:///../../libs/common/src/vault/models/domain/identity.ts","webpack:///../../libs/common/src/vault/models/domain/login-uri.ts","webpack:///../../libs/common/src/vault/models/domain/login.ts","webpack:///../../libs/common/src/vault/models/domain/password.ts","webpack:///../../libs/common/src/vault/models/domain/secure-note.ts","webpack:///../../libs/common/src/vault/models/domain/cipher.ts","webpack:///../../libs/common/src/services/cryptography/get-class-initializer.ts","webpack:///../../libs/common/src/services/cryptography/multithread-encrypt.service.implementation.ts","webpack:///../../libs/common/src/models/data/event.data.ts","webpack:///../../libs/common/src/services/event/event-collection.service.ts","webpack:///../../libs/common/src/models/request/event.request.ts","webpack:///../../libs/common/src/services/event/event-upload.service.ts","webpack:///../../libs/common/src/models/export/card.export.ts","webpack:///../../libs/common/src/models/export/field.export.ts","webpack:///../../libs/common/src/models/export/identity.export.ts","webpack:///../../libs/common/src/models/export/login-uri.export.ts","webpack:///../../libs/common/src/models/export/login.export.ts","webpack:///../../libs/common/src/models/export/secure-note.export.ts","webpack:///../../libs/common/src/models/export/cipher.export.ts","webpack:///../../libs/common/src/models/export/cipher-with-ids.export.ts","webpack:///../../libs/common/src/models/export/collection.export.ts","webpack:///../../libs/common/src/models/export/collection-with-id.export.ts","webpack:///../../libs/common/src/models/export/event.export.ts","webpack:///../../libs/common/src/vault/models/domain/folder.ts","webpack:///../../libs/common/src/models/export/folder.export.ts","webpack:///../../libs/common/src/models/export/folder-with-id.export.ts","webpack:///../../libs/common/src/enums/fileUploadType.ts","webpack:///../../libs/common/src/services/export.service.ts","webpack:///../../libs/common/src/services/azureFileUpload.service.ts","webpack:///../../libs/common/src/services/bitwardenFileUpload.service.ts","webpack:///../../libs/common/src/services/fileUpload.service.ts","webpack:///../../libs/common/src/models/request/account/set-key-connector-key.request.ts","webpack:///../../libs/common/src/models/request/key-connector-user-key.request.ts","webpack:///../../libs/common/src/services/keyConnector.service.ts","webpack:///../../libs/common/src/services/login.service.ts","webpack:///../../libs/common/src/services/notifications.service.ts","webpack:///../../libs/common/src/abstractions/organization-user/responses/organization-user.response.ts","webpack:///../../libs/common/src/abstractions/organization-user/responses/organization-user-bulk.response.ts","webpack:///../../libs/common/src/services/organization-user/requests/organization-user-bulk.request.ts","webpack:///../../libs/common/src/enums/ssoEnums.ts","webpack:///../../libs/common/src/models/response/organization-api-key-information.response.ts","webpack:///../../libs/common/src/models/response/organization-auto-enroll-status.response.ts","webpack:///../../libs/common/src/models/response/keys.response.ts","webpack:///../../libs/common/src/models/response/organization-keys.response.ts","webpack:///../../libs/common/src/models/response/organization.response.ts","webpack:///../../libs/common/src/models/response/organization-subscription.response.ts","webpack:///../../libs/common/src/models/api/sso-config.api.ts","webpack:///../../libs/common/src/models/response/organization/organization-sso.response.ts","webpack:///../../libs/common/src/models/domain/organization.ts","webpack:///../../libs/common/src/services/organization/organization.service.ts","webpack:///../../libs/common/src/models/domain/generated-password-history.ts","webpack:///../../libs/common/src/models/domain/password-generator-policy-options.ts","webpack:///../../libs/common/src/services/passwordGeneration.service.ts","webpack:///../../libs/common/src/models/data/policy.data.ts","webpack:///../../libs/common/src/services/policy/policy-api.service.ts","webpack:///../../libs/common/src/models/domain/policy.ts","webpack:///../../libs/common/src/models/domain/reset-password-policy-options.ts","webpack:///../../libs/common/src/enums/providerUserStatusType.ts","webpack:///../../libs/common/src/enums/providerUserType.ts","webpack:///../../libs/common/src/services/policy/policy.service.ts","webpack:///../../libs/common/src/models/domain/provider.ts","webpack:///../../libs/common/src/services/provider.service.ts","webpack:///../../libs/common/src/services/search.service.ts","webpack:///../../libs/common/src/models/data/send-file.data.ts","webpack:///../../libs/common/src/models/data/send-text.data.ts","webpack:///../../libs/common/src/models/data/send.data.ts","webpack:///../../libs/common/src/models/domain/send-file.ts","webpack:///../../libs/common/src/models/domain/send-text.ts","webpack:///../../libs/common/src/models/domain/send.ts","webpack:///../../libs/common/src/models/request/send.request.ts","webpack:///../../libs/common/src/services/send.service.ts","webpack:///../../libs/common/src/enums/storageLocation.ts","webpack:///../../libs/common/src/services/settings.service.ts","webpack:///../../libs/common/src/models/data/provider.data.ts","webpack:///../../libs/common/src/models/domain/state.ts","webpack:///../../libs/common/src/vault/models/data/folder.data.ts","webpack:///../../libs/common/src/services/state.service.ts","webpack:///../../libs/common/src/services/token.service.ts","webpack:///../../libs/common/src/services/stateMigration.service.ts","webpack:///../../libs/common/src/services/totp.service.ts","webpack:///../../libs/common/src/services/userVerification/userVerification-api.service.ts","webpack:///../../libs/common/src/models/request/account/verify-otp.request.ts","webpack:///../../libs/common/src/services/userVerification/userVerification.service.ts","webpack:///../../libs/common/src/email-forwarders/anon-addy-forwarder.ts","webpack:///../../libs/common/src/email-forwarders/duck-duck-go-forwarder.ts","webpack:///../../libs/common/src/email-forwarders/fastmail-forwarder.ts","webpack:///../../libs/common/src/email-forwarders/firefox-relay-forwarder.ts","webpack:///../../libs/common/src/email-forwarders/forwarder-options.ts","webpack:///../../libs/common/src/email-forwarders/simple-login-forwarder.ts","webpack:///../../libs/common/src/services/usernameGeneration.service.ts","webpack:///../../libs/common/src/services/vaultTimeout/vaultTimeout.service.ts","webpack:///../../libs/common/src/services/vaultTimeout/vaultTimeoutSettings.service.ts","webpack:///../../libs/common/src/models/domain/decrypt-parameters.ts","webpack:///../../libs/common/src/services/webCryptoFunction.service.ts","webpack:///../../libs/common/src/vault/abstractions/sync/sync-notifier.service.abstraction.ts","webpack:///../../libs/common/src/vault/models/domain/sorted-ciphers-cache.ts","webpack:///../../libs/common/src/vault/models/request/cipher-bulk-delete.request.ts","webpack:///../../libs/common/src/vault/models/request/cipher-bulk-move.request.ts","webpack:///../../libs/common/src/vault/models/request/cipher-bulk-restore.request.ts","webpack:///../../libs/common/src/vault/models/request/attachment.request.ts","webpack:///../../libs/common/src/vault/models/request/cipher.request.ts","webpack:///../../libs/common/src/vault/models/request/cipher-with-id.request.ts","webpack:///../../libs/common/src/vault/models/request/cipher-bulk-share.request.ts","webpack:///../../libs/common/src/vault/models/request/cipher-collections.request.ts","webpack:///../../libs/common/src/vault/models/request/cipher-create.request.ts","webpack:///../../libs/common/src/vault/models/request/cipher-partial.request.ts","webpack:///../../libs/common/src/vault/models/request/cipher-share.request.ts","webpack:///../../libs/common/src/vault/services/cipher.service.ts","webpack:///../../libs/common/src/vault/models/request/folder.request.ts","webpack:///../../libs/common/src/vault/services/folder/folder-api.service.ts","webpack:///../../libs/common/src/vault/services/folder/folder.service.ts","webpack:///../../libs/common/src/vault/services/sync/sync-notifier.service.ts","webpack:///../../libs/common/src/models/data/organization.data.ts","webpack:///../../libs/common/src/vault/services/sync/sync.service.ts","webpack:///../../libs/angular/src/vault/components/password-reprompt.component.ts","webpack:///../../libs/angular/src/vault/services/password-reprompt.service.ts","webpack:///../../libs/angular/src/services/broadcaster.service.ts","webpack:///../../libs/common/src/services/broadcaster.service.ts","webpack:///../../libs/angular/src/services/theming/themeBuilder.ts","webpack:///../../libs/angular/src/services/theming/theming.service.ts","webpack:///../../libs/angular/src/services/jslib-services.module.ts","webpack:///../../libs/common/src/abstractions/account/account-api.service.ts","webpack:///../../libs/common/src/services/account/account-api.service.ts","webpack:///../../libs/common/src/services/account/account.service.ts","webpack:///../../libs/common/src/abstractions/account/avatar-update.service.ts","webpack:///../../libs/common/src/services/organization-user/organization-user.service.implementation.ts","webpack:///../../libs/common/src/services/formValidationErrors.service.ts","webpack:///../../libs/common/src/services/organization/organization-api.service.ts","webpack:///../../libs/common/src/services/config/config-api.service.ts","webpack:///../../libs/common/src/services/validation.service.ts","webpack:///../../libs/common/src/services/container.service.ts","webpack:///../../libs/common/src/services/memoryStorage.service.ts","webpack:///../../libs/common/src/services/system.service.ts","webpack:///./src/background/models/notificationQueueMessageType.ts","webpack:///./src/autofill/background/context-menus.background.ts","webpack:///./src/autofill/background/notification.background.ts","webpack:///./src/autofill/background/tabs.background.ts","webpack:///./src/background/service_factories/factory-options.ts","webpack:///./src/services/abstractChromeStorageApi.service.ts","webpack:///./src/services/browserLocalStorage.service.ts","webpack:///./src/services/browserMemoryStorage.service.ts","webpack:///./src/services/localBackedSessionStorage.service.ts","webpack:///./src/background/service_factories/crypto-function-service.factory.ts","webpack:///./src/background/service_factories/log-service.factory.ts","webpack:///./src/decorators/dev-flag.decorator.ts","webpack:///./src/background/service_factories/encrypt-service.factory.ts","webpack:///./src/services/keyGeneration.service.ts","webpack:///./src/background/service_factories/storage-service.factory.ts","webpack:///./src/background/service_factories/key-generation-service.factory.ts","webpack:///./src/background/service_factories/app-id-service.factory.ts","webpack:///./src/decorators/session-sync-observable/session-syncer.ts","webpack:///./src/decorators/session-sync-observable/sync-item-metadata.ts","webpack:///./src/decorators/session-sync-observable/browser-session.decorator.ts","webpack:///./src/decorators/session-sync-observable/session-sync.decorator.ts","webpack:///./src/models/account.ts","webpack:///./src/services/browser-state.service.ts","webpack:///./src/background/service_factories/state-service.factory.ts","webpack:///./src/background/service_factories/state-migration-service.factory.ts","webpack:///./src/background/service_factories/environment-service.factory.ts","webpack:///./src/services/browserMessaging.service.ts","webpack:///./src/background/service_factories/messaging-service.factory.ts","webpack:///./src/background/service_factories/platform-utils-service.factory.ts","webpack:///./src/background/service_factories/token-service.factory.ts","webpack:///./src/background/service_factories/api-service.factory.ts","webpack:///./src/services/browserCrypto.service.ts","webpack:///./src/background/service_factories/crypto-service.factory.ts","webpack:///./src/services/i18n.service.ts","webpack:///../../libs/common/src/services/i18n.service.ts","webpack:///../../libs/common/src/services/translation.service.ts","webpack:///./src/background/service_factories/i18n-service.factory.ts","webpack:///./src/services/browser-organization.service.ts","webpack:///./src/background/service_factories/organization-service.factory.ts","webpack:///./src/background/service_factories/auth-service.factory.ts","webpack:///./src/background/service_factories/key-connector-service.factory.ts","webpack:///./src/background/service_factories/two-factor-service.factory.ts","webpack:///./src/services/browser-settings.service.ts","webpack:///./src/vault/background/service_factories/cipher-service.factory.ts","webpack:///./src/background/service_factories/settings-service.factory.ts","webpack:///./src/background/service_factories/file-upload-service.factory.ts","webpack:///./src/background/service_factories/search-service.factory.ts","webpack:///./src/autofill/browser/main-context-menu-handler.ts","webpack:///./src/autofill/browser/cipher-context-menu-handler.ts","webpack:///./src/background/service_factories/event-collection-service.factory.ts","webpack:///./src/background/service_factories/event-upload-service.factory.ts","webpack:///./src/services/browser-policy.service.ts","webpack:///./src/background/service_factories/password-generation-service.factory.ts","webpack:///./src/background/service_factories/policy-service.factory.ts","webpack:///./src/background/service_factories/totp-service.factory.ts","webpack:///./src/services/autofillConstants.ts","webpack:///./src/autofill/models/autofill-script.ts","webpack:///./src/autofill/services/autofill.service.ts","webpack:///./src/autofill/clipboard/clear-clipboard.ts","webpack:///./src/autofill/clipboard/copy-to-clipboard-command.ts","webpack:///./src/alarms/alarm-state.ts","webpack:///./src/autofill/clipboard/generate-password-to-clipboard-command.ts","webpack:///./src/autofill/commands/autofill-tab-command.ts","webpack:///./src/autofill/browser/context-menu-clicked-handler.ts","webpack:///./src/autofill/background/service_factories/autofill-service.factory.ts","webpack:///./src/listeners/update-badge.ts","webpack:///./src/services/browser-i18n.service.ts","webpack:///./src/services/browserMessagingPrivateModeBackground.service.ts","webpack:///./src/services/vaultTimeout/vaultTimeout.service.ts","webpack:///./src/vault/services/browser-folder.service.ts","webpack:///./src/background/commands.background.ts","webpack:///./src/background/idle.background.ts","webpack:///./src/background/nativeMessaging.background.ts","webpack:///./src/background/runtime.background.ts","webpack:///./src/background/webRequest.background.ts","webpack:///./src/background/main.background.ts","webpack:///./src/services/browser-config.service.ts","webpack:///../../libs/common/src/abstractions/fileDownload/fileDownloadBuilder.ts","webpack:///./src/services/browserFileDownloadService.ts","webpack:///./src/services/browserMessagingPrivateModePopup.service.ts","webpack:///./src/vault/popup/components/password-reprompt.component.ts","webpack:///./src/vault/popup/components/password-reprompt.component.html","webpack:///./src/vault/popup/services/password-reprompt.service.ts","webpack:///./src/popup/services/init.service.ts","webpack:///./src/popup/services/lock-guard.service.ts","webpack:///./src/popup/services/popup-search.service.ts","webpack:///./src/popup/services/unauth-guard.service.ts","webpack:///./src/popup/services/services.module.ts","webpack:///./src/popup/app.module.ts","webpack:///./src/popup/main.ts","webpack:///webpack/bootstrap","webpack:///webpack/runtime/compat get default export","webpack:///webpack/runtime/define property getters","webpack:///webpack/runtime/get javascript chunk filename","webpack:///webpack/runtime/global","webpack:///webpack/runtime/hasOwnProperty shorthand","webpack:///webpack/runtime/make namespace object","webpack:///webpack/runtime/node module decorator","webpack:///webpack/runtime/publicPath","webpack:///webpack/runtime/jsonp chunk loading","webpack:///webpack/startup"],"sourcesContent":["var deferred = [];\n__webpack_require__.O = (result, chunkIds, fn, priority) => {\n\tif(chunkIds) {\n\t\tpriority = priority || 0;\n\t\tfor(var i = deferred.length; i > 0 && deferred[i - 1][2] > priority; i--) deferred[i] = deferred[i - 1];\n\t\tdeferred[i] = [chunkIds, fn, priority];\n\t\treturn;\n\t}\n\tvar notFulfilled = Infinity;\n\tfor (var i = 0; i < deferred.length; i++) {\n\t\tvar [chunkIds, fn, priority] = deferred[i];\n\t\tvar fulfilled = true;\n\t\tfor (var j = 0; j < chunkIds.length; j++) {\n\t\t\tif ((priority & 1 === 0 || notFulfilled >= priority) && Object.keys(__webpack_require__.O).every((key) => (__webpack_require__.O[key](chunkIds[j])))) {\n\t\t\t\tchunkIds.splice(j--, 1);\n\t\t\t} else {\n\t\t\t\tfulfilled = false;\n\t\t\t\tif(priority < notFulfilled) notFulfilled = priority;\n\t\t\t}\n\t\t}\n\t\tif(fulfilled) {\n\t\t\tdeferred.splice(i--, 1)\n\t\t\tvar r = fn();\n\t\t\tif (r !== undefined) result = r;\n\t\t}\n\t}\n\treturn result;\n};","var getProto = Object.getPrototypeOf ? (obj) => (Object.getPrototypeOf(obj)) : (obj) => (obj.__proto__);\nvar leafPrototypes;\n// create a fake namespace object\n// mode & 1: value is a module id, require it\n// mode & 2: merge all properties of value into the ns\n// mode & 4: return value when already ns object\n// mode & 16: return value when it's Promise-like\n// mode & 8|1: behave like require\n__webpack_require__.t = function(value, mode) {\n\tif(mode & 1) value = this(value);\n\tif(mode & 8) return value;\n\tif(typeof value === 'object' && value) {\n\t\tif((mode & 4) && value.__esModule) return value;\n\t\tif((mode & 16) && typeof value.then === 'function') return value;\n\t}\n\tvar ns = Object.create(null);\n\t__webpack_require__.r(ns);\n\tvar def = {};\n\tleafPrototypes = leafPrototypes || [null, getProto({}), getProto([]), getProto(getProto)];\n\tfor(var current = mode & 2 && value; typeof current == 'object' && !~leafPrototypes.indexOf(current); current = getProto(current)) {\n\t\tObject.getOwnPropertyNames(current).forEach((key) => (def[key] = () => (value[key])));\n\t}\n\tdef['default'] = () => (value);\n\t__webpack_require__.d(ns, def);\n\treturn ns;\n};","import { registerLocaleData } from \"@angular/common\";\nimport localeAr from \"@angular/common/locales/ar\";\nimport localeAz from \"@angular/common/locales/az\";\nimport localeBe from \"@angular/common/locales/be\";\nimport localeBg from \"@angular/common/locales/bg\";\nimport localeBn from \"@angular/common/locales/bn\";\nimport localeBs from \"@angular/common/locales/bs\";\nimport localeCa from \"@angular/common/locales/ca\";\nimport localeCs from \"@angular/common/locales/cs\";\nimport localeDa from \"@angular/common/locales/da\";\nimport localeDe from \"@angular/common/locales/de\";\nimport localeEl from \"@angular/common/locales/el\";\nimport localeEnGb from \"@angular/common/locales/en-GB\";\nimport localeEnIn from \"@angular/common/locales/en-IN\";\nimport localeEs from \"@angular/common/locales/es\";\nimport localeEt from \"@angular/common/locales/et\";\nimport localeEu from \"@angular/common/locales/eu\";\nimport localeFa from \"@angular/common/locales/fa\";\nimport localeFi from \"@angular/common/locales/fi\";\nimport localeFil from \"@angular/common/locales/fil\";\nimport localeFr from \"@angular/common/locales/fr\";\nimport localeHe from \"@angular/common/locales/he\";\nimport localeHi from \"@angular/common/locales/hi\";\nimport localeHr from \"@angular/common/locales/hr\";\nimport localeHu from \"@angular/common/locales/hu\";\nimport localeId from \"@angular/common/locales/id\";\nimport localeIt from \"@angular/common/locales/it\";\nimport localeJa from \"@angular/common/locales/ja\";\nimport localeKa from \"@angular/common/locales/ka\";\nimport localeKm from \"@angular/common/locales/km\";\nimport localeKn from \"@angular/common/locales/kn\";\nimport localeKo from \"@angular/common/locales/ko\";\nimport localeLt from \"@angular/common/locales/lt\";\nimport localeLv from \"@angular/common/locales/lv\";\nimport localeMl from \"@angular/common/locales/ml\";\nimport localeNb from \"@angular/common/locales/nb\";\nimport localeNl from \"@angular/common/locales/nl\";\nimport localeNn from \"@angular/common/locales/nn\";\nimport localePl from \"@angular/common/locales/pl\";\nimport localePtBr from \"@angular/common/locales/pt\";\nimport localePtPt from \"@angular/common/locales/pt-PT\";\nimport localeRo from \"@angular/common/locales/ro\";\nimport localeRu from \"@angular/common/locales/ru\";\nimport localeSi from \"@angular/common/locales/si\";\nimport localeSk from \"@angular/common/locales/sk\";\nimport localeSl from \"@angular/common/locales/sl\";\nimport localeSr from \"@angular/common/locales/sr\";\nimport localeSv from \"@angular/common/locales/sv\";\nimport localeTh from \"@angular/common/locales/th\";\nimport localeTr from \"@angular/common/locales/tr\";\nimport localeUk from \"@angular/common/locales/uk\";\nimport localeVi from \"@angular/common/locales/vi\";\nimport localeZhCn from \"@angular/common/locales/zh-Hans\";\nimport localeZhTw from \"@angular/common/locales/zh-Hant\";\n\nregisterLocaleData(localeAr, \"ar\");\nregisterLocaleData(localeAz, \"az\");\nregisterLocaleData(localeBe, \"be\");\nregisterLocaleData(localeBg, \"bg\");\nregisterLocaleData(localeBn, \"bn\");\nregisterLocaleData(localeBs, \"bs\");\nregisterLocaleData(localeCa, \"ca\");\nregisterLocaleData(localeCs, \"cs\");\nregisterLocaleData(localeDa, \"da\");\nregisterLocaleData(localeDe, \"de\");\nregisterLocaleData(localeEl, \"el\");\nregisterLocaleData(localeEnGb, \"en-GB\");\nregisterLocaleData(localeEnIn, \"en-IN\");\nregisterLocaleData(localeEs, \"es\");\nregisterLocaleData(localeEt, \"et\");\nregisterLocaleData(localeEu, \"eu\");\nregisterLocaleData(localeFa, \"fa\");\nregisterLocaleData(localeFi, \"fi\");\nregisterLocaleData(localeFil, \"fil\");\nregisterLocaleData(localeFr, \"fr\");\nregisterLocaleData(localeHe, \"he\");\nregisterLocaleData(localeHi, \"hi\");\nregisterLocaleData(localeHr, \"hr\");\nregisterLocaleData(localeHu, \"hu\");\nregisterLocaleData(localeId, \"id\");\nregisterLocaleData(localeIt, \"it\");\nregisterLocaleData(localeJa, \"ja\");\nregisterLocaleData(localeKa, \"ka\");\nregisterLocaleData(localeKm, \"km\");\nregisterLocaleData(localeKn, \"kn\");\nregisterLocaleData(localeKo, \"ko\");\nregisterLocaleData(localeLt, \"lt\");\nregisterLocaleData(localeLv, \"lv\");\nregisterLocaleData(localeMl, \"ml\");\nregisterLocaleData(localeNb, \"nb\");\nregisterLocaleData(localeNl, \"nl\");\nregisterLocaleData(localeNn, \"nn\");\nregisterLocaleData(localePl, \"pl\");\nregisterLocaleData(localePtBr, \"pt-BR\");\nregisterLocaleData(localePtPt, \"pt-PT\");\nregisterLocaleData(localeRo, \"ro\");\nregisterLocaleData(localeRu, \"ru\");\nregisterLocaleData(localeSi, \"si\");\nregisterLocaleData(localeSk, \"sk\");\nregisterLocaleData(localeSl, \"sl\");\nregisterLocaleData(localeSr, \"sr\");\nregisterLocaleData(localeSv, \"sv\");\nregisterLocaleData(localeTh, \"th\");\nregisterLocaleData(localeTr, \"tr\");\nregisterLocaleData(localeUk, \"uk\");\nregisterLocaleData(localeVi, \"vi\");\nregisterLocaleData(localeZhCn, \"zh-CN\");\nregisterLocaleData(localeZhTw, \"zh-TW\");\n","import { animate, state, style, transition, trigger } from \"@angular/animations\";\nimport { CommonModule } from \"@angular/common\";\nimport { Component, ModuleWithProviders, NgModule } from \"@angular/core\";\nimport {\n  DefaultNoComponentGlobalConfig,\n  GlobalConfig,\n  Toast as BaseToast,\n  ToastPackage,\n  ToastrService,\n  TOAST_CONFIG,\n} from \"ngx-toastr\";\n\n@Component({\n  selector: \"[toast-component2]\",\n  template: `\n    <button\n      *ngIf=\"options.closeButton\"\n      (click)=\"remove()\"\n      type=\"button\"\n      class=\"toast-close-button\"\n      aria-label=\"Close\"\n    >\n      <span aria-hidden=\"true\">&times;</span>\n    </button>\n    <div class=\"icon\">\n      <i></i>\n    </div>\n    <div>\n      <div *ngIf=\"title\" [class]=\"options.titleClass\" [attr.aria-label]=\"title\">\n        {{ title }} <ng-container *ngIf=\"duplicatesCount\">[{{ duplicatesCount + 1 }}]</ng-container>\n      </div>\n      <div\n        *ngIf=\"message && options.enableHtml\"\n        role=\"alertdialog\"\n        aria-live=\"polite\"\n        [class]=\"options.messageClass\"\n        [innerHTML]=\"message\"\n      ></div>\n      <div\n        *ngIf=\"message && !options.enableHtml\"\n        role=\"alertdialog\"\n        aria-live=\"polite\"\n        [class]=\"options.messageClass\"\n        [attr.aria-label]=\"message\"\n      >\n        {{ message }}\n      </div>\n    </div>\n    <div *ngIf=\"options.progressBar\">\n      <div class=\"toast-progress\" [style.width]=\"width + '%'\"></div>\n    </div>\n  `,\n  animations: [\n    trigger(\"flyInOut\", [\n      state(\"inactive\", style({ opacity: 0 })),\n      state(\"active\", style({ opacity: 1 })),\n      state(\"removed\", style({ opacity: 0 })),\n      transition(\"inactive => active\", animate(\"{{ easeTime }}ms {{ easing }}\")),\n      transition(\"active => removed\", animate(\"{{ easeTime }}ms {{ easing }}\")),\n    ]),\n  ],\n  preserveWhitespaces: false,\n})\nexport class BitwardenToast extends BaseToast {\n  constructor(protected toastrService: ToastrService, public toastPackage: ToastPackage) {\n    super(toastrService, toastPackage);\n  }\n}\n\nexport const BitwardenToastGlobalConfig: GlobalConfig = {\n  ...DefaultNoComponentGlobalConfig,\n  toastComponent: BitwardenToast,\n};\n\n@NgModule({\n  imports: [CommonModule],\n  declarations: [BitwardenToast],\n  exports: [BitwardenToast],\n})\nexport class BitwardenToastModule {\n  static forRoot(config: Partial<GlobalConfig> = {}): ModuleWithProviders<BitwardenToastModule> {\n    return {\n      ngModule: BitwardenToastModule,\n      providers: [\n        {\n          provide: TOAST_CONFIG,\n          useValue: {\n            default: BitwardenToastGlobalConfig,\n            config: config,\n          },\n        },\n      ],\n    };\n  }\n}\n","import { Pipe, PipeTransform } from \"@angular/core\";\n\ninterface CardRuleEntry {\n  cardLength: number;\n  blocks: number[];\n}\n\n// See https://baymard.com/checkout-usability/credit-card-patterns for\n// all possible credit card spacing patterns. For now, we just handle\n// the below.\nconst numberFormats: Record<string, CardRuleEntry[]> = {\n  Visa: [{ cardLength: 16, blocks: [4, 4, 4, 4] }],\n  Mastercard: [{ cardLength: 16, blocks: [4, 4, 4, 4] }],\n  Maestro: [\n    { cardLength: 16, blocks: [4, 4, 4, 4] },\n    { cardLength: 13, blocks: [4, 4, 5] },\n    { cardLength: 15, blocks: [4, 6, 5] },\n    { cardLength: 19, blocks: [4, 4, 4, 4, 3] },\n  ],\n  Discover: [{ cardLength: 16, blocks: [4, 4, 4, 4] }],\n  \"Diners Club\": [{ cardLength: 14, blocks: [4, 6, 4] }],\n  JCB: [{ cardLength: 16, blocks: [4, 4, 4, 4] }],\n  UnionPay: [\n    { cardLength: 16, blocks: [4, 4, 4, 4] },\n    { cardLength: 19, blocks: [6, 13] },\n  ],\n  Amex: [{ cardLength: 15, blocks: [4, 6, 5] }],\n  Mir: [\n    { cardLength: 16, blocks: [4, 4, 4, 4] },\n    { cardLength: 17, blocks: [5, 4, 4, 4] },\n    { cardLength: 18, blocks: [6, 4, 4, 4] },\n    { cardLength: 19, blocks: [7, 4, 4, 4] },\n  ],\n  Other: [{ cardLength: 16, blocks: [4, 4, 4, 4] }],\n};\n\n@Pipe({ name: \"creditCardNumber\" })\nexport class CreditCardNumberPipe implements PipeTransform {\n  transform(creditCardNumber: string, brand: string): string {\n    let rules = numberFormats[brand];\n\n    if (rules == null) {\n      rules = numberFormats[\"Other\"];\n    }\n\n    const cardLength = creditCardNumber.length;\n\n    let matchingRule = rules.find((r) => r.cardLength == cardLength);\n    if (matchingRule == null) {\n      matchingRule = rules[0];\n    }\n\n    const blocks = matchingRule.blocks;\n\n    const chunks: string[] = [];\n    let total = 0;\n\n    blocks.forEach((c) => {\n      chunks.push(creditCardNumber.slice(total, total + c));\n      total += c;\n    });\n\n    // Append the remaining part\n    if (cardLength > total) {\n      chunks.push(creditCardNumber.slice(total));\n    }\n\n    return chunks.join(\" \");\n  }\n}\n","import { Observable } from \"rxjs\";\n\nimport { TranslationService } from \"./translation.service\";\n\nexport abstract class I18nService extends TranslationService {\n  locale$: Observable<string>;\n}\n","export abstract class TranslationService {\n  supportedTranslationLocales: string[];\n  translationLocale: string;\n  collator: Intl.Collator;\n  localeNames: Map<string, string>;\n  t: (id: string, p1?: string | number, p2?: string | number, p3?: string | number) => string;\n  translate: (id: string, p1?: string, p2?: string, p3?: string) => string;\n}\n","import { Pipe, PipeTransform } from \"@angular/core\";\n\nimport { I18nService } from \"@bitwarden/common/abstractions/i18n.service\";\n\n@Pipe({\n  name: \"i18n\",\n})\nexport class I18nPipe implements PipeTransform {\n  constructor(private i18nService: I18nService) {}\n\n  transform(id: string, p1?: string | number, p2?: string | number, p3?: string | number): string {\n    return this.i18nService.t(id, p1, p2, p3);\n  }\n}\n","import { Pipe, PipeTransform } from \"@angular/core\";\n\ntype PropertyValueFunction<T> = (item: T) => { toString: () => string };\n\n@Pipe({\n  name: \"search\",\n})\nexport class SearchPipe implements PipeTransform {\n  transform<T>(\n    items: T[],\n    searchText: string,\n    prop1?: keyof T,\n    prop2?: keyof T,\n    prop3?: keyof T\n  ): T[];\n  transform<T>(\n    items: T[],\n    searchText: string,\n    prop1?: PropertyValueFunction<T>,\n    prop2?: PropertyValueFunction<T>,\n    prop3?: PropertyValueFunction<T>\n  ): T[];\n  transform<T>(\n    items: T[],\n    searchText: string,\n    prop1?: keyof T | PropertyValueFunction<T>,\n    prop2?: keyof T | PropertyValueFunction<T>,\n    prop3?: keyof T | PropertyValueFunction<T>\n  ): T[] {\n    if (items == null || items.length === 0) {\n      return [];\n    }\n\n    if (searchText == null || searchText.length < 2) {\n      return items;\n    }\n\n    searchText = searchText.trim().toLowerCase();\n    return items.filter((i) => {\n      if (prop1 != null) {\n        const propValue = typeof prop1 === \"function\" ? prop1(i) : i[prop1];\n\n        if (propValue?.toString().toLowerCase().indexOf(searchText) > -1) {\n          return true;\n        }\n      }\n\n      if (prop2 != null) {\n        const propValue = typeof prop2 === \"function\" ? prop2(i) : i[prop2];\n\n        if (propValue?.toString().toLowerCase().indexOf(searchText) > -1) {\n          return true;\n        }\n      }\n\n      if (prop3 != null) {\n        const propValue = typeof prop3 === \"function\" ? prop3(i) : i[prop3];\n\n        if (propValue?.toString().toLowerCase().indexOf(searchText) > -1) {\n          return true;\n        }\n      }\n\n      return false;\n    });\n  }\n}\n","import { Pipe, PipeTransform } from \"@angular/core\";\n\ninterface User {\n  name?: string;\n  email: string;\n}\n\n@Pipe({\n  name: \"userName\",\n})\nexport class UserNamePipe implements PipeTransform {\n  transform(user?: User): string {\n    if (user == null) {\n      return null;\n    }\n\n    return user.name == null || user.name.trim() === \"\" ? user.email : user.name;\n  }\n}\n","export enum OrganizationUserType {\n  Owner = 0,\n  Admin = 1,\n  User = 2,\n  Manager = 3,\n  Custom = 4,\n}\n","import { Pipe, PipeTransform } from \"@angular/core\";\n\nimport { I18nService } from \"@bitwarden/common/abstractions/i18n.service\";\nimport { OrganizationUserType } from \"@bitwarden/common/enums/organizationUserType\";\n\n@Pipe({\n  name: \"userType\",\n})\nexport class UserTypePipe implements PipeTransform {\n  constructor(private i18nService: I18nService) {}\n\n  transform(value?: OrganizationUserType): string {\n    if (value == null) {\n      return this.i18nService.t(\"unknown\");\n    }\n    switch (value) {\n      case OrganizationUserType.Owner:\n        return this.i18nService.t(\"owner\");\n      case OrganizationUserType.Admin:\n        return this.i18nService.t(\"admin\");\n      case OrganizationUserType.User:\n        return this.i18nService.t(\"user\");\n      case OrganizationUserType.Manager:\n        return this.i18nService.t(\"manager\");\n      case OrganizationUserType.Custom:\n        return this.i18nService.t(\"custom\");\n    }\n  }\n}\n","import { CommonModule, DatePipe } from \"@angular/common\";\nimport { NgModule } from \"@angular/core\";\nimport { FormsModule, ReactiveFormsModule } from \"@angular/forms\";\n\nimport { CalloutComponent } from \"./components/callout.component\";\nimport { ExportScopeCalloutComponent } from \"./components/export-scope-callout.component\";\nimport { BitwardenToastModule } from \"./components/toastr.component\";\nimport { A11yInvalidDirective } from \"./directives/a11y-invalid.directive\";\nimport { A11yTitleDirective } from \"./directives/a11y-title.directive\";\nimport { ApiActionDirective } from \"./directives/api-action.directive\";\nimport { AutofocusDirective } from \"./directives/autofocus.directive\";\nimport { BoxRowDirective } from \"./directives/box-row.directive\";\nimport { CopyClickDirective } from \"./directives/copy-click.directive\";\nimport { FallbackSrcDirective } from \"./directives/fallback-src.directive\";\nimport { InputStripSpacesDirective } from \"./directives/input-strip-spaces.directive\";\nimport { InputVerbatimDirective } from \"./directives/input-verbatim.directive\";\nimport { LaunchClickDirective } from \"./directives/launch-click.directive\";\nimport { NotPremiumDirective } from \"./directives/not-premium.directive\";\nimport { SelectCopyDirective } from \"./directives/select-copy.directive\";\nimport { StopClickDirective } from \"./directives/stop-click.directive\";\nimport { StopPropDirective } from \"./directives/stop-prop.directive\";\nimport { TrueFalseValueDirective } from \"./directives/true-false-value.directive\";\nimport { CreditCardNumberPipe } from \"./pipes/credit-card-number.pipe\";\nimport { EllipsisPipe } from \"./pipes/ellipsis.pipe\";\nimport { I18nPipe } from \"./pipes/i18n.pipe\";\nimport { SearchCiphersPipe } from \"./pipes/search-ciphers.pipe\";\nimport { SearchPipe } from \"./pipes/search.pipe\";\nimport { UserNamePipe } from \"./pipes/user-name.pipe\";\nimport { UserTypePipe } from \"./pipes/user-type.pipe\";\nimport { PasswordStrengthComponent } from \"./shared/components/password-strength/password-strength.component\";\nimport { IconComponent } from \"./vault/components/icon.component\";\n\n@NgModule({\n  imports: [\n    BitwardenToastModule.forRoot({\n      maxOpened: 5,\n      autoDismiss: true,\n      closeButton: true,\n    }),\n    CommonModule,\n    FormsModule,\n    ReactiveFormsModule,\n  ],\n  declarations: [\n    A11yInvalidDirective,\n    A11yTitleDirective,\n    ApiActionDirective,\n    AutofocusDirective,\n    BoxRowDirective,\n    CalloutComponent,\n    CreditCardNumberPipe,\n    EllipsisPipe,\n    ExportScopeCalloutComponent,\n    FallbackSrcDirective,\n    I18nPipe,\n    IconComponent,\n    InputStripSpacesDirective,\n    InputVerbatimDirective,\n    NotPremiumDirective,\n    SearchCiphersPipe,\n    SearchPipe,\n    SelectCopyDirective,\n    StopClickDirective,\n    StopPropDirective,\n    TrueFalseValueDirective,\n    CopyClickDirective,\n    LaunchClickDirective,\n    UserNamePipe,\n    PasswordStrengthComponent,\n    UserTypePipe,\n  ],\n  exports: [\n    A11yInvalidDirective,\n    A11yTitleDirective,\n    ApiActionDirective,\n    AutofocusDirective,\n    BitwardenToastModule,\n    BoxRowDirective,\n    CalloutComponent,\n    CreditCardNumberPipe,\n    EllipsisPipe,\n    ExportScopeCalloutComponent,\n    FallbackSrcDirective,\n    I18nPipe,\n    IconComponent,\n    InputStripSpacesDirective,\n    InputVerbatimDirective,\n    NotPremiumDirective,\n    SearchCiphersPipe,\n    SearchPipe,\n    SelectCopyDirective,\n    StopClickDirective,\n    StopPropDirective,\n    TrueFalseValueDirective,\n    CopyClickDirective,\n    LaunchClickDirective,\n    UserNamePipe,\n    PasswordStrengthComponent,\n    UserTypePipe,\n  ],\n  providers: [CreditCardNumberPipe, DatePipe, I18nPipe, SearchPipe, UserNamePipe, UserTypePipe],\n})\nexport class JslibModule {}\n","export enum AuthenticationStatus {\n  LoggedOut = 0,\n  Locked = 1,\n  Unlocked = 2,\n}\n","import { Observable } from \"rxjs\";\n\nimport { AuthenticationStatus } from \"../enums/authenticationStatus\";\nimport { AuthResult } from \"../models/domain/auth-result\";\nimport {\n  UserApiLogInCredentials,\n  PasswordLogInCredentials,\n  SsoLogInCredentials,\n  PasswordlessLogInCredentials,\n} from \"../models/domain/log-in-credentials\";\nimport { SymmetricCryptoKey } from \"../models/domain/symmetric-crypto-key\";\nimport { TokenTwoFactorRequest } from \"../models/request/identity-token/token-two-factor.request\";\nimport { AuthRequestResponse } from \"../models/response/auth-request.response\";\nimport { AuthRequestPushNotification } from \"../models/response/notification.response\";\n\nexport abstract class AuthService {\n  masterPasswordHash: string;\n  email: string;\n  accessCode: string;\n  authRequestId: string;\n\n  logIn: (\n    credentials:\n      | UserApiLogInCredentials\n      | PasswordLogInCredentials\n      | SsoLogInCredentials\n      | PasswordlessLogInCredentials\n  ) => Promise<AuthResult>;\n  logInTwoFactor: (\n    twoFactor: TokenTwoFactorRequest,\n    captchaResponse: string\n  ) => Promise<AuthResult>;\n  logOut: (callback: () => void) => void;\n  makePreloginKey: (masterPassword: string, email: string) => Promise<SymmetricCryptoKey>;\n  authingWithUserApiKey: () => boolean;\n  authingWithSso: () => boolean;\n  authingWithPassword: () => boolean;\n  authingWithPasswordless: () => boolean;\n  getAuthStatus: (userId?: string) => Promise<AuthenticationStatus>;\n  authResponsePushNotifiction: (notification: AuthRequestPushNotification) => Promise<any>;\n  passwordlessLogin: (\n    id: string,\n    key: string,\n    requestApproved: boolean\n  ) => Promise<AuthRequestResponse>;\n  getPushNotifcationObs$: () => Observable<any>;\n}\n","export abstract class MessagingService {\n  send: (subscriber: string, arg?: any) => void;\n}\n","import { Organization } from \"../models/domain/organization\";\nimport { IdentityTokenResponse } from \"../models/response/identity-token.response\";\n\nexport abstract class KeyConnectorService {\n  getAndSetKey: (url?: string) => Promise<void>;\n  getManagingOrganization: () => Promise<Organization>;\n  getUsesKeyConnector: () => Promise<boolean>;\n  migrateUser: () => Promise<void>;\n  userNeedsMigration: () => Promise<boolean>;\n  convertNewSsoUserToKeyConnector: (\n    tokenResponse: IdentityTokenResponse,\n    orgId: string\n  ) => Promise<void>;\n  setUsesKeyConnector: (enabled: boolean) => Promise<void>;\n  setConvertAccountRequired: (status: boolean) => Promise<void>;\n  getConvertAccountRequired: () => Promise<boolean>;\n  removeConvertAccountRequired: () => Promise<void>;\n  clear: () => Promise<void>;\n}\n","import { Injectable } from \"@angular/core\";\nimport { ActivatedRouteSnapshot, CanActivate, Router, RouterStateSnapshot } from \"@angular/router\";\n\nimport { AuthService } from \"@bitwarden/common/abstractions/auth.service\";\nimport { KeyConnectorService } from \"@bitwarden/common/abstractions/keyConnector.service\";\nimport { MessagingService } from \"@bitwarden/common/abstractions/messaging.service\";\nimport { AuthenticationStatus } from \"@bitwarden/common/enums/authenticationStatus\";\n\n@Injectable()\nexport class AuthGuard implements CanActivate {\n  constructor(\n    private authService: AuthService,\n    private router: Router,\n    private messagingService: MessagingService,\n    private keyConnectorService: KeyConnectorService\n  ) {}\n\n  async canActivate(route: ActivatedRouteSnapshot, routerState: RouterStateSnapshot) {\n    const authStatus = await this.authService.getAuthStatus();\n\n    if (authStatus === AuthenticationStatus.LoggedOut) {\n      this.messagingService.send(\"authBlocked\", { url: routerState.url });\n      return false;\n    }\n\n    if (authStatus === AuthenticationStatus.Locked) {\n      if (routerState != null) {\n        this.messagingService.send(\"lockedUrl\", { url: routerState.url });\n      }\n      return this.router.createUrlTree([\"lock\"], { queryParams: { promptBiometric: true } });\n    }\n\n    if (\n      !routerState.url.includes(\"remove-password\") &&\n      (await this.keyConnectorService.getConvertAccountRequired())\n    ) {\n      return this.router.createUrlTree([\"/remove-password\"]);\n    }\n\n    return true;\n  }\n}\n","import { Injectable } from \"@angular/core\";\nimport { CanActivate, Router } from \"@angular/router\";\n\nimport { AuthService } from \"@bitwarden/common/abstractions/auth.service\";\nimport { AuthenticationStatus } from \"@bitwarden/common/enums/authenticationStatus\";\n\n@Injectable()\nexport class LockGuard implements CanActivate {\n  protected homepage = \"vault\";\n  protected loginpage = \"login\";\n  constructor(private authService: AuthService, private router: Router) {}\n\n  async canActivate() {\n    const authStatus = await this.authService.getAuthStatus();\n\n    if (authStatus === AuthenticationStatus.Locked) {\n      return true;\n    }\n\n    const redirectUrl =\n      authStatus === AuthenticationStatus.LoggedOut ? this.loginpage : this.homepage;\n\n    return this.router.createUrlTree([redirectUrl]);\n  }\n}\n","import { Injectable } from \"@angular/core\";\nimport { CanActivate, Router } from \"@angular/router\";\n\nimport { AuthService } from \"@bitwarden/common/abstractions/auth.service\";\nimport { AuthenticationStatus } from \"@bitwarden/common/enums/authenticationStatus\";\n\n@Injectable()\nexport class UnauthGuard implements CanActivate {\n  protected homepage = \"vault\";\n  constructor(private authService: AuthService, private router: Router) {}\n\n  async canActivate() {\n    const authStatus = await this.authService.getAuthStatus();\n\n    if (authStatus === AuthenticationStatus.LoggedOut) {\n      return true;\n    }\n\n    if (authStatus === AuthenticationStatus.Locked) {\n      return this.router.createUrlTree([\"lock\"]);\n    }\n\n    return this.router.createUrlTree([this.homepage]);\n  }\n}\n","/* eslint-disable no-useless-escape */\nimport * as path from \"path\";\n\nimport { getHostname, parse } from \"tldts\";\nimport { Merge } from \"type-fest\";\n\nimport { CryptoService } from \"../abstractions/crypto.service\";\nimport { EncryptService } from \"../abstractions/encrypt.service\";\nimport { I18nService } from \"../abstractions/i18n.service\";\n\nconst nodeURL = typeof window === \"undefined\" ? require(\"url\") : null;\n\ndeclare global {\n  /* eslint-disable-next-line no-var */\n  var bitwardenContainerService: BitwardenContainerService;\n}\n\ninterface BitwardenContainerService {\n  getCryptoService: () => CryptoService;\n  getEncryptService: () => EncryptService;\n}\n\nexport class Utils {\n  static inited = false;\n  static isNode = false;\n  static isBrowser = true;\n  static isMobileBrowser = false;\n  static isAppleMobileBrowser = false;\n  static global: typeof global = null;\n  // Transpiled version of /\\p{Emoji_Presentation}/gu using https://mothereff.in/regexpu. Used for compatability in older browsers.\n  static regexpEmojiPresentation =\n    /(?:[\\u231A\\u231B\\u23E9-\\u23EC\\u23F0\\u23F3\\u25FD\\u25FE\\u2614\\u2615\\u2648-\\u2653\\u267F\\u2693\\u26A1\\u26AA\\u26AB\\u26BD\\u26BE\\u26C4\\u26C5\\u26CE\\u26D4\\u26EA\\u26F2\\u26F3\\u26F5\\u26FA\\u26FD\\u2705\\u270A\\u270B\\u2728\\u274C\\u274E\\u2753-\\u2755\\u2757\\u2795-\\u2797\\u27B0\\u27BF\\u2B1B\\u2B1C\\u2B50\\u2B55]|\\uD83C[\\uDC04\\uDCCF\\uDD8E\\uDD91-\\uDD9A\\uDDE6-\\uDDFF\\uDE01\\uDE1A\\uDE2F\\uDE32-\\uDE36\\uDE38-\\uDE3A\\uDE50\\uDE51\\uDF00-\\uDF20\\uDF2D-\\uDF35\\uDF37-\\uDF7C\\uDF7E-\\uDF93\\uDFA0-\\uDFCA\\uDFCF-\\uDFD3\\uDFE0-\\uDFF0\\uDFF4\\uDFF8-\\uDFFF]|\\uD83D[\\uDC00-\\uDC3E\\uDC40\\uDC42-\\uDCFC\\uDCFF-\\uDD3D\\uDD4B-\\uDD4E\\uDD50-\\uDD67\\uDD7A\\uDD95\\uDD96\\uDDA4\\uDDFB-\\uDE4F\\uDE80-\\uDEC5\\uDECC\\uDED0-\\uDED2\\uDED5-\\uDED7\\uDEEB\\uDEEC\\uDEF4-\\uDEFC\\uDFE0-\\uDFEB]|\\uD83E[\\uDD0C-\\uDD3A\\uDD3C-\\uDD45\\uDD47-\\uDD78\\uDD7A-\\uDDCB\\uDDCD-\\uDDFF\\uDE70-\\uDE74\\uDE78-\\uDE7A\\uDE80-\\uDE86\\uDE90-\\uDEA8\\uDEB0-\\uDEB6\\uDEC0-\\uDEC2\\uDED0-\\uDED6])/g;\n  static readonly validHosts: string[] = [\"localhost\"];\n\n  static init() {\n    if (Utils.inited) {\n      return;\n    }\n\n    Utils.inited = true;\n    Utils.isNode =\n      typeof process !== \"undefined\" &&\n      (process as any).release != null &&\n      (process as any).release.name === \"node\";\n    Utils.isBrowser = typeof window !== \"undefined\";\n\n    Utils.isMobileBrowser = Utils.isBrowser && this.isMobile(window);\n    Utils.isAppleMobileBrowser = Utils.isBrowser && this.isAppleMobile(window);\n\n    if (Utils.isNode) {\n      Utils.global = global;\n    } else if (Utils.isBrowser) {\n      Utils.global = window;\n    } else {\n      // If it's not browser or node then it must be a service worker\n      Utils.global = self;\n    }\n  }\n\n  static fromB64ToArray(str: string): Uint8Array {\n    if (str == null) {\n      return null;\n    }\n\n    if (Utils.isNode) {\n      return new Uint8Array(Buffer.from(str, \"base64\"));\n    } else {\n      const binaryString = Utils.global.atob(str);\n      const bytes = new Uint8Array(binaryString.length);\n      for (let i = 0; i < binaryString.length; i++) {\n        bytes[i] = binaryString.charCodeAt(i);\n      }\n      return bytes;\n    }\n  }\n\n  static fromUrlB64ToArray(str: string): Uint8Array {\n    return Utils.fromB64ToArray(Utils.fromUrlB64ToB64(str));\n  }\n\n  static fromHexToArray(str: string): Uint8Array {\n    if (Utils.isNode) {\n      return new Uint8Array(Buffer.from(str, \"hex\"));\n    } else {\n      const bytes = new Uint8Array(str.length / 2);\n      for (let i = 0; i < str.length; i += 2) {\n        bytes[i / 2] = parseInt(str.substr(i, 2), 16);\n      }\n      return bytes;\n    }\n  }\n\n  static fromUtf8ToArray(str: string): Uint8Array {\n    if (Utils.isNode) {\n      return new Uint8Array(Buffer.from(str, \"utf8\"));\n    } else {\n      const strUtf8 = unescape(encodeURIComponent(str));\n      const arr = new Uint8Array(strUtf8.length);\n      for (let i = 0; i < strUtf8.length; i++) {\n        arr[i] = strUtf8.charCodeAt(i);\n      }\n      return arr;\n    }\n  }\n\n  static fromByteStringToArray(str: string): Uint8Array {\n    if (str == null) {\n      return null;\n    }\n    const arr = new Uint8Array(str.length);\n    for (let i = 0; i < str.length; i++) {\n      arr[i] = str.charCodeAt(i);\n    }\n    return arr;\n  }\n\n  static fromBufferToB64(buffer: ArrayBuffer): string {\n    if (buffer == null) {\n      return null;\n    }\n    if (Utils.isNode) {\n      return Buffer.from(buffer).toString(\"base64\");\n    } else {\n      let binary = \"\";\n      const bytes = new Uint8Array(buffer);\n      for (let i = 0; i < bytes.byteLength; i++) {\n        binary += String.fromCharCode(bytes[i]);\n      }\n      return Utils.global.btoa(binary);\n    }\n  }\n\n  static fromBufferToUrlB64(buffer: ArrayBuffer): string {\n    return Utils.fromB64toUrlB64(Utils.fromBufferToB64(buffer));\n  }\n\n  static fromB64toUrlB64(b64Str: string) {\n    return b64Str.replace(/\\+/g, \"-\").replace(/\\//g, \"_\").replace(/=/g, \"\");\n  }\n\n  static fromBufferToUtf8(buffer: ArrayBuffer): string {\n    if (Utils.isNode) {\n      return Buffer.from(buffer).toString(\"utf8\");\n    } else {\n      const bytes = new Uint8Array(buffer);\n      const encodedString = String.fromCharCode.apply(null, bytes);\n      return decodeURIComponent(escape(encodedString));\n    }\n  }\n\n  static fromBufferToByteString(buffer: ArrayBuffer): string {\n    return String.fromCharCode.apply(null, new Uint8Array(buffer));\n  }\n\n  // ref: https://stackoverflow.com/a/40031979/1090359\n  static fromBufferToHex(buffer: ArrayBuffer): string {\n    if (Utils.isNode) {\n      return Buffer.from(buffer).toString(\"hex\");\n    } else {\n      const bytes = new Uint8Array(buffer);\n      return Array.prototype.map\n        .call(bytes, (x: number) => (\"00\" + x.toString(16)).slice(-2))\n        .join(\"\");\n    }\n  }\n\n  static fromUrlB64ToB64(urlB64Str: string): string {\n    let output = urlB64Str.replace(/-/g, \"+\").replace(/_/g, \"/\");\n    switch (output.length % 4) {\n      case 0:\n        break;\n      case 2:\n        output += \"==\";\n        break;\n      case 3:\n        output += \"=\";\n        break;\n      default:\n        throw new Error(\"Illegal base64url string!\");\n    }\n\n    return output;\n  }\n\n  static fromUrlB64ToUtf8(urlB64Str: string): string {\n    return Utils.fromB64ToUtf8(Utils.fromUrlB64ToB64(urlB64Str));\n  }\n\n  static fromUtf8ToB64(utfStr: string): string {\n    if (Utils.isNode) {\n      return Buffer.from(utfStr, \"utf8\").toString(\"base64\");\n    } else {\n      return decodeURIComponent(escape(Utils.global.btoa(utfStr)));\n    }\n  }\n\n  static fromUtf8ToUrlB64(utfStr: string): string {\n    return Utils.fromBufferToUrlB64(Utils.fromUtf8ToArray(utfStr));\n  }\n\n  static fromB64ToUtf8(b64Str: string): string {\n    if (Utils.isNode) {\n      return Buffer.from(b64Str, \"base64\").toString(\"utf8\");\n    } else {\n      return decodeURIComponent(escape(Utils.global.atob(b64Str)));\n    }\n  }\n\n  // ref: http://stackoverflow.com/a/2117523/1090359\n  static newGuid(): string {\n    return \"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx\".replace(/[xy]/g, (c) => {\n      const r = (Math.random() * 16) | 0;\n      const v = c === \"x\" ? r : (r & 0x3) | 0x8;\n      return v.toString(16);\n    });\n  }\n\n  static isGuid(id: string) {\n    return RegExp(\n      /^[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/,\n      \"i\"\n    ).test(id);\n  }\n\n  static getHostname(uriString: string): string {\n    if (Utils.isNullOrWhitespace(uriString)) {\n      return null;\n    }\n\n    uriString = uriString.trim();\n\n    if (uriString.startsWith(\"data:\")) {\n      return null;\n    }\n\n    if (uriString.startsWith(\"about:\")) {\n      return null;\n    }\n\n    if (uriString.startsWith(\"file:\")) {\n      return null;\n    }\n\n    // Does uriString contain invalid characters\n    // TODO Needs to possibly be extended, although '!' is a reserved character\n    if (uriString.indexOf(\"!\") > 0) {\n      return null;\n    }\n\n    try {\n      const hostname = getHostname(uriString, { validHosts: this.validHosts });\n      if (hostname != null) {\n        return hostname;\n      }\n    } catch {\n      return null;\n    }\n    return null;\n  }\n\n  static getHost(uriString: string): string {\n    const url = Utils.getUrl(uriString);\n    try {\n      return url != null && url.host !== \"\" ? url.host : null;\n    } catch {\n      return null;\n    }\n  }\n\n  static getDomain(uriString: string): string {\n    if (Utils.isNullOrWhitespace(uriString)) {\n      return null;\n    }\n\n    uriString = uriString.trim();\n\n    if (uriString.startsWith(\"data:\")) {\n      return null;\n    }\n\n    if (uriString.startsWith(\"about:\")) {\n      return null;\n    }\n\n    try {\n      const parseResult = parse(uriString, { validHosts: this.validHosts });\n      if (parseResult != null && parseResult.hostname != null) {\n        if (parseResult.hostname === \"localhost\" || parseResult.isIp) {\n          return parseResult.hostname;\n        }\n\n        if (parseResult.domain != null) {\n          return parseResult.domain;\n        }\n        return null;\n      }\n    } catch {\n      return null;\n    }\n    return null;\n  }\n\n  static getQueryParams(uriString: string): Map<string, string> {\n    const url = Utils.getUrl(uriString);\n    if (url == null || url.search == null || url.search === \"\") {\n      return null;\n    }\n    const map = new Map<string, string>();\n    const pairs = (url.search[0] === \"?\" ? url.search.substr(1) : url.search).split(\"&\");\n    pairs.forEach((pair) => {\n      const parts = pair.split(\"=\");\n      if (parts.length < 1) {\n        return;\n      }\n      map.set(\n        decodeURIComponent(parts[0]).toLowerCase(),\n        parts[1] == null ? \"\" : decodeURIComponent(parts[1])\n      );\n    });\n    return map;\n  }\n\n  static getSortFunction<T>(\n    i18nService: I18nService,\n    prop: { [K in keyof T]: T[K] extends string ? K : never }[keyof T]\n  ): (a: T, b: T) => number {\n    return (a, b) => {\n      if (a[prop] == null && b[prop] != null) {\n        return -1;\n      }\n      if (a[prop] != null && b[prop] == null) {\n        return 1;\n      }\n      if (a[prop] == null && b[prop] == null) {\n        return 0;\n      }\n\n      // The `as unknown as string` here is unfortunate because typescript doesn't property understand that the return of T[prop] will be a string\n      return i18nService.collator\n        ? i18nService.collator.compare(a[prop] as unknown as string, b[prop] as unknown as string)\n        : (a[prop] as unknown as string).localeCompare(b[prop] as unknown as string);\n    };\n  }\n\n  static isNullOrWhitespace(str: string): boolean {\n    return str == null || typeof str !== \"string\" || str.trim() === \"\";\n  }\n\n  static isNullOrEmpty(str: string): boolean {\n    return str == null || typeof str !== \"string\" || str == \"\";\n  }\n\n  static isPromise(obj: any): obj is Promise<unknown> {\n    return (\n      obj != undefined && typeof obj[\"then\"] === \"function\" && typeof obj[\"catch\"] === \"function\"\n    );\n  }\n\n  static nameOf<T>(name: string & keyof T) {\n    return name;\n  }\n\n  static assign<T>(target: T, source: Partial<T>): T {\n    return Object.assign(target, source);\n  }\n\n  static iterateEnum<O extends object, K extends keyof O = keyof O>(obj: O) {\n    return (Object.keys(obj).filter((k) => Number.isNaN(+k)) as K[]).map((k) => obj[k]);\n  }\n\n  static getUrl(uriString: string): URL {\n    if (this.isNullOrWhitespace(uriString)) {\n      return null;\n    }\n\n    uriString = uriString.trim();\n\n    let url = Utils.getUrlObject(uriString);\n    if (url == null) {\n      const hasHttpProtocol =\n        uriString.indexOf(\"http://\") === 0 || uriString.indexOf(\"https://\") === 0;\n      if (!hasHttpProtocol && uriString.indexOf(\".\") > -1) {\n        url = Utils.getUrlObject(\"http://\" + uriString);\n      }\n    }\n    return url;\n  }\n\n  static camelToPascalCase(s: string) {\n    return s.charAt(0).toUpperCase() + s.slice(1);\n  }\n\n  /**\n   * There are a few ways to calculate text color for contrast, this one seems to fit accessibility guidelines best.\n   * https://stackoverflow.com/a/3943023/6869691\n   *\n   * @param {string} bgColor\n   * @param {number} [threshold] see stackoverflow link above\n   * @param {boolean} [svgTextFill]\n   * Indicates if this method is performed on an SVG <text> 'fill' attribute (e.g. <text fill=\"black\"></text>).\n   * This check is necessary because the '!important' tag cannot be used in a 'fill' attribute.\n   */\n  static pickTextColorBasedOnBgColor(bgColor: string, threshold = 186, svgTextFill = false) {\n    const bgColorHexNums = bgColor.charAt(0) === \"#\" ? bgColor.substring(1, 7) : bgColor;\n    const r = parseInt(bgColorHexNums.substring(0, 2), 16); // hexToR\n    const g = parseInt(bgColorHexNums.substring(2, 4), 16); // hexToG\n    const b = parseInt(bgColorHexNums.substring(4, 6), 16); // hexToB\n    const blackColor = svgTextFill ? \"black\" : \"black !important\";\n    const whiteColor = svgTextFill ? \"white\" : \"white !important\";\n    return r * 0.299 + g * 0.587 + b * 0.114 > threshold ? blackColor : whiteColor;\n  }\n\n  static stringToColor(str: string): string {\n    let hash = 0;\n    for (let i = 0; i < str.length; i++) {\n      hash = str.charCodeAt(i) + ((hash << 5) - hash);\n    }\n    let color = \"#\";\n    for (let i = 0; i < 3; i++) {\n      const value = (hash >> (i * 8)) & 0xff;\n      color += (\"00\" + value.toString(16)).substr(-2);\n    }\n    return color;\n  }\n\n  /**\n   * @throws Will throw an error if the ContainerService has not been attached to the window object\n   */\n  static getContainerService(): BitwardenContainerService {\n    if (this.global.bitwardenContainerService == null) {\n      throw new Error(\"global bitwardenContainerService not initialized.\");\n    }\n    return this.global.bitwardenContainerService;\n  }\n\n  static validateHexColor(color: string) {\n    return /^#([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})$/.test(color);\n  }\n\n  /**\n   * Converts map to a Record<string, V> with the same data. Inverse of recordToMap\n   * Useful in toJSON methods, since Maps are not serializable\n   * @param map\n   * @returns\n   */\n  static mapToRecord<K extends string | number, V>(map: Map<K, V>): Record<string, V> {\n    if (map == null) {\n      return null;\n    }\n    if (!(map instanceof Map)) {\n      return map;\n    }\n    return Object.fromEntries(map);\n  }\n\n  /**\n   * Converts record to a Map<string, V> with the same data. Inverse of mapToRecord\n   * Useful in fromJSON methods, since Maps are not serializable\n   *\n   * Warning: If the record has string keys that are numbers, they will be converted to numbers in the map\n   * @param record\n   * @returns\n   */\n  static recordToMap<K extends string | number, V>(record: Record<K, V>): Map<K, V> {\n    if (record == null) {\n      return null;\n    } else if (record instanceof Map) {\n      return record;\n    }\n\n    const entries = Object.entries(record);\n    if (entries.length === 0) {\n      return new Map();\n    }\n\n    if (isNaN(Number(entries[0][0]))) {\n      return new Map(entries) as Map<K, V>;\n    } else {\n      return new Map(entries.map((e) => [Number(e[0]), e[1]])) as Map<K, V>;\n    }\n  }\n\n  /** Applies Object.assign, but converts the type nicely using Type-Fest Merge<Destination, Source> */\n  static merge<Destination, Source>(\n    destination: Destination,\n    source: Source\n  ): Merge<Destination, Source> {\n    return Object.assign(destination, source) as unknown as Merge<Destination, Source>;\n  }\n\n  /**\n   * encodeURIComponent escapes all characters except the following:\n   * alphabetic, decimal digits, - _ . ! ~ * ' ( )\n   * https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/encodeURIComponent#encoding_for_rfc3986\n   */\n  static encodeRFC3986URIComponent(str: string): string {\n    return encodeURIComponent(str).replace(\n      /[!'()*]/g,\n      (c) => `%${c.charCodeAt(0).toString(16).toUpperCase()}`\n    );\n  }\n\n  /**\n   * Normalizes a path for defense against attacks like traversals\n   * @param denormalizedPath\n   * @returns\n   */\n  static normalizePath(denormalizedPath: string): string {\n    return path.normalize(decodeURIComponent(denormalizedPath)).replace(/^(\\.\\.(\\/|\\\\|$))+/, \"\");\n  }\n\n  private static isMobile(win: Window) {\n    let mobile = false;\n    ((a) => {\n      if (\n        /(android|bb\\d+|meego).+mobile|avantgo|bada\\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(\n          a\n        ) ||\n        /1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\\-(n|u)|c55\\/|capi|ccwa|cdm\\-|cell|chtm|cldc|cmd\\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\\-s|devi|dica|dmob|do(c|p)o|ds(12|\\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\\-|_)|g1 u|g560|gene|gf\\-5|g\\-mo|go(\\.w|od)|gr(ad|un)|haie|hcit|hd\\-(m|p|t)|hei\\-|hi(pt|ta)|hp( i|ip)|hs\\-c|ht(c(\\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\\-(20|go|ma)|i230|iac( |\\-|\\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\\/)|klon|kpt |kwc\\-|kyo(c|k)|le(no|xi)|lg( g|\\/(k|l|u)|50|54|\\-[a-w])|libw|lynx|m1\\-w|m3ga|m50\\/|ma(te|ui|xo)|mc(01|21|ca)|m\\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\\-2|po(ck|rt|se)|prox|psio|pt\\-g|qa\\-a|qc(07|12|21|32|60|\\-[2-7]|i\\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\\-|oo|p\\-)|sdk\\/|se(c(\\-|0|1)|47|mc|nd|ri)|sgh\\-|shar|sie(\\-|m)|sk\\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\\-|v\\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\\-|tdg\\-|tel(i|m)|tim\\-|t\\-mo|to(pl|sh)|ts(70|m\\-|m3|m5)|tx\\-9|up(\\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\\-|your|zeto|zte\\-/i.test(\n          a.substr(0, 4)\n        )\n      ) {\n        mobile = true;\n      }\n    })(win.navigator.userAgent || win.navigator.vendor || (win as any).opera);\n    return mobile || win.navigator.userAgent.match(/iPad/i) != null;\n  }\n\n  static delay(ms: number): Promise<void> {\n    return new Promise((resolve) => setTimeout(resolve, ms));\n  }\n\n  private static isAppleMobile(win: Window) {\n    return (\n      win.navigator.userAgent.match(/iPhone/i) != null ||\n      win.navigator.userAgent.match(/iPad/i) != null\n    );\n  }\n\n  private static getUrlObject(uriString: string): URL {\n    try {\n      if (nodeURL != null) {\n        return new nodeURL.URL(uriString);\n      } else if (typeof URL === \"function\") {\n        return new URL(uriString);\n      } else if (typeof window !== \"undefined\") {\n        const hasProtocol = uriString.indexOf(\"://\") > -1;\n        if (!hasProtocol && uriString.indexOf(\".\") > -1) {\n          uriString = \"http://\" + uriString;\n        } else if (!hasProtocol) {\n          return null;\n        }\n        const anchor = window.document.createElement(\"a\");\n        anchor.href = uriString;\n        return anchor as any;\n      }\n    } catch (e) {\n      // Ignore error\n    }\n\n    return null;\n  }\n}\n\nUtils.init();\n","import { map, Observable } from \"rxjs\";\n\nimport { Utils } from \"../../misc/utils\";\nimport { OrganizationData } from \"../../models/data/organization.data\";\nimport { Organization } from \"../../models/domain/organization\";\nimport { I18nService } from \"../i18n.service\";\n\nexport function canAccessVaultTab(org: Organization): boolean {\n  return org.canViewAssignedCollections || org.canViewAllCollections || org.canManageGroups;\n}\n\nexport function canAccessSettingsTab(org: Organization): boolean {\n  return (\n    org.isOwner ||\n    org.canManagePolicies ||\n    org.canManageSso ||\n    org.canManageScim ||\n    org.canAccessImportExport\n  );\n}\n\nexport function canAccessMembersTab(org: Organization): boolean {\n  return org.canManageUsers || org.canManageUsersPassword;\n}\n\nexport function canAccessGroupsTab(org: Organization): boolean {\n  return org.canManageGroups;\n}\n\nexport function canAccessReportingTab(org: Organization): boolean {\n  return org.canAccessReports || org.canAccessEventLogs;\n}\n\nexport function canAccessBillingTab(org: Organization): boolean {\n  return org.canManageBilling;\n}\n\nexport function canAccessOrgAdmin(org: Organization): boolean {\n  return (\n    canAccessMembersTab(org) ||\n    canAccessGroupsTab(org) ||\n    canAccessReportingTab(org) ||\n    canAccessBillingTab(org) ||\n    canAccessSettingsTab(org) ||\n    canAccessVaultTab(org)\n  );\n}\n\nexport function getOrganizationById(id: string) {\n  return map<Organization[], Organization | undefined>((orgs) => orgs.find((o) => o.id === id));\n}\n\nexport function canAccessAdmin(i18nService: I18nService) {\n  return map<Organization[], Organization[]>((orgs) =>\n    orgs.filter(canAccessOrgAdmin).sort(Utils.getSortFunction(i18nService, \"name\"))\n  );\n}\n\nexport function isNotProviderUser(org: Organization): boolean {\n  return !org.isProviderUser;\n}\n\nexport abstract class OrganizationService {\n  organizations$: Observable<Organization[]>;\n\n  get: (id: string) => Organization;\n  getByIdentifier: (identifier: string) => Organization;\n  getAll: (userId?: string) => Promise<Organization[]>;\n  /**\n   * @deprecated For the CLI only\n   * @param id id of the organization\n   */\n  getFromState: (id: string) => Promise<Organization>;\n  canManageSponsorships: () => Promise<boolean>;\n  hasOrganizations: () => boolean;\n}\n\nexport abstract class InternalOrganizationService extends OrganizationService {\n  replace: (organizations: { [id: string]: OrganizationData }) => Promise<void>;\n}\n","export enum EventType {\n  User_LoggedIn = 1000,\n  User_ChangedPassword = 1001,\n  User_Updated2fa = 1002,\n  User_Disabled2fa = 1003,\n  User_Recovered2fa = 1004,\n  User_FailedLogIn = 1005,\n  User_FailedLogIn2fa = 1006,\n  User_ClientExportedVault = 1007,\n  User_UpdatedTempPassword = 1008,\n  User_MigratedKeyToKeyConnector = 1009,\n\n  Cipher_Created = 1100,\n  Cipher_Updated = 1101,\n  Cipher_Deleted = 1102,\n  Cipher_AttachmentCreated = 1103,\n  Cipher_AttachmentDeleted = 1104,\n  Cipher_Shared = 1105,\n  Cipher_UpdatedCollections = 1106,\n  Cipher_ClientViewed = 1107,\n  Cipher_ClientToggledPasswordVisible = 1108,\n  Cipher_ClientToggledHiddenFieldVisible = 1109,\n  Cipher_ClientToggledCardCodeVisible = 1110,\n  Cipher_ClientCopiedPassword = 1111,\n  Cipher_ClientCopiedHiddenField = 1112,\n  Cipher_ClientCopiedCardCode = 1113,\n  Cipher_ClientAutofilled = 1114,\n  Cipher_SoftDeleted = 1115,\n  Cipher_Restored = 1116,\n  Cipher_ClientToggledCardNumberVisible = 1117,\n\n  Collection_Created = 1300,\n  Collection_Updated = 1301,\n  Collection_Deleted = 1302,\n\n  Group_Created = 1400,\n  Group_Updated = 1401,\n  Group_Deleted = 1402,\n\n  OrganizationUser_Invited = 1500,\n  OrganizationUser_Confirmed = 1501,\n  OrganizationUser_Updated = 1502,\n  OrganizationUser_Removed = 1503,\n  OrganizationUser_UpdatedGroups = 1504,\n  OrganizationUser_UnlinkedSso = 1505,\n  OrganizationUser_ResetPassword_Enroll = 1506,\n  OrganizationUser_ResetPassword_Withdraw = 1507,\n  OrganizationUser_AdminResetPassword = 1508,\n  OrganizationUser_ResetSsoLink = 1509,\n  OrganizationUser_FirstSsoLogin = 1510,\n  OrganizationUser_Revoked = 1511,\n  OrganizationUser_Restored = 1512,\n\n  Organization_Updated = 1600,\n  Organization_PurgedVault = 1601,\n  Organization_ClientExportedVault = 1602,\n  Organization_VaultAccessed = 1603,\n  Organization_EnabledSso = 1604,\n  Organization_DisabledSso = 1605,\n  Organization_EnabledKeyConnector = 1606,\n  Organization_DisabledKeyConnector = 1607,\n  Organization_SponsorshipsSynced = 1608,\n\n  Policy_Updated = 1700,\n\n  ProviderUser_Invited = 1800,\n  ProviderUser_Confirmed = 1801,\n  ProviderUser_Updated = 1802,\n  ProviderUser_Removed = 1803,\n\n  ProviderOrganization_Created = 1900,\n  ProviderOrganization_Added = 1901,\n  ProviderOrganization_Removed = 1902,\n  ProviderOrganization_VaultAccessed = 1903,\n}\n","export enum OrganizationUserStatusType {\n  Invited = 0,\n  Accepted = 1,\n  Confirmed = 2,\n  Revoked = -1,\n}\n","export enum PolicyType {\n  TwoFactorAuthentication = 0, // Requires users to have 2fa enabled\n  MasterPassword = 1, // Sets minimum requirements for master password complexity\n  PasswordGenerator = 2, // Sets minimum requirements/default type for generated passwords/passphrases\n  SingleOrg = 3, // Allows users to only be apart of one organization\n  RequireSso = 4, // Requires users to authenticate with SSO\n  PersonalOwnership = 5, // Disables personal vault ownership for adding/cloning items\n  DisableSend = 6, // Disables the ability to create and edit Bitwarden Sends\n  SendOptions = 7, // Sets restrictions or defaults for Bitwarden Sends\n  ResetPassword = 8, // Allows orgs to use reset password : also can enable auto-enrollment during invite flow\n  MaximumVaultTimeout = 9, // Sets the maximum allowed vault timeout\n  DisablePersonalVaultExport = 10, // Disable personal vault export\n}\n","export enum SecureNoteType {\n  Generic = 0,\n}\n","export enum UriMatchType {\n  Domain = 0,\n  Host = 1,\n  StartsWith = 2,\n  Exact = 3,\n  RegularExpression = 4,\n  Never = 5,\n}\n","export enum CipherRepromptType {\n  None = 0,\n  Password = 1,\n}\n","export enum CipherType {\n  Login = 1,\n  SecureNote = 2,\n  Card = 3,\n  Identity = 4,\n}\n","export type LinkedIdType = LoginLinkedId | CardLinkedId | IdentityLinkedId;\n\n// LoginView\nexport enum LoginLinkedId {\n  Username = 100,\n  Password = 101,\n}\n\n// CardView\nexport enum CardLinkedId {\n  CardholderName = 300,\n  ExpMonth = 301,\n  ExpYear = 302,\n  Code = 303,\n  Brand = 304,\n  Number = 305,\n}\n\n// IdentityView\nexport enum IdentityLinkedId {\n  Title = 400,\n  MiddleName = 401,\n  Address1 = 402,\n  Address2 = 403,\n  Address3 = 404,\n  City = 405,\n  State = 406,\n  PostalCode = 407,\n  Country = 408,\n  Company = 409,\n  Email = 410,\n  Phone = 411,\n  Ssn = 412,\n  Username = 413,\n  PassportNumber = 414,\n  LicenseNumber = 415,\n  FirstName = 416,\n  LastName = 417,\n  FullName = 418,\n}\n","import { LinkedIdType } from \"../enums/linkedIdType\";\nimport { ItemView } from \"../vault/models/view/item.view\";\n\nexport class LinkedMetadata {\n  constructor(readonly propertyKey: string, private readonly _i18nKey?: string) {}\n\n  get i18nKey() {\n    return this._i18nKey ?? this.propertyKey;\n  }\n}\n\n/**\n * A decorator used to set metadata used by Linked custom fields. Apply it to a class property or getter to make it\n *    available as a Linked custom field option.\n * @param id - A unique value that is saved in the Field model. It is used to look up the decorated class property.\n * @param i18nKey - The i18n key used to describe the decorated class property in the UI. If it is null, then the name\n *    of the class property will be used as the i18n key.\n */\nexport function linkedFieldOption(id: LinkedIdType, i18nKey?: string) {\n  return (prototype: ItemView, propertyKey: string) => {\n    if (prototype.linkedFieldOptions == null) {\n      prototype.linkedFieldOptions = new Map<LinkedIdType, LinkedMetadata>();\n    }\n\n    prototype.linkedFieldOptions.set(id, new LinkedMetadata(propertyKey, i18nKey));\n  };\n}\n","import { LinkedMetadata } from \"../../../misc/linkedFieldOption.decorator\";\nimport { View } from \"../../../models/view/view\";\n\nexport abstract class ItemView implements View {\n  linkedFieldOptions: Map<number, LinkedMetadata>;\n  abstract get subTitle(): string;\n}\n","export enum InitializerKey {\n  Cipher = 0,\n  CipherView = 1,\n}\n","export enum EncryptionType {\n  AesCbc256_B64 = 0,\n  AesCbc128_HmacSha256_B64 = 1,\n  AesCbc256_HmacSha256_B64 = 2,\n  Rsa2048_OaepSha256_B64 = 3,\n  Rsa2048_OaepSha1_B64 = 4,\n  Rsa2048_OaepSha256_HmacSha256_B64 = 5,\n  Rsa2048_OaepSha1_HmacSha256_B64 = 6,\n}\n","import { Jsonify } from \"type-fest\";\n\nimport { CardLinkedId as LinkedId } from \"../../../enums/linkedIdType\";\nimport { linkedFieldOption } from \"../../../misc/linkedFieldOption.decorator\";\n\nimport { ItemView } from \"./item.view\";\n\nexport class CardView extends ItemView {\n  @linkedFieldOption(LinkedId.CardholderName)\n  cardholderName: string = null;\n  @linkedFieldOption(LinkedId.ExpMonth, \"expirationMonth\")\n  expMonth: string = null;\n  @linkedFieldOption(LinkedId.ExpYear, \"expirationYear\")\n  expYear: string = null;\n  @linkedFieldOption(LinkedId.Code, \"securityCode\")\n  code: string = null;\n\n  private _brand: string = null;\n  private _number: string = null;\n  private _subTitle: string = null;\n\n  get maskedCode(): string {\n    return this.code != null ? \"•\".repeat(this.code.length) : null;\n  }\n\n  get maskedNumber(): string {\n    return this.number != null ? \"•\".repeat(this.number.length) : null;\n  }\n\n  @linkedFieldOption(LinkedId.Brand)\n  get brand(): string {\n    return this._brand;\n  }\n  set brand(value: string) {\n    this._brand = value;\n    this._subTitle = null;\n  }\n\n  @linkedFieldOption(LinkedId.Number)\n  get number(): string {\n    return this._number;\n  }\n  set number(value: string) {\n    this._number = value;\n    this._subTitle = null;\n  }\n\n  get subTitle(): string {\n    if (this._subTitle == null) {\n      this._subTitle = this.brand;\n      if (this.number != null && this.number.length >= 4) {\n        if (this._subTitle != null && this._subTitle !== \"\") {\n          this._subTitle += \", \";\n        } else {\n          this._subTitle = \"\";\n        }\n\n        // Show last 5 on amex, last 4 for all others\n        const count =\n          this.number.length >= 5 && this.number.match(new RegExp(\"^3[47]\")) != null ? 5 : 4;\n        this._subTitle += \"*\" + this.number.substr(this.number.length - count);\n      }\n    }\n    return this._subTitle;\n  }\n\n  get expiration(): string {\n    if (!this.expMonth && !this.expYear) {\n      return null;\n    }\n\n    let exp = this.expMonth != null ? (\"0\" + this.expMonth).slice(-2) : \"__\";\n    exp += \" / \" + (this.expYear != null ? this.formatYear(this.expYear) : \"____\");\n    return exp;\n  }\n\n  private formatYear(year: string): string {\n    return year.length === 2 ? \"20\" + year : year;\n  }\n\n  static fromJSON(obj: Partial<Jsonify<CardView>>): CardView {\n    return Object.assign(new CardView(), obj);\n  }\n}\n","import { Jsonify } from \"type-fest\";\n\nimport { EncryptionType } from \"../../enums/encryptionType\";\nimport { Utils } from \"../../misc/utils\";\n\nexport class SymmetricCryptoKey {\n  key: ArrayBuffer;\n  encKey?: ArrayBuffer;\n  macKey?: ArrayBuffer;\n  encType: EncryptionType;\n\n  keyB64: string;\n  encKeyB64: string;\n  macKeyB64: string;\n\n  meta: any;\n\n  constructor(key: ArrayBuffer, encType?: EncryptionType) {\n    if (key == null) {\n      throw new Error(\"Must provide key\");\n    }\n\n    if (encType == null) {\n      if (key.byteLength === 32) {\n        encType = EncryptionType.AesCbc256_B64;\n      } else if (key.byteLength === 64) {\n        encType = EncryptionType.AesCbc256_HmacSha256_B64;\n      } else {\n        throw new Error(\"Unable to determine encType.\");\n      }\n    }\n\n    this.key = key;\n    this.encType = encType;\n\n    if (encType === EncryptionType.AesCbc256_B64 && key.byteLength === 32) {\n      this.encKey = key;\n      this.macKey = null;\n    } else if (encType === EncryptionType.AesCbc128_HmacSha256_B64 && key.byteLength === 32) {\n      this.encKey = key.slice(0, 16);\n      this.macKey = key.slice(16, 32);\n    } else if (encType === EncryptionType.AesCbc256_HmacSha256_B64 && key.byteLength === 64) {\n      this.encKey = key.slice(0, 32);\n      this.macKey = key.slice(32, 64);\n    } else {\n      throw new Error(\"Unsupported encType/key length.\");\n    }\n\n    if (this.key != null) {\n      this.keyB64 = Utils.fromBufferToB64(this.key);\n    }\n    if (this.encKey != null) {\n      this.encKeyB64 = Utils.fromBufferToB64(this.encKey);\n    }\n    if (this.macKey != null) {\n      this.macKeyB64 = Utils.fromBufferToB64(this.macKey);\n    }\n  }\n\n  toJSON() {\n    // The whole object is constructed from the initial key, so just store the B64 key\n    return { keyB64: this.keyB64 };\n  }\n\n  static fromJSON(obj: Jsonify<SymmetricCryptoKey>): SymmetricCryptoKey {\n    if (obj == null) {\n      return null;\n    }\n\n    const arrayBuffer = Utils.fromB64ToArray(obj.keyB64).buffer;\n    return new SymmetricCryptoKey(arrayBuffer);\n  }\n}\n","import { Jsonify } from \"type-fest\";\n\nimport { SymmetricCryptoKey } from \"../../../models/domain/symmetric-crypto-key\";\nimport { View } from \"../../../models/view/view\";\nimport { Attachment } from \"../domain/attachment\";\n\nexport class AttachmentView implements View {\n  id: string = null;\n  url: string = null;\n  size: string = null;\n  sizeName: string = null;\n  fileName: string = null;\n  key: SymmetricCryptoKey = null;\n\n  constructor(a?: Attachment) {\n    if (!a) {\n      return;\n    }\n\n    this.id = a.id;\n    this.url = a.url;\n    this.size = a.size;\n    this.sizeName = a.sizeName;\n  }\n\n  get fileSize(): number {\n    try {\n      if (this.size != null) {\n        return parseInt(this.size, null);\n      }\n    } catch {\n      // Invalid file size.\n    }\n    return 0;\n  }\n\n  static fromJSON(obj: Partial<Jsonify<AttachmentView>>): AttachmentView {\n    const key = obj.key == null ? null : SymmetricCryptoKey.fromJSON(obj.key);\n    return Object.assign(new AttachmentView(), obj, { key: key });\n  }\n}\n","import { Jsonify } from \"type-fest\";\n\nimport { FieldType } from \"../../../enums/fieldType\";\nimport { LinkedIdType } from \"../../../enums/linkedIdType\";\nimport { View } from \"../../../models/view/view\";\nimport { Field } from \"../domain/field\";\n\nexport class FieldView implements View {\n  name: string = null;\n  value: string = null;\n  type: FieldType = null;\n  newField = false; // Marks if the field is new and hasn't been saved\n  showValue = false;\n  showCount = false;\n  linkedId: LinkedIdType = null;\n\n  constructor(f?: Field) {\n    if (!f) {\n      return;\n    }\n\n    this.type = f.type;\n    this.linkedId = f.linkedId;\n  }\n\n  get maskedValue(): string {\n    return this.value != null ? \"••••••••\" : null;\n  }\n\n  static fromJSON(obj: Partial<Jsonify<FieldView>>): FieldView {\n    return Object.assign(new FieldView(), obj);\n  }\n}\n","import { Jsonify } from \"type-fest\";\n\nimport { IdentityLinkedId as LinkedId } from \"../../../enums/linkedIdType\";\nimport { linkedFieldOption } from \"../../../misc/linkedFieldOption.decorator\";\nimport { Utils } from \"../../../misc/utils\";\n\nimport { ItemView } from \"./item.view\";\n\nexport class IdentityView extends ItemView {\n  @linkedFieldOption(LinkedId.Title)\n  title: string = null;\n  @linkedFieldOption(LinkedId.MiddleName)\n  middleName: string = null;\n  @linkedFieldOption(LinkedId.Address1)\n  address1: string = null;\n  @linkedFieldOption(LinkedId.Address2)\n  address2: string = null;\n  @linkedFieldOption(LinkedId.Address3)\n  address3: string = null;\n  @linkedFieldOption(LinkedId.City, \"cityTown\")\n  city: string = null;\n  @linkedFieldOption(LinkedId.State, \"stateProvince\")\n  state: string = null;\n  @linkedFieldOption(LinkedId.PostalCode, \"zipPostalCode\")\n  postalCode: string = null;\n  @linkedFieldOption(LinkedId.Country)\n  country: string = null;\n  @linkedFieldOption(LinkedId.Company)\n  company: string = null;\n  @linkedFieldOption(LinkedId.Email)\n  email: string = null;\n  @linkedFieldOption(LinkedId.Phone)\n  phone: string = null;\n  @linkedFieldOption(LinkedId.Ssn)\n  ssn: string = null;\n  @linkedFieldOption(LinkedId.Username)\n  username: string = null;\n  @linkedFieldOption(LinkedId.PassportNumber)\n  passportNumber: string = null;\n  @linkedFieldOption(LinkedId.LicenseNumber)\n  licenseNumber: string = null;\n\n  private _firstName: string = null;\n  private _lastName: string = null;\n  private _subTitle: string = null;\n\n  constructor() {\n    super();\n  }\n\n  @linkedFieldOption(LinkedId.FirstName)\n  get firstName(): string {\n    return this._firstName;\n  }\n  set firstName(value: string) {\n    this._firstName = value;\n    this._subTitle = null;\n  }\n\n  @linkedFieldOption(LinkedId.LastName)\n  get lastName(): string {\n    return this._lastName;\n  }\n  set lastName(value: string) {\n    this._lastName = value;\n    this._subTitle = null;\n  }\n\n  get subTitle(): string {\n    if (this._subTitle == null && (this.firstName != null || this.lastName != null)) {\n      this._subTitle = \"\";\n      if (this.firstName != null) {\n        this._subTitle = this.firstName;\n      }\n      if (this.lastName != null) {\n        if (this._subTitle !== \"\") {\n          this._subTitle += \" \";\n        }\n        this._subTitle += this.lastName;\n      }\n    }\n\n    return this._subTitle;\n  }\n\n  @linkedFieldOption(LinkedId.FullName)\n  get fullName(): string {\n    if (\n      this.title != null ||\n      this.firstName != null ||\n      this.middleName != null ||\n      this.lastName != null\n    ) {\n      let name = \"\";\n      if (this.title != null) {\n        name += this.title + \" \";\n      }\n      if (this.firstName != null) {\n        name += this.firstName + \" \";\n      }\n      if (this.middleName != null) {\n        name += this.middleName + \" \";\n      }\n      if (this.lastName != null) {\n        name += this.lastName;\n      }\n      return name.trim();\n    }\n\n    return null;\n  }\n\n  get fullAddress(): string {\n    let address = this.address1;\n    if (!Utils.isNullOrWhitespace(this.address2)) {\n      if (!Utils.isNullOrWhitespace(address)) {\n        address += \", \";\n      }\n      address += this.address2;\n    }\n    if (!Utils.isNullOrWhitespace(this.address3)) {\n      if (!Utils.isNullOrWhitespace(address)) {\n        address += \", \";\n      }\n      address += this.address3;\n    }\n    return address;\n  }\n\n  get fullAddressPart2(): string {\n    if (this.city == null && this.state == null && this.postalCode == null) {\n      return null;\n    }\n    const city = this.city || \"-\";\n    const state = this.state;\n    const postalCode = this.postalCode || \"-\";\n    let addressPart2 = city;\n    if (!Utils.isNullOrWhitespace(state)) {\n      addressPart2 += \", \" + state;\n    }\n    addressPart2 += \", \" + postalCode;\n    return addressPart2;\n  }\n\n  static fromJSON(obj: Partial<Jsonify<IdentityView>>): IdentityView {\n    return Object.assign(new IdentityView(), obj);\n  }\n}\n","import { Jsonify } from \"type-fest\";\n\nimport { UriMatchType } from \"../../../enums/uriMatchType\";\nimport { Utils } from \"../../../misc/utils\";\nimport { View } from \"../../../models/view/view\";\nimport { LoginUri } from \"../domain/login-uri\";\n\nconst CanLaunchWhitelist = [\n  \"https://\",\n  \"http://\",\n  \"ssh://\",\n  \"ftp://\",\n  \"sftp://\",\n  \"irc://\",\n  \"vnc://\",\n  // https://docs.microsoft.com/en-us/windows-server/remote/remote-desktop-services/clients/remote-desktop-uri\n  \"rdp://\", // Legacy RDP URI scheme\n  \"ms-rd:\", // Preferred RDP URI scheme\n  \"chrome://\",\n  \"iosapp://\",\n  \"androidapp://\",\n];\n\nexport class LoginUriView implements View {\n  match: UriMatchType = null;\n\n  private _uri: string = null;\n  private _domain: string = null;\n  private _hostname: string = null;\n  private _host: string = null;\n  private _canLaunch: boolean = null;\n\n  constructor(u?: LoginUri) {\n    if (!u) {\n      return;\n    }\n\n    this.match = u.match;\n  }\n\n  get uri(): string {\n    return this._uri;\n  }\n  set uri(value: string) {\n    this._uri = value;\n    this._domain = null;\n    this._canLaunch = null;\n  }\n\n  get domain(): string {\n    if (this._domain == null && this.uri != null) {\n      this._domain = Utils.getDomain(this.uri);\n      if (this._domain === \"\") {\n        this._domain = null;\n      }\n    }\n\n    return this._domain;\n  }\n\n  get hostname(): string {\n    if (this.match === UriMatchType.RegularExpression) {\n      return null;\n    }\n    if (this._hostname == null && this.uri != null) {\n      this._hostname = Utils.getHostname(this.uri);\n      if (this._hostname === \"\") {\n        this._hostname = null;\n      }\n    }\n\n    return this._hostname;\n  }\n\n  get host(): string {\n    if (this.match === UriMatchType.RegularExpression) {\n      return null;\n    }\n    if (this._host == null && this.uri != null) {\n      this._host = Utils.getHost(this.uri);\n      if (this._host === \"\") {\n        this._host = null;\n      }\n    }\n\n    return this._host;\n  }\n\n  get hostnameOrUri(): string {\n    return this.hostname != null ? this.hostname : this.uri;\n  }\n\n  get hostOrUri(): string {\n    return this.host != null ? this.host : this.uri;\n  }\n\n  get isWebsite(): boolean {\n    return (\n      this.uri != null &&\n      (this.uri.indexOf(\"http://\") === 0 ||\n        this.uri.indexOf(\"https://\") === 0 ||\n        (this.uri.indexOf(\"://\") < 0 && !Utils.isNullOrWhitespace(Utils.getDomain(this.uri))))\n    );\n  }\n\n  get canLaunch(): boolean {\n    if (this._canLaunch != null) {\n      return this._canLaunch;\n    }\n    if (this.uri != null && this.match !== UriMatchType.RegularExpression) {\n      const uri = this.launchUri;\n      for (let i = 0; i < CanLaunchWhitelist.length; i++) {\n        if (uri.indexOf(CanLaunchWhitelist[i]) === 0) {\n          this._canLaunch = true;\n          return this._canLaunch;\n        }\n      }\n    }\n    this._canLaunch = false;\n    return this._canLaunch;\n  }\n\n  get launchUri(): string {\n    return this.uri.indexOf(\"://\") < 0 && !Utils.isNullOrWhitespace(Utils.getDomain(this.uri))\n      ? \"http://\" + this.uri\n      : this.uri;\n  }\n\n  static fromJSON(obj: Partial<Jsonify<LoginUriView>>): LoginUriView {\n    return Object.assign(new LoginUriView(), obj);\n  }\n}\n","import { Jsonify } from \"type-fest\";\n\nimport { LoginLinkedId as LinkedId } from \"../../../enums/linkedIdType\";\nimport { linkedFieldOption } from \"../../../misc/linkedFieldOption.decorator\";\nimport { Utils } from \"../../../misc/utils\";\nimport { Login } from \"../domain/login\";\n\nimport { ItemView } from \"./item.view\";\nimport { LoginUriView } from \"./login-uri.view\";\n\nexport class LoginView extends ItemView {\n  @linkedFieldOption(LinkedId.Username)\n  username: string = null;\n  @linkedFieldOption(LinkedId.Password)\n  password: string = null;\n\n  passwordRevisionDate?: Date = null;\n  totp: string = null;\n  uris: LoginUriView[] = null;\n  autofillOnPageLoad: boolean = null;\n\n  constructor(l?: Login) {\n    super();\n    if (!l) {\n      return;\n    }\n\n    this.passwordRevisionDate = l.passwordRevisionDate;\n    this.autofillOnPageLoad = l.autofillOnPageLoad;\n  }\n\n  get uri(): string {\n    return this.hasUris ? this.uris[0].uri : null;\n  }\n\n  get maskedPassword(): string {\n    return this.password != null ? \"••••••••\" : null;\n  }\n\n  get subTitle(): string {\n    return this.username;\n  }\n\n  get canLaunch(): boolean {\n    return this.hasUris && this.uris.some((u) => u.canLaunch);\n  }\n\n  get hasTotp(): boolean {\n    return !Utils.isNullOrWhitespace(this.totp);\n  }\n\n  get launchUri(): string {\n    if (this.hasUris) {\n      const uri = this.uris.find((u) => u.canLaunch);\n      if (uri != null) {\n        return uri.launchUri;\n      }\n    }\n    return null;\n  }\n\n  get hasUris(): boolean {\n    return this.uris != null && this.uris.length > 0;\n  }\n\n  static fromJSON(obj: Partial<Jsonify<LoginView>>): LoginView {\n    const passwordRevisionDate =\n      obj.passwordRevisionDate == null ? null : new Date(obj.passwordRevisionDate);\n    const uris = obj.uris?.map((uri: any) => LoginUriView.fromJSON(uri));\n\n    return Object.assign(new LoginView(), obj, {\n      passwordRevisionDate: passwordRevisionDate,\n      uris: uris,\n    });\n  }\n}\n","import { Jsonify } from \"type-fest\";\n\nimport { View } from \"../../../models/view/view\";\nimport { Password } from \"../domain/password\";\n\nexport class PasswordHistoryView implements View {\n  password: string = null;\n  lastUsedDate: Date = null;\n\n  constructor(ph?: Password) {\n    if (!ph) {\n      return;\n    }\n\n    this.lastUsedDate = ph.lastUsedDate;\n  }\n\n  static fromJSON(obj: Partial<Jsonify<PasswordHistoryView>>): PasswordHistoryView {\n    const lastUsedDate = obj.lastUsedDate == null ? null : new Date(obj.lastUsedDate);\n\n    return Object.assign(new PasswordHistoryView(), obj, {\n      lastUsedDate: lastUsedDate,\n    });\n  }\n}\n","import { Jsonify } from \"type-fest\";\n\nimport { SecureNoteType } from \"../../../enums/secureNoteType\";\nimport { SecureNote } from \"../domain/secure-note\";\n\nimport { ItemView } from \"./item.view\";\n\nexport class SecureNoteView extends ItemView {\n  type: SecureNoteType = null;\n\n  constructor(n?: SecureNote) {\n    super();\n    if (!n) {\n      return;\n    }\n\n    this.type = n.type;\n  }\n\n  get subTitle(): string {\n    return null;\n  }\n\n  static fromJSON(obj: Partial<Jsonify<SecureNoteView>>): SecureNoteView {\n    return Object.assign(new SecureNoteView(), obj);\n  }\n}\n","import { Jsonify } from \"type-fest\";\n\nimport { LinkedIdType } from \"../../../enums/linkedIdType\";\nimport { InitializerMetadata } from \"../../../interfaces/initializer-metadata.interface\";\nimport { View } from \"../../../models/view/view\";\nimport { InitializerKey } from \"../../../services/cryptography/initializer-key\";\nimport { CipherRepromptType } from \"../../enums/cipher-reprompt-type\";\nimport { CipherType } from \"../../enums/cipher-type\";\nimport { LocalData } from \"../data/local.data\";\nimport { Cipher } from \"../domain/cipher\";\n\nimport { AttachmentView } from \"./attachment.view\";\nimport { CardView } from \"./card.view\";\nimport { FieldView } from \"./field.view\";\nimport { IdentityView } from \"./identity.view\";\nimport { LoginView } from \"./login.view\";\nimport { PasswordHistoryView } from \"./password-history.view\";\nimport { SecureNoteView } from \"./secure-note.view\";\n\nexport class CipherView implements View, InitializerMetadata {\n  readonly initializerKey = InitializerKey.CipherView;\n\n  id: string = null;\n  organizationId: string = null;\n  folderId: string = null;\n  name: string = null;\n  notes: string = null;\n  type: CipherType = null;\n  favorite = false;\n  organizationUseTotp = false;\n  edit = false;\n  viewPassword = true;\n  localData: LocalData;\n  login = new LoginView();\n  identity = new IdentityView();\n  card = new CardView();\n  secureNote = new SecureNoteView();\n  attachments: AttachmentView[] = null;\n  fields: FieldView[] = null;\n  passwordHistory: PasswordHistoryView[] = null;\n  collectionIds: string[] = null;\n  revisionDate: Date = null;\n  creationDate: Date = null;\n  deletedDate: Date = null;\n  reprompt: CipherRepromptType = CipherRepromptType.None;\n\n  constructor(c?: Cipher) {\n    if (!c) {\n      return;\n    }\n\n    this.id = c.id;\n    this.organizationId = c.organizationId;\n    this.folderId = c.folderId;\n    this.favorite = c.favorite;\n    this.organizationUseTotp = c.organizationUseTotp;\n    this.edit = c.edit;\n    this.viewPassword = c.viewPassword;\n    this.type = c.type;\n    this.localData = c.localData;\n    this.collectionIds = c.collectionIds;\n    this.revisionDate = c.revisionDate;\n    this.creationDate = c.creationDate;\n    this.deletedDate = c.deletedDate;\n    // Old locally stored ciphers might have reprompt == null. If so set it to None.\n    this.reprompt = c.reprompt ?? CipherRepromptType.None;\n  }\n\n  private get item() {\n    switch (this.type) {\n      case CipherType.Login:\n        return this.login;\n      case CipherType.SecureNote:\n        return this.secureNote;\n      case CipherType.Card:\n        return this.card;\n      case CipherType.Identity:\n        return this.identity;\n      default:\n        break;\n    }\n\n    return null;\n  }\n\n  get subTitle(): string {\n    return this.item.subTitle;\n  }\n\n  get hasPasswordHistory(): boolean {\n    return this.passwordHistory && this.passwordHistory.length > 0;\n  }\n\n  get hasAttachments(): boolean {\n    return this.attachments && this.attachments.length > 0;\n  }\n\n  get hasOldAttachments(): boolean {\n    if (this.hasAttachments) {\n      for (let i = 0; i < this.attachments.length; i++) {\n        if (this.attachments[i].key == null) {\n          return true;\n        }\n      }\n    }\n    return false;\n  }\n\n  get hasFields(): boolean {\n    return this.fields && this.fields.length > 0;\n  }\n\n  get passwordRevisionDisplayDate(): Date {\n    if (this.type !== CipherType.Login || this.login == null) {\n      return null;\n    } else if (this.login.password == null || this.login.password === \"\") {\n      return null;\n    }\n    return this.login.passwordRevisionDate;\n  }\n\n  get isDeleted(): boolean {\n    return this.deletedDate != null;\n  }\n\n  get linkedFieldOptions() {\n    return this.item.linkedFieldOptions;\n  }\n\n  linkedFieldValue(id: LinkedIdType) {\n    const linkedFieldOption = this.linkedFieldOptions?.get(id);\n    if (linkedFieldOption == null) {\n      return null;\n    }\n\n    const item = this.item;\n    return this.item[linkedFieldOption.propertyKey as keyof typeof item];\n  }\n\n  linkedFieldI18nKey(id: LinkedIdType): string {\n    return this.linkedFieldOptions.get(id)?.i18nKey;\n  }\n\n  static fromJSON(obj: Partial<Jsonify<CipherView>>): CipherView {\n    const view = new CipherView();\n    const revisionDate = obj.revisionDate == null ? null : new Date(obj.revisionDate);\n    const deletedDate = obj.deletedDate == null ? null : new Date(obj.deletedDate);\n    const attachments = obj.attachments?.map((a: any) => AttachmentView.fromJSON(a));\n    const fields = obj.fields?.map((f: any) => FieldView.fromJSON(f));\n    const passwordHistory = obj.passwordHistory?.map((ph: any) => PasswordHistoryView.fromJSON(ph));\n\n    Object.assign(view, obj, {\n      revisionDate: revisionDate,\n      deletedDate: deletedDate,\n      attachments: attachments,\n      fields: fields,\n      passwordHistory: passwordHistory,\n    });\n\n    switch (obj.type) {\n      case CipherType.Card:\n        view.card = CardView.fromJSON(obj.card);\n        break;\n      case CipherType.Identity:\n        view.identity = IdentityView.fromJSON(obj.identity);\n        break;\n      case CipherType.Login:\n        view.login = LoginView.fromJSON(obj.login);\n        break;\n      case CipherType.SecureNote:\n        view.secureNote = SecureNoteView.fromJSON(obj.secureNote);\n        break;\n      default:\n        break;\n    }\n\n    return view;\n  }\n}\n","import { UriMatchType } from \"../../enums/uriMatchType\";\nimport { SymmetricCryptoKey } from \"../../models/domain/symmetric-crypto-key\";\nimport { CipherType } from \"../enums/cipher-type\";\nimport { CipherData } from \"../models/data/cipher.data\";\nimport { Cipher } from \"../models/domain/cipher\";\nimport { Field } from \"../models/domain/field\";\nimport { CipherView } from \"../models/view/cipher.view\";\nimport { FieldView } from \"../models/view/field.view\";\n\nexport abstract class CipherService {\n  clearCache: (userId?: string) => Promise<void>;\n  encrypt: (\n    model: CipherView,\n    key?: SymmetricCryptoKey,\n    originalCipher?: Cipher\n  ) => Promise<Cipher>;\n  encryptFields: (fieldsModel: FieldView[], key: SymmetricCryptoKey) => Promise<Field[]>;\n  encryptField: (fieldModel: FieldView, key: SymmetricCryptoKey) => Promise<Field>;\n  get: (id: string) => Promise<Cipher>;\n  getAll: () => Promise<Cipher[]>;\n  getAllDecrypted: () => Promise<CipherView[]>;\n  getAllDecryptedForGrouping: (groupingId: string, folder?: boolean) => Promise<CipherView[]>;\n  getAllDecryptedForUrl: (\n    url: string,\n    includeOtherTypes?: CipherType[],\n    defaultMatch?: UriMatchType\n  ) => Promise<CipherView[]>;\n  getAllFromApiForOrganization: (organizationId: string) => Promise<CipherView[]>;\n  getLastUsedForUrl: (url: string, autofillOnPageLoad: boolean) => Promise<CipherView>;\n  getLastLaunchedForUrl: (url: string, autofillOnPageLoad: boolean) => Promise<CipherView>;\n  getNextCipherForUrl: (url: string) => Promise<CipherView>;\n  updateLastUsedIndexForUrl: (url: string) => void;\n  updateLastUsedDate: (id: string) => Promise<void>;\n  updateLastLaunchedDate: (id: string) => Promise<void>;\n  saveNeverDomain: (domain: string) => Promise<void>;\n  createWithServer: (cipher: Cipher) => Promise<any>;\n  updateWithServer: (cipher: Cipher) => Promise<any>;\n  shareWithServer: (\n    cipher: CipherView,\n    organizationId: string,\n    collectionIds: string[]\n  ) => Promise<any>;\n  shareManyWithServer: (\n    ciphers: CipherView[],\n    organizationId: string,\n    collectionIds: string[]\n  ) => Promise<any>;\n  saveAttachmentWithServer: (\n    cipher: Cipher,\n    unencryptedFile: any,\n    admin?: boolean\n  ) => Promise<Cipher>;\n  saveAttachmentRawWithServer: (\n    cipher: Cipher,\n    filename: string,\n    data: ArrayBuffer,\n    admin?: boolean\n  ) => Promise<Cipher>;\n  saveCollectionsWithServer: (cipher: Cipher) => Promise<any>;\n  upsert: (cipher: CipherData | CipherData[]) => Promise<any>;\n  replace: (ciphers: { [id: string]: CipherData }) => Promise<any>;\n  clear: (userId: string) => Promise<any>;\n  moveManyWithServer: (ids: string[], folderId: string) => Promise<any>;\n  delete: (id: string | string[]) => Promise<any>;\n  deleteWithServer: (id: string) => Promise<any>;\n  deleteManyWithServer: (ids: string[]) => Promise<any>;\n  deleteAttachment: (id: string, attachmentId: string) => Promise<void>;\n  deleteAttachmentWithServer: (id: string, attachmentId: string) => Promise<void>;\n  sortCiphersByLastUsed: (a: CipherView, b: CipherView) => number;\n  sortCiphersByLastUsedThenName: (a: CipherView, b: CipherView) => number;\n  getLocaleSortingFunction: () => (a: CipherView, b: CipherView) => number;\n  softDelete: (id: string | string[]) => Promise<any>;\n  softDeleteWithServer: (id: string) => Promise<any>;\n  softDeleteManyWithServer: (ids: string[]) => Promise<any>;\n  restore: (\n    cipher: { id: string; revisionDate: string } | { id: string; revisionDate: string }[]\n  ) => Promise<any>;\n  restoreWithServer: (id: string) => Promise<any>;\n  restoreManyWithServer: (ids: string[]) => Promise<any>;\n}\n","import { Observable } from \"rxjs\";\n\nimport { SymmetricCryptoKey } from \"../../../models/domain/symmetric-crypto-key\";\nimport { FolderData } from \"../../models/data/folder.data\";\nimport { Folder } from \"../../models/domain/folder\";\nimport { FolderView } from \"../../models/view/folder.view\";\n\nexport abstract class FolderService {\n  folders$: Observable<Folder[]>;\n  folderViews$: Observable<FolderView[]>;\n\n  clearCache: () => Promise<void>;\n  encrypt: (model: FolderView, key?: SymmetricCryptoKey) => Promise<Folder>;\n  get: (id: string) => Promise<Folder>;\n  getAllFromState: () => Promise<Folder[]>;\n  /**\n   * @deprecated Only use in CLI!\n   */\n  getFromState: (id: string) => Promise<Folder>;\n  /**\n   * @deprecated Only use in CLI!\n   */\n  getAllDecryptedFromState: () => Promise<FolderView[]>;\n}\n\nexport abstract class InternalFolderService extends FolderService {\n  upsert: (folder: FolderData | FolderData[]) => Promise<void>;\n  replace: (folders: { [id: string]: FolderData }) => Promise<void>;\n  clear: (userId: string) => Promise<any>;\n  delete: (id: string | string[]) => Promise<any>;\n}\n","import { ClientType } from \"../enums/clientType\";\nimport { DeviceType } from \"../enums/deviceType\";\n\ninterface ToastOptions {\n  timeout?: number;\n}\n\nexport abstract class PlatformUtilsService {\n  getDevice: () => DeviceType;\n  getDeviceString: () => string;\n  getClientType: () => ClientType;\n  isFirefox: () => boolean;\n  isChrome: () => boolean;\n  isEdge: () => boolean;\n  isOpera: () => boolean;\n  isVivaldi: () => boolean;\n  isSafari: () => boolean;\n  isMacAppStore: () => boolean;\n  isViewOpen: () => Promise<boolean>;\n  launchUri: (uri: string, options?: any) => void;\n  getApplicationVersion: () => Promise<string>;\n  getApplicationVersionNumber: () => Promise<string>;\n  supportsWebAuthn: (win: Window) => boolean;\n  supportsDuo: () => boolean;\n  showToast: (\n    type: \"error\" | \"success\" | \"warning\" | \"info\",\n    title: string,\n    text: string | string[],\n    options?: ToastOptions\n  ) => void;\n  showDialog: (\n    body: string,\n    title?: string,\n    confirmText?: string,\n    cancelText?: string,\n    type?: string,\n    bodyIsHtml?: boolean,\n    target?: string\n  ) => Promise<boolean>;\n  isDev: () => boolean;\n  isSelfHost: () => boolean;\n  copyToClipboard: (text: string, options?: any) => void | boolean;\n  readFromClipboard: (options?: any) => Promise<string>;\n  supportsBiometric: () => Promise<boolean>;\n  authenticateBiometric: () => Promise<boolean>;\n  supportsSecureStorage: () => boolean;\n}\n","import { BreachAccountResponse } from \"../models/response/breach-account.response\";\n\nexport abstract class AuditService {\n  passwordLeaked: (password: string) => Promise<number>;\n  breachedAccounts: (username: string) => Promise<BreachAccountResponse[]>;\n}\n","import { Observable } from \"rxjs\";\n\nimport { KdfType } from \"../enums/kdfType\";\nimport { ThemeType } from \"../enums/themeType\";\nimport { UriMatchType } from \"../enums/uriMatchType\";\nimport { CollectionData } from \"../models/data/collection.data\";\nimport { EncryptedOrganizationKeyData } from \"../models/data/encrypted-organization-key.data\";\nimport { EventData } from \"../models/data/event.data\";\nimport { OrganizationData } from \"../models/data/organization.data\";\nimport { PolicyData } from \"../models/data/policy.data\";\nimport { ProviderData } from \"../models/data/provider.data\";\nimport { SendData } from \"../models/data/send.data\";\nimport { ServerConfigData } from \"../models/data/server-config.data\";\nimport { Account, AccountSettingsSettings } from \"../models/domain/account\";\nimport { EncString } from \"../models/domain/enc-string\";\nimport { EnvironmentUrls } from \"../models/domain/environment-urls\";\nimport { GeneratedPasswordHistory } from \"../models/domain/generated-password-history\";\nimport { KdfConfig } from \"../models/domain/kdf-config\";\nimport { Policy } from \"../models/domain/policy\";\nimport { StorageOptions } from \"../models/domain/storage-options\";\nimport { SymmetricCryptoKey } from \"../models/domain/symmetric-crypto-key\";\nimport { WindowState } from \"../models/domain/window-state\";\nimport { CollectionView } from \"../models/view/collection.view\";\nimport { SendView } from \"../models/view/send.view\";\nimport { CipherData } from \"../vault/models/data/cipher.data\";\nimport { FolderData } from \"../vault/models/data/folder.data\";\nimport { LocalData } from \"../vault/models/data/local.data\";\nimport { CipherView } from \"../vault/models/view/cipher.view\";\n\nexport abstract class StateService<T extends Account = Account> {\n  accounts$: Observable<{ [userId: string]: T }>;\n  activeAccount$: Observable<string>;\n  activeAccountUnlocked$: Observable<boolean>;\n\n  addAccount: (account: T) => Promise<void>;\n  setActiveUser: (userId: string) => Promise<void>;\n  clean: (options?: StorageOptions) => Promise<void>;\n  init: () => Promise<void>;\n\n  getAccessToken: (options?: StorageOptions) => Promise<string>;\n  setAccessToken: (value: string, options?: StorageOptions) => Promise<void>;\n  getAddEditCipherInfo: (options?: StorageOptions) => Promise<any>;\n  setAddEditCipherInfo: (value: any, options?: StorageOptions) => Promise<void>;\n  getAlwaysShowDock: (options?: StorageOptions) => Promise<boolean>;\n  setAlwaysShowDock: (value: boolean, options?: StorageOptions) => Promise<void>;\n  getApiKeyClientId: (options?: StorageOptions) => Promise<string>;\n  setApiKeyClientId: (value: string, options?: StorageOptions) => Promise<void>;\n  getApiKeyClientSecret: (options?: StorageOptions) => Promise<string>;\n  setApiKeyClientSecret: (value: string, options?: StorageOptions) => Promise<void>;\n  getAutoConfirmFingerPrints: (options?: StorageOptions) => Promise<boolean>;\n  setAutoConfirmFingerprints: (value: boolean, options?: StorageOptions) => Promise<void>;\n  getAutoFillOnPageLoadDefault: (options?: StorageOptions) => Promise<boolean>;\n  setAutoFillOnPageLoadDefault: (value: boolean, options?: StorageOptions) => Promise<void>;\n  getBiometricAwaitingAcceptance: (options?: StorageOptions) => Promise<boolean>;\n  setBiometricAwaitingAcceptance: (value: boolean, options?: StorageOptions) => Promise<void>;\n  getBiometricFingerprintValidated: (options?: StorageOptions) => Promise<boolean>;\n  setBiometricFingerprintValidated: (value: boolean, options?: StorageOptions) => Promise<void>;\n  getBiometricText: (options?: StorageOptions) => Promise<string>;\n  setBiometricText: (value: string, options?: StorageOptions) => Promise<void>;\n  getBiometricUnlock: (options?: StorageOptions) => Promise<boolean>;\n  setBiometricUnlock: (value: boolean, options?: StorageOptions) => Promise<void>;\n  getCanAccessPremium: (options?: StorageOptions) => Promise<boolean>;\n  getHasPremiumPersonally: (options?: StorageOptions) => Promise<boolean>;\n  setHasPremiumPersonally: (value: boolean, options?: StorageOptions) => Promise<void>;\n  setHasPremiumFromOrganization: (value: boolean, options?: StorageOptions) => Promise<void>;\n  getHasPremiumFromOrganization: (options?: StorageOptions) => Promise<boolean>;\n  getClearClipboard: (options?: StorageOptions) => Promise<number>;\n  setClearClipboard: (value: number, options?: StorageOptions) => Promise<void>;\n  getCollapsedGroupings: (options?: StorageOptions) => Promise<string[]>;\n  setCollapsedGroupings: (value: string[], options?: StorageOptions) => Promise<void>;\n  getConvertAccountToKeyConnector: (options?: StorageOptions) => Promise<boolean>;\n  setConvertAccountToKeyConnector: (value: boolean, options?: StorageOptions) => Promise<void>;\n  getCryptoMasterKey: (options?: StorageOptions) => Promise<SymmetricCryptoKey>;\n  setCryptoMasterKey: (value: SymmetricCryptoKey, options?: StorageOptions) => Promise<void>;\n  getCryptoMasterKeyAuto: (options?: StorageOptions) => Promise<string>;\n  setCryptoMasterKeyAuto: (value: string, options?: StorageOptions) => Promise<void>;\n  getCryptoMasterKeyB64: (options?: StorageOptions) => Promise<string>;\n  setCryptoMasterKeyB64: (value: string, options?: StorageOptions) => Promise<void>;\n  getCryptoMasterKeyBiometric: (options?: StorageOptions) => Promise<string>;\n  hasCryptoMasterKeyBiometric: (options?: StorageOptions) => Promise<boolean>;\n  setCryptoMasterKeyBiometric: (value: string, options?: StorageOptions) => Promise<void>;\n  getDecryptedCiphers: (options?: StorageOptions) => Promise<CipherView[]>;\n  setDecryptedCiphers: (value: CipherView[], options?: StorageOptions) => Promise<void>;\n  getDecryptedCollections: (options?: StorageOptions) => Promise<CollectionView[]>;\n  setDecryptedCollections: (value: CollectionView[], options?: StorageOptions) => Promise<void>;\n  getDecryptedCryptoSymmetricKey: (options?: StorageOptions) => Promise<SymmetricCryptoKey>;\n  setDecryptedCryptoSymmetricKey: (\n    value: SymmetricCryptoKey,\n    options?: StorageOptions\n  ) => Promise<void>;\n  getDecryptedOrganizationKeys: (\n    options?: StorageOptions\n  ) => Promise<Map<string, SymmetricCryptoKey>>;\n  setDecryptedOrganizationKeys: (\n    value: Map<string, SymmetricCryptoKey>,\n    options?: StorageOptions\n  ) => Promise<void>;\n  getDecryptedPasswordGenerationHistory: (\n    options?: StorageOptions\n  ) => Promise<GeneratedPasswordHistory[]>;\n  setDecryptedPasswordGenerationHistory: (\n    value: GeneratedPasswordHistory[],\n    options?: StorageOptions\n  ) => Promise<void>;\n  getDecryptedPinProtected: (options?: StorageOptions) => Promise<EncString>;\n  setDecryptedPinProtected: (value: EncString, options?: StorageOptions) => Promise<void>;\n  /**\n   * @deprecated Do not call this, use PolicyService\n   */\n  getDecryptedPolicies: (options?: StorageOptions) => Promise<Policy[]>;\n  /**\n   * @deprecated Do not call this, use PolicyService\n   */\n  setDecryptedPolicies: (value: Policy[], options?: StorageOptions) => Promise<void>;\n  getDecryptedPrivateKey: (options?: StorageOptions) => Promise<ArrayBuffer>;\n  setDecryptedPrivateKey: (value: ArrayBuffer, options?: StorageOptions) => Promise<void>;\n  getDecryptedProviderKeys: (options?: StorageOptions) => Promise<Map<string, SymmetricCryptoKey>>;\n  setDecryptedProviderKeys: (\n    value: Map<string, SymmetricCryptoKey>,\n    options?: StorageOptions\n  ) => Promise<void>;\n  getDecryptedSends: (options?: StorageOptions) => Promise<SendView[]>;\n  setDecryptedSends: (value: SendView[], options?: StorageOptions) => Promise<void>;\n  getDefaultUriMatch: (options?: StorageOptions) => Promise<UriMatchType>;\n  setDefaultUriMatch: (value: UriMatchType, options?: StorageOptions) => Promise<void>;\n  getDisableAddLoginNotification: (options?: StorageOptions) => Promise<boolean>;\n  setDisableAddLoginNotification: (value: boolean, options?: StorageOptions) => Promise<void>;\n  getDisableAutoBiometricsPrompt: (options?: StorageOptions) => Promise<boolean>;\n  setDisableAutoBiometricsPrompt: (value: boolean, options?: StorageOptions) => Promise<void>;\n  getDisableAutoTotpCopy: (options?: StorageOptions) => Promise<boolean>;\n  setDisableAutoTotpCopy: (value: boolean, options?: StorageOptions) => Promise<void>;\n  getDisableBadgeCounter: (options?: StorageOptions) => Promise<boolean>;\n  setDisableBadgeCounter: (value: boolean, options?: StorageOptions) => Promise<void>;\n  getDisableChangedPasswordNotification: (options?: StorageOptions) => Promise<boolean>;\n  setDisableChangedPasswordNotification: (\n    value: boolean,\n    options?: StorageOptions\n  ) => Promise<void>;\n  getDisableContextMenuItem: (options?: StorageOptions) => Promise<boolean>;\n  setDisableContextMenuItem: (value: boolean, options?: StorageOptions) => Promise<void>;\n  getDisableFavicon: (options?: StorageOptions) => Promise<boolean>;\n  setDisableFavicon: (value: boolean, options?: StorageOptions) => Promise<void>;\n  getDisableGa: (options?: StorageOptions) => Promise<boolean>;\n  setDisableGa: (value: boolean, options?: StorageOptions) => Promise<void>;\n  getDontShowCardsCurrentTab: (options?: StorageOptions) => Promise<boolean>;\n  setDontShowCardsCurrentTab: (value: boolean, options?: StorageOptions) => Promise<void>;\n  getDontShowIdentitiesCurrentTab: (options?: StorageOptions) => Promise<boolean>;\n  setDontShowIdentitiesCurrentTab: (value: boolean, options?: StorageOptions) => Promise<void>;\n  getDuckDuckGoSharedKey: (options?: StorageOptions) => Promise<string>;\n  setDuckDuckGoSharedKey: (value: string, options?: StorageOptions) => Promise<void>;\n  getEmail: (options?: StorageOptions) => Promise<string>;\n  setEmail: (value: string, options?: StorageOptions) => Promise<void>;\n  getEmailVerified: (options?: StorageOptions) => Promise<boolean>;\n  setEmailVerified: (value: boolean, options?: StorageOptions) => Promise<void>;\n  getEnableAlwaysOnTop: (options?: StorageOptions) => Promise<boolean>;\n  setEnableAlwaysOnTop: (value: boolean, options?: StorageOptions) => Promise<void>;\n  getEnableAutoFillOnPageLoad: (options?: StorageOptions) => Promise<boolean>;\n  setEnableAutoFillOnPageLoad: (value: boolean, options?: StorageOptions) => Promise<void>;\n  getEnableBiometric: (options?: StorageOptions) => Promise<boolean>;\n  setEnableBiometric: (value: boolean, options?: StorageOptions) => Promise<void>;\n  getEnableBrowserIntegration: (options?: StorageOptions) => Promise<boolean>;\n  setEnableBrowserIntegration: (value: boolean, options?: StorageOptions) => Promise<void>;\n  getEnableBrowserIntegrationFingerprint: (options?: StorageOptions) => Promise<boolean>;\n  setEnableBrowserIntegrationFingerprint: (\n    value: boolean,\n    options?: StorageOptions\n  ) => Promise<void>;\n  getEnableCloseToTray: (options?: StorageOptions) => Promise<boolean>;\n  setEnableCloseToTray: (value: boolean, options?: StorageOptions) => Promise<void>;\n  getEnableDuckDuckGoBrowserIntegration: (options?: StorageOptions) => Promise<boolean>;\n  setEnableDuckDuckGoBrowserIntegration: (\n    value: boolean,\n    options?: StorageOptions\n  ) => Promise<void>;\n  getEnableFullWidth: (options?: StorageOptions) => Promise<boolean>;\n  setEnableFullWidth: (value: boolean, options?: StorageOptions) => Promise<void>;\n  getEnableMinimizeToTray: (options?: StorageOptions) => Promise<boolean>;\n  setEnableMinimizeToTray: (value: boolean, options?: StorageOptions) => Promise<void>;\n  getEnableStartToTray: (options?: StorageOptions) => Promise<boolean>;\n  setEnableStartToTray: (value: boolean, options?: StorageOptions) => Promise<void>;\n  getEnableTray: (options?: StorageOptions) => Promise<boolean>;\n  setEnableTray: (value: boolean, options?: StorageOptions) => Promise<void>;\n  getEncryptedCiphers: (options?: StorageOptions) => Promise<{ [id: string]: CipherData }>;\n  setEncryptedCiphers: (\n    value: { [id: string]: CipherData },\n    options?: StorageOptions\n  ) => Promise<void>;\n  getEncryptedCollections: (options?: StorageOptions) => Promise<{ [id: string]: CollectionData }>;\n  setEncryptedCollections: (\n    value: { [id: string]: CollectionData },\n    options?: StorageOptions\n  ) => Promise<void>;\n  getEncryptedCryptoSymmetricKey: (options?: StorageOptions) => Promise<string>;\n  setEncryptedCryptoSymmetricKey: (value: string, options?: StorageOptions) => Promise<void>;\n  /**\n   * @deprecated Do not call this directly, use FolderService\n   */\n  getEncryptedFolders: (options?: StorageOptions) => Promise<{ [id: string]: FolderData }>;\n  /**\n   * @deprecated Do not call this directly, use FolderService\n   */\n  setEncryptedFolders: (\n    value: { [id: string]: FolderData },\n    options?: StorageOptions\n  ) => Promise<void>;\n  getEncryptedOrganizationKeys: (\n    options?: StorageOptions\n  ) => Promise<{ [orgId: string]: EncryptedOrganizationKeyData }>;\n  setEncryptedOrganizationKeys: (\n    value: { [orgId: string]: EncryptedOrganizationKeyData },\n    options?: StorageOptions\n  ) => Promise<void>;\n  getEncryptedPasswordGenerationHistory: (\n    options?: StorageOptions\n  ) => Promise<GeneratedPasswordHistory[]>;\n  setEncryptedPasswordGenerationHistory: (\n    value: GeneratedPasswordHistory[],\n    options?: StorageOptions\n  ) => Promise<void>;\n  getEncryptedPinProtected: (options?: StorageOptions) => Promise<string>;\n  setEncryptedPinProtected: (value: string, options?: StorageOptions) => Promise<void>;\n  /**\n   * @deprecated Do not call this directly, use PolicyService\n   */\n  getEncryptedPolicies: (options?: StorageOptions) => Promise<{ [id: string]: PolicyData }>;\n  /**\n   * @deprecated Do not call this directly, use PolicyService\n   */\n  setEncryptedPolicies: (\n    value: { [id: string]: PolicyData },\n    options?: StorageOptions\n  ) => Promise<void>;\n  getEncryptedPrivateKey: (options?: StorageOptions) => Promise<string>;\n  setEncryptedPrivateKey: (value: string, options?: StorageOptions) => Promise<void>;\n  getEncryptedProviderKeys: (options?: StorageOptions) => Promise<any>;\n  setEncryptedProviderKeys: (value: any, options?: StorageOptions) => Promise<void>;\n  getEncryptedSends: (options?: StorageOptions) => Promise<{ [id: string]: SendData }>;\n  setEncryptedSends: (value: { [id: string]: SendData }, options?: StorageOptions) => Promise<void>;\n  getEntityId: (options?: StorageOptions) => Promise<string>;\n  setEntityId: (value: string, options?: StorageOptions) => Promise<void>;\n  getEntityType: (options?: StorageOptions) => Promise<any>;\n  setEntityType: (value: string, options?: StorageOptions) => Promise<void>;\n  getEnvironmentUrls: (options?: StorageOptions) => Promise<EnvironmentUrls>;\n  setEnvironmentUrls: (value: EnvironmentUrls, options?: StorageOptions) => Promise<void>;\n  getEquivalentDomains: (options?: StorageOptions) => Promise<any>;\n  setEquivalentDomains: (value: string, options?: StorageOptions) => Promise<void>;\n  getEventCollection: (options?: StorageOptions) => Promise<EventData[]>;\n  setEventCollection: (value: EventData[], options?: StorageOptions) => Promise<void>;\n  getEverBeenUnlocked: (options?: StorageOptions) => Promise<boolean>;\n  setEverBeenUnlocked: (value: boolean, options?: StorageOptions) => Promise<void>;\n  getForcePasswordReset: (options?: StorageOptions) => Promise<boolean>;\n  setForcePasswordReset: (value: boolean, options?: StorageOptions) => Promise<void>;\n  getInstalledVersion: (options?: StorageOptions) => Promise<string>;\n  setInstalledVersion: (value: string, options?: StorageOptions) => Promise<void>;\n  getIsAuthenticated: (options?: StorageOptions) => Promise<boolean>;\n  getKdfConfig: (options?: StorageOptions) => Promise<KdfConfig>;\n  setKdfConfig: (kdfConfig: KdfConfig, options?: StorageOptions) => Promise<void>;\n  getKdfType: (options?: StorageOptions) => Promise<KdfType>;\n  setKdfType: (value: KdfType, options?: StorageOptions) => Promise<void>;\n  getKeyHash: (options?: StorageOptions) => Promise<string>;\n  setKeyHash: (value: string, options?: StorageOptions) => Promise<void>;\n  getLastActive: (options?: StorageOptions) => Promise<number>;\n  setLastActive: (value: number, options?: StorageOptions) => Promise<void>;\n  getLastSync: (options?: StorageOptions) => Promise<string>;\n  setLastSync: (value: string, options?: StorageOptions) => Promise<void>;\n  getLocalData: (options?: StorageOptions) => Promise<{ [cipherId: string]: LocalData }>;\n  setLocalData: (\n    value: { [cipherId: string]: LocalData },\n    options?: StorageOptions\n  ) => Promise<void>;\n  getLocale: (options?: StorageOptions) => Promise<string>;\n  setLocale: (value: string, options?: StorageOptions) => Promise<void>;\n  getMainWindowSize: (options?: StorageOptions) => Promise<number>;\n  setMainWindowSize: (value: number, options?: StorageOptions) => Promise<void>;\n  getMinimizeOnCopyToClipboard: (options?: StorageOptions) => Promise<boolean>;\n  setMinimizeOnCopyToClipboard: (value: boolean, options?: StorageOptions) => Promise<void>;\n  getNeverDomains: (options?: StorageOptions) => Promise<{ [id: string]: any }>;\n  setNeverDomains: (value: { [id: string]: any }, options?: StorageOptions) => Promise<void>;\n  getNoAutoPromptBiometrics: (options?: StorageOptions) => Promise<boolean>;\n  setNoAutoPromptBiometrics: (value: boolean, options?: StorageOptions) => Promise<void>;\n  getNoAutoPromptBiometricsText: (options?: StorageOptions) => Promise<string>;\n  setNoAutoPromptBiometricsText: (value: string, options?: StorageOptions) => Promise<void>;\n  getOpenAtLogin: (options?: StorageOptions) => Promise<boolean>;\n  setOpenAtLogin: (value: boolean, options?: StorageOptions) => Promise<void>;\n  getOrganizationInvitation: (options?: StorageOptions) => Promise<any>;\n  setOrganizationInvitation: (value: any, options?: StorageOptions) => Promise<void>;\n  /**\n   * @deprecated Do not call this directly, use OrganizationService\n   */\n  getOrganizations: (options?: StorageOptions) => Promise<{ [id: string]: OrganizationData }>;\n  /**\n   * @deprecated Do not call this directly, use OrganizationService\n   */\n  setOrganizations: (\n    value: { [id: string]: OrganizationData },\n    options?: StorageOptions\n  ) => Promise<void>;\n  getPasswordGenerationOptions: (options?: StorageOptions) => Promise<any>;\n  setPasswordGenerationOptions: (value: any, options?: StorageOptions) => Promise<void>;\n  getUsernameGenerationOptions: (options?: StorageOptions) => Promise<any>;\n  setUsernameGenerationOptions: (value: any, options?: StorageOptions) => Promise<void>;\n  getGeneratorOptions: (options?: StorageOptions) => Promise<any>;\n  setGeneratorOptions: (value: any, options?: StorageOptions) => Promise<void>;\n  getProtectedPin: (options?: StorageOptions) => Promise<string>;\n  setProtectedPin: (value: string, options?: StorageOptions) => Promise<void>;\n  getProviders: (options?: StorageOptions) => Promise<{ [id: string]: ProviderData }>;\n  setProviders: (value: { [id: string]: ProviderData }, options?: StorageOptions) => Promise<void>;\n  getPublicKey: (options?: StorageOptions) => Promise<ArrayBuffer>;\n  setPublicKey: (value: ArrayBuffer, options?: StorageOptions) => Promise<void>;\n  getRefreshToken: (options?: StorageOptions) => Promise<string>;\n  setRefreshToken: (value: string, options?: StorageOptions) => Promise<void>;\n  getRememberedEmail: (options?: StorageOptions) => Promise<string>;\n  setRememberedEmail: (value: string, options?: StorageOptions) => Promise<void>;\n  getSecurityStamp: (options?: StorageOptions) => Promise<string>;\n  setSecurityStamp: (value: string, options?: StorageOptions) => Promise<void>;\n  /**\n   * @deprecated Do not call this directly, use SettingsService\n   */\n  getSettings: (options?: StorageOptions) => Promise<AccountSettingsSettings>;\n  /**\n   * @deprecated Do not call this directly, use SettingsService\n   */\n  setSettings: (value: AccountSettingsSettings, options?: StorageOptions) => Promise<void>;\n  getSsoCodeVerifier: (options?: StorageOptions) => Promise<string>;\n  setSsoCodeVerifier: (value: string, options?: StorageOptions) => Promise<void>;\n  getSsoOrgIdentifier: (options?: StorageOptions) => Promise<string>;\n  setSsoOrganizationIdentifier: (value: string, options?: StorageOptions) => Promise<void>;\n  getSsoState: (options?: StorageOptions) => Promise<string>;\n  setSsoState: (value: string, options?: StorageOptions) => Promise<void>;\n  getTheme: (options?: StorageOptions) => Promise<ThemeType>;\n  setTheme: (value: ThemeType, options?: StorageOptions) => Promise<void>;\n  getTwoFactorToken: (options?: StorageOptions) => Promise<string>;\n  setTwoFactorToken: (value: string, options?: StorageOptions) => Promise<void>;\n  getUserId: (options?: StorageOptions) => Promise<string>;\n  getUsesKeyConnector: (options?: StorageOptions) => Promise<boolean>;\n  setUsesKeyConnector: (vaule: boolean, options?: StorageOptions) => Promise<void>;\n  getVaultTimeout: (options?: StorageOptions) => Promise<number>;\n  setVaultTimeout: (value: number, options?: StorageOptions) => Promise<void>;\n  getVaultTimeoutAction: (options?: StorageOptions) => Promise<string>;\n  setVaultTimeoutAction: (value: string, options?: StorageOptions) => Promise<void>;\n  getApproveLoginRequests: (options?: StorageOptions) => Promise<boolean>;\n  setApproveLoginRequests: (value: boolean, options?: StorageOptions) => Promise<void>;\n  getStateVersion: () => Promise<number>;\n  setStateVersion: (value: number) => Promise<void>;\n  getWindow: () => Promise<WindowState>;\n  setWindow: (value: WindowState) => Promise<void>;\n  /**\n   * @deprecated Do not call this directly, use ConfigService\n   */\n  getServerConfig: (options?: StorageOptions) => Promise<ServerConfigData>;\n  /**\n   * @deprecated Do not call this directly, use ConfigService\n   */\n  setServerConfig: (value: ServerConfigData, options?: StorageOptions) => Promise<void>;\n\n  getAvatarColor: (options?: StorageOptions) => Promise<string | null | undefined>;\n  setAvatarColor: (value: string, options?: StorageOptions) => Promise<void>;\n}\n","import { CollectionData } from \"../models/data/collection.data\";\nimport { Collection } from \"../models/domain/collection\";\nimport { TreeNode } from \"../models/domain/tree-node\";\nimport { CollectionView } from \"../models/view/collection.view\";\n\nexport abstract class CollectionService {\n  clearCache: (userId?: string) => Promise<void>;\n  encrypt: (model: CollectionView) => Promise<Collection>;\n  decryptMany: (collections: Collection[]) => Promise<CollectionView[]>;\n  get: (id: string) => Promise<Collection>;\n  getAll: () => Promise<Collection[]>;\n  getAllDecrypted: () => Promise<CollectionView[]>;\n  getAllNested: (collections?: CollectionView[]) => Promise<TreeNode<CollectionView>[]>;\n  getNested: (id: string) => Promise<TreeNode<CollectionView>>;\n  upsert: (collection: CollectionData | CollectionData[]) => Promise<any>;\n  replace: (collections: { [id: string]: CollectionData }) => Promise<any>;\n  clear: (userId: string) => Promise<any>;\n  delete: (id: string | string[]) => Promise<any>;\n}\n","import { EventType } from \"../../enums/eventType\";\n\nexport abstract class EventCollectionService {\n  collect: (\n    eventType: EventType,\n    cipherId?: string,\n    uploadImmediately?: boolean,\n    organizationId?: string\n  ) => Promise<any>;\n}\n","import { Observable } from \"rxjs\";\n\nimport { PolicyType } from \"../../enums/policyType\";\nimport { PolicyData } from \"../../models/data/policy.data\";\nimport { MasterPasswordPolicyOptions } from \"../../models/domain/master-password-policy-options\";\nimport { Policy } from \"../../models/domain/policy\";\nimport { ResetPasswordPolicyOptions } from \"../../models/domain/reset-password-policy-options\";\nimport { ListResponse } from \"../../models/response/list.response\";\nimport { PolicyResponse } from \"../../models/response/policy.response\";\n\nexport abstract class PolicyService {\n  policies$: Observable<Policy[]>;\n  masterPasswordPolicyOptions$: (policies?: Policy[]) => Observable<MasterPasswordPolicyOptions>;\n  policyAppliesToActiveUser$: (\n    policyType: PolicyType,\n    policyFilter?: (policy: Policy) => boolean\n  ) => Observable<boolean>;\n\n  /**\n   * @deprecated Do not call this, use the policies$ observable collection\n   */\n  getAll: (type?: PolicyType, userId?: string) => Promise<Policy[]>;\n  evaluateMasterPassword: (\n    passwordStrength: number,\n    newPassword: string,\n    enforcedPolicyOptions?: MasterPasswordPolicyOptions\n  ) => boolean;\n  getResetPasswordPolicyOptions: (\n    policies: Policy[],\n    orgId: string\n  ) => [ResetPasswordPolicyOptions, boolean];\n  mapPoliciesFromToken: (policiesResponse: ListResponse<PolicyResponse>) => Policy[];\n  policyAppliesToUser: (\n    policyType: PolicyType,\n    policyFilter?: (policy: Policy) => boolean,\n    userId?: string\n  ) => Promise<boolean>;\n}\n\nexport abstract class InternalPolicyService extends PolicyService {\n  upsert: (policy: PolicyData) => Promise<any>;\n  replace: (policies: { [id: string]: PolicyData }) => Promise<void>;\n  clear: (userId?: string) => Promise<any>;\n}\n","import { LogLevelType } from \"../enums/logLevelType\";\n\nexport abstract class LogService {\n  debug: (message: string) => void;\n  info: (message: string) => void;\n  warning: (message: string) => void;\n  error: (message: string) => void;\n  write: (level: LogLevelType, message: string) => void;\n}\n","export abstract class PasswordRepromptService {\n  protectedFields: () => string[];\n  showPasswordPrompt: () => Promise<boolean>;\n  enabled: () => Promise<boolean>;\n}\n","export enum ClientType {\n  Web = \"web\",\n  Browser = \"browser\",\n  Desktop = \"desktop\",\n  Mobile = \"mobile\",\n  Cli = \"cli\",\n  DirectoryConnector = \"connector\",\n}\n","export enum DeviceType {\n  Android = 0,\n  iOS = 1,\n  ChromeExtension = 2,\n  FirefoxExtension = 3,\n  OperaExtension = 4,\n  EdgeExtension = 5,\n  WindowsDesktop = 6,\n  MacOsDesktop = 7,\n  LinuxDesktop = 8,\n  ChromeBrowser = 9,\n  FirefoxBrowser = 10,\n  OperaBrowser = 11,\n  EdgeBrowser = 12,\n  IEBrowser = 13,\n  UnknownBrowser = 14,\n  AndroidAmazon = 15,\n  UWP = 16,\n  SafariBrowser = 17,\n  VivaldiBrowser = 18,\n  VivaldiExtension = 19,\n  SafariExtension = 20,\n}\n","import { Directive, EventEmitter, Input, OnDestroy, OnInit, Output } from \"@angular/core\";\nimport { Observable, Subject, takeUntil, concatMap } from \"rxjs\";\n\nimport { AuditService } from \"@bitwarden/common/abstractions/audit.service\";\nimport { CollectionService } from \"@bitwarden/common/abstractions/collection.service\";\nimport { EventCollectionService } from \"@bitwarden/common/abstractions/event/event-collection.service\";\nimport { I18nService } from \"@bitwarden/common/abstractions/i18n.service\";\nimport { LogService } from \"@bitwarden/common/abstractions/log.service\";\nimport { MessagingService } from \"@bitwarden/common/abstractions/messaging.service\";\nimport {\n  isNotProviderUser,\n  OrganizationService,\n} from \"@bitwarden/common/abstractions/organization/organization.service.abstraction\";\nimport { PlatformUtilsService } from \"@bitwarden/common/abstractions/platformUtils.service\";\nimport { PolicyService } from \"@bitwarden/common/abstractions/policy/policy.service.abstraction\";\nimport { StateService } from \"@bitwarden/common/abstractions/state.service\";\nimport { EventType } from \"@bitwarden/common/enums/eventType\";\nimport { OrganizationUserStatusType } from \"@bitwarden/common/enums/organizationUserStatusType\";\nimport { PolicyType } from \"@bitwarden/common/enums/policyType\";\nimport { SecureNoteType } from \"@bitwarden/common/enums/secureNoteType\";\nimport { UriMatchType } from \"@bitwarden/common/enums/uriMatchType\";\nimport { Utils } from \"@bitwarden/common/misc/utils\";\nimport { Organization } from \"@bitwarden/common/models/domain/organization\";\nimport { CollectionView } from \"@bitwarden/common/models/view/collection.view\";\nimport { CipherService } from \"@bitwarden/common/vault/abstractions/cipher.service\";\nimport { FolderService } from \"@bitwarden/common/vault/abstractions/folder/folder.service.abstraction\";\nimport { PasswordRepromptService } from \"@bitwarden/common/vault/abstractions/password-reprompt.service\";\nimport { CipherRepromptType } from \"@bitwarden/common/vault/enums/cipher-reprompt-type\";\nimport { CipherType } from \"@bitwarden/common/vault/enums/cipher-type\";\nimport { Cipher } from \"@bitwarden/common/vault/models/domain/cipher\";\nimport { CardView } from \"@bitwarden/common/vault/models/view/card.view\";\nimport { CipherView } from \"@bitwarden/common/vault/models/view/cipher.view\";\nimport { FolderView } from \"@bitwarden/common/vault/models/view/folder.view\";\nimport { IdentityView } from \"@bitwarden/common/vault/models/view/identity.view\";\nimport { LoginUriView } from \"@bitwarden/common/vault/models/view/login-uri.view\";\nimport { LoginView } from \"@bitwarden/common/vault/models/view/login.view\";\nimport { SecureNoteView } from \"@bitwarden/common/vault/models/view/secure-note.view\";\n\n@Directive()\nexport class AddEditComponent implements OnInit, OnDestroy {\n  @Input() cloneMode = false;\n  @Input() folderId: string = null;\n  @Input() cipherId: string;\n  @Input() type: CipherType;\n  @Input() collectionIds: string[];\n  @Input() organizationId: string = null;\n  @Output() onSavedCipher = new EventEmitter<CipherView>();\n  @Output() onDeletedCipher = new EventEmitter<CipherView>();\n  @Output() onRestoredCipher = new EventEmitter<CipherView>();\n  @Output() onCancelled = new EventEmitter<CipherView>();\n  @Output() onEditAttachments = new EventEmitter<CipherView>();\n  @Output() onShareCipher = new EventEmitter<CipherView>();\n  @Output() onEditCollections = new EventEmitter<CipherView>();\n  @Output() onGeneratePassword = new EventEmitter();\n  @Output() onGenerateUsername = new EventEmitter();\n\n  editMode = false;\n  cipher: CipherView;\n  folders$: Observable<FolderView[]>;\n  collections: CollectionView[] = [];\n  title: string;\n  formPromise: Promise<any>;\n  deletePromise: Promise<any>;\n  restorePromise: Promise<any>;\n  checkPasswordPromise: Promise<number>;\n  showPassword = false;\n  showCardNumber = false;\n  showCardCode = false;\n  cipherType = CipherType;\n  typeOptions: any[];\n  cardBrandOptions: any[];\n  cardExpMonthOptions: any[];\n  identityTitleOptions: any[];\n  uriMatchOptions: any[];\n  ownershipOptions: any[] = [];\n  autofillOnPageLoadOptions: any[];\n  currentDate = new Date();\n  allowPersonal = true;\n  reprompt = false;\n  canUseReprompt = true;\n  organization: Organization;\n\n  protected componentName = \"\";\n  protected destroy$ = new Subject<void>();\n  protected writeableCollections: CollectionView[];\n  private personalOwnershipPolicyAppliesToActiveUser: boolean;\n  private previousCipherId: string;\n\n  constructor(\n    protected cipherService: CipherService,\n    protected folderService: FolderService,\n    protected i18nService: I18nService,\n    protected platformUtilsService: PlatformUtilsService,\n    protected auditService: AuditService,\n    protected stateService: StateService,\n    protected collectionService: CollectionService,\n    protected messagingService: MessagingService,\n    protected eventCollectionService: EventCollectionService,\n    protected policyService: PolicyService,\n    private logService: LogService,\n    protected passwordRepromptService: PasswordRepromptService,\n    private organizationService: OrganizationService\n  ) {\n    this.typeOptions = [\n      { name: i18nService.t(\"typeLogin\"), value: CipherType.Login },\n      { name: i18nService.t(\"typeCard\"), value: CipherType.Card },\n      { name: i18nService.t(\"typeIdentity\"), value: CipherType.Identity },\n      { name: i18nService.t(\"typeSecureNote\"), value: CipherType.SecureNote },\n    ];\n    this.cardBrandOptions = [\n      { name: \"-- \" + i18nService.t(\"select\") + \" --\", value: null },\n      { name: \"Visa\", value: \"Visa\" },\n      { name: \"Mastercard\", value: \"Mastercard\" },\n      { name: \"American Express\", value: \"Amex\" },\n      { name: \"Discover\", value: \"Discover\" },\n      { name: \"Diners Club\", value: \"Diners Club\" },\n      { name: \"JCB\", value: \"JCB\" },\n      { name: \"Maestro\", value: \"Maestro\" },\n      { name: \"UnionPay\", value: \"UnionPay\" },\n      { name: \"RuPay\", value: \"RuPay\" },\n      { name: i18nService.t(\"cardBrandMir\"), value: \"Mir\" },\n      { name: i18nService.t(\"other\"), value: \"Other\" },\n    ];\n    this.cardExpMonthOptions = [\n      { name: \"-- \" + i18nService.t(\"select\") + \" --\", value: null },\n      { name: \"01 - \" + i18nService.t(\"january\"), value: \"1\" },\n      { name: \"02 - \" + i18nService.t(\"february\"), value: \"2\" },\n      { name: \"03 - \" + i18nService.t(\"march\"), value: \"3\" },\n      { name: \"04 - \" + i18nService.t(\"april\"), value: \"4\" },\n      { name: \"05 - \" + i18nService.t(\"may\"), value: \"5\" },\n      { name: \"06 - \" + i18nService.t(\"june\"), value: \"6\" },\n      { name: \"07 - \" + i18nService.t(\"july\"), value: \"7\" },\n      { name: \"08 - \" + i18nService.t(\"august\"), value: \"8\" },\n      { name: \"09 - \" + i18nService.t(\"september\"), value: \"9\" },\n      { name: \"10 - \" + i18nService.t(\"october\"), value: \"10\" },\n      { name: \"11 - \" + i18nService.t(\"november\"), value: \"11\" },\n      { name: \"12 - \" + i18nService.t(\"december\"), value: \"12\" },\n    ];\n    this.identityTitleOptions = [\n      { name: \"-- \" + i18nService.t(\"select\") + \" --\", value: null },\n      { name: i18nService.t(\"mr\"), value: i18nService.t(\"mr\") },\n      { name: i18nService.t(\"mrs\"), value: i18nService.t(\"mrs\") },\n      { name: i18nService.t(\"ms\"), value: i18nService.t(\"ms\") },\n      { name: i18nService.t(\"mx\"), value: i18nService.t(\"mx\") },\n      { name: i18nService.t(\"dr\"), value: i18nService.t(\"dr\") },\n    ];\n    this.uriMatchOptions = [\n      { name: i18nService.t(\"defaultMatchDetection\"), value: null },\n      { name: i18nService.t(\"baseDomain\"), value: UriMatchType.Domain },\n      { name: i18nService.t(\"host\"), value: UriMatchType.Host },\n      { name: i18nService.t(\"startsWith\"), value: UriMatchType.StartsWith },\n      { name: i18nService.t(\"regEx\"), value: UriMatchType.RegularExpression },\n      { name: i18nService.t(\"exact\"), value: UriMatchType.Exact },\n      { name: i18nService.t(\"never\"), value: UriMatchType.Never },\n    ];\n    this.autofillOnPageLoadOptions = [\n      { name: i18nService.t(\"autoFillOnPageLoadUseDefault\"), value: null },\n      { name: i18nService.t(\"autoFillOnPageLoadYes\"), value: true },\n      { name: i18nService.t(\"autoFillOnPageLoadNo\"), value: false },\n    ];\n  }\n\n  async ngOnInit() {\n    this.writeableCollections = await this.loadCollections();\n    this.canUseReprompt = await this.passwordRepromptService.enabled();\n\n    this.policyService\n      .policyAppliesToActiveUser$(PolicyType.PersonalOwnership)\n      .pipe(\n        concatMap(async (policyAppliesToActiveUser) => {\n          this.personalOwnershipPolicyAppliesToActiveUser = policyAppliesToActiveUser;\n          await this.init();\n        }),\n        takeUntil(this.destroy$)\n      )\n      .subscribe();\n  }\n\n  ngOnDestroy() {\n    this.destroy$.next();\n    this.destroy$.complete();\n  }\n\n  async init() {\n    if (this.ownershipOptions.length) {\n      this.ownershipOptions = [];\n    }\n    if (this.personalOwnershipPolicyAppliesToActiveUser) {\n      this.allowPersonal = false;\n    } else {\n      const myEmail = await this.stateService.getEmail();\n      this.ownershipOptions.push({ name: myEmail, value: null });\n    }\n\n    const orgs = await this.organizationService.getAll();\n    orgs\n      .filter(isNotProviderUser)\n      .sort(Utils.getSortFunction(this.i18nService, \"name\"))\n      .forEach((o) => {\n        if (o.enabled && o.status === OrganizationUserStatusType.Confirmed) {\n          this.ownershipOptions.push({ name: o.name, value: o.id });\n        }\n      });\n    if (!this.allowPersonal) {\n      this.organizationId = this.ownershipOptions[0].value;\n    }\n  }\n\n  async load() {\n    this.editMode = this.cipherId != null;\n    if (this.editMode) {\n      this.editMode = true;\n      if (this.cloneMode) {\n        this.cloneMode = true;\n        this.title = this.i18nService.t(\"addItem\");\n      } else {\n        this.title = this.i18nService.t(\"editItem\");\n      }\n    } else {\n      this.title = this.i18nService.t(\"addItem\");\n    }\n\n    const addEditCipherInfo: any = await this.stateService.getAddEditCipherInfo();\n    if (addEditCipherInfo != null) {\n      this.cipher = addEditCipherInfo.cipher;\n      this.collectionIds = addEditCipherInfo.collectionIds;\n    }\n    await this.stateService.setAddEditCipherInfo(null);\n\n    if (this.cipher == null) {\n      if (this.editMode) {\n        const cipher = await this.loadCipher();\n        this.cipher = await cipher.decrypt();\n\n        // Adjust Cipher Name if Cloning\n        if (this.cloneMode) {\n          this.cipher.name += \" - \" + this.i18nService.t(\"clone\");\n          // If not allowing personal ownership, update cipher's org Id to prompt downstream changes\n          if (this.cipher.organizationId == null && !this.allowPersonal) {\n            this.cipher.organizationId = this.organizationId;\n          }\n        }\n      } else {\n        this.cipher = new CipherView();\n        this.cipher.organizationId = this.organizationId == null ? null : this.organizationId;\n        this.cipher.folderId = this.folderId;\n        this.cipher.type = this.type == null ? CipherType.Login : this.type;\n        this.cipher.login = new LoginView();\n        this.cipher.login.uris = [new LoginUriView()];\n        this.cipher.card = new CardView();\n        this.cipher.identity = new IdentityView();\n        this.cipher.secureNote = new SecureNoteView();\n        this.cipher.secureNote.type = SecureNoteType.Generic;\n        this.cipher.reprompt = CipherRepromptType.None;\n      }\n    }\n\n    if (this.cipher != null && (!this.editMode || addEditCipherInfo != null || this.cloneMode)) {\n      await this.organizationChanged();\n      if (\n        this.collectionIds != null &&\n        this.collectionIds.length > 0 &&\n        this.collections.length > 0\n      ) {\n        this.collections.forEach((c) => {\n          if (this.collectionIds.indexOf(c.id) > -1) {\n            (c as any).checked = true;\n          }\n        });\n      }\n    }\n\n    this.folders$ = this.folderService.folderViews$;\n\n    if (this.editMode && this.previousCipherId !== this.cipherId) {\n      this.eventCollectionService.collect(EventType.Cipher_ClientViewed, this.cipherId);\n    }\n    this.previousCipherId = this.cipherId;\n    this.reprompt = this.cipher.reprompt !== CipherRepromptType.None;\n  }\n\n  async submit(): Promise<boolean> {\n    if (this.cipher.isDeleted) {\n      return this.restore();\n    }\n\n    if (this.cipher.name == null || this.cipher.name === \"\") {\n      this.platformUtilsService.showToast(\n        \"error\",\n        this.i18nService.t(\"errorOccurred\"),\n        this.i18nService.t(\"nameRequired\")\n      );\n      return false;\n    }\n\n    if (\n      (!this.editMode || this.cloneMode) &&\n      !this.allowPersonal &&\n      this.cipher.organizationId == null\n    ) {\n      this.platformUtilsService.showToast(\n        \"error\",\n        this.i18nService.t(\"errorOccurred\"),\n        this.i18nService.t(\"personalOwnershipSubmitError\")\n      );\n      return false;\n    }\n\n    if (\n      (!this.editMode || this.cloneMode) &&\n      this.cipher.type === CipherType.Login &&\n      this.cipher.login.uris != null &&\n      this.cipher.login.uris.length === 1 &&\n      (this.cipher.login.uris[0].uri == null || this.cipher.login.uris[0].uri === \"\")\n    ) {\n      this.cipher.login.uris = null;\n    }\n\n    // Allows saving of selected collections during \"Add\" and \"Clone\" flows\n    if ((!this.editMode || this.cloneMode) && this.cipher.organizationId != null) {\n      this.cipher.collectionIds =\n        this.collections == null\n          ? []\n          : this.collections.filter((c) => (c as any).checked).map((c) => c.id);\n    }\n\n    // Clear current Cipher Id to trigger \"Add\" cipher flow\n    if (this.cloneMode) {\n      this.cipher.id = null;\n    }\n\n    const cipher = await this.encryptCipher();\n    try {\n      this.formPromise = this.saveCipher(cipher);\n      await this.formPromise;\n      this.cipher.id = cipher.id;\n      this.platformUtilsService.showToast(\n        \"success\",\n        null,\n        this.i18nService.t(this.editMode && !this.cloneMode ? \"editedItem\" : \"addedItem\")\n      );\n      this.onSavedCipher.emit(this.cipher);\n      this.messagingService.send(this.editMode && !this.cloneMode ? \"editedCipher\" : \"addedCipher\");\n      return true;\n    } catch (e) {\n      this.logService.error(e);\n    }\n\n    return false;\n  }\n\n  addUri() {\n    if (this.cipher.type !== CipherType.Login) {\n      return;\n    }\n\n    if (this.cipher.login.uris == null) {\n      this.cipher.login.uris = [];\n    }\n\n    this.cipher.login.uris.push(new LoginUriView());\n  }\n\n  removeUri(uri: LoginUriView) {\n    if (this.cipher.type !== CipherType.Login || this.cipher.login.uris == null) {\n      return;\n    }\n\n    const i = this.cipher.login.uris.indexOf(uri);\n    if (i > -1) {\n      this.cipher.login.uris.splice(i, 1);\n    }\n  }\n\n  getCardExpMonthDisplay() {\n    return this.cardExpMonthOptions.find((x) => x.value == this.cipher.card.expMonth)?.name;\n  }\n\n  trackByFunction(index: number, item: any) {\n    return index;\n  }\n\n  cancel() {\n    this.onCancelled.emit(this.cipher);\n  }\n\n  attachments() {\n    this.onEditAttachments.emit(this.cipher);\n  }\n\n  share() {\n    this.onShareCipher.emit(this.cipher);\n  }\n\n  editCollections() {\n    this.onEditCollections.emit(this.cipher);\n  }\n\n  async delete(): Promise<boolean> {\n    const confirmed = await this.platformUtilsService.showDialog(\n      this.i18nService.t(\n        this.cipher.isDeleted ? \"permanentlyDeleteItemConfirmation\" : \"deleteItemConfirmation\"\n      ),\n      this.i18nService.t(\"deleteItem\"),\n      this.i18nService.t(\"yes\"),\n      this.i18nService.t(\"no\"),\n      \"warning\",\n      false,\n      this.componentName != \"\" ? this.componentName + \" .modal-content\" : null\n    );\n    if (!confirmed) {\n      return false;\n    }\n\n    try {\n      this.deletePromise = this.deleteCipher();\n      await this.deletePromise;\n      this.platformUtilsService.showToast(\n        \"success\",\n        null,\n        this.i18nService.t(this.cipher.isDeleted ? \"permanentlyDeletedItem\" : \"deletedItem\")\n      );\n      this.onDeletedCipher.emit(this.cipher);\n      this.messagingService.send(\n        this.cipher.isDeleted ? \"permanentlyDeletedCipher\" : \"deletedCipher\"\n      );\n    } catch (e) {\n      this.logService.error(e);\n    }\n\n    return true;\n  }\n\n  async restore(): Promise<boolean> {\n    if (!this.cipher.isDeleted) {\n      return false;\n    }\n\n    const confirmed = await this.platformUtilsService.showDialog(\n      this.i18nService.t(\"restoreItemConfirmation\"),\n      this.i18nService.t(\"restoreItem\"),\n      this.i18nService.t(\"yes\"),\n      this.i18nService.t(\"no\"),\n      \"warning\"\n    );\n    if (!confirmed) {\n      return false;\n    }\n\n    try {\n      this.restorePromise = this.restoreCipher();\n      await this.restorePromise;\n      this.platformUtilsService.showToast(\"success\", null, this.i18nService.t(\"restoredItem\"));\n      this.onRestoredCipher.emit(this.cipher);\n      this.messagingService.send(\"restoredCipher\");\n    } catch (e) {\n      this.logService.error(e);\n    }\n\n    return true;\n  }\n\n  async generateUsername(): Promise<boolean> {\n    if (this.cipher.login?.username?.length) {\n      const confirmed = await this.platformUtilsService.showDialog(\n        this.i18nService.t(\"overwriteUsernameConfirmation\"),\n        this.i18nService.t(\"overwriteUsername\"),\n        this.i18nService.t(\"yes\"),\n        this.i18nService.t(\"no\")\n      );\n      if (!confirmed) {\n        return false;\n      }\n    }\n\n    this.onGenerateUsername.emit();\n    return true;\n  }\n\n  async generatePassword(): Promise<boolean> {\n    if (this.cipher.login?.password?.length) {\n      const confirmed = await this.platformUtilsService.showDialog(\n        this.i18nService.t(\"overwritePasswordConfirmation\"),\n        this.i18nService.t(\"overwritePassword\"),\n        this.i18nService.t(\"yes\"),\n        this.i18nService.t(\"no\")\n      );\n      if (!confirmed) {\n        return false;\n      }\n    }\n\n    this.onGeneratePassword.emit();\n    return true;\n  }\n\n  togglePassword() {\n    this.showPassword = !this.showPassword;\n    document.getElementById(\"loginPassword\").focus();\n    if (this.editMode && this.showPassword) {\n      this.eventCollectionService.collect(\n        EventType.Cipher_ClientToggledPasswordVisible,\n        this.cipherId\n      );\n    }\n  }\n\n  async toggleCardNumber() {\n    this.showCardNumber = !this.showCardNumber;\n    if (this.showCardNumber) {\n      this.eventCollectionService.collect(\n        EventType.Cipher_ClientToggledCardNumberVisible,\n        this.cipherId\n      );\n    }\n  }\n\n  toggleCardCode() {\n    this.showCardCode = !this.showCardCode;\n    document.getElementById(\"cardCode\").focus();\n    if (this.editMode && this.showCardCode) {\n      this.eventCollectionService.collect(\n        EventType.Cipher_ClientToggledCardCodeVisible,\n        this.cipherId\n      );\n    }\n  }\n\n  toggleUriOptions(uri: LoginUriView) {\n    const u = uri as any;\n    u.showOptions = u.showOptions == null && uri.match != null ? false : !u.showOptions;\n  }\n\n  loginUriMatchChanged(uri: LoginUriView) {\n    const u = uri as any;\n    u.showOptions = u.showOptions == null ? true : u.showOptions;\n  }\n\n  async organizationChanged() {\n    if (this.writeableCollections != null) {\n      this.writeableCollections.forEach((c) => ((c as any).checked = false));\n    }\n    if (this.cipher.organizationId != null) {\n      this.collections = this.writeableCollections.filter(\n        (c) => c.organizationId === this.cipher.organizationId\n      );\n      const org = await this.organizationService.get(this.cipher.organizationId);\n      if (org != null) {\n        this.cipher.organizationUseTotp = org.useTotp;\n      }\n    } else {\n      this.collections = [];\n    }\n  }\n\n  async checkPassword() {\n    if (this.checkPasswordPromise != null) {\n      return;\n    }\n\n    if (\n      this.cipher.login == null ||\n      this.cipher.login.password == null ||\n      this.cipher.login.password === \"\"\n    ) {\n      return;\n    }\n\n    this.checkPasswordPromise = this.auditService.passwordLeaked(this.cipher.login.password);\n    const matches = await this.checkPasswordPromise;\n    this.checkPasswordPromise = null;\n\n    if (matches > 0) {\n      this.platformUtilsService.showToast(\n        \"warning\",\n        null,\n        this.i18nService.t(\"passwordExposed\", matches.toString())\n      );\n    } else {\n      this.platformUtilsService.showToast(\"success\", null, this.i18nService.t(\"passwordSafe\"));\n    }\n  }\n\n  repromptChanged() {\n    this.reprompt = !this.reprompt;\n    if (this.reprompt) {\n      this.cipher.reprompt = CipherRepromptType.Password;\n    } else {\n      this.cipher.reprompt = CipherRepromptType.None;\n    }\n  }\n\n  protected async loadCollections() {\n    const allCollections = await this.collectionService.getAllDecrypted();\n    return allCollections.filter((c) => !c.readOnly);\n  }\n\n  protected loadCipher() {\n    return this.cipherService.get(this.cipherId);\n  }\n\n  protected encryptCipher() {\n    return this.cipherService.encrypt(this.cipher);\n  }\n\n  protected saveCipher(cipher: Cipher) {\n    return this.cipher.id == null\n      ? this.cipherService.createWithServer(cipher)\n      : this.cipherService.updateWithServer(cipher);\n  }\n\n  protected deleteCipher() {\n    return this.cipher.isDeleted\n      ? this.cipherService.deleteWithServer(this.cipher.id)\n      : this.cipherService.softDeleteWithServer(this.cipher.id);\n  }\n\n  protected restoreCipher() {\n    return this.cipherService.restoreWithServer(this.cipher.id);\n  }\n}\n","import { BrowserApi } from \"./browserApi\";\n\nexport class SafariApp {\n  static sendMessageToApp(command: string, data: any = null, resolveNow = false): Promise<any> {\n    if (!BrowserApi.isSafariApi) {\n      return Promise.resolve(null);\n    }\n    return new Promise((resolve) => {\n      const now = new Date();\n      const messageId =\n        now.getTime().toString() + \"_\" + Math.floor(Math.random() * Number.MAX_SAFE_INTEGER);\n      (browser as any).runtime.sendNativeMessage(\n        \"com.bitwarden.desktop\",\n        {\n          id: messageId,\n          command: command,\n          data: data,\n          responseData: null,\n        },\n        (response: any) => {\n          resolve(response);\n        }\n      );\n    });\n  }\n}\n","import { MessagingService } from \"@bitwarden/common/abstractions/messaging.service\";\nimport { PlatformUtilsService } from \"@bitwarden/common/abstractions/platformUtils.service\";\nimport { ClientType } from \"@bitwarden/common/enums/clientType\";\nimport { DeviceType } from \"@bitwarden/common/enums/deviceType\";\n\nimport { BrowserApi } from \"../browser/browserApi\";\nimport { SafariApp } from \"../browser/safariApp\";\n\nconst DialogPromiseExpiration = 600000; // 10 minutes\n\nexport default class BrowserPlatformUtilsService implements PlatformUtilsService {\n  private showDialogResolves = new Map<number, { resolve: (value: boolean) => void; date: Date }>();\n  private passwordDialogResolves = new Map<\n    number,\n    { tryResolve: (canceled: boolean, password: string) => Promise<boolean>; date: Date }\n  >();\n  private deviceCache: DeviceType = null;\n\n  constructor(\n    private messagingService: MessagingService,\n    private clipboardWriteCallback: (clipboardValue: string, clearMs: number) => void,\n    private biometricCallback: () => Promise<boolean>,\n    private win: Window & typeof globalThis\n  ) {}\n\n  getDevice(): DeviceType {\n    if (this.deviceCache) {\n      return this.deviceCache;\n    }\n\n    if (BrowserPlatformUtilsService.isFirefox()) {\n      this.deviceCache = DeviceType.FirefoxExtension;\n    } else if (BrowserPlatformUtilsService.isOpera(this.win)) {\n      this.deviceCache = DeviceType.OperaExtension;\n    } else if (BrowserPlatformUtilsService.isEdge()) {\n      this.deviceCache = DeviceType.EdgeExtension;\n    } else if (BrowserPlatformUtilsService.isVivaldi()) {\n      this.deviceCache = DeviceType.VivaldiExtension;\n    } else if (BrowserPlatformUtilsService.isChrome(this.win)) {\n      this.deviceCache = DeviceType.ChromeExtension;\n    } else if (BrowserPlatformUtilsService.isSafari(this.win)) {\n      this.deviceCache = DeviceType.SafariExtension;\n    }\n\n    return this.deviceCache;\n  }\n\n  getDeviceString(): string {\n    const device = DeviceType[this.getDevice()].toLowerCase();\n    return device.replace(\"extension\", \"\");\n  }\n\n  getClientType(): ClientType {\n    return ClientType.Browser;\n  }\n\n  static isFirefox(): boolean {\n    return (\n      navigator.userAgent.indexOf(\" Firefox/\") !== -1 ||\n      navigator.userAgent.indexOf(\" Gecko/\") !== -1\n    );\n  }\n\n  isFirefox(): boolean {\n    return this.getDevice() === DeviceType.FirefoxExtension;\n  }\n\n  static isChrome(win: Window & typeof globalThis): boolean {\n    return win.chrome && navigator.userAgent.indexOf(\" Chrome/\") !== -1;\n  }\n\n  isChrome(): boolean {\n    return this.getDevice() === DeviceType.ChromeExtension;\n  }\n\n  static isEdge(): boolean {\n    return navigator.userAgent.indexOf(\" Edg/\") !== -1;\n  }\n\n  isEdge(): boolean {\n    return this.getDevice() === DeviceType.EdgeExtension;\n  }\n\n  static isOpera(win: Window & typeof globalThis): boolean {\n    return (\n      (!!win.opr && !!win.opr.addons) || !!win.opera || navigator.userAgent.indexOf(\" OPR/\") >= 0\n    );\n  }\n\n  isOpera(): boolean {\n    return this.getDevice() === DeviceType.OperaExtension;\n  }\n\n  static isVivaldi(): boolean {\n    return navigator.userAgent.indexOf(\" Vivaldi/\") !== -1;\n  }\n\n  isVivaldi(): boolean {\n    return this.getDevice() === DeviceType.VivaldiExtension;\n  }\n\n  static isSafari(win: Window & typeof globalThis): boolean {\n    // Opera masquerades as Safari, so make sure we're not there first\n    return (\n      !BrowserPlatformUtilsService.isOpera(win) && navigator.userAgent.indexOf(\" Safari/\") !== -1\n    );\n  }\n\n  isSafari(): boolean {\n    return this.getDevice() === DeviceType.SafariExtension;\n  }\n\n  isIE(): boolean {\n    return false;\n  }\n\n  isMacAppStore(): boolean {\n    return false;\n  }\n\n  async isViewOpen(): Promise<boolean> {\n    if (await BrowserApi.isPopupOpen()) {\n      return true;\n    }\n\n    if (this.isSafari()) {\n      return false;\n    }\n\n    const sidebarView = this.sidebarViewName();\n    const sidebarOpen =\n      sidebarView != null && chrome.extension.getViews({ type: sidebarView }).length > 0;\n    if (sidebarOpen) {\n      return true;\n    }\n\n    const tabOpen = chrome.extension.getViews({ type: \"tab\" }).length > 0;\n    return tabOpen;\n  }\n\n  lockTimeout(): number {\n    return null;\n  }\n\n  launchUri(uri: string, options?: any): void {\n    BrowserApi.createNewTab(uri, options && options.extensionPage === true);\n  }\n\n  getApplicationVersion(): Promise<string> {\n    return Promise.resolve(BrowserApi.getApplicationVersion());\n  }\n\n  async getApplicationVersionNumber(): Promise<string> {\n    return (await this.getApplicationVersion()).split(RegExp(\"[+|-]\"))[0].trim();\n  }\n\n  supportsWebAuthn(win: Window): boolean {\n    return typeof PublicKeyCredential !== \"undefined\";\n  }\n\n  supportsDuo(): boolean {\n    return true;\n  }\n\n  showToast(\n    type: \"error\" | \"success\" | \"warning\" | \"info\",\n    title: string,\n    text: string | string[],\n    options?: any\n  ): void {\n    this.messagingService.send(\"showToast\", {\n      text: text,\n      title: title,\n      type: type,\n      options: options,\n    });\n  }\n\n  showDialog(\n    body: string,\n    title?: string,\n    confirmText?: string,\n    cancelText?: string,\n    type?: string,\n    bodyIsHtml = false\n  ) {\n    const dialogId = Math.floor(Math.random() * Number.MAX_SAFE_INTEGER);\n    this.messagingService.send(\"showDialog\", {\n      text: bodyIsHtml ? null : body,\n      html: bodyIsHtml ? body : null,\n      title: title,\n      confirmText: confirmText,\n      cancelText: cancelText,\n      type: type,\n      dialogId: dialogId,\n    });\n    return new Promise<boolean>((resolve) => {\n      this.showDialogResolves.set(dialogId, { resolve: resolve, date: new Date() });\n    });\n  }\n\n  isDev(): boolean {\n    return process.env.ENV === \"development\";\n  }\n\n  isSelfHost(): boolean {\n    return false;\n  }\n\n  copyToClipboard(text: string, options?: any): void {\n    let win = this.win;\n    let doc = this.win.document;\n    if (options && (options.window || options.win)) {\n      win = options.window || options.win;\n      doc = win.document;\n    } else if (options && options.doc) {\n      doc = options.doc;\n    }\n    const clearing = options ? !!options.clearing : false;\n    const clearMs: number = options && options.clearMs ? options.clearMs : null;\n\n    if (this.isSafari()) {\n      SafariApp.sendMessageToApp(\"copyToClipboard\", text).then(() => {\n        if (!clearing && this.clipboardWriteCallback != null) {\n          this.clipboardWriteCallback(text, clearMs);\n        }\n      });\n    } else if (\n      this.isFirefox() &&\n      (win as any).navigator.clipboard &&\n      (win as any).navigator.clipboard.writeText\n    ) {\n      (win as any).navigator.clipboard.writeText(text).then(() => {\n        if (!clearing && this.clipboardWriteCallback != null) {\n          this.clipboardWriteCallback(text, clearMs);\n        }\n      });\n    } else if ((win as any).clipboardData && (win as any).clipboardData.setData) {\n      // IE specific code path to prevent textarea being shown while dialog is visible.\n      (win as any).clipboardData.setData(\"Text\", text);\n      if (!clearing && this.clipboardWriteCallback != null) {\n        this.clipboardWriteCallback(text, clearMs);\n      }\n    } else if (doc.queryCommandSupported && doc.queryCommandSupported(\"copy\")) {\n      if (this.isChrome() && text === \"\") {\n        text = \"\\u0000\";\n      }\n\n      const textarea = doc.createElement(\"textarea\");\n      textarea.textContent = text == null || text === \"\" ? \" \" : text;\n      // Prevent scrolling to bottom of page in MS Edge.\n      textarea.style.position = \"fixed\";\n      doc.body.appendChild(textarea);\n      textarea.select();\n\n      try {\n        // Security exception may be thrown by some browsers.\n        if (doc.execCommand(\"copy\") && !clearing && this.clipboardWriteCallback != null) {\n          this.clipboardWriteCallback(text, clearMs);\n        }\n      } catch (e) {\n        // eslint-disable-next-line\n        console.warn(\"Copy to clipboard failed.\", e);\n      } finally {\n        doc.body.removeChild(textarea);\n      }\n    }\n  }\n\n  async readFromClipboard(options?: any): Promise<string> {\n    let win = this.win;\n    let doc = this.win.document;\n    if (options && (options.window || options.win)) {\n      win = options.window || options.win;\n      doc = win.document;\n    } else if (options && options.doc) {\n      doc = options.doc;\n    }\n\n    if (this.isSafari()) {\n      return await SafariApp.sendMessageToApp(\"readFromClipboard\");\n    } else if (\n      this.isFirefox() &&\n      (win as any).navigator.clipboard &&\n      (win as any).navigator.clipboard.readText\n    ) {\n      return await (win as any).navigator.clipboard.readText();\n    } else if (doc.queryCommandSupported && doc.queryCommandSupported(\"paste\")) {\n      const textarea = doc.createElement(\"textarea\");\n      // Prevent scrolling to bottom of page in MS Edge.\n      textarea.style.position = \"fixed\";\n      doc.body.appendChild(textarea);\n      textarea.focus();\n      try {\n        // Security exception may be thrown by some browsers.\n        if (doc.execCommand(\"paste\")) {\n          return textarea.value;\n        }\n      } catch (e) {\n        // eslint-disable-next-line\n        console.warn(\"Read from clipboard failed.\", e);\n      } finally {\n        doc.body.removeChild(textarea);\n      }\n    }\n    return null;\n  }\n\n  resolveDialogPromise(dialogId: number, confirmed: boolean) {\n    if (this.showDialogResolves.has(dialogId)) {\n      const resolveObj = this.showDialogResolves.get(dialogId);\n      resolveObj.resolve(confirmed);\n      this.showDialogResolves.delete(dialogId);\n    }\n\n    // Clean up old promises\n    this.showDialogResolves.forEach((val, key) => {\n      const age = new Date().getTime() - val.date.getTime();\n      if (age > DialogPromiseExpiration) {\n        this.showDialogResolves.delete(key);\n      }\n    });\n  }\n\n  async resolvePasswordDialogPromise(\n    dialogId: number,\n    canceled: boolean,\n    password: string\n  ): Promise<boolean> {\n    let result = false;\n    if (this.passwordDialogResolves.has(dialogId)) {\n      const resolveObj = this.passwordDialogResolves.get(dialogId);\n      if (await resolveObj.tryResolve(canceled, password)) {\n        this.passwordDialogResolves.delete(dialogId);\n        result = true;\n      }\n    }\n\n    // Clean up old promises\n    this.passwordDialogResolves.forEach((val, key) => {\n      const age = new Date().getTime() - val.date.getTime();\n      if (age > DialogPromiseExpiration) {\n        this.passwordDialogResolves.delete(key);\n      }\n    });\n\n    return result;\n  }\n\n  async supportsBiometric() {\n    const platformInfo = await BrowserApi.getPlatformInfo();\n    if (platformInfo.os === \"android\") {\n      return false;\n    }\n\n    if (this.isFirefox()) {\n      return parseInt((await browser.runtime.getBrowserInfo()).version.split(\".\")[0], 10) >= 87;\n    }\n\n    return true;\n  }\n\n  authenticateBiometric() {\n    return this.biometricCallback();\n  }\n\n  sidebarViewName(): string {\n    if (this.win.chrome.sidebarAction && this.isFirefox()) {\n      return \"sidebar\";\n    } else if (this.isOpera() && typeof opr !== \"undefined\" && opr.sidebarAction) {\n      return \"sidebar_panel\";\n    }\n\n    return null;\n  }\n\n  supportsSecureStorage(): boolean {\n    return false;\n  }\n}\n","import BrowserPlatformUtilsService from \"../services/browserPlatformUtils.service\";\nimport { TabMessage } from \"../types/tab-messages\";\n\nexport class BrowserApi {\n  static isWebExtensionsApi: boolean = typeof browser !== \"undefined\";\n  static isSafariApi: boolean =\n    navigator.userAgent.indexOf(\" Safari/\") !== -1 &&\n    navigator.userAgent.indexOf(\" Chrome/\") === -1 &&\n    navigator.userAgent.indexOf(\" Chromium/\") === -1;\n  static isChromeApi: boolean = !BrowserApi.isSafariApi && typeof chrome !== \"undefined\";\n  static isFirefoxOnAndroid: boolean =\n    navigator.userAgent.indexOf(\"Firefox/\") !== -1 && navigator.userAgent.indexOf(\"Android\") !== -1;\n\n  static get manifestVersion() {\n    return chrome.runtime.getManifest().manifest_version;\n  }\n\n  static async getTabFromCurrentWindowId(): Promise<chrome.tabs.Tab> | null {\n    return await BrowserApi.tabsQueryFirst({\n      active: true,\n      windowId: chrome.windows.WINDOW_ID_CURRENT,\n    });\n  }\n\n  static async getTab(tabId: number) {\n    if (tabId == null) {\n      return null;\n    }\n    return await chrome.tabs.get(tabId);\n  }\n\n  static async getTabFromCurrentWindow(): Promise<chrome.tabs.Tab> | null {\n    return await BrowserApi.tabsQueryFirst({\n      active: true,\n      currentWindow: true,\n    });\n  }\n\n  static async getActiveTabs(): Promise<chrome.tabs.Tab[]> {\n    return await BrowserApi.tabsQuery({\n      active: true,\n    });\n  }\n\n  static async tabsQuery(options: chrome.tabs.QueryInfo): Promise<chrome.tabs.Tab[]> {\n    return new Promise((resolve) => {\n      chrome.tabs.query(options, (tabs) => {\n        resolve(tabs);\n      });\n    });\n  }\n\n  static async tabsQueryFirst(options: chrome.tabs.QueryInfo): Promise<chrome.tabs.Tab> | null {\n    const tabs = await BrowserApi.tabsQuery(options);\n    if (tabs.length > 0) {\n      return tabs[0];\n    }\n\n    return null;\n  }\n\n  static tabSendMessageData(\n    tab: chrome.tabs.Tab,\n    command: string,\n    data: any = null\n  ): Promise<void> {\n    const obj: any = {\n      command: command,\n    };\n\n    if (data != null) {\n      obj.data = data;\n    }\n\n    return BrowserApi.tabSendMessage(tab, obj);\n  }\n\n  static async tabSendMessage<T>(\n    tab: chrome.tabs.Tab,\n    obj: T,\n    options: chrome.tabs.MessageSendOptions = null\n  ): Promise<void> {\n    if (!tab || !tab.id) {\n      return;\n    }\n\n    return new Promise<void>((resolve) => {\n      chrome.tabs.sendMessage(tab.id, obj, options, () => {\n        if (chrome.runtime.lastError) {\n          // Some error happened\n        }\n        resolve();\n      });\n    });\n  }\n\n  static sendTabsMessage<T>(\n    tabId: number,\n    message: TabMessage,\n    options?: chrome.tabs.MessageSendOptions,\n    responseCallback?: (response: T) => void\n  ) {\n    chrome.tabs.sendMessage<TabMessage, T>(tabId, message, options, responseCallback);\n  }\n\n  static async getPrivateModeWindows(): Promise<browser.windows.Window[]> {\n    return (await browser.windows.getAll()).filter((win) => win.incognito);\n  }\n\n  static async onWindowCreated(callback: (win: chrome.windows.Window) => any) {\n    return chrome.windows.onCreated.addListener(callback);\n  }\n\n  static getBackgroundPage(): any {\n    return chrome.extension.getBackgroundPage();\n  }\n\n  static getApplicationVersion(): string {\n    return chrome.runtime.getManifest().version;\n  }\n\n  static async isPopupOpen(): Promise<boolean> {\n    return Promise.resolve(chrome.extension.getViews({ type: \"popup\" }).length > 0);\n  }\n\n  static createNewTab(url: string, extensionPage = false, active = true) {\n    chrome.tabs.create({ url: url, active: active });\n  }\n\n  static messageListener(\n    name: string,\n    callback: (message: any, sender: chrome.runtime.MessageSender, response: any) => void\n  ) {\n    chrome.runtime.onMessage.addListener(\n      (msg: any, sender: chrome.runtime.MessageSender, response: any) => {\n        callback(msg, sender, response);\n      }\n    );\n  }\n\n  static sendMessage(subscriber: string, arg: any = {}) {\n    const message = Object.assign({}, { command: subscriber }, arg);\n    return chrome.runtime.sendMessage(message);\n  }\n\n  static async closeLoginTab() {\n    const tabs = await BrowserApi.tabsQuery({\n      active: true,\n      title: \"Bitwarden\",\n      windowType: \"normal\",\n      currentWindow: true,\n    });\n\n    if (tabs.length === 0) {\n      return;\n    }\n\n    const tabToClose = tabs[tabs.length - 1].id;\n    chrome.tabs.remove(tabToClose);\n  }\n\n  static async focusSpecifiedTab(tabId: number) {\n    chrome.tabs.update(tabId, { active: true, highlighted: true });\n  }\n\n  static closePopup(win: Window) {\n    if (BrowserApi.isWebExtensionsApi && BrowserApi.isFirefoxOnAndroid) {\n      // Reactivating the active tab dismisses the popup tab. The promise final\n      // condition is only called if the popup wasn't already dismissed (future proofing).\n      // ref: https://bugzilla.mozilla.org/show_bug.cgi?id=1433604\n      browser.tabs.update({ active: true }).finally(win.close);\n    } else {\n      win.close();\n    }\n  }\n\n  static gaFilter() {\n    return process.env.ENV !== \"production\";\n  }\n\n  static getUILanguage(win: Window) {\n    return chrome.i18n.getUILanguage();\n  }\n\n  static reloadExtension(win: Window) {\n    if (win != null) {\n      return (win.location as any).reload(true);\n    } else {\n      return chrome.runtime.reload();\n    }\n  }\n\n  static reloadOpenWindows() {\n    const views = chrome.extension.getViews() as Window[];\n    views\n      .filter((w) => w.location.href != null)\n      .forEach((w) => {\n        w.location.reload();\n      });\n  }\n\n  static connectNative(application: string): browser.runtime.Port | chrome.runtime.Port {\n    if (BrowserApi.isWebExtensionsApi) {\n      return browser.runtime.connectNative(application);\n    } else if (BrowserApi.isChromeApi) {\n      return chrome.runtime.connectNative(application);\n    }\n  }\n\n  static requestPermission(permission: any) {\n    if (BrowserApi.isWebExtensionsApi) {\n      return browser.permissions.request(permission);\n    }\n    return new Promise((resolve, reject) => {\n      chrome.permissions.request(permission, resolve);\n    });\n  }\n\n  static getPlatformInfo(): Promise<browser.runtime.PlatformInfo | chrome.runtime.PlatformInfo> {\n    if (BrowserApi.isWebExtensionsApi) {\n      return browser.runtime.getPlatformInfo();\n    }\n    return new Promise((resolve) => {\n      chrome.runtime.getPlatformInfo(resolve);\n    });\n  }\n\n  static getBrowserAction() {\n    return BrowserApi.manifestVersion === 3 ? chrome.action : chrome.browserAction;\n  }\n\n  static getSidebarAction(win: Window & typeof globalThis) {\n    return BrowserPlatformUtilsService.isSafari(win)\n      ? null\n      : typeof win.opr !== \"undefined\" && win.opr.sidebarAction\n      ? win.opr.sidebarAction\n      : win.chrome.sidebarAction;\n  }\n}\n","import { Injectable } from \"@angular/core\";\n\nimport { BrowserApi } from \"../../browser/browserApi\";\n\n@Injectable()\nexport class PopupUtilsService {\n  constructor(private privateMode: boolean = false) {}\n\n  inSidebar(win: Window): boolean {\n    return win.location.search !== \"\" && win.location.search.indexOf(\"uilocation=sidebar\") > -1;\n  }\n\n  inTab(win: Window): boolean {\n    return win.location.search !== \"\" && win.location.search.indexOf(\"uilocation=tab\") > -1;\n  }\n\n  inPopout(win: Window): boolean {\n    return win.location.search !== \"\" && win.location.search.indexOf(\"uilocation=popout\") > -1;\n  }\n\n  inPopup(win: Window): boolean {\n    return (\n      win.location.search === \"\" ||\n      win.location.search.indexOf(\"uilocation=\") === -1 ||\n      win.location.search.indexOf(\"uilocation=popup\") > -1\n    );\n  }\n\n  inPrivateMode(): boolean {\n    return this.privateMode;\n  }\n\n  getContentScrollY(win: Window, scrollingContainer = \"main\"): number {\n    const content = win.document.getElementsByTagName(scrollingContainer)[0];\n    return content.scrollTop;\n  }\n\n  setContentScrollY(win: Window, scrollY: number, scrollingContainer = \"main\"): void {\n    if (scrollY != null) {\n      const content = win.document.getElementsByTagName(scrollingContainer)[0];\n      content.scrollTop = scrollY;\n    }\n  }\n\n  popOut(win: Window, href: string = null): void {\n    if (href === null) {\n      href = win.location.href;\n    }\n\n    if (typeof chrome !== \"undefined\" && chrome.windows && chrome.windows.create) {\n      if (href.indexOf(\"?uilocation=\") > -1) {\n        href = href\n          .replace(\"uilocation=popup\", \"uilocation=popout\")\n          .replace(\"uilocation=tab\", \"uilocation=popout\")\n          .replace(\"uilocation=sidebar\", \"uilocation=popout\");\n      } else {\n        const hrefParts = href.split(\"#\");\n        href =\n          hrefParts[0] + \"?uilocation=popout\" + (hrefParts.length > 0 ? \"#\" + hrefParts[1] : \"\");\n      }\n\n      const bodyRect = document.querySelector(\"body\").getBoundingClientRect();\n      chrome.windows.create({\n        url: href,\n        type: \"popup\",\n        width: Math.round(bodyRect.width ? bodyRect.width + 60 : 375),\n        height: Math.round(bodyRect.height || 600),\n      });\n\n      if (this.inPopup(win)) {\n        BrowserApi.closePopup(win);\n      }\n    } else if (typeof chrome !== \"undefined\" && chrome.tabs && chrome.tabs.create) {\n      href = href\n        .replace(\"uilocation=popup\", \"uilocation=tab\")\n        .replace(\"uilocation=popout\", \"uilocation=tab\")\n        .replace(\"uilocation=sidebar\", \"uilocation=tab\");\n      chrome.tabs.create({\n        url: href,\n      });\n    }\n  }\n}\n","import { Directive, ElementRef, Input, Renderer2 } from \"@angular/core\";\n\n@Directive({\n  selector: \"[appA11yTitle]\",\n})\nexport class A11yTitleDirective {\n  @Input() set appA11yTitle(title: string) {\n    this.title = title;\n  }\n\n  private title: string;\n\n  constructor(private el: ElementRef, private renderer: Renderer2) {}\n\n  ngOnInit() {\n    if (!this.el.nativeElement.hasAttribute(\"title\")) {\n      this.renderer.setAttribute(this.el.nativeElement, \"title\", this.title);\n    }\n    if (!this.el.nativeElement.hasAttribute(\"aria-label\")) {\n      this.renderer.setAttribute(this.el.nativeElement, \"aria-label\", this.title);\n    }\n  }\n}\n","export abstract class ValidationService {\n  showError: (data: any) => string[];\n}\n","import { Directive, ElementRef, Input, OnChanges } from \"@angular/core\";\n\nimport { LogService } from \"@bitwarden/common/abstractions/log.service\";\nimport { ValidationService } from \"@bitwarden/common/abstractions/validation.service\";\nimport { ErrorResponse } from \"@bitwarden/common/models/response/error.response\";\n\n/**\n * Provides error handling, in particular for any error returned by the server in an api call.\n * Attach it to a <form> element and provide the name of the class property that will hold the api call promise.\n * e.g. <form [appApiAction]=\"this.formPromise\">\n * Any errors/rejections that occur will be intercepted and displayed as error toasts.\n */\n@Directive({\n  selector: \"[appApiAction]\",\n})\nexport class ApiActionDirective implements OnChanges {\n  @Input() appApiAction: Promise<any>;\n\n  constructor(\n    private el: ElementRef,\n    private validationService: ValidationService,\n    private logService: LogService\n  ) {}\n\n  ngOnChanges(changes: any) {\n    if (this.appApiAction == null || this.appApiAction.then == null) {\n      return;\n    }\n\n    this.el.nativeElement.loading = true;\n\n    this.appApiAction.then(\n      (response: any) => {\n        this.el.nativeElement.loading = false;\n      },\n      (e: any) => {\n        this.el.nativeElement.loading = false;\n\n        if ((e as ErrorResponse).captchaRequired) {\n          this.logService.error(\"Captcha required error response: \" + e.getSingleMessage());\n          return;\n        }\n        this.logService?.error(`Received API exception: ${e}`);\n        this.validationService.showError(e);\n      }\n    );\n  }\n}\n","import { Directive, ElementRef, HostListener, OnInit } from \"@angular/core\";\n\n@Directive({\n  selector: \"[appBoxRow]\",\n})\nexport class BoxRowDirective implements OnInit {\n  el: HTMLElement = null;\n  formEls: Element[];\n\n  constructor(elRef: ElementRef) {\n    this.el = elRef.nativeElement;\n  }\n\n  ngOnInit(): void {\n    this.formEls = Array.from(\n      this.el.querySelectorAll('input:not([type=\"hidden\"]), select, textarea')\n    );\n    this.formEls.forEach((formEl) => {\n      formEl.addEventListener(\n        \"focus\",\n        () => {\n          this.el.classList.add(\"active\");\n        },\n        false\n      );\n\n      formEl.addEventListener(\n        \"blur\",\n        () => {\n          this.el.classList.remove(\"active\");\n        },\n        false\n      );\n    });\n  }\n\n  @HostListener(\"click\", [\"$event\"]) onClick(event: Event) {\n    const target = event.target as HTMLElement;\n    if (\n      target !== this.el &&\n      !target.classList.contains(\"progress\") &&\n      !target.classList.contains(\"progress-bar\")\n    ) {\n      return;\n    }\n\n    if (this.formEls.length > 0) {\n      const formEl = this.formEls[0] as HTMLElement;\n      if (formEl.tagName.toLowerCase() === \"input\") {\n        const inputEl = formEl as HTMLInputElement;\n        if (inputEl.type != null && inputEl.type.toLowerCase() === \"checkbox\") {\n          inputEl.click();\n          return;\n        }\n      }\n      formEl.focus();\n    }\n  }\n}\n","import { Jsonify } from \"type-fest\";\n\nimport { EncryptionType } from \"../../enums/encryptionType\";\nimport { IEncrypted } from \"../../interfaces/IEncrypted\";\nimport { Utils } from \"../../misc/utils\";\n\nimport { SymmetricCryptoKey } from \"./symmetric-crypto-key\";\n\nexport class EncString implements IEncrypted {\n  encryptedString?: string;\n  encryptionType?: EncryptionType;\n  decryptedValue?: string;\n  data?: string;\n  iv?: string;\n  mac?: string;\n\n  constructor(\n    encryptedStringOrType: string | EncryptionType,\n    data?: string,\n    iv?: string,\n    mac?: string\n  ) {\n    if (data != null) {\n      this.initFromData(encryptedStringOrType as EncryptionType, data, iv, mac);\n    } else {\n      this.initFromEncryptedString(encryptedStringOrType as string);\n    }\n  }\n\n  get ivBytes(): ArrayBuffer {\n    return this.iv == null ? null : Utils.fromB64ToArray(this.iv).buffer;\n  }\n\n  get macBytes(): ArrayBuffer {\n    return this.mac == null ? null : Utils.fromB64ToArray(this.mac).buffer;\n  }\n\n  get dataBytes(): ArrayBuffer {\n    return this.data == null ? null : Utils.fromB64ToArray(this.data).buffer;\n  }\n\n  toJSON() {\n    return this.encryptedString;\n  }\n\n  static fromJSON(obj: Jsonify<EncString>): EncString {\n    if (obj == null) {\n      return null;\n    }\n\n    return new EncString(obj);\n  }\n\n  private initFromData(encType: EncryptionType, data: string, iv: string, mac: string) {\n    if (iv != null) {\n      this.encryptedString = encType + \".\" + iv + \"|\" + data;\n    } else {\n      this.encryptedString = encType + \".\" + data;\n    }\n\n    // mac\n    if (mac != null) {\n      this.encryptedString += \"|\" + mac;\n    }\n\n    this.encryptionType = encType;\n    this.data = data;\n    this.iv = iv;\n    this.mac = mac;\n  }\n\n  private initFromEncryptedString(encryptedString: string) {\n    this.encryptedString = encryptedString as string;\n    if (!this.encryptedString) {\n      return;\n    }\n\n    const { encType, encPieces } = this.parseEncryptedString(this.encryptedString);\n    this.encryptionType = encType;\n\n    switch (encType) {\n      case EncryptionType.AesCbc128_HmacSha256_B64:\n      case EncryptionType.AesCbc256_HmacSha256_B64:\n        if (encPieces.length !== 3) {\n          return;\n        }\n\n        this.iv = encPieces[0];\n        this.data = encPieces[1];\n        this.mac = encPieces[2];\n        break;\n      case EncryptionType.AesCbc256_B64:\n        if (encPieces.length !== 2) {\n          return;\n        }\n\n        this.iv = encPieces[0];\n        this.data = encPieces[1];\n        break;\n      case EncryptionType.Rsa2048_OaepSha256_B64:\n      case EncryptionType.Rsa2048_OaepSha1_B64:\n        if (encPieces.length !== 1) {\n          return;\n        }\n\n        this.data = encPieces[0];\n        break;\n      default:\n        return;\n    }\n  }\n\n  private parseEncryptedString(encryptedString: string): {\n    encType: EncryptionType;\n    encPieces: string[];\n  } {\n    const headerPieces = encryptedString.split(\".\");\n    let encType: EncryptionType;\n    let encPieces: string[] = null;\n\n    if (headerPieces.length === 2) {\n      try {\n        encType = parseInt(headerPieces[0], null);\n        encPieces = headerPieces[1].split(\"|\");\n      } catch (e) {\n        return;\n      }\n    } else {\n      encPieces = encryptedString.split(\"|\");\n      encType =\n        encPieces.length === 3\n          ? EncryptionType.AesCbc128_HmacSha256_B64\n          : EncryptionType.AesCbc256_B64;\n    }\n\n    return {\n      encType,\n      encPieces,\n    };\n  }\n\n  async decrypt(orgId: string, key: SymmetricCryptoKey = null): Promise<string> {\n    if (this.decryptedValue != null) {\n      return this.decryptedValue;\n    }\n\n    try {\n      if (key == null) {\n        key = await this.getKeyForDecryption(orgId);\n      }\n      if (key == null) {\n        throw new Error(\"No key to decrypt EncString with orgId \" + orgId);\n      }\n\n      const encryptService = Utils.getContainerService().getEncryptService();\n      this.decryptedValue = await encryptService.decryptToUtf8(this, key);\n    } catch (e) {\n      this.decryptedValue = \"[error: cannot decrypt]\";\n    }\n    return this.decryptedValue;\n  }\n\n  private async getKeyForDecryption(orgId: string) {\n    const cryptoService = Utils.getContainerService().getCryptoService();\n    return orgId != null\n      ? await cryptoService.getOrgKey(orgId)\n      : await cryptoService.getKeyForUserEncryption();\n  }\n}\n","import { View } from \"../view/view\";\n\nimport { EncString } from \"./enc-string\";\nimport { SymmetricCryptoKey } from \"./symmetric-crypto-key\";\n\nexport default class Domain {\n  protected buildDomainModel<D extends Domain>(\n    domain: D,\n    dataObj: any,\n    map: any,\n    notEncList: any[] = []\n  ) {\n    for (const prop in map) {\n      // eslint-disable-next-line\n      if (!map.hasOwnProperty(prop)) {\n        continue;\n      }\n\n      const objProp = dataObj[map[prop] || prop];\n      if (notEncList.indexOf(prop) > -1) {\n        (domain as any)[prop] = objProp ? objProp : null;\n      } else {\n        (domain as any)[prop] = objProp ? new EncString(objProp) : null;\n      }\n    }\n  }\n  protected buildDataModel<D extends Domain>(\n    domain: D,\n    dataObj: any,\n    map: any,\n    notEncStringList: any[] = []\n  ) {\n    for (const prop in map) {\n      // eslint-disable-next-line\n      if (!map.hasOwnProperty(prop)) {\n        continue;\n      }\n\n      const objProp = (domain as any)[map[prop] || prop];\n      if (notEncStringList.indexOf(prop) > -1) {\n        (dataObj as any)[prop] = objProp != null ? objProp : null;\n      } else {\n        (dataObj as any)[prop] = objProp != null ? (objProp as EncString).encryptedString : null;\n      }\n    }\n  }\n\n  protected async decryptObj<T extends View>(\n    viewModel: T,\n    map: any,\n    orgId: string,\n    key: SymmetricCryptoKey = null\n  ): Promise<T> {\n    const promises = [];\n    const self: any = this;\n\n    for (const prop in map) {\n      // eslint-disable-next-line\n      if (!map.hasOwnProperty(prop)) {\n        continue;\n      }\n\n      (function (theProp) {\n        const p = Promise.resolve()\n          .then(() => {\n            const mapProp = map[theProp] || theProp;\n            if (self[mapProp]) {\n              return self[mapProp].decrypt(orgId, key);\n            }\n            return null;\n          })\n          .then((val: any) => {\n            (viewModel as any)[theProp] = val;\n          });\n        promises.push(p);\n      })(prop);\n    }\n\n    await Promise.all(promises);\n    return viewModel;\n  }\n}\n","import Domain from \"./domain-base\";\n\nexport class MasterPasswordPolicyOptions extends Domain {\n  minComplexity = 0;\n  minLength = 0;\n  requireUpper = false;\n  requireLower = false;\n  requireNumbers = false;\n  requireSpecial = false;\n}\n","<div\n  #callout\n  class=\"callout callout-{{ calloutStyle }}\"\n  [ngClass]=\"{ clickable: clickable }\"\n  [attr.role]=\"useAlertRole ? 'alert' : null\"\n>\n  <h3 class=\"callout-heading\" *ngIf=\"title\">\n    <i class=\"bwi {{ icon }}\" *ngIf=\"icon\" aria-hidden=\"true\"></i>\n    {{ title }}\n  </h3>\n  <div class=\"enforced-policy-options\" *ngIf=\"enforcedPolicyOptions\">\n    {{ enforcedPolicyMessage }}\n    <ul>\n      <li *ngIf=\"enforcedPolicyOptions?.minComplexity > 0\">\n        {{ \"policyInEffectMinComplexity\" | i18n: getPasswordScoreAlertDisplay() }}\n      </li>\n      <li *ngIf=\"enforcedPolicyOptions?.minLength > 0\">\n        {{ \"policyInEffectMinLength\" | i18n: enforcedPolicyOptions?.minLength.toString() }}\n      </li>\n      <li *ngIf=\"enforcedPolicyOptions?.requireUpper\">\n        {{ \"policyInEffectUppercase\" | i18n }}\n      </li>\n      <li *ngIf=\"enforcedPolicyOptions?.requireLower\">\n        {{ \"policyInEffectLowercase\" | i18n }}\n      </li>\n      <li *ngIf=\"enforcedPolicyOptions?.requireNumbers\">\n        {{ \"policyInEffectNumbers\" | i18n }}\n      </li>\n      <li *ngIf=\"enforcedPolicyOptions?.requireSpecial\">\n        {{ \"policyInEffectSpecial\" | i18n: \"!@#$%^&*\" }}\n      </li>\n    </ul>\n  </div>\n  <ng-content></ng-content>\n</div>\n","import { Component, Input, OnInit } from \"@angular/core\";\n\nimport { I18nService } from \"@bitwarden/common/abstractions/i18n.service\";\nimport { MasterPasswordPolicyOptions } from \"@bitwarden/common/models/domain/master-password-policy-options\";\n\n@Component({\n  selector: \"app-callout\",\n  templateUrl: \"callout.component.html\",\n})\nexport class CalloutComponent implements OnInit {\n  @Input() type = \"info\";\n  @Input() icon: string;\n  @Input() title: string;\n  @Input() clickable: boolean;\n  @Input() enforcedPolicyOptions: MasterPasswordPolicyOptions;\n  @Input() enforcedPolicyMessage: string;\n  @Input() useAlertRole = false;\n\n  calloutStyle: string;\n\n  constructor(private i18nService: I18nService) {}\n\n  ngOnInit() {\n    this.calloutStyle = this.type;\n\n    if (this.enforcedPolicyMessage === undefined) {\n      this.enforcedPolicyMessage = this.i18nService.t(\"masterPasswordPolicyInEffect\");\n    }\n\n    if (this.type === \"warning\" || this.type === \"danger\") {\n      if (this.type === \"danger\") {\n        this.calloutStyle = \"danger\";\n      }\n      if (this.title === undefined) {\n        this.title = this.i18nService.t(\"warning\");\n      }\n      if (this.icon === undefined) {\n        this.icon = \"bwi-exclamation-triangle\";\n      }\n    } else if (this.type === \"error\") {\n      this.calloutStyle = \"danger\";\n      if (this.title === undefined) {\n        this.title = this.i18nService.t(\"error\");\n      }\n      if (this.icon === undefined) {\n        this.icon = \"bwi-error\";\n      }\n    } else if (this.type === \"tip\") {\n      this.calloutStyle = \"success\";\n      if (this.title === undefined) {\n        this.title = this.i18nService.t(\"tip\");\n      }\n      if (this.icon === undefined) {\n        this.icon = \"bwi-lightbulb\";\n      }\n    }\n  }\n\n  getPasswordScoreAlertDisplay() {\n    if (this.enforcedPolicyOptions == null) {\n      return \"\";\n    }\n\n    let str: string;\n    switch (this.enforcedPolicyOptions.minComplexity) {\n      case 4:\n        str = this.i18nService.t(\"strong\");\n        break;\n      case 3:\n        str = this.i18nService.t(\"good\");\n        break;\n      default:\n        str = this.i18nService.t(\"weak\");\n        break;\n    }\n    return str + \" (\" + this.enforcedPolicyOptions.minComplexity + \")\";\n  }\n}\n","import { Directive, ElementRef, Input, Renderer2 } from \"@angular/core\";\n\n@Directive({\n  selector: \"[appInputVerbatim]\",\n})\nexport class InputVerbatimDirective {\n  @Input() set appInputVerbatim(condition: boolean | string) {\n    this.disableComplete = condition === \"\" || condition === true;\n  }\n\n  private disableComplete: boolean;\n\n  constructor(private el: ElementRef, private renderer: Renderer2) {}\n\n  ngOnInit() {\n    if (this.disableComplete && !this.el.nativeElement.hasAttribute(\"autocomplete\")) {\n      this.renderer.setAttribute(this.el.nativeElement, \"autocomplete\", \"off\");\n    }\n    if (!this.el.nativeElement.hasAttribute(\"autocapitalize\")) {\n      this.renderer.setAttribute(this.el.nativeElement, \"autocapitalize\", \"none\");\n    }\n    if (!this.el.nativeElement.hasAttribute(\"autocorrect\")) {\n      this.renderer.setAttribute(this.el.nativeElement, \"autocorrect\", \"none\");\n    }\n    if (!this.el.nativeElement.hasAttribute(\"spellcheck\")) {\n      this.renderer.setAttribute(this.el.nativeElement, \"spellcheck\", \"false\");\n    }\n    if (!this.el.nativeElement.hasAttribute(\"inputmode\")) {\n      this.renderer.setAttribute(this.el.nativeElement, \"inputmode\", \"verbatim\");\n    }\n  }\n}\n","import { Directive, HostListener } from \"@angular/core\";\n\n@Directive({\n  selector: \"[appStopClick]\",\n})\nexport class StopClickDirective {\n  @HostListener(\"click\", [\"$event\"]) onClick($event: MouseEvent) {\n    $event.preventDefault();\n  }\n}\n","export enum FieldType {\n  Text = 0,\n  Hidden = 1,\n  Boolean = 2,\n  Linked = 3,\n}\n","import { CdkDragDrop, moveItemInArray } from \"@angular/cdk/drag-drop\";\nimport { Directive, Input, OnChanges, SimpleChanges } from \"@angular/core\";\n\nimport { EventCollectionService } from \"@bitwarden/common/abstractions/event/event-collection.service\";\nimport { I18nService } from \"@bitwarden/common/abstractions/i18n.service\";\nimport { EventType } from \"@bitwarden/common/enums/eventType\";\nimport { FieldType } from \"@bitwarden/common/enums/fieldType\";\nimport { Utils } from \"@bitwarden/common/misc/utils\";\nimport { CipherType } from \"@bitwarden/common/vault/enums/cipher-type\";\nimport { CipherView } from \"@bitwarden/common/vault/models/view/cipher.view\";\nimport { FieldView } from \"@bitwarden/common/vault/models/view/field.view\";\n\n@Directive()\nexport class AddEditCustomFieldsComponent implements OnChanges {\n  @Input() cipher: CipherView;\n  @Input() thisCipherType: CipherType;\n  @Input() editMode: boolean;\n\n  addFieldType: FieldType = FieldType.Text;\n  addFieldTypeOptions: any[];\n  addFieldLinkedTypeOption: any;\n  linkedFieldOptions: any[] = [];\n\n  cipherType = CipherType;\n  fieldType = FieldType;\n  eventType = EventType;\n\n  constructor(\n    private i18nService: I18nService,\n    private eventCollectionService: EventCollectionService\n  ) {\n    this.addFieldTypeOptions = [\n      { name: i18nService.t(\"cfTypeText\"), value: FieldType.Text },\n      { name: i18nService.t(\"cfTypeHidden\"), value: FieldType.Hidden },\n      { name: i18nService.t(\"cfTypeBoolean\"), value: FieldType.Boolean },\n    ];\n    this.addFieldLinkedTypeOption = {\n      name: this.i18nService.t(\"cfTypeLinked\"),\n      value: FieldType.Linked,\n    };\n  }\n\n  ngOnChanges(changes: SimpleChanges) {\n    if (changes.thisCipherType != null) {\n      this.setLinkedFieldOptions();\n\n      if (!changes.thisCipherType.firstChange) {\n        this.resetCipherLinkedFields();\n      }\n    }\n  }\n\n  addField() {\n    if (this.cipher.fields == null) {\n      this.cipher.fields = [];\n    }\n\n    const f = new FieldView();\n    f.type = this.addFieldType;\n    f.newField = true;\n\n    if (f.type === FieldType.Linked) {\n      f.linkedId = this.linkedFieldOptions[0].value;\n    }\n\n    this.cipher.fields.push(f);\n  }\n\n  removeField(field: FieldView) {\n    const i = this.cipher.fields.indexOf(field);\n    if (i > -1) {\n      this.cipher.fields.splice(i, 1);\n    }\n  }\n\n  toggleFieldValue(field: FieldView) {\n    const f = field as any;\n    f.showValue = !f.showValue;\n    if (this.editMode && f.showValue) {\n      this.eventCollectionService.collect(\n        EventType.Cipher_ClientToggledHiddenFieldVisible,\n        this.cipher.id\n      );\n    }\n  }\n\n  trackByFunction(index: number, item: any) {\n    return index;\n  }\n\n  drop(event: CdkDragDrop<string[]>) {\n    moveItemInArray(this.cipher.fields, event.previousIndex, event.currentIndex);\n  }\n\n  private setLinkedFieldOptions() {\n    if (this.cipher.linkedFieldOptions == null) {\n      return;\n    }\n\n    const options: any = [];\n    this.cipher.linkedFieldOptions.forEach((linkedFieldOption, id) =>\n      options.push({ name: this.i18nService.t(linkedFieldOption.i18nKey), value: id })\n    );\n    this.linkedFieldOptions = options.sort(Utils.getSortFunction(this.i18nService, \"name\"));\n  }\n\n  private resetCipherLinkedFields() {\n    if (this.cipher.fields == null || this.cipher.fields.length === 0) {\n      return;\n    }\n\n    // Delete any Linked custom fields if the item type does not support them\n    if (this.cipher.linkedFieldOptions == null) {\n      this.cipher.fields = this.cipher.fields.filter((f) => f.type !== FieldType.Linked);\n      return;\n    }\n\n    this.cipher.fields\n      .filter((f) => f.type === FieldType.Linked)\n      .forEach((f) => (f.linkedId = this.linkedFieldOptions[0].value));\n  }\n}\n","import { Directive, ElementRef, forwardRef, HostListener, Input, Renderer2 } from \"@angular/core\";\nimport { ControlValueAccessor, NG_VALUE_ACCESSOR } from \"@angular/forms\";\n\n// ref: https://juristr.com/blog/2018/02/ng-true-value-directive/\n@Directive({\n  selector: \"input[type=checkbox][appTrueFalseValue]\",\n  providers: [\n    {\n      provide: NG_VALUE_ACCESSOR,\n      useExisting: forwardRef(() => TrueFalseValueDirective),\n      multi: true,\n    },\n  ],\n})\nexport class TrueFalseValueDirective implements ControlValueAccessor {\n  @Input() trueValue: boolean | string = true;\n  @Input() falseValue: boolean | string = false;\n\n  constructor(private elementRef: ElementRef, private renderer: Renderer2) {}\n\n  @HostListener(\"change\", [\"$event\"])\n  onHostChange(ev: any) {\n    this.propagateChange(ev.target.checked ? this.trueValue : this.falseValue);\n  }\n\n  writeValue(obj: any): void {\n    if (obj === this.trueValue) {\n      this.renderer.setProperty(this.elementRef.nativeElement, \"checked\", true);\n    } else {\n      this.renderer.setProperty(this.elementRef.nativeElement, \"checked\", false);\n    }\n  }\n\n  registerOnChange(fn: any): void {\n    this.propagateChange = fn;\n  }\n\n  registerOnTouched(fn: any): void {\n    /* nothing */\n  }\n\n  setDisabledState?(isDisabled: boolean): void {\n    /* nothing */\n  }\n\n  private propagateChange = (_: any) => {\n    /* nothing */\n  };\n}\n","<div class=\"box\">\n  <h2 class=\"box-header\">\n    {{ \"customFields\" | i18n }}\n  </h2>\n  <div class=\"box-content\">\n    <!-- Current custom fields -->\n    <div cdkDropList (cdkDropListDropped)=\"drop($event)\" *ngIf=\"cipher.hasFields\">\n      <div\n        role=\"group\"\n        class=\"box-content-row box-content-row-multi box-draggable-row\"\n        appBoxRow\n        cdkDrag\n        *ngFor=\"let f of cipher.fields; let i = index; trackBy: trackByFunction\"\n        [ngClass]=\"{ 'box-content-row-checkbox': f.type === fieldType.Boolean }\"\n        attr.aria-label=\"{{ f.name }}\"\n      >\n        <button\n          type=\"button\"\n          appStopClick\n          (click)=\"removeField(f)\"\n          appA11yTitle=\"{{ 'remove' | i18n }}\"\n          *ngIf=\"!(!cipher.edit && editMode)\"\n        >\n          <i class=\"bwi bwi-minus-circle bwi-lg\" aria-hidden=\"true\"></i>\n        </button>\n        <label for=\"fieldName{{ i }}\" class=\"sr-only\">{{ \"name\" | i18n }}</label>\n        <label for=\"fieldValue{{ i }}\" class=\"sr-only\">{{ \"value\" | i18n }}</label>\n        <div class=\"row-main\">\n          <input\n            id=\"fieldName{{ i }}\"\n            type=\"text\"\n            name=\"Field.Name{{ i }}\"\n            [(ngModel)]=\"f.name\"\n            class=\"row-label\"\n            placeholder=\"{{ 'name' | i18n }}\"\n            appInputVerbatim\n            [readonly]=\"!cipher.edit && editMode\"\n          />\n          <!-- Text -->\n          <input\n            id=\"fieldValue{{ i }}\"\n            type=\"text\"\n            name=\"Field.Value{{ i }}\"\n            [(ngModel)]=\"f.value\"\n            *ngIf=\"f.type === fieldType.Text\"\n            placeholder=\"{{ 'value' | i18n }}\"\n            appInputVerbatim\n            attr.aria-describedby=\"fieldName{{ i }}\"\n            [readonly]=\"!cipher.edit && editMode\"\n          />\n          <!-- Hidden -->\n          <input\n            id=\"fieldValue{{ i }}\"\n            type=\"{{ f.showValue ? 'text' : 'password' }}\"\n            name=\"Field.Value{{ i }}\"\n            [(ngModel)]=\"f.value\"\n            class=\"monospaced\"\n            appInputVerbatim\n            *ngIf=\"f.type === fieldType.Hidden\"\n            placeholder=\"{{ 'value' | i18n }}\"\n            [disabled]=\"!cipher.viewPassword && !f.newField\"\n            attr.aria-describedby=\"fieldName{{ i }}\"\n            [readonly]=\"!cipher.edit && editMode\"\n          />\n          <!-- Linked -->\n          <select\n            id=\"fieldValue{{ i }}\"\n            name=\"Field.Value{{ i }}\"\n            [(ngModel)]=\"f.linkedId\"\n            *ngIf=\"f.type === fieldType.Linked && cipher.linkedFieldOptions != null\"\n            attr.aria-describedby=\"fieldName{{ i }}\"\n          >\n            <option *ngFor=\"let o of linkedFieldOptions\" [ngValue]=\"o.value\">{{ o.name }}</option>\n          </select>\n        </div>\n        <!-- Boolean -->\n        <input\n          id=\"fieldValue{{ i }}\"\n          name=\"Field.Value{{ i }}\"\n          type=\"checkbox\"\n          [(ngModel)]=\"f.value\"\n          *ngIf=\"f.type === fieldType.Boolean\"\n          appTrueFalseValue\n          trueValue=\"true\"\n          falseValue=\"false\"\n          attr.aria-describedby=\"fieldName{{ i }}\"\n          [readonly]=\"!cipher.edit && editMode\"\n        />\n        <div\n          class=\"action-buttons\"\n          *ngIf=\"f.type === fieldType.Hidden && (cipher.viewPassword || f.newField)\"\n        >\n          <button\n            type=\"button\"\n            class=\"row-btn\"\n            appStopClick\n            appA11yTitle=\"{{ 'toggleVisibility' | i18n }}\"\n            (click)=\"toggleFieldValue(f)\"\n            [attr.aria-pressed]=\"f.showValue\"\n          >\n            <i\n              class=\"bwi bwi-lg\"\n              aria-hidden=\"true\"\n              [ngClass]=\"{ 'bwi-eye': !f.showValue, 'bwi-eye-slash': f.showValue }\"\n            ></i>\n          </button>\n        </div>\n        <div\n          class=\"drag-handle\"\n          appA11yTitle=\"{{ 'dragToSort' | i18n }}\"\n          *ngIf=\"!(!cipher.edit && editMode)\"\n          cdkDragHandle\n        >\n          <i class=\"bwi bwi-hamburger\" aria-hidden=\"true\"></i>\n        </div>\n      </div>\n    </div>\n    <!-- Add new custom field -->\n    <div\n      class=\"box-content-row box-content-row-newmulti\"\n      *ngIf=\"!(!cipher.edit && editMode)\"\n      appBoxRow\n    >\n      <button type=\"button\" appStopClick (click)=\"addField()\">\n        <i class=\"bwi bwi-plus-circle bwi-fw bwi-lg\" aria-hidden=\"true\"></i>\n        {{ \"newCustomField\" | i18n }}\n      </button>\n      <label for=\"addFieldType\" class=\"sr-only\">{{ \"type\" | i18n }}</label>\n      <select id=\"addFieldType\" name=\"AddFieldType\" [(ngModel)]=\"addFieldType\" class=\"field-type\">\n        <option *ngFor=\"let o of addFieldTypeOptions\" [ngValue]=\"o.value\">{{ o.name }}</option>\n        <option\n          *ngIf=\"cipher.linkedFieldOptions != null\"\n          [ngValue]=\"addFieldLinkedTypeOption.value\"\n        >\n          {{ addFieldLinkedTypeOption.name }}\n        </option>\n      </select>\n    </div>\n  </div>\n</div>\n","import { Component } from \"@angular/core\";\n\nimport { AddEditCustomFieldsComponent as BaseAddEditCustomFieldsComponent } from \"@bitwarden/angular/vault/components/add-edit-custom-fields.component\";\nimport { EventCollectionService } from \"@bitwarden/common/abstractions/event/event-collection.service\";\nimport { I18nService } from \"@bitwarden/common/abstractions/i18n.service\";\n\n@Component({\n  selector: \"app-vault-add-edit-custom-fields\",\n  templateUrl: \"add-edit-custom-fields.component.html\",\n})\nexport class AddEditCustomFieldsComponent extends BaseAddEditCustomFieldsComponent {\n  constructor(i18nService: I18nService, eventCollectionService: EventCollectionService) {\n    super(i18nService, eventCollectionService);\n  }\n}\n","<form #form (ngSubmit)=\"submit()\" [appApiAction]=\"formPromise\">\n  <header>\n    <div class=\"left\">\n      <button type=\"button\" (click)=\"cancel()\">{{ \"cancel\" | i18n }}</button>\n    </div>\n    <h1 class=\"center\">\n      <span class=\"title\">{{ title }}</span>\n    </h1>\n    <div class=\"right\">\n      <button type=\"submit\" [disabled]=\"form.loading\">\n        <span [hidden]=\"form.loading\">{{ \"save\" | i18n }}</span>\n        <i class=\"bwi bwi-spinner bwi-lg bwi-spin\" [hidden]=\"!form.loading\" aria-hidden=\"true\"></i>\n      </button>\n    </div>\n  </header>\n  <main tabindex=\"-1\" *ngIf=\"cipher\">\n    <app-callout type=\"info\" *ngIf=\"allowOwnershipOptions() && !allowPersonal\">\n      {{ \"personalOwnershipPolicyInEffect\" | i18n }}\n    </app-callout>\n    <div class=\"box\">\n      <h2 class=\"box-header\">\n        {{ \"itemInformation\" | i18n }}\n      </h2>\n      <div class=\"box-content\">\n        <div class=\"box-content-row\" *ngIf=\"!editMode\" appBoxRow>\n          <label for=\"type\">{{ \"type\" | i18n }}</label>\n          <select id=\"type\" name=\"Type\" [(ngModel)]=\"cipher.type\">\n            <option *ngFor=\"let o of typeOptions\" [ngValue]=\"o.value\">{{ o.name }}</option>\n          </select>\n        </div>\n        <div class=\"box-content-row\" appBoxRow>\n          <label for=\"name\">{{ \"name\" | i18n }}</label>\n          <input\n            id=\"name\"\n            type=\"text\"\n            name=\"Name\"\n            [(ngModel)]=\"cipher.name\"\n            [readonly]=\"!cipher.edit && editMode\"\n          />\n        </div>\n        <!-- Login -->\n        <div *ngIf=\"cipher.type === cipherType.Login\">\n          <div class=\"box-content-row box-content-row-flex\" appBoxRow>\n            <div class=\"row-main\">\n              <label for=\"loginUsername\">{{ \"username\" | i18n }}</label>\n              <input\n                id=\"loginUsername\"\n                type=\"text\"\n                name=\"Login.Username\"\n                [(ngModel)]=\"cipher.login.username\"\n                inputmode=\"email\"\n                appInputVerbatim\n                [readonly]=\"!cipher.edit && editMode\"\n              />\n            </div>\n            <div class=\"action-buttons\">\n              <button\n                type=\"button\"\n                class=\"row-btn\"\n                appStopClick\n                appA11yTitle=\"{{ 'generateUsername' | i18n }}\"\n                (click)=\"generateUsername()\"\n                *ngIf=\"!(!cipher.edit && editMode)\"\n              >\n                <i class=\"bwi bwi-lg bwi-generate\" aria-hidden=\"true\"></i>\n              </button>\n            </div>\n          </div>\n          <div class=\"box-content-row box-content-row-flex\" appBoxRow>\n            <div class=\"row-main\">\n              <label for=\"loginPassword\">{{ \"password\" | i18n }}</label>\n              <input\n                id=\"loginPassword\"\n                class=\"monospaced\"\n                type=\"{{ showPassword ? 'text' : 'password' }}\"\n                name=\"Login.Password\"\n                [(ngModel)]=\"cipher.login.password\"\n                appInputVerbatim\n                [disabled]=\"!cipher.viewPassword\"\n                [readonly]=\"!cipher.edit && editMode\"\n              />\n            </div>\n            <div class=\"action-buttons\">\n              <button\n                type=\"button\"\n                #checkPasswordBtn\n                class=\"row-btn btn\"\n                appA11yTitle=\"{{ 'checkPassword' | i18n }}\"\n                (click)=\"checkPassword()\"\n                [appApiAction]=\"checkPasswordPromise\"\n                [disabled]=\"$any(checkPasswordBtn).loading\"\n                *ngIf=\"cipher.viewPassword\"\n              >\n                <i\n                  class=\"bwi bwi-lg bwi-check-circle\"\n                  [hidden]=\"$any(checkPasswordBtn).loading\"\n                  aria-hidden=\"true\"\n                ></i>\n                <i\n                  class=\"bwi bwi-lg bwi-spinner bwi-spin\"\n                  [hidden]=\"!$any(checkPasswordBtn).loading\"\n                  aria-hidden=\"true\"\n                ></i>\n              </button>\n              <button\n                type=\"button\"\n                class=\"row-btn\"\n                appStopClick\n                appA11yTitle=\"{{ 'toggleVisibility' | i18n }}\"\n                (click)=\"togglePassword()\"\n                *ngIf=\"cipher.viewPassword\"\n                [attr.aria-pressed]=\"showPassword\"\n              >\n                <i\n                  class=\"bwi bwi-lg\"\n                  aria-hidden=\"true\"\n                  [ngClass]=\"{ 'bwi-eye': !showPassword, 'bwi-eye-slash': showPassword }\"\n                ></i>\n              </button>\n              <button\n                type=\"button\"\n                class=\"row-btn\"\n                appStopClick\n                appA11yTitle=\"{{ 'generatePassword' | i18n }}\"\n                (click)=\"generatePassword()\"\n                *ngIf=\"cipher.viewPassword && !(!cipher.edit && editMode)\"\n              >\n                <i class=\"bwi bwi-lg bwi-generate\" aria-hidden=\"true\"></i>\n              </button>\n            </div>\n          </div>\n          <div class=\"box-content-row\" appBoxRow>\n            <label for=\"loginTotp\">{{ \"authenticatorKeyTotp\" | i18n }}</label>\n            <input\n              id=\"loginTotp\"\n              type=\"{{ cipher.viewPassword ? 'text' : 'password' }}\"\n              name=\"Login.Totp\"\n              class=\"monospaced\"\n              [(ngModel)]=\"cipher.login.totp\"\n              appInputVerbatim\n              [disabled]=\"!cipher.viewPassword\"\n              [readonly]=\"!cipher.edit && editMode\"\n            />\n          </div>\n        </div>\n        <!-- Card -->\n        <div *ngIf=\"cipher.type === cipherType.Card\">\n          <div class=\"box-content-row\" appBoxRow>\n            <label for=\"cardCardholderName\">{{ \"cardholderName\" | i18n }}</label>\n            <input\n              id=\"cardCardholderName\"\n              type=\"text\"\n              name=\"Card.CardCardholderName\"\n              [(ngModel)]=\"cipher.card.cardholderName\"\n              [readonly]=\"!cipher.edit && editMode\"\n            />\n          </div>\n          <div class=\"box-content-row box-content-row-flex\" appBoxRow>\n            <div class=\"row-main\">\n              <label for=\"cardNumber\">{{ \"number\" | i18n }}</label>\n              <input\n                id=\"cardNumber\"\n                class=\"monospaced\"\n                type=\"{{ showCardNumber ? 'text' : 'password' }}\"\n                name=\"Card.Number\"\n                [(ngModel)]=\"cipher.card.number\"\n                appInputVerbatim\n                [readonly]=\"!cipher.edit && editMode\"\n              />\n            </div>\n            <div class=\"action-buttons\">\n              <button\n                type=\"button\"\n                class=\"row-btn\"\n                appStopClick\n                appA11yTitle=\"{{ 'toggleVisibility' | i18n }}\"\n                (click)=\"toggleCardNumber()\"\n                [attr.aria-pressed]=\"showCardNumber\"\n              >\n                <i\n                  class=\"bwi bwi-lg\"\n                  aria-hidden=\"true\"\n                  [ngClass]=\"{ 'bwi-eye': !showCardNumber, 'bwi-eye-slash': showCardNumber }\"\n                ></i>\n              </button>\n            </div>\n          </div>\n          <div class=\"box-content-row\" appBoxRow>\n            <label for=\"cardBrand\">{{ \"brand\" | i18n }}</label>\n            <span *ngIf=\"!(!cipher.edit && editMode); else readonlyCardBrand\">\n              <select id=\"cardBrand\" name=\"Card.Brand\" [(ngModel)]=\"cipher.card.brand\">\n                <option *ngFor=\"let o of cardBrandOptions\" [ngValue]=\"o.value\">{{ o.name }}</option>\n              </select>\n            </span>\n            <ng-template #readonlyCardBrand>\n              <input\n                id=\"cardBrand\"\n                name=\"Card.Brand\"\n                type=\"text\"\n                [readonly]=\"true\"\n                [value]=\"cipher.card.brand\"\n              />\n            </ng-template>\n          </div>\n          <div class=\"box-content-row\" appBoxRow>\n            <label for=\"cardExpMonth\">{{ \"expirationMonth\" | i18n }}</label>\n            <span *ngIf=\"!(!cipher.edit && editMode); else readonlyCardExpMonth\">\n              <select id=\"cardExpMonth\" name=\"Card.ExpMonth\" [(ngModel)]=\"cipher.card.expMonth\">\n                <option *ngFor=\"let o of cardExpMonthOptions\" [ngValue]=\"o.value\">\n                  {{ o.name }}\n                </option>\n              </select>\n            </span>\n            <ng-template #readonlyCardExpMonth>\n              <input\n                id=\"cardExpMonth\"\n                name=\"Card.ExpMonth\"\n                type=\"text\"\n                [readonly]=\"true\"\n                [value]=\"getCardExpMonthDisplay()\"\n              />\n            </ng-template>\n          </div>\n          <div class=\"box-content-row\" appBoxRow>\n            <label for=\"cardExpYear\">{{ \"expirationYear\" | i18n }}</label>\n            <input\n              id=\"cardExpYear\"\n              type=\"text\"\n              name=\"Card.ExpYear\"\n              [(ngModel)]=\"cipher.card.expYear\"\n              placeholder=\"{{ 'ex' | i18n }} {{ currentDate | date: 'yyyy' }}\"\n              [readonly]=\"!cipher.edit && editMode\"\n            />\n          </div>\n          <div class=\"box-content-row box-content-row-flex\" appBoxRow>\n            <div class=\"row-main\">\n              <label for=\"cardCode\">{{ \"securityCode\" | i18n }}</label>\n              <input\n                id=\"cardCode\"\n                class=\"monospaced\"\n                type=\"{{ showCardCode ? 'text' : 'password' }}\"\n                name=\"Card.Code\"\n                [(ngModel)]=\"cipher.card.code\"\n                appInputVerbatim\n                [readonly]=\"!cipher.edit && editMode\"\n              />\n            </div>\n            <div class=\"action-buttons\">\n              <button\n                type=\"button\"\n                class=\"row-btn\"\n                appStopClick\n                appA11yTitle=\"{{ 'toggleVisibility' | i18n }}\"\n                (click)=\"toggleCardCode()\"\n                [attr.aria-pressed]=\"showCardCode\"\n              >\n                <i\n                  class=\"bwi bwi-lg\"\n                  aria-hidden=\"true\"\n                  [ngClass]=\"{ 'bwi-eye': !showCardCode, 'bwi-eye-slash': showCardCode }\"\n                ></i>\n              </button>\n            </div>\n          </div>\n        </div>\n        <!-- Identity -->\n        <div *ngIf=\"cipher.type === cipherType.Identity\">\n          <div class=\"box-content-row\" appBoxRow>\n            <label for=\"idTitle\">{{ \"title\" | i18n }}</label>\n            <span *ngIf=\"!(!cipher.edit && editMode); else readonlyIdTitle\">\n              <select id=\"idTitle\" name=\"Identity.Title\" [(ngModel)]=\"cipher.identity.title\">\n                <option *ngFor=\"let o of identityTitleOptions\" [ngValue]=\"o.value\">\n                  {{ o.name }}\n                </option>\n              </select>\n            </span>\n            <ng-template #readonlyIdTitle>\n              <input\n                id=\"idTitle\"\n                name=\"Identity.Title\"\n                type=\"text\"\n                [readonly]=\"true\"\n                [value]=\"cipher.identity.title\"\n              />\n            </ng-template>\n          </div>\n          <div class=\"box-content-row\" appBoxRow>\n            <label for=\"idFirstName\">{{ \"firstName\" | i18n }}</label>\n            <input\n              id=\"idFirstName\"\n              type=\"text\"\n              name=\"Identity.FirstName\"\n              [(ngModel)]=\"cipher.identity.firstName\"\n              [readonly]=\"!cipher.edit && editMode\"\n            />\n          </div>\n          <div class=\"box-content-row\" appBoxRow>\n            <label for=\"idMiddleName\">{{ \"middleName\" | i18n }}</label>\n            <input\n              id=\"idMiddleName\"\n              type=\"text\"\n              name=\"Identity.MiddleName\"\n              [(ngModel)]=\"cipher.identity.middleName\"\n              [readonly]=\"!cipher.edit && editMode\"\n            />\n          </div>\n          <div class=\"box-content-row\" appBoxRow>\n            <label for=\"idLastName\">{{ \"lastName\" | i18n }}</label>\n            <input\n              id=\"idLastName\"\n              type=\"text\"\n              name=\"Identity.LastName\"\n              [(ngModel)]=\"cipher.identity.lastName\"\n              [readonly]=\"!cipher.edit && editMode\"\n            />\n          </div>\n          <div class=\"box-content-row\" appBoxRow>\n            <label for=\"idUsername\">{{ \"username\" | i18n }}</label>\n            <input\n              id=\"idUsername\"\n              type=\"text\"\n              name=\"Identity.Username\"\n              [(ngModel)]=\"cipher.identity.username\"\n              appInputVerbatim\n              [readonly]=\"!cipher.edit && editMode\"\n            />\n          </div>\n          <div class=\"box-content-row\" appBoxRow>\n            <label for=\"idCompany\">{{ \"company\" | i18n }}</label>\n            <input\n              id=\"idCompany\"\n              type=\"text\"\n              name=\"Identity.Company\"\n              [(ngModel)]=\"cipher.identity.company\"\n              [readonly]=\"!cipher.edit && editMode\"\n            />\n          </div>\n          <div class=\"box-content-row\" appBoxRow>\n            <label for=\"idSsn\">{{ \"ssn\" | i18n }}</label>\n            <input\n              id=\"idSsn\"\n              type=\"text\"\n              name=\"Identity.SSN\"\n              [(ngModel)]=\"cipher.identity.ssn\"\n              appInputVerbatim\n              [readonly]=\"!cipher.edit && editMode\"\n            />\n          </div>\n          <div class=\"box-content-row\" appBoxRow>\n            <label for=\"idPassportNumber\">{{ \"passportNumber\" | i18n }}</label>\n            <input\n              id=\"idPassportNumber\"\n              type=\"text\"\n              name=\"Identity.PassportNumber\"\n              [(ngModel)]=\"cipher.identity.passportNumber\"\n              appInputVerbatim\n              [readonly]=\"!cipher.edit && editMode\"\n            />\n          </div>\n          <div class=\"box-content-row\" appBoxRow>\n            <label for=\"idLicenseNumber\">{{ \"licenseNumber\" | i18n }}</label>\n            <input\n              id=\"idLicenseNumber\"\n              type=\"text\"\n              name=\"Identity.LicenseNumber\"\n              [(ngModel)]=\"cipher.identity.licenseNumber\"\n              appInputVerbatim\n              [readonly]=\"!cipher.edit && editMode\"\n            />\n          </div>\n          <div class=\"box-content-row\" appBoxRow>\n            <label for=\"idEmail\">{{ \"email\" | i18n }}</label>\n            <input\n              id=\"idEmail\"\n              type=\"text\"\n              name=\"Identity.Email\"\n              [(ngModel)]=\"cipher.identity.email\"\n              appInputVerbatim\n              [readonly]=\"!cipher.edit && editMode\"\n            />\n          </div>\n          <div class=\"box-content-row\" appBoxRow>\n            <label for=\"idPhone\">{{ \"phone\" | i18n }}</label>\n            <input\n              id=\"idPhone\"\n              type=\"text\"\n              name=\"Identity.Phone\"\n              [(ngModel)]=\"cipher.identity.phone\"\n              [readonly]=\"!cipher.edit && editMode\"\n            />\n          </div>\n          <div class=\"box-content-row\" appBoxRow>\n            <label for=\"idAddress1\">{{ \"address1\" | i18n }}</label>\n            <input\n              id=\"idAddress1\"\n              type=\"text\"\n              name=\"Identity.Address1\"\n              [(ngModel)]=\"cipher.identity.address1\"\n              [readonly]=\"!cipher.edit && editMode\"\n            />\n          </div>\n          <div class=\"box-content-row\" appBoxRow>\n            <label for=\"idAddress2\">{{ \"address2\" | i18n }}</label>\n            <input\n              id=\"idAddress2\"\n              type=\"text\"\n              name=\"Identity.Address2\"\n              [(ngModel)]=\"cipher.identity.address2\"\n              [readonly]=\"!cipher.edit && editMode\"\n            />\n          </div>\n          <div class=\"box-content-row\" appBoxRow>\n            <label for=\"idAddress3\">{{ \"address3\" | i18n }}</label>\n            <input\n              id=\"idAddress3\"\n              type=\"text\"\n              name=\"Identity.Address3\"\n              [(ngModel)]=\"cipher.identity.address3\"\n              [readonly]=\"!cipher.edit && editMode\"\n            />\n          </div>\n          <div class=\"box-content-row\" appBoxRow>\n            <label for=\"idCity\">{{ \"cityTown\" | i18n }}</label>\n            <input\n              id=\"idCity\"\n              type=\"text\"\n              name=\"Identity.City\"\n              [(ngModel)]=\"cipher.identity.city\"\n              [readonly]=\"!cipher.edit && editMode\"\n            />\n          </div>\n          <div class=\"box-content-row\" appBoxRow>\n            <label for=\"idState\">{{ \"stateProvince\" | i18n }}</label>\n            <input\n              id=\"idState\"\n              type=\"text\"\n              name=\"Identity.State\"\n              [(ngModel)]=\"cipher.identity.state\"\n              [readonly]=\"!cipher.edit && editMode\"\n            />\n          </div>\n          <div class=\"box-content-row\" appBoxRow>\n            <label for=\"idPostalCode\">{{ \"zipPostalCode\" | i18n }}</label>\n            <input\n              id=\"idPostalCode\"\n              type=\"text\"\n              name=\"Identity.PostalCode\"\n              [(ngModel)]=\"cipher.identity.postalCode\"\n              [readonly]=\"!cipher.edit && editMode\"\n            />\n          </div>\n          <div class=\"box-content-row\" appBoxRow>\n            <label for=\"idCountry\">{{ \"country\" | i18n }}</label>\n            <input\n              id=\"idCountry\"\n              type=\"text\"\n              name=\"Identity.Country\"\n              [(ngModel)]=\"cipher.identity.country\"\n              [readonly]=\"!cipher.edit && editMode\"\n            />\n          </div>\n        </div>\n      </div>\n    </div>\n    <div class=\"box\" *ngIf=\"cipher.type === cipherType.Login\">\n      <div class=\"box-content\">\n        <ng-container *ngIf=\"cipher.login.hasUris\">\n          <div\n            role=\"group\"\n            class=\"box-content-row box-content-row-multi\"\n            appBoxRow\n            *ngFor=\"let u of cipher.login.uris; let i = index; trackBy: trackByFunction\"\n            attr.aria-label=\"{{ 'uriPosition' | i18n: i + 1 }}\"\n          >\n            <button\n              type=\"button\"\n              appStopClick\n              (click)=\"removeUri(u)\"\n              appA11yTitle=\"{{ 'remove' | i18n }}\"\n            >\n              <i class=\"bwi bwi-minus-circle bwi-lg\" aria-hidden=\"true\"></i>\n            </button>\n            <div class=\"row-main\">\n              <label for=\"loginUri{{ i }}\">{{ \"uriPosition\" | i18n: i + 1 }}</label>\n              <input\n                id=\"loginUri{{ i }}\"\n                type=\"text\"\n                name=\"Login.Uris[{{ i }}].Uri\"\n                [(ngModel)]=\"u.uri\"\n                [hidden]=\"$any(u).showUriOptionsInput === true\"\n                placeholder=\"{{ 'ex' | i18n }} https://google.com\"\n                inputmode=\"url\"\n                appInputVerbatim\n              />\n              <label for=\"loginUriMatch{{ i }}\" class=\"sr-only\">\n                {{ \"currentUri\" | i18n }} {{ i + 1 }}\n              </label>\n              <select\n                *ngIf=\"currentUris && currentUris.length\"\n                id=\"currentUris{{ i }}\"\n                name=\"Login.Uris[{{ i }}].CurrentUris\"\n                [(ngModel)]=\"u.uri\"\n                [hidden]=\"!$any(u).showCurrentUris\"\n              >\n                <option [ngValue]=\"null\">-- {{ \"select\" | i18n }} --</option>\n                <option *ngFor=\"let u of currentUris\" [ngValue]=\"u\">{{ u }}</option>\n              </select>\n              <label for=\"loginUriMatch{{ i }}\" class=\"sr-only\">\n                {{ \"matchDetection\" | i18n }} {{ i + 1 }}\n              </label>\n              <select\n                id=\"loginUriMatch{{ i }}\"\n                name=\"Login.Uris[{{ i }}].Match\"\n                [(ngModel)]=\"u.match\"\n                [hidden]=\"\n                  $any(u).showOptions === false || ($any(u).showOptions == null && u.match == null)\n                \"\n                (change)=\"loginUriMatchChanged(u)\"\n              >\n                <option *ngFor=\"let o of uriMatchOptions\" [ngValue]=\"o.value\">{{ o.name }}</option>\n              </select>\n            </div>\n            <div class=\"action-buttons\">\n              <button\n                type=\"button\"\n                *ngIf=\"currentUris && currentUris.length\"\n                class=\"row-btn\"\n                appStopClick\n                appA11yTitle=\"{{ 'toggleCurrentUris' | i18n }}\"\n                (click)=\"toggleUriInput(u)\"\n                [attr.aria-pressed]=\"$any(u).showCurrentUris === true\"\n              >\n                <i aria-hidden=\"true\" class=\"bwi bwi-lg bwi-list\"></i>\n              </button>\n              <button\n                type=\"button\"\n                class=\"row-btn\"\n                appStopClick\n                appA11yTitle=\"{{ 'toggleOptions' | i18n }}\"\n                (click)=\"toggleUriOptions(u)\"\n                [attr.aria-pressed]=\"$any(u).showOptions === true\"\n              >\n                <i class=\"bwi bwi-lg bwi-cog\" aria-hidden=\"true\"></i>\n              </button>\n            </div>\n          </div>\n        </ng-container>\n        <button\n          type=\"button\"\n          appStopClick\n          (click)=\"addUri()\"\n          class=\"box-content-row box-content-row-newmulti single-line\"\n          *ngIf=\"!(!cipher.edit && editMode)\"\n        >\n          <i class=\"bwi bwi-plus-circle bwi-fw bwi-lg\" aria-hidden=\"true\"></i> {{ \"newUri\" | i18n }}\n        </button>\n      </div>\n    </div>\n    <div class=\"box\" *ngIf=\"showAutoFillOnPageLoadOptions\">\n      <div class=\"box-content\">\n        <div class=\"box-content-row\" appBoxRow>\n          <label for=\"autofillOnPageLoad\">{{ \"itemAutoFillOnPageLoad\" | i18n }} </label>\n          <select\n            id=\"autofillOnPageLoad\"\n            name=\"AutofillOnPageLoad\"\n            [(ngModel)]=\"cipher.login.autofillOnPageLoad\"\n          >\n            <option *ngFor=\"let o of autofillOnPageLoadOptions\" [ngValue]=\"o.value\">\n              {{ o.name }}\n            </option>\n          </select>\n        </div>\n      </div>\n    </div>\n    <div class=\"box\">\n      <div class=\"box-content\">\n        <div class=\"box-content-row\" appBoxRow>\n          <label for=\"folder\">{{ \"folder\" | i18n }}</label>\n          <select id=\"folder\" name=\"FolderId\" [(ngModel)]=\"cipher.folderId\">\n            <option *ngFor=\"let f of folders$ | async\" [ngValue]=\"f.id\">{{ f.name }}</option>\n          </select>\n        </div>\n        <div class=\"box-content-row box-content-row-checkbox\" appBoxRow>\n          <label for=\"favorite\">{{ \"favorite\" | i18n }}</label>\n          <input id=\"favorite\" type=\"checkbox\" name=\"Favorite\" [(ngModel)]=\"cipher.favorite\" />\n        </div>\n        <div class=\"box-content-row box-content-row-checkbox\" appBoxRow *ngIf=\"canUseReprompt\">\n          <label for=\"passwordPrompt\">\n            {{ \"passwordPrompt\" | i18n }}\n            <a\n              target=\"_blank\"\n              rel=\"noopener\"\n              appA11yTitle=\"{{ 'learnMore' | i18n }}\"\n              href=\"https://bitwarden.com/help/managing-items/#protect-individual-items\"\n            >\n              <i class=\"bwi bwi-question-circle\" aria-hidden=\"true\"></i>\n            </a>\n          </label>\n          <input\n            id=\"passwordPrompt\"\n            type=\"checkbox\"\n            name=\"PasswordPrompt\"\n            [ngModel]=\"reprompt\"\n            (change)=\"repromptChanged()\"\n            [disabled]=\"!cipher.edit && editMode\"\n          />\n        </div>\n        <button\n          type=\"button\"\n          class=\"box-content-row box-content-row-flex text-default single-line\"\n          appStopClick\n          (click)=\"attachments()\"\n          *ngIf=\"editMode && showAttachments && !cloneMode\"\n        >\n          <div class=\"row-main\">{{ \"attachments\" | i18n }}</div>\n          <i\n            class=\"bwi bwi-external-link bwi-lg bwi-fw\"\n            aria-hidden=\"true\"\n            *ngIf=\"openAttachmentsInPopup\"\n          ></i>\n          <i\n            class=\"bwi bwi-angle-right row-sub-icon\"\n            aria-hidden=\"true\"\n            *ngIf=\"!openAttachmentsInPopup\"\n          ></i>\n        </button>\n        <button\n          type=\"button\"\n          class=\"box-content-row box-content-row-flex text-default\"\n          appStopClick\n          (click)=\"editCollections()\"\n          *ngIf=\"editMode && cipher.organizationId && !cloneMode\"\n        >\n          <div class=\"row-main\">{{ \"collections\" | i18n }}</div>\n          <i class=\"bwi bwi-angle-right row-sub-icon\" aria-hidden=\"true\"></i>\n        </button>\n      </div>\n    </div>\n    <div class=\"box\">\n      <h2 class=\"box-header\">\n        <label for=\"notes\">{{ \"notes\" | i18n }}</label>\n      </h2>\n      <div class=\"box-content\">\n        <div class=\"box-content-row\" appBoxRow>\n          <textarea\n            id=\"notes\"\n            name=\"Notes\"\n            rows=\"6\"\n            [(ngModel)]=\"cipher.notes\"\n            [readonly]=\"!cipher.edit && editMode\"\n          ></textarea>\n        </div>\n      </div>\n    </div>\n    <app-vault-add-edit-custom-fields\n      *ngIf=\"!(!cipher.hasFields && !cipher.edit && editMode)\"\n      [cipher]=\"cipher\"\n      [thisCipherType]=\"cipher.type\"\n      [editMode]=\"editMode\"\n    >\n    </app-vault-add-edit-custom-fields>\n    <div class=\"box\" *ngIf=\"allowOwnershipOptions()\">\n      <h2 class=\"box-header\">\n        {{ \"ownership\" | i18n }}\n      </h2>\n      <div class=\"box-content\">\n        <div class=\"box-content-row\" appBoxRow>\n          <label for=\"organizationId\">{{ \"whoOwnsThisItem\" | i18n }}</label>\n          <select\n            id=\"organizationId\"\n            class=\"form-control\"\n            name=\"OrganizationId\"\n            [(ngModel)]=\"cipher.organizationId\"\n            (change)=\"organizationChanged()\"\n          >\n            <option *ngFor=\"let o of ownershipOptions\" [ngValue]=\"o.value\">{{ o.name }}</option>\n          </select>\n        </div>\n      </div>\n    </div>\n    <div class=\"box\" *ngIf=\"(!editMode || cloneMode) && cipher.organizationId\">\n      <h2 class=\"box-header\">\n        {{ \"collections\" | i18n }}\n      </h2>\n      <div class=\"box-content\" *ngIf=\"!collections || !collections.length\">\n        <div class=\"box-content-row padded no-hover\">\n          {{ \"noCollectionsInList\" | i18n }}\n        </div>\n      </div>\n      <div class=\"box-content\" *ngIf=\"collections && collections.length\">\n        <div\n          class=\"box-content-row box-content-row-checkbox\"\n          *ngFor=\"let c of collections; let i = index\"\n          appBoxRow\n        >\n          <label for=\"collection_{{ i }}\">{{ c.name }}</label>\n          <input\n            id=\"collection_{{ i }}\"\n            type=\"checkbox\"\n            [(ngModel)]=\"$any(c).checked\"\n            name=\"Collection[{{ i }}].Checked\"\n          />\n        </div>\n      </div>\n    </div>\n    <div class=\"box list\" *ngIf=\"editMode && !cloneMode && !(!cipher.edit && editMode)\">\n      <div class=\"box-content single-line\">\n        <button\n          type=\"button\"\n          class=\"box-content-row\"\n          appStopClick\n          (click)=\"delete()\"\n          [appApiAction]=\"deletePromise\"\n          #deleteBtn\n        >\n          <div class=\"row-main text-danger\">\n            <div class=\"icon text-danger\" aria-hidden=\"true\">\n              <i class=\"bwi bwi-trash bwi-lg bwi-fw\" [hidden]=\"$any(deleteBtn).loading\"></i>\n              <i\n                class=\"bwi bwi-spinner bwi-spin bwi-lg bwi-fw\"\n                [hidden]=\"!$any(deleteBtn).loading\"\n              ></i>\n            </div>\n            <span>{{ \"deleteItem\" | i18n }}</span>\n          </div>\n        </button>\n      </div>\n    </div>\n  </main>\n</form>\n","import { Location } from \"@angular/common\";\nimport { Component } from \"@angular/core\";\nimport { ActivatedRoute, Router } from \"@angular/router\";\nimport { first } from \"rxjs/operators\";\n\nimport { AddEditComponent as BaseAddEditComponent } from \"@bitwarden/angular/vault/components/add-edit.component\";\nimport { AuditService } from \"@bitwarden/common/abstractions/audit.service\";\nimport { CollectionService } from \"@bitwarden/common/abstractions/collection.service\";\nimport { EventCollectionService } from \"@bitwarden/common/abstractions/event/event-collection.service\";\nimport { I18nService } from \"@bitwarden/common/abstractions/i18n.service\";\nimport { LogService } from \"@bitwarden/common/abstractions/log.service\";\nimport { MessagingService } from \"@bitwarden/common/abstractions/messaging.service\";\nimport { OrganizationService } from \"@bitwarden/common/abstractions/organization/organization.service.abstraction\";\nimport { PlatformUtilsService } from \"@bitwarden/common/abstractions/platformUtils.service\";\nimport { PolicyService } from \"@bitwarden/common/abstractions/policy/policy.service.abstraction\";\nimport { StateService } from \"@bitwarden/common/abstractions/state.service\";\nimport { CipherService } from \"@bitwarden/common/vault/abstractions/cipher.service\";\nimport { FolderService } from \"@bitwarden/common/vault/abstractions/folder/folder.service.abstraction\";\nimport { PasswordRepromptService } from \"@bitwarden/common/vault/abstractions/password-reprompt.service\";\nimport { CipherType } from \"@bitwarden/common/vault/enums/cipher-type\";\nimport { LoginUriView } from \"@bitwarden/common/vault/models/view/login-uri.view\";\n\nimport { BrowserApi } from \"../../../../browser/browserApi\";\nimport { PopupUtilsService } from \"../../../../popup/services/popup-utils.service\";\n\n@Component({\n  selector: \"app-vault-add-edit\",\n  templateUrl: \"add-edit.component.html\",\n})\n// eslint-disable-next-line rxjs-angular/prefer-takeuntil\nexport class AddEditComponent extends BaseAddEditComponent {\n  currentUris: string[];\n  showAttachments = true;\n  openAttachmentsInPopup: boolean;\n  showAutoFillOnPageLoadOptions: boolean;\n\n  constructor(\n    cipherService: CipherService,\n    folderService: FolderService,\n    i18nService: I18nService,\n    platformUtilsService: PlatformUtilsService,\n    auditService: AuditService,\n    stateService: StateService,\n    collectionService: CollectionService,\n    messagingService: MessagingService,\n    private route: ActivatedRoute,\n    private router: Router,\n    private location: Location,\n    eventCollectionService: EventCollectionService,\n    policyService: PolicyService,\n    private popupUtilsService: PopupUtilsService,\n    organizationService: OrganizationService,\n    passwordRepromptService: PasswordRepromptService,\n    logService: LogService\n  ) {\n    super(\n      cipherService,\n      folderService,\n      i18nService,\n      platformUtilsService,\n      auditService,\n      stateService,\n      collectionService,\n      messagingService,\n      eventCollectionService,\n      policyService,\n      logService,\n      passwordRepromptService,\n      organizationService\n    );\n  }\n\n  async ngOnInit() {\n    await super.ngOnInit();\n\n    // eslint-disable-next-line rxjs-angular/prefer-takeuntil, rxjs/no-async-subscribe\n    this.route.queryParams.pipe(first()).subscribe(async (params) => {\n      if (params.cipherId) {\n        this.cipherId = params.cipherId;\n      }\n      if (params.folderId) {\n        this.folderId = params.folderId;\n      }\n      if (params.collectionId) {\n        const collection = this.writeableCollections.find((c) => c.id === params.collectionId);\n        if (collection != null) {\n          this.collectionIds = [collection.id];\n          this.organizationId = collection.organizationId;\n        }\n      }\n      if (params.type) {\n        const type = parseInt(params.type, null);\n        this.type = type;\n      }\n      this.editMode = !params.cipherId;\n\n      if (params.cloneMode != null) {\n        this.cloneMode = params.cloneMode === \"true\";\n      }\n      if (params.selectedVault) {\n        this.organizationId = params.selectedVault;\n      }\n      await this.load();\n\n      if (!this.editMode || this.cloneMode) {\n        if (\n          !this.popupUtilsService.inPopout(window) &&\n          params.name &&\n          (this.cipher.name == null || this.cipher.name === \"\")\n        ) {\n          this.cipher.name = params.name;\n        }\n        if (\n          !this.popupUtilsService.inPopout(window) &&\n          params.uri &&\n          (this.cipher.login.uris[0].uri == null || this.cipher.login.uris[0].uri === \"\")\n        ) {\n          this.cipher.login.uris[0].uri = params.uri;\n        }\n      }\n\n      this.openAttachmentsInPopup = this.popupUtilsService.inPopup(window);\n    });\n\n    if (!this.editMode) {\n      const tabs = await BrowserApi.tabsQuery({ windowType: \"normal\" });\n      this.currentUris =\n        tabs == null\n          ? null\n          : tabs.filter((tab) => tab.url != null && tab.url !== \"\").map((tab) => tab.url);\n    }\n\n    window.setTimeout(() => {\n      if (!this.editMode) {\n        if (this.cipher.name != null && this.cipher.name !== \"\") {\n          document.getElementById(\"loginUsername\").focus();\n        } else {\n          document.getElementById(\"name\").focus();\n        }\n      }\n    }, 200);\n  }\n\n  async load() {\n    await super.load();\n    this.showAutoFillOnPageLoadOptions =\n      this.cipher.type === CipherType.Login &&\n      (await this.stateService.getEnableAutoFillOnPageLoad());\n  }\n\n  async submit(): Promise<boolean> {\n    if (await super.submit()) {\n      if (this.cloneMode) {\n        this.router.navigate([\"/tabs/vault\"]);\n      } else {\n        this.location.back();\n      }\n      return true;\n    }\n\n    return false;\n  }\n\n  attachments() {\n    super.attachments();\n\n    if (this.openAttachmentsInPopup) {\n      const destinationUrl = this.router\n        .createUrlTree([\"/attachments\"], { queryParams: { cipherId: this.cipher.id } })\n        .toString();\n      const currentBaseUrl = window.location.href.replace(this.router.url, \"\");\n      this.popupUtilsService.popOut(window, currentBaseUrl + destinationUrl);\n    } else {\n      this.router.navigate([\"/attachments\"], { queryParams: { cipherId: this.cipher.id } });\n    }\n  }\n\n  editCollections() {\n    super.editCollections();\n    if (this.cipher.organizationId != null) {\n      this.router.navigate([\"/collections\"], { queryParams: { cipherId: this.cipher.id } });\n    }\n  }\n\n  cancel() {\n    super.cancel();\n    this.location.back();\n  }\n\n  async generateUsername(): Promise<boolean> {\n    const confirmed = await super.generateUsername();\n    if (confirmed) {\n      await this.saveCipherState();\n      this.router.navigate([\"generator\"], { queryParams: { type: \"username\" } });\n    }\n    return confirmed;\n  }\n\n  async generatePassword(): Promise<boolean> {\n    const confirmed = await super.generatePassword();\n    if (confirmed) {\n      await this.saveCipherState();\n      this.router.navigate([\"generator\"], { queryParams: { type: \"password\" } });\n    }\n    return confirmed;\n  }\n\n  async delete(): Promise<boolean> {\n    const confirmed = await super.delete();\n    if (confirmed) {\n      this.router.navigate([\"/tabs/vault\"]);\n    }\n    return confirmed;\n  }\n\n  toggleUriInput(uri: LoginUriView) {\n    const u = uri as any;\n    u.showCurrentUris = !u.showCurrentUris;\n  }\n\n  allowOwnershipOptions(): boolean {\n    return (\n      (!this.editMode || this.cloneMode) &&\n      this.ownershipOptions &&\n      (this.ownershipOptions.length > 1 || !this.allowPersonal)\n    );\n  }\n\n  private saveCipherState() {\n    return this.stateService.setAddEditCipherInfo({\n      cipher: this.cipher,\n      collectionIds:\n        this.collections == null\n          ? []\n          : this.collections.filter((c) => (c as any).checked).map((c) => c.id),\n    });\n  }\n}\n","import { EncryptionType } from \"../../enums/encryptionType\";\nimport { IEncrypted } from \"../../interfaces/IEncrypted\";\nimport { Utils } from \"../../misc/utils\";\n\nconst ENC_TYPE_LENGTH = 1;\nconst IV_LENGTH = 16;\nconst MAC_LENGTH = 32;\nconst MIN_DATA_LENGTH = 1;\n\nexport class EncArrayBuffer implements IEncrypted {\n  readonly encryptionType: EncryptionType = null;\n  readonly dataBytes: ArrayBuffer = null;\n  readonly ivBytes: ArrayBuffer = null;\n  readonly macBytes: ArrayBuffer = null;\n\n  constructor(readonly buffer: ArrayBuffer) {\n    const encBytes = new Uint8Array(buffer);\n    const encType = encBytes[0];\n\n    switch (encType) {\n      case EncryptionType.AesCbc128_HmacSha256_B64:\n      case EncryptionType.AesCbc256_HmacSha256_B64: {\n        const minimumLength = ENC_TYPE_LENGTH + IV_LENGTH + MAC_LENGTH + MIN_DATA_LENGTH;\n        if (encBytes.length < minimumLength) {\n          this.throwDecryptionError();\n        }\n\n        this.ivBytes = encBytes.slice(ENC_TYPE_LENGTH, ENC_TYPE_LENGTH + IV_LENGTH).buffer;\n        this.macBytes = encBytes.slice(\n          ENC_TYPE_LENGTH + IV_LENGTH,\n          ENC_TYPE_LENGTH + IV_LENGTH + MAC_LENGTH\n        ).buffer;\n        this.dataBytes = encBytes.slice(ENC_TYPE_LENGTH + IV_LENGTH + MAC_LENGTH).buffer;\n        break;\n      }\n      case EncryptionType.AesCbc256_B64: {\n        const minimumLength = ENC_TYPE_LENGTH + IV_LENGTH + MIN_DATA_LENGTH;\n        if (encBytes.length < minimumLength) {\n          this.throwDecryptionError();\n        }\n\n        this.ivBytes = encBytes.slice(ENC_TYPE_LENGTH, ENC_TYPE_LENGTH + IV_LENGTH).buffer;\n        this.dataBytes = encBytes.slice(ENC_TYPE_LENGTH + IV_LENGTH).buffer;\n        break;\n      }\n      default:\n        this.throwDecryptionError();\n    }\n\n    this.encryptionType = encType;\n  }\n\n  private throwDecryptionError() {\n    throw new Error(\n      \"Error parsing encrypted ArrayBuffer: data is corrupted or has an invalid format.\"\n    );\n  }\n\n  static async fromResponse(response: {\n    arrayBuffer: () => Promise<ArrayBuffer>;\n  }): Promise<EncArrayBuffer> {\n    const buffer = await response.arrayBuffer();\n    if (buffer == null) {\n      throw new Error(\"Cannot create EncArrayBuffer from Response - Response is empty\");\n    }\n    return new EncArrayBuffer(buffer);\n  }\n\n  static fromB64(b64: string) {\n    const buffer = Utils.fromB64ToArray(b64).buffer;\n    return new EncArrayBuffer(buffer);\n  }\n}\n","export abstract class BaseResponse {\n  private response: any;\n\n  constructor(response: any) {\n    this.response = response;\n  }\n\n  protected getResponseProperty(\n    propertyName: string,\n    response: any = null,\n    exactName = false\n  ): any {\n    if (propertyName == null || propertyName === \"\") {\n      throw new Error(\"propertyName must not be null/empty.\");\n    }\n    if (response == null && this.response != null) {\n      response = this.response;\n    }\n    if (response == null) {\n      return null;\n    }\n    if (!exactName && response[propertyName] === undefined) {\n      let otherCasePropertyName: string = null;\n      if (propertyName.charAt(0) === propertyName.charAt(0).toUpperCase()) {\n        otherCasePropertyName = propertyName.charAt(0).toLowerCase();\n      } else {\n        otherCasePropertyName = propertyName.charAt(0).toUpperCase();\n      }\n      if (propertyName.length > 1) {\n        otherCasePropertyName += propertyName.slice(1);\n      }\n\n      propertyName = otherCasePropertyName;\n      if (response[propertyName] === undefined) {\n        propertyName = propertyName.toLowerCase();\n      }\n      if (response[propertyName] === undefined) {\n        propertyName = propertyName.toUpperCase();\n      }\n    }\n    return response[propertyName];\n  }\n}\n","import { Utils } from \"../../misc/utils\";\n\nimport { BaseResponse } from \"./base.response\";\n\nexport class ErrorResponse extends BaseResponse {\n  message: string;\n  validationErrors: { [key: string]: string[] };\n  statusCode: number;\n  captchaRequired: boolean;\n  captchaSiteKey: string;\n\n  constructor(response: any, status: number, identityResponse?: boolean) {\n    super(response);\n    let errorModel = null;\n    if (response != null) {\n      const responseErrorModel = this.getResponseProperty(\"ErrorModel\");\n      if (responseErrorModel && identityResponse) {\n        errorModel = responseErrorModel;\n      } else {\n        errorModel = response;\n      }\n    }\n\n    if (status === 429) {\n      this.message = \"Rate limit exceeded. Try again later.\";\n    } else if (errorModel) {\n      this.message = this.getResponseProperty(\"Message\", errorModel);\n      this.validationErrors = this.getResponseProperty(\"ValidationErrors\", errorModel);\n      this.captchaSiteKey = this.validationErrors?.HCaptcha_SiteKey?.[0];\n      this.captchaRequired = !Utils.isNullOrWhitespace(this.captchaSiteKey);\n    }\n    this.statusCode = status;\n  }\n\n  getSingleMessage(): string {\n    if (this.validationErrors == null) {\n      return this.message;\n    }\n    for (const key in this.validationErrors) {\n      // eslint-disable-next-line\n      if (!this.validationErrors.hasOwnProperty(key)) {\n        continue;\n      }\n      if (this.validationErrors[key].length) {\n        return this.validationErrors[key][0];\n      }\n    }\n    return this.message;\n  }\n\n  getAllMessages(): string[] {\n    const messages: string[] = [];\n    if (this.validationErrors == null) {\n      return messages;\n    }\n    for (const key in this.validationErrors) {\n      // eslint-disable-next-line\n      if (!this.validationErrors.hasOwnProperty(key)) {\n        continue;\n      }\n      this.validationErrors[key].forEach((item: string) => {\n        let prefix = \"\";\n        if (key.indexOf(\"[\") > -1 && key.indexOf(\"]\") > -1) {\n          const lastSep = key.lastIndexOf(\".\");\n          prefix = key.substr(0, lastSep > -1 ? lastSep : key.length) + \": \";\n        }\n        messages.push(prefix + item);\n      });\n    }\n    return messages;\n  }\n}\n","import { HashPurpose } from \"../enums/hashPurpose\";\nimport { KdfType } from \"../enums/kdfType\";\nimport { KeySuffixOptions } from \"../enums/keySuffixOptions\";\nimport { EncArrayBuffer } from \"../models/domain/enc-array-buffer\";\nimport { EncString } from \"../models/domain/enc-string\";\nimport { KdfConfig } from \"../models/domain/kdf-config\";\nimport { SymmetricCryptoKey } from \"../models/domain/symmetric-crypto-key\";\nimport { ProfileOrganizationResponse } from \"../models/response/profile-organization.response\";\nimport { ProfileProviderOrganizationResponse } from \"../models/response/profile-provider-organization.response\";\nimport { ProfileProviderResponse } from \"../models/response/profile-provider.response\";\n\nexport abstract class CryptoService {\n  setKey: (key: SymmetricCryptoKey) => Promise<any>;\n  setKeyHash: (keyHash: string) => Promise<void>;\n  setEncKey: (encKey: string) => Promise<void>;\n  setEncPrivateKey: (encPrivateKey: string) => Promise<void>;\n  setOrgKeys: (\n    orgs: ProfileOrganizationResponse[],\n    providerOrgs: ProfileProviderOrganizationResponse[]\n  ) => Promise<void>;\n  setProviderKeys: (orgs: ProfileProviderResponse[]) => Promise<void>;\n  getKey: (keySuffix?: KeySuffixOptions, userId?: string) => Promise<SymmetricCryptoKey>;\n  getKeyFromStorage: (keySuffix: KeySuffixOptions, userId?: string) => Promise<SymmetricCryptoKey>;\n  getKeyHash: () => Promise<string>;\n  compareAndUpdateKeyHash: (masterPassword: string, key: SymmetricCryptoKey) => Promise<boolean>;\n  getEncKey: (key?: SymmetricCryptoKey) => Promise<SymmetricCryptoKey>;\n  getPublicKey: () => Promise<ArrayBuffer>;\n  getPrivateKey: () => Promise<ArrayBuffer>;\n  getFingerprint: (userId: string, publicKey?: ArrayBuffer) => Promise<string[]>;\n  getOrgKeys: () => Promise<Map<string, SymmetricCryptoKey>>;\n  getOrgKey: (orgId: string) => Promise<SymmetricCryptoKey>;\n  getProviderKey: (providerId: string) => Promise<SymmetricCryptoKey>;\n  getKeyForUserEncryption: (key?: SymmetricCryptoKey) => Promise<SymmetricCryptoKey>;\n  hasKey: () => Promise<boolean>;\n  hasKeyInMemory: (userId?: string) => Promise<boolean>;\n  hasKeyStored: (keySuffix?: KeySuffixOptions, userId?: string) => Promise<boolean>;\n  hasEncKey: () => Promise<boolean>;\n  clearKey: (clearSecretStorage?: boolean, userId?: string) => Promise<any>;\n  clearKeyHash: () => Promise<any>;\n  clearEncKey: (memoryOnly?: boolean, userId?: string) => Promise<any>;\n  clearKeyPair: (memoryOnly?: boolean, userId?: string) => Promise<any>;\n  clearOrgKeys: (memoryOnly?: boolean, userId?: string) => Promise<any>;\n  clearProviderKeys: (memoryOnly?: boolean) => Promise<any>;\n  clearPinProtectedKey: () => Promise<any>;\n  clearKeys: (userId?: string) => Promise<any>;\n  toggleKey: () => Promise<any>;\n  makeKey: (\n    password: string,\n    salt: string,\n    kdf: KdfType,\n    kdfConfig: KdfConfig\n  ) => Promise<SymmetricCryptoKey>;\n  makeKeyFromPin: (\n    pin: string,\n    salt: string,\n    kdf: KdfType,\n    kdfConfig: KdfConfig,\n    protectedKeyCs?: EncString\n  ) => Promise<SymmetricCryptoKey>;\n  makeShareKey: () => Promise<[EncString, SymmetricCryptoKey]>;\n  makeKeyPair: (key?: SymmetricCryptoKey) => Promise<[string, EncString]>;\n  makePinKey: (\n    pin: string,\n    salt: string,\n    kdf: KdfType,\n    kdfConfig: KdfConfig\n  ) => Promise<SymmetricCryptoKey>;\n  makeSendKey: (keyMaterial: ArrayBuffer) => Promise<SymmetricCryptoKey>;\n  hashPassword: (\n    password: string,\n    key: SymmetricCryptoKey,\n    hashPurpose?: HashPurpose\n  ) => Promise<string>;\n  makeEncKey: (key: SymmetricCryptoKey) => Promise<[SymmetricCryptoKey, EncString]>;\n  remakeEncKey: (\n    key: SymmetricCryptoKey,\n    encKey?: SymmetricCryptoKey\n  ) => Promise<[SymmetricCryptoKey, EncString]>;\n  encrypt: (plainValue: string | ArrayBuffer, key?: SymmetricCryptoKey) => Promise<EncString>;\n  encryptToBytes: (plainValue: ArrayBuffer, key?: SymmetricCryptoKey) => Promise<EncArrayBuffer>;\n  rsaEncrypt: (data: ArrayBuffer, publicKey?: ArrayBuffer) => Promise<EncString>;\n  rsaDecrypt: (encValue: string, privateKeyValue?: ArrayBuffer) => Promise<ArrayBuffer>;\n  decryptToBytes: (encString: EncString, key?: SymmetricCryptoKey) => Promise<ArrayBuffer>;\n  decryptToUtf8: (encString: EncString, key?: SymmetricCryptoKey) => Promise<string>;\n  decryptFromBytes: (encBuffer: EncArrayBuffer, key: SymmetricCryptoKey) => Promise<ArrayBuffer>;\n  randomNumber: (min: number, max: number) => Promise<number>;\n  validateKey: (key: SymmetricCryptoKey) => Promise<boolean>;\n}\n","import { OrganizationConnectionType } from \"../enums/organizationConnectionType\";\nimport { SetKeyConnectorKeyRequest } from \"../models/request/account/set-key-connector-key.request\";\nimport { BitPayInvoiceRequest } from \"../models/request/bit-pay-invoice.request\";\nimport { CollectionBulkDeleteRequest } from \"../models/request/collection-bulk-delete.request\";\nimport { CollectionRequest } from \"../models/request/collection.request\";\nimport { DeleteRecoverRequest } from \"../models/request/delete-recover.request\";\nimport { DeviceVerificationRequest } from \"../models/request/device-verification.request\";\nimport { EmailTokenRequest } from \"../models/request/email-token.request\";\nimport { EmailRequest } from \"../models/request/email.request\";\nimport { EmergencyAccessAcceptRequest } from \"../models/request/emergency-access-accept.request\";\nimport { EmergencyAccessConfirmRequest } from \"../models/request/emergency-access-confirm.request\";\nimport { EmergencyAccessInviteRequest } from \"../models/request/emergency-access-invite.request\";\nimport { EmergencyAccessPasswordRequest } from \"../models/request/emergency-access-password.request\";\nimport { EmergencyAccessUpdateRequest } from \"../models/request/emergency-access-update.request\";\nimport { EventRequest } from \"../models/request/event.request\";\nimport { IapCheckRequest } from \"../models/request/iap-check.request\";\nimport { PasswordTokenRequest } from \"../models/request/identity-token/password-token.request\";\nimport { SsoTokenRequest } from \"../models/request/identity-token/sso-token.request\";\nimport { UserApiTokenRequest } from \"../models/request/identity-token/user-api-token.request\";\nimport { KdfRequest } from \"../models/request/kdf.request\";\nimport { KeyConnectorUserKeyRequest } from \"../models/request/key-connector-user-key.request\";\nimport { KeysRequest } from \"../models/request/keys.request\";\nimport { OrganizationConnectionRequest } from \"../models/request/organization-connection.request\";\nimport { OrganizationImportRequest } from \"../models/request/organization-import.request\";\nimport { OrganizationSponsorshipCreateRequest } from \"../models/request/organization/organization-sponsorship-create.request\";\nimport { OrganizationSponsorshipRedeemRequest } from \"../models/request/organization/organization-sponsorship-redeem.request\";\nimport { PasswordHintRequest } from \"../models/request/password-hint.request\";\nimport { PasswordRequest } from \"../models/request/password.request\";\nimport { PasswordlessAuthRequest } from \"../models/request/passwordless-auth.request\";\nimport { PasswordlessCreateAuthRequest } from \"../models/request/passwordless-create-auth.request\";\nimport { PaymentRequest } from \"../models/request/payment.request\";\nimport { PreloginRequest } from \"../models/request/prelogin.request\";\nimport { ProviderAddOrganizationRequest } from \"../models/request/provider/provider-add-organization.request\";\nimport { ProviderOrganizationCreateRequest } from \"../models/request/provider/provider-organization-create.request\";\nimport { ProviderSetupRequest } from \"../models/request/provider/provider-setup.request\";\nimport { ProviderUpdateRequest } from \"../models/request/provider/provider-update.request\";\nimport { ProviderUserAcceptRequest } from \"../models/request/provider/provider-user-accept.request\";\nimport { ProviderUserBulkConfirmRequest } from \"../models/request/provider/provider-user-bulk-confirm.request\";\nimport { ProviderUserBulkRequest } from \"../models/request/provider/provider-user-bulk.request\";\nimport { ProviderUserConfirmRequest } from \"../models/request/provider/provider-user-confirm.request\";\nimport { ProviderUserInviteRequest } from \"../models/request/provider/provider-user-invite.request\";\nimport { ProviderUserUpdateRequest } from \"../models/request/provider/provider-user-update.request\";\nimport { RegisterRequest } from \"../models/request/register.request\";\nimport { SecretVerificationRequest } from \"../models/request/secret-verification.request\";\nimport { SelectionReadOnlyRequest } from \"../models/request/selection-read-only.request\";\nimport { SendAccessRequest } from \"../models/request/send-access.request\";\nimport { SendRequest } from \"../models/request/send.request\";\nimport { SetPasswordRequest } from \"../models/request/set-password.request\";\nimport { StorageRequest } from \"../models/request/storage.request\";\nimport { TaxInfoUpdateRequest } from \"../models/request/tax-info-update.request\";\nimport { TwoFactorEmailRequest } from \"../models/request/two-factor-email.request\";\nimport { TwoFactorProviderRequest } from \"../models/request/two-factor-provider.request\";\nimport { TwoFactorRecoveryRequest } from \"../models/request/two-factor-recovery.request\";\nimport { UpdateAvatarRequest } from \"../models/request/update-avatar.request\";\nimport { UpdateDomainsRequest } from \"../models/request/update-domains.request\";\nimport { UpdateKeyRequest } from \"../models/request/update-key.request\";\nimport { UpdateProfileRequest } from \"../models/request/update-profile.request\";\nimport { UpdateTempPasswordRequest } from \"../models/request/update-temp-password.request\";\nimport { UpdateTwoFactorAuthenticatorRequest } from \"../models/request/update-two-factor-authenticator.request\";\nimport { UpdateTwoFactorDuoRequest } from \"../models/request/update-two-factor-duo.request\";\nimport { UpdateTwoFactorEmailRequest } from \"../models/request/update-two-factor-email.request\";\nimport { UpdateTwoFactorWebAuthnDeleteRequest } from \"../models/request/update-two-factor-web-authn-delete.request\";\nimport { UpdateTwoFactorWebAuthnRequest } from \"../models/request/update-two-factor-web-authn.request\";\nimport { UpdateTwoFactorYubioOtpRequest } from \"../models/request/update-two-factor-yubio-otp.request\";\nimport { VerifyDeleteRecoverRequest } from \"../models/request/verify-delete-recover.request\";\nimport { VerifyEmailRequest } from \"../models/request/verify-email.request\";\nimport { ApiKeyResponse } from \"../models/response/api-key.response\";\nimport { AuthRequestResponse } from \"../models/response/auth-request.response\";\nimport { RegisterResponse } from \"../models/response/authentication/register.response\";\nimport { BillingHistoryResponse } from \"../models/response/billing-history.response\";\nimport { BillingPaymentResponse } from \"../models/response/billing-payment.response\";\nimport { BreachAccountResponse } from \"../models/response/breach-account.response\";\nimport {\n  CollectionAccessDetailsResponse,\n  CollectionResponse,\n} from \"../models/response/collection.response\";\nimport { DeviceVerificationResponse } from \"../models/response/device-verification.response\";\nimport { DomainsResponse } from \"../models/response/domains.response\";\nimport {\n  EmergencyAccessGranteeDetailsResponse,\n  EmergencyAccessGrantorDetailsResponse,\n  EmergencyAccessTakeoverResponse,\n  EmergencyAccessViewResponse,\n} from \"../models/response/emergency-access.response\";\nimport { EventResponse } from \"../models/response/event.response\";\nimport { IdentityCaptchaResponse } from \"../models/response/identity-captcha.response\";\nimport { IdentityTokenResponse } from \"../models/response/identity-token.response\";\nimport { IdentityTwoFactorResponse } from \"../models/response/identity-two-factor.response\";\nimport { KeyConnectorUserKeyResponse } from \"../models/response/key-connector-user-key.response\";\nimport { ListResponse } from \"../models/response/list.response\";\nimport {\n  OrganizationConnectionConfigApis,\n  OrganizationConnectionResponse,\n} from \"../models/response/organization-connection.response\";\nimport { OrganizationExportResponse } from \"../models/response/organization-export.response\";\nimport { OrganizationSponsorshipSyncStatusResponse } from \"../models/response/organization-sponsorship-sync-status.response\";\nimport { PaymentResponse } from \"../models/response/payment.response\";\nimport { PlanResponse } from \"../models/response/plan.response\";\nimport { PolicyResponse } from \"../models/response/policy.response\";\nimport { PreloginResponse } from \"../models/response/prelogin.response\";\nimport { ProfileResponse } from \"../models/response/profile.response\";\nimport {\n  ProviderOrganizationOrganizationDetailsResponse,\n  ProviderOrganizationResponse,\n} from \"../models/response/provider/provider-organization.response\";\nimport { ProviderUserBulkPublicKeyResponse } from \"../models/response/provider/provider-user-bulk-public-key.response\";\nimport { ProviderUserBulkResponse } from \"../models/response/provider/provider-user-bulk.response\";\nimport {\n  ProviderUserResponse,\n  ProviderUserUserDetailsResponse,\n} from \"../models/response/provider/provider-user.response\";\nimport { ProviderResponse } from \"../models/response/provider/provider.response\";\nimport { SelectionReadOnlyResponse } from \"../models/response/selection-read-only.response\";\nimport { SendAccessResponse } from \"../models/response/send-access.response\";\nimport { SendFileDownloadDataResponse } from \"../models/response/send-file-download-data.response\";\nimport { SendFileUploadDataResponse } from \"../models/response/send-file-upload-data.response\";\nimport { SendResponse } from \"../models/response/send.response\";\nimport { SsoPreValidateResponse } from \"../models/response/sso-pre-validate.response\";\nimport { SubscriptionResponse } from \"../models/response/subscription.response\";\nimport { TaxInfoResponse } from \"../models/response/tax-info.response\";\nimport { TaxRateResponse } from \"../models/response/tax-rate.response\";\nimport { TwoFactorAuthenticatorResponse } from \"../models/response/two-factor-authenticator.response\";\nimport { TwoFactorDuoResponse } from \"../models/response/two-factor-duo.response\";\nimport { TwoFactorEmailResponse } from \"../models/response/two-factor-email.response\";\nimport { TwoFactorProviderResponse } from \"../models/response/two-factor-provider.response\";\nimport { TwoFactorRecoverResponse } from \"../models/response/two-factor-recover.response\";\nimport {\n  ChallengeResponse,\n  TwoFactorWebAuthnResponse,\n} from \"../models/response/two-factor-web-authn.response\";\nimport { TwoFactorYubiKeyResponse } from \"../models/response/two-factor-yubi-key.response\";\nimport { UserKeyResponse } from \"../models/response/user-key.response\";\nimport { SendAccessView } from \"../models/view/send-access.view\";\nimport { AttachmentRequest } from \"../vault/models/request/attachment.request\";\nimport { CipherBulkDeleteRequest } from \"../vault/models/request/cipher-bulk-delete.request\";\nimport { CipherBulkMoveRequest } from \"../vault/models/request/cipher-bulk-move.request\";\nimport { CipherBulkRestoreRequest } from \"../vault/models/request/cipher-bulk-restore.request\";\nimport { CipherBulkShareRequest } from \"../vault/models/request/cipher-bulk-share.request\";\nimport { CipherCollectionsRequest } from \"../vault/models/request/cipher-collections.request\";\nimport { CipherCreateRequest } from \"../vault/models/request/cipher-create.request\";\nimport { CipherPartialRequest } from \"../vault/models/request/cipher-partial.request\";\nimport { CipherShareRequest } from \"../vault/models/request/cipher-share.request\";\nimport { CipherRequest } from \"../vault/models/request/cipher.request\";\nimport { AttachmentUploadDataResponse } from \"../vault/models/response/attachment-upload-data.response\";\nimport { AttachmentResponse } from \"../vault/models/response/attachment.response\";\nimport { CipherResponse } from \"../vault/models/response/cipher.response\";\nimport { SyncResponse } from \"../vault/models/response/sync.response\";\n\n/**\n * @deprecated The `ApiService` class is deprecated and calls should be extracted into individual\n * api services. The `send` method is still allowed to be used within api services. For background\n * of this decision please read https://contributing.bitwarden.com/architecture/adr/refactor-api-service.\n */\nexport abstract class ApiService {\n  send: (\n    method: \"GET\" | \"POST\" | \"PUT\" | \"DELETE\",\n    path: string,\n    body: any,\n    authed: boolean,\n    hasResponse: boolean,\n    apiUrl?: string,\n    alterHeaders?: (headers: Headers) => void\n  ) => Promise<any>;\n\n  postIdentityToken: (\n    request: PasswordTokenRequest | SsoTokenRequest | UserApiTokenRequest\n  ) => Promise<IdentityTokenResponse | IdentityTwoFactorResponse | IdentityCaptchaResponse>;\n  refreshIdentityToken: () => Promise<any>;\n\n  getProfile: () => Promise<ProfileResponse>;\n  getUserSubscription: () => Promise<SubscriptionResponse>;\n  getTaxInfo: () => Promise<TaxInfoResponse>;\n  putProfile: (request: UpdateProfileRequest) => Promise<ProfileResponse>;\n  putAvatar: (request: UpdateAvatarRequest) => Promise<ProfileResponse>;\n  putTaxInfo: (request: TaxInfoUpdateRequest) => Promise<any>;\n  postPrelogin: (request: PreloginRequest) => Promise<PreloginResponse>;\n  postEmailToken: (request: EmailTokenRequest) => Promise<any>;\n  postEmail: (request: EmailRequest) => Promise<any>;\n  postPassword: (request: PasswordRequest) => Promise<any>;\n  setPassword: (request: SetPasswordRequest) => Promise<any>;\n  postSetKeyConnectorKey: (request: SetKeyConnectorKeyRequest) => Promise<any>;\n  postSecurityStamp: (request: SecretVerificationRequest) => Promise<any>;\n  getAccountRevisionDate: () => Promise<number>;\n  postPasswordHint: (request: PasswordHintRequest) => Promise<any>;\n  postRegister: (request: RegisterRequest) => Promise<RegisterResponse>;\n  postPremium: (data: FormData) => Promise<PaymentResponse>;\n  postIapCheck: (request: IapCheckRequest) => Promise<any>;\n  postReinstatePremium: () => Promise<any>;\n  postCancelPremium: () => Promise<any>;\n  postAccountStorage: (request: StorageRequest) => Promise<PaymentResponse>;\n  postAccountPayment: (request: PaymentRequest) => Promise<void>;\n  postAccountLicense: (data: FormData) => Promise<any>;\n  postAccountKey: (request: UpdateKeyRequest) => Promise<any>;\n  postAccountKeys: (request: KeysRequest) => Promise<any>;\n  postAccountVerifyEmail: () => Promise<any>;\n  postAccountVerifyEmailToken: (request: VerifyEmailRequest) => Promise<any>;\n  postAccountVerifyPassword: (request: SecretVerificationRequest) => Promise<any>;\n  postAccountRecoverDelete: (request: DeleteRecoverRequest) => Promise<any>;\n  postAccountRecoverDeleteToken: (request: VerifyDeleteRecoverRequest) => Promise<any>;\n  postAccountKdf: (request: KdfRequest) => Promise<any>;\n  postUserApiKey: (id: string, request: SecretVerificationRequest) => Promise<ApiKeyResponse>;\n  postUserRotateApiKey: (id: string, request: SecretVerificationRequest) => Promise<ApiKeyResponse>;\n  putUpdateTempPassword: (request: UpdateTempPasswordRequest) => Promise<any>;\n  postConvertToKeyConnector: () => Promise<void>;\n  //passwordless\n  postAuthRequest: (request: PasswordlessCreateAuthRequest) => Promise<AuthRequestResponse>;\n  getAuthResponse: (id: string, accessCode: string) => Promise<AuthRequestResponse>;\n  getAuthRequest: (id: string) => Promise<AuthRequestResponse>;\n  putAuthRequest: (id: string, request: PasswordlessAuthRequest) => Promise<AuthRequestResponse>;\n  getAuthRequests: () => Promise<ListResponse<AuthRequestResponse>>;\n  getLastAuthRequest: () => Promise<AuthRequestResponse>;\n\n  getUserBillingHistory: () => Promise<BillingHistoryResponse>;\n  getUserBillingPayment: () => Promise<BillingPaymentResponse>;\n\n  getSend: (id: string) => Promise<SendResponse>;\n  postSendAccess: (\n    id: string,\n    request: SendAccessRequest,\n    apiUrl?: string\n  ) => Promise<SendAccessResponse>;\n  getSends: () => Promise<ListResponse<SendResponse>>;\n  postSend: (request: SendRequest) => Promise<SendResponse>;\n  postFileTypeSend: (request: SendRequest) => Promise<SendFileUploadDataResponse>;\n  postSendFile: (sendId: string, fileId: string, data: FormData) => Promise<any>;\n  /**\n   * @deprecated Mar 25 2021: This method has been deprecated in favor of direct uploads.\n   * This method still exists for backward compatibility with old server versions.\n   */\n  postSendFileLegacy: (data: FormData) => Promise<SendResponse>;\n  putSend: (id: string, request: SendRequest) => Promise<SendResponse>;\n  putSendRemovePassword: (id: string) => Promise<SendResponse>;\n  deleteSend: (id: string) => Promise<any>;\n  getSendFileDownloadData: (\n    send: SendAccessView,\n    request: SendAccessRequest,\n    apiUrl?: string\n  ) => Promise<SendFileDownloadDataResponse>;\n  renewSendFileUploadUrl: (sendId: string, fileId: string) => Promise<SendFileUploadDataResponse>;\n\n  getCipher: (id: string) => Promise<CipherResponse>;\n  getFullCipherDetails: (id: string) => Promise<CipherResponse>;\n  getCipherAdmin: (id: string) => Promise<CipherResponse>;\n  getAttachmentData: (\n    cipherId: string,\n    attachmentId: string,\n    emergencyAccessId?: string\n  ) => Promise<AttachmentResponse>;\n  getCiphersOrganization: (organizationId: string) => Promise<ListResponse<CipherResponse>>;\n  postCipher: (request: CipherRequest) => Promise<CipherResponse>;\n  postCipherCreate: (request: CipherCreateRequest) => Promise<CipherResponse>;\n  postCipherAdmin: (request: CipherCreateRequest) => Promise<CipherResponse>;\n  putCipher: (id: string, request: CipherRequest) => Promise<CipherResponse>;\n  putPartialCipher: (id: string, request: CipherPartialRequest) => Promise<CipherResponse>;\n  putCipherAdmin: (id: string, request: CipherRequest) => Promise<CipherResponse>;\n  deleteCipher: (id: string) => Promise<any>;\n  deleteCipherAdmin: (id: string) => Promise<any>;\n  deleteManyCiphers: (request: CipherBulkDeleteRequest) => Promise<any>;\n  deleteManyCiphersAdmin: (request: CipherBulkDeleteRequest) => Promise<any>;\n  putMoveCiphers: (request: CipherBulkMoveRequest) => Promise<any>;\n  putShareCipher: (id: string, request: CipherShareRequest) => Promise<CipherResponse>;\n  putShareCiphers: (request: CipherBulkShareRequest) => Promise<any>;\n  putCipherCollections: (id: string, request: CipherCollectionsRequest) => Promise<any>;\n  putCipherCollectionsAdmin: (id: string, request: CipherCollectionsRequest) => Promise<any>;\n  postPurgeCiphers: (request: SecretVerificationRequest, organizationId?: string) => Promise<any>;\n  putDeleteCipher: (id: string) => Promise<any>;\n  putDeleteCipherAdmin: (id: string) => Promise<any>;\n  putDeleteManyCiphers: (request: CipherBulkDeleteRequest) => Promise<any>;\n  putDeleteManyCiphersAdmin: (request: CipherBulkDeleteRequest) => Promise<any>;\n  putRestoreCipher: (id: string) => Promise<CipherResponse>;\n  putRestoreCipherAdmin: (id: string) => Promise<CipherResponse>;\n  putRestoreManyCiphers: (\n    request: CipherBulkRestoreRequest\n  ) => Promise<ListResponse<CipherResponse>>;\n\n  /**\n   * @deprecated Mar 25 2021: This method has been deprecated in favor of direct uploads.\n   * This method still exists for backward compatibility with old server versions.\n   */\n  postCipherAttachmentLegacy: (id: string, data: FormData) => Promise<CipherResponse>;\n  /**\n   * @deprecated Mar 25 2021: This method has been deprecated in favor of direct uploads.\n   * This method still exists for backward compatibility with old server versions.\n   */\n  postCipherAttachmentAdminLegacy: (id: string, data: FormData) => Promise<CipherResponse>;\n  postCipherAttachment: (\n    id: string,\n    request: AttachmentRequest\n  ) => Promise<AttachmentUploadDataResponse>;\n  deleteCipherAttachment: (id: string, attachmentId: string) => Promise<any>;\n  deleteCipherAttachmentAdmin: (id: string, attachmentId: string) => Promise<any>;\n  postShareCipherAttachment: (\n    id: string,\n    attachmentId: string,\n    data: FormData,\n    organizationId: string\n  ) => Promise<any>;\n  renewAttachmentUploadUrl: (\n    id: string,\n    attachmentId: string\n  ) => Promise<AttachmentUploadDataResponse>;\n  postAttachmentFile: (id: string, attachmentId: string, data: FormData) => Promise<any>;\n\n  getUserCollections: () => Promise<ListResponse<CollectionResponse>>;\n  getCollections: (organizationId: string) => Promise<ListResponse<CollectionResponse>>;\n  getCollectionUsers: (organizationId: string, id: string) => Promise<SelectionReadOnlyResponse[]>;\n  getCollectionAccessDetails: (\n    organizationId: string,\n    id: string\n  ) => Promise<CollectionAccessDetailsResponse>;\n  getManyCollectionsWithAccessDetails: (\n    orgId: string\n  ) => Promise<ListResponse<CollectionAccessDetailsResponse>>;\n  postCollection: (\n    organizationId: string,\n    request: CollectionRequest\n  ) => Promise<CollectionResponse>;\n  putCollectionUsers: (\n    organizationId: string,\n    id: string,\n    request: SelectionReadOnlyRequest[]\n  ) => Promise<any>;\n  putCollection: (\n    organizationId: string,\n    id: string,\n    request: CollectionRequest\n  ) => Promise<CollectionResponse>;\n  deleteCollection: (organizationId: string, id: string) => Promise<any>;\n  deleteManyCollections: (request: CollectionBulkDeleteRequest) => Promise<any>;\n  deleteCollectionUser: (\n    organizationId: string,\n    id: string,\n    organizationUserId: string\n  ) => Promise<any>;\n\n  getGroupUsers: (organizationId: string, id: string) => Promise<string[]>;\n  putGroupUsers: (organizationId: string, id: string, request: string[]) => Promise<any>;\n  deleteGroupUser: (organizationId: string, id: string, organizationUserId: string) => Promise<any>;\n\n  getSync: () => Promise<SyncResponse>;\n  postPublicImportDirectory: (request: OrganizationImportRequest) => Promise<any>;\n\n  getSettingsDomains: () => Promise<DomainsResponse>;\n  putSettingsDomains: (request: UpdateDomainsRequest) => Promise<DomainsResponse>;\n\n  getTwoFactorProviders: () => Promise<ListResponse<TwoFactorProviderResponse>>;\n  getTwoFactorOrganizationProviders: (\n    organizationId: string\n  ) => Promise<ListResponse<TwoFactorProviderResponse>>;\n  getTwoFactorAuthenticator: (\n    request: SecretVerificationRequest\n  ) => Promise<TwoFactorAuthenticatorResponse>;\n  getTwoFactorEmail: (request: SecretVerificationRequest) => Promise<TwoFactorEmailResponse>;\n  getTwoFactorDuo: (request: SecretVerificationRequest) => Promise<TwoFactorDuoResponse>;\n  getTwoFactorOrganizationDuo: (\n    organizationId: string,\n    request: SecretVerificationRequest\n  ) => Promise<TwoFactorDuoResponse>;\n  getTwoFactorYubiKey: (request: SecretVerificationRequest) => Promise<TwoFactorYubiKeyResponse>;\n  getTwoFactorWebAuthn: (request: SecretVerificationRequest) => Promise<TwoFactorWebAuthnResponse>;\n  getTwoFactorWebAuthnChallenge: (request: SecretVerificationRequest) => Promise<ChallengeResponse>;\n  getTwoFactorRecover: (request: SecretVerificationRequest) => Promise<TwoFactorRecoverResponse>;\n  putTwoFactorAuthenticator: (\n    request: UpdateTwoFactorAuthenticatorRequest\n  ) => Promise<TwoFactorAuthenticatorResponse>;\n  putTwoFactorEmail: (request: UpdateTwoFactorEmailRequest) => Promise<TwoFactorEmailResponse>;\n  putTwoFactorDuo: (request: UpdateTwoFactorDuoRequest) => Promise<TwoFactorDuoResponse>;\n  putTwoFactorOrganizationDuo: (\n    organizationId: string,\n    request: UpdateTwoFactorDuoRequest\n  ) => Promise<TwoFactorDuoResponse>;\n  putTwoFactorYubiKey: (\n    request: UpdateTwoFactorYubioOtpRequest\n  ) => Promise<TwoFactorYubiKeyResponse>;\n  putTwoFactorWebAuthn: (\n    request: UpdateTwoFactorWebAuthnRequest\n  ) => Promise<TwoFactorWebAuthnResponse>;\n  deleteTwoFactorWebAuthn: (\n    request: UpdateTwoFactorWebAuthnDeleteRequest\n  ) => Promise<TwoFactorWebAuthnResponse>;\n  putTwoFactorDisable: (request: TwoFactorProviderRequest) => Promise<TwoFactorProviderResponse>;\n  putTwoFactorOrganizationDisable: (\n    organizationId: string,\n    request: TwoFactorProviderRequest\n  ) => Promise<TwoFactorProviderResponse>;\n  postTwoFactorRecover: (request: TwoFactorRecoveryRequest) => Promise<any>;\n  postTwoFactorEmailSetup: (request: TwoFactorEmailRequest) => Promise<any>;\n  postTwoFactorEmail: (request: TwoFactorEmailRequest) => Promise<any>;\n  getDeviceVerificationSettings: () => Promise<DeviceVerificationResponse>;\n  putDeviceVerificationSettings: (\n    request: DeviceVerificationRequest\n  ) => Promise<DeviceVerificationResponse>;\n  getKnownDevice: (email: string, deviceIdentifier: string) => Promise<boolean>;\n\n  getEmergencyAccessTrusted: () => Promise<ListResponse<EmergencyAccessGranteeDetailsResponse>>;\n  getEmergencyAccessGranted: () => Promise<ListResponse<EmergencyAccessGrantorDetailsResponse>>;\n  getEmergencyAccess: (id: string) => Promise<EmergencyAccessGranteeDetailsResponse>;\n  getEmergencyGrantorPolicies: (id: string) => Promise<ListResponse<PolicyResponse>>;\n  putEmergencyAccess: (id: string, request: EmergencyAccessUpdateRequest) => Promise<any>;\n  deleteEmergencyAccess: (id: string) => Promise<any>;\n  postEmergencyAccessInvite: (request: EmergencyAccessInviteRequest) => Promise<any>;\n  postEmergencyAccessReinvite: (id: string) => Promise<any>;\n  postEmergencyAccessAccept: (id: string, request: EmergencyAccessAcceptRequest) => Promise<any>;\n  postEmergencyAccessConfirm: (id: string, request: EmergencyAccessConfirmRequest) => Promise<any>;\n  postEmergencyAccessInitiate: (id: string) => Promise<any>;\n  postEmergencyAccessApprove: (id: string) => Promise<any>;\n  postEmergencyAccessReject: (id: string) => Promise<any>;\n  postEmergencyAccessTakeover: (id: string) => Promise<EmergencyAccessTakeoverResponse>;\n  postEmergencyAccessPassword: (\n    id: string,\n    request: EmergencyAccessPasswordRequest\n  ) => Promise<any>;\n  postEmergencyAccessView: (id: string) => Promise<EmergencyAccessViewResponse>;\n  getCloudCommunicationsEnabled: () => Promise<boolean>;\n  abstract getOrganizationConnection<TConfig extends OrganizationConnectionConfigApis>(\n    id: string,\n    type: OrganizationConnectionType,\n    configType: { new (response: any): TConfig }\n  ): Promise<OrganizationConnectionResponse<TConfig>>;\n  abstract createOrganizationConnection<TConfig extends OrganizationConnectionConfigApis>(\n    request: OrganizationConnectionRequest,\n    configType: { new (response: any): TConfig }\n  ): Promise<OrganizationConnectionResponse<TConfig>>;\n  abstract updateOrganizationConnection<TConfig extends OrganizationConnectionConfigApis>(\n    request: OrganizationConnectionRequest,\n    configType: { new (response: any): TConfig },\n    organizationConnectionId: string\n  ): Promise<OrganizationConnectionResponse<TConfig>>;\n  deleteOrganizationConnection: (id: string) => Promise<void>;\n  getPlans: () => Promise<ListResponse<PlanResponse>>;\n  getTaxRates: () => Promise<ListResponse<TaxRateResponse>>;\n\n  postProviderSetup: (id: string, request: ProviderSetupRequest) => Promise<ProviderResponse>;\n  getProvider: (id: string) => Promise<ProviderResponse>;\n  putProvider: (id: string, request: ProviderUpdateRequest) => Promise<ProviderResponse>;\n\n  getProviderUsers: (providerId: string) => Promise<ListResponse<ProviderUserUserDetailsResponse>>;\n  getProviderUser: (providerId: string, id: string) => Promise<ProviderUserResponse>;\n  postProviderUserInvite: (providerId: string, request: ProviderUserInviteRequest) => Promise<any>;\n  postProviderUserReinvite: (providerId: string, id: string) => Promise<any>;\n  postManyProviderUserReinvite: (\n    providerId: string,\n    request: ProviderUserBulkRequest\n  ) => Promise<ListResponse<ProviderUserBulkResponse>>;\n  postProviderUserAccept: (\n    providerId: string,\n    id: string,\n    request: ProviderUserAcceptRequest\n  ) => Promise<any>;\n  postProviderUserConfirm: (\n    providerId: string,\n    id: string,\n    request: ProviderUserConfirmRequest\n  ) => Promise<any>;\n  postProviderUsersPublicKey: (\n    providerId: string,\n    request: ProviderUserBulkRequest\n  ) => Promise<ListResponse<ProviderUserBulkPublicKeyResponse>>;\n  postProviderUserBulkConfirm: (\n    providerId: string,\n    request: ProviderUserBulkConfirmRequest\n  ) => Promise<ListResponse<ProviderUserBulkResponse>>;\n  putProviderUser: (\n    providerId: string,\n    id: string,\n    request: ProviderUserUpdateRequest\n  ) => Promise<any>;\n  deleteProviderUser: (organizationId: string, id: string) => Promise<any>;\n  deleteManyProviderUsers: (\n    providerId: string,\n    request: ProviderUserBulkRequest\n  ) => Promise<ListResponse<ProviderUserBulkResponse>>;\n  getProviderClients: (\n    providerId: string\n  ) => Promise<ListResponse<ProviderOrganizationOrganizationDetailsResponse>>;\n  postProviderAddOrganization: (\n    providerId: string,\n    request: ProviderAddOrganizationRequest\n  ) => Promise<any>;\n  postProviderCreateOrganization: (\n    providerId: string,\n    request: ProviderOrganizationCreateRequest\n  ) => Promise<ProviderOrganizationResponse>;\n  deleteProviderOrganization: (providerId: string, organizationId: string) => Promise<any>;\n\n  getEvents: (start: string, end: string, token: string) => Promise<ListResponse<EventResponse>>;\n  getEventsCipher: (\n    id: string,\n    start: string,\n    end: string,\n    token: string\n  ) => Promise<ListResponse<EventResponse>>;\n  getEventsOrganization: (\n    id: string,\n    start: string,\n    end: string,\n    token: string\n  ) => Promise<ListResponse<EventResponse>>;\n  getEventsOrganizationUser: (\n    organizationId: string,\n    id: string,\n    start: string,\n    end: string,\n    token: string\n  ) => Promise<ListResponse<EventResponse>>;\n  getEventsProvider: (\n    id: string,\n    start: string,\n    end: string,\n    token: string\n  ) => Promise<ListResponse<EventResponse>>;\n  getEventsProviderUser: (\n    providerId: string,\n    id: string,\n    start: string,\n    end: string,\n    token: string\n  ) => Promise<ListResponse<EventResponse>>;\n  postEventsCollect: (request: EventRequest[]) => Promise<any>;\n\n  deleteSsoUser: (organizationId: string) => Promise<void>;\n  getSsoUserIdentifier: () => Promise<string>;\n\n  getUserPublicKey: (id: string) => Promise<UserKeyResponse>;\n\n  getHibpBreach: (username: string) => Promise<BreachAccountResponse[]>;\n\n  postBitPayInvoice: (request: BitPayInvoiceRequest) => Promise<string>;\n  postSetupPayment: () => Promise<string>;\n\n  getActiveBearerToken: () => Promise<string>;\n  fetch: (request: Request) => Promise<Response>;\n  nativeFetch: (request: Request) => Promise<Response>;\n\n  preValidateSso: (identifier: string) => Promise<SsoPreValidateResponse>;\n\n  postCreateSponsorship: (\n    sponsorshipOrgId: string,\n    request: OrganizationSponsorshipCreateRequest\n  ) => Promise<void>;\n  getSponsorshipSyncStatus: (\n    sponsoredOrgId: string\n  ) => Promise<OrganizationSponsorshipSyncStatusResponse>;\n  deleteRevokeSponsorship: (sponsoringOrganizationId: string) => Promise<void>;\n  deleteRemoveSponsorship: (sponsoringOrgId: string) => Promise<void>;\n  postPreValidateSponsorshipToken: (sponsorshipToken: string) => Promise<boolean>;\n  postRedeemSponsorship: (\n    sponsorshipToken: string,\n    request: OrganizationSponsorshipRedeemRequest\n  ) => Promise<void>;\n  postResendSponsorshipOffer: (sponsoringOrgId: string) => Promise<void>;\n\n  getUserKeyFromKeyConnector: (keyConnectorUrl: string) => Promise<KeyConnectorUserKeyResponse>;\n  postUserKeyToKeyConnector: (\n    keyConnectorUrl: string,\n    request: KeyConnectorUserKeyRequest\n  ) => Promise<void>;\n  getKeyConnectorAlive: (keyConnectorUrl: string) => Promise<void>;\n  getOrganizationExport: (organizationId: string) => Promise<OrganizationExportResponse>;\n}\n","import { FileDownloadRequest } from \"./fileDownloadRequest\";\n\nexport abstract class FileDownloadService {\n  download: (request: FileDownloadRequest) => void;\n}\n","import { Directive, EventEmitter, Input, OnInit, Output } from \"@angular/core\";\n\nimport { ApiService } from \"@bitwarden/common/abstractions/api.service\";\nimport { CryptoService } from \"@bitwarden/common/abstractions/crypto.service\";\nimport { FileDownloadService } from \"@bitwarden/common/abstractions/fileDownload/fileDownload.service\";\nimport { I18nService } from \"@bitwarden/common/abstractions/i18n.service\";\nimport { LogService } from \"@bitwarden/common/abstractions/log.service\";\nimport { PlatformUtilsService } from \"@bitwarden/common/abstractions/platformUtils.service\";\nimport { StateService } from \"@bitwarden/common/abstractions/state.service\";\nimport { EncArrayBuffer } from \"@bitwarden/common/models/domain/enc-array-buffer\";\nimport { ErrorResponse } from \"@bitwarden/common/models/response/error.response\";\nimport { CipherService } from \"@bitwarden/common/vault/abstractions/cipher.service\";\nimport { Cipher } from \"@bitwarden/common/vault/models/domain/cipher\";\nimport { AttachmentView } from \"@bitwarden/common/vault/models/view/attachment.view\";\nimport { CipherView } from \"@bitwarden/common/vault/models/view/cipher.view\";\n\n@Directive()\nexport class AttachmentsComponent implements OnInit {\n  @Input() cipherId: string;\n  @Output() onUploadedAttachment = new EventEmitter();\n  @Output() onDeletedAttachment = new EventEmitter();\n  @Output() onReuploadedAttachment = new EventEmitter();\n\n  cipher: CipherView;\n  cipherDomain: Cipher;\n  hasUpdatedKey: boolean;\n  canAccessAttachments: boolean;\n  formPromise: Promise<any>;\n  deletePromises: { [id: string]: Promise<any> } = {};\n  reuploadPromises: { [id: string]: Promise<any> } = {};\n  emergencyAccessId?: string = null;\n  protected componentName = \"\";\n\n  constructor(\n    protected cipherService: CipherService,\n    protected i18nService: I18nService,\n    protected cryptoService: CryptoService,\n    protected platformUtilsService: PlatformUtilsService,\n    protected apiService: ApiService,\n    protected win: Window,\n    protected logService: LogService,\n    protected stateService: StateService,\n    protected fileDownloadService: FileDownloadService\n  ) {}\n\n  async ngOnInit() {\n    await this.init();\n  }\n\n  async submit() {\n    if (!this.hasUpdatedKey) {\n      this.platformUtilsService.showToast(\n        \"error\",\n        this.i18nService.t(\"errorOccurred\"),\n        this.i18nService.t(\"updateKey\")\n      );\n      return;\n    }\n\n    const fileEl = document.getElementById(\"file\") as HTMLInputElement;\n    const files = fileEl.files;\n    if (files == null || files.length === 0) {\n      this.platformUtilsService.showToast(\n        \"error\",\n        this.i18nService.t(\"errorOccurred\"),\n        this.i18nService.t(\"selectFile\")\n      );\n      return;\n    }\n\n    if (files[0].size > 524288000) {\n      // 500 MB\n      this.platformUtilsService.showToast(\n        \"error\",\n        this.i18nService.t(\"errorOccurred\"),\n        this.i18nService.t(\"maxFileSize\")\n      );\n      return;\n    }\n\n    try {\n      this.formPromise = this.saveCipherAttachment(files[0]);\n      this.cipherDomain = await this.formPromise;\n      this.cipher = await this.cipherDomain.decrypt();\n      this.platformUtilsService.showToast(\"success\", null, this.i18nService.t(\"attachmentSaved\"));\n      this.onUploadedAttachment.emit();\n    } catch (e) {\n      this.logService.error(e);\n    }\n\n    // reset file input\n    // ref: https://stackoverflow.com/a/20552042\n    fileEl.type = \"\";\n    fileEl.type = \"file\";\n    fileEl.value = \"\";\n  }\n\n  async delete(attachment: AttachmentView) {\n    if (this.deletePromises[attachment.id] != null) {\n      return;\n    }\n\n    const confirmed = await this.platformUtilsService.showDialog(\n      this.i18nService.t(\"deleteAttachmentConfirmation\"),\n      this.i18nService.t(\"deleteAttachment\"),\n      this.i18nService.t(\"yes\"),\n      this.i18nService.t(\"no\"),\n      \"warning\",\n      false,\n      this.componentName != \"\" ? this.componentName + \" .modal-content\" : null\n    );\n    if (!confirmed) {\n      return;\n    }\n\n    try {\n      this.deletePromises[attachment.id] = this.deleteCipherAttachment(attachment.id);\n      await this.deletePromises[attachment.id];\n      this.platformUtilsService.showToast(\"success\", null, this.i18nService.t(\"deletedAttachment\"));\n      const i = this.cipher.attachments.indexOf(attachment);\n      if (i > -1) {\n        this.cipher.attachments.splice(i, 1);\n      }\n    } catch (e) {\n      this.logService.error(e);\n    }\n\n    this.deletePromises[attachment.id] = null;\n    this.onDeletedAttachment.emit();\n  }\n\n  async download(attachment: AttachmentView) {\n    const a = attachment as any;\n    if (a.downloading) {\n      return;\n    }\n\n    if (!this.canAccessAttachments) {\n      this.platformUtilsService.showToast(\n        \"error\",\n        this.i18nService.t(\"premiumRequired\"),\n        this.i18nService.t(\"premiumRequiredDesc\")\n      );\n      return;\n    }\n\n    let url: string;\n    try {\n      const attachmentDownloadResponse = await this.apiService.getAttachmentData(\n        this.cipher.id,\n        attachment.id,\n        this.emergencyAccessId\n      );\n      url = attachmentDownloadResponse.url;\n    } catch (e) {\n      if (e instanceof ErrorResponse && (e as ErrorResponse).statusCode === 404) {\n        url = attachment.url;\n      } else if (e instanceof ErrorResponse) {\n        throw new Error((e as ErrorResponse).getSingleMessage());\n      } else {\n        throw e;\n      }\n    }\n\n    a.downloading = true;\n    const response = await fetch(new Request(url, { cache: \"no-store\" }));\n    if (response.status !== 200) {\n      this.platformUtilsService.showToast(\"error\", null, this.i18nService.t(\"errorOccurred\"));\n      a.downloading = false;\n      return;\n    }\n\n    try {\n      const encBuf = await EncArrayBuffer.fromResponse(response);\n      const key =\n        attachment.key != null\n          ? attachment.key\n          : await this.cryptoService.getOrgKey(this.cipher.organizationId);\n      const decBuf = await this.cryptoService.decryptFromBytes(encBuf, key);\n      this.fileDownloadService.download({\n        fileName: attachment.fileName,\n        blobData: decBuf,\n      });\n    } catch (e) {\n      this.platformUtilsService.showToast(\"error\", null, this.i18nService.t(\"errorOccurred\"));\n    }\n\n    a.downloading = false;\n  }\n\n  protected async init() {\n    this.cipherDomain = await this.loadCipher();\n    this.cipher = await this.cipherDomain.decrypt();\n\n    this.hasUpdatedKey = await this.cryptoService.hasEncKey();\n    const canAccessPremium = await this.stateService.getCanAccessPremium();\n    this.canAccessAttachments = canAccessPremium || this.cipher.organizationId != null;\n\n    if (!this.canAccessAttachments) {\n      const confirmed = await this.platformUtilsService.showDialog(\n        this.i18nService.t(\"premiumRequiredDesc\"),\n        this.i18nService.t(\"premiumRequired\"),\n        this.i18nService.t(\"learnMore\"),\n        this.i18nService.t(\"cancel\")\n      );\n      if (confirmed) {\n        this.platformUtilsService.launchUri(\"https://vault.bitwarden.com/#/?premium=purchase\");\n      }\n    } else if (!this.hasUpdatedKey) {\n      const confirmed = await this.platformUtilsService.showDialog(\n        this.i18nService.t(\"updateKey\"),\n        this.i18nService.t(\"featureUnavailable\"),\n        this.i18nService.t(\"learnMore\"),\n        this.i18nService.t(\"cancel\"),\n        \"warning\"\n      );\n      if (confirmed) {\n        this.platformUtilsService.launchUri(\n          \"https://bitwarden.com/help/account-encryption-key/#rotate-your-encryption-key\"\n        );\n      }\n    }\n  }\n\n  protected async reuploadCipherAttachment(attachment: AttachmentView, admin: boolean) {\n    const a = attachment as any;\n    if (attachment.key != null || a.downloading || this.reuploadPromises[attachment.id] != null) {\n      return;\n    }\n\n    try {\n      this.reuploadPromises[attachment.id] = Promise.resolve().then(async () => {\n        // 1. Download\n        a.downloading = true;\n        const response = await fetch(new Request(attachment.url, { cache: \"no-store\" }));\n        if (response.status !== 200) {\n          this.platformUtilsService.showToast(\"error\", null, this.i18nService.t(\"errorOccurred\"));\n          a.downloading = false;\n          return;\n        }\n\n        try {\n          // 2. Resave\n          const encBuf = await EncArrayBuffer.fromResponse(response);\n          const key =\n            attachment.key != null\n              ? attachment.key\n              : await this.cryptoService.getOrgKey(this.cipher.organizationId);\n          const decBuf = await this.cryptoService.decryptFromBytes(encBuf, key);\n          this.cipherDomain = await this.cipherService.saveAttachmentRawWithServer(\n            this.cipherDomain,\n            attachment.fileName,\n            decBuf,\n            admin\n          );\n          this.cipher = await this.cipherDomain.decrypt();\n\n          // 3. Delete old\n          this.deletePromises[attachment.id] = this.deleteCipherAttachment(attachment.id);\n          await this.deletePromises[attachment.id];\n          const foundAttachment = this.cipher.attachments.filter((a2) => a2.id === attachment.id);\n          if (foundAttachment.length > 0) {\n            const i = this.cipher.attachments.indexOf(foundAttachment[0]);\n            if (i > -1) {\n              this.cipher.attachments.splice(i, 1);\n            }\n          }\n\n          this.platformUtilsService.showToast(\n            \"success\",\n            null,\n            this.i18nService.t(\"attachmentSaved\")\n          );\n          this.onReuploadedAttachment.emit();\n        } catch (e) {\n          this.platformUtilsService.showToast(\"error\", null, this.i18nService.t(\"errorOccurred\"));\n        }\n\n        a.downloading = false;\n      });\n      await this.reuploadPromises[attachment.id];\n    } catch (e) {\n      this.logService.error(e);\n    }\n  }\n\n  protected loadCipher() {\n    return this.cipherService.get(this.cipherId);\n  }\n\n  protected saveCipherAttachment(file: File) {\n    return this.cipherService.saveAttachmentWithServer(this.cipherDomain, file);\n  }\n\n  protected deleteCipherAttachment(attachmentId: string) {\n    return this.cipherService.deleteAttachmentWithServer(this.cipher.id, attachmentId);\n  }\n\n  protected async reupload(attachment: AttachmentView) {\n    // TODO: This should be removed but is needed since we re-use the same template\n  }\n}\n","<form #form (ngSubmit)=\"submit()\" [appApiAction]=\"formPromise\">\n  <header>\n    <div class=\"left\">\n      <button type=\"button\" (click)=\"close()\" *ngIf=\"openedAttachmentsInPopup\">\n        {{ \"close\" | i18n }}\n      </button>\n      <button type=\"button\" (click)=\"back()\" *ngIf=\"!openedAttachmentsInPopup\">\n        <span class=\"header-icon\"><i class=\"bwi bwi-angle-left\" aria-hidden=\"true\"></i></span>\n        <span>{{ \"back\" | i18n }}</span>\n      </button>\n    </div>\n    <h1 class=\"center\">\n      <span class=\"title\">{{ \"attachments\" | i18n }}</span>\n    </h1>\n    <div class=\"right\">\n      <button type=\"submit\" [disabled]=\"form.loading\">\n        <span [hidden]=\"form.loading\">{{ \"save\" | i18n }}</span>\n        <i class=\"bwi bwi-spinner bwi-lg bwi-spin\" [hidden]=\"!form.loading\" aria-hidden=\"true\"></i>\n      </button>\n    </div>\n  </header>\n  <main tabindex=\"-1\">\n    <div class=\"box\" *ngIf=\"cipher && cipher.hasAttachments\">\n      <div class=\"box-content no-hover single-line\">\n        <div class=\"box-content-row box-content-row-flex\" *ngFor=\"let a of cipher.attachments\">\n          <div class=\"row-main\">\n            {{ a.fileName }}\n          </div>\n          <small class=\"row-sub-label\">{{ a.sizeName }}</small>\n          <div class=\"action-buttons no-pad\">\n            <button\n              type=\"button\"\n              class=\"row-btn btn\"\n              type=\"button\"\n              appStopClick\n              appA11yTitle=\"{{ 'deleteAttachment' | i18n }}\"\n              (click)=\"delete(a)\"\n              #deleteBtn\n              [appApiAction]=\"deletePromises[a.id]\"\n              [disabled]=\"$any(deleteBtn).loading\"\n            >\n              <i\n                class=\"bwi bwi-trash bwi-lg bwi-fw\"\n                [hidden]=\"$any(deleteBtn).loading\"\n                aria-hidden=\"true\"\n              ></i>\n              <i\n                class=\"bwi bwi-spinner bwi-spin bwi-lg bwi-fw\"\n                [hidden]=\"!$any(deleteBtn).loading\"\n                aria-hidden=\"true\"\n              ></i>\n            </button>\n          </div>\n        </div>\n      </div>\n    </div>\n    <div class=\"box\">\n      <h2 class=\"box-header\">\n        {{ \"newAttachment\" | i18n }}\n      </h2>\n      <div class=\"box-content no-hover\">\n        <div class=\"box-content-row\">\n          <label for=\"file\">{{ \"file\" | i18n }}</label>\n          <input type=\"file\" id=\"file\" name=\"file\" aria-describedby=\"fileHelp\" required />\n        </div>\n      </div>\n      <div id=\"fileHelp\" class=\"box-footer\">\n        {{ \"maxFileSize\" | i18n }}\n      </div>\n    </div>\n  </main>\n</form>\n","import { Location } from \"@angular/common\";\nimport { Component } from \"@angular/core\";\nimport { ActivatedRoute } from \"@angular/router\";\nimport { first } from \"rxjs/operators\";\n\nimport { AttachmentsComponent as BaseAttachmentsComponent } from \"@bitwarden/angular/vault/components/attachments.component\";\nimport { ApiService } from \"@bitwarden/common/abstractions/api.service\";\nimport { CryptoService } from \"@bitwarden/common/abstractions/crypto.service\";\nimport { FileDownloadService } from \"@bitwarden/common/abstractions/fileDownload/fileDownload.service\";\nimport { I18nService } from \"@bitwarden/common/abstractions/i18n.service\";\nimport { LogService } from \"@bitwarden/common/abstractions/log.service\";\nimport { PlatformUtilsService } from \"@bitwarden/common/abstractions/platformUtils.service\";\nimport { StateService } from \"@bitwarden/common/abstractions/state.service\";\nimport { CipherService } from \"@bitwarden/common/vault/abstractions/cipher.service\";\n\n@Component({\n  selector: \"app-vault-attachments\",\n  templateUrl: \"attachments.component.html\",\n})\n// eslint-disable-next-line rxjs-angular/prefer-takeuntil\nexport class AttachmentsComponent extends BaseAttachmentsComponent {\n  openedAttachmentsInPopup: boolean;\n\n  constructor(\n    cipherService: CipherService,\n    i18nService: I18nService,\n    cryptoService: CryptoService,\n    platformUtilsService: PlatformUtilsService,\n    apiService: ApiService,\n    private location: Location,\n    private route: ActivatedRoute,\n    stateService: StateService,\n    logService: LogService,\n    fileDownloadService: FileDownloadService\n  ) {\n    super(\n      cipherService,\n      i18nService,\n      cryptoService,\n      platformUtilsService,\n      apiService,\n      window,\n      logService,\n      stateService,\n      fileDownloadService\n    );\n  }\n\n  async ngOnInit() {\n    // eslint-disable-next-line rxjs-angular/prefer-takeuntil, rxjs/no-async-subscribe\n    this.route.queryParams.pipe(first()).subscribe(async (params) => {\n      this.cipherId = params.cipherId;\n      await this.init();\n    });\n\n    this.openedAttachmentsInPopup = history.length === 1;\n  }\n\n  back() {\n    this.location.back();\n  }\n\n  close() {\n    window.close();\n  }\n}\n","import { CipherType } from \"@bitwarden/common/vault/enums/cipher-type\";\nimport { CipherView } from \"@bitwarden/common/vault/models/view/cipher.view\";\n\nimport { CipherStatus } from \"./cipher-status.model\";\n\nexport type VaultFilterFunction = (cipher: CipherView) => boolean;\n\nexport class VaultFilter {\n  cipherType?: CipherType;\n  selectedCollection = false; // This is needed because of how the \"Unassigned\" collection works. It has a null id.\n  selectedCollectionId?: string;\n  status?: CipherStatus;\n  selectedFolder = false; // This is needed because of how the \"No Folder\" folder works. It has a null id.\n  selectedFolderId?: string;\n  selectedOrganizationId?: string;\n  myVaultOnly = false;\n  refreshCollectionsAndFolders = false;\n\n  constructor(init?: Partial<VaultFilter>) {\n    Object.assign(this, init);\n  }\n\n  resetFilter() {\n    this.cipherType = null;\n    this.status = null;\n    this.selectedCollection = false;\n    this.selectedCollectionId = null;\n    this.selectedFolder = false;\n    this.selectedFolderId = null;\n  }\n\n  resetOrganization() {\n    this.myVaultOnly = false;\n    this.selectedOrganizationId = null;\n    this.resetFilter();\n  }\n\n  buildFilter(): VaultFilterFunction {\n    return (cipher) => {\n      let cipherPassesFilter = true;\n      if (this.status === \"favorites\" && cipherPassesFilter) {\n        cipherPassesFilter = cipher.favorite;\n      }\n      if (this.status === \"trash\" && cipherPassesFilter) {\n        cipherPassesFilter = cipher.isDeleted;\n      }\n      if (this.cipherType != null && cipherPassesFilter) {\n        cipherPassesFilter = cipher.type === this.cipherType;\n      }\n      if (this.selectedFolder && this.selectedFolderId == null && cipherPassesFilter) {\n        cipherPassesFilter = cipher.folderId == null;\n      }\n      if (this.selectedFolder && this.selectedFolderId != null && cipherPassesFilter) {\n        cipherPassesFilter = cipher.folderId === this.selectedFolderId;\n      }\n      if (this.selectedCollection && this.selectedCollectionId == null && cipherPassesFilter) {\n        cipherPassesFilter =\n          cipher.organizationId != null &&\n          (cipher.collectionIds == null || cipher.collectionIds.length === 0);\n      }\n      if (this.selectedCollection && this.selectedCollectionId != null && cipherPassesFilter) {\n        cipherPassesFilter =\n          cipher.collectionIds != null && cipher.collectionIds.includes(this.selectedCollectionId);\n      }\n      if (this.selectedOrganizationId != null && cipherPassesFilter) {\n        cipherPassesFilter = cipher.organizationId === this.selectedOrganizationId;\n      }\n      if (this.myVaultOnly && cipherPassesFilter) {\n        cipherPassesFilter = cipher.organizationId === null;\n      }\n      return cipherPassesFilter;\n    };\n  }\n}\n","export class TreeNode<T extends ITreeNodeObject> {\n  node: T;\n  parent: TreeNode<T>;\n  children: TreeNode<T>[] = [];\n\n  constructor(node: T, parent: TreeNode<T>, name?: string, id?: string) {\n    this.parent = parent;\n    this.node = node;\n    if (name) {\n      this.node.name = name;\n    }\n    if (id) {\n      this.node.id = id;\n    }\n  }\n}\n\nexport interface ITreeNodeObject {\n  id: string;\n  name: string;\n}\n","import { ITreeNodeObject, TreeNode } from \"../models/domain/tree-node\";\n\nexport class ServiceUtils {\n  /**\n   * Recursively adds a node to nodeTree\n   * @param {TreeNode<ITreeNodeObject>[]} nodeTree - An array of TreeNodes that the node will be added to\n   * @param {number} partIndex - Index of the `parts` array that is being processed\n   * @param {string[]} parts - Array of strings that represent the path to the `obj` node\n   * @param {ITreeNodeObject} obj - The node to be added to the tree\n   * @param {ITreeNodeObject} parent - The parent node of the `obj` node\n   * @param {string} delimiter - The delimiter used to split the path string, will be used to combine the path for missing nodes\n   */\n  static nestedTraverse(\n    nodeTree: TreeNode<ITreeNodeObject>[],\n    partIndex: number,\n    parts: string[],\n    obj: ITreeNodeObject,\n    parent: TreeNode<ITreeNodeObject> | undefined,\n    delimiter: string\n  ) {\n    if (parts.length <= partIndex) {\n      return;\n    }\n\n    const end: boolean = partIndex === parts.length - 1;\n    const partName: string = parts[partIndex];\n\n    for (let i = 0; i < nodeTree.length; i++) {\n      if (nodeTree[i].node.name !== partName) {\n        continue;\n      }\n      if (end && nodeTree[i].node.id !== obj.id) {\n        // Another node exists with the same name as the node being added\n        nodeTree.push(new TreeNode(obj, parent, partName));\n        return;\n      }\n      // Move down the tree to the next level\n      ServiceUtils.nestedTraverse(\n        nodeTree[i].children,\n        partIndex + 1,\n        parts,\n        obj,\n        nodeTree[i],\n        delimiter\n      );\n      return;\n    }\n\n    // If there's no node here with the same name...\n    if (nodeTree.filter((n) => n.node.name === partName).length === 0) {\n      // And we're at the end of the path given, add the node\n      if (end) {\n        nodeTree.push(new TreeNode(obj, parent, partName));\n        return;\n      }\n      // And we're not at the end of the path, combine the current name with the next name\n      // 1, *1.2, 1.2.1 becomes\n      // 1, *1.2/1.2.1\n      const newPartName = partName + delimiter + parts[partIndex + 1];\n      ServiceUtils.nestedTraverse(\n        nodeTree,\n        0,\n        [newPartName, ...parts.slice(partIndex + 2)],\n        obj,\n        parent,\n        delimiter\n      );\n    }\n  }\n\n  /**\n   * Searches a tree for a node with a matching `id`\n   * @param {TreeNode<ITreeNodeObject>} nodeTree - A single TreeNode branch that will be searched\n   * @param {string} id - The id of the node to be found\n   * @returns {TreeNode<ITreeNodeObject>} The node with a matching `id`\n   */\n  static getTreeNodeObject(\n    nodeTree: TreeNode<ITreeNodeObject>,\n    id: string\n  ): TreeNode<ITreeNodeObject> {\n    if (nodeTree.node.id === id) {\n      return nodeTree;\n    }\n    for (let i = 0; i < nodeTree.children.length; i++) {\n      if (nodeTree.children[i].children != null) {\n        const node = ServiceUtils.getTreeNodeObject(nodeTree.children[i], id);\n        if (node !== null) {\n          return node;\n        }\n      }\n    }\n    return null;\n  }\n\n  /**\n   * Searches an array of tree nodes for a node with a matching `id`\n   * @param {TreeNode<ITreeNodeObject>} nodeTree - An array of TreeNode branches that will be searched\n   * @param {string} id - The id of the node to be found\n   * @returns {TreeNode<ITreeNodeObject>} The node with a matching `id`\n   */\n  static getTreeNodeObjectFromList(\n    nodeTree: TreeNode<ITreeNodeObject>[],\n    id: string\n  ): TreeNode<ITreeNodeObject> {\n    for (let i = 0; i < nodeTree.length; i++) {\n      if (nodeTree[i].node.id === id) {\n        return nodeTree[i];\n      } else if (nodeTree[i].children != null) {\n        const node = ServiceUtils.getTreeNodeObjectFromList(nodeTree[i].children, id);\n        if (node !== null) {\n          return node;\n        }\n      }\n    }\n    return null;\n  }\n}\n","import { Jsonify } from \"type-fest\";\n\nimport { ITreeNodeObject } from \"../../../models/domain/tree-node\";\nimport { View } from \"../../../models/view/view\";\nimport { Folder } from \"../domain/folder\";\n\nexport class FolderView implements View, ITreeNodeObject {\n  id: string = null;\n  name: string = null;\n  revisionDate: Date = null;\n\n  constructor(f?: Folder) {\n    if (!f) {\n      return;\n    }\n\n    this.id = f.id;\n    this.revisionDate = f.revisionDate;\n  }\n\n  static fromJSON(obj: Jsonify<FolderView>) {\n    const revisionDate = obj.revisionDate == null ? null : new Date(obj.revisionDate);\n    return Object.assign(new FolderView(), obj, { revisionDate });\n  }\n}\n","import { ITreeNodeObject, TreeNode } from \"@bitwarden/common/models/domain/tree-node\";\n\nexport class DynamicTreeNode<T extends ITreeNodeObject> {\n  fullList: T[];\n  nestedList: TreeNode<T>[];\n\n  hasId(id: string): boolean {\n    return this.fullList != null && this.fullList.filter((i: T) => i.id === id).length > 0;\n  }\n\n  constructor(init?: Partial<DynamicTreeNode<T>>) {\n    Object.assign(this, init);\n  }\n}\n","import { Injectable } from \"@angular/core\";\nimport { firstValueFrom, from, mergeMap, Observable } from \"rxjs\";\n\nimport { CollectionService } from \"@bitwarden/common/abstractions/collection.service\";\nimport {\n  isNotProviderUser,\n  OrganizationService,\n} from \"@bitwarden/common/abstractions/organization/organization.service.abstraction\";\nimport { PolicyService } from \"@bitwarden/common/abstractions/policy/policy.service.abstraction\";\nimport { StateService } from \"@bitwarden/common/abstractions/state.service\";\nimport { PolicyType } from \"@bitwarden/common/enums/policyType\";\nimport { ServiceUtils } from \"@bitwarden/common/misc/serviceUtils\";\nimport { Organization } from \"@bitwarden/common/models/domain/organization\";\nimport { TreeNode } from \"@bitwarden/common/models/domain/tree-node\";\nimport { CollectionView } from \"@bitwarden/common/models/view/collection.view\";\nimport { CipherService } from \"@bitwarden/common/vault/abstractions/cipher.service\";\nimport { FolderService } from \"@bitwarden/common/vault/abstractions/folder/folder.service.abstraction\";\nimport { FolderView } from \"@bitwarden/common/vault/models/view/folder.view\";\n\nimport { DeprecatedVaultFilterService as DeprecatedVaultFilterServiceAbstraction } from \"../../abstractions/deprecated-vault-filter.service\";\nimport { DynamicTreeNode } from \"../models/dynamic-tree-node.model\";\n\nconst NestingDelimiter = \"/\";\n\n@Injectable()\nexport class VaultFilterService implements DeprecatedVaultFilterServiceAbstraction {\n  constructor(\n    protected stateService: StateService,\n    protected organizationService: OrganizationService,\n    protected folderService: FolderService,\n    protected cipherService: CipherService,\n    protected collectionService: CollectionService,\n    protected policyService: PolicyService\n  ) {}\n\n  async storeCollapsedFilterNodes(collapsedFilterNodes: Set<string>): Promise<void> {\n    await this.stateService.setCollapsedGroupings(Array.from(collapsedFilterNodes));\n  }\n\n  async buildCollapsedFilterNodes(): Promise<Set<string>> {\n    return new Set(await this.stateService.getCollapsedGroupings());\n  }\n\n  async buildOrganizations(): Promise<Organization[]> {\n    let organizations = await this.organizationService.getAll();\n    if (organizations != null) {\n      organizations = organizations\n        .filter(isNotProviderUser)\n        .sort((a, b) => a.name.localeCompare(b.name));\n    }\n\n    return organizations;\n  }\n\n  buildNestedFolders(organizationId?: string): Observable<DynamicTreeNode<FolderView>> {\n    const transformation = async (storedFolders: FolderView[]) => {\n      let folders: FolderView[];\n      if (organizationId != null) {\n        const ciphers = await this.cipherService.getAllDecrypted();\n        const orgCiphers = ciphers.filter((c) => c.organizationId == organizationId);\n        folders = storedFolders.filter(\n          (f) =>\n            orgCiphers.filter((oc) => oc.folderId == f.id).length > 0 ||\n            ciphers.filter((c) => c.folderId == f.id).length < 1\n        );\n      } else {\n        folders = storedFolders;\n      }\n      const nestedFolders = await this.getAllFoldersNested(folders);\n      return new DynamicTreeNode<FolderView>({\n        fullList: folders,\n        nestedList: nestedFolders,\n      });\n    };\n\n    return this.folderService.folderViews$.pipe(\n      mergeMap((folders) => from(transformation(folders)))\n    );\n  }\n\n  async buildCollections(organizationId?: string): Promise<DynamicTreeNode<CollectionView>> {\n    const storedCollections = await this.collectionService.getAllDecrypted();\n    let collections: CollectionView[];\n    if (organizationId != null) {\n      collections = storedCollections.filter((c) => c.organizationId === organizationId);\n    } else {\n      collections = storedCollections;\n    }\n    const nestedCollections = await this.collectionService.getAllNested(collections);\n    return new DynamicTreeNode<CollectionView>({\n      fullList: collections,\n      nestedList: nestedCollections,\n    });\n  }\n\n  async checkForSingleOrganizationPolicy(): Promise<boolean> {\n    return await firstValueFrom(\n      this.policyService.policyAppliesToActiveUser$(PolicyType.SingleOrg)\n    );\n  }\n\n  async checkForPersonalOwnershipPolicy(): Promise<boolean> {\n    return await firstValueFrom(\n      this.policyService.policyAppliesToActiveUser$(PolicyType.PersonalOwnership)\n    );\n  }\n\n  protected async getAllFoldersNested(folders: FolderView[]): Promise<TreeNode<FolderView>[]> {\n    const nodes: TreeNode<FolderView>[] = [];\n    folders.forEach((f) => {\n      const folderCopy = new FolderView();\n      folderCopy.id = f.id;\n      folderCopy.revisionDate = f.revisionDate;\n      const parts = f.name != null ? f.name.replace(/^\\/+|\\/+$/g, \"\").split(NestingDelimiter) : [];\n      ServiceUtils.nestedTraverse(nodes, 0, parts, folderCopy, null, NestingDelimiter);\n    });\n    return nodes;\n  }\n\n  async getFolderNested(id: string): Promise<TreeNode<FolderView>> {\n    const folders = await this.getAllFoldersNested(\n      await firstValueFrom(this.folderService.folderViews$)\n    );\n    return ServiceUtils.getTreeNodeObjectFromList(folders, id) as TreeNode<FolderView>;\n  }\n}\n","import { VaultFilter } from \"@bitwarden/angular/vault/vault-filter/models/vault-filter.model\";\nimport { VaultFilterService as BaseVaultFilterService } from \"@bitwarden/angular/vault/vault-filter/services/vault-filter.service\";\nimport { CollectionService } from \"@bitwarden/common/abstractions/collection.service\";\nimport { OrganizationService } from \"@bitwarden/common/abstractions/organization/organization.service.abstraction\";\nimport { PolicyService } from \"@bitwarden/common/abstractions/policy/policy.service.abstraction\";\nimport { StateService } from \"@bitwarden/common/abstractions/state.service\";\nimport { CipherService } from \"@bitwarden/common/vault/abstractions/cipher.service\";\nimport { FolderService } from \"@bitwarden/common/vault/abstractions/folder/folder.service.abstraction\";\nimport { CipherView } from \"@bitwarden/common/vault/models/view/cipher.view\";\n\nexport class VaultFilterService extends BaseVaultFilterService {\n  vaultFilter: VaultFilter = new VaultFilter();\n\n  allVaults = \"allVaults\";\n  myVault = \"myVault\";\n\n  constructor(\n    stateService: StateService,\n    organizationService: OrganizationService,\n    folderService: FolderService,\n    cipherService: CipherService,\n    collectionService: CollectionService,\n    policyService: PolicyService\n  ) {\n    super(\n      stateService,\n      organizationService,\n      folderService,\n      cipherService,\n      collectionService,\n      policyService\n    );\n    this.vaultFilter.myVaultOnly = false;\n    this.vaultFilter.selectedOrganizationId = null;\n  }\n\n  getVaultFilter() {\n    return this.vaultFilter;\n  }\n\n  setVaultFilter(filter: string) {\n    if (filter === this.allVaults) {\n      this.vaultFilter.myVaultOnly = false;\n      this.vaultFilter.selectedOrganizationId = null;\n    } else if (filter === this.myVault) {\n      this.vaultFilter.myVaultOnly = true;\n      this.vaultFilter.selectedOrganizationId = null;\n    } else {\n      this.vaultFilter.myVaultOnly = false;\n      this.vaultFilter.selectedOrganizationId = filter;\n    }\n  }\n\n  clear() {\n    this.setVaultFilter(this.allVaults);\n  }\n\n  filterCipherForSelectedVault(cipher: CipherView) {\n    if (!this.vaultFilter.selectedOrganizationId && !this.vaultFilter.myVaultOnly) {\n      return false;\n    }\n    if (this.vaultFilter.selectedOrganizationId) {\n      if (cipher.organizationId === this.vaultFilter.selectedOrganizationId) {\n        return false;\n      }\n    } else if (this.vaultFilter.myVaultOnly) {\n      if (!cipher.organizationId) {\n        return false;\n      }\n    }\n    return true;\n  }\n}\n","import { CipherView } from \"@bitwarden/common/vault/models/view/cipher.view\";\n\nimport AutofillField from \"../../models/autofill-field\";\nimport AutofillForm from \"../../models/autofill-form\";\nimport AutofillPageDetails from \"../../models/autofill-page-details\";\n\nexport interface PageDetail {\n  frameId: number;\n  tab: chrome.tabs.Tab;\n  details: AutofillPageDetails;\n}\n\nexport interface AutoFillOptions {\n  cipher: CipherView;\n  pageDetails: PageDetail[];\n  doc?: typeof window.document;\n  tab: chrome.tabs.Tab;\n  skipUsernameOnlyFill?: boolean;\n  onlyEmptyFields?: boolean;\n  onlyVisibleFields?: boolean;\n  fillNewPassword?: boolean;\n  skipLastUsed?: boolean;\n}\n\nexport interface FormData {\n  form: AutofillForm;\n  password: AutofillField;\n  username: AutofillField;\n  passwords: AutofillField[];\n}\n\nexport abstract class AutofillService {\n  getFormsWithPasswordFields: (pageDetails: AutofillPageDetails) => FormData[];\n  doAutoFill: (options: AutoFillOptions) => Promise<string>;\n  doAutoFillOnTab: (\n    pageDetails: PageDetail[],\n    tab: chrome.tabs.Tab,\n    fromCommand: boolean\n  ) => Promise<string>;\n  doAutoFillActiveTab: (pageDetails: PageDetail[], fromCommand: boolean) => Promise<string>;\n}\n","export interface MessageBase {\n  command: string;\n}\n\nexport abstract class BroadcasterService {\n  send: (message: MessageBase, id?: string) => void;\n  subscribe: (id: string, messageCallback: (message: MessageBase) => void) => void;\n  unsubscribe: (id: string) => void;\n}\n","import {\n  SyncCipherNotification,\n  SyncFolderNotification,\n  SyncSendNotification,\n} from \"../../../models/response/notification.response\";\n\nexport abstract class SyncService {\n  syncInProgress: boolean;\n\n  getLastSync: () => Promise<Date>;\n  setLastSync: (date: Date, userId?: string) => Promise<any>;\n  fullSync: (forceSync: boolean, allowThrowOnError?: boolean) => Promise<boolean>;\n  syncUpsertFolder: (notification: SyncFolderNotification, isEdit: boolean) => Promise<boolean>;\n  syncDeleteFolder: (notification: SyncFolderNotification) => Promise<boolean>;\n  syncUpsertCipher: (notification: SyncCipherNotification, isEdit: boolean) => Promise<boolean>;\n  syncDeleteCipher: (notification: SyncFolderNotification) => Promise<boolean>;\n  syncUpsertSend: (notification: SyncSendNotification, isEdit: boolean) => Promise<boolean>;\n  syncDeleteSend: (notification: SyncSendNotification) => Promise<boolean>;\n}\n","import { SendView } from \"../models/view/send.view\";\nimport { CipherView } from \"../vault/models/view/cipher.view\";\n\nexport abstract class SearchService {\n  indexedEntityId?: string = null;\n  clearIndex: () => void;\n  isSearchable: (query: string) => boolean;\n  indexCiphers: (indexedEntityGuid?: string, ciphersToIndex?: CipherView[]) => Promise<void>;\n  searchCiphers: (\n    query: string,\n    filter?: ((cipher: CipherView) => boolean) | ((cipher: CipherView) => boolean)[],\n    ciphers?: CipherView[]\n  ) => Promise<CipherView[]>;\n  searchCiphersBasic: (ciphers: CipherView[], query: string, deleted?: boolean) => CipherView[];\n  searchSends: (sends: SendView[], query: string) => SendView[];\n}\n","import { Directive, ElementRef, Input, NgZone } from \"@angular/core\";\nimport { take } from \"rxjs/operators\";\n\nimport { Utils } from \"@bitwarden/common/misc/utils\";\n\n@Directive({\n  selector: \"[appAutofocus]\",\n})\nexport class AutofocusDirective {\n  @Input() set appAutofocus(condition: boolean | string) {\n    this.autofocus = condition === \"\" || condition === true;\n  }\n\n  private autofocus: boolean;\n\n  constructor(private el: ElementRef, private ngZone: NgZone) {}\n\n  ngOnInit() {\n    if (!Utils.isMobileBrowser && this.autofocus) {\n      if (this.ngZone.isStable) {\n        this.el.nativeElement.focus();\n      } else {\n        this.ngZone.onStable.pipe(take(1)).subscribe(() => this.el.nativeElement.focus());\n      }\n    }\n  }\n}\n","import { Observable } from \"rxjs\";\n\nexport type Urls = {\n  base?: string;\n  webVault?: string;\n  api?: string;\n  identity?: string;\n  icons?: string;\n  notifications?: string;\n  events?: string;\n  keyConnector?: string;\n  scim?: string;\n};\n\nexport type PayPalConfig = {\n  businessId?: string;\n  buttonAction?: string;\n};\n\nexport abstract class EnvironmentService {\n  urls: Observable<Urls>;\n\n  hasBaseUrl: () => boolean;\n  getNotificationsUrl: () => string;\n  getWebVaultUrl: () => string;\n  getSendUrl: () => string;\n  getIconsUrl: () => string;\n  getApiUrl: () => string;\n  getIdentityUrl: () => string;\n  getEventsUrl: () => string;\n  getKeyConnectorUrl: () => string;\n  getScimUrl: () => string;\n  setUrlsFromStorage: () => Promise<void>;\n  setUrls: (urls: Urls) => Promise<Urls>;\n  getUrls: () => Urls;\n  isCloud: () => boolean;\n  /**\n   * @remarks For desktop and browser use only.\n   * For web, use PlatformUtilsService.isSelfHost()\n   */\n  isSelfHosted: () => boolean;\n}\n","import { Directive, ElementRef, HostListener, Input } from \"@angular/core\";\n\n@Directive({\n  selector: \"[appFallbackSrc]\",\n})\nexport class FallbackSrcDirective {\n  @Input(\"appFallbackSrc\") appFallbackSrc: string;\n\n  constructor(private el: ElementRef) {}\n\n  @HostListener(\"error\") onError() {\n    this.el.nativeElement.src = this.appFallbackSrc;\n  }\n}\n","<div class=\"icon\" aria-hidden=\"true\">\n  <img\n    [src]=\"image\"\n    appFallbackSrc=\"{{ fallbackImage }}\"\n    *ngIf=\"imageEnabled && image\"\n    alt=\"\"\n    decoding=\"async\"\n    loading=\"lazy\"\n  />\n  <i class=\"tw-text-muted bwi bwi-lg {{ icon }}\" *ngIf=\"!imageEnabled || !image\"></i>\n</div>\n","import { Component, Input, OnChanges } from \"@angular/core\";\n\nimport { EnvironmentService } from \"@bitwarden/common/abstractions/environment.service\";\nimport { StateService } from \"@bitwarden/common/abstractions/state.service\";\nimport { Utils } from \"@bitwarden/common/misc/utils\";\nimport { CipherType } from \"@bitwarden/common/vault/enums/cipher-type\";\nimport { CipherView } from \"@bitwarden/common/vault/models/view/cipher.view\";\n\n/**\n * Provides a mapping from supported card brands to\n * the filenames of icon that should be present in images/cards folder of clients.\n */\nconst cardIcons: Record<string, string> = {\n  Visa: \"card-visa\",\n  Mastercard: \"card-mastercard\",\n  Amex: \"card-amex\",\n  Discover: \"card-discover\",\n  \"Diners Club\": \"card-diners-club\",\n  JCB: \"card-jcb\",\n  Maestro: \"card-maestro\",\n  UnionPay: \"card-union-pay\",\n  RuPay: \"card-ru-pay\",\n  Mir: \"card-mir\",\n};\n\n@Component({\n  selector: \"app-vault-icon\",\n  templateUrl: \"icon.component.html\",\n})\nexport class IconComponent implements OnChanges {\n  @Input() cipher: CipherView;\n  icon: string;\n  image: string;\n  fallbackImage: string;\n  imageEnabled: boolean;\n\n  private iconsUrl: string;\n\n  constructor(environmentService: EnvironmentService, private stateService: StateService) {\n    this.iconsUrl = environmentService.getIconsUrl();\n  }\n\n  async ngOnChanges() {\n    // Components may be re-used when using cdk-virtual-scroll. Which puts the component in a weird state,\n    // to avoid this we reset all state variables.\n    this.image = null;\n    this.fallbackImage = null;\n    this.imageEnabled = !(await this.stateService.getDisableFavicon());\n    this.load();\n  }\n\n  protected load() {\n    switch (this.cipher.type) {\n      case CipherType.Login:\n        this.icon = \"bwi-globe\";\n        this.setLoginIcon();\n        break;\n      case CipherType.SecureNote:\n        this.icon = \"bwi-sticky-note\";\n        break;\n      case CipherType.Card:\n        this.icon = \"bwi-credit-card\";\n        this.setCardIcon();\n        break;\n      case CipherType.Identity:\n        this.icon = \"bwi-id-card\";\n        break;\n      default:\n        break;\n    }\n  }\n\n  private setLoginIcon() {\n    if (this.cipher.login.uri) {\n      let hostnameUri = this.cipher.login.uri;\n      let isWebsite = false;\n\n      if (hostnameUri.indexOf(\"androidapp://\") === 0) {\n        this.icon = \"bwi-android\";\n        this.image = null;\n      } else if (hostnameUri.indexOf(\"iosapp://\") === 0) {\n        this.icon = \"bwi-apple\";\n        this.image = null;\n      } else if (\n        this.imageEnabled &&\n        hostnameUri.indexOf(\"://\") === -1 &&\n        hostnameUri.indexOf(\".\") > -1\n      ) {\n        hostnameUri = \"http://\" + hostnameUri;\n        isWebsite = true;\n      } else if (this.imageEnabled) {\n        isWebsite = hostnameUri.indexOf(\"http\") === 0 && hostnameUri.indexOf(\".\") > -1;\n      }\n\n      if (this.imageEnabled && isWebsite) {\n        try {\n          this.image = this.iconsUrl + \"/\" + Utils.getHostname(hostnameUri) + \"/icon.png\";\n          this.fallbackImage = \"images/bwi-globe.png\";\n        } catch (e) {\n          // Ignore error since the fallback icon will be shown if image is null.\n        }\n      }\n    } else {\n      this.image = null;\n    }\n  }\n\n  private setCardIcon() {\n    const brand = this.cipher.card.brand;\n    if (this.imageEnabled && brand in cardIcons) {\n      this.icon = \"credit-card-icon \" + cardIcons[brand];\n    }\n  }\n}\n","export abstract class TotpService {\n  getCode: (key: string) => Promise<string>;\n  getTimeInterval: (key: string) => number;\n}\n","import { Directive, HostListener } from \"@angular/core\";\n\n@Directive({\n  selector: \"[appStopProp]\",\n})\nexport class StopPropDirective {\n  @HostListener(\"click\", [\"$event\"]) onClick($event: MouseEvent) {\n    $event.stopPropagation();\n  }\n}\n","<button\n  type=\"button\"\n  class=\"row-btn\"\n  (click)=\"view()\"\n  appStopClick\n  appStopProp\n  appA11yTitle=\"{{ 'view' | i18n }}\"\n  *ngIf=\"showView\"\n>\n  <i class=\"bwi bwi-lg bwi-list-alt\" aria-hidden=\"true\"></i>\n</button>\n<ng-container *ngIf=\"cipher.type === cipherType.Login\">\n  <button\n    type=\"button\"\n    class=\"row-btn\"\n    appStopClick\n    appStopProp\n    appA11yTitle=\"{{ 'launch' | i18n }}\"\n    (click)=\"launchCipher()\"\n    *ngIf=\"!showView\"\n    [ngClass]=\"{ disabled: !cipher.login.canLaunch }\"\n    [attr.disabled]=\"!cipher.login.canLaunch ? '' : null\"\n  >\n    <i class=\"bwi bwi-lg bwi-share-square\" aria-hidden=\"true\"></i>\n  </button>\n  <button\n    type=\"button\"\n    class=\"row-btn\"\n    appStopClick\n    appStopProp\n    appA11yTitle=\"{{ 'copyUsername' | i18n }}\"\n    (click)=\"copy(cipher, cipher.login.username, 'username', 'Username')\"\n    [ngClass]=\"{ disabled: !cipher.login.username }\"\n    [attr.disabled]=\"!cipher.login.username ? '' : null\"\n  >\n    <i class=\"bwi bwi-lg bwi-user\" aria-hidden=\"true\"></i>\n  </button>\n  <button\n    type=\"button\"\n    class=\"row-btn\"\n    appStopClick\n    appStopProp\n    appA11yTitle=\"{{ 'copyPassword' | i18n }}\"\n    (click)=\"copy(cipher, cipher.login.password, 'password', 'Password')\"\n    [ngClass]=\"{ disabled: !cipher.login.password || !cipher.viewPassword }\"\n    [attr.disabled]=\"!cipher.login.password ? '' : null\"\n  >\n    <i class=\"bwi bwi-lg bwi-key\" aria-hidden=\"true\"></i>\n  </button>\n  <button\n    type=\"button\"\n    class=\"row-btn\"\n    appStopClick\n    appStopProp\n    appA11yTitle=\"{{ 'copyVerificationCode' | i18n }}\"\n    (click)=\"copy(cipher, cipher.login.totp, 'verificationCodeTotp', 'TOTP')\"\n    [ngClass]=\"{ disabled: !displayTotpCopyButton(cipher) }\"\n    [attr.disabled]=\"!displayTotpCopyButton(cipher) ? '' : null\"\n  >\n    <i class=\"bwi bwi-lg bwi-clock\" aria-hidden=\"true\"></i>\n  </button>\n</ng-container>\n<ng-container *ngIf=\"cipher.type === cipherType.Card\">\n  <button\n    type=\"button\"\n    class=\"row-btn\"\n    appStopClick\n    appStopProp\n    appA11yTitle=\"{{ 'copyNumber' | i18n }}\"\n    (click)=\"copy(cipher, cipher.card.number, 'number', 'Card Number')\"\n    [ngClass]=\"{ disabled: !cipher.card.number }\"\n    [attr.disabled]=\"!cipher.card.number ? '' : null\"\n  >\n    <i class=\"bwi bwi-lg bwi-hashtag\" aria-hidden=\"true\"></i>\n  </button>\n  <button\n    type=\"button\"\n    class=\"row-btn\"\n    appStopClick\n    appStopProp\n    appA11yTitle=\"{{ 'copySecurityCode' | i18n }}\"\n    (click)=\"copy(cipher, cipher.card.code, 'securityCode', 'Security Code')\"\n    [ngClass]=\"{ disabled: !cipher.card.code }\"\n    [attr.disabled]=\"!cipher.card.code ? '' : null\"\n  >\n    <i class=\"bwi bwi-lg bwi-key\" aria-hidden=\"true\"></i>\n  </button>\n</ng-container>\n<ng-container *ngIf=\"cipher.type === cipherType.SecureNote\">\n  <button\n    type=\"button\"\n    class=\"row-btn\"\n    appStopClick\n    appStopProp\n    appA11yTitle=\"{{ 'copyNote' | i18n }}\"\n    (click)=\"copy(cipher, cipher.notes, 'note', 'Note')\"\n    [ngClass]=\"{ disabled: !cipher.notes }\"\n    [attr.disabled]=\"!cipher.notes ? '' : null\"\n  >\n    <i class=\"bwi bwi-lg bwi-clone\" aria-hidden=\"true\"></i>\n  </button>\n</ng-container>\n","import { Component, EventEmitter, Input, Output } from \"@angular/core\";\n\nimport { EventCollectionService } from \"@bitwarden/common/abstractions/event/event-collection.service\";\nimport { I18nService } from \"@bitwarden/common/abstractions/i18n.service\";\nimport { PlatformUtilsService } from \"@bitwarden/common/abstractions/platformUtils.service\";\nimport { StateService } from \"@bitwarden/common/abstractions/state.service\";\nimport { TotpService } from \"@bitwarden/common/abstractions/totp.service\";\nimport { EventType } from \"@bitwarden/common/enums/eventType\";\nimport { PasswordRepromptService } from \"@bitwarden/common/vault/abstractions/password-reprompt.service\";\nimport { CipherRepromptType } from \"@bitwarden/common/vault/enums/cipher-reprompt-type\";\nimport { CipherType } from \"@bitwarden/common/vault/enums/cipher-type\";\nimport { CipherView } from \"@bitwarden/common/vault/models/view/cipher.view\";\n\n@Component({\n  selector: \"app-action-buttons\",\n  templateUrl: \"action-buttons.component.html\",\n})\nexport class ActionButtonsComponent {\n  @Output() onView = new EventEmitter<CipherView>();\n  @Output() launchEvent = new EventEmitter<CipherView>();\n  @Input() cipher: CipherView;\n  @Input() showView = false;\n\n  cipherType = CipherType;\n  userHasPremiumAccess = false;\n\n  constructor(\n    private i18nService: I18nService,\n    private platformUtilsService: PlatformUtilsService,\n    private eventCollectionService: EventCollectionService,\n    private totpService: TotpService,\n    private stateService: StateService,\n    private passwordRepromptService: PasswordRepromptService\n  ) {}\n\n  async ngOnInit() {\n    this.userHasPremiumAccess = await this.stateService.getCanAccessPremium();\n  }\n\n  launchCipher() {\n    this.launchEvent.emit(this.cipher);\n  }\n\n  async copy(cipher: CipherView, value: string, typeI18nKey: string, aType: string) {\n    if (\n      this.cipher.reprompt !== CipherRepromptType.None &&\n      this.passwordRepromptService.protectedFields().includes(aType) &&\n      !(await this.passwordRepromptService.showPasswordPrompt())\n    ) {\n      return;\n    }\n\n    if (value == null || (aType === \"TOTP\" && !this.displayTotpCopyButton(cipher))) {\n      return;\n    } else if (aType === \"TOTP\") {\n      value = await this.totpService.getCode(value);\n    }\n\n    if (!cipher.viewPassword) {\n      return;\n    }\n\n    this.platformUtilsService.copyToClipboard(value, { window: window });\n    this.platformUtilsService.showToast(\n      \"info\",\n      null,\n      this.i18nService.t(\"valueCopied\", this.i18nService.t(typeI18nKey))\n    );\n\n    if (typeI18nKey === \"password\" || typeI18nKey === \"verificationCodeTotp\") {\n      this.eventCollectionService.collect(\n        EventType.Cipher_ClientToggledHiddenFieldVisible,\n        cipher.id\n      );\n    } else if (typeI18nKey === \"securityCode\") {\n      this.eventCollectionService.collect(EventType.Cipher_ClientCopiedCardCode, cipher.id);\n    }\n  }\n\n  displayTotpCopyButton(cipher: CipherView) {\n    return (\n      (cipher?.login?.hasTotp ?? false) && (cipher.organizationUseTotp || this.userHasPremiumAccess)\n    );\n  }\n\n  view() {\n    this.onView.emit(this.cipher);\n  }\n}\n","<div\n  role=\"group\"\n  appA11yTitle=\"{{ cipher.name }}\"\n  class=\"virtual-scroll-item\"\n  [ngClass]=\"{ 'override-last': !last }\"\n>\n  <div class=\"box-content-row box-content-row-flex\">\n    <button\n      type=\"button\"\n      (click)=\"selectCipher(cipher)\"\n      (dblclick)=\"launchCipher(cipher)\"\n      appStopClick\n      title=\"{{ title }} - {{ cipher.name }}\"\n      class=\"row-main\"\n    >\n      <app-vault-icon [cipher]=\"cipher\"></app-vault-icon>\n      <div class=\"row-main-content\">\n        <span class=\"text\">\n          <span class=\"truncate-box\">\n            <span class=\"truncate\">{{ cipher.name }}</span>\n            <ng-container *ngIf=\"cipher.organizationId\">\n              <i\n                class=\"bwi bwi-collection text-muted\"\n                title=\"{{ 'shared' | i18n }}\"\n                aria-hidden=\"true\"\n              ></i>\n              <span class=\"sr-only\">{{ \"shared\" | i18n }}</span>\n            </ng-container>\n            <ng-container *ngIf=\"cipher.hasAttachments\">\n              <i\n                class=\"bwi bwi-paperclip text-muted\"\n                title=\"{{ 'attachments' | i18n }}\"\n                aria-hidden=\"true\"\n              ></i>\n              <span class=\"sr-only\">{{ \"attachments\" | i18n }}</span>\n            </ng-container>\n          </span>\n        </span>\n        <span class=\"detail\">{{ cipher.subTitle }}</span>\n      </div>\n    </button>\n    <app-action-buttons\n      [cipher]=\"cipher\"\n      [showView]=\"showView\"\n      (onView)=\"viewCipher(cipher)\"\n      (launchEvent)=\"launchCipher(cipher)\"\n      class=\"action-buttons\"\n    >\n    </app-action-buttons>\n  </div>\n</div>\n","import { Component, EventEmitter, Input, Output } from \"@angular/core\";\n\nimport { CipherView } from \"@bitwarden/common/vault/models/view/cipher.view\";\n\n@Component({\n  selector: \"app-cipher-row\",\n  templateUrl: \"cipher-row.component.html\",\n})\nexport class CipherRowComponent {\n  @Output() onSelected = new EventEmitter<CipherView>();\n  @Output() launchEvent = new EventEmitter<CipherView>();\n  @Output() onView = new EventEmitter<CipherView>();\n  @Input() cipher: CipherView;\n  @Input() last: boolean;\n  @Input() showView = false;\n  @Input() title: string;\n\n  selectCipher(c: CipherView) {\n    this.onSelected.emit(c);\n  }\n\n  launchCipher(c: CipherView) {\n    this.launchEvent.emit(c);\n  }\n\n  viewCipher(c: CipherView) {\n    this.onView.emit(c);\n  }\n}\n","<ng-container *ngIf=\"show\">\n  <button type=\"button\" (click)=\"expand()\" appA11yTitle=\"{{ 'popOutNewWindow' | i18n }}\">\n    <i class=\"bwi bwi-external-link bwi-rotate-270 bwi-lg bwi-fw\" aria-hidden=\"true\"></i>\n  </button>\n</ng-container>\n","import { Component, Input, OnInit } from \"@angular/core\";\n\nimport { PlatformUtilsService } from \"@bitwarden/common/abstractions/platformUtils.service\";\n\nimport { PopupUtilsService } from \"../services/popup-utils.service\";\n\n@Component({\n  selector: \"app-pop-out\",\n  templateUrl: \"pop-out.component.html\",\n})\nexport class PopOutComponent implements OnInit {\n  @Input() show = true;\n\n  constructor(\n    private platformUtilsService: PlatformUtilsService,\n    private popupUtilsService: PopupUtilsService\n  ) {}\n\n  ngOnInit() {\n    if (this.show) {\n      if (\n        (this.popupUtilsService.inSidebar(window) && this.platformUtilsService.isFirefox()) ||\n        this.popupUtilsService.inPopout(window)\n      ) {\n        this.show = false;\n      }\n    }\n  }\n\n  expand() {\n    this.popupUtilsService.popOut(window);\n  }\n}\n","<!-- Please remove this disable statement when editing this file! -->\n<!-- eslint-disable @angular-eslint/template/button-has-type -->\n<ng-container *ngIf=\"loaded && organizations$ | async as organizations\">\n  <div class=\"content org-filter-content\" *ngIf=\"loaded && shouldShow(organizations)\">\n    <ng-container *ngIf=\"selectedVault$ | async as vaultFilterDisplay\">\n      <button\n        #toggleVaults\n        class=\"org-filter\"\n        (click)=\"openOverlay()\"\n        aria-haspopup=\"menu\"\n        aria-controls=\"cdk-overlay-container\"\n        [attr.aria-expanded]=\"isOpen\"\n        [attr.aria-label]=\"vaultFilterDisplay\"\n      >\n        <span class=\"org-filter-text-container\">\n          <span class=\"org-filter-text-name\">{{ vaultFilterDisplay }}</span\n          >&nbsp;\n          <span\n            ><i\n              class=\"bwi bwi-sm\"\n              aria-hidden=\"true\"\n              [ngClass]=\"{ 'bwi-angle-down': !isOpen, 'bwi-chevron-up': isOpen }\"\n            ></i></span\n        ></span>\n      </button>\n    </ng-container>\n    <ng-template class=\"vault-select-container\" #vaultSelectorTemplate>\n      <div\n        class=\"vault-select\"\n        [@transformPanel]=\"'open'\"\n        cdkTrapFocus\n        cdkTrapFocusAutoCapture\n        role=\"dialog\"\n        aria-modal=\"true\"\n      >\n        <button appStopClick (click)=\"selectAllVaults()\">\n          <div class=\"vault-select-org-text-container\">\n            <i class=\"bwi bwi-fw bwi-filter vault-select-prefix-icon\" aria-hidden=\"true\"></i>\n            <span class=\"vault-select-org-name\">{{ \"allVaults\" | i18n }}</span>\n          </div>\n        </button>\n        <button *ngIf=\"!enforcePersonalOwnership\" appStopClick (click)=\"selectMyVault()\">\n          <div class=\"vault-select-org-text-container\">\n            <i class=\"bwi bwi-fw bwi-user vault-select-prefix-icon\" aria-hidden=\"true\"></i>\n            <span class=\"vault-select-org-name\">{{ \"myVault\" | i18n }}</span>\n          </div>\n        </button>\n        <button\n          *ngFor=\"let organization of organizations\"\n          appStopClick\n          (click)=\"selectOrganization(organization)\"\n        >\n          <div class=\"vault-select-org-text-container\">\n            <i\n              *ngIf=\"organization.planProductType !== 1\"\n              class=\"bwi bwi-fw bwi-business vault-select-prefix-icon\"\n              aria-hidden=\"true\"\n            ></i>\n            <i\n              *ngIf=\"organization.planProductType === 1\"\n              class=\"bwi bwi-fw bwi-family vault-select-prefix-icon\"\n              aria-hidden=\"true\"\n            ></i>\n\n            <span class=\"vault-select-org-name\">{{ organization.name }}</span\n            ><i\n              *ngIf=\"!organization.enabled\"\n              class=\"bwi bwi-fw bwi-exclamation-triangle text-danger vault-select-suffix-icon\"\n              attr.aria-label=\"{{ 'organizationIsDisabled' | i18n }}\"\n              appA11yTitle=\"{{ 'organizationIsDisabled' | i18n }}\"\n            ></i>\n          </div>\n        </button>\n      </div>\n    </ng-template>\n  </div>\n</ng-container>\n","import { animate, state, style, transition, trigger } from \"@angular/animations\";\nimport { ConnectedPosition, Overlay, OverlayRef } from \"@angular/cdk/overlay\";\nimport { TemplatePortal } from \"@angular/cdk/portal\";\nimport {\n  Component,\n  ElementRef,\n  EventEmitter,\n  OnInit,\n  Output,\n  TemplateRef,\n  ViewChild,\n  ViewContainerRef,\n  HostListener,\n  OnDestroy,\n} from \"@angular/core\";\nimport { BehaviorSubject, concatMap, map, merge, Observable, Subject, takeUntil } from \"rxjs\";\n\nimport { I18nService } from \"@bitwarden/common/abstractions/i18n.service\";\nimport {\n  isNotProviderUser,\n  OrganizationService,\n} from \"@bitwarden/common/abstractions/organization/organization.service.abstraction\";\nimport { PlatformUtilsService } from \"@bitwarden/common/abstractions/platformUtils.service\";\nimport { Organization } from \"@bitwarden/common/models/domain/organization\";\n\nimport { VaultFilterService } from \"../../../services/vault-filter.service\";\n\n@Component({\n  selector: \"app-vault-select\",\n  templateUrl: \"vault-select.component.html\",\n  animations: [\n    trigger(\"transformPanel\", [\n      state(\n        \"void\",\n        style({\n          opacity: 0,\n        })\n      ),\n      transition(\n        \"void => open\",\n        animate(\n          \"100ms linear\",\n          style({\n            opacity: 1,\n          })\n        )\n      ),\n      transition(\"* => void\", animate(\"100ms linear\", style({ opacity: 0 }))),\n    ]),\n  ],\n})\nexport class VaultSelectComponent implements OnInit, OnDestroy {\n  @Output() onVaultSelectionChanged = new EventEmitter();\n\n  @ViewChild(\"toggleVaults\", { read: ElementRef })\n  buttonRef: ElementRef<HTMLButtonElement>;\n  @ViewChild(\"vaultSelectorTemplate\", { read: TemplateRef }) templateRef: TemplateRef<HTMLElement>;\n\n  private _selectedVault = new BehaviorSubject<string | null>(null);\n\n  isOpen = false;\n  loaded = false;\n  organizations$: Observable<Organization[]>;\n  selectedVault$: Observable<string | null> = this._selectedVault.asObservable();\n\n  enforcePersonalOwnership = false;\n  overlayPostition: ConnectedPosition[] = [\n    {\n      originX: \"start\",\n      originY: \"bottom\",\n      overlayX: \"start\",\n      overlayY: \"top\",\n    },\n  ];\n\n  private overlayRef: OverlayRef;\n  private _destroy = new Subject<void>();\n\n  shouldShow(organizations: Organization[]): boolean {\n    return (\n      (organizations.length > 0 && !this.enforcePersonalOwnership) ||\n      (organizations.length > 1 && this.enforcePersonalOwnership)\n    );\n  }\n\n  constructor(\n    private vaultFilterService: VaultFilterService,\n    private i18nService: I18nService,\n    private overlay: Overlay,\n    private viewContainerRef: ViewContainerRef,\n    private platformUtilsService: PlatformUtilsService,\n    private organizationService: OrganizationService\n  ) {}\n\n  @HostListener(\"document:keydown.escape\", [\"$event\"])\n  handleKeyboardEvent(event: KeyboardEvent) {\n    if (this.isOpen) {\n      event.preventDefault();\n      this.close();\n    }\n  }\n\n  async ngOnInit() {\n    this.organizations$ = this.organizationService.organizations$\n      .pipe(takeUntil(this._destroy))\n      .pipe(\n        map((orgs) => orgs.filter(isNotProviderUser).sort((a, b) => a.name.localeCompare(b.name)))\n      );\n\n    this.organizations$\n      .pipe(\n        concatMap(async (organizations) => {\n          this.enforcePersonalOwnership =\n            await this.vaultFilterService.checkForPersonalOwnershipPolicy();\n\n          if (this.shouldShow(organizations)) {\n            if (this.enforcePersonalOwnership && !this.vaultFilterService.vaultFilter.myVaultOnly) {\n              const firstOrganization = organizations[0];\n              this._selectedVault.next(firstOrganization.name);\n              this.vaultFilterService.setVaultFilter(firstOrganization.id);\n            } else if (this.vaultFilterService.vaultFilter.myVaultOnly) {\n              this._selectedVault.next(this.i18nService.t(this.vaultFilterService.myVault));\n            } else if (this.vaultFilterService.vaultFilter.selectedOrganizationId != null) {\n              const selectedOrganization = organizations.find(\n                (o) => o.id === this.vaultFilterService.vaultFilter.selectedOrganizationId\n              );\n              this._selectedVault.next(selectedOrganization.name);\n            } else {\n              this._selectedVault.next(this.i18nService.t(this.vaultFilterService.allVaults));\n            }\n          }\n        })\n      )\n      .pipe(takeUntil(this._destroy))\n      .subscribe();\n\n    this.loaded = true;\n  }\n\n  ngOnDestroy(): void {\n    this._destroy.next();\n    this._destroy.complete();\n    this._selectedVault.complete();\n  }\n\n  openOverlay() {\n    const viewPortHeight = Math.max(document.documentElement.clientHeight, window.innerHeight || 0);\n    const positionStrategyBuilder = this.overlay.position();\n\n    const positionStrategy = positionStrategyBuilder\n      .flexibleConnectedTo(this.buttonRef.nativeElement)\n      .withFlexibleDimensions(true)\n      .withPush(true)\n      .withViewportMargin(10)\n      .withGrowAfterOpen(true)\n      .withPositions(this.overlayPostition);\n\n    this.overlayRef = this.overlay.create({\n      hasBackdrop: true,\n      positionStrategy,\n      maxHeight: viewPortHeight - 160,\n      backdropClass: \"cdk-overlay-transparent-backdrop\",\n      scrollStrategy: this.overlay.scrollStrategies.close(),\n    });\n\n    const templatePortal = new TemplatePortal(this.templateRef, this.viewContainerRef);\n    this.overlayRef.attach(templatePortal);\n    this.isOpen = true;\n\n    // Handle closing\n    merge(\n      this.overlayRef.outsidePointerEvents(),\n      this.overlayRef.backdropClick(),\n      this.overlayRef.detachments()\n      // eslint-disable-next-line rxjs-angular/prefer-takeuntil\n    ).subscribe(() => {\n      this.close();\n    });\n  }\n\n  close() {\n    if (this.overlayRef) {\n      this.overlayRef.dispose();\n      this.overlayRef = undefined;\n    }\n    this.isOpen = false;\n  }\n\n  selectOrganization(organization: Organization) {\n    if (!organization.enabled) {\n      this.platformUtilsService.showToast(\n        \"error\",\n        null,\n        this.i18nService.t(\"disabledOrganizationFilterError\")\n      );\n    } else {\n      this._selectedVault.next(organization.name);\n      this.vaultFilterService.setVaultFilter(organization.id);\n      this.onVaultSelectionChanged.emit();\n      this.close();\n    }\n  }\n  selectAllVaults() {\n    this._selectedVault.next(this.i18nService.t(this.vaultFilterService.allVaults));\n    this.vaultFilterService.setVaultFilter(this.vaultFilterService.allVaults);\n    this.onVaultSelectionChanged.emit();\n    this.close();\n  }\n  selectMyVault() {\n    this._selectedVault.next(this.i18nService.t(this.vaultFilterService.myVault));\n    this.vaultFilterService.setVaultFilter(this.vaultFilterService.myVault);\n    this.onVaultSelectionChanged.emit();\n    this.close();\n  }\n}\n","<header>\n  <h1 class=\"sr-only\">{{ \"currentTab\" | i18n }}</h1>\n  <div class=\"left\">\n    <app-pop-out *ngIf=\"!inSidebar\"></app-pop-out>\n    <button\n      type=\"button\"\n      (click)=\"refresh()\"\n      appA11yTitle=\"{{ 'refresh' | i18n }}\"\n      *ngIf=\"inSidebar\"\n    >\n      <i class=\"bwi bwi-refresh-tab bwi-lg bwi-fw\" aria-hidden=\"true\"></i>\n    </button>\n  </div>\n  <div class=\"search\">\n    <input\n      type=\"{{ searchTypeSearch ? 'search' : 'text' }}\"\n      placeholder=\"{{ 'searchVault' | i18n }}\"\n      id=\"search\"\n      [(ngModel)]=\"searchText\"\n      (input)=\"search$.next()\"\n      autocomplete=\"off\"\n      (keydown)=\"closeOnEsc($event)\"\n      appAutofocus\n    />\n    <i class=\"bwi bwi-search\" aria-hidden=\"true\"></i>\n  </div>\n  <div class=\"right\">\n    <button type=\"button\" (click)=\"addCipher()\" appA11yTitle=\"{{ 'addItem' | i18n }}\">\n      <i class=\"bwi bwi-plus bwi-lg bwi-fw\" aria-hidden=\"true\"></i>\n    </button>\n  </div>\n</header>\n<main tabindex=\"-1\">\n  <div class=\"no-items\" *ngIf=\"!loaded\">\n    <i class=\"bwi bwi-spinner bwi-spin bwi-3x\" aria-hidden=\"true\"></i>\n  </div>\n  <ng-container *ngIf=\"loaded\">\n    <app-vault-select (onVaultSelectionChanged)=\"load()\"></app-vault-select>\n    <div class=\"box list\" *ngIf=\"loginCiphers\">\n      <h2 class=\"box-header\">\n        {{ \"typeLogins\" | i18n }}\n        <span class=\"flex-right\">{{ loginCiphers.length }}</span>\n      </h2>\n      <div class=\"box-content no-hover\">\n        <app-cipher-row\n          *ngFor=\"let loginCipher of loginCiphers\"\n          [cipher]=\"loginCipher\"\n          title=\"{{ 'autoFill' | i18n }}\"\n          [showView]=\"true\"\n          (onSelected)=\"fillCipher($event)\"\n          (onView)=\"viewCipher($event)\"\n        >\n        </app-cipher-row>\n        <div class=\"box-content-row padded no-hover\" *ngIf=\"!loginCiphers.length\">\n          <p class=\"text-center\">{{ \"autoFillInfo\" | i18n }}</p>\n          <button type=\"button\" class=\"btn primary link block\" (click)=\"addCipher()\">\n            {{ \"addLogin\" | i18n }}\n          </button>\n        </div>\n      </div>\n    </div>\n    <div class=\"box list\" *ngIf=\"cardCiphers && cardCiphers.length\">\n      <h2 class=\"box-header\">\n        {{ \"cards\" | i18n }}\n        <span class=\"flex-right\">{{ cardCiphers.length }}</span>\n      </h2>\n      <div class=\"box-content\">\n        <app-cipher-row\n          *ngFor=\"let cardCipher of cardCiphers\"\n          [cipher]=\"cardCipher\"\n          title=\"{{ 'autoFill' | i18n }}\"\n          [showView]=\"true\"\n          (onSelected)=\"fillCipher($event)\"\n          (onView)=\"viewCipher($event)\"\n        ></app-cipher-row>\n      </div>\n    </div>\n    <div class=\"box list\" *ngIf=\"identityCiphers && identityCiphers.length\">\n      <h2 class=\"box-header\">\n        {{ \"identities\" | i18n }}\n        <span class=\"flex-right\">{{ identityCiphers.length }}</span>\n      </h2>\n      <div class=\"box-content\">\n        <app-cipher-row\n          *ngFor=\"let identityCipher of identityCiphers\"\n          [cipher]=\"identityCipher\"\n          title=\"{{ 'autoFill' | i18n }}\"\n          [showView]=\"true\"\n          (onSelected)=\"fillCipher($event)\"\n          (onView)=\"viewCipher($event)\"\n        ></app-cipher-row>\n      </div>\n    </div>\n  </ng-container>\n</main>\n","import { ChangeDetectorRef, Component, NgZone, OnDestroy, OnInit } from \"@angular/core\";\nimport { Router } from \"@angular/router\";\nimport { Subject } from \"rxjs\";\nimport { debounceTime, takeUntil } from \"rxjs/operators\";\n\nimport { BroadcasterService } from \"@bitwarden/common/abstractions/broadcaster.service\";\nimport { I18nService } from \"@bitwarden/common/abstractions/i18n.service\";\nimport { OrganizationService } from \"@bitwarden/common/abstractions/organization/organization.service.abstraction\";\nimport { PlatformUtilsService } from \"@bitwarden/common/abstractions/platformUtils.service\";\nimport { SearchService } from \"@bitwarden/common/abstractions/search.service\";\nimport { StateService } from \"@bitwarden/common/abstractions/state.service\";\nimport { Utils } from \"@bitwarden/common/misc/utils\";\nimport { CipherService } from \"@bitwarden/common/vault/abstractions/cipher.service\";\nimport { PasswordRepromptService } from \"@bitwarden/common/vault/abstractions/password-reprompt.service\";\nimport { SyncService } from \"@bitwarden/common/vault/abstractions/sync/sync.service.abstraction\";\nimport { CipherRepromptType } from \"@bitwarden/common/vault/enums/cipher-reprompt-type\";\nimport { CipherType } from \"@bitwarden/common/vault/enums/cipher-type\";\nimport { CipherView } from \"@bitwarden/common/vault/models/view/cipher.view\";\n\nimport { AutofillService } from \"../../../../autofill/services/abstractions/autofill.service\";\nimport { BrowserApi } from \"../../../../browser/browserApi\";\nimport { PopupUtilsService } from \"../../../../popup/services/popup-utils.service\";\nimport { VaultFilterService } from \"../../../services/vault-filter.service\";\n\nconst BroadcasterSubscriptionId = \"CurrentTabComponent\";\n\n@Component({\n  selector: \"app-current-tab\",\n  templateUrl: \"current-tab.component.html\",\n})\nexport class CurrentTabComponent implements OnInit, OnDestroy {\n  pageDetails: any[] = [];\n  tab: chrome.tabs.Tab;\n  cardCiphers: CipherView[];\n  identityCiphers: CipherView[];\n  loginCiphers: CipherView[];\n  url: string;\n  hostname: string;\n  searchText: string;\n  inSidebar = false;\n  searchTypeSearch = false;\n  loaded = false;\n  isLoading = false;\n  showOrganizations = false;\n  protected search$ = new Subject<void>();\n  private destroy$ = new Subject<void>();\n\n  private totpCode: string;\n  private totpTimeout: number;\n  private loadedTimeout: number;\n  private searchTimeout: number;\n\n  constructor(\n    private platformUtilsService: PlatformUtilsService,\n    private cipherService: CipherService,\n    private popupUtilsService: PopupUtilsService,\n    private autofillService: AutofillService,\n    private i18nService: I18nService,\n    private router: Router,\n    private ngZone: NgZone,\n    private broadcasterService: BroadcasterService,\n    private changeDetectorRef: ChangeDetectorRef,\n    private syncService: SyncService,\n    private searchService: SearchService,\n    private stateService: StateService,\n    private passwordRepromptService: PasswordRepromptService,\n    private organizationService: OrganizationService,\n    private vaultFilterService: VaultFilterService\n  ) {}\n\n  async ngOnInit() {\n    this.searchTypeSearch = !this.platformUtilsService.isSafari();\n    this.inSidebar = this.popupUtilsService.inSidebar(window);\n\n    this.broadcasterService.subscribe(BroadcasterSubscriptionId, (message: any) => {\n      this.ngZone.run(async () => {\n        switch (message.command) {\n          case \"syncCompleted\":\n            if (this.isLoading) {\n              window.setTimeout(() => {\n                this.load();\n              }, 500);\n            }\n            break;\n          case \"collectPageDetailsResponse\":\n            if (message.sender === BroadcasterSubscriptionId) {\n              this.pageDetails.push({\n                frameId: message.webExtSender.frameId,\n                tab: message.tab,\n                details: message.details,\n              });\n            }\n            break;\n          default:\n            break;\n        }\n\n        this.changeDetectorRef.detectChanges();\n      });\n    });\n\n    if (!this.syncService.syncInProgress) {\n      await this.load();\n    } else {\n      this.loadedTimeout = window.setTimeout(async () => {\n        if (!this.isLoading) {\n          await this.load();\n        }\n      }, 5000);\n    }\n\n    this.search$\n      .pipe(debounceTime(500), takeUntil(this.destroy$))\n      .subscribe(() => this.searchVault());\n  }\n\n  ngOnDestroy() {\n    window.clearTimeout(this.loadedTimeout);\n    this.broadcasterService.unsubscribe(BroadcasterSubscriptionId);\n\n    this.destroy$.next();\n    this.destroy$.complete();\n  }\n\n  async refresh() {\n    await this.load();\n  }\n\n  addCipher() {\n    this.router.navigate([\"/add-cipher\"], {\n      queryParams: {\n        name: this.hostname,\n        uri: this.url,\n        selectedVault: this.vaultFilterService.getVaultFilter().selectedOrganizationId,\n      },\n    });\n  }\n\n  viewCipher(cipher: CipherView) {\n    this.router.navigate([\"/view-cipher\"], { queryParams: { cipherId: cipher.id } });\n  }\n\n  async fillCipher(cipher: CipherView) {\n    if (\n      cipher.reprompt !== CipherRepromptType.None &&\n      !(await this.passwordRepromptService.showPasswordPrompt())\n    ) {\n      return;\n    }\n\n    this.totpCode = null;\n    if (this.totpTimeout != null) {\n      window.clearTimeout(this.totpTimeout);\n    }\n\n    if (this.pageDetails == null || this.pageDetails.length === 0) {\n      this.platformUtilsService.showToast(\"error\", null, this.i18nService.t(\"autofillError\"));\n      return;\n    }\n\n    try {\n      this.totpCode = await this.autofillService.doAutoFill({\n        tab: this.tab,\n        cipher: cipher,\n        pageDetails: this.pageDetails,\n        doc: window.document,\n        fillNewPassword: true,\n      });\n      if (this.totpCode != null) {\n        this.platformUtilsService.copyToClipboard(this.totpCode, { window: window });\n      }\n      if (this.popupUtilsService.inPopup(window)) {\n        if (this.platformUtilsService.isFirefox() || this.platformUtilsService.isSafari()) {\n          BrowserApi.closePopup(window);\n        } else {\n          // Slight delay to fix bug in Chromium browsers where popup closes without copying totp to clipboard\n          setTimeout(() => BrowserApi.closePopup(window), 50);\n        }\n      }\n    } catch {\n      this.ngZone.run(() => {\n        this.platformUtilsService.showToast(\"error\", null, this.i18nService.t(\"autofillError\"));\n        this.changeDetectorRef.detectChanges();\n      });\n    }\n  }\n\n  searchVault() {\n    if (!this.searchService.isSearchable(this.searchText)) {\n      return;\n    }\n\n    this.router.navigate([\"/tabs/vault\"], { queryParams: { searchText: this.searchText } });\n  }\n\n  closeOnEsc(e: KeyboardEvent) {\n    // If input not empty, use browser default behavior of clearing input instead\n    if (e.key === \"Escape\" && (this.searchText == null || this.searchText === \"\")) {\n      BrowserApi.closePopup(window);\n    }\n  }\n\n  protected async load() {\n    this.isLoading = false;\n    this.tab = await BrowserApi.getTabFromCurrentWindow();\n    if (this.tab != null) {\n      this.url = this.tab.url;\n    } else {\n      this.loginCiphers = [];\n      this.isLoading = this.loaded = true;\n      return;\n    }\n\n    this.hostname = Utils.getHostname(this.url);\n    this.pageDetails = [];\n    BrowserApi.tabSendMessage(this.tab, {\n      command: \"collectPageDetails\",\n      tab: this.tab,\n      sender: BroadcasterSubscriptionId,\n    });\n\n    const otherTypes: CipherType[] = [];\n    const dontShowCards = await this.stateService.getDontShowCardsCurrentTab();\n    const dontShowIdentities = await this.stateService.getDontShowIdentitiesCurrentTab();\n    this.showOrganizations = this.organizationService.hasOrganizations();\n    if (!dontShowCards) {\n      otherTypes.push(CipherType.Card);\n    }\n    if (!dontShowIdentities) {\n      otherTypes.push(CipherType.Identity);\n    }\n\n    const ciphers = await this.cipherService.getAllDecryptedForUrl(\n      this.url,\n      otherTypes.length > 0 ? otherTypes : null\n    );\n\n    this.loginCiphers = [];\n    this.cardCiphers = [];\n    this.identityCiphers = [];\n\n    ciphers.forEach((c) => {\n      if (!this.vaultFilterService.filterCipherForSelectedVault(c)) {\n        switch (c.type) {\n          case CipherType.Login:\n            this.loginCiphers.push(c);\n            break;\n          case CipherType.Card:\n            this.cardCiphers.push(c);\n            break;\n          case CipherType.Identity:\n            this.identityCiphers.push(c);\n            break;\n          default:\n            break;\n        }\n      }\n    });\n\n    this.loginCiphers = this.loginCiphers.sort((a, b) =>\n      this.cipherService.sortCiphersByLastUsedThenName(a, b)\n    );\n    this.isLoading = this.loaded = true;\n  }\n}\n","import { Directive, OnInit } from \"@angular/core\";\n\nimport { I18nService } from \"@bitwarden/common/abstractions/i18n.service\";\nimport { PlatformUtilsService } from \"@bitwarden/common/abstractions/platformUtils.service\";\nimport { CipherService } from \"@bitwarden/common/vault/abstractions/cipher.service\";\nimport { PasswordHistoryView } from \"@bitwarden/common/vault/models/view/password-history.view\";\n\n@Directive()\nexport class PasswordHistoryComponent implements OnInit {\n  cipherId: string;\n  history: PasswordHistoryView[] = [];\n\n  constructor(\n    protected cipherService: CipherService,\n    protected platformUtilsService: PlatformUtilsService,\n    protected i18nService: I18nService,\n    private win: Window\n  ) {}\n\n  async ngOnInit() {\n    await this.init();\n  }\n\n  copy(password: string) {\n    const copyOptions = this.win != null ? { window: this.win } : null;\n    this.platformUtilsService.copyToClipboard(password, copyOptions);\n    this.platformUtilsService.showToast(\n      \"info\",\n      null,\n      this.i18nService.t(\"valueCopied\", this.i18nService.t(\"password\"))\n    );\n  }\n\n  protected async init() {\n    const cipher = await this.cipherService.get(this.cipherId);\n    const decCipher = await cipher.decrypt();\n    this.history = decCipher.passwordHistory == null ? [] : decCipher.passwordHistory;\n  }\n}\n","import { Pipe, PipeTransform } from \"@angular/core\";\n\nimport { Utils } from \"@bitwarden/common/misc/utils\";\n\n/*\n An updated pipe that sanitizes HTML, highlights numbers and special characters (in different colors each)\n and handles Unicode / Emoji characters correctly.\n*/\n@Pipe({ name: \"colorPassword\" })\nexport class ColorPasswordPipe implements PipeTransform {\n  transform(password: string) {\n    const template = (character: string, type: string) =>\n      `<span class=\"password-${type}\">${character}</span>`;\n    const colorizedPassword = this.generateTemplate(password, template);\n    return colorizedPassword;\n  }\n\n  protected generateTemplate(\n    password: string,\n    templateGenerator: (chararacter: string, type: string, index?: number) => string\n  ) {\n    // Convert to an array to handle cases that stings have special characters, ie: emoji.\n    const passwordArray = Array.from(password);\n    let colorizedPassword = \"\";\n    for (let i = 0; i < passwordArray.length; i++) {\n      let character = passwordArray[i];\n      let isSpecial = false;\n      // Sanitize HTML first.\n      switch (character) {\n        case \"&\":\n          character = \"&amp;\";\n          isSpecial = true;\n          break;\n        case \"<\":\n          character = \"&lt;\";\n          isSpecial = true;\n          break;\n        case \">\":\n          character = \"&gt;\";\n          isSpecial = true;\n          break;\n        case \" \":\n          character = \"&nbsp;\";\n          isSpecial = true;\n          break;\n        default:\n          break;\n      }\n      let type = \"letter\";\n      if (character.match(Utils.regexpEmojiPresentation)) {\n        type = \"emoji\";\n      } else if (isSpecial || character.match(/[^\\w ]/)) {\n        type = \"special\";\n      } else if (character.match(/\\d/)) {\n        type = \"number\";\n      }\n      colorizedPassword += templateGenerator(character, type, i);\n    }\n    return colorizedPassword;\n  }\n}\n","<header>\n  <div class=\"left\">\n    <button type=\"button\" (click)=\"close()\">{{ \"close\" | i18n }}</button>\n  </div>\n  <h1 class=\"center\">\n    <span class=\"title\">{{ \"passwordHistory\" | i18n }}</span>\n  </h1>\n  <div class=\"right\"></div>\n</header>\n<main tabindex=\"-1\">\n  <div class=\"box list full-list\" *ngIf=\"history && history.length\">\n    <div class=\"box-content\">\n      <div class=\"box-content-row box-content-row-flex\" *ngFor=\"let h of history\">\n        <div class=\"row-main\">\n          <div class=\"row-main-content\">\n            <span\n              class=\"text monospaced no-ellipsis\"\n              [innerHTML]=\"h.password | colorPassword\"\n            ></span>\n            <span class=\"detail\">{{ h.lastUsedDate | date: \"medium\" }}</span>\n          </div>\n        </div>\n        <div class=\"action-buttons\">\n          <button\n            type=\"button\"\n            class=\"row-btn\"\n            appStopClick\n            appA11yTitle=\"{{ 'copyPassword' | i18n }}\"\n            (click)=\"copy(h.password)\"\n          >\n            <i class=\"bwi bwi-lg bwi-clone\" aria-hidden=\"true\"></i>\n          </button>\n        </div>\n      </div>\n    </div>\n  </div>\n  <div class=\"no-items\" *ngIf=\"!history || !history.length\">\n    <p>{{ \"noPasswordsInList\" | i18n }}</p>\n  </div>\n</main>\n","import { Location } from \"@angular/common\";\nimport { Component } from \"@angular/core\";\nimport { ActivatedRoute } from \"@angular/router\";\nimport { first } from \"rxjs/operators\";\n\nimport { PasswordHistoryComponent as BasePasswordHistoryComponent } from \"@bitwarden/angular/vault/components/password-history.component\";\nimport { I18nService } from \"@bitwarden/common/abstractions/i18n.service\";\nimport { PlatformUtilsService } from \"@bitwarden/common/abstractions/platformUtils.service\";\nimport { CipherService } from \"@bitwarden/common/vault/abstractions/cipher.service\";\n\n@Component({\n  selector: \"app-password-history\",\n  templateUrl: \"password-history.component.html\",\n})\n// eslint-disable-next-line rxjs-angular/prefer-takeuntil\nexport class PasswordHistoryComponent extends BasePasswordHistoryComponent {\n  constructor(\n    cipherService: CipherService,\n    platformUtilsService: PlatformUtilsService,\n    i18nService: I18nService,\n    private location: Location,\n    private route: ActivatedRoute\n  ) {\n    super(cipherService, platformUtilsService, i18nService, window);\n  }\n\n  async ngOnInit() {\n    // eslint-disable-next-line rxjs-angular/prefer-takeuntil, rxjs/no-async-subscribe\n    this.route.queryParams.pipe(first()).subscribe(async (params) => {\n      if (params.cipherId) {\n        this.cipherId = params.cipherId;\n      } else {\n        this.close();\n      }\n      await this.init();\n    });\n  }\n\n  close() {\n    this.location.back();\n  }\n}\n","type CheckableBase = {\n  checked?: boolean;\n};\n\nexport type Checkable<T> = T & CheckableBase;\n\nexport function isChecked(item: CheckableBase): boolean {\n  return !!item.checked;\n}\n","import { Directive, EventEmitter, Input, OnDestroy, OnInit, Output } from \"@angular/core\";\nimport { firstValueFrom, map, Observable, Subject, takeUntil } from \"rxjs\";\n\nimport { CollectionService } from \"@bitwarden/common/abstractions/collection.service\";\nimport { I18nService } from \"@bitwarden/common/abstractions/i18n.service\";\nimport { LogService } from \"@bitwarden/common/abstractions/log.service\";\nimport {\n  isNotProviderUser,\n  OrganizationService,\n} from \"@bitwarden/common/abstractions/organization/organization.service.abstraction\";\nimport { PlatformUtilsService } from \"@bitwarden/common/abstractions/platformUtils.service\";\nimport { OrganizationUserStatusType } from \"@bitwarden/common/enums/organizationUserStatusType\";\nimport { Utils } from \"@bitwarden/common/misc/utils\";\nimport { Organization } from \"@bitwarden/common/models/domain/organization\";\nimport { CollectionView } from \"@bitwarden/common/models/view/collection.view\";\nimport { Checkable, isChecked } from \"@bitwarden/common/types/checkable\";\nimport { CipherService } from \"@bitwarden/common/vault/abstractions/cipher.service\";\nimport { CipherView } from \"@bitwarden/common/vault/models/view/cipher.view\";\n\n@Directive()\nexport class ShareComponent implements OnInit, OnDestroy {\n  @Input() cipherId: string;\n  @Input() organizationId: string;\n  @Output() onSharedCipher = new EventEmitter();\n\n  formPromise: Promise<void>;\n  cipher: CipherView;\n  collections: Checkable<CollectionView>[] = [];\n  organizations$: Observable<Organization[]>;\n\n  protected writeableCollections: Checkable<CollectionView>[] = [];\n\n  private _destroy = new Subject<void>();\n\n  constructor(\n    protected collectionService: CollectionService,\n    protected platformUtilsService: PlatformUtilsService,\n    protected i18nService: I18nService,\n    protected cipherService: CipherService,\n    private logService: LogService,\n    protected organizationService: OrganizationService\n  ) {}\n\n  async ngOnInit() {\n    await this.load();\n  }\n\n  ngOnDestroy(): void {\n    this._destroy.next();\n    this._destroy.complete();\n  }\n\n  async load() {\n    const allCollections = await this.collectionService.getAllDecrypted();\n    this.writeableCollections = allCollections.map((c) => c).filter((c) => !c.readOnly);\n\n    this.organizations$ = this.organizationService.organizations$.pipe(\n      map((orgs) => {\n        return orgs\n          .filter(\n            (o) =>\n              o.enabled && o.status === OrganizationUserStatusType.Confirmed && isNotProviderUser(o)\n          )\n          .sort(Utils.getSortFunction(this.i18nService, \"name\"));\n      })\n    );\n\n    this.organizations$.pipe(takeUntil(this._destroy)).subscribe((orgs) => {\n      if (this.organizationId == null && orgs.length > 0) {\n        this.organizationId = orgs[0].id;\n      }\n    });\n\n    const cipherDomain = await this.cipherService.get(this.cipherId);\n    this.cipher = await cipherDomain.decrypt();\n\n    this.filterCollections();\n  }\n\n  filterCollections() {\n    this.writeableCollections.forEach((c) => (c.checked = false));\n    if (this.organizationId == null || this.writeableCollections.length === 0) {\n      this.collections = [];\n    } else {\n      this.collections = this.writeableCollections.filter(\n        (c) => c.organizationId === this.organizationId\n      );\n    }\n  }\n\n  async submit(): Promise<boolean> {\n    const selectedCollectionIds = this.collections.filter(isChecked).map((c) => c.id);\n    if (selectedCollectionIds.length === 0) {\n      this.platformUtilsService.showToast(\n        \"error\",\n        this.i18nService.t(\"errorOccurred\"),\n        this.i18nService.t(\"selectOneCollection\")\n      );\n      return;\n    }\n\n    const cipherDomain = await this.cipherService.get(this.cipherId);\n    const cipherView = await cipherDomain.decrypt();\n    const orgs = await firstValueFrom(this.organizations$);\n    const orgName =\n      orgs.find((o) => o.id === this.organizationId)?.name ?? this.i18nService.t(\"organization\");\n\n    try {\n      this.formPromise = this.cipherService\n        .shareWithServer(cipherView, this.organizationId, selectedCollectionIds)\n        .then(async () => {\n          this.onSharedCipher.emit();\n          this.platformUtilsService.showToast(\n            \"success\",\n            null,\n            this.i18nService.t(\"movedItemToOrg\", cipherView.name, orgName)\n          );\n        });\n      await this.formPromise;\n      return true;\n    } catch (e) {\n      this.logService.error(e);\n    }\n    return false;\n  }\n\n  get canSave() {\n    if (this.collections != null) {\n      for (let i = 0; i < this.collections.length; i++) {\n        if (this.collections[i].checked) {\n          return true;\n        }\n      }\n    }\n    return false;\n  }\n}\n","<form #form (ngSubmit)=\"submit()\" [appApiAction]=\"formPromise\">\n  <ng-container *ngIf=\"organizations$ | async as organizations\">\n    <header>\n      <div class=\"left\">\n        <button type=\"button\" (click)=\"cancel()\">{{ \"cancel\" | i18n }}</button>\n      </div>\n      <h1 class=\"center\">\n        <span class=\"title\">{{ \"moveToOrganization\" | i18n }}</span>\n      </h1>\n      <div class=\"right\">\n        <button\n          type=\"submit\"\n          [disabled]=\"form.loading || !canSave\"\n          *ngIf=\"organizations && organizations.length\"\n        >\n          <span [hidden]=\"form.loading\">{{ \"move\" | i18n }}</span>\n          <i\n            class=\"bwi bwi-spinner bwi-lg bwi-spin\"\n            [hidden]=\"!form.loading\"\n            aria-hidden=\"true\"\n          ></i>\n        </button>\n      </div>\n    </header>\n    <main tabindex=\"-1\">\n      <div class=\"box\">\n        <div class=\"box-content\" *ngIf=\"!organizations || !organizations.length\">\n          <div class=\"box-content-row padded no-hover\">\n            {{ \"noOrganizationsList\" | i18n }}\n          </div>\n        </div>\n        <div class=\"box-content\" *ngIf=\"organizations && organizations.length\">\n          <div class=\"box-content-row\" appBoxRow>\n            <label for=\"organization\">{{ \"organization\" | i18n }}</label>\n            <select\n              id=\"organization\"\n              name=\"OrganizationId\"\n              aria-describedby=\"organizationHelp\"\n              [(ngModel)]=\"organizationId\"\n              (change)=\"filterCollections()\"\n            >\n              <option *ngFor=\"let o of organizations\" [ngValue]=\"o.id\">{{ o.name }}</option>\n            </select>\n          </div>\n        </div>\n        <div id=\"organizationHelp\" class=\"box-footer\">\n          {{ \"moveToOrgDesc\" | i18n }}\n        </div>\n      </div>\n      <div class=\"box\" *ngIf=\"organizations && organizations.length\">\n        <h2 class=\"box-header\">\n          {{ \"collections\" | i18n }}\n        </h2>\n        <div class=\"box-content\" *ngIf=\"!collections || !collections.length\">\n          <div class=\"box-content-row padded no-hover\">\n            {{ \"noCollectionsInList\" | i18n }}\n          </div>\n        </div>\n        <div class=\"box-content\" *ngIf=\"collections && collections.length\">\n          <div\n            class=\"box-content-row box-content-row-checkbox\"\n            *ngFor=\"let c of collections; let i = index\"\n            appBoxRow\n          >\n            <label for=\"collection_{{ i }}\">{{ c.name }}</label>\n            <input\n              id=\"collection_{{ i }}\"\n              type=\"checkbox\"\n              [(ngModel)]=\"c.checked\"\n              name=\"Collection[{{ i }}].Checked\"\n            />\n          </div>\n        </div>\n      </div>\n    </main>\n  </ng-container>\n</form>\n","import { Component } from \"@angular/core\";\nimport { ActivatedRoute, Router } from \"@angular/router\";\nimport { first } from \"rxjs/operators\";\n\nimport { ShareComponent as BaseShareComponent } from \"@bitwarden/angular/components/share.component\";\nimport { CollectionService } from \"@bitwarden/common/abstractions/collection.service\";\nimport { I18nService } from \"@bitwarden/common/abstractions/i18n.service\";\nimport { LogService } from \"@bitwarden/common/abstractions/log.service\";\nimport { OrganizationService } from \"@bitwarden/common/abstractions/organization/organization.service.abstraction\";\nimport { PlatformUtilsService } from \"@bitwarden/common/abstractions/platformUtils.service\";\nimport { CipherService } from \"@bitwarden/common/vault/abstractions/cipher.service\";\n\n@Component({\n  selector: \"app-vault-share\",\n  templateUrl: \"share.component.html\",\n})\n// eslint-disable-next-line rxjs-angular/prefer-takeuntil\nexport class ShareComponent extends BaseShareComponent {\n  constructor(\n    collectionService: CollectionService,\n    platformUtilsService: PlatformUtilsService,\n    i18nService: I18nService,\n    logService: LogService,\n    cipherService: CipherService,\n    private route: ActivatedRoute,\n    private router: Router,\n    organizationService: OrganizationService\n  ) {\n    super(\n      collectionService,\n      platformUtilsService,\n      i18nService,\n      cipherService,\n      logService,\n      organizationService\n    );\n  }\n\n  async ngOnInit() {\n    // eslint-disable-next-line rxjs-angular/prefer-takeuntil\n    this.onSharedCipher.subscribe(() => {\n      this.router.navigate([\"view-cipher\", { cipherId: this.cipherId }]);\n    });\n    // eslint-disable-next-line rxjs-angular/prefer-takeuntil, rxjs/no-async-subscribe\n    this.route.queryParams.pipe(first()).subscribe(async (params) => {\n      this.cipherId = params.cipherId;\n      await this.load();\n    });\n  }\n\n  async submit(): Promise<boolean> {\n    const success = await super.submit();\n    if (success) {\n      this.cancel();\n    }\n    return success;\n  }\n\n  cancel() {\n    this.router.navigate([\"/view-cipher\"], {\n      replaceUrl: true,\n      queryParams: { cipherId: this.cipher.id },\n    });\n  }\n}\n","import { Jsonify } from \"type-fest\";\n\nexport class BrowserComponentState {\n  scrollY: number;\n  searchText: string;\n\n  static fromJSON(json: Jsonify<BrowserComponentState>) {\n    if (json == null) {\n      return null;\n    }\n\n    return Object.assign(new BrowserComponentState(), json);\n  }\n}\n","import { Utils } from \"@bitwarden/common/misc/utils\";\nimport { CollectionView } from \"@bitwarden/common/models/view/collection.view\";\nimport { DeepJsonify } from \"@bitwarden/common/types/deep-jsonify\";\nimport { CipherType } from \"@bitwarden/common/vault/enums/cipher-type\";\nimport { CipherView } from \"@bitwarden/common/vault/models/view/cipher.view\";\nimport { FolderView } from \"@bitwarden/common/vault/models/view/folder.view\";\n\nimport { BrowserComponentState } from \"./browserComponentState\";\n\nexport class BrowserGroupingsComponentState extends BrowserComponentState {\n  favoriteCiphers: CipherView[];\n  noFolderCiphers: CipherView[];\n  ciphers: CipherView[];\n  collectionCounts: Map<string, number>;\n  folderCounts: Map<string, number>;\n  typeCounts: Map<CipherType, number>;\n  folders: FolderView[];\n  collections: CollectionView[];\n  deletedCount: number;\n\n  toJSON() {\n    return Utils.merge(this, {\n      collectionCounts: Utils.mapToRecord(this.collectionCounts),\n      folderCounts: Utils.mapToRecord(this.folderCounts),\n      typeCounts: Utils.mapToRecord(this.typeCounts),\n    });\n  }\n\n  static fromJSON(json: DeepJsonify<BrowserGroupingsComponentState>) {\n    if (json == null) {\n      return null;\n    }\n\n    return Object.assign(new BrowserGroupingsComponentState(), json, {\n      favoriteCiphers: json.favoriteCiphers?.map((c) => CipherView.fromJSON(c)),\n      noFolderCiphers: json.noFolderCiphers?.map((c) => CipherView.fromJSON(c)),\n      ciphers: json.ciphers?.map((c) => CipherView.fromJSON(c)),\n      collectionCounts: Utils.recordToMap(json.collectionCounts),\n      folderCounts: Utils.recordToMap(json.folderCounts),\n      typeCounts: Utils.recordToMap(json.typeCounts),\n      folders: json.folders?.map((f) => FolderView.fromJSON(f)),\n    });\n  }\n}\n","import { StateService as BaseStateServiceAbstraction } from \"@bitwarden/common/abstractions/state.service\";\nimport { StorageOptions } from \"@bitwarden/common/models/domain/storage-options\";\n\nimport { Account } from \"../../models/account\";\nimport { BrowserComponentState } from \"../../models/browserComponentState\";\nimport { BrowserGroupingsComponentState } from \"../../models/browserGroupingsComponentState\";\nimport { BrowserSendComponentState } from \"../../models/browserSendComponentState\";\n\nexport abstract class BrowserStateService extends BaseStateServiceAbstraction<Account> {\n  getBrowserGroupingComponentState: (\n    options?: StorageOptions\n  ) => Promise<BrowserGroupingsComponentState>;\n  setBrowserGroupingComponentState: (\n    value: BrowserGroupingsComponentState,\n    options?: StorageOptions\n  ) => Promise<void>;\n  getBrowserVaultItemsComponentState: (options?: StorageOptions) => Promise<BrowserComponentState>;\n  setBrowserVaultItemsComponentState: (\n    value: BrowserComponentState,\n    options?: StorageOptions\n  ) => Promise<void>;\n  getBrowserSendComponentState: (options?: StorageOptions) => Promise<BrowserSendComponentState>;\n  setBrowserSendComponentState: (\n    value: BrowserSendComponentState,\n    options?: StorageOptions\n  ) => Promise<void>;\n  getBrowserSendTypeComponentState: (options?: StorageOptions) => Promise<BrowserComponentState>;\n  setBrowserSendTypeComponentState: (\n    value: BrowserComponentState,\n    options?: StorageOptions\n  ) => Promise<void>;\n}\n","<header>\n  <div class=\"left\">\n    <app-pop-out></app-pop-out>\n  </div>\n  <h1 class=\"sr-only\">{{ \"myVault\" | i18n }}</h1>\n  <div class=\"search\">\n    <input\n      type=\"{{ searchTypeSearch ? 'search' : 'text' }}\"\n      placeholder=\"{{ 'searchVault' | i18n }}\"\n      id=\"search\"\n      [(ngModel)]=\"searchText\"\n      (input)=\"search(200)\"\n      autocomplete=\"off\"\n      appAutofocus\n      (keydown)=\"closeOnEsc($event)\"\n    />\n    <i class=\"bwi bwi-search\"></i>\n  </div>\n  <div class=\"right\">\n    <button type=\"button\" (click)=\"addCipher()\" appA11yTitle=\"{{ 'addItem' | i18n }}\">\n      <i class=\"bwi bwi-plus bwi-lg bwi-fw\" aria-hidden=\"true\"></i>\n    </button>\n  </div>\n</header>\n<main tabindex=\"-1\" cdk-scrollable>\n  <app-vault-select\n    (onVaultSelectionChanged)=\"vaultFilterChanged()\"\n    class=\"select-index-top\"\n  ></app-vault-select>\n  <div class=\"no-items\" *ngIf=\"(!ciphers || !ciphers.length) && !showSearching()\">\n    <i class=\"bwi bwi-spinner bwi-spin bwi-3x\" *ngIf=\"!loaded\"></i>\n    <ng-container *ngIf=\"loaded\">\n      <img class=\"no-items-image\" aria-hidden=\"true\" />\n      <p>{{ \"noItemsInList\" | i18n }}</p>\n      <button type=\"button\" (click)=\"addCipher()\" class=\"btn block primary link\">\n        {{ \"addItem\" | i18n }}\n      </button>\n    </ng-container>\n  </div>\n  <ng-container *ngIf=\"ciphers && ciphers.length && !showSearching()\">\n    <div class=\"box list\" *ngIf=\"favoriteCiphers\">\n      <h2 class=\"box-header\">\n        {{ \"favorites\" | i18n }}\n        <span class=\"flex-right\">{{ favoriteCiphers.length }}</span>\n      </h2>\n      <div class=\"box-content\">\n        <app-cipher-row\n          *ngFor=\"let favoriteCipher of favoriteCiphers\"\n          [cipher]=\"favoriteCipher\"\n          title=\"{{ 'viewItem' | i18n }}\"\n          (onSelected)=\"selectCipher($event)\"\n          (launchEvent)=\"launchCipher($event)\"\n        >\n        </app-cipher-row>\n      </div>\n    </div>\n    <div class=\"box list\">\n      <h2 class=\"box-header\">\n        {{ \"types\" | i18n }}\n        <span class=\"flex-right\">4</span>\n      </h2>\n      <div class=\"box-content single-line\">\n        <button\n          type=\"button\"\n          class=\"box-content-row\"\n          appStopClick\n          (click)=\"selectType(cipherType.Login)\"\n        >\n          <div class=\"row-main\">\n            <div class=\"icon\"><i class=\"bwi bwi-fw bwi-lg bwi-globe\"></i></div>\n            <span class=\"text\">{{ \"typeLogin\" | i18n }}</span>\n          </div>\n          <span class=\"row-sub-label\">{{ typeCounts.get(cipherType.Login) || 0 }}</span>\n          <span><i class=\"bwi bwi-angle-right bwi-lg row-sub-icon\"></i></span>\n        </button>\n        <button\n          type=\"button\"\n          class=\"box-content-row\"\n          appStopClick\n          (click)=\"selectType(cipherType.Card)\"\n        >\n          <div class=\"row-main\">\n            <div class=\"icon\"><i class=\"bwi bwi-fw bwi-lg bwi-credit-card\"></i></div>\n            <span class=\"text\">{{ \"typeCard\" | i18n }}</span>\n          </div>\n          <span class=\"row-sub-label\">{{ typeCounts.get(cipherType.Card) || 0 }}</span>\n          <span><i class=\"bwi bwi-angle-right bwi-lg row-sub-icon\"></i></span>\n        </button>\n        <button\n          type=\"button\"\n          class=\"box-content-row\"\n          appStopClick\n          (click)=\"selectType(cipherType.Identity)\"\n        >\n          <div class=\"row-main\">\n            <div class=\"icon\"><i class=\"bwi bwi-fw bwi-lg bwi-id-card\"></i></div>\n            <span class=\"text\">{{ \"typeIdentity\" | i18n }}</span>\n          </div>\n          <span class=\"row-sub-label\">{{ typeCounts.get(cipherType.Identity) || 0 }}</span>\n          <span><i class=\"bwi bwi-angle-right bwi-lg row-sub-icon\"></i></span>\n        </button>\n        <button\n          type=\"button\"\n          class=\"box-content-row\"\n          appStopClick\n          (click)=\"selectType(cipherType.SecureNote)\"\n        >\n          <div class=\"row-main\">\n            <div class=\"icon\"><i class=\"bwi bwi-fw bwi-lg bwi-sticky-note\"></i></div>\n            <span class=\"text\">{{ \"typeSecureNote\" | i18n }}</span>\n          </div>\n          <span class=\"row-sub-label\">{{ typeCounts.get(cipherType.SecureNote) || 0 }}</span>\n          <span><i class=\"bwi bwi-angle-right bwi-lg row-sub-icon\"></i></span>\n        </button>\n      </div>\n    </div>\n    <div class=\"box list\" *ngIf=\"nestedFolders?.length\">\n      <h2 class=\"box-header\">\n        {{ \"folders\" | i18n }}\n        <span class=\"flex-right\">{{ folderCount }}</span>\n      </h2>\n      <div class=\"box-content single-line\">\n        <button\n          type=\"button\"\n          *ngFor=\"let f of nestedFolders\"\n          class=\"box-content-row\"\n          appStopClick\n          (click)=\"selectFolder(f.node)\"\n        >\n          <div class=\"row-main\">\n            <div class=\"icon\">\n              <i class=\"bwi bwi-fw bwi-lg bwi-folder\"></i>\n            </div>\n            <span class=\"text\">{{ f.node.name }}</span>\n          </div>\n          <span class=\"row-sub-label\">{{ folderCounts.get(f.node.id) || 0 }}</span>\n          <span><i class=\"bwi bwi-angle-right bwi-lg row-sub-icon\"></i></span>\n        </button>\n      </div>\n    </div>\n    <div class=\"box list\" *ngIf=\"showCollections && nestedCollections && nestedCollections.length\">\n      <h2 class=\"box-header\">\n        {{ \"collections\" | i18n }}\n        <span class=\"flex-right\">{{ nestedCollections.length }}</span>\n      </h2>\n      <div class=\"box-content single-line\">\n        <button\n          type=\"button\"\n          *ngFor=\"let nestedCollection of nestedCollections\"\n          class=\"box-content-row\"\n          appStopClick\n          (click)=\"selectCollection(nestedCollection.node)\"\n        >\n          <div class=\"row-main\">\n            <div class=\"icon\"><i class=\"bwi bwi-fw bwi-lg bwi-collection\"></i></div>\n            <span class=\"text\">{{ nestedCollection.node.name }}</span>\n          </div>\n          <span class=\"row-sub-label\">{{\n            collectionCounts.get(nestedCollection.node.id) || 0\n          }}</span>\n          <span><i class=\"bwi bwi-angle-right bwi-lg row-sub-icon\"></i></span>\n        </button>\n      </div>\n    </div>\n    <div class=\"box list\" *ngIf=\"showNoFolderCiphers\">\n      <h2 class=\"box-header\">\n        {{ \"noneFolder\" | i18n }}\n        <div class=\"flex-right\">{{ noFolderCiphers.length }}</div>\n      </h2>\n      <div class=\"box-content\">\n        <app-cipher-row\n          *ngFor=\"let noFolderCipher of noFolderCiphers\"\n          [cipher]=\"noFolderCipher\"\n          title=\"{{ 'viewItem' | i18n }}\"\n          (onSelected)=\"selectCipher($event)\"\n          (launchEvent)=\"launchCipher($event)\"\n        >\n        </app-cipher-row>\n      </div>\n    </div>\n    <div class=\"box list\" *ngIf=\"deletedCount\">\n      <h2 class=\"box-header\">\n        {{ \"trash\" | i18n }}\n        <span class=\"flex-right\">{{ deletedCount }}</span>\n      </h2>\n      <div class=\"box-content single-line\">\n        <button type=\"button\" class=\"box-content-row\" appStopClick (click)=\"selectTrash()\">\n          <div class=\"row-main\">\n            <div class=\"icon\"><i class=\"bwi bwi-fw bwi-lg bwi-trash\"></i></div>\n            <span class=\"text\">{{ \"trash\" | i18n }}</span>\n          </div>\n          <span class=\"row-sub-label\">{{ deletedCount }}</span>\n          <span><i class=\"bwi bwi-angle-right bwi-lg row-sub-icon\"></i></span>\n        </button>\n      </div>\n    </div>\n  </ng-container>\n  <ng-container *ngIf=\"showSearching()\">\n    <div class=\"no-items\" *ngIf=\"!ciphers || !ciphers.length\">\n      <p>{{ \"noItemsInList\" | i18n }}</p>\n    </div>\n    <cdk-virtual-scroll-viewport\n      itemSize=\"55\"\n      minBufferPx=\"400\"\n      maxBufferPx=\"600\"\n      *ngIf=\"ciphers && ciphers.length > 0\"\n    >\n      <div class=\"box list full-list\">\n        <div class=\"box-content\">\n          <app-cipher-row\n            *cdkVirtualFor=\"let searchedCipher of ciphers\"\n            [cipher]=\"searchedCipher\"\n            title=\"{{ 'viewItem' | i18n }}\"\n            (onSelected)=\"selectCipher($event)\"\n            (launchEvent)=\"launchCipher($event)\"\n          >\n          </app-cipher-row>\n        </div>\n      </div>\n    </cdk-virtual-scroll-viewport>\n  </ng-container>\n</main>\n","import { Location } from \"@angular/common\";\nimport { ChangeDetectorRef, Component, NgZone, OnDestroy, OnInit } from \"@angular/core\";\nimport { ActivatedRoute, Router } from \"@angular/router\";\nimport { firstValueFrom } from \"rxjs\";\nimport { first } from \"rxjs/operators\";\n\nimport { VaultFilter } from \"@bitwarden/angular/vault/vault-filter/models/vault-filter.model\";\nimport { BroadcasterService } from \"@bitwarden/common/abstractions/broadcaster.service\";\nimport { PlatformUtilsService } from \"@bitwarden/common/abstractions/platformUtils.service\";\nimport { SearchService } from \"@bitwarden/common/abstractions/search.service\";\nimport { TreeNode } from \"@bitwarden/common/models/domain/tree-node\";\nimport { CollectionView } from \"@bitwarden/common/models/view/collection.view\";\nimport { CipherService } from \"@bitwarden/common/vault/abstractions/cipher.service\";\nimport { SyncService } from \"@bitwarden/common/vault/abstractions/sync/sync.service.abstraction\";\nimport { CipherType } from \"@bitwarden/common/vault/enums/cipher-type\";\nimport { CipherView } from \"@bitwarden/common/vault/models/view/cipher.view\";\nimport { FolderView } from \"@bitwarden/common/vault/models/view/folder.view\";\n\nimport { BrowserApi } from \"../../../../browser/browserApi\";\nimport { BrowserGroupingsComponentState } from \"../../../../models/browserGroupingsComponentState\";\nimport { PopupUtilsService } from \"../../../../popup/services/popup-utils.service\";\nimport { BrowserStateService } from \"../../../../services/abstractions/browser-state.service\";\nimport { VaultFilterService } from \"../../../services/vault-filter.service\";\n\nconst ComponentId = \"VaultComponent\";\n\n@Component({\n  selector: \"app-vault-filter\",\n  templateUrl: \"vault-filter.component.html\",\n})\nexport class VaultFilterComponent implements OnInit, OnDestroy {\n  get showNoFolderCiphers(): boolean {\n    return (\n      this.noFolderCiphers != null &&\n      this.noFolderCiphers.length < this.noFolderListSize &&\n      this.collections.length === 0\n    );\n  }\n\n  get folderCount(): number {\n    return this.nestedFolders.length - (this.showNoFolderCiphers ? 0 : 1);\n  }\n  folders: FolderView[];\n  nestedFolders: TreeNode<FolderView>[];\n  collections: CollectionView[];\n  nestedCollections: TreeNode<CollectionView>[];\n  loaded = false;\n  cipherType = CipherType;\n  ciphers: CipherView[];\n  favoriteCiphers: CipherView[];\n  noFolderCiphers: CipherView[];\n  folderCounts = new Map<string, number>();\n  collectionCounts = new Map<string, number>();\n  typeCounts = new Map<CipherType, number>();\n  searchText: string;\n  state: BrowserGroupingsComponentState;\n  showLeftHeader = true;\n  searchPending = false;\n  searchTypeSearch = false;\n  deletedCount = 0;\n  vaultFilter: VaultFilter;\n  selectedOrganization: string = null;\n  showCollections = true;\n\n  private loadedTimeout: number;\n  private selectedTimeout: number;\n  private preventSelected = false;\n  private noFolderListSize = 100;\n  private searchTimeout: any = null;\n  private hasSearched = false;\n  private hasLoadedAllCiphers = false;\n  private allCiphers: CipherView[] = null;\n\n  constructor(\n    private cipherService: CipherService,\n    private router: Router,\n    private ngZone: NgZone,\n    private broadcasterService: BroadcasterService,\n    private changeDetectorRef: ChangeDetectorRef,\n    private route: ActivatedRoute,\n    private popupUtils: PopupUtilsService,\n    private syncService: SyncService,\n    private platformUtilsService: PlatformUtilsService,\n    private searchService: SearchService,\n    private location: Location,\n    private browserStateService: BrowserStateService,\n    private vaultFilterService: VaultFilterService\n  ) {\n    this.noFolderListSize = 100;\n  }\n\n  async ngOnInit() {\n    this.searchTypeSearch = !this.platformUtilsService.isSafari();\n    this.showLeftHeader = !(\n      this.popupUtils.inSidebar(window) && this.platformUtilsService.isFirefox()\n    );\n    await this.browserStateService.setBrowserVaultItemsComponentState(null);\n\n    this.broadcasterService.subscribe(ComponentId, (message: any) => {\n      this.ngZone.run(async () => {\n        switch (message.command) {\n          case \"syncCompleted\":\n            window.setTimeout(() => {\n              this.load();\n            }, 500);\n            break;\n          default:\n            break;\n        }\n\n        this.changeDetectorRef.detectChanges();\n      });\n    });\n\n    const restoredScopeState = await this.restoreState();\n    // eslint-disable-next-line rxjs-angular/prefer-takeuntil, rxjs/no-async-subscribe\n    this.route.queryParams.pipe(first()).subscribe(async (params) => {\n      this.state = await this.browserStateService.getBrowserGroupingComponentState();\n      if (this.state?.searchText) {\n        this.searchText = this.state.searchText;\n      } else if (params.searchText) {\n        this.searchText = params.searchText;\n        this.location.replaceState(\"vault\");\n      }\n\n      if (!this.syncService.syncInProgress) {\n        this.load();\n      } else {\n        this.loadedTimeout = window.setTimeout(() => {\n          if (!this.loaded) {\n            this.load();\n          }\n        }, 5000);\n      }\n\n      if (!this.syncService.syncInProgress || restoredScopeState) {\n        window.setTimeout(() => this.popupUtils.setContentScrollY(window, this.state?.scrollY), 0);\n      }\n    });\n  }\n\n  ngOnDestroy() {\n    if (this.loadedTimeout != null) {\n      window.clearTimeout(this.loadedTimeout);\n    }\n    if (this.selectedTimeout != null) {\n      window.clearTimeout(this.selectedTimeout);\n    }\n    this.saveState();\n    this.broadcasterService.unsubscribe(ComponentId);\n  }\n\n  async load() {\n    this.vaultFilter = this.vaultFilterService.getVaultFilter();\n\n    this.updateSelectedOrg();\n    await this.loadCollectionsAndFolders();\n    await this.loadCiphers();\n\n    if (this.showNoFolderCiphers && this.nestedFolders.length > 0) {\n      // Remove \"No Folder\" from folder listing\n      this.nestedFolders = this.nestedFolders.slice(0, this.nestedFolders.length - 1);\n    }\n\n    this.loaded = true;\n  }\n\n  async loadCiphers() {\n    this.allCiphers = await this.cipherService.getAllDecrypted();\n    if (!this.hasLoadedAllCiphers) {\n      this.hasLoadedAllCiphers = !this.searchService.isSearchable(this.searchText);\n    }\n    await this.search(null);\n    this.getCounts();\n  }\n\n  async loadCollections() {\n    const allCollections = await this.vaultFilterService.buildCollections(\n      this.selectedOrganization\n    );\n    this.collections = allCollections.fullList;\n    this.nestedCollections = allCollections.nestedList;\n  }\n\n  async loadFolders() {\n    const allFolders = await firstValueFrom(\n      this.vaultFilterService.buildNestedFolders(this.selectedOrganization)\n    );\n    this.folders = allFolders.fullList;\n    this.nestedFolders = allFolders.nestedList;\n  }\n\n  async search(timeout: number = null) {\n    this.searchPending = false;\n    if (this.searchTimeout != null) {\n      clearTimeout(this.searchTimeout);\n    }\n    const filterDeleted = (c: CipherView) => !c.isDeleted;\n    if (timeout == null) {\n      this.hasSearched = this.searchService.isSearchable(this.searchText);\n      this.ciphers = await this.searchService.searchCiphers(\n        this.searchText,\n        filterDeleted,\n        this.allCiphers\n      );\n      this.ciphers = this.ciphers.filter(\n        (c) => !this.vaultFilterService.filterCipherForSelectedVault(c)\n      );\n      return;\n    }\n    this.searchPending = true;\n    this.searchTimeout = setTimeout(async () => {\n      this.hasSearched = this.searchService.isSearchable(this.searchText);\n      if (!this.hasLoadedAllCiphers && !this.hasSearched) {\n        await this.loadCiphers();\n      } else {\n        this.ciphers = await this.searchService.searchCiphers(\n          this.searchText,\n          filterDeleted,\n          this.allCiphers\n        );\n      }\n      this.ciphers = this.ciphers.filter(\n        (c) => !this.vaultFilterService.filterCipherForSelectedVault(c)\n      );\n      this.searchPending = false;\n    }, timeout);\n  }\n\n  async selectType(type: CipherType) {\n    this.router.navigate([\"/ciphers\"], { queryParams: { type: type } });\n  }\n\n  async selectFolder(folder: FolderView) {\n    this.router.navigate([\"/ciphers\"], { queryParams: { folderId: folder.id || \"none\" } });\n  }\n\n  async selectCollection(collection: CollectionView) {\n    this.router.navigate([\"/ciphers\"], { queryParams: { collectionId: collection.id } });\n  }\n\n  async selectTrash() {\n    this.router.navigate([\"/ciphers\"], { queryParams: { deleted: true } });\n  }\n\n  async selectCipher(cipher: CipherView) {\n    this.selectedTimeout = window.setTimeout(() => {\n      if (!this.preventSelected) {\n        this.router.navigate([\"/view-cipher\"], { queryParams: { cipherId: cipher.id } });\n      }\n      this.preventSelected = false;\n    }, 200);\n  }\n\n  async launchCipher(cipher: CipherView) {\n    if (cipher.type !== CipherType.Login || !cipher.login.canLaunch) {\n      return;\n    }\n\n    if (this.selectedTimeout != null) {\n      window.clearTimeout(this.selectedTimeout);\n    }\n    this.preventSelected = true;\n    await this.cipherService.updateLastLaunchedDate(cipher.id);\n    BrowserApi.createNewTab(cipher.login.launchUri);\n    if (this.popupUtils.inPopup(window)) {\n      BrowserApi.closePopup(window);\n    }\n  }\n\n  async addCipher() {\n    this.router.navigate([\"/add-cipher\"], {\n      queryParams: { selectedVault: this.vaultFilter.selectedOrganizationId },\n    });\n  }\n\n  async vaultFilterChanged() {\n    if (this.showSearching) {\n      await this.search();\n    }\n    this.updateSelectedOrg();\n    await this.loadCollectionsAndFolders();\n    this.getCounts();\n  }\n\n  updateSelectedOrg() {\n    this.vaultFilter = this.vaultFilterService.getVaultFilter();\n    if (this.vaultFilter.selectedOrganizationId != null) {\n      this.selectedOrganization = this.vaultFilter.selectedOrganizationId;\n    } else {\n      this.selectedOrganization = null;\n    }\n  }\n\n  getCounts() {\n    let favoriteCiphers: CipherView[] = null;\n    let noFolderCiphers: CipherView[] = null;\n    const folderCounts = new Map<string, number>();\n    const collectionCounts = new Map<string, number>();\n    const typeCounts = new Map<CipherType, number>();\n\n    this.deletedCount = this.allCiphers.filter(\n      (c) => c.isDeleted && !this.vaultFilterService.filterCipherForSelectedVault(c)\n    ).length;\n\n    this.ciphers?.forEach((c) => {\n      if (!this.vaultFilterService.filterCipherForSelectedVault(c)) {\n        if (c.isDeleted) {\n          return;\n        }\n        if (c.favorite) {\n          if (favoriteCiphers == null) {\n            favoriteCiphers = [];\n          }\n          favoriteCiphers.push(c);\n        }\n\n        if (c.folderId == null) {\n          if (noFolderCiphers == null) {\n            noFolderCiphers = [];\n          }\n          noFolderCiphers.push(c);\n        }\n\n        if (typeCounts.has(c.type)) {\n          typeCounts.set(c.type, typeCounts.get(c.type) + 1);\n        } else {\n          typeCounts.set(c.type, 1);\n        }\n\n        if (folderCounts.has(c.folderId)) {\n          folderCounts.set(c.folderId, folderCounts.get(c.folderId) + 1);\n        } else {\n          folderCounts.set(c.folderId, 1);\n        }\n\n        if (c.collectionIds != null) {\n          c.collectionIds.forEach((colId) => {\n            if (collectionCounts.has(colId)) {\n              collectionCounts.set(colId, collectionCounts.get(colId) + 1);\n            } else {\n              collectionCounts.set(colId, 1);\n            }\n          });\n        }\n      }\n    });\n\n    this.favoriteCiphers = favoriteCiphers;\n    this.noFolderCiphers = noFolderCiphers;\n    this.typeCounts = typeCounts;\n    this.folderCounts = folderCounts;\n    this.collectionCounts = collectionCounts;\n  }\n\n  showSearching() {\n    return (\n      this.hasSearched || (!this.searchPending && this.searchService.isSearchable(this.searchText))\n    );\n  }\n\n  closeOnEsc(e: KeyboardEvent) {\n    // If input not empty, use browser default behavior of clearing input instead\n    if (e.key === \"Escape\" && (this.searchText == null || this.searchText === \"\")) {\n      BrowserApi.closePopup(window);\n    }\n  }\n\n  private async loadCollectionsAndFolders() {\n    this.showCollections = !this.vaultFilter.myVaultOnly;\n    await this.loadFolders();\n    await this.loadCollections();\n  }\n\n  private async saveState() {\n    this.state = Object.assign(new BrowserGroupingsComponentState(), {\n      scrollY: this.popupUtils.getContentScrollY(window),\n      searchText: this.searchText,\n      favoriteCiphers: this.favoriteCiphers,\n      noFolderCiphers: this.noFolderCiphers,\n      ciphers: this.ciphers,\n      collectionCounts: this.collectionCounts,\n      folderCounts: this.folderCounts,\n      typeCounts: this.typeCounts,\n      folders: this.folders,\n      collections: this.collections,\n      deletedCount: this.deletedCount,\n    });\n    await this.browserStateService.setBrowserGroupingComponentState(this.state);\n  }\n\n  private async restoreState(): Promise<boolean> {\n    this.state = await this.browserStateService.getBrowserGroupingComponentState();\n    if (this.state == null) {\n      return false;\n    }\n\n    if (this.state.favoriteCiphers != null) {\n      this.favoriteCiphers = this.state.favoriteCiphers;\n    }\n    if (this.state.noFolderCiphers != null) {\n      this.noFolderCiphers = this.state.noFolderCiphers;\n    }\n    if (this.state.ciphers != null) {\n      this.ciphers = this.state.ciphers;\n    }\n    if (this.state.collectionCounts != null) {\n      this.collectionCounts = this.state.collectionCounts;\n    }\n    if (this.state.folderCounts != null) {\n      this.folderCounts = this.state.folderCounts;\n    }\n    if (this.state.typeCounts != null) {\n      this.typeCounts = this.state.typeCounts;\n    }\n    if (this.state.folders != null) {\n      this.folders = this.state.folders;\n    }\n    if (this.state.collections != null) {\n      this.collections = this.state.collections;\n    }\n    if (this.state.deletedCount != null) {\n      this.deletedCount = this.state.deletedCount;\n    }\n\n    return true;\n  }\n}\n","import { Directive, EventEmitter, Input, Output } from \"@angular/core\";\n\nimport { SearchService } from \"@bitwarden/common/abstractions/search.service\";\nimport { Organization } from \"@bitwarden/common/models/domain/organization\";\nimport { CipherView } from \"@bitwarden/common/vault/models/view/cipher.view\";\n\n@Directive()\nexport class VaultItemsComponent {\n  @Input() activeCipherId: string = null;\n  @Output() onCipherClicked = new EventEmitter<CipherView>();\n  @Output() onCipherRightClicked = new EventEmitter<CipherView>();\n  @Output() onAddCipher = new EventEmitter();\n  @Output() onAddCipherOptions = new EventEmitter();\n\n  loaded = false;\n  ciphers: CipherView[] = [];\n  searchPlaceholder: string = null;\n  filter: (cipher: CipherView) => boolean = null;\n  deleted = false;\n  organization: Organization;\n  accessEvents = false;\n\n  protected searchPending = false;\n\n  private searchTimeout: any = null;\n  private _searchText: string = null;\n  get searchText() {\n    return this._searchText;\n  }\n  set searchText(value: string) {\n    this._searchText = value;\n  }\n\n  constructor(protected searchService: SearchService) {}\n\n  async load(filter: (cipher: CipherView) => boolean = null, deleted = false) {\n    this.deleted = deleted ?? false;\n    await this.applyFilter(filter);\n    this.loaded = true;\n  }\n\n  async reload(filter: (cipher: CipherView) => boolean = null, deleted = false) {\n    this.loaded = false;\n    await this.load(filter, deleted);\n  }\n\n  async refresh() {\n    await this.reload(this.filter, this.deleted);\n  }\n\n  async applyFilter(filter: (cipher: CipherView) => boolean = null) {\n    this.filter = filter;\n    await this.search(null);\n  }\n\n  async search(timeout: number = null, indexedCiphers?: CipherView[]) {\n    this.searchPending = false;\n    if (this.searchTimeout != null) {\n      clearTimeout(this.searchTimeout);\n    }\n    if (timeout == null) {\n      await this.doSearch(indexedCiphers);\n      return;\n    }\n    this.searchPending = true;\n    this.searchTimeout = setTimeout(async () => {\n      await this.doSearch(indexedCiphers);\n      this.searchPending = false;\n    }, timeout);\n  }\n\n  selectCipher(cipher: CipherView) {\n    this.onCipherClicked.emit(cipher);\n  }\n\n  rightClickCipher(cipher: CipherView) {\n    this.onCipherRightClicked.emit(cipher);\n  }\n\n  addCipher() {\n    this.onAddCipher.emit();\n  }\n\n  addCipherOptions() {\n    this.onAddCipherOptions.emit();\n  }\n\n  isSearching() {\n    return !this.searchPending && this.searchService.isSearchable(this.searchText);\n  }\n\n  protected deletedFilter: (cipher: CipherView) => boolean = (c) => c.isDeleted === this.deleted;\n\n  protected async doSearch(indexedCiphers?: CipherView[]) {\n    this.ciphers = await this.searchService.searchCiphers(\n      this.searchText,\n      [this.filter, this.deletedFilter],\n      indexedCiphers\n    );\n  }\n}\n","<header>\n  <div class=\"left\">\n    <button type=\"button\" (click)=\"back()\">\n      <span class=\"header-icon\"><i class=\"bwi bwi-angle-left\" aria-hidden=\"true\"></i></span>\n      <span>{{ \"back\" | i18n }}</span>\n    </button>\n  </div>\n  <h1 class=\"sr-only\">{{ \"myVault\" | i18n }}</h1>\n  <div class=\"search\">\n    <input\n      type=\"{{ searchTypeSearch ? 'search' : 'text' }}\"\n      placeholder=\"{{ searchPlaceholder || ('searchVault' | i18n) }}\"\n      id=\"search\"\n      [(ngModel)]=\"searchText\"\n      (input)=\"search(200)\"\n      autocomplete=\"off\"\n      appAutofocus\n    />\n    <i class=\"bwi bwi-search\" aria-hidden=\"true\"></i>\n  </div>\n  <div class=\"right\">\n    <button type=\"button\" (click)=\"addCipher()\" appA11yTitle=\"{{ 'addItem' | i18n }}\">\n      <i class=\"bwi bwi-plus bwi-lg bwi-fw\" aria-hidden=\"true\"></i>\n    </button>\n  </div>\n</header>\n<main tabindex=\"-1\" [ngClass]=\"{ 'stacked-boxes': showGroupings() }\">\n  <ng-container *ngIf=\"showGroupings()\">\n    <app-vault-select\n      *ngIf=\"showVaultFilter\"\n      (onVaultSelectionChanged)=\"changeVaultSelection()\"\n    ></app-vault-select>\n    <div class=\"box list\" *ngIf=\"nestedFolders && nestedFolders.length\">\n      <h2 class=\"box-header\">\n        {{ \"folders\" | i18n }}\n      </h2>\n      <div class=\"box-content single-line\">\n        <button\n          type=\"button\"\n          *ngFor=\"let f of nestedFolders\"\n          class=\"box-content-row\"\n          appStopClick\n          (click)=\"selectFolder(f.node)\"\n        >\n          <div class=\"row-main\">\n            <div class=\"icon\">\n              <i class=\"bwi bwi-fw bwi-lg bwi-folder\" aria-hidden=\"true\"></i>\n            </div>\n            <span class=\"text\">{{ f.node.name }}</span>\n          </div>\n          <span><i class=\"bwi bwi-angle-right bwi-lg row-sub-icon\" aria-hidden=\"true\"></i></span>\n        </button>\n      </div>\n    </div>\n    <div class=\"box list\" *ngIf=\"nestedCollections && nestedCollections.length\">\n      <h2 class=\"box-header\">\n        {{ \"collections\" | i18n }}\n      </h2>\n      <div class=\"box-content single-line\">\n        <button\n          type=\"button\"\n          *ngFor=\"let c of nestedCollections\"\n          class=\"box-content-row\"\n          appStopClick\n          (click)=\"selectCollection(c.node)\"\n        >\n          <div class=\"row-main\">\n            <div class=\"icon\">\n              <i class=\"bwi bwi-fw bwi-lg bwi-collection\" aria-hidden=\"true\"></i>\n            </div>\n            <span class=\"text\">{{ c.node.name }}</span>\n          </div>\n          <span><i class=\"bwi bwi-angle-right bwi-lg row-sub-icon\" aria-hidden=\"true\"></i></span>\n        </button>\n      </div>\n    </div>\n  </ng-container>\n  <ng-container *ngIf=\"ciphers\">\n    <div *ngIf=\"!ciphers.length\">\n      <app-vault-select\n        *ngIf=\"showVaultFilter && !showGroupings()\"\n        (onVaultSelectionChanged)=\"changeVaultSelection()\"\n      ></app-vault-select>\n      <div class=\"no-items\">\n        <i class=\"bwi bwi-spinner bwi-spin bwi-3x\" *ngIf=\"!loaded\" aria-hidden=\"true\"></i>\n        <ng-container *ngIf=\"loaded\">\n          <img class=\"no-items-image\" aria-hidden=\"true\" />\n          <p>{{ \"noItemsInList\" | i18n }}</p>\n          <button type=\"button\" (click)=\"addCipher()\" class=\"btn block primary link\">\n            {{ \"addItem\" | i18n }}\n          </button>\n        </ng-container>\n      </div>\n    </div>\n    <cdk-virtual-scroll-viewport\n      itemSize=\"55\"\n      minBufferPx=\"400\"\n      maxBufferPx=\"600\"\n      *ngIf=\"ciphers.length\"\n      #virtualScrollViewport\n      ><app-vault-select\n        *ngIf=\"showVaultFilter && !showGroupings()\"\n        (onVaultSelectionChanged)=\"changeVaultSelection()\"\n      ></app-vault-select>\n      <div class=\"box list only-list\">\n        <h2 class=\"box-header\">\n          {{ groupingTitle }}\n          <span class=\"flex-right\">{{ isSearching() ? ciphers.length : ciphers.length }}</span>\n        </h2>\n        <div class=\"box-content\">\n          <app-cipher-row\n            *cdkVirtualFor=\"let c of ciphers; let last = last\"\n            [cipher]=\"c\"\n            [last]=\"last\"\n            title=\"{{ 'viewItem' | i18n }}\"\n            (onSelected)=\"selectCipher($event)\"\n            (launchEvent)=\"launchCipher($event)\"\n          ></app-cipher-row>\n        </div>\n      </div>\n    </cdk-virtual-scroll-viewport>\n  </ng-container>\n</main>\n","import { Location } from \"@angular/common\";\nimport { ChangeDetectorRef, Component, NgZone, OnDestroy, OnInit } from \"@angular/core\";\nimport { ActivatedRoute, Router } from \"@angular/router\";\nimport { first } from \"rxjs/operators\";\n\nimport { VaultItemsComponent as BaseVaultItemsComponent } from \"@bitwarden/angular/vault/components/vault-items.component\";\nimport { VaultFilter } from \"@bitwarden/angular/vault/vault-filter/models/vault-filter.model\";\nimport { BroadcasterService } from \"@bitwarden/common/abstractions/broadcaster.service\";\nimport { CollectionService } from \"@bitwarden/common/abstractions/collection.service\";\nimport { I18nService } from \"@bitwarden/common/abstractions/i18n.service\";\nimport { OrganizationService } from \"@bitwarden/common/abstractions/organization/organization.service.abstraction\";\nimport { PlatformUtilsService } from \"@bitwarden/common/abstractions/platformUtils.service\";\nimport { SearchService } from \"@bitwarden/common/abstractions/search.service\";\nimport { TreeNode } from \"@bitwarden/common/models/domain/tree-node\";\nimport { CollectionView } from \"@bitwarden/common/models/view/collection.view\";\nimport { CipherService } from \"@bitwarden/common/vault/abstractions/cipher.service\";\nimport { FolderService } from \"@bitwarden/common/vault/abstractions/folder/folder.service.abstraction\";\nimport { CipherType } from \"@bitwarden/common/vault/enums/cipher-type\";\nimport { CipherView } from \"@bitwarden/common/vault/models/view/cipher.view\";\nimport { FolderView } from \"@bitwarden/common/vault/models/view/folder.view\";\n\nimport { BrowserApi } from \"../../../../browser/browserApi\";\nimport { BrowserComponentState } from \"../../../../models/browserComponentState\";\nimport { PopupUtilsService } from \"../../../../popup/services/popup-utils.service\";\nimport { BrowserStateService } from \"../../../../services/abstractions/browser-state.service\";\nimport { VaultFilterService } from \"../../../services/vault-filter.service\";\n\nconst ComponentId = \"VaultItemsComponent\";\n\n@Component({\n  selector: \"app-vault-items\",\n  templateUrl: \"vault-items.component.html\",\n})\nexport class VaultItemsComponent extends BaseVaultItemsComponent implements OnInit, OnDestroy {\n  groupingTitle: string;\n  state: BrowserComponentState;\n  folderId: string = null;\n  collectionId: string = null;\n  type: CipherType = null;\n  nestedFolders: TreeNode<FolderView>[];\n  nestedCollections: TreeNode<CollectionView>[];\n  searchTypeSearch = false;\n  showOrganizations = false;\n  vaultFilter: VaultFilter;\n  deleted = true;\n  noneFolder = false;\n  showVaultFilter = false;\n\n  private selectedTimeout: number;\n  private preventSelected = false;\n  private applySavedState = true;\n  private scrollingContainer = \"cdk-virtual-scroll-viewport\";\n\n  constructor(\n    searchService: SearchService,\n    private organizationService: OrganizationService,\n    private route: ActivatedRoute,\n    private router: Router,\n    private location: Location,\n    private ngZone: NgZone,\n    private broadcasterService: BroadcasterService,\n    private changeDetectorRef: ChangeDetectorRef,\n    private stateService: BrowserStateService,\n    private popupUtils: PopupUtilsService,\n    private i18nService: I18nService,\n    private folderService: FolderService,\n    private collectionService: CollectionService,\n    private platformUtilsService: PlatformUtilsService,\n    private cipherService: CipherService,\n    private vaultFilterService: VaultFilterService\n  ) {\n    super(searchService);\n    this.applySavedState =\n      (window as any).previousPopupUrl != null &&\n      !(window as any).previousPopupUrl.startsWith(\"/ciphers\");\n  }\n\n  async ngOnInit() {\n    this.searchTypeSearch = !this.platformUtilsService.isSafari();\n    this.showOrganizations = this.organizationService.hasOrganizations();\n    this.vaultFilter = this.vaultFilterService.getVaultFilter();\n    // eslint-disable-next-line rxjs-angular/prefer-takeuntil, rxjs/no-async-subscribe\n    this.route.queryParams.pipe(first()).subscribe(async (params) => {\n      if (this.applySavedState) {\n        this.state = await this.stateService.getBrowserVaultItemsComponentState();\n        if (this.state?.searchText) {\n          this.searchText = this.state.searchText;\n        }\n      }\n\n      if (params.deleted) {\n        this.showVaultFilter = true;\n        this.groupingTitle = this.i18nService.t(\"trash\");\n        this.searchPlaceholder = this.i18nService.t(\"searchTrash\");\n        await this.load(this.buildFilter(), true);\n      } else if (params.type) {\n        this.showVaultFilter = true;\n        this.searchPlaceholder = this.i18nService.t(\"searchType\");\n        this.type = parseInt(params.type, null);\n        switch (this.type) {\n          case CipherType.Login:\n            this.groupingTitle = this.i18nService.t(\"logins\");\n            break;\n          case CipherType.Card:\n            this.groupingTitle = this.i18nService.t(\"cards\");\n            break;\n          case CipherType.Identity:\n            this.groupingTitle = this.i18nService.t(\"identities\");\n            break;\n          case CipherType.SecureNote:\n            this.groupingTitle = this.i18nService.t(\"secureNotes\");\n            break;\n          default:\n            break;\n        }\n        await this.load(this.buildFilter());\n      } else if (params.folderId) {\n        this.showVaultFilter = true;\n        this.folderId = params.folderId === \"none\" ? null : params.folderId;\n        this.searchPlaceholder = this.i18nService.t(\"searchFolder\");\n        if (this.folderId != null) {\n          this.showOrganizations = false;\n          const folderNode = await this.vaultFilterService.getFolderNested(this.folderId);\n          if (folderNode != null && folderNode.node != null) {\n            this.groupingTitle = folderNode.node.name;\n            this.nestedFolders =\n              folderNode.children != null && folderNode.children.length > 0\n                ? folderNode.children\n                : null;\n          }\n        } else {\n          this.noneFolder = true;\n          this.groupingTitle = this.i18nService.t(\"noneFolder\");\n        }\n        await this.load(this.buildFilter());\n      } else if (params.collectionId) {\n        this.showVaultFilter = false;\n        this.collectionId = params.collectionId;\n        this.searchPlaceholder = this.i18nService.t(\"searchCollection\");\n        const collectionNode = await this.collectionService.getNested(this.collectionId);\n        if (collectionNode != null && collectionNode.node != null) {\n          this.groupingTitle = collectionNode.node.name;\n          this.nestedCollections =\n            collectionNode.children != null && collectionNode.children.length > 0\n              ? collectionNode.children\n              : null;\n        }\n        await this.load(\n          (c) => c.collectionIds != null && c.collectionIds.indexOf(this.collectionId) > -1\n        );\n      } else {\n        this.showVaultFilter = true;\n        this.groupingTitle = this.i18nService.t(\"allItems\");\n        await this.load(this.buildFilter());\n      }\n\n      if (this.applySavedState && this.state != null) {\n        window.setTimeout(\n          () =>\n            this.popupUtils.setContentScrollY(window, this.state.scrollY, this.scrollingContainer),\n          0\n        );\n      }\n      await this.stateService.setBrowserVaultItemsComponentState(null);\n    });\n\n    this.broadcasterService.subscribe(ComponentId, (message: any) => {\n      this.ngZone.run(async () => {\n        switch (message.command) {\n          case \"syncCompleted\":\n            if (message.successfully) {\n              window.setTimeout(() => {\n                this.refresh();\n              }, 500);\n            }\n            break;\n          default:\n            break;\n        }\n\n        this.changeDetectorRef.detectChanges();\n      });\n    });\n  }\n\n  ngOnDestroy() {\n    this.saveState();\n    this.broadcasterService.unsubscribe(ComponentId);\n  }\n\n  selectCipher(cipher: CipherView) {\n    this.selectedTimeout = window.setTimeout(() => {\n      if (!this.preventSelected) {\n        super.selectCipher(cipher);\n        this.router.navigate([\"/view-cipher\"], { queryParams: { cipherId: cipher.id } });\n      }\n      this.preventSelected = false;\n    }, 200);\n  }\n\n  selectFolder(folder: FolderView) {\n    if (folder.id != null) {\n      this.router.navigate([\"/ciphers\"], { queryParams: { folderId: folder.id } });\n    }\n  }\n\n  selectCollection(collection: CollectionView) {\n    this.router.navigate([\"/ciphers\"], { queryParams: { collectionId: collection.id } });\n  }\n\n  async launchCipher(cipher: CipherView) {\n    if (cipher.type !== CipherType.Login || !cipher.login.canLaunch) {\n      return;\n    }\n\n    if (this.selectedTimeout != null) {\n      window.clearTimeout(this.selectedTimeout);\n    }\n    this.preventSelected = true;\n    await this.cipherService.updateLastLaunchedDate(cipher.id);\n    BrowserApi.createNewTab(cipher.login.launchUri);\n    if (this.popupUtils.inPopup(window)) {\n      BrowserApi.closePopup(window);\n    }\n  }\n\n  addCipher() {\n    if (this.deleted) {\n      return false;\n    }\n    super.addCipher();\n    this.router.navigate([\"/add-cipher\"], {\n      queryParams: {\n        folderId: this.folderId,\n        type: this.type,\n        collectionId: this.collectionId,\n        selectedVault: this.vaultFilter.selectedOrganizationId,\n      },\n    });\n  }\n\n  back() {\n    (window as any).routeDirection = \"b\";\n    this.location.back();\n  }\n\n  showGroupings() {\n    return (\n      !this.isSearching() &&\n      ((this.nestedFolders && this.nestedFolders.length) ||\n        (this.nestedCollections && this.nestedCollections.length))\n    );\n  }\n\n  async changeVaultSelection() {\n    this.vaultFilter = this.vaultFilterService.getVaultFilter();\n    await this.load(this.buildFilter(), this.deleted);\n  }\n\n  private buildFilter(): (cipher: CipherView) => boolean {\n    return (cipher) => {\n      let cipherPassesFilter = true;\n      if (this.deleted && cipherPassesFilter) {\n        cipherPassesFilter = cipher.isDeleted;\n      }\n      if (this.type != null && cipherPassesFilter) {\n        cipherPassesFilter = cipher.type === this.type;\n      }\n      if (this.folderId != null && this.folderId != \"none\" && cipherPassesFilter) {\n        cipherPassesFilter = cipher.folderId === this.folderId;\n      }\n      if (this.noneFolder) {\n        cipherPassesFilter = cipher.folderId == null;\n      }\n      if (this.collectionId != null && cipherPassesFilter) {\n        cipherPassesFilter =\n          cipher.collectionIds != null && cipher.collectionIds.indexOf(this.collectionId) > -1;\n      }\n      if (this.vaultFilter.selectedOrganizationId != null && cipherPassesFilter) {\n        cipherPassesFilter = cipher.organizationId === this.vaultFilter.selectedOrganizationId;\n      }\n      if (this.vaultFilter.myVaultOnly && cipherPassesFilter) {\n        cipherPassesFilter = cipher.organizationId === null;\n      }\n      return cipherPassesFilter;\n    };\n  }\n\n  private async saveState() {\n    this.state = {\n      scrollY: this.popupUtils.getContentScrollY(window, this.scrollingContainer),\n      searchText: this.searchText,\n    };\n    await this.stateService.setBrowserVaultItemsComponentState(this.state);\n  }\n}\n","import { IdentityTokenResponse } from \"../models/response/identity-token.response\";\n\nexport abstract class TokenService {\n  setTokens: (\n    accessToken: string,\n    refreshToken: string,\n    clientIdClientSecret: [string, string]\n  ) => Promise<any>;\n  setToken: (token: string) => Promise<any>;\n  getToken: () => Promise<string>;\n  setRefreshToken: (refreshToken: string) => Promise<any>;\n  getRefreshToken: () => Promise<string>;\n  setClientId: (clientId: string) => Promise<any>;\n  getClientId: () => Promise<string>;\n  setClientSecret: (clientSecret: string) => Promise<any>;\n  getClientSecret: () => Promise<string>;\n  setTwoFactorToken: (tokenResponse: IdentityTokenResponse) => Promise<any>;\n  getTwoFactorToken: () => Promise<string>;\n  clearTwoFactorToken: () => Promise<any>;\n  clearToken: (userId?: string) => Promise<any>;\n  decodeToken: (token?: string) => any;\n  getTokenExpirationDate: () => Promise<Date>;\n  tokenSecondsRemaining: (offsetSeconds?: number) => Promise<number>;\n  tokenNeedsRefresh: (minutes?: number) => Promise<boolean>;\n  getUserId: () => Promise<string>;\n  getEmail: () => Promise<string>;\n  getEmailVerified: () => Promise<boolean>;\n  getName: () => Promise<string>;\n  getIssuer: () => Promise<string>;\n  getIsExternal: () => Promise<boolean>;\n}\n","import {\n  ChangeDetectorRef,\n  Directive,\n  EventEmitter,\n  Input,\n  NgZone,\n  OnDestroy,\n  OnInit,\n  Output,\n} from \"@angular/core\";\nimport { firstValueFrom } from \"rxjs\";\n\nimport { ApiService } from \"@bitwarden/common/abstractions/api.service\";\nimport { AuditService } from \"@bitwarden/common/abstractions/audit.service\";\nimport { BroadcasterService } from \"@bitwarden/common/abstractions/broadcaster.service\";\nimport { CryptoService } from \"@bitwarden/common/abstractions/crypto.service\";\nimport { EventCollectionService } from \"@bitwarden/common/abstractions/event/event-collection.service\";\nimport { FileDownloadService } from \"@bitwarden/common/abstractions/fileDownload/fileDownload.service\";\nimport { I18nService } from \"@bitwarden/common/abstractions/i18n.service\";\nimport { LogService } from \"@bitwarden/common/abstractions/log.service\";\nimport { PlatformUtilsService } from \"@bitwarden/common/abstractions/platformUtils.service\";\nimport { StateService } from \"@bitwarden/common/abstractions/state.service\";\nimport { TokenService } from \"@bitwarden/common/abstractions/token.service\";\nimport { TotpService } from \"@bitwarden/common/abstractions/totp.service\";\nimport { EventType } from \"@bitwarden/common/enums/eventType\";\nimport { FieldType } from \"@bitwarden/common/enums/fieldType\";\nimport { EncArrayBuffer } from \"@bitwarden/common/models/domain/enc-array-buffer\";\nimport { ErrorResponse } from \"@bitwarden/common/models/response/error.response\";\nimport { CipherService } from \"@bitwarden/common/vault/abstractions/cipher.service\";\nimport { FolderService } from \"@bitwarden/common/vault/abstractions/folder/folder.service.abstraction\";\nimport { PasswordRepromptService } from \"@bitwarden/common/vault/abstractions/password-reprompt.service\";\nimport { CipherRepromptType } from \"@bitwarden/common/vault/enums/cipher-reprompt-type\";\nimport { CipherType } from \"@bitwarden/common/vault/enums/cipher-type\";\nimport { AttachmentView } from \"@bitwarden/common/vault/models/view/attachment.view\";\nimport { CipherView } from \"@bitwarden/common/vault/models/view/cipher.view\";\nimport { FolderView } from \"@bitwarden/common/vault/models/view/folder.view\";\nimport { LoginUriView } from \"@bitwarden/common/vault/models/view/login-uri.view\";\n\nconst BroadcasterSubscriptionId = \"ViewComponent\";\n\n@Directive()\nexport class ViewComponent implements OnDestroy, OnInit {\n  @Input() cipherId: string;\n  @Output() onEditCipher = new EventEmitter<CipherView>();\n  @Output() onCloneCipher = new EventEmitter<CipherView>();\n  @Output() onShareCipher = new EventEmitter<CipherView>();\n  @Output() onDeletedCipher = new EventEmitter<CipherView>();\n  @Output() onRestoredCipher = new EventEmitter<CipherView>();\n\n  cipher: CipherView;\n  showPassword: boolean;\n  showPasswordCount: boolean;\n  showCardNumber: boolean;\n  showCardCode: boolean;\n  canAccessPremium: boolean;\n  showPremiumRequiredTotp: boolean;\n  totpCode: string;\n  totpCodeFormatted: string;\n  totpDash: number;\n  totpSec: number;\n  totpLow: boolean;\n  fieldType = FieldType;\n  checkPasswordPromise: Promise<number>;\n  folder: FolderView;\n\n  private totpInterval: any;\n  private previousCipherId: string;\n  private passwordReprompted = false;\n\n  constructor(\n    protected cipherService: CipherService,\n    protected folderService: FolderService,\n    protected totpService: TotpService,\n    protected tokenService: TokenService,\n    protected i18nService: I18nService,\n    protected cryptoService: CryptoService,\n    protected platformUtilsService: PlatformUtilsService,\n    protected auditService: AuditService,\n    protected win: Window,\n    protected broadcasterService: BroadcasterService,\n    protected ngZone: NgZone,\n    protected changeDetectorRef: ChangeDetectorRef,\n    protected eventCollectionService: EventCollectionService,\n    protected apiService: ApiService,\n    protected passwordRepromptService: PasswordRepromptService,\n    private logService: LogService,\n    protected stateService: StateService,\n    protected fileDownloadService: FileDownloadService\n  ) {}\n\n  ngOnInit() {\n    this.broadcasterService.subscribe(BroadcasterSubscriptionId, (message: any) => {\n      this.ngZone.run(async () => {\n        switch (message.command) {\n          case \"syncCompleted\":\n            if (message.successfully) {\n              await this.load();\n              this.changeDetectorRef.detectChanges();\n            }\n            break;\n        }\n      });\n    });\n  }\n\n  ngOnDestroy() {\n    this.broadcasterService.unsubscribe(BroadcasterSubscriptionId);\n    this.cleanUp();\n  }\n\n  async load() {\n    this.cleanUp();\n\n    const cipher = await this.cipherService.get(this.cipherId);\n    this.cipher = await cipher.decrypt();\n    this.canAccessPremium = await this.stateService.getCanAccessPremium();\n    this.showPremiumRequiredTotp =\n      this.cipher.login.totp && !this.canAccessPremium && !this.cipher.organizationUseTotp;\n\n    if (this.cipher.folderId) {\n      this.folder = await (\n        await firstValueFrom(this.folderService.folderViews$)\n      ).find((f) => f.id == this.cipher.folderId);\n    }\n\n    if (\n      this.cipher.type === CipherType.Login &&\n      this.cipher.login.totp &&\n      (cipher.organizationUseTotp || this.canAccessPremium)\n    ) {\n      await this.totpUpdateCode();\n      const interval = this.totpService.getTimeInterval(this.cipher.login.totp);\n      await this.totpTick(interval);\n\n      this.totpInterval = setInterval(async () => {\n        await this.totpTick(interval);\n      }, 1000);\n    }\n\n    if (this.previousCipherId !== this.cipherId) {\n      this.eventCollectionService.collect(EventType.Cipher_ClientViewed, this.cipherId);\n    }\n    this.previousCipherId = this.cipherId;\n  }\n\n  async edit() {\n    if (await this.promptPassword()) {\n      this.onEditCipher.emit(this.cipher);\n      return true;\n    }\n\n    return false;\n  }\n\n  async clone() {\n    if (await this.promptPassword()) {\n      this.onCloneCipher.emit(this.cipher);\n      return true;\n    }\n\n    return false;\n  }\n\n  async share() {\n    if (await this.promptPassword()) {\n      this.onShareCipher.emit(this.cipher);\n      return true;\n    }\n\n    return false;\n  }\n\n  async delete(): Promise<boolean> {\n    if (!(await this.promptPassword())) {\n      return;\n    }\n\n    const confirmed = await this.platformUtilsService.showDialog(\n      this.i18nService.t(\n        this.cipher.isDeleted ? \"permanentlyDeleteItemConfirmation\" : \"deleteItemConfirmation\"\n      ),\n      this.i18nService.t(\"deleteItem\"),\n      this.i18nService.t(\"yes\"),\n      this.i18nService.t(\"no\"),\n      \"warning\"\n    );\n    if (!confirmed) {\n      return false;\n    }\n\n    try {\n      await this.deleteCipher();\n      this.platformUtilsService.showToast(\n        \"success\",\n        null,\n        this.i18nService.t(this.cipher.isDeleted ? \"permanentlyDeletedItem\" : \"deletedItem\")\n      );\n      this.onDeletedCipher.emit(this.cipher);\n    } catch (e) {\n      this.logService.error(e);\n    }\n\n    return true;\n  }\n\n  async restore(): Promise<boolean> {\n    if (!this.cipher.isDeleted) {\n      return false;\n    }\n\n    const confirmed = await this.platformUtilsService.showDialog(\n      this.i18nService.t(\"restoreItemConfirmation\"),\n      this.i18nService.t(\"restoreItem\"),\n      this.i18nService.t(\"yes\"),\n      this.i18nService.t(\"no\"),\n      \"warning\"\n    );\n    if (!confirmed) {\n      return false;\n    }\n\n    try {\n      await this.restoreCipher();\n      this.platformUtilsService.showToast(\"success\", null, this.i18nService.t(\"restoredItem\"));\n      this.onRestoredCipher.emit(this.cipher);\n    } catch (e) {\n      this.logService.error(e);\n    }\n\n    return true;\n  }\n\n  async togglePassword() {\n    if (!(await this.promptPassword())) {\n      return;\n    }\n\n    this.showPassword = !this.showPassword;\n    this.showPasswordCount = false;\n    if (this.showPassword) {\n      this.eventCollectionService.collect(\n        EventType.Cipher_ClientToggledPasswordVisible,\n        this.cipherId\n      );\n    }\n  }\n\n  async togglePasswordCount() {\n    if (!this.showPassword) {\n      return;\n    }\n\n    this.showPasswordCount = !this.showPasswordCount;\n  }\n\n  async toggleCardNumber() {\n    if (!(await this.promptPassword())) {\n      return;\n    }\n\n    this.showCardNumber = !this.showCardNumber;\n    if (this.showCardNumber) {\n      this.eventCollectionService.collect(\n        EventType.Cipher_ClientToggledCardNumberVisible,\n        this.cipherId\n      );\n    }\n  }\n\n  async toggleCardCode() {\n    if (!(await this.promptPassword())) {\n      return;\n    }\n\n    this.showCardCode = !this.showCardCode;\n    if (this.showCardCode) {\n      this.eventCollectionService.collect(\n        EventType.Cipher_ClientToggledCardCodeVisible,\n        this.cipherId\n      );\n    }\n  }\n\n  async checkPassword() {\n    if (\n      this.cipher.login == null ||\n      this.cipher.login.password == null ||\n      this.cipher.login.password === \"\"\n    ) {\n      return;\n    }\n\n    this.checkPasswordPromise = this.auditService.passwordLeaked(this.cipher.login.password);\n    const matches = await this.checkPasswordPromise;\n\n    if (matches > 0) {\n      this.platformUtilsService.showToast(\n        \"warning\",\n        null,\n        this.i18nService.t(\"passwordExposed\", matches.toString())\n      );\n    } else {\n      this.platformUtilsService.showToast(\"success\", null, this.i18nService.t(\"passwordSafe\"));\n    }\n  }\n\n  launch(uri: LoginUriView, cipherId?: string) {\n    if (!uri.canLaunch) {\n      return;\n    }\n\n    if (cipherId) {\n      this.cipherService.updateLastLaunchedDate(cipherId);\n    }\n\n    this.platformUtilsService.launchUri(uri.launchUri);\n  }\n\n  async copy(value: string, typeI18nKey: string, aType: string) {\n    if (value == null) {\n      return;\n    }\n\n    if (\n      this.passwordRepromptService.protectedFields().includes(aType) &&\n      !(await this.promptPassword())\n    ) {\n      return;\n    }\n\n    const copyOptions = this.win != null ? { window: this.win } : null;\n    this.platformUtilsService.copyToClipboard(value, copyOptions);\n    this.platformUtilsService.showToast(\n      \"info\",\n      null,\n      this.i18nService.t(\"valueCopied\", this.i18nService.t(typeI18nKey))\n    );\n\n    if (typeI18nKey === \"password\") {\n      this.eventCollectionService.collect(\n        EventType.Cipher_ClientToggledHiddenFieldVisible,\n        this.cipherId\n      );\n    } else if (typeI18nKey === \"securityCode\") {\n      this.eventCollectionService.collect(EventType.Cipher_ClientCopiedCardCode, this.cipherId);\n    } else if (aType === \"H_Field\") {\n      this.eventCollectionService.collect(EventType.Cipher_ClientCopiedHiddenField, this.cipherId);\n    }\n  }\n\n  setTextDataOnDrag(event: DragEvent, data: string) {\n    event.dataTransfer.setData(\"text\", data);\n  }\n\n  async downloadAttachment(attachment: AttachmentView) {\n    if (!(await this.promptPassword())) {\n      return;\n    }\n    const a = attachment as any;\n    if (a.downloading) {\n      return;\n    }\n\n    if (this.cipher.organizationId == null && !this.canAccessPremium) {\n      this.platformUtilsService.showToast(\n        \"error\",\n        this.i18nService.t(\"premiumRequired\"),\n        this.i18nService.t(\"premiumRequiredDesc\")\n      );\n      return;\n    }\n\n    let url: string;\n    try {\n      const attachmentDownloadResponse = await this.apiService.getAttachmentData(\n        this.cipher.id,\n        attachment.id\n      );\n      url = attachmentDownloadResponse.url;\n    } catch (e) {\n      if (e instanceof ErrorResponse && (e as ErrorResponse).statusCode === 404) {\n        url = attachment.url;\n      } else if (e instanceof ErrorResponse) {\n        throw new Error((e as ErrorResponse).getSingleMessage());\n      } else {\n        throw e;\n      }\n    }\n\n    a.downloading = true;\n    const response = await fetch(new Request(url, { cache: \"no-store\" }));\n    if (response.status !== 200) {\n      this.platformUtilsService.showToast(\"error\", null, this.i18nService.t(\"errorOccurred\"));\n      a.downloading = false;\n      return;\n    }\n\n    try {\n      const encBuf = await EncArrayBuffer.fromResponse(response);\n      const key =\n        attachment.key != null\n          ? attachment.key\n          : await this.cryptoService.getOrgKey(this.cipher.organizationId);\n      const decBuf = await this.cryptoService.decryptFromBytes(encBuf, key);\n      this.fileDownloadService.download({\n        fileName: attachment.fileName,\n        blobData: decBuf,\n      });\n    } catch (e) {\n      this.platformUtilsService.showToast(\"error\", null, this.i18nService.t(\"errorOccurred\"));\n    }\n\n    a.downloading = false;\n  }\n\n  protected deleteCipher() {\n    return this.cipher.isDeleted\n      ? this.cipherService.deleteWithServer(this.cipher.id)\n      : this.cipherService.softDeleteWithServer(this.cipher.id);\n  }\n\n  protected restoreCipher() {\n    return this.cipherService.restoreWithServer(this.cipher.id);\n  }\n\n  protected async promptPassword() {\n    if (this.cipher.reprompt === CipherRepromptType.None || this.passwordReprompted) {\n      return true;\n    }\n\n    return (this.passwordReprompted = await this.passwordRepromptService.showPasswordPrompt());\n  }\n\n  private cleanUp() {\n    this.totpCode = null;\n    this.cipher = null;\n    this.showPassword = false;\n    this.showCardNumber = false;\n    this.showCardCode = false;\n    this.passwordReprompted = false;\n    if (this.totpInterval) {\n      clearInterval(this.totpInterval);\n    }\n  }\n\n  private async totpUpdateCode() {\n    if (\n      this.cipher == null ||\n      this.cipher.type !== CipherType.Login ||\n      this.cipher.login.totp == null\n    ) {\n      if (this.totpInterval) {\n        clearInterval(this.totpInterval);\n      }\n      return;\n    }\n\n    this.totpCode = await this.totpService.getCode(this.cipher.login.totp);\n    if (this.totpCode != null) {\n      if (this.totpCode.length > 4) {\n        const half = Math.floor(this.totpCode.length / 2);\n        this.totpCodeFormatted =\n          this.totpCode.substring(0, half) + \" \" + this.totpCode.substring(half);\n      } else {\n        this.totpCodeFormatted = this.totpCode;\n      }\n    } else {\n      this.totpCodeFormatted = null;\n      if (this.totpInterval) {\n        clearInterval(this.totpInterval);\n      }\n    }\n  }\n\n  private async totpTick(intervalSeconds: number) {\n    const epoch = Math.round(new Date().getTime() / 1000.0);\n    const mod = epoch % intervalSeconds;\n\n    this.totpSec = intervalSeconds - mod;\n    this.totpDash = +(Math.round(((78.6 / intervalSeconds) * mod + \"e+2\") as any) + \"e-2\");\n    this.totpLow = this.totpSec <= 7;\n    if (mod === 0) {\n      await this.totpUpdateCode();\n    }\n  }\n}\n","import { Directive, ElementRef, HostListener } from \"@angular/core\";\n\nimport { PlatformUtilsService } from \"@bitwarden/common/abstractions/platformUtils.service\";\n\n@Directive({\n  selector: \"[appSelectCopy]\",\n})\nexport class SelectCopyDirective {\n  constructor(private el: ElementRef, private platformUtilsService: PlatformUtilsService) {}\n\n  @HostListener(\"copy\") onCopy() {\n    if (window == null) {\n      return;\n    }\n    let copyText = \"\";\n    const selection = window.getSelection();\n    for (let i = 0; i < selection.rangeCount; i++) {\n      const range = selection.getRangeAt(i);\n      const text = range.toString();\n\n      // The selection should only contain one line of text. In some cases however, the\n      // selection contains newlines and space characters from the indentation of following\n      // sibling nodes. To avoid copying passwords containing trailing newlines and spaces\n      // that aren't part of the password, the selection has to be trimmed.\n      let stringEndPos = text.length;\n      const newLinePos = text.search(/(?:\\r\\n|\\r|\\n)/);\n      if (newLinePos > -1) {\n        const otherPart = text.substr(newLinePos).trim();\n        if (otherPart === \"\") {\n          stringEndPos = newLinePos;\n        }\n      }\n      copyText += text.substring(0, stringEndPos);\n    }\n    this.platformUtilsService.copyToClipboard(copyText, { window: window });\n  }\n}\n","import { Directive, Input } from \"@angular/core\";\n\nimport { EventCollectionService } from \"@bitwarden/common/abstractions/event/event-collection.service\";\nimport { EventType } from \"@bitwarden/common/enums/eventType\";\nimport { FieldType } from \"@bitwarden/common/enums/fieldType\";\nimport { CipherView } from \"@bitwarden/common/vault/models/view/cipher.view\";\nimport { FieldView } from \"@bitwarden/common/vault/models/view/field.view\";\n\n@Directive()\nexport class ViewCustomFieldsComponent {\n  @Input() cipher: CipherView;\n  @Input() promptPassword: () => Promise<boolean>;\n  @Input() copy: (value: string, typeI18nKey: string, aType: string) => void;\n\n  fieldType = FieldType;\n\n  constructor(private eventCollectionService: EventCollectionService) {}\n\n  async toggleFieldValue(field: FieldView) {\n    if (!(await this.promptPassword())) {\n      return;\n    }\n\n    const f = field as any;\n    f.showValue = !f.showValue;\n    f.showCount = false;\n    if (f.showValue) {\n      this.eventCollectionService.collect(\n        EventType.Cipher_ClientToggledHiddenFieldVisible,\n        this.cipher.id\n      );\n    }\n  }\n\n  async toggleFieldCount(field: FieldView) {\n    if (!field.showValue) {\n      return;\n    }\n\n    field.showCount = !field.showCount;\n  }\n\n  setTextDataOnDrag(event: DragEvent, data: string) {\n    event.dataTransfer.setData(\"text\", data);\n  }\n}\n","import { Pipe } from \"@angular/core\";\n\nimport { ColorPasswordPipe } from \"./color-password.pipe\";\n\n/*\n An updated pipe that extends ColourPasswordPipe to include a character count\n*/\n@Pipe({ name: \"colorPasswordCount\" })\nexport class ColorPasswordCountPipe extends ColorPasswordPipe {\n  transform(password: string) {\n    const template = (character: string, type: string, index: number) =>\n      `<span class=\"password-character password-${type}\">\n                ${character}<span class=\"password-count\">${index + 1}</span>\n            </span>`;\n    const colorizedPasswordCount = this.generateTemplate(password, template);\n\n    return colorizedPasswordCount;\n  }\n}\n","<ng-container>\n  <h2 class=\"box-header\">\n    {{ \"customFields\" | i18n }}\n  </h2>\n  <div class=\"box-content\">\n    <div class=\"box-content-row box-content-row-flex\" *ngFor=\"let field of cipher.fields\">\n      <div class=\"row-main\">\n        <span\n          *ngIf=\"field.type != fieldType.Linked\"\n          class=\"row-label draggable\"\n          draggable=\"true\"\n          (dragstart)=\"setTextDataOnDrag($event, field.value)\"\n          >{{ field.name }}</span\n        >\n        <span *ngIf=\"field.type === fieldType.Linked\" class=\"row-label\">{{ field.name }}</span>\n        <div *ngIf=\"field.type === fieldType.Text\">\n          {{ field.value || \"&nbsp;\" }}\n        </div>\n        <div *ngIf=\"field.type === fieldType.Hidden\">\n          <span *ngIf=\"!field.showValue\" class=\"monospaced\">{{ field.maskedValue }}</span>\n          <span\n            *ngIf=\"field.showValue && !field.showCount\"\n            class=\"monospaced show-whitespace\"\n            [innerHTML]=\"field.value | colorPassword\"\n          ></span>\n          <span\n            *ngIf=\"field.showValue && field.showCount\"\n            [innerHTML]=\"field.value | colorPasswordCount\"\n          ></span>\n        </div>\n        <div *ngIf=\"field.type === fieldType.Boolean\">\n          <i class=\"bwi bwi-check-square\" *ngIf=\"field.value === 'true'\" aria-hidden=\"true\"></i>\n          <i class=\"bwi bwi-square\" *ngIf=\"field.value !== 'true'\" aria-hidden=\"true\"></i>\n          <span class=\"sr-only\">{{ field.value }}</span>\n        </div>\n        <div *ngIf=\"field.type === fieldType.Linked\" class=\"box-content-row-flex\">\n          <div class=\"icon icon-small\">\n            <i\n              class=\"bwi bwi-link\"\n              aria-hidden=\"true\"\n              appA11yTitle=\"{{ 'linkedValue' | i18n }}\"\n            ></i>\n            <span class=\"sr-only\">{{ \"linkedValue\" | i18n }}</span>\n          </div>\n          <span>{{ cipher.linkedFieldI18nKey(field.linkedId) | i18n }}</span>\n        </div>\n      </div>\n      <div class=\"action-buttons action-buttons-fixed\">\n        <button\n          type=\"button\"\n          class=\"row-btn\"\n          appStopClick\n          attr.aria-label=\"{{ 'toggleCharacterCount' | i18n }} {{ field.name }}\"\n          appA11yTitle=\"{{ 'toggleCharacterCount' | i18n }}\"\n          *ngIf=\"field.type === fieldType.Hidden && cipher.viewPassword && field.showValue\"\n          (click)=\"toggleFieldCount(field)\"\n          [attr.aria-pressed]=\"field.showCount\"\n        >\n          <i class=\"bwi bwi-lg bwi-numbered-list\" aria-hidden=\"true\"></i>\n        </button>\n        <button\n          type=\"button\"\n          class=\"row-btn\"\n          appStopClick\n          attr.aria-label=\"{{ 'toggleVisibility' | i18n }} {{ field.name }}\"\n          appA11yTitle=\"{{ 'toggleVisibility' | i18n }}\"\n          *ngIf=\"field.type === fieldType.Hidden && cipher.viewPassword\"\n          (click)=\"toggleFieldValue(field)\"\n          [attr.aria-pressed]=\"field.showValue\"\n        >\n          <i\n            class=\"bwi bwi-lg\"\n            aria-hidden=\"true\"\n            [ngClass]=\"{ 'bwi-eye': !field.showValue, 'bwi-eye-slash': field.showValue }\"\n          ></i>\n        </button>\n        <button\n          type=\"button\"\n          class=\"row-btn\"\n          appStopClick\n          attr.aria-label=\"{{ 'copyValue' | i18n }} {{ field.name }}\"\n          appA11yTitle=\"{{ 'copyValue' | i18n }}\"\n          *ngIf=\"\n            field.value &&\n            field.type !== fieldType.Boolean &&\n            field.type !== fieldType.Linked &&\n            !(field.type === fieldType.Hidden && !cipher.viewPassword)\n          \"\n          (click)=\"\n            copy(field.value, 'value', field.type === fieldType.Hidden ? 'H_Field' : 'Field')\n          \"\n        >\n          <i class=\"bwi bwi-lg bwi-clone\" aria-hidden=\"true\"></i>\n        </button>\n      </div>\n    </div>\n  </div>\n</ng-container>\n","import { Component } from \"@angular/core\";\n\nimport { ViewCustomFieldsComponent as BaseViewCustomFieldsComponent } from \"@bitwarden/angular/vault/components/view-custom-fields.component\";\nimport { EventCollectionService } from \"@bitwarden/common/abstractions/event/event-collection.service\";\n\n@Component({\n  selector: \"app-vault-view-custom-fields\",\n  templateUrl: \"view-custom-fields.component.html\",\n})\nexport class ViewCustomFieldsComponent extends BaseViewCustomFieldsComponent {\n  constructor(eventCollectionService: EventCollectionService) {\n    super(eventCollectionService);\n  }\n}\n","<!-- Please remove this disable statement when editing this file! -->\n<!-- eslint-disable @angular-eslint/template/button-has-type -->\n<header>\n  <div class=\"left\">\n    <button type=\"button\" (click)=\"close()\">{{ \"close\" | i18n }}</button>\n  </div>\n  <h1 class=\"center\">\n    <span class=\"title\">{{ \"viewItem\" | i18n }}</span>\n  </h1>\n  <div class=\"right\" *ngIf=\"cipher\">\n    <button type=\"button\" (click)=\"edit()\" *ngIf=\"!cipher.isDeleted\">\n      {{ \"edit\" | i18n }}\n    </button>\n  </div>\n</header>\n<main tabindex=\"-1\" *ngIf=\"cipher\">\n  <div class=\"box\">\n    <h2 class=\"box-header\">\n      {{ \"itemInformation\" | i18n }}\n    </h2>\n    <div class=\"box-content\">\n      <div class=\"box-content-row\">\n        <label\n          for=\"name\"\n          class=\"draggable\"\n          draggable=\"true\"\n          (dragstart)=\"setTextDataOnDrag($event, cipher.name)\"\n          >{{ \"name\" | i18n }}</label\n        >\n        <input id=\"name\" type=\"text\" [value]=\"cipher.name\" readonly aria-readonly=\"true\" />\n      </div>\n      <!-- Login -->\n      <div *ngIf=\"cipher.login\">\n        <div class=\"box-content-row box-content-row-flex\" *ngIf=\"cipher.login.username\">\n          <div class=\"row-main\">\n            <label\n              for=\"loginUsername\"\n              class=\"row-label draggable\"\n              draggable=\"true\"\n              (dragstart)=\"setTextDataOnDrag($event, cipher.login.username)\"\n              >{{ \"username\" | i18n }}\n            </label>\n            <input\n              id=\"loginUsername\"\n              type=\"text\"\n              [value]=\"cipher.login.username\"\n              readonly\n              aria-readonly=\"true\"\n            />\n          </div>\n          <div class=\"action-buttons\">\n            <button\n              type=\"button\"\n              class=\"row-btn\"\n              appStopClick\n              appA11yTitle=\"{{ 'copyUsername' | i18n }}\"\n              (click)=\"copy(cipher.login.username, 'username', 'Username')\"\n            >\n              <i class=\"bwi bwi-lg bwi-clone\" aria-hidden=\"true\"></i>\n            </button>\n          </div>\n        </div>\n        <div class=\"box-content-row box-content-row-flex\" *ngIf=\"cipher.login.password\">\n          <div class=\"row-main\">\n            <span\n              class=\"row-label draggable\"\n              draggable=\"true\"\n              (dragstart)=\"setTextDataOnDrag($event, cipher.login.password)\"\n              >{{ \"password\" | i18n }}</span\n            >\n            <div *ngIf=\"!showPassword\" class=\"monospaced\">\n              {{ cipher.login.maskedPassword }}\n            </div>\n            <div\n              *ngIf=\"showPassword && !showPasswordCount\"\n              class=\"monospaced password-wrapper\"\n              appSelectCopy\n              [innerHTML]=\"cipher.login.password | colorPassword\"\n            ></div>\n            <div\n              *ngIf=\"showPassword && showPasswordCount\"\n              [innerHTML]=\"cipher.login.password | colorPasswordCount\"\n            ></div>\n          </div>\n          <div class=\"action-buttons action-buttons-fixed\">\n            <button\n              type=\"button\"\n              #checkPasswordBtn\n              class=\"row-btn btn\"\n              appA11yTitle=\"{{ 'checkPassword' | i18n }}\"\n              (click)=\"checkPassword()\"\n              [appApiAction]=\"checkPasswordPromise\"\n              [disabled]=\"$any(checkPasswordBtn).loading\"\n              *ngIf=\"cipher.viewPassword\"\n            >\n              <i\n                class=\"bwi bwi-lg bwi-check-circle\"\n                [hidden]=\"$any(checkPasswordBtn).loading\"\n                aria-hidden=\"true\"\n              ></i>\n              <i\n                class=\"bwi bwi-lg bwi-spinner bwi-spin\"\n                [hidden]=\"!$any(checkPasswordBtn).loading\"\n                aria-hidden=\"true\"\n              ></i>\n            </button>\n            <button\n              type=\"button\"\n              class=\"row-btn\"\n              appStopClick\n              attr.aria-label=\"{{ 'toggleCharacterCount' | i18n }} {{ 'password' | i18n }}\"\n              appA11yTitle=\"{{ 'toggleCharacterCount' | i18n }}\"\n              (click)=\"togglePasswordCount()\"\n              *ngIf=\"showPassword\"\n              [attr.aria-pressed]=\"showPasswordCount\"\n            >\n              <i class=\"bwi bwi-lg bwi-numbered-list\" aria-hidden=\"true\"></i>\n            </button>\n            <button\n              type=\"button\"\n              class=\"row-btn\"\n              appStopClick\n              attr.aria-label=\"{{ 'toggleVisibility' | i18n }} {{ 'password' | i18n }}\"\n              appA11yTitle=\"{{ 'toggleVisibility' | i18n }}\"\n              (click)=\"togglePassword()\"\n              *ngIf=\"cipher.viewPassword\"\n              [attr.aria-pressed]=\"showPassword\"\n            >\n              <i\n                class=\"bwi bwi-lg\"\n                aria-hidden=\"true\"\n                [ngClass]=\"{ 'bwi-eye': !showPassword, 'bwi-eye-slash': showPassword }\"\n              ></i>\n            </button>\n            <button\n              type=\"button\"\n              class=\"row-btn\"\n              appStopClick\n              appA11yTitle=\"{{ 'copyPassword' | i18n }}\"\n              (click)=\"copy(cipher.login.password, 'password', 'Password')\"\n              *ngIf=\"cipher.viewPassword\"\n            >\n              <i class=\"bwi bwi-lg bwi-clone\" aria-hidden=\"true\"></i>\n            </button>\n          </div>\n        </div>\n        <div\n          class=\"box-content-row box-content-row-flex totp\"\n          [ngClass]=\"{ low: totpLow }\"\n          *ngIf=\"cipher.login.totp && totpCode\"\n        >\n          <div class=\"row-main\">\n            <span\n              class=\"row-label draggable\"\n              draggable=\"true\"\n              (dragstart)=\"setTextDataOnDrag($event, totpCode)\"\n              >{{ \"verificationCodeTotp\" | i18n }}</span\n            >\n            <span class=\"totp-code\">{{ totpCodeFormatted }}</span>\n          </div>\n          <span class=\"totp-countdown\" aria-hidden=\"true\">\n            <span class=\"totp-sec\">{{ totpSec }}</span>\n            <svg>\n              <g>\n                <circle\n                  class=\"totp-circle inner\"\n                  r=\"12.6\"\n                  cy=\"16\"\n                  cx=\"16\"\n                  [ngStyle]=\"{ 'stroke-dashoffset.px': totpDash }\"\n                ></circle>\n                <circle class=\"totp-circle outer\" r=\"14\" cy=\"16\" cx=\"16\"></circle>\n              </g>\n            </svg>\n          </span>\n          <div class=\"action-buttons\">\n            <button\n              type=\"button\"\n              class=\"row-btn\"\n              appStopClick\n              title=\"{{ 'copyVerificationCode' | i18n }}\"\n              (click)=\"copy(totpCode, 'verificationCodeTotp', 'TOTP')\"\n            >\n              <i class=\"bwi bwi-lg bwi-clone\" aria-hidden=\"true\"></i>\n              <span class=\"sr-only\">{{ \"copyValue\" | i18n }}</span>\n              <span\n                class=\"sr-only exists-only-on-parent-focus\"\n                aria-live=\"polite\"\n                aria-atomic=\"true\"\n                >{{ totpSec }}</span\n              >\n            </button>\n          </div>\n        </div>\n\n        <div class=\"box-content-row box-content-row-flex totp\" *ngIf=\"showPremiumRequiredTotp\">\n          <div class=\"row-main\">\n            <span class=\"row-label\">{{ \"verificationCodeTotp\" | i18n }}</span>\n            <span class=\"row-label\">\n              <a routerLink=\"/premium\">\n                {{ \"premiumSubcriptionRequired\" | i18n }}\n              </a>\n            </span>\n          </div>\n        </div>\n      </div>\n      <!-- Card -->\n      <div *ngIf=\"cipher.card\">\n        <div class=\"box-content-row\" *ngIf=\"cipher.card.cardholderName\">\n          <span\n            class=\"row-label draggable\"\n            draggable=\"true\"\n            (dragstart)=\"setTextDataOnDrag($event, cipher.card.cardholderName)\"\n            >{{ \"cardholderName\" | i18n }}</span\n          >\n          {{ cipher.card.cardholderName }}\n        </div>\n        <div class=\"box-content-row box-content-row-flex\" *ngIf=\"cipher.card.number\">\n          <div class=\"row-main\">\n            <span\n              class=\"row-label draggable\"\n              draggable=\"true\"\n              (dragstart)=\"setTextDataOnDrag($event, cipher.card.number)\"\n              >{{ \"number\" | i18n }}</span\n            >\n            <span [hidden]=\"showCardNumber\" class=\"monospaced\">{{\n              cipher.card.maskedNumber | creditCardNumber: cipher.card.brand\n            }}</span>\n            <span [hidden]=\"!showCardNumber\" class=\"monospaced\">{{\n              cipher.card.number | creditCardNumber: cipher.card.brand\n            }}</span>\n          </div>\n          <div class=\"action-buttons\">\n            <button\n              type=\"button\"\n              class=\"row-btn\"\n              appStopClick\n              attr.aria-label=\"{{ 'toggleVisibility' | i18n }} {{ 'number' | i18n }}\"\n              appA11yTitle=\"{{ 'toggleVisibility' | i18n }}\"\n              (click)=\"toggleCardNumber()\"\n              [attr.aria-pressed]=\"showCardNumber\"\n            >\n              <i\n                class=\"bwi bwi-lg\"\n                aria-hidden=\"true\"\n                [ngClass]=\"{ 'bwi-eye': !showCardNumber, 'bwi-eye-slash': showCardNumber }\"\n              ></i>\n            </button>\n            <button\n              type=\"button\"\n              class=\"row-btn\"\n              appStopClick\n              appA11yTitle=\"{{ 'copyNumber' | i18n }}\"\n              (click)=\"copy(cipher.card.number, 'number', 'Card Number')\"\n            >\n              <i class=\"bwi bwi-lg bwi-clone\" aria-hidden=\"true\"></i>\n            </button>\n          </div>\n        </div>\n        <div class=\"box-content-row\" *ngIf=\"cipher.card.brand\">\n          <span\n            class=\"row-label draggable\"\n            draggable=\"true\"\n            (dragstart)=\"setTextDataOnDrag($event, cipher.card.brand)\"\n            >{{ \"brand\" | i18n }}</span\n          >\n          {{ cipher.card.brand }}\n        </div>\n        <div class=\"box-content-row\" *ngIf=\"cipher.card.expiration\">\n          <span\n            class=\"row-label draggable\"\n            draggable=\"true\"\n            (dragstart)=\"setTextDataOnDrag($event, cipher.card.expiration)\"\n            >{{ \"expiration\" | i18n }}</span\n          >\n          {{ cipher.card.expiration }}\n        </div>\n        <div class=\"box-content-row box-content-row-flex\" *ngIf=\"cipher.card.code\">\n          <div class=\"row-main\">\n            <span\n              class=\"row-label draggable\"\n              draggable=\"true\"\n              (dragstart)=\"setTextDataOnDrag($event, cipher.card.code)\"\n              >{{ \"securityCode\" | i18n }}</span\n            >\n            <span [hidden]=\"showCardCode\" class=\"monospaced\">{{ cipher.card.maskedCode }}</span>\n            <span [hidden]=\"!showCardCode\" class=\"monospaced\">{{ cipher.card.code }}</span>\n          </div>\n          <div class=\"action-buttons\">\n            <button\n              type=\"button\"\n              class=\"row-btn\"\n              appStopClick\n              attr.aria-label=\"{{ 'toggleVisibility' | i18n }} {{ 'securityCode' | i18n }}\"\n              appA11yTitle=\"{{ 'toggleVisibility' | i18n }}\"\n              (click)=\"toggleCardCode()\"\n              [attr.aria-pressed]=\"showCardCode\"\n            >\n              <i\n                class=\"bwi bwi-lg\"\n                aria-hidden=\"true\"\n                [ngClass]=\"{ 'bwi-eye': !showCardCode, 'bwi-eye-slash': showCardCode }\"\n              ></i>\n            </button>\n            <button\n              type=\"button\"\n              class=\"row-btn\"\n              appStopClick\n              appA11yTitle=\"{{ 'copySecurityCode' | i18n }}\"\n              (click)=\"copy(cipher.card.code, 'securityCode', 'Security Code')\"\n            >\n              <i class=\"bwi bwi-lg bwi-clone\" aria-hidden=\"true\"></i>\n            </button>\n          </div>\n        </div>\n      </div>\n      <!-- Identity -->\n      <div *ngIf=\"cipher.identity\">\n        <div class=\"box-content-row\" *ngIf=\"cipher.identity.fullName\">\n          <span\n            class=\"row-label draggable\"\n            draggable=\"true\"\n            (dragstart)=\"setTextDataOnDrag($event, cipher.identity.fullName)\"\n            >{{ \"identityName\" | i18n }}</span\n          >\n          {{ cipher.identity.fullName }}\n        </div>\n        <div class=\"box-content-row\" *ngIf=\"cipher.identity.username\">\n          <span\n            class=\"row-label draggable\"\n            draggable=\"true\"\n            (dragstart)=\"setTextDataOnDrag($event, cipher.identity.username)\"\n            >{{ \"username\" | i18n }}</span\n          >\n          {{ cipher.identity.username }}\n        </div>\n        <div class=\"box-content-row\" *ngIf=\"cipher.identity.company\">\n          <span\n            class=\"row-label draggable\"\n            draggable=\"true\"\n            (dragstart)=\"setTextDataOnDrag($event, cipher.identity.company)\"\n            >{{ \"company\" | i18n }}</span\n          >\n          {{ cipher.identity.company }}\n        </div>\n        <div class=\"box-content-row\" *ngIf=\"cipher.identity.ssn\">\n          <span\n            class=\"row-label draggable\"\n            draggable=\"true\"\n            (dragstart)=\"setTextDataOnDrag($event, cipher.identity.ssn)\"\n            >{{ \"ssn\" | i18n }}</span\n          >\n          {{ cipher.identity.ssn }}\n        </div>\n        <div class=\"box-content-row\" *ngIf=\"cipher.identity.passportNumber\">\n          <span\n            class=\"row-label draggable\"\n            draggable=\"true\"\n            (dragstart)=\"setTextDataOnDrag($event, cipher.identity.passportNumber)\"\n            >{{ \"passportNumber\" | i18n }}</span\n          >\n          {{ cipher.identity.passportNumber }}\n        </div>\n        <div class=\"box-content-row\" *ngIf=\"cipher.identity.licenseNumber\">\n          <span\n            class=\"row-label draggable\"\n            draggable=\"true\"\n            (dragstart)=\"setTextDataOnDrag($event, cipher.identity.licenseNumber)\"\n            >{{ \"licenseNumber\" | i18n }}</span\n          >\n          {{ cipher.identity.licenseNumber }}\n        </div>\n        <div class=\"box-content-row\" *ngIf=\"cipher.identity.email\">\n          <span\n            class=\"row-label draggable\"\n            draggable=\"true\"\n            (dragstart)=\"setTextDataOnDrag($event, cipher.identity.email)\"\n            >{{ \"email\" | i18n }}</span\n          >\n          {{ cipher.identity.email }}\n        </div>\n        <div class=\"box-content-row\" *ngIf=\"cipher.identity.phone\">\n          <span\n            class=\"row-label draggable\"\n            draggable=\"true\"\n            (dragstart)=\"setTextDataOnDrag($event, cipher.identity.phone)\"\n            >{{ \"phone\" | i18n }}</span\n          >\n          {{ cipher.identity.phone }}\n        </div>\n        <div\n          class=\"box-content-row\"\n          *ngIf=\"cipher.identity.address1 || cipher.identity.city || cipher.identity.country\"\n        >\n          <span\n            class=\"row-label draggable\"\n            draggable=\"true\"\n            (dragstart)=\"\n              setTextDataOnDrag(\n                $event,\n                (cipher.identity.address1 ? cipher.identity.address1 + '\\n' : '') +\n                  (cipher.identity.address2 ? cipher.identity.address2 + '\\n' : '') +\n                  (cipher.identity.address3 ? cipher.identity.address3 + '\\n' : '') +\n                  (cipher.identity.fullAddressPart2\n                    ? cipher.identity.fullAddressPart2 + '\\n'\n                    : '') +\n                  (cipher.identity.country ? cipher.identity.country : '')\n              )\n            \"\n            >{{ \"address\" | i18n }}</span\n          >\n          <div *ngIf=\"cipher.identity.address1\">{{ cipher.identity.address1 }}</div>\n          <div *ngIf=\"cipher.identity.address2\">{{ cipher.identity.address2 }}</div>\n          <div *ngIf=\"cipher.identity.address3\">{{ cipher.identity.address3 }}</div>\n          <div *ngIf=\"cipher.identity.fullAddressPart2\">{{ cipher.identity.fullAddressPart2 }}</div>\n          <div *ngIf=\"cipher.identity.country\">{{ cipher.identity.country }}</div>\n        </div>\n      </div>\n    </div>\n  </div>\n  <div class=\"box\" *ngIf=\"cipher.login && cipher.login.hasUris\">\n    <div class=\"box-content\">\n      <div\n        class=\"box-content-row box-content-row-flex\"\n        *ngFor=\"let u of cipher.login.uris; let i = index\"\n      >\n        <div class=\"row-main\">\n          <label\n            for=\"hostOrUri{{ i }}\"\n            class=\"row-label draggable\"\n            draggable=\"true\"\n            (dragstart)=\"setTextDataOnDrag($event, u.uri)\"\n            *ngIf=\"!u.isWebsite\"\n            >{{ \"uri\" | i18n }}</label\n          >\n          <label\n            for=\"hostOrUri{{ i }}\"\n            class=\"row-label draggable\"\n            draggable=\"true\"\n            (dragstart)=\"setTextDataOnDrag($event, u.uri)\"\n            *ngIf=\"u.isWebsite\"\n            >{{ \"website\" | i18n }}</label\n          >\n          <span title=\"{{ u.uri }}\">\n            <input\n              id=\"hostOrUri{{ i }}\"\n              type=\"text\"\n              [value]=\"u.hostOrUri\"\n              readonly\n              aria-readonly=\"true\"\n            />\n          </span>\n        </div>\n        <div class=\"action-buttons\">\n          <button\n            type=\"button\"\n            class=\"row-btn\"\n            appStopClick\n            attr.aria-label=\"{{ 'launch' | i18n }} {{ u.uri }}\"\n            appA11yTitle=\"{{ 'launch' | i18n }}\"\n            *ngIf=\"u.canLaunch\"\n            (click)=\"launch(u)\"\n          >\n            <i class=\"bwi bwi-lg bwi-share-square\" aria-hidden=\"true\"></i>\n          </button>\n          <button\n            type=\"button\"\n            class=\"row-btn\"\n            appStopClick\n            attr.aria-label=\"{{ 'copyUri' | i18n }} {{ u.uri }}\"\n            appA11yTitle=\"{{ 'copyUri' | i18n }}\"\n            (click)=\"copy(u.uri, u.isWebsite ? 'website' : 'uri', 'URI')\"\n          >\n            <i class=\"bwi bwi-lg bwi-clone\" aria-hidden=\"true\"></i>\n          </button>\n        </div>\n      </div>\n    </div>\n  </div>\n  <div class=\"box\" *ngIf=\"cipher.folderId\">\n    <div class=\"box-content\">\n      <div class=\"box-content-row\">\n        <label\n          for=\"folderName\"\n          class=\"draggable\"\n          draggable=\"true\"\n          (dragstart)=\"setTextDataOnDrag($event, folder.name)\"\n          >{{ \"folder\" | i18n }}</label\n        >\n        <input id=\"folderName\" type=\"text\" name=\"folderName\" [value]=\"folder.name\" readonly />\n      </div>\n    </div>\n  </div>\n  <div class=\"box\" *ngIf=\"cipher.notes\">\n    <h2 class=\"box-header\">\n      <label\n        for=\"notes\"\n        class=\"draggable\"\n        draggable=\"true\"\n        (dragstart)=\"setTextDataOnDrag($event, cipher.notes)\"\n        >{{ \"notes\" | i18n }}</label\n      >\n    </h2>\n    <div class=\"box-content\">\n      <div class=\"box-content-row\">\n        <textarea\n          id=\"notes\"\n          [value]=\"cipher.notes\"\n          rows=\"6\"\n          readonly\n          aria-readonly=\"true\"\n        ></textarea>\n      </div>\n    </div>\n  </div>\n  <div class=\"box\" *ngIf=\"cipher.hasFields\">\n    <app-vault-view-custom-fields\n      [cipher]=\"cipher\"\n      [promptPassword]=\"promptPassword.bind(this)\"\n      [copy]=\"copy.bind(this)\"\n    ></app-vault-view-custom-fields>\n  </div>\n  <div\n    class=\"box\"\n    *ngIf=\"cipher.hasAttachments && (canAccessPremium || cipher.organizationId) && showAttachments\"\n  >\n    <h2 class=\"box-header\">\n      {{ \"attachments\" | i18n }}\n    </h2>\n    <div class=\"box-content single-line\">\n      <button\n        type=\"button\"\n        class=\"box-content-row box-content-row-flex text-default\"\n        *ngFor=\"let attachment of cipher.attachments\"\n        appStopClick\n        (click)=\"downloadAttachment(attachment)\"\n      >\n        <span class=\"row-main\">{{ attachment.fileName }}</span>\n        <small class=\"row-sub-label\">{{ attachment.sizeName }}</small>\n        <i\n          class=\"bwi bwi-download bwi-fw row-sub-icon\"\n          *ngIf=\"!$any(attachment).downloading\"\n          aria-hidden=\"true\"\n        ></i>\n        <i\n          class=\"bwi bwi-spinner bwi-fw bwi-spin row-sub-icon\"\n          *ngIf=\"$any(attachment).downloading\"\n          aria-hidden=\"true\"\n        ></i>\n      </button>\n    </div>\n  </div>\n  <div class=\"box list\">\n    <div class=\"box-content single-line\">\n      <button\n        type=\"button\"\n        class=\"box-content-row\"\n        appStopClick\n        (click)=\"fillCipher()\"\n        *ngIf=\"cipher.type !== cipherType.SecureNote && !cipher.isDeleted && !inPopout\"\n      >\n        <div class=\"row-main text-primary\">\n          <div class=\"icon text-primary\" aria-hidden=\"true\">\n            <i class=\"bwi bwi-pencil-square bwi-lg bwi-fw\"></i>\n          </div>\n          <span>{{ \"autoFill\" | i18n }}</span>\n        </div>\n      </button>\n      <button\n        type=\"button\"\n        class=\"box-content-row\"\n        appStopClick\n        (click)=\"fillCipherAndSave()\"\n        *ngIf=\"cipher.type === cipherType.Login && !cipher.isDeleted && !inPopout\"\n      >\n        <div class=\"row-main text-primary\">\n          <div class=\"icon text-primary\" aria-hidden=\"true\">\n            <i class=\"bwi bwi-bookmark bwi-lg bwi-fw\"></i>\n          </div>\n          <span>{{ \"autoFillAndSave\" | i18n }}</span>\n        </div>\n      </button>\n      <button\n        type=\"button\"\n        class=\"box-content-row\"\n        appStopClick\n        (click)=\"clone()\"\n        *ngIf=\"!cipher.organizationId && !cipher.isDeleted\"\n      >\n        <div class=\"row-main text-primary\">\n          <div class=\"icon text-primary\" aria-hidden=\"true\">\n            <i class=\"bwi bwi-files bwi-lg bwi-fw\"></i>\n          </div>\n          <span>{{ \"cloneItem\" | i18n }}</span>\n        </div>\n      </button>\n      <button\n        type=\"button\"\n        class=\"box-content-row\"\n        appStopClick\n        (click)=\"share()\"\n        *ngIf=\"!cipher.organizationId\"\n      >\n        <div class=\"row-main text-primary\">\n          <div class=\"icon text-primary\" aria-hidden=\"true\">\n            <i class=\"bwi bwi-arrow-circle-right bwi-lg bwi-fw\"></i>\n          </div>\n          <span>{{ \"moveToOrganization\" | i18n }}</span>\n        </div>\n      </button>\n      <button\n        type=\"button\"\n        class=\"box-content-row\"\n        appStopClick\n        (click)=\"restore()\"\n        *ngIf=\"cipher.isDeleted\"\n      >\n        <div class=\"row-main text-primary\">\n          <div class=\"icon text-primary\" aria-hidden=\"true\">\n            <i class=\"bwi bwi-undo bwi-lg bwi-fw\"></i>\n          </div>\n          <span>{{ \"restoreItem\" | i18n }}</span>\n        </div>\n      </button>\n      <button\n        type=\"button\"\n        class=\"box-content-row\"\n        appStopClick\n        (click)=\"delete()\"\n        *ngIf=\"cipher.edit\"\n      >\n        <div class=\"row-main text-danger\">\n          <div class=\"icon text-danger\" aria-hidden=\"true\">\n            <i class=\"bwi bwi-trash bwi-lg bwi-fw\"></i>\n          </div>\n          <span>{{ (cipher.isDeleted ? \"permanentlyDeleteItem\" : \"deleteItem\") | i18n }}</span>\n        </div>\n      </button>\n    </div>\n  </div>\n  <div class=\"box\">\n    <div class=\"box-footer\">\n      <div>\n        <b class=\"font-weight-semibold\">{{ \"dateUpdated\" | i18n }}:</b>\n        {{ cipher.revisionDate | date: \"medium\" }}\n      </div>\n      <div *ngIf=\"cipher.creationDate\">\n        <b class=\"font-weight-semibold\">{{ \"dateCreated\" | i18n }}:</b>\n        {{ cipher.creationDate | date: \"medium\" }}\n      </div>\n      <div *ngIf=\"cipher.passwordRevisionDisplayDate\">\n        <b class=\"font-weight-semibold\">{{ \"datePasswordUpdated\" | i18n }}:</b>\n        {{ cipher.passwordRevisionDisplayDate | date: \"medium\" }}\n      </div>\n      <div *ngIf=\"cipher.hasPasswordHistory\">\n        <b class=\"font-weight-semibold\">{{ \"passwordHistory\" | i18n }}:</b>\n        <button\n          routerLink=\"/cipher-password-history\"\n          [queryParams]=\"{ cipherId: cipher.id }\"\n          appStopClick\n          title=\"{{ 'passwordHistory' | i18n }}\"\n        >\n          {{ cipher.passwordHistory.length }}\n        </button>\n      </div>\n    </div>\n  </div>\n</main>\n","import { Location } from \"@angular/common\";\nimport { ChangeDetectorRef, Component, NgZone } from \"@angular/core\";\nimport { ActivatedRoute, Router } from \"@angular/router\";\nimport { first } from \"rxjs/operators\";\n\nimport { ViewComponent as BaseViewComponent } from \"@bitwarden/angular/vault/components/view.component\";\nimport { ApiService } from \"@bitwarden/common/abstractions/api.service\";\nimport { AuditService } from \"@bitwarden/common/abstractions/audit.service\";\nimport { BroadcasterService } from \"@bitwarden/common/abstractions/broadcaster.service\";\nimport { CryptoService } from \"@bitwarden/common/abstractions/crypto.service\";\nimport { EventCollectionService } from \"@bitwarden/common/abstractions/event/event-collection.service\";\nimport { FileDownloadService } from \"@bitwarden/common/abstractions/fileDownload/fileDownload.service\";\nimport { I18nService } from \"@bitwarden/common/abstractions/i18n.service\";\nimport { LogService } from \"@bitwarden/common/abstractions/log.service\";\nimport { MessagingService } from \"@bitwarden/common/abstractions/messaging.service\";\nimport { PlatformUtilsService } from \"@bitwarden/common/abstractions/platformUtils.service\";\nimport { StateService } from \"@bitwarden/common/abstractions/state.service\";\nimport { TokenService } from \"@bitwarden/common/abstractions/token.service\";\nimport { TotpService } from \"@bitwarden/common/abstractions/totp.service\";\nimport { CipherService } from \"@bitwarden/common/vault/abstractions/cipher.service\";\nimport { FolderService } from \"@bitwarden/common/vault/abstractions/folder/folder.service.abstraction\";\nimport { PasswordRepromptService } from \"@bitwarden/common/vault/abstractions/password-reprompt.service\";\nimport { CipherType } from \"@bitwarden/common/vault/enums/cipher-type\";\nimport { Cipher } from \"@bitwarden/common/vault/models/domain/cipher\";\nimport { LoginUriView } from \"@bitwarden/common/vault/models/view/login-uri.view\";\n\nimport { AutofillService } from \"../../../../autofill/services/abstractions/autofill.service\";\nimport { BrowserApi } from \"../../../../browser/browserApi\";\nimport { PopupUtilsService } from \"../../../../popup/services/popup-utils.service\";\n\nconst BroadcasterSubscriptionId = \"ChildViewComponent\";\n\n@Component({\n  selector: \"app-vault-view\",\n  templateUrl: \"view.component.html\",\n})\nexport class ViewComponent extends BaseViewComponent {\n  showAttachments = true;\n  pageDetails: any[] = [];\n  tab: any;\n  loadPageDetailsTimeout: number;\n  inPopout = false;\n  cipherType = CipherType;\n\n  constructor(\n    cipherService: CipherService,\n    folderService: FolderService,\n    totpService: TotpService,\n    tokenService: TokenService,\n    i18nService: I18nService,\n    cryptoService: CryptoService,\n    platformUtilsService: PlatformUtilsService,\n    auditService: AuditService,\n    private route: ActivatedRoute,\n    private router: Router,\n    private location: Location,\n    broadcasterService: BroadcasterService,\n    ngZone: NgZone,\n    changeDetectorRef: ChangeDetectorRef,\n    stateService: StateService,\n    eventCollectionService: EventCollectionService,\n    private autofillService: AutofillService,\n    private messagingService: MessagingService,\n    private popupUtilsService: PopupUtilsService,\n    apiService: ApiService,\n    passwordRepromptService: PasswordRepromptService,\n    logService: LogService,\n    fileDownloadService: FileDownloadService\n  ) {\n    super(\n      cipherService,\n      folderService,\n      totpService,\n      tokenService,\n      i18nService,\n      cryptoService,\n      platformUtilsService,\n      auditService,\n      window,\n      broadcasterService,\n      ngZone,\n      changeDetectorRef,\n      eventCollectionService,\n      apiService,\n      passwordRepromptService,\n      logService,\n      stateService,\n      fileDownloadService\n    );\n  }\n\n  ngOnInit() {\n    this.inPopout = this.popupUtilsService.inPopout(window);\n    // eslint-disable-next-line rxjs-angular/prefer-takeuntil, rxjs/no-async-subscribe\n    this.route.queryParams.pipe(first()).subscribe(async (params) => {\n      if (params.cipherId) {\n        this.cipherId = params.cipherId;\n      } else {\n        this.close();\n      }\n\n      await this.load();\n    });\n\n    super.ngOnInit();\n\n    this.broadcasterService.subscribe(BroadcasterSubscriptionId, (message: any) => {\n      this.ngZone.run(async () => {\n        switch (message.command) {\n          case \"collectPageDetailsResponse\":\n            if (message.sender === BroadcasterSubscriptionId) {\n              this.pageDetails.push({\n                frameId: message.webExtSender.frameId,\n                tab: message.tab,\n                details: message.details,\n              });\n            }\n            break;\n          case \"tabChanged\":\n          case \"windowChanged\":\n            if (this.loadPageDetailsTimeout != null) {\n              window.clearTimeout(this.loadPageDetailsTimeout);\n            }\n            this.loadPageDetailsTimeout = window.setTimeout(() => this.loadPageDetails(), 500);\n            break;\n          default:\n            break;\n        }\n      });\n    });\n  }\n\n  ngOnDestroy() {\n    super.ngOnDestroy();\n    this.broadcasterService.unsubscribe(BroadcasterSubscriptionId);\n  }\n\n  async load() {\n    await super.load();\n    await this.loadPageDetails();\n  }\n\n  async edit() {\n    if (this.cipher.isDeleted) {\n      return false;\n    }\n    if (!(await super.edit())) {\n      return false;\n    }\n\n    this.router.navigate([\"/edit-cipher\"], { queryParams: { cipherId: this.cipher.id } });\n    return true;\n  }\n\n  async clone() {\n    if (this.cipher.isDeleted) {\n      return false;\n    }\n\n    if (!(await super.clone())) {\n      return false;\n    }\n\n    this.router.navigate([\"/clone-cipher\"], {\n      queryParams: {\n        cloneMode: true,\n        cipherId: this.cipher.id,\n      },\n    });\n    return true;\n  }\n\n  async share() {\n    if (!(await super.share())) {\n      return false;\n    }\n\n    if (this.cipher.organizationId == null) {\n      this.router.navigate([\"/share-cipher\"], {\n        replaceUrl: true,\n        queryParams: { cipherId: this.cipher.id },\n      });\n    }\n    return true;\n  }\n\n  async fillCipher() {\n    const didAutofill = await this.doAutofill();\n    if (didAutofill) {\n      this.platformUtilsService.showToast(\"success\", null, this.i18nService.t(\"autoFillSuccess\"));\n    }\n  }\n\n  async fillCipherAndSave() {\n    const didAutofill = await this.doAutofill();\n\n    if (didAutofill) {\n      if (this.tab == null) {\n        throw new Error(\"No tab found.\");\n      }\n\n      if (this.cipher.login.uris == null) {\n        this.cipher.login.uris = [];\n      } else {\n        if (this.cipher.login.uris.some((uri) => uri.uri === this.tab.url)) {\n          this.platformUtilsService.showToast(\n            \"success\",\n            null,\n            this.i18nService.t(\"autoFillSuccessAndSavedUri\")\n          );\n          return;\n        }\n      }\n\n      const loginUri = new LoginUriView();\n      loginUri.uri = this.tab.url;\n      this.cipher.login.uris.push(loginUri);\n\n      try {\n        const cipher: Cipher = await this.cipherService.encrypt(this.cipher);\n        await this.cipherService.updateWithServer(cipher);\n        this.platformUtilsService.showToast(\n          \"success\",\n          null,\n          this.i18nService.t(\"autoFillSuccessAndSavedUri\")\n        );\n        this.messagingService.send(\"editedCipher\");\n      } catch {\n        this.platformUtilsService.showToast(\"error\", null, this.i18nService.t(\"unexpectedError\"));\n      }\n    }\n  }\n\n  async restore() {\n    if (!this.cipher.isDeleted) {\n      return false;\n    }\n    if (await super.restore()) {\n      this.close();\n      return true;\n    }\n    return false;\n  }\n\n  async delete() {\n    if (await super.delete()) {\n      this.messagingService.send(\"deletedCipher\");\n      this.close();\n      return true;\n    }\n    return false;\n  }\n\n  close() {\n    this.location.back();\n  }\n\n  private async loadPageDetails() {\n    this.pageDetails = [];\n    this.tab = await BrowserApi.getTabFromCurrentWindow();\n    if (this.tab == null) {\n      return;\n    }\n    BrowserApi.tabSendMessage(this.tab, {\n      command: \"collectPageDetails\",\n      tab: this.tab,\n      sender: BroadcasterSubscriptionId,\n    });\n  }\n\n  private async doAutofill() {\n    if (!(await this.promptPassword())) {\n      return false;\n    }\n\n    if (this.pageDetails == null || this.pageDetails.length === 0) {\n      this.platformUtilsService.showToast(\"error\", null, this.i18nService.t(\"autofillError\"));\n      return false;\n    }\n\n    try {\n      this.totpCode = await this.autofillService.doAutoFill({\n        tab: this.tab,\n        cipher: this.cipher,\n        pageDetails: this.pageDetails,\n        doc: window.document,\n        fillNewPassword: true,\n      });\n      if (this.totpCode != null) {\n        this.platformUtilsService.copyToClipboard(this.totpCode, { window: window });\n      }\n    } catch {\n      this.platformUtilsService.showToast(\"error\", null, this.i18nService.t(\"autofillError\"));\n      this.changeDetectorRef.detectChanges();\n      return false;\n    }\n\n    return true;\n  }\n}\n","import { Directive, EventEmitter, Output } from \"@angular/core\";\n\nimport { EnvironmentService } from \"@bitwarden/common/abstractions/environment.service\";\nimport { I18nService } from \"@bitwarden/common/abstractions/i18n.service\";\nimport { PlatformUtilsService } from \"@bitwarden/common/abstractions/platformUtils.service\";\n\n@Directive()\nexport class EnvironmentComponent {\n  @Output() onSaved = new EventEmitter();\n\n  iconsUrl: string;\n  identityUrl: string;\n  apiUrl: string;\n  webVaultUrl: string;\n  notificationsUrl: string;\n  baseUrl: string;\n  showCustom = false;\n\n  constructor(\n    protected platformUtilsService: PlatformUtilsService,\n    protected environmentService: EnvironmentService,\n    protected i18nService: I18nService\n  ) {\n    const urls = this.environmentService.getUrls();\n\n    this.baseUrl = urls.base || \"\";\n    this.webVaultUrl = urls.webVault || \"\";\n    this.apiUrl = urls.api || \"\";\n    this.identityUrl = urls.identity || \"\";\n    this.iconsUrl = urls.icons || \"\";\n    this.notificationsUrl = urls.notifications || \"\";\n  }\n\n  async submit() {\n    const resUrls = await this.environmentService.setUrls({\n      base: this.baseUrl,\n      api: this.apiUrl,\n      identity: this.identityUrl,\n      webVault: this.webVaultUrl,\n      icons: this.iconsUrl,\n      notifications: this.notificationsUrl,\n    });\n\n    // re-set urls since service can change them, ex: prefixing https://\n    this.baseUrl = resUrls.base;\n    this.apiUrl = resUrls.api;\n    this.identityUrl = resUrls.identity;\n    this.webVaultUrl = resUrls.webVault;\n    this.iconsUrl = resUrls.icons;\n    this.notificationsUrl = resUrls.notifications;\n\n    this.platformUtilsService.showToast(\"success\", null, this.i18nService.t(\"environmentSaved\"));\n    this.saved();\n  }\n\n  toggleCustom() {\n    this.showCustom = !this.showCustom;\n  }\n\n  protected saved() {\n    this.onSaved.emit();\n  }\n}\n","import { Jsonify } from \"type-fest\";\n\nexport class EnvironmentUrls {\n  base: string = null;\n  api: string = null;\n  identity: string = null;\n  icons: string = null;\n  notifications: string = null;\n  events: string = null;\n  webVault: string = null;\n  keyConnector: string = null;\n\n  static fromJSON(obj: Jsonify<EnvironmentUrls>): EnvironmentUrls {\n    return Object.assign(new EnvironmentUrls(), obj);\n  }\n}\n","import { concatMap, Observable, Subject } from \"rxjs\";\n\nimport {\n  EnvironmentService as EnvironmentServiceAbstraction,\n  Urls,\n} from \"../abstractions/environment.service\";\nimport { StateService } from \"../abstractions/state.service\";\nimport { EnvironmentUrls } from \"../models/domain/environment-urls\";\n\nexport class EnvironmentService implements EnvironmentServiceAbstraction {\n  private readonly urlsSubject = new Subject<Urls>();\n  urls: Observable<Urls> = this.urlsSubject;\n\n  protected baseUrl: string;\n  protected webVaultUrl: string;\n  protected apiUrl: string;\n  protected identityUrl: string;\n  protected iconsUrl: string;\n  protected notificationsUrl: string;\n  protected eventsUrl: string;\n  private keyConnectorUrl: string;\n  private scimUrl: string = null;\n\n  constructor(private stateService: StateService) {\n    this.stateService.activeAccount$\n      .pipe(\n        concatMap(async () => {\n          await this.setUrlsFromStorage();\n        })\n      )\n      .subscribe();\n  }\n\n  hasBaseUrl() {\n    return this.baseUrl != null;\n  }\n\n  getNotificationsUrl() {\n    if (this.notificationsUrl != null) {\n      return this.notificationsUrl;\n    }\n\n    if (this.baseUrl != null) {\n      return this.baseUrl + \"/notifications\";\n    }\n\n    return \"https://notifications.bitwarden.com\";\n  }\n\n  getWebVaultUrl() {\n    if (this.webVaultUrl != null) {\n      return this.webVaultUrl;\n    }\n\n    if (this.baseUrl) {\n      return this.baseUrl;\n    }\n    return \"https://vault.bitwarden.com\";\n  }\n\n  getSendUrl() {\n    return this.getWebVaultUrl() === \"https://vault.bitwarden.com\"\n      ? \"https://send.bitwarden.com/#\"\n      : this.getWebVaultUrl() + \"/#/send/\";\n  }\n\n  getIconsUrl() {\n    if (this.iconsUrl != null) {\n      return this.iconsUrl;\n    }\n\n    if (this.baseUrl) {\n      return this.baseUrl + \"/icons\";\n    }\n\n    return \"https://icons.bitwarden.net\";\n  }\n\n  getApiUrl() {\n    if (this.apiUrl != null) {\n      return this.apiUrl;\n    }\n\n    if (this.baseUrl) {\n      return this.baseUrl + \"/api\";\n    }\n\n    return \"https://api.bitwarden.com\";\n  }\n\n  getIdentityUrl() {\n    if (this.identityUrl != null) {\n      return this.identityUrl;\n    }\n\n    if (this.baseUrl) {\n      return this.baseUrl + \"/identity\";\n    }\n\n    return \"https://identity.bitwarden.com\";\n  }\n\n  getEventsUrl() {\n    if (this.eventsUrl != null) {\n      return this.eventsUrl;\n    }\n\n    if (this.baseUrl) {\n      return this.baseUrl + \"/events\";\n    }\n\n    return \"https://events.bitwarden.com\";\n  }\n\n  getKeyConnectorUrl() {\n    return this.keyConnectorUrl;\n  }\n\n  getScimUrl() {\n    if (this.scimUrl != null) {\n      return this.scimUrl + \"/v2\";\n    }\n\n    return this.getWebVaultUrl() === \"https://vault.bitwarden.com\"\n      ? \"https://scim.bitwarden.com/v2\"\n      : this.getWebVaultUrl() + \"/scim/v2\";\n  }\n\n  async setUrlsFromStorage(): Promise<void> {\n    const urls: any = await this.stateService.getEnvironmentUrls();\n    const envUrls = new EnvironmentUrls();\n\n    this.baseUrl = envUrls.base = urls.base;\n    this.webVaultUrl = urls.webVault;\n    this.apiUrl = envUrls.api = urls.api;\n    this.identityUrl = envUrls.identity = urls.identity;\n    this.iconsUrl = urls.icons;\n    this.notificationsUrl = urls.notifications;\n    this.eventsUrl = envUrls.events = urls.events;\n    this.keyConnectorUrl = urls.keyConnector;\n    // scimUrl is not saved to storage\n  }\n\n  async setUrls(urls: Urls): Promise<Urls> {\n    urls.base = this.formatUrl(urls.base);\n    urls.webVault = this.formatUrl(urls.webVault);\n    urls.api = this.formatUrl(urls.api);\n    urls.identity = this.formatUrl(urls.identity);\n    urls.icons = this.formatUrl(urls.icons);\n    urls.notifications = this.formatUrl(urls.notifications);\n    urls.events = this.formatUrl(urls.events);\n    urls.keyConnector = this.formatUrl(urls.keyConnector);\n\n    // scimUrl cannot be cleared\n    urls.scim = this.formatUrl(urls.scim) ?? this.scimUrl;\n\n    await this.stateService.setEnvironmentUrls({\n      base: urls.base,\n      api: urls.api,\n      identity: urls.identity,\n      webVault: urls.webVault,\n      icons: urls.icons,\n      notifications: urls.notifications,\n      events: urls.events,\n      keyConnector: urls.keyConnector,\n      // scimUrl is not saved to storage\n    });\n\n    this.baseUrl = urls.base;\n    this.webVaultUrl = urls.webVault;\n    this.apiUrl = urls.api;\n    this.identityUrl = urls.identity;\n    this.iconsUrl = urls.icons;\n    this.notificationsUrl = urls.notifications;\n    this.eventsUrl = urls.events;\n    this.keyConnectorUrl = urls.keyConnector;\n    this.scimUrl = urls.scim;\n\n    this.urlsSubject.next(urls);\n\n    return urls;\n  }\n\n  getUrls() {\n    return {\n      base: this.baseUrl,\n      webVault: this.webVaultUrl,\n      api: this.apiUrl,\n      identity: this.identityUrl,\n      icons: this.iconsUrl,\n      notifications: this.notificationsUrl,\n      events: this.eventsUrl,\n      keyConnector: this.keyConnectorUrl,\n      scim: this.scimUrl,\n    };\n  }\n\n  private formatUrl(url: string): string {\n    if (url == null || url === \"\") {\n      return null;\n    }\n\n    url = url.replace(/\\/+$/g, \"\");\n    if (!url.startsWith(\"http://\") && !url.startsWith(\"https://\")) {\n      url = \"https://\" + url;\n    }\n\n    return url.trim();\n  }\n\n  isCloud(): boolean {\n    return [\"https://api.bitwarden.com\", \"https://vault.bitwarden.com/api\"].includes(\n      this.getApiUrl()\n    );\n  }\n\n  isSelfHosted(): boolean {\n    return ![\n      \"http://vault.bitwarden.com\",\n      \"https://vault.bitwarden.com\",\n      \"http://vault.qa.bitwarden.pw\",\n      \"https://vault.qa.bitwarden.pw\",\n    ].includes(this.getWebVaultUrl());\n  }\n}\n","// required to avoid linting errors when there are no flags\n/* eslint-disable @typescript-eslint/ban-types */\nexport type SharedFlags = {\n  multithreadDecryption: boolean;\n  showPasswordless?: boolean;\n};\n\n// required to avoid linting errors when there are no flags\n/* eslint-disable @typescript-eslint/ban-types */\nexport type SharedDevFlags = {};\n\nfunction getFlags<T>(envFlags: string | T): T {\n  if (typeof envFlags === \"string\") {\n    return JSON.parse(envFlags) as T;\n  } else {\n    return envFlags as T;\n  }\n}\n\n/**\n * Gets the value of a feature flag from environment.\n * All flags default to \"on\" (true).\n * Only use for shared code in `libs`, otherwise use the client-specific function.\n * @param flag The name of the feature flag to check\n * @returns The value of the flag\n */\nexport function flagEnabled<Flags extends SharedFlags>(flag: keyof Flags): boolean {\n  const flags = getFlags<Flags>(process.env.FLAGS);\n  return flags[flag] == null || !!flags[flag];\n}\n\n/**\n * Gets the value of a dev flag from environment.\n * Will always return false unless in development.\n * Only use for shared code in `libs`, otherwise use the client-specific function.\n * @param flag The name of the dev flag to check\n * @returns The value of the flag\n */\nexport function devFlagEnabled<DevFlags extends SharedDevFlags>(flag: keyof DevFlags): boolean {\n  if (process.env.ENV !== \"development\") {\n    return false;\n  }\n\n  const devFlags = getFlags<DevFlags>(process.env.DEV_FLAGS);\n  return devFlags[flag] == null || !!devFlags[flag];\n}\n\n/**\n * Gets the value of a dev flag from environment.\n * Will always return false unless in development.\n * @param flag The name of the dev flag to check\n * @returns The value of the flag\n * @throws Error if the flag is not enabled\n */\nexport function devFlagValue<DevFlags extends SharedDevFlags>(\n  flag: keyof DevFlags\n): DevFlags[keyof DevFlags] {\n  if (!devFlagEnabled(flag)) {\n    throw new Error(`This method should not be called, it is protected by a disabled dev flag.`);\n  }\n\n  const devFlags = getFlags<DevFlags>(process.env.DEV_FLAGS);\n  return devFlags[flag];\n}\n","import {\n  flagEnabled as baseFlagEnabled,\n  devFlagEnabled as baseDevFlagEnabled,\n  devFlagValue as baseDevFlagValue,\n  SharedFlags,\n  SharedDevFlags,\n} from \"@bitwarden/common/misc/flags\";\n\nimport { GroupPolicyEnvironment } from \"./types/group-policy-environment\";\n\n// required to avoid linting errors when there are no flags\n/* eslint-disable-next-line @typescript-eslint/ban-types */\nexport type Flags = {} & SharedFlags;\n\n// required to avoid linting errors when there are no flags\n/* eslint-disable-next-line @typescript-eslint/ban-types */\nexport type DevFlags = {\n  storeSessionDecrypted?: boolean;\n  managedEnvironment?: GroupPolicyEnvironment;\n} & SharedDevFlags;\n\nexport function flagEnabled(flag: keyof Flags): boolean {\n  return baseFlagEnabled<Flags>(flag);\n}\n\nexport function devFlagEnabled(flag: keyof DevFlags) {\n  return baseDevFlagEnabled<DevFlags>(flag);\n}\n\nexport function devFlagValue(flag: keyof DevFlags) {\n  return baseDevFlagValue(flag);\n}\n","import { LogService } from \"@bitwarden/common/abstractions/log.service\";\nimport { StateService } from \"@bitwarden/common/abstractions/state.service\";\nimport { EnvironmentService } from \"@bitwarden/common/services/environment.service\";\n\nimport { devFlagEnabled, devFlagValue } from \"../flags\";\nimport { GroupPolicyEnvironment } from \"../types/group-policy-environment\";\n\nexport class BrowserEnvironmentService extends EnvironmentService {\n  constructor(stateService: StateService, private logService: LogService) {\n    super(stateService);\n  }\n\n  async hasManagedEnvironment(): Promise<boolean> {\n    try {\n      return (await this.getManagedEnvironment()) != null;\n    } catch (e) {\n      this.logService.error(e);\n      return false;\n    }\n  }\n\n  async settingsHaveChanged() {\n    if (!(await this.hasManagedEnvironment())) {\n      return false;\n    }\n\n    const env = await this.getManagedEnvironment();\n\n    return (\n      env.base != this.baseUrl ||\n      env.webVault != this.webVaultUrl ||\n      env.api != this.webVaultUrl ||\n      env.identity != this.identityUrl ||\n      env.icons != this.iconsUrl ||\n      env.notifications != this.notificationsUrl ||\n      env.events != this.eventsUrl\n    );\n  }\n\n  getManagedEnvironment(): Promise<GroupPolicyEnvironment> {\n    return devFlagEnabled(\"managedEnvironment\")\n      ? new Promise((resolve) => resolve(devFlagValue(\"managedEnvironment\")))\n      : new Promise((resolve, reject) => {\n          if (chrome.storage.managed == null) {\n            return resolve(null);\n          }\n\n          chrome.storage.managed.get(\"environment\", (result) => {\n            if (chrome.runtime.lastError) {\n              return reject(chrome.runtime.lastError);\n            }\n\n            resolve(result.environment);\n          });\n        });\n  }\n\n  async setUrlsToManagedEnvironment() {\n    const env = await this.getManagedEnvironment();\n    await this.setUrls({\n      base: env.base,\n      webVault: env.webVault,\n      api: env.api,\n      identity: env.identity,\n      icons: env.icons,\n      notifications: env.notifications,\n      events: env.events,\n    });\n  }\n}\n","<form #form (ngSubmit)=\"submit()\">\n  <header>\n    <div class=\"left\">\n      <button type=\"button\" routerLink=\"/home\">{{ \"close\" | i18n }}</button>\n    </div>\n    <h1 class=\"center\">\n      <span class=\"title\">{{ \"appName\" | i18n }}</span>\n    </h1>\n    <div class=\"right\">\n      <button type=\"submit\" [disabled]=\"form.loading\">\n        <span [hidden]=\"form.loading\">{{ \"save\" | i18n }}</span>\n        <i class=\"bwi bwi-spinner bwi-lg bwi-spin\" [hidden]=\"!form.loading\" aria-hidden=\"true\"></i>\n      </button>\n    </div>\n  </header>\n  <main tabindex=\"-1\">\n    <app-callout\n      type=\"info\"\n      title=\"{{ 'settingsEdited' | i18n }}\"\n      *ngIf=\"showEditedManagedSettings\"\n    >\n      <a href=\"#\" appStopClick (click)=\"resetEnvironment()\">\n        {{ \"environmentEditedClick\" | i18n }}\n      </a>\n      {{ \"environmentEditedReset\" | i18n }}\n    </app-callout>\n\n    <div class=\"box\">\n      <h2 class=\"box-header\">\n        {{ \"selfHostedEnvironment\" | i18n }}\n      </h2>\n      <div class=\"box-content\">\n        <div class=\"box-content-row\" appBoxRow>\n          <label for=\"baseUrl\">{{ \"baseUrl\" | i18n }}</label>\n          <input\n            id=\"baseUrl\"\n            type=\"text\"\n            name=\"BaseUrl\"\n            aria-describedby=\"baseUrlHelp\"\n            [(ngModel)]=\"baseUrl\"\n            placeholder=\"ex. https://bitwarden.company.com\"\n            appInputVerbatim\n          />\n        </div>\n      </div>\n      <div id=\"baseUrlHelp\" class=\"box-footer\">\n        {{ \"selfHostedEnvironmentFooter\" | i18n }}\n      </div>\n    </div>\n    <div class=\"box\">\n      <h2 class=\"box-header\">\n        {{ \"customEnvironment\" | i18n }}\n      </h2>\n      <div\n        role=\"group\"\n        attr.aria-label=\"{{ 'customEnvironment' | i18n }}\"\n        aria-describedby=\"customEnvironmentHelp\"\n        class=\"box-content\"\n        [hidden]=\"!showCustom\"\n      >\n        <div class=\"box-content-row\" appBoxRow>\n          <label for=\"webVaultUrl\">{{ \"webVaultUrl\" | i18n }}</label>\n          <input\n            id=\"webVaultUrl\"\n            type=\"text\"\n            name=\"WebVaultUrl\"\n            [(ngModel)]=\"webVaultUrl\"\n            inputmode=\"url\"\n            appInputVerbatim\n          />\n        </div>\n        <div class=\"box-content-row\" appBoxRow>\n          <label for=\"apiUrl\">{{ \"apiUrl\" | i18n }}</label>\n          <input\n            id=\"apiUrl\"\n            type=\"text\"\n            name=\"ApiUrl\"\n            [(ngModel)]=\"apiUrl\"\n            inputmode=\"url\"\n            appInputVerbatim\n          />\n        </div>\n        <div class=\"box-content-row\" appBoxRow>\n          <label for=\"identityUrl\">{{ \"identityUrl\" | i18n }}</label>\n          <input\n            id=\"identityUrl\"\n            type=\"text\"\n            name=\"IdentityUrl\"\n            [(ngModel)]=\"identityUrl\"\n            inputmode=\"url\"\n            appInputVerbatim\n          />\n        </div>\n        <div class=\"box-content-row\" appBoxRow>\n          <label for=\"notificationsUrl\">{{ \"notificationsUrl\" | i18n }}</label>\n          <input\n            id=\"notificationsUrl\"\n            type=\"text\"\n            name=\"NotificationsUrl\"\n            inputmode=\"url\"\n            [(ngModel)]=\"notificationsUrl\"\n            appInputVerbatim\n          />\n        </div>\n        <div class=\"box-content-row\" appBoxRow>\n          <label for=\"iconsUrl\">{{ \"iconsUrl\" | i18n }}</label>\n          <input\n            id=\"iconsUrl\"\n            type=\"text\"\n            name=\"IconsUrl\"\n            [(ngModel)]=\"iconsUrl\"\n            inputmode=\"url\"\n            appInputVerbatim\n          />\n        </div>\n      </div>\n      <div id=\"customEnvironmentHelp\" class=\"box-footer\" [hidden]=\"!showCustom\">\n        {{ \"customEnvironmentFooter\" | i18n }}\n      </div>\n    </div>\n  </main>\n</form>\n","import { Component, OnInit } from \"@angular/core\";\nimport { Router } from \"@angular/router\";\n\nimport { EnvironmentComponent as BaseEnvironmentComponent } from \"@bitwarden/angular/components/environment.component\";\nimport { I18nService } from \"@bitwarden/common/abstractions/i18n.service\";\nimport { PlatformUtilsService } from \"@bitwarden/common/abstractions/platformUtils.service\";\n\nimport { BrowserEnvironmentService } from \"../../services/browser-environment.service\";\n\n@Component({\n  selector: \"app-environment\",\n  templateUrl: \"environment.component.html\",\n})\nexport class EnvironmentComponent extends BaseEnvironmentComponent implements OnInit {\n  showEditedManagedSettings = false;\n\n  constructor(\n    platformUtilsService: PlatformUtilsService,\n    public environmentService: BrowserEnvironmentService,\n    i18nService: I18nService,\n    private router: Router\n  ) {\n    super(platformUtilsService, environmentService, i18nService);\n    this.showCustom = true;\n  }\n\n  async ngOnInit() {\n    this.showEditedManagedSettings = await this.environmentService.settingsHaveChanged();\n  }\n\n  async resetEnvironment() {\n    const urls = await this.environmentService.getManagedEnvironment();\n\n    this.baseUrl = urls.base;\n    this.webVaultUrl = urls.webVault;\n    this.apiUrl = urls.api;\n    this.iconsUrl = urls.icons;\n    this.identityUrl = urls.identity;\n    this.notificationsUrl = urls.notifications;\n    this.iconsUrl = urls.icons;\n  }\n\n  saved() {\n    super.saved();\n    this.router.navigate([\"\"]);\n  }\n}\n","export class PasswordHintRequest {\n  email: string;\n\n  constructor(email: string) {\n    this.email = email;\n  }\n}\n","export abstract class LoginService {\n  getEmail: () => string;\n  getRememberEmail: () => boolean;\n  setEmail: (value: string) => void;\n  setRememberEmail: (value: boolean) => void;\n  clearValues: () => void;\n  saveEmailSettings: () => Promise<void>;\n}\n","import { Directive, OnInit } from \"@angular/core\";\nimport { Router } from \"@angular/router\";\n\nimport { ApiService } from \"@bitwarden/common/abstractions/api.service\";\nimport { I18nService } from \"@bitwarden/common/abstractions/i18n.service\";\nimport { LogService } from \"@bitwarden/common/abstractions/log.service\";\nimport { LoginService } from \"@bitwarden/common/abstractions/login.service\";\nimport { PlatformUtilsService } from \"@bitwarden/common/abstractions/platformUtils.service\";\nimport { PasswordHintRequest } from \"@bitwarden/common/models/request/password-hint.request\";\n\n@Directive()\nexport class HintComponent implements OnInit {\n  email = \"\";\n  formPromise: Promise<any>;\n\n  protected successRoute = \"login\";\n  protected onSuccessfulSubmit: () => void;\n\n  constructor(\n    protected router: Router,\n    protected i18nService: I18nService,\n    protected apiService: ApiService,\n    protected platformUtilsService: PlatformUtilsService,\n    private logService: LogService,\n    private loginService: LoginService\n  ) {}\n\n  ngOnInit(): void {\n    this.email = this.loginService.getEmail() ?? \"\";\n  }\n\n  async submit() {\n    if (this.email == null || this.email === \"\") {\n      this.platformUtilsService.showToast(\n        \"error\",\n        this.i18nService.t(\"errorOccurred\"),\n        this.i18nService.t(\"emailRequired\")\n      );\n      return;\n    }\n    if (this.email.indexOf(\"@\") === -1) {\n      this.platformUtilsService.showToast(\n        \"error\",\n        this.i18nService.t(\"errorOccurred\"),\n        this.i18nService.t(\"invalidEmail\")\n      );\n      return;\n    }\n\n    try {\n      this.formPromise = this.apiService.postPasswordHint(new PasswordHintRequest(this.email));\n      await this.formPromise;\n      this.platformUtilsService.showToast(\"success\", null, this.i18nService.t(\"masterPassSent\"));\n      if (this.onSuccessfulSubmit != null) {\n        this.onSuccessfulSubmit();\n      } else if (this.router != null) {\n        this.router.navigate([this.successRoute]);\n      }\n    } catch (e) {\n      this.logService.error(e);\n    }\n  }\n}\n","import { Component } from \"@angular/core\";\nimport { ActivatedRoute, Router } from \"@angular/router\";\n\nimport { HintComponent as BaseHintComponent } from \"@bitwarden/angular/components/hint.component\";\nimport { ApiService } from \"@bitwarden/common/abstractions/api.service\";\nimport { I18nService } from \"@bitwarden/common/abstractions/i18n.service\";\nimport { LogService } from \"@bitwarden/common/abstractions/log.service\";\nimport { LoginService } from \"@bitwarden/common/abstractions/login.service\";\nimport { PlatformUtilsService } from \"@bitwarden/common/abstractions/platformUtils.service\";\n\n@Component({\n  selector: \"app-hint\",\n  templateUrl: \"hint.component.html\",\n})\nexport class HintComponent extends BaseHintComponent {\n  constructor(\n    router: Router,\n    platformUtilsService: PlatformUtilsService,\n    i18nService: I18nService,\n    apiService: ApiService,\n    logService: LogService,\n    private route: ActivatedRoute,\n    loginService: LoginService\n  ) {\n    super(router, i18nService, apiService, platformUtilsService, logService, loginService);\n\n    super.onSuccessfulSubmit = async () => {\n      this.router.navigate([this.successRoute]);\n    };\n  }\n}\n","<form #form (ngSubmit)=\"submit()\" [appApiAction]=\"formPromise\">\n  <header>\n    <div class=\"left\">\n      <button type=\"button\" routerLink=\"/login\">\n        {{ \"cancel\" | i18n }}\n      </button>\n    </div>\n    <h1 class=\"center\">\n      <span class=\"title\">{{ \"passwordHint\" | i18n }}</span>\n    </h1>\n    <div class=\"right\">\n      <button type=\"submit\" [disabled]=\"form.loading\">\n        <span [hidden]=\"form.loading\">{{ \"submit\" | i18n }}</span>\n        <i class=\"bwi bwi-spinner bwi-lg bwi-spin\" [hidden]=\"!form.loading\" aria-hidden=\"true\"></i>\n      </button>\n    </div>\n  </header>\n  <main tabindex=\"-1\">\n    <div class=\"box\">\n      <div class=\"box-content\">\n        <div class=\"box-content-row\" appBoxRow>\n          <label for=\"email\">{{ \"emailAddress\" | i18n }}</label>\n          <input\n            id=\"email\"\n            type=\"text\"\n            name=\"Email\"\n            aria-describedby=\"emailHelp\"\n            [(ngModel)]=\"email\"\n            required\n            appAutofocus\n            inputmode=\"email\"\n            appInputVerbatim=\"false\"\n          />\n        </div>\n      </div>\n      <div id=\"emailHelp\" class=\"box-footer\">\n        {{ \"enterEmailToGetHint\" | i18n }}\n      </div>\n    </div>\n  </main>\n</form>\n","export enum HashPurpose {\n  ServerAuthorization = 1,\n  LocalAuthorization = 2,\n}\n","export enum KeySuffixOptions {\n  Auto = \"auto\",\n  Biometric = \"biometric\",\n}\n","<div class=\"center-content\">\n  <div class=\"content login-page\">\n    <div class=\"logo-image\"></div>\n    <p class=\"lead text-center\">{{ \"loginOrCreateNewAccount\" | i18n }}</p>\n    <form #form [formGroup]=\"formGroup\" (ngSubmit)=\"submit()\">\n      <div class=\"box\">\n        <div class=\"box-content\">\n          <div class=\"box-content-row\" appBoxRow>\n            <label for=\"email\">{{ \"emailAddress\" | i18n }}</label>\n            <input id=\"email\" type=\"email\" formControlName=\"email\" appInputVerbatim=\"false\" />\n          </div>\n          <div class=\"box-footer no-margin\" *ngIf=\"selfHostedDomain\">\n            {{ \"loggingInTo\" | i18n: selfHostedDomain }}\n          </div>\n          <div class=\"remember-email-check\">\n            <input\n              id=\"rememberEmail\"\n              type=\"checkbox\"\n              name=\"rememberEmail\"\n              formControlName=\"rememberEmail\"\n            />\n            <label for=\"rememberEmail\">{{ \"rememberEmail\" | i18n }}</label>\n          </div>\n        </div>\n      </div>\n      <div class=\"box\">\n        <button type=\"submit\" class=\"btn primary block\">\n          <b>{{ \"continue\" | i18n }}</b>\n        </button>\n      </div>\n    </form>\n    <p class=\"createAccountLink\">\n      {{ \"newAroundHere\" | i18n }}\n      <a routerLink=\"/register\" (click)=\"setFormValues()\">{{ \"createAccount\" | i18n }}</a>\n    </p>\n  </div>\n</div>\n<button type=\"button\" routerLink=\"/environment\" class=\"settings-icon\" (click)=\"setFormValues()\">\n  <i class=\"bwi bwi-cog-f bwi-lg\" aria-hidden=\"true\"></i><span>&nbsp;{{ \"settings\" | i18n }}</span>\n</button>\n","import { Component, OnInit } from \"@angular/core\";\nimport { FormBuilder, Validators } from \"@angular/forms\";\nimport { ActivatedRoute, Router } from \"@angular/router\";\n\nimport { EnvironmentService } from \"@bitwarden/common/abstractions/environment.service\";\nimport { I18nService } from \"@bitwarden/common/abstractions/i18n.service\";\nimport { LoginService } from \"@bitwarden/common/abstractions/login.service\";\nimport { PlatformUtilsService } from \"@bitwarden/common/abstractions/platformUtils.service\";\nimport { StateService } from \"@bitwarden/common/abstractions/state.service\";\n\n@Component({\n  selector: \"app-home\",\n  templateUrl: \"home.component.html\",\n})\nexport class HomeComponent implements OnInit {\n  loginInitiated = false;\n\n  formGroup = this.formBuilder.group({\n    email: [\"\", [Validators.required, Validators.email]],\n    rememberEmail: [false],\n  });\n\n  constructor(\n    protected platformUtilsService: PlatformUtilsService,\n    private stateService: StateService,\n    private formBuilder: FormBuilder,\n    private router: Router,\n    private i18nService: I18nService,\n    private environmentService: EnvironmentService,\n    private route: ActivatedRoute,\n    private loginService: LoginService\n  ) {}\n  async ngOnInit(): Promise<void> {\n    let savedEmail = this.loginService.getEmail();\n    const rememberEmail = this.loginService.getRememberEmail();\n\n    if (savedEmail != null) {\n      this.formGroup.patchValue({\n        email: savedEmail,\n        rememberEmail: rememberEmail,\n      });\n    } else {\n      savedEmail = await this.stateService.getRememberedEmail();\n      if (savedEmail != null) {\n        this.formGroup.patchValue({\n          email: savedEmail,\n          rememberEmail: true,\n        });\n      }\n    }\n  }\n\n  submit() {\n    this.formGroup.markAllAsTouched();\n    if (this.formGroup.invalid) {\n      this.platformUtilsService.showToast(\n        \"error\",\n        this.i18nService.t(\"errorOccured\"),\n        this.i18nService.t(\"invalidEmail\")\n      );\n      return;\n    }\n\n    this.loginService.setEmail(this.formGroup.value.email);\n    this.loginService.setRememberEmail(this.formGroup.value.rememberEmail);\n    this.router.navigate([\"login\"], { queryParams: { email: this.formGroup.value.email } });\n  }\n\n  get selfHostedDomain() {\n    return this.environmentService.hasBaseUrl() ? this.environmentService.getWebVaultUrl() : null;\n  }\n\n  setFormValues() {\n    this.loginService.setEmail(this.formGroup.value.email);\n    this.loginService.setRememberEmail(this.formGroup.value.rememberEmail);\n  }\n}\n","export class SecretVerificationRequest {\n  masterPasswordHash: string;\n  otp: string;\n  authRequestAccessCode: string;\n}\n","export abstract class VaultTimeoutService {\n  checkVaultTimeout: () => Promise<void>;\n  lock: (userId?: string) => Promise<void>;\n  logOut: (userId?: string) => Promise<void>;\n}\n","export abstract class VaultTimeoutSettingsService {\n  setVaultTimeoutOptions: (vaultTimeout: number, vaultTimeoutAction: string) => Promise<void>;\n  getVaultTimeout: (userId?: string) => Promise<number>;\n  isPinLockSet: () => Promise<[boolean, boolean]>;\n  isBiometricLockSet: () => Promise<boolean>;\n  clear: (userId?: string) => Promise<void>;\n}\n","import { Directive, NgZone, OnDestroy, OnInit } from \"@angular/core\";\nimport { Router } from \"@angular/router\";\nimport { Subject } from \"rxjs\";\nimport { concatMap, take, takeUntil } from \"rxjs/operators\";\n\nimport { ApiService } from \"@bitwarden/common/abstractions/api.service\";\nimport { CryptoService } from \"@bitwarden/common/abstractions/crypto.service\";\nimport { EnvironmentService } from \"@bitwarden/common/abstractions/environment.service\";\nimport { I18nService } from \"@bitwarden/common/abstractions/i18n.service\";\nimport { KeyConnectorService } from \"@bitwarden/common/abstractions/keyConnector.service\";\nimport { LogService } from \"@bitwarden/common/abstractions/log.service\";\nimport { MessagingService } from \"@bitwarden/common/abstractions/messaging.service\";\nimport { PlatformUtilsService } from \"@bitwarden/common/abstractions/platformUtils.service\";\nimport { StateService } from \"@bitwarden/common/abstractions/state.service\";\nimport { VaultTimeoutService } from \"@bitwarden/common/abstractions/vaultTimeout/vaultTimeout.service\";\nimport { VaultTimeoutSettingsService } from \"@bitwarden/common/abstractions/vaultTimeout/vaultTimeoutSettings.service\";\nimport { HashPurpose } from \"@bitwarden/common/enums/hashPurpose\";\nimport { KeySuffixOptions } from \"@bitwarden/common/enums/keySuffixOptions\";\nimport { Utils } from \"@bitwarden/common/misc/utils\";\nimport { EncString } from \"@bitwarden/common/models/domain/enc-string\";\nimport { SymmetricCryptoKey } from \"@bitwarden/common/models/domain/symmetric-crypto-key\";\nimport { SecretVerificationRequest } from \"@bitwarden/common/models/request/secret-verification.request\";\n\n@Directive()\nexport class LockComponent implements OnInit, OnDestroy {\n  masterPassword = \"\";\n  pin = \"\";\n  showPassword = false;\n  email: string;\n  pinLock = false;\n  webVaultHostname = \"\";\n  formPromise: Promise<any>;\n  supportsBiometric: boolean;\n  biometricLock: boolean;\n  biometricText: string;\n  hideInput: boolean;\n\n  protected successRoute = \"vault\";\n  protected onSuccessfulSubmit: () => Promise<void>;\n\n  private invalidPinAttempts = 0;\n  private pinSet: [boolean, boolean];\n\n  private destroy$ = new Subject<void>();\n\n  constructor(\n    protected router: Router,\n    protected i18nService: I18nService,\n    protected platformUtilsService: PlatformUtilsService,\n    protected messagingService: MessagingService,\n    protected cryptoService: CryptoService,\n    protected vaultTimeoutService: VaultTimeoutService,\n    protected vaultTimeoutSettingsService: VaultTimeoutSettingsService,\n    protected environmentService: EnvironmentService,\n    protected stateService: StateService,\n    protected apiService: ApiService,\n    protected logService: LogService,\n    private keyConnectorService: KeyConnectorService,\n    protected ngZone: NgZone\n  ) {}\n\n  async ngOnInit() {\n    this.stateService.activeAccount$\n      .pipe(\n        concatMap(async () => {\n          await this.load();\n        }),\n        takeUntil(this.destroy$)\n      )\n      .subscribe();\n  }\n\n  ngOnDestroy() {\n    this.destroy$.next();\n    this.destroy$.complete();\n  }\n\n  async submit() {\n    if (this.pinLock) {\n      return await this.handlePinRequiredUnlock();\n    }\n\n    await this.handleMasterPasswordRequiredUnlock();\n  }\n\n  async logOut() {\n    const confirmed = await this.platformUtilsService.showDialog(\n      this.i18nService.t(\"logOutConfirmation\"),\n      this.i18nService.t(\"logOut\"),\n      this.i18nService.t(\"logOut\"),\n      this.i18nService.t(\"cancel\")\n    );\n    if (confirmed) {\n      this.messagingService.send(\"logout\");\n    }\n  }\n\n  async unlockBiometric(): Promise<boolean> {\n    if (!this.biometricLock) {\n      return;\n    }\n\n    const success = (await this.cryptoService.getKey(KeySuffixOptions.Biometric)) != null;\n\n    if (success) {\n      await this.doContinue();\n    }\n\n    return success;\n  }\n\n  togglePassword() {\n    this.showPassword = !this.showPassword;\n    const input = document.getElementById(this.pinLock ? \"pin\" : \"masterPassword\");\n    if (this.ngZone.isStable) {\n      input.focus();\n    } else {\n      this.ngZone.onStable.pipe(take(1)).subscribe(() => input.focus());\n    }\n  }\n\n  private async handlePinRequiredUnlock() {\n    if (this.pin == null || this.pin === \"\") {\n      this.platformUtilsService.showToast(\n        \"error\",\n        this.i18nService.t(\"errorOccurred\"),\n        this.i18nService.t(\"pinRequired\")\n      );\n      return;\n    }\n\n    return await this.doUnlockWithPin();\n  }\n\n  private async doUnlockWithPin() {\n    let failed = true;\n    try {\n      const kdf = await this.stateService.getKdfType();\n      const kdfConfig = await this.stateService.getKdfConfig();\n      if (this.pinSet[0]) {\n        const key = await this.cryptoService.makeKeyFromPin(\n          this.pin,\n          this.email,\n          kdf,\n          kdfConfig,\n          await this.stateService.getDecryptedPinProtected()\n        );\n        const encKey = await this.cryptoService.getEncKey(key);\n        const protectedPin = await this.stateService.getProtectedPin();\n        const decPin = await this.cryptoService.decryptToUtf8(new EncString(protectedPin), encKey);\n        failed = decPin !== this.pin;\n        if (!failed) {\n          await this.setKeyAndContinue(key);\n        }\n      } else {\n        const key = await this.cryptoService.makeKeyFromPin(this.pin, this.email, kdf, kdfConfig);\n        failed = false;\n        await this.setKeyAndContinue(key);\n      }\n    } catch {\n      failed = true;\n    }\n\n    if (failed) {\n      this.invalidPinAttempts++;\n      if (this.invalidPinAttempts >= 5) {\n        this.messagingService.send(\"logout\");\n        return;\n      }\n      this.platformUtilsService.showToast(\n        \"error\",\n        this.i18nService.t(\"errorOccurred\"),\n        this.i18nService.t(\"invalidPin\")\n      );\n    }\n  }\n\n  private async handleMasterPasswordRequiredUnlock() {\n    if (this.masterPassword == null || this.masterPassword === \"\") {\n      this.platformUtilsService.showToast(\n        \"error\",\n        this.i18nService.t(\"errorOccurred\"),\n        this.i18nService.t(\"masterPasswordRequired\")\n      );\n      return;\n    }\n    await this.doUnlockWithMasterPassword();\n  }\n\n  private async doUnlockWithMasterPassword() {\n    const kdf = await this.stateService.getKdfType();\n    const kdfConfig = await this.stateService.getKdfConfig();\n\n    const key = await this.cryptoService.makeKey(this.masterPassword, this.email, kdf, kdfConfig);\n    const storedKeyHash = await this.cryptoService.getKeyHash();\n\n    let passwordValid = false;\n\n    if (storedKeyHash != null) {\n      passwordValid = await this.cryptoService.compareAndUpdateKeyHash(this.masterPassword, key);\n    } else {\n      const request = new SecretVerificationRequest();\n      const serverKeyHash = await this.cryptoService.hashPassword(\n        this.masterPassword,\n        key,\n        HashPurpose.ServerAuthorization\n      );\n      request.masterPasswordHash = serverKeyHash;\n      try {\n        this.formPromise = this.apiService.postAccountVerifyPassword(request);\n        await this.formPromise;\n        passwordValid = true;\n        const localKeyHash = await this.cryptoService.hashPassword(\n          this.masterPassword,\n          key,\n          HashPurpose.LocalAuthorization\n        );\n        await this.cryptoService.setKeyHash(localKeyHash);\n      } catch (e) {\n        this.logService.error(e);\n      }\n    }\n\n    if (!passwordValid) {\n      this.platformUtilsService.showToast(\n        \"error\",\n        this.i18nService.t(\"errorOccurred\"),\n        this.i18nService.t(\"invalidMasterPassword\")\n      );\n      return;\n    }\n\n    if (this.pinSet[0]) {\n      const protectedPin = await this.stateService.getProtectedPin();\n      const encKey = await this.cryptoService.getEncKey(key);\n      const decPin = await this.cryptoService.decryptToUtf8(new EncString(protectedPin), encKey);\n      const pinKey = await this.cryptoService.makePinKey(decPin, this.email, kdf, kdfConfig);\n      await this.stateService.setDecryptedPinProtected(\n        await this.cryptoService.encrypt(key.key, pinKey)\n      );\n    }\n    await this.setKeyAndContinue(key);\n  }\n  private async setKeyAndContinue(key: SymmetricCryptoKey) {\n    await this.cryptoService.setKey(key);\n    await this.doContinue();\n  }\n\n  private async doContinue() {\n    await this.stateService.setEverBeenUnlocked(true);\n    const disableFavicon = await this.stateService.getDisableFavicon();\n    await this.stateService.setDisableFavicon(!!disableFavicon);\n    this.messagingService.send(\"unlocked\");\n    if (this.onSuccessfulSubmit != null) {\n      await this.onSuccessfulSubmit();\n    } else if (this.router != null) {\n      this.router.navigate([this.successRoute]);\n    }\n  }\n\n  private async load() {\n    this.pinSet = await this.vaultTimeoutSettingsService.isPinLockSet();\n    this.pinLock =\n      (this.pinSet[0] && (await this.stateService.getDecryptedPinProtected()) != null) ||\n      this.pinSet[1];\n    this.supportsBiometric = await this.platformUtilsService.supportsBiometric();\n    this.biometricLock =\n      (await this.vaultTimeoutSettingsService.isBiometricLockSet()) &&\n      ((await this.cryptoService.hasKeyStored(KeySuffixOptions.Biometric)) ||\n        !this.platformUtilsService.supportsSecureStorage());\n    this.biometricText = await this.stateService.getBiometricText();\n    this.email = await this.stateService.getEmail();\n    const usesKeyConnector = await this.keyConnectorService.getUsesKeyConnector();\n    this.hideInput = usesKeyConnector && !this.pinLock;\n\n    // Users with key connector and without biometric or pin has no MP to unlock using\n    if (usesKeyConnector && !(this.biometricLock || this.pinLock)) {\n      await this.vaultTimeoutService.logOut();\n    }\n\n    const webVaultUrl = this.environmentService.getWebVaultUrl();\n    const vaultUrl =\n      webVaultUrl === \"https://vault.bitwarden.com\" ? \"https://bitwarden.com\" : webVaultUrl;\n    this.webVaultHostname = Utils.getHostname(vaultUrl);\n  }\n}\n","type BiometricError = {\n  title: string;\n  description: string;\n};\n\nexport type BiometricErrorTypes = \"startDesktop\" | \"desktopIntegrationDisabled\";\n\nexport const BiometricErrors: Record<BiometricErrorTypes, BiometricError> = {\n  startDesktop: {\n    title: \"startDesktopTitle\",\n    description: \"startDesktopDesc\",\n  },\n  desktopIntegrationDisabled: {\n    title: \"desktopIntegrationDisabledTitle\",\n    description: \"desktopIntegrationDisabledDesc\",\n  },\n};\n","<app-callout class=\"app-private-mode-warning\" type=\"warning\" *ngIf=\"showWarning\">\n  {{ \"privateModeWarning\" | i18n }}\n  <a href=\"https://bitwarden.com/help/article/private-mode/\" target=\"_blank\" rel=\"noopener\">{{\n    \"learnMore\" | i18n\n  }}</a>\n</app-callout>\n","import { Component, OnInit } from \"@angular/core\";\n\nimport { PopupUtilsService } from \"../services/popup-utils.service\";\n\n@Component({\n  selector: \"app-private-mode-warning\",\n  templateUrl: \"private-mode-warning.component.html\",\n})\nexport class PrivateModeWarningComponent implements OnInit {\n  showWarning = false;\n\n  constructor(private popupUtilsService: PopupUtilsService) {}\n\n  ngOnInit() {\n    this.showWarning = this.popupUtilsService.inPrivateMode();\n  }\n}\n","<form (ngSubmit)=\"submit()\">\n  <header>\n    <div class=\"left\"></div>\n    <h1 class=\"center\">\n      <span class=\"title\">{{ \"verifyIdentity\" | i18n }}</span>\n    </h1>\n    <div class=\"right\">\n      <button type=\"submit\" *ngIf=\"!hideInput\">{{ \"unlock\" | i18n }}</button>\n    </div>\n  </header>\n  <main tabindex=\"-1\">\n    <div class=\"box\">\n      <div class=\"box-content\">\n        <div class=\"box-content-row box-content-row-flex\" appBoxRow *ngIf=\"!hideInput\">\n          <div class=\"row-main\" *ngIf=\"pinLock\">\n            <label for=\"pin\">{{ \"pin\" | i18n }}</label>\n            <input\n              id=\"pin\"\n              type=\"{{ showPassword ? 'text' : 'password' }}\"\n              name=\"PIN\"\n              class=\"monospaced\"\n              [(ngModel)]=\"pin\"\n              required\n              appInputVerbatim\n            />\n          </div>\n          <div class=\"row-main\" *ngIf=\"!pinLock\">\n            <label for=\"masterPassword\">{{ \"masterPass\" | i18n }}</label>\n            <input\n              id=\"masterPassword\"\n              type=\"{{ showPassword ? 'text' : 'password' }}\"\n              name=\"MasterPassword\"\n              aria-describedby=\"masterPasswordHelp\"\n              class=\"monospaced\"\n              [(ngModel)]=\"masterPassword\"\n              required\n              appInputVerbatim\n            />\n          </div>\n          <div class=\"action-buttons\">\n            <button\n              type=\"button\"\n              class=\"row-btn\"\n              appStopClick\n              appA11yTitle=\"{{ 'toggleVisibility' | i18n }}\"\n              (click)=\"togglePassword()\"\n              [attr.aria-pressed]=\"showPassword\"\n            >\n              <i\n                class=\"bwi bwi-lg\"\n                [ngClass]=\"{ 'bwi-eye': !showPassword, 'bwi-eye-slash': showPassword }\"\n                aria-hidden=\"true\"\n              ></i>\n            </button>\n          </div>\n        </div>\n      </div>\n      <div id=\"masterPasswordHelp\" class=\"box-footer\">\n        <p>{{ \"yourVaultIsLocked\" | i18n }}</p>\n        {{ \"loggedInAsOn\" | i18n: email:webVaultHostname }}\n      </div>\n    </div>\n    <div class=\"box\" *ngIf=\"biometricLock\">\n      <div class=\"box-footer no-pad\">\n        <button\n          type=\"button\"\n          class=\"btn primary block\"\n          (click)=\"unlockBiometric()\"\n          appStopClick\n          [disabled]=\"pendingBiometric\"\n        >\n          {{ \"unlockWithBiometrics\" | i18n }}\n        </button>\n      </div>\n    </div>\n    <p class=\"text-center\">\n      <button type=\"button\" appStopClick (click)=\"logOut()\">{{ \"logOut\" | i18n }}</button>\n    </p>\n    <app-private-mode-warning></app-private-mode-warning>\n    <app-callout *ngIf=\"biometricError\" type=\"error\">{{ biometricError }}</app-callout>\n    <p class=\"text-center text-muted\" *ngIf=\"pendingBiometric\">\n      <i class=\"bwi bwi-spinner bwi-spin\" aria-hidden=\"true\"></i> {{ \"awaitDesktop\" | i18n }}\n    </p>\n  </main>\n</form>\n","import { Component, NgZone } from \"@angular/core\";\nimport { Router } from \"@angular/router\";\n\nimport { LockComponent as BaseLockComponent } from \"@bitwarden/angular/components/lock.component\";\nimport { ApiService } from \"@bitwarden/common/abstractions/api.service\";\nimport { AuthService } from \"@bitwarden/common/abstractions/auth.service\";\nimport { CryptoService } from \"@bitwarden/common/abstractions/crypto.service\";\nimport { EnvironmentService } from \"@bitwarden/common/abstractions/environment.service\";\nimport { I18nService } from \"@bitwarden/common/abstractions/i18n.service\";\nimport { KeyConnectorService } from \"@bitwarden/common/abstractions/keyConnector.service\";\nimport { LogService } from \"@bitwarden/common/abstractions/log.service\";\nimport { MessagingService } from \"@bitwarden/common/abstractions/messaging.service\";\nimport { PlatformUtilsService } from \"@bitwarden/common/abstractions/platformUtils.service\";\nimport { StateService } from \"@bitwarden/common/abstractions/state.service\";\nimport { VaultTimeoutService } from \"@bitwarden/common/abstractions/vaultTimeout/vaultTimeout.service\";\nimport { VaultTimeoutSettingsService } from \"@bitwarden/common/abstractions/vaultTimeout/vaultTimeoutSettings.service\";\nimport { AuthenticationStatus } from \"@bitwarden/common/enums/authenticationStatus\";\n\nimport { BiometricErrors, BiometricErrorTypes } from \"../../models/biometricErrors\";\n\n@Component({\n  selector: \"app-lock\",\n  templateUrl: \"lock.component.html\",\n})\nexport class LockComponent extends BaseLockComponent {\n  private isInitialLockScreen: boolean;\n\n  biometricError: string;\n  pendingBiometric = false;\n\n  constructor(\n    router: Router,\n    i18nService: I18nService,\n    platformUtilsService: PlatformUtilsService,\n    messagingService: MessagingService,\n    cryptoService: CryptoService,\n    vaultTimeoutService: VaultTimeoutService,\n    vaultTimeoutSettingsService: VaultTimeoutSettingsService,\n    environmentService: EnvironmentService,\n    stateService: StateService,\n    apiService: ApiService,\n    logService: LogService,\n    keyConnectorService: KeyConnectorService,\n    ngZone: NgZone,\n    private authService: AuthService\n  ) {\n    super(\n      router,\n      i18nService,\n      platformUtilsService,\n      messagingService,\n      cryptoService,\n      vaultTimeoutService,\n      vaultTimeoutSettingsService,\n      environmentService,\n      stateService,\n      apiService,\n      logService,\n      keyConnectorService,\n      ngZone\n    );\n    this.successRoute = \"/tabs/current\";\n    this.isInitialLockScreen = (window as any).previousPopupUrl == null;\n  }\n\n  async ngOnInit() {\n    await super.ngOnInit();\n    const disableAutoBiometricsPrompt =\n      (await this.stateService.getDisableAutoBiometricsPrompt()) ?? true;\n\n    window.setTimeout(async () => {\n      document.getElementById(this.pinLock ? \"pin\" : \"masterPassword\").focus();\n      if (\n        this.biometricLock &&\n        !disableAutoBiometricsPrompt &&\n        this.isInitialLockScreen &&\n        (await this.authService.getAuthStatus()) === AuthenticationStatus.Locked\n      ) {\n        await this.unlockBiometric();\n      }\n    }, 100);\n  }\n\n  async unlockBiometric(): Promise<boolean> {\n    if (!this.biometricLock) {\n      return;\n    }\n\n    this.pendingBiometric = true;\n    this.biometricError = null;\n\n    let success;\n    try {\n      success = await super.unlockBiometric();\n    } catch (e) {\n      const error = BiometricErrors[e as BiometricErrorTypes];\n\n      if (error == null) {\n        this.logService.error(\"Unknown error: \" + e);\n      }\n\n      this.biometricError = this.i18nService.t(error.description);\n    }\n    this.pendingBiometric = false;\n\n    return success;\n  }\n}\n","export enum AuthRequestType {\n  AuthenticateAndUnlock = 0,\n  Unlock = 1,\n}\n","export enum AuthenticationType {\n  Password = 0,\n  Sso = 1,\n  UserApi = 2,\n  Passwordless = 3,\n}\n","import { AuthenticationType } from \"../../enums/authenticationType\";\nimport { TokenTwoFactorRequest } from \"../request/identity-token/token-two-factor.request\";\n\nimport { SymmetricCryptoKey } from \"./symmetric-crypto-key\";\n\nexport class PasswordLogInCredentials {\n  readonly type = AuthenticationType.Password;\n\n  constructor(\n    public email: string,\n    public masterPassword: string,\n    public captchaToken?: string,\n    public twoFactor?: TokenTwoFactorRequest\n  ) {}\n}\n\nexport class SsoLogInCredentials {\n  readonly type = AuthenticationType.Sso;\n\n  constructor(\n    public code: string,\n    public codeVerifier: string,\n    public redirectUrl: string,\n    public orgId: string,\n    public twoFactor?: TokenTwoFactorRequest\n  ) {}\n}\n\nexport class UserApiLogInCredentials {\n  readonly type = AuthenticationType.UserApi;\n\n  constructor(public clientId: string, public clientSecret: string) {}\n}\n\nexport class PasswordlessLogInCredentials {\n  readonly type = AuthenticationType.Passwordless;\n\n  constructor(\n    public email: string,\n    public accessCode: string,\n    public authRequestId: string,\n    public decKey: SymmetricCryptoKey,\n    public localPasswordHash: string,\n    public twoFactor?: TokenTwoFactorRequest\n  ) {}\n}\n","import { AuthRequestType } from \"../../enums/authRequestType\";\n\nexport class PasswordlessCreateAuthRequest {\n  constructor(\n    readonly email: string,\n    readonly deviceIdentifier: string,\n    readonly publicKey: string,\n    readonly type: AuthRequestType,\n    readonly accessCode: string,\n    readonly fingerprintPhrase: string\n  ) {}\n}\n","import { I18nService } from \"../abstractions/i18n.service\";\n\nimport { IFrameComponent } from \"./iframe_component\";\n\nexport class CaptchaIFrame extends IFrameComponent {\n  constructor(\n    win: Window,\n    webVaultUrl: string,\n    private i18nService: I18nService,\n    successCallback: (message: string) => any,\n    errorCallback: (message: string) => any,\n    infoCallback: (message: string) => any\n  ) {\n    super(\n      win,\n      webVaultUrl,\n      \"captcha-connector.html\",\n      \"hcaptcha_iframe\",\n      successCallback,\n      errorCallback,\n      (message: string) => {\n        const parsedMessage = JSON.parse(message);\n        if (typeof parsedMessage !== \"string\") {\n          this.iframe.height = parsedMessage.height.toString();\n          this.iframe.width = parsedMessage.width.toString();\n        } else {\n          infoCallback(parsedMessage);\n        }\n      }\n    );\n  }\n\n  init(siteKey: string): void {\n    super.initComponent(\n      this.createParams({ siteKey: siteKey, locale: this.i18nService.translationLocale }, 1)\n    );\n  }\n}\n","export abstract class IFrameComponent {\n  iframe: HTMLIFrameElement;\n  private connectorLink: HTMLAnchorElement;\n  private parseFunction = this.parseMessage.bind(this);\n\n  constructor(\n    private win: Window,\n    protected webVaultUrl: string,\n    private path: string,\n    private iframeId: string,\n    public successCallback?: (message: string) => any,\n    public errorCallback?: (message: string) => any,\n    public infoCallback?: (message: string) => any\n  ) {\n    this.connectorLink = win.document.createElement(\"a\");\n  }\n\n  stop() {\n    this.sendMessage(\"stop\");\n  }\n\n  start() {\n    this.sendMessage(\"start\");\n  }\n\n  sendMessage(message: any) {\n    if (!this.iframe || !this.iframe.src || !this.iframe.contentWindow) {\n      return;\n    }\n\n    this.iframe.contentWindow.postMessage(message, this.iframe.src);\n  }\n\n  base64Encode(str: string): string {\n    return btoa(\n      encodeURIComponent(str).replace(/%([0-9A-F]{2})/g, (match, p1) => {\n        return String.fromCharCode((\"0x\" + p1) as any);\n      })\n    );\n  }\n\n  cleanup() {\n    this.win.removeEventListener(\"message\", this.parseFunction, false);\n  }\n\n  protected createParams(data: any, version: number) {\n    return new URLSearchParams({\n      data: this.base64Encode(JSON.stringify(data)),\n      parent: encodeURIComponent(this.win.document.location.href),\n      v: version.toString(),\n    });\n  }\n\n  protected initComponent(params: URLSearchParams): void {\n    this.connectorLink.href = `${this.webVaultUrl}/${this.path}?${params}`;\n    this.iframe = this.win.document.getElementById(this.iframeId) as HTMLIFrameElement;\n    this.iframe.src = this.connectorLink.href;\n\n    this.win.addEventListener(\"message\", this.parseFunction, false);\n  }\n\n  private parseMessage(event: MessageEvent) {\n    if (!this.validMessage(event)) {\n      return;\n    }\n\n    const parts: string[] = event.data.split(\"|\");\n    if (parts[0] === \"success\" && this.successCallback) {\n      this.successCallback(parts[1]);\n    } else if (parts[0] === \"error\" && this.errorCallback) {\n      this.errorCallback(parts[1]);\n    } else if (parts[0] === \"info\" && this.infoCallback) {\n      this.infoCallback(parts[1]);\n    }\n  }\n\n  private validMessage(event: MessageEvent) {\n    if (\n      event.origin == null ||\n      event.origin === \"\" ||\n      event.origin !== (this.connectorLink as any).origin ||\n      event.data == null ||\n      typeof event.data !== \"string\"\n    ) {\n      return false;\n    }\n\n    return (\n      event.data.indexOf(\"success|\") === 0 ||\n      event.data.indexOf(\"error|\") === 0 ||\n      event.data.indexOf(\"info|\") === 0\n    );\n  }\n}\n","import { Directive, Input } from \"@angular/core\";\n\nimport { EnvironmentService } from \"@bitwarden/common/abstractions/environment.service\";\nimport { I18nService } from \"@bitwarden/common/abstractions/i18n.service\";\nimport { PlatformUtilsService } from \"@bitwarden/common/abstractions/platformUtils.service\";\nimport { CaptchaIFrame } from \"@bitwarden/common/misc/captcha_iframe\";\nimport { Utils } from \"@bitwarden/common/misc/utils\";\n\n@Directive()\nexport abstract class CaptchaProtectedComponent {\n  @Input() captchaSiteKey: string = null;\n  captchaToken: string = null;\n  captcha: CaptchaIFrame;\n\n  constructor(\n    protected environmentService: EnvironmentService,\n    protected i18nService: I18nService,\n    protected platformUtilsService: PlatformUtilsService\n  ) {}\n\n  async setupCaptcha() {\n    const webVaultUrl = this.environmentService.getWebVaultUrl();\n\n    this.captcha = new CaptchaIFrame(\n      window,\n      webVaultUrl,\n      this.i18nService,\n      (token: string) => {\n        this.captchaToken = token;\n      },\n      (error: string) => {\n        this.platformUtilsService.showToast(\"error\", this.i18nService.t(\"errorOccurred\"), error);\n      },\n      (info: string) => {\n        this.platformUtilsService.showToast(\"info\", this.i18nService.t(\"info\"), info);\n      }\n    );\n  }\n\n  showCaptcha() {\n    return !Utils.isNullOrWhitespace(this.captchaSiteKey);\n  }\n\n  protected handleCaptchaRequired(response: { captchaSiteKey: string }): boolean {\n    if (Utils.isNullOrWhitespace(response.captchaSiteKey)) {\n      return false;\n    }\n\n    this.captchaSiteKey = response.captchaSiteKey;\n    this.captcha.init(response.captchaSiteKey);\n    return true;\n  }\n}\n","import { DecryptParameters } from \"../models/domain/decrypt-parameters\";\nimport { SymmetricCryptoKey } from \"../models/domain/symmetric-crypto-key\";\n\nexport abstract class CryptoFunctionService {\n  pbkdf2: (\n    password: string | ArrayBuffer,\n    salt: string | ArrayBuffer,\n    algorithm: \"sha256\" | \"sha512\",\n    iterations: number\n  ) => Promise<ArrayBuffer>;\n  argon2: (\n    password: string | ArrayBuffer,\n    salt: string | ArrayBuffer,\n    iterations: number,\n    memory: number,\n    parallelism: number\n  ) => Promise<ArrayBuffer>;\n  hkdf: (\n    ikm: ArrayBuffer,\n    salt: string | ArrayBuffer,\n    info: string | ArrayBuffer,\n    outputByteSize: number,\n    algorithm: \"sha256\" | \"sha512\"\n  ) => Promise<ArrayBuffer>;\n  hkdfExpand: (\n    prk: ArrayBuffer,\n    info: string | ArrayBuffer,\n    outputByteSize: number,\n    algorithm: \"sha256\" | \"sha512\"\n  ) => Promise<ArrayBuffer>;\n  hash: (\n    value: string | ArrayBuffer,\n    algorithm: \"sha1\" | \"sha256\" | \"sha512\" | \"md5\"\n  ) => Promise<ArrayBuffer>;\n  hmac: (\n    value: ArrayBuffer,\n    key: ArrayBuffer,\n    algorithm: \"sha1\" | \"sha256\" | \"sha512\"\n  ) => Promise<ArrayBuffer>;\n  compare: (a: ArrayBuffer, b: ArrayBuffer) => Promise<boolean>;\n  hmacFast: (\n    value: ArrayBuffer | string,\n    key: ArrayBuffer | string,\n    algorithm: \"sha1\" | \"sha256\" | \"sha512\"\n  ) => Promise<ArrayBuffer | string>;\n  compareFast: (a: ArrayBuffer | string, b: ArrayBuffer | string) => Promise<boolean>;\n  aesEncrypt: (data: ArrayBuffer, iv: ArrayBuffer, key: ArrayBuffer) => Promise<ArrayBuffer>;\n  aesDecryptFastParameters: (\n    data: string,\n    iv: string,\n    mac: string,\n    key: SymmetricCryptoKey\n  ) => DecryptParameters<ArrayBuffer | string>;\n  aesDecryptFast: (parameters: DecryptParameters<ArrayBuffer | string>) => Promise<string>;\n  aesDecrypt: (data: ArrayBuffer, iv: ArrayBuffer, key: ArrayBuffer) => Promise<ArrayBuffer>;\n  rsaEncrypt: (\n    data: ArrayBuffer,\n    publicKey: ArrayBuffer,\n    algorithm: \"sha1\" | \"sha256\"\n  ) => Promise<ArrayBuffer>;\n  rsaDecrypt: (\n    data: ArrayBuffer,\n    privateKey: ArrayBuffer,\n    algorithm: \"sha1\" | \"sha256\"\n  ) => Promise<ArrayBuffer>;\n  rsaExtractPublicKey: (privateKey: ArrayBuffer) => Promise<ArrayBuffer>;\n  rsaGenerateKeyPair: (length: 1024 | 2048 | 4096) => Promise<[ArrayBuffer, ArrayBuffer]>;\n  randomBytes: (length: number) => Promise<ArrayBuffer>;\n}\n","export abstract class AppIdService {\n  getAppId: () => Promise<string>;\n  getAnonymousAppId: () => Promise<string>;\n}\n","import * as zxcvbn from \"zxcvbn\";\n\nimport { GeneratedPasswordHistory } from \"../models/domain/generated-password-history\";\nimport { PasswordGeneratorOptions } from \"../models/domain/password-generator-options\";\nimport { PasswordGeneratorPolicyOptions } from \"../models/domain/password-generator-policy-options\";\n\nexport abstract class PasswordGenerationService {\n  generatePassword: (options: PasswordGeneratorOptions) => Promise<string>;\n  generatePassphrase: (options: PasswordGeneratorOptions) => Promise<string>;\n  getOptions: () => Promise<[PasswordGeneratorOptions, PasswordGeneratorPolicyOptions]>;\n  enforcePasswordGeneratorPoliciesOnOptions: (\n    options: PasswordGeneratorOptions\n  ) => Promise<[PasswordGeneratorOptions, PasswordGeneratorPolicyOptions]>;\n  getPasswordGeneratorPolicyOptions: () => Promise<PasswordGeneratorPolicyOptions>;\n  saveOptions: (options: PasswordGeneratorOptions) => Promise<void>;\n  getHistory: () => Promise<GeneratedPasswordHistory[]>;\n  addHistory: (password: string) => Promise<void>;\n  clear: (userId?: string) => Promise<void>;\n  passwordStrength: (password: string, userInputs?: string[]) => zxcvbn.ZXCVBNResult;\n  normalizeOptions: (\n    options: PasswordGeneratorOptions,\n    enforcedPolicyOptions: PasswordGeneratorPolicyOptions\n  ) => void;\n}\n","export abstract class AnonymousHubService {\n  createHubConnection: (token: string) => void;\n  stopHubConnection: () => void;\n}\n","import { Directive, OnDestroy, OnInit } from \"@angular/core\";\nimport { Router } from \"@angular/router\";\nimport { Subject, takeUntil } from \"rxjs\";\n\nimport { AnonymousHubService } from \"@bitwarden/common/abstractions/anonymousHub.service\";\nimport { ApiService } from \"@bitwarden/common/abstractions/api.service\";\nimport { AppIdService } from \"@bitwarden/common/abstractions/appId.service\";\nimport { AuthService } from \"@bitwarden/common/abstractions/auth.service\";\nimport { CryptoService } from \"@bitwarden/common/abstractions/crypto.service\";\nimport { CryptoFunctionService } from \"@bitwarden/common/abstractions/cryptoFunction.service\";\nimport { EnvironmentService } from \"@bitwarden/common/abstractions/environment.service\";\nimport { I18nService } from \"@bitwarden/common/abstractions/i18n.service\";\nimport { LogService } from \"@bitwarden/common/abstractions/log.service\";\nimport { LoginService } from \"@bitwarden/common/abstractions/login.service\";\nimport { PasswordGenerationService } from \"@bitwarden/common/abstractions/passwordGeneration.service\";\nimport { PlatformUtilsService } from \"@bitwarden/common/abstractions/platformUtils.service\";\nimport { StateService } from \"@bitwarden/common/abstractions/state.service\";\nimport { ValidationService } from \"@bitwarden/common/abstractions/validation.service\";\nimport { AuthRequestType } from \"@bitwarden/common/enums/authRequestType\";\nimport { Utils } from \"@bitwarden/common/misc/utils\";\nimport { PasswordlessLogInCredentials } from \"@bitwarden/common/models/domain/log-in-credentials\";\nimport { SymmetricCryptoKey } from \"@bitwarden/common/models/domain/symmetric-crypto-key\";\nimport { PasswordlessCreateAuthRequest } from \"@bitwarden/common/models/request/passwordless-create-auth.request\";\nimport { AuthRequestResponse } from \"@bitwarden/common/models/response/auth-request.response\";\nimport { ErrorResponse } from \"@bitwarden/common/models/response/error.response\";\n\nimport { CaptchaProtectedComponent } from \"./captchaProtected.component\";\n\n@Directive()\nexport class LoginWithDeviceComponent\n  extends CaptchaProtectedComponent\n  implements OnInit, OnDestroy\n{\n  private destroy$ = new Subject<void>();\n  email: string;\n  showResendNotification = false;\n  passwordlessRequest: PasswordlessCreateAuthRequest;\n  onSuccessfulLoginTwoFactorNavigate: () => Promise<any>;\n  onSuccessfulLogin: () => Promise<any>;\n  onSuccessfulLoginNavigate: () => Promise<any>;\n  onSuccessfulLoginForceResetNavigate: () => Promise<any>;\n\n  protected twoFactorRoute = \"2fa\";\n  protected successRoute = \"vault\";\n  protected forcePasswordResetRoute = \"update-temp-password\";\n  private resendTimeout = 12000;\n  private authRequestKeyPair: [publicKey: ArrayBuffer, privateKey: ArrayBuffer];\n\n  constructor(\n    protected router: Router,\n    private cryptoService: CryptoService,\n    private cryptoFunctionService: CryptoFunctionService,\n    private appIdService: AppIdService,\n    private passwordGenerationService: PasswordGenerationService,\n    private apiService: ApiService,\n    private authService: AuthService,\n    private logService: LogService,\n    environmentService: EnvironmentService,\n    i18nService: I18nService,\n    platformUtilsService: PlatformUtilsService,\n    private anonymousHubService: AnonymousHubService,\n    private validationService: ValidationService,\n    private stateService: StateService,\n    private loginService: LoginService\n  ) {\n    super(environmentService, i18nService, platformUtilsService);\n\n    const navigation = this.router.getCurrentNavigation();\n    if (navigation) {\n      this.email = this.loginService.getEmail();\n    }\n\n    //gets signalR push notification\n    this.authService\n      .getPushNotifcationObs$()\n      .pipe(takeUntil(this.destroy$))\n      .subscribe((id) => {\n        this.confirmResponse(id);\n      });\n  }\n\n  async ngOnInit() {\n    if (!this.email) {\n      this.router.navigate([\"/login\"]);\n      return;\n    }\n\n    this.startPasswordlessLogin();\n  }\n\n  async startPasswordlessLogin() {\n    this.showResendNotification = false;\n\n    try {\n      await this.buildAuthRequest();\n      const reqResponse = await this.apiService.postAuthRequest(this.passwordlessRequest);\n\n      if (reqResponse.id) {\n        this.anonymousHubService.createHubConnection(reqResponse.id);\n      }\n    } catch (e) {\n      this.logService.error(e);\n    }\n\n    setTimeout(() => {\n      this.showResendNotification = true;\n    }, this.resendTimeout);\n  }\n\n  ngOnDestroy(): void {\n    this.destroy$.next();\n    this.destroy$.complete();\n    this.anonymousHubService.stopHubConnection();\n  }\n\n  private async confirmResponse(requestId: string) {\n    try {\n      const response = await this.apiService.getAuthResponse(\n        requestId,\n        this.passwordlessRequest.accessCode\n      );\n\n      if (!response.requestApproved) {\n        return;\n      }\n\n      const credentials = await this.buildLoginCredntials(requestId, response);\n      const loginResponse = await this.authService.logIn(credentials);\n\n      if (loginResponse.requiresTwoFactor) {\n        if (this.onSuccessfulLoginTwoFactorNavigate != null) {\n          this.onSuccessfulLoginTwoFactorNavigate();\n        } else {\n          this.router.navigate([this.twoFactorRoute]);\n        }\n      } else if (loginResponse.forcePasswordReset) {\n        if (this.onSuccessfulLoginForceResetNavigate != null) {\n          this.onSuccessfulLoginForceResetNavigate();\n        } else {\n          this.router.navigate([this.forcePasswordResetRoute]);\n        }\n      } else {\n        await this.setRememberEmailValues();\n        if (this.onSuccessfulLogin != null) {\n          this.onSuccessfulLogin();\n        }\n        if (this.onSuccessfulLoginNavigate != null) {\n          this.onSuccessfulLoginNavigate();\n        } else {\n          this.router.navigate([this.successRoute]);\n        }\n      }\n    } catch (error) {\n      if (error instanceof ErrorResponse) {\n        this.router.navigate([\"/login\"]);\n        this.validationService.showError(error);\n        return;\n      }\n\n      this.logService.error(error);\n    }\n  }\n\n  async setRememberEmailValues() {\n    const rememberEmail = this.loginService.getRememberEmail();\n    const rememberedEmail = this.loginService.getEmail();\n    await this.stateService.setRememberedEmail(rememberEmail ? rememberedEmail : null);\n    this.loginService.clearValues();\n  }\n\n  private async buildAuthRequest() {\n    this.authRequestKeyPair = await this.cryptoFunctionService.rsaGenerateKeyPair(2048);\n    const fingerprint = await (\n      await this.cryptoService.getFingerprint(this.email, this.authRequestKeyPair[0])\n    ).join(\"-\");\n    const deviceIdentifier = await this.appIdService.getAppId();\n    const publicKey = Utils.fromBufferToB64(this.authRequestKeyPair[0]);\n    const accessCode = await this.passwordGenerationService.generatePassword({ length: 25 });\n\n    this.passwordlessRequest = new PasswordlessCreateAuthRequest(\n      this.email,\n      deviceIdentifier,\n      publicKey,\n      AuthRequestType.AuthenticateAndUnlock,\n      accessCode,\n      fingerprint\n    );\n  }\n\n  private async buildLoginCredntials(\n    requestId: string,\n    response: AuthRequestResponse\n  ): Promise<PasswordlessLogInCredentials> {\n    const decKey = await this.cryptoService.rsaDecrypt(response.key, this.authRequestKeyPair[1]);\n    const decMasterPasswordHash = await this.cryptoService.rsaDecrypt(\n      response.masterPasswordHash,\n      this.authRequestKeyPair[1]\n    );\n    const key = new SymmetricCryptoKey(decKey);\n    const localHashedPassword = Utils.fromBufferToUtf8(decMasterPasswordHash);\n\n    return new PasswordlessLogInCredentials(\n      this.email,\n      this.passwordlessRequest.accessCode,\n      requestId,\n      key,\n      localHashedPassword\n    );\n  }\n}\n","<div class=\"login-with-device\">\n  <header>\n    <h1 class=\"login-center\">\n      <span class=\"title\">{{ \"logIn\" | i18n }}</span>\n    </h1>\n  </header>\n  <div class=\"content login-page\">\n    <div>\n      <p class=\"lead\">{{ \"logInInitiated\" | i18n }}</p>\n\n      <div>\n        <p>{{ \"notificationSentDevice\" | i18n }}</p>\n\n        <p>\n          {{ \"fingerprintMatchInfo\" | i18n }}\n        </p>\n      </div>\n\n      <div>\n        <b class=\"fingerprint-phrase-header\">{{ \"fingerprintPhraseHeader\" | i18n }}</b>\n        <p class=\"fingerprint-text\">\n          <code>{{ passwordlessRequest?.fingerprintPhrase }}</code>\n        </p>\n      </div>\n\n      <div class=\"resend-notification\" *ngIf=\"showResendNotification\">\n        <a (click)=\"startPasswordlessLogin()\">{{ \"resendNotification\" | i18n }}</a>\n      </div>\n\n      <div class=\"footer\">\n        {{ \"loginWithDeviceEnabledInfo\" | i18n }}\n        <a routerLink=\"/login\">{{ \"viewAllLoginOptions\" | i18n }}</a>\n      </div>\n    </div>\n  </div>\n</div>\n","import { Component, OnDestroy, OnInit } from \"@angular/core\";\nimport { Router } from \"@angular/router\";\n\nimport { LoginWithDeviceComponent as BaseLoginWithDeviceComponent } from \"@bitwarden/angular/components/login-with-device.component\";\nimport { AnonymousHubService } from \"@bitwarden/common/abstractions/anonymousHub.service\";\nimport { ApiService } from \"@bitwarden/common/abstractions/api.service\";\nimport { AppIdService } from \"@bitwarden/common/abstractions/appId.service\";\nimport { AuthService } from \"@bitwarden/common/abstractions/auth.service\";\nimport { CryptoService } from \"@bitwarden/common/abstractions/crypto.service\";\nimport { CryptoFunctionService } from \"@bitwarden/common/abstractions/cryptoFunction.service\";\nimport { EnvironmentService } from \"@bitwarden/common/abstractions/environment.service\";\nimport { I18nService } from \"@bitwarden/common/abstractions/i18n.service\";\nimport { LogService } from \"@bitwarden/common/abstractions/log.service\";\nimport { LoginService } from \"@bitwarden/common/abstractions/login.service\";\nimport { PasswordGenerationService } from \"@bitwarden/common/abstractions/passwordGeneration.service\";\nimport { PlatformUtilsService } from \"@bitwarden/common/abstractions/platformUtils.service\";\nimport { StateService } from \"@bitwarden/common/abstractions/state.service\";\nimport { ValidationService } from \"@bitwarden/common/abstractions/validation.service\";\nimport { SyncService } from \"@bitwarden/common/vault/abstractions/sync/sync.service.abstraction\";\n\n@Component({\n  selector: \"app-login-with-device\",\n  templateUrl: \"login-with-device.component.html\",\n})\nexport class LoginWithDeviceComponent\n  extends BaseLoginWithDeviceComponent\n  implements OnInit, OnDestroy\n{\n  constructor(\n    router: Router,\n    cryptoService: CryptoService,\n    cryptoFunctionService: CryptoFunctionService,\n    appIdService: AppIdService,\n    passwordGenerationService: PasswordGenerationService,\n    apiService: ApiService,\n    authService: AuthService,\n    logService: LogService,\n    environmentService: EnvironmentService,\n    i18nService: I18nService,\n    platformUtilsService: PlatformUtilsService,\n    anonymousHubService: AnonymousHubService,\n    validationService: ValidationService,\n    stateService: StateService,\n    loginService: LoginService,\n    syncService: SyncService\n  ) {\n    super(\n      router,\n      cryptoService,\n      cryptoFunctionService,\n      appIdService,\n      passwordGenerationService,\n      apiService,\n      authService,\n      logService,\n      environmentService,\n      i18nService,\n      platformUtilsService,\n      anonymousHubService,\n      validationService,\n      stateService,\n      loginService\n    );\n    super.onSuccessfulLogin = async () => {\n      await syncService.fullSync(true);\n    };\n  }\n}\n","import { AbstractControl } from \"@angular/forms\";\nexport interface AllValidationErrors {\n  controlName: string;\n  errorName: string;\n}\n\nexport interface FormGroupControls {\n  [key: string]: AbstractControl;\n}\n\nexport abstract class FormValidationErrorsService {\n  getFormValidationErrors: (controls: FormGroupControls) => AllValidationErrors[];\n}\n","import { Directive, NgZone, OnInit } from \"@angular/core\";\nimport { FormBuilder, Validators } from \"@angular/forms\";\nimport { ActivatedRoute, Router } from \"@angular/router\";\nimport { take } from \"rxjs/operators\";\n\nimport { ApiService } from \"@bitwarden/common/abstractions/api.service\";\nimport { AppIdService } from \"@bitwarden/common/abstractions/appId.service\";\nimport { AuthService } from \"@bitwarden/common/abstractions/auth.service\";\nimport { CryptoFunctionService } from \"@bitwarden/common/abstractions/cryptoFunction.service\";\nimport { EnvironmentService } from \"@bitwarden/common/abstractions/environment.service\";\nimport {\n  AllValidationErrors,\n  FormValidationErrorsService,\n} from \"@bitwarden/common/abstractions/formValidationErrors.service\";\nimport { I18nService } from \"@bitwarden/common/abstractions/i18n.service\";\nimport { LogService } from \"@bitwarden/common/abstractions/log.service\";\nimport { LoginService } from \"@bitwarden/common/abstractions/login.service\";\nimport { PasswordGenerationService } from \"@bitwarden/common/abstractions/passwordGeneration.service\";\nimport { PlatformUtilsService } from \"@bitwarden/common/abstractions/platformUtils.service\";\nimport { StateService } from \"@bitwarden/common/abstractions/state.service\";\nimport { Utils } from \"@bitwarden/common/misc/utils\";\nimport { AuthResult } from \"@bitwarden/common/models/domain/auth-result\";\nimport { PasswordLogInCredentials } from \"@bitwarden/common/models/domain/log-in-credentials\";\n\nimport { CaptchaProtectedComponent } from \"./captchaProtected.component\";\n\n@Directive()\nexport class LoginComponent extends CaptchaProtectedComponent implements OnInit {\n  showPassword = false;\n  formPromise: Promise<AuthResult>;\n  onSuccessfulLogin: () => Promise<any>;\n  onSuccessfulLoginNavigate: () => Promise<any>;\n  onSuccessfulLoginTwoFactorNavigate: () => Promise<any>;\n  onSuccessfulLoginForceResetNavigate: () => Promise<any>;\n  selfHosted = false;\n  showLoginWithDevice: boolean;\n  validatedEmail = false;\n  paramEmailSet = false;\n\n  formGroup = this.formBuilder.group({\n    email: [\"\", [Validators.required, Validators.email]],\n    masterPassword: [\"\", [Validators.required, Validators.minLength(8)]],\n    rememberEmail: [false],\n  });\n\n  protected twoFactorRoute = \"2fa\";\n  protected successRoute = \"vault\";\n  protected forcePasswordResetRoute = \"update-temp-password\";\n\n  get loggedEmail() {\n    return this.formGroup.value.email;\n  }\n\n  constructor(\n    protected apiService: ApiService,\n    protected appIdService: AppIdService,\n    protected authService: AuthService,\n    protected router: Router,\n    platformUtilsService: PlatformUtilsService,\n    i18nService: I18nService,\n    protected stateService: StateService,\n    environmentService: EnvironmentService,\n    protected passwordGenerationService: PasswordGenerationService,\n    protected cryptoFunctionService: CryptoFunctionService,\n    protected logService: LogService,\n    protected ngZone: NgZone,\n    protected formBuilder: FormBuilder,\n    protected formValidationErrorService: FormValidationErrorsService,\n    protected route: ActivatedRoute,\n    protected loginService: LoginService\n  ) {\n    super(environmentService, i18nService, platformUtilsService);\n    this.selfHosted = platformUtilsService.isSelfHost();\n  }\n\n  get selfHostedDomain() {\n    return this.environmentService.hasBaseUrl() ? this.environmentService.getWebVaultUrl() : null;\n  }\n\n  async ngOnInit() {\n    this.route?.queryParams.subscribe((params) => {\n      if (params != null) {\n        const queryParamsEmail = params[\"email\"];\n        if (queryParamsEmail != null && queryParamsEmail.indexOf(\"@\") > -1) {\n          this.formGroup.get(\"email\").setValue(queryParamsEmail);\n          this.loginService.setEmail(queryParamsEmail);\n          this.paramEmailSet = true;\n        }\n      }\n    });\n    let email = this.loginService.getEmail();\n\n    if (email == null || email === \"\") {\n      email = await this.stateService.getRememberedEmail();\n    }\n\n    if (!this.paramEmailSet) {\n      this.formGroup.get(\"email\")?.setValue(email ?? \"\");\n    }\n    let rememberEmail = this.loginService.getRememberEmail();\n    if (rememberEmail == null) {\n      rememberEmail = (await this.stateService.getRememberedEmail()) != null;\n    }\n    this.formGroup.get(\"rememberEmail\")?.setValue(rememberEmail);\n  }\n\n  async submit(showToast = true) {\n    const data = this.formGroup.value;\n\n    await this.setupCaptcha();\n\n    this.formGroup.markAllAsTouched();\n\n    //web\n    if (this.formGroup.invalid && !showToast) {\n      return;\n    }\n\n    //desktop, browser; This should be removed once all clients use reactive forms\n    if (this.formGroup.invalid && showToast) {\n      const errorText = this.getErrorToastMessage();\n      this.platformUtilsService.showToast(\"error\", this.i18nService.t(\"errorOccurred\"), errorText);\n      return;\n    }\n\n    try {\n      const credentials = new PasswordLogInCredentials(\n        data.email,\n        data.masterPassword,\n        this.captchaToken,\n        null\n      );\n      this.formPromise = this.authService.logIn(credentials);\n      const response = await this.formPromise;\n      this.setFormValues();\n      await this.loginService.saveEmailSettings();\n      if (this.handleCaptchaRequired(response)) {\n        return;\n      } else if (response.requiresTwoFactor) {\n        if (this.onSuccessfulLoginTwoFactorNavigate != null) {\n          this.onSuccessfulLoginTwoFactorNavigate();\n        } else {\n          this.router.navigate([this.twoFactorRoute]);\n        }\n      } else if (response.forcePasswordReset) {\n        if (this.onSuccessfulLoginForceResetNavigate != null) {\n          this.onSuccessfulLoginForceResetNavigate();\n        } else {\n          this.router.navigate([this.forcePasswordResetRoute]);\n        }\n      } else {\n        const disableFavicon = await this.stateService.getDisableFavicon();\n        await this.stateService.setDisableFavicon(!!disableFavicon);\n        if (this.onSuccessfulLogin != null) {\n          this.onSuccessfulLogin();\n        }\n        if (this.onSuccessfulLoginNavigate != null) {\n          this.onSuccessfulLoginNavigate();\n        } else {\n          this.router.navigate([this.successRoute]);\n        }\n      }\n    } catch (e) {\n      this.logService.error(e);\n    }\n  }\n\n  togglePassword() {\n    this.showPassword = !this.showPassword;\n    if (this.ngZone.isStable) {\n      document.getElementById(\"masterPassword\").focus();\n    } else {\n      this.ngZone.onStable\n        .pipe(take(1))\n        .subscribe(() => document.getElementById(\"masterPassword\").focus());\n    }\n  }\n\n  async startPasswordlessLogin() {\n    this.formGroup.get(\"masterPassword\")?.clearValidators();\n    this.formGroup.get(\"masterPassword\")?.updateValueAndValidity();\n\n    if (!this.formGroup.valid) {\n      return;\n    }\n\n    this.setFormValues();\n    this.router.navigate([\"/login-with-device\"]);\n  }\n\n  async launchSsoBrowser(clientId: string, ssoRedirectUri: string) {\n    await this.saveEmailSettings();\n    // Generate necessary sso params\n    const passwordOptions: any = {\n      type: \"password\",\n      length: 64,\n      uppercase: true,\n      lowercase: true,\n      numbers: true,\n      special: false,\n    };\n    const state = await this.passwordGenerationService.generatePassword(passwordOptions);\n    const ssoCodeVerifier = await this.passwordGenerationService.generatePassword(passwordOptions);\n    const codeVerifierHash = await this.cryptoFunctionService.hash(ssoCodeVerifier, \"sha256\");\n    const codeChallenge = Utils.fromBufferToUrlB64(codeVerifierHash);\n\n    // Save sso params\n    await this.stateService.setSsoState(state);\n    await this.stateService.setSsoCodeVerifier(ssoCodeVerifier);\n\n    // Build URI\n    const webUrl = this.environmentService.getWebVaultUrl();\n\n    // Launch browser\n    this.platformUtilsService.launchUri(\n      webUrl +\n        \"/#/sso?clientId=\" +\n        clientId +\n        \"&redirectUri=\" +\n        encodeURIComponent(ssoRedirectUri) +\n        \"&state=\" +\n        state +\n        \"&codeChallenge=\" +\n        codeChallenge\n    );\n  }\n\n  async validateEmail() {\n    this.formGroup.controls.email.markAsTouched();\n    const emailInvalid = this.formGroup.get(\"email\").invalid;\n    if (!emailInvalid) {\n      this.toggleValidateEmail(true);\n      await this.getLoginWithDevice(this.loggedEmail);\n    }\n  }\n\n  toggleValidateEmail(value: boolean) {\n    this.validatedEmail = value;\n    this.formGroup.controls.masterPassword.reset();\n  }\n\n  setFormValues() {\n    this.loginService.setEmail(this.formGroup.value.email);\n    this.loginService.setRememberEmail(this.formGroup.value.rememberEmail);\n  }\n\n  async saveEmailSettings() {\n    this.setFormValues();\n    await this.loginService.saveEmailSettings();\n  }\n\n  private getErrorToastMessage() {\n    const error: AllValidationErrors = this.formValidationErrorService\n      .getFormValidationErrors(this.formGroup.controls)\n      .shift();\n\n    if (error) {\n      switch (error.errorName) {\n        case \"email\":\n          return this.i18nService.t(\"invalidEmail\");\n        default:\n          return this.i18nService.t(this.errorTag(error));\n      }\n    }\n\n    return;\n  }\n\n  private errorTag(error: AllValidationErrors): string {\n    const name = error.errorName.charAt(0).toUpperCase() + error.errorName.slice(1);\n    return `${error.controlName}${name}`;\n  }\n\n  async getLoginWithDevice(email: string) {\n    try {\n      const deviceIdentifier = await this.appIdService.getAppId();\n      const res = await this.apiService.getKnownDevice(email, deviceIdentifier);\n      //ensure the application is not self-hosted\n      this.showLoginWithDevice = res && !this.selfHosted;\n    } catch (e) {\n      this.showLoginWithDevice = false;\n    }\n  }\n}\n","<form #form (ngSubmit)=\"submit()\" [appApiAction]=\"formPromise\" [formGroup]=\"formGroup\">\n  <header>\n    <h1 class=\"login-center\">\n      <span class=\"title\">{{ \"logIn\" | i18n }}</span>\n    </h1>\n  </header>\n  <main tabindex=\"-1\">\n    <div class=\"box\">\n      <div class=\"box-content\">\n        <div class=\"box-content-row box-content-row-flex\" appBoxRow>\n          <div class=\"row-main\">\n            <input id=\"email\" type=\"text\" formControlName=\"email\" [hidden]=\"true\" />\n            <input\n              id=\"rememberEmail\"\n              type=\"checkbox\"\n              formControlName=\"rememberEmail\"\n              [hidden]=\"true\"\n            />\n            <label for=\"masterPassword\">{{ \"masterPass\" | i18n }}</label>\n            <input\n              id=\"masterPassword\"\n              type=\"{{ showPassword ? 'text' : 'password' }}\"\n              class=\"monospaced\"\n              formControlName=\"masterPassword\"\n              appInputVerbatim\n              appAutofocus\n            />\n          </div>\n          <div class=\"action-buttons\">\n            <button\n              type=\"button\"\n              class=\"row-btn\"\n              appStopClick\n              appA11yTitle=\"{{ 'toggleVisibility' | i18n }}\"\n              (click)=\"togglePassword()\"\n              [attr.aria-pressed]=\"showPassword\"\n            >\n              <i\n                class=\"bwi bwi-lg\"\n                [ngClass]=\"{ 'bwi-eye': !showPassword, 'bwi-eye-slash': showPassword }\"\n                aria-hidden=\"true\"\n              ></i>\n            </button>\n          </div>\n        </div>\n        <div class=\"box-content-row\" [hidden]=\"!showCaptcha()\">\n          <iframe id=\"hcaptcha_iframe\" height=\"80\"></iframe>\n        </div>\n      </div>\n      <div class=\"box-footer\">\n        <button type=\"button\" class=\"btn link\" routerLink=\"/hint\" (click)=\"setFormValues()\">\n          <b>{{ \"getMasterPasswordHint\" | i18n }}</b>\n        </button>\n      </div>\n    </div>\n    <app-private-mode-warning></app-private-mode-warning>\n    <div class=\"content login-buttons\">\n      <button type=\"submit\" class=\"btn primary block\" [disabled]=\"form.loading\">\n        <span [hidden]=\"form.loading\"\n          ><b>{{ \"logInWithMasterPassword\" | i18n }}</b></span\n        >\n        <i class=\"bwi bwi-spinner bwi-lg bwi-spin\" [hidden]=\"!form.loading\" aria-hidden=\"true\"></i>\n      </button>\n      <div class=\"tw-mb-3\" *ngIf=\"showLoginWithDevice && showPasswordless\">\n        <button type=\"button\" class=\"btn block\" (click)=\"startPasswordlessLogin()\">\n          <span> <i class=\"bwi bwi-mobile\"></i> {{ \"loginWithDevice\" | i18n }} </span>\n        </button>\n      </div>\n      <button type=\"button\" (click)=\"launchSsoBrowser()\" class=\"btn block\">\n        <i class=\"bwi bwi-provider\" aria-hidden=\"true\"></i> {{ \"enterpriseSingleSignOn\" | i18n }}\n      </button>\n      <div class=\"small\">\n        <p class=\"no-margin\">{{ \"loggingInAs\" | i18n }} {{ loggedEmail }}</p>\n        <a routerLink=\"/home\">{{ \"notYou\" | i18n }}</a>\n      </div>\n    </div>\n  </main>\n</form>\n","import { Component, NgZone } from \"@angular/core\";\nimport { FormBuilder } from \"@angular/forms\";\nimport { ActivatedRoute, Router } from \"@angular/router\";\n\nimport { LoginComponent as BaseLoginComponent } from \"@bitwarden/angular/components/login.component\";\nimport { ApiService } from \"@bitwarden/common/abstractions/api.service\";\nimport { AppIdService } from \"@bitwarden/common/abstractions/appId.service\";\nimport { AuthService } from \"@bitwarden/common/abstractions/auth.service\";\nimport { CryptoFunctionService } from \"@bitwarden/common/abstractions/cryptoFunction.service\";\nimport { EnvironmentService } from \"@bitwarden/common/abstractions/environment.service\";\nimport { FormValidationErrorsService } from \"@bitwarden/common/abstractions/formValidationErrors.service\";\nimport { I18nService } from \"@bitwarden/common/abstractions/i18n.service\";\nimport { LogService } from \"@bitwarden/common/abstractions/log.service\";\nimport { LoginService } from \"@bitwarden/common/abstractions/login.service\";\nimport { PasswordGenerationService } from \"@bitwarden/common/abstractions/passwordGeneration.service\";\nimport { PlatformUtilsService } from \"@bitwarden/common/abstractions/platformUtils.service\";\nimport { StateService } from \"@bitwarden/common/abstractions/state.service\";\nimport { Utils } from \"@bitwarden/common/misc/utils\";\nimport { SyncService } from \"@bitwarden/common/vault/abstractions/sync/sync.service.abstraction\";\n\nimport { flagEnabled } from \"../../flags\";\n\n@Component({\n  selector: \"app-login\",\n  templateUrl: \"login.component.html\",\n})\nexport class LoginComponent extends BaseLoginComponent {\n  showPasswordless = false;\n  constructor(\n    apiService: ApiService,\n    appIdService: AppIdService,\n    authService: AuthService,\n    router: Router,\n    protected platformUtilsService: PlatformUtilsService,\n    protected i18nService: I18nService,\n    protected stateService: StateService,\n    protected environmentService: EnvironmentService,\n    protected passwordGenerationService: PasswordGenerationService,\n    protected cryptoFunctionService: CryptoFunctionService,\n    syncService: SyncService,\n    logService: LogService,\n    ngZone: NgZone,\n    formBuilder: FormBuilder,\n    formValidationErrorService: FormValidationErrorsService,\n    route: ActivatedRoute,\n    loginService: LoginService\n  ) {\n    super(\n      apiService,\n      appIdService,\n      authService,\n      router,\n      platformUtilsService,\n      i18nService,\n      stateService,\n      environmentService,\n      passwordGenerationService,\n      cryptoFunctionService,\n      logService,\n      ngZone,\n      formBuilder,\n      formValidationErrorService,\n      route,\n      loginService\n    );\n    super.onSuccessfulLogin = async () => {\n      await syncService.fullSync(true);\n    };\n    super.successRoute = \"/tabs/vault\";\n    this.showPasswordless = flagEnabled(\"showPasswordless\");\n\n    if (this.showPasswordless) {\n      this.formGroup.controls.email.setValue(this.loginService.getEmail());\n      this.formGroup.controls.rememberEmail.setValue(this.loginService.getRememberEmail());\n      this.validateEmail();\n    }\n  }\n\n  settings() {\n    this.router.navigate([\"environment\"]);\n  }\n\n  async launchSsoBrowser() {\n    await this.loginService.saveEmailSettings();\n    // Generate necessary sso params\n    const passwordOptions: any = {\n      type: \"password\",\n      length: 64,\n      uppercase: true,\n      lowercase: true,\n      numbers: true,\n      special: false,\n    };\n\n    const state =\n      (await this.passwordGenerationService.generatePassword(passwordOptions)) +\n      \":clientId=browser\";\n    const codeVerifier = await this.passwordGenerationService.generatePassword(passwordOptions);\n    const codeVerifierHash = await this.cryptoFunctionService.hash(codeVerifier, \"sha256\");\n    const codeChallenge = Utils.fromBufferToUrlB64(codeVerifierHash);\n\n    await this.stateService.setSsoCodeVerifier(codeVerifier);\n    await this.stateService.setSsoState(state);\n\n    let url = this.environmentService.getWebVaultUrl();\n    if (url == null) {\n      url = \"https://vault.bitwarden.com\";\n    }\n\n    const redirectUri = url + \"/sso-connector.html\";\n\n    // Launch browser\n    this.platformUtilsService.launchUri(\n      url +\n        \"/#/sso?clientId=browser\" +\n        \"&redirectUri=\" +\n        encodeURIComponent(redirectUri) +\n        \"&state=\" +\n        state +\n        \"&codeChallenge=\" +\n        codeChallenge\n    );\n  }\n}\n","export class KdfConfig {\n  iterations: number;\n  memory?: number;\n  parallelism?: number;\n\n  constructor(iterations: number, memory?: number, parallelism?: number) {\n    this.iterations = iterations;\n    this.memory = memory;\n    this.parallelism = parallelism;\n  }\n}\n","import { KdfConfig } from \"../models/domain/kdf-config\";\n\nexport enum KdfType {\n  PBKDF2_SHA256 = 0,\n  Argon2id = 1,\n}\n\nexport const DEFAULT_ARGON2_MEMORY = 64;\nexport const DEFAULT_ARGON2_PARALLELISM = 4;\nexport const DEFAULT_ARGON2_ITERATIONS = 3;\n\nexport const DEFAULT_KDF_TYPE = KdfType.PBKDF2_SHA256;\nexport const DEFAULT_PBKDF2_ITERATIONS = 600000;\nexport const DEFAULT_KDF_CONFIG = new KdfConfig(DEFAULT_PBKDF2_ITERATIONS);\nexport const SEND_KDF_ITERATIONS = 100000;\n","export class KeysRequest {\n  publicKey: string;\n  encryptedPrivateKey: string;\n\n  constructor(publicKey: string, encryptedPrivateKey: string) {\n    this.publicKey = publicKey;\n    this.encryptedPrivateKey = encryptedPrivateKey;\n  }\n}\n","import { KdfType } from \"../../enums/kdfType\";\n\nimport { CaptchaProtectedRequest } from \"./captcha-protected.request\";\nimport { KeysRequest } from \"./keys.request\";\nimport { ReferenceEventRequest } from \"./reference-event.request\";\n\nexport class RegisterRequest implements CaptchaProtectedRequest {\n  masterPasswordHint: string;\n  keys: KeysRequest;\n  token: string;\n  organizationUserId: string;\n\n  constructor(\n    public email: string,\n    public name: string,\n    public masterPasswordHash: string,\n    masterPasswordHint: string,\n    public key: string,\n    public referenceData: ReferenceEventRequest,\n    public captchaResponse: string,\n    public kdf: KdfType,\n    public kdfIterations: number,\n    public kdfMemory?: number,\n    public kdfParallelism?: number\n  ) {\n    this.masterPasswordHint = masterPasswordHint ? masterPasswordHint : null;\n  }\n}\n","import { AbstractControl, UntypedFormGroup, ValidatorFn } from \"@angular/forms\";\n\nimport { FormGroupControls } from \"@bitwarden/common/abstractions/formValidationErrors.service\";\n\nexport class InputsFieldMatch {\n  //check to ensure two fields do not have the same value\n  static validateInputsDoesntMatch(matchTo: string, errorMessage: string): ValidatorFn {\n    return (control: AbstractControl) => {\n      if (control.parent && control.parent.controls) {\n        return control?.value === (control?.parent?.controls as FormGroupControls)[matchTo].value\n          ? {\n              inputsMatchError: {\n                message: errorMessage,\n              },\n            }\n          : null;\n      }\n\n      return null;\n    };\n  }\n\n  //check to ensure two fields have the same value\n  static validateInputsMatch(matchTo: string, errorMessage: string): ValidatorFn {\n    return (control: AbstractControl) => {\n      if (control.parent && control.parent.controls) {\n        return control?.value === (control?.parent?.controls as FormGroupControls)[matchTo].value\n          ? null\n          : {\n              inputsDoesntMatchError: {\n                message: errorMessage,\n              },\n            };\n      }\n\n      return null;\n    };\n  }\n\n  //checks the formGroup if two fields have the same value and validation is controlled from either field\n  static validateFormInputsMatch(field: string, fieldMatchTo: string, errorMessage: string) {\n    return (formGroup: UntypedFormGroup) => {\n      const fieldCtrl = formGroup.controls[field];\n      const fieldMatchToCtrl = formGroup.controls[fieldMatchTo];\n\n      if (fieldCtrl.value !== fieldMatchToCtrl.value) {\n        fieldMatchToCtrl.setErrors({\n          inputsDoesntMatchError: {\n            message: errorMessage,\n          },\n        });\n      } else {\n        fieldMatchToCtrl.setErrors(null);\n      }\n    };\n  }\n}\n","import { Directive, EventEmitter, Input, OnInit, Output } from \"@angular/core\";\nimport { AbstractControl, UntypedFormBuilder, ValidatorFn, Validators } from \"@angular/forms\";\nimport { Router } from \"@angular/router\";\n\nimport { ApiService } from \"@bitwarden/common/abstractions/api.service\";\nimport { AuditService } from \"@bitwarden/common/abstractions/audit.service\";\nimport { AuthService } from \"@bitwarden/common/abstractions/auth.service\";\nimport { CryptoService } from \"@bitwarden/common/abstractions/crypto.service\";\nimport { EnvironmentService } from \"@bitwarden/common/abstractions/environment.service\";\nimport {\n  AllValidationErrors,\n  FormValidationErrorsService,\n} from \"@bitwarden/common/abstractions/formValidationErrors.service\";\nimport { I18nService } from \"@bitwarden/common/abstractions/i18n.service\";\nimport { LogService } from \"@bitwarden/common/abstractions/log.service\";\nimport { PasswordGenerationService } from \"@bitwarden/common/abstractions/passwordGeneration.service\";\nimport { PlatformUtilsService } from \"@bitwarden/common/abstractions/platformUtils.service\";\nimport { StateService } from \"@bitwarden/common/abstractions/state.service\";\nimport { DEFAULT_KDF_CONFIG, DEFAULT_KDF_TYPE } from \"@bitwarden/common/enums/kdfType\";\nimport { PasswordLogInCredentials } from \"@bitwarden/common/models/domain/log-in-credentials\";\nimport { KeysRequest } from \"@bitwarden/common/models/request/keys.request\";\nimport { ReferenceEventRequest } from \"@bitwarden/common/models/request/reference-event.request\";\nimport { RegisterRequest } from \"@bitwarden/common/models/request/register.request\";\nimport { RegisterResponse } from \"@bitwarden/common/models/response/authentication/register.response\";\n\nimport { PasswordColorText } from \"../shared/components/password-strength/password-strength.component\";\nimport { InputsFieldMatch } from \"../validators/inputsFieldMatch.validator\";\n\nimport { CaptchaProtectedComponent } from \"./captchaProtected.component\";\n\n@Directive()\nexport class RegisterComponent extends CaptchaProtectedComponent implements OnInit {\n  @Input() isInTrialFlow = false;\n  @Output() createdAccount = new EventEmitter<string>();\n\n  showPassword = false;\n  formPromise: Promise<RegisterResponse>;\n  referenceData: ReferenceEventRequest;\n  showTerms = true;\n  showErrorSummary = false;\n  passwordStrengthResult: any;\n  characterMinimumMessage: string;\n  minimumLength = 8;\n  color: string;\n  text: string;\n\n  formGroup = this.formBuilder.group(\n    {\n      email: [\"\", [Validators.required, Validators.email]],\n      name: [\"\"],\n      masterPassword: [\"\", [Validators.required, Validators.minLength(this.minimumLength)]],\n      confirmMasterPassword: [\"\", [Validators.required, Validators.minLength(this.minimumLength)]],\n      hint: [\n        null,\n        [\n          InputsFieldMatch.validateInputsDoesntMatch(\n            \"masterPassword\",\n            this.i18nService.t(\"hintEqualsPassword\")\n          ),\n        ],\n      ],\n      checkForBreaches: [true],\n      acceptPolicies: [false, [this.acceptPoliciesValidation()]],\n    },\n    {\n      validator: InputsFieldMatch.validateFormInputsMatch(\n        \"masterPassword\",\n        \"confirmMasterPassword\",\n        this.i18nService.t(\"masterPassDoesntMatch\")\n      ),\n    }\n  );\n\n  protected successRoute = \"login\";\n\n  protected accountCreated = false;\n\n  protected captchaBypassToken: string = null;\n\n  constructor(\n    protected formValidationErrorService: FormValidationErrorsService,\n    protected formBuilder: UntypedFormBuilder,\n    protected authService: AuthService,\n    protected router: Router,\n    i18nService: I18nService,\n    protected cryptoService: CryptoService,\n    protected apiService: ApiService,\n    protected stateService: StateService,\n    platformUtilsService: PlatformUtilsService,\n    protected passwordGenerationService: PasswordGenerationService,\n    environmentService: EnvironmentService,\n    protected logService: LogService,\n    protected auditService: AuditService\n  ) {\n    super(environmentService, i18nService, platformUtilsService);\n    this.showTerms = !platformUtilsService.isSelfHost();\n    this.characterMinimumMessage = this.i18nService.t(\"characterMinimum\", this.minimumLength);\n  }\n\n  async ngOnInit() {\n    this.setupCaptcha();\n  }\n\n  async submit(showToast = true) {\n    let email = this.formGroup.value.email;\n    email = email.trim().toLowerCase();\n    let name = this.formGroup.value.name;\n    name = name === \"\" ? null : name; // Why do we do this?\n    const masterPassword = this.formGroup.value.masterPassword;\n    try {\n      if (!this.accountCreated) {\n        const registerResponse = await this.registerAccount(\n          await this.buildRegisterRequest(email, masterPassword, name),\n          showToast\n        );\n        if (!registerResponse.successful) {\n          return;\n        }\n        this.captchaBypassToken = registerResponse.captchaBypassToken;\n        this.accountCreated = true;\n      }\n      if (this.isInTrialFlow) {\n        if (!this.accountCreated) {\n          this.platformUtilsService.showToast(\n            \"success\",\n            null,\n            this.i18nService.t(\"trialAccountCreated\")\n          );\n        }\n        const loginResponse = await this.logIn(email, masterPassword, this.captchaBypassToken);\n        if (loginResponse.captchaRequired) {\n          return;\n        }\n        this.createdAccount.emit(this.formGroup.value.email);\n      } else {\n        this.platformUtilsService.showToast(\n          \"success\",\n          null,\n          this.i18nService.t(\"newAccountCreated\")\n        );\n        this.router.navigate([this.successRoute], { queryParams: { email: email } });\n      }\n    } catch (e) {\n      this.logService.error(e);\n    }\n  }\n\n  togglePassword() {\n    this.showPassword = !this.showPassword;\n  }\n\n  getStrengthResult(result: any) {\n    this.passwordStrengthResult = result;\n  }\n\n  getPasswordScoreText(event: PasswordColorText) {\n    this.color = event.color;\n    this.text = event.text;\n  }\n\n  private getErrorToastMessage() {\n    const error: AllValidationErrors = this.formValidationErrorService\n      .getFormValidationErrors(this.formGroup.controls)\n      .shift();\n\n    if (error) {\n      switch (error.errorName) {\n        case \"email\":\n          return this.i18nService.t(\"invalidEmail\");\n        case \"inputsDoesntMatchError\":\n          return this.i18nService.t(\"masterPassDoesntMatch\");\n        case \"inputsMatchError\":\n          return this.i18nService.t(\"hintEqualsPassword\");\n        default:\n          return this.i18nService.t(this.errorTag(error));\n      }\n    }\n\n    return;\n  }\n\n  private errorTag(error: AllValidationErrors): string {\n    const name = error.errorName.charAt(0).toUpperCase() + error.errorName.slice(1);\n    return `${error.controlName}${name}`;\n  }\n\n  //validation would be ignored on selfhosted\n  private acceptPoliciesValidation(): ValidatorFn {\n    return (control: AbstractControl) => {\n      const ctrlValue = control.value;\n\n      return !ctrlValue && this.showTerms ? { required: true } : null;\n    };\n  }\n\n  private async validateRegistration(showToast: boolean): Promise<{ isValid: boolean }> {\n    this.formGroup.markAllAsTouched();\n    this.showErrorSummary = true;\n\n    if (this.formGroup.get(\"acceptPolicies\").hasError(\"required\")) {\n      this.platformUtilsService.showToast(\n        \"error\",\n        this.i18nService.t(\"errorOccurred\"),\n        this.i18nService.t(\"acceptPoliciesRequired\")\n      );\n      return { isValid: false };\n    }\n\n    //web\n    if (this.formGroup.invalid && !showToast) {\n      return { isValid: false };\n    }\n\n    //desktop, browser\n    if (this.formGroup.invalid && showToast) {\n      const errorText = this.getErrorToastMessage();\n      this.platformUtilsService.showToast(\"error\", this.i18nService.t(\"errorOccurred\"), errorText);\n      return { isValid: false };\n    }\n\n    const passwordWeak =\n      this.passwordStrengthResult != null && this.passwordStrengthResult.score < 3;\n    const passwordLeak =\n      this.formGroup.controls.checkForBreaches.value &&\n      (await this.auditService.passwordLeaked(this.formGroup.controls.masterPassword.value)) > 0;\n\n    if (passwordWeak && passwordLeak) {\n      const result = await this.platformUtilsService.showDialog(\n        this.i18nService.t(\"weakAndBreachedMasterPasswordDesc\"),\n        this.i18nService.t(\"weakAndExposedMasterPassword\"),\n        this.i18nService.t(\"yes\"),\n        this.i18nService.t(\"no\"),\n        \"warning\"\n      );\n      if (!result) {\n        return { isValid: false };\n      }\n    } else if (passwordWeak) {\n      const result = await this.platformUtilsService.showDialog(\n        this.i18nService.t(\"weakMasterPasswordDesc\"),\n        this.i18nService.t(\"weakMasterPassword\"),\n        this.i18nService.t(\"yes\"),\n        this.i18nService.t(\"no\"),\n        \"warning\"\n      );\n      if (!result) {\n        return { isValid: false };\n      }\n    } else if (passwordLeak) {\n      const result = await this.platformUtilsService.showDialog(\n        this.i18nService.t(\"exposedMasterPasswordDesc\"),\n        this.i18nService.t(\"exposedMasterPassword\"),\n        this.i18nService.t(\"yes\"),\n        this.i18nService.t(\"no\"),\n        \"warning\"\n      );\n      if (!result) {\n        return { isValid: false };\n      }\n    }\n\n    return { isValid: true };\n  }\n\n  private async buildRegisterRequest(\n    email: string,\n    masterPassword: string,\n    name: string\n  ): Promise<RegisterRequest> {\n    const hint = this.formGroup.value.hint;\n    const kdf = DEFAULT_KDF_TYPE;\n    const kdfConfig = DEFAULT_KDF_CONFIG;\n    const key = await this.cryptoService.makeKey(masterPassword, email, kdf, kdfConfig);\n    const encKey = await this.cryptoService.makeEncKey(key);\n    const hashedPassword = await this.cryptoService.hashPassword(masterPassword, key);\n    const keys = await this.cryptoService.makeKeyPair(encKey[0]);\n    const request = new RegisterRequest(\n      email,\n      name,\n      hashedPassword,\n      hint,\n      encKey[1].encryptedString,\n      this.referenceData,\n      this.captchaToken,\n      kdf,\n      kdfConfig.iterations,\n      kdfConfig.memory,\n      kdfConfig.parallelism\n    );\n    request.keys = new KeysRequest(keys[0], keys[1].encryptedString);\n    const orgInvite = await this.stateService.getOrganizationInvitation();\n    if (orgInvite != null && orgInvite.token != null && orgInvite.organizationUserId != null) {\n      request.token = orgInvite.token;\n      request.organizationUserId = orgInvite.organizationUserId;\n    }\n    return request;\n  }\n\n  private async registerAccount(\n    request: RegisterRequest,\n    showToast: boolean\n  ): Promise<{ successful: boolean; captchaBypassToken?: string }> {\n    if (!(await this.validateRegistration(showToast)).isValid) {\n      return { successful: false };\n    }\n    this.formPromise = this.apiService.postRegister(request);\n    try {\n      const response = await this.formPromise;\n      return { successful: true, captchaBypassToken: response.captchaBypassToken };\n    } catch (e) {\n      if (this.handleCaptchaRequired(e)) {\n        return { successful: false };\n      } else {\n        throw e;\n      }\n    }\n  }\n\n  private async logIn(\n    email: string,\n    masterPassword: string,\n    captchaBypassToken: string\n  ): Promise<{ captchaRequired: boolean }> {\n    const credentials = new PasswordLogInCredentials(\n      email,\n      masterPassword,\n      captchaBypassToken,\n      null\n    );\n    const loginResponse = await this.authService.logIn(credentials);\n    if (this.handleCaptchaRequired(loginResponse)) {\n      return { captchaRequired: true };\n    }\n    return { captchaRequired: false };\n  }\n}\n","<div class=\"progress\">\n  <div\n    class=\"progress-bar {{ color }}\"\n    role=\"progressbar\"\n    [ngStyle]=\"{ width: scoreWidth + '%' }\"\n    attr.aria-valuenow=\"{{ scoreWidth }}\"\n    aria-valuemin=\"0\"\n    aria-valuemax=\"100\"\n  >\n    <ng-container *ngIf=\"showText && text\">\n      {{ text }}\n    </ng-container>\n  </div>\n</div>\n","import { Component, EventEmitter, Input, OnChanges, Output } from \"@angular/core\";\n\nimport { I18nService } from \"@bitwarden/common/abstractions/i18n.service\";\nimport { PasswordGenerationService } from \"@bitwarden/common/abstractions/passwordGeneration.service\";\n\nexport interface PasswordColorText {\n  color: string;\n  text: string;\n}\n\n@Component({\n  selector: \"app-password-strength\",\n  templateUrl: \"password-strength.component.html\",\n})\nexport class PasswordStrengthComponent implements OnChanges {\n  @Input() showText = false;\n  @Input() email: string;\n  @Input() name: string;\n  @Input() set password(value: string) {\n    this.updatePasswordStrength(value);\n  }\n  @Output() passwordStrengthResult = new EventEmitter<any>();\n  @Output() passwordScoreColor = new EventEmitter<PasswordColorText>();\n\n  masterPasswordScore: number;\n  scoreWidth = 0;\n  color = \"bg-danger\";\n  text: string;\n\n  private masterPasswordStrengthTimeout: any;\n\n  //used by desktop and browser to display strength text color\n  get masterPasswordScoreColor() {\n    switch (this.masterPasswordScore) {\n      case 4:\n        return \"success\";\n      case 3:\n        return \"primary\";\n      case 2:\n        return \"warning\";\n      default:\n        return \"danger\";\n    }\n  }\n\n  //used by desktop and browser to display strength text\n  get masterPasswordScoreText() {\n    switch (this.masterPasswordScore) {\n      case 4:\n        return this.i18nService.t(\"strong\");\n      case 3:\n        return this.i18nService.t(\"good\");\n      case 2:\n        return this.i18nService.t(\"weak\");\n      default:\n        return this.masterPasswordScore != null ? this.i18nService.t(\"weak\") : null;\n    }\n  }\n\n  constructor(\n    private i18nService: I18nService,\n    private passwordGenerationService: PasswordGenerationService\n  ) {}\n\n  ngOnChanges(): void {\n    this.masterPasswordStrengthTimeout = setTimeout(() => {\n      this.scoreWidth = this.masterPasswordScore == null ? 0 : (this.masterPasswordScore + 1) * 20;\n\n      switch (this.masterPasswordScore) {\n        case 4:\n          this.color = \"bg-success\";\n          this.text = this.i18nService.t(\"strong\");\n          break;\n        case 3:\n          this.color = \"bg-primary\";\n          this.text = this.i18nService.t(\"good\");\n          break;\n        case 2:\n          this.color = \"bg-warning\";\n          this.text = this.i18nService.t(\"weak\");\n          break;\n        default:\n          this.color = \"bg-danger\";\n          this.text = this.masterPasswordScore != null ? this.i18nService.t(\"weak\") : null;\n          break;\n      }\n\n      this.setPasswordScoreText(this.color, this.text);\n    }, 300);\n  }\n\n  updatePasswordStrength(password: string) {\n    const masterPassword = password;\n\n    if (this.masterPasswordStrengthTimeout != null) {\n      clearTimeout(this.masterPasswordStrengthTimeout);\n    }\n\n    const strengthResult = this.passwordGenerationService.passwordStrength(\n      masterPassword,\n      this.getPasswordStrengthUserInput()\n    );\n    this.passwordStrengthResult.emit(strengthResult);\n    this.masterPasswordScore = strengthResult == null ? null : strengthResult.score;\n  }\n\n  getPasswordStrengthUserInput() {\n    let userInput: string[] = [];\n    const email = this.email;\n    const name = this.name;\n    const atPosition = email?.indexOf(\"@\");\n    if (atPosition > -1) {\n      userInput = userInput.concat(\n        email\n          .substr(0, atPosition)\n          .trim()\n          .toLowerCase()\n          .split(/[^A-Za-z0-9]/)\n      );\n    }\n    if (name != null && name !== \"\") {\n      userInput = userInput.concat(name.trim().toLowerCase().split(\" \"));\n    }\n    return userInput;\n  }\n\n  setPasswordScoreText(color: string, text: string) {\n    color = color.slice(3);\n    this.passwordScoreColor.emit({ color: color, text: text });\n  }\n}\n","<form #form (ngSubmit)=\"submit()\" [appApiAction]=\"formPromise\" [formGroup]=\"formGroup\">\n  <header>\n    <div class=\"left\">\n      <button type=\"button\" routerLink=\"/home\">{{ \"cancel\" | i18n }}</button>\n    </div>\n    <h1 class=\"center\">\n      <span class=\"title\">{{ \"createAccount\" | i18n }}</span>\n    </h1>\n    <div class=\"right\">\n      <button type=\"submit\" [disabled]=\"form.loading\">\n        <span [hidden]=\"form.loading\">{{ \"submit\" | i18n }}</span>\n        <i class=\"bwi bwi-spinner bwi-lg bwi-spin\" [hidden]=\"!form.loading\" aria-hidden=\"true\"></i>\n      </button>\n    </div>\n  </header>\n  <main tabindex=\"-1\">\n    <div class=\"box\">\n      <div class=\"box-content\">\n        <div class=\"box-content-row\" appBoxRow>\n          <label for=\"email\">{{ \"emailAddress\" | i18n }}</label>\n          <input id=\"email\" type=\"email\" formControlName=\"email\" appInputVerbatim=\"false\" />\n        </div>\n        <div class=\"box-content-row\" appBoxRow>\n          <div class=\"box-content-row-flex\">\n            <div class=\"row-main\">\n              <label for=\"masterPassword\">\n                {{ \"masterPass\" | i18n }}\n                <strong class=\"sub-label text-{{ color }}\" *ngIf=\"text\">\n                  {{ text }}\n                </strong>\n              </label>\n              <input\n                id=\"masterPassword\"\n                type=\"{{ showPassword ? 'text' : 'password' }}\"\n                aria-describedby=\"masterPasswordHelp\"\n                class=\"monospaced\"\n                formControlName=\"masterPassword\"\n                appInputVerbatim\n              />\n            </div>\n            <div class=\"action-buttons\">\n              <button\n                type=\"button\"\n                class=\"row-btn\"\n                appStopClick\n                appA11yTitle=\"{{ 'toggleVisibility' | i18n }}\"\n                (click)=\"togglePassword()\"\n                [attr.aria-pressed]=\"showPassword\"\n              >\n                <i\n                  class=\"bwi bwi-lg\"\n                  aria-hidden=\"true\"\n                  [ngClass]=\"{ 'bwi-eye': !showPassword, 'bwi-eye-slash': showPassword }\"\n                ></i>\n              </button>\n            </div>\n          </div>\n          <app-password-strength\n            [password]=\"formGroup.get('masterPassword')?.value\"\n            [email]=\"formGroup.get('email')?.value\"\n            [name]=\"formGroup.get('name')?.value\"\n            (passwordStrengthResult)=\"getStrengthResult($event)\"\n            (passwordScoreColor)=\"getPasswordScoreText($event)\"\n          >\n          </app-password-strength>\n        </div>\n      </div>\n      <div id=\"masterPasswordHelp\" class=\"box-footer\">\n        <b>{{ \"important\" | i18n }}</b> {{ \"masterPasswordHint\" | i18n }}\n        {{ characterMinimumMessage }}\n      </div>\n    </div>\n    <div class=\"box\">\n      <div class=\"box-content\">\n        <div class=\"box-content-row box-content-row-flex\" appBoxRow>\n          <div class=\"row-main\">\n            <label for=\"masterPasswordRetype\">{{ \"reTypeMasterPass\" | i18n }}</label>\n            <input\n              id=\"masterPasswordRetype\"\n              type=\"{{ showPassword ? 'text' : 'password' }}\"\n              class=\"monospaced\"\n              formControlName=\"confirmMasterPassword\"\n              appInputVerbatim\n            />\n          </div>\n          <div class=\"action-buttons\">\n            <button\n              type=\"button\"\n              class=\"row-btn\"\n              appStopClick\n              appA11yTitle=\"{{ 'toggleVisibility' | i18n }}\"\n              (click)=\"togglePassword()\"\n              [attr.aria-pressed]=\"showPassword\"\n            >\n              <i\n                class=\"bwi bwi-lg\"\n                aria-hidden=\"true\"\n                [ngClass]=\"{ 'bwi-eye': !showPassword, 'bwi-eye-slash': showPassword }\"\n              ></i>\n            </button>\n          </div>\n        </div>\n        <div class=\"box-content-row\" appBoxRow>\n          <label for=\"hint\">{{ \"masterPassHint\" | i18n }}</label>\n          <input id=\"hint\" type=\"text\" aria-describedby=\"hintHelp\" formControlName=\"hint\" />\n        </div>\n      </div>\n      <div id=\"hintHelp\" class=\"box-footer\">\n        {{ \"masterPassHintDesc\" | i18n }}\n      </div>\n      <div class=\"box-content row-top-padding\">\n        <div\n          class=\"box-content-row box-content-row-checkbox box-content-row-checkbox-left box-content-row-word-break\"\n          appBoxRow\n        >\n          <input type=\"checkbox\" id=\"checkForBreaches\" formControlName=\"checkForBreaches\" />\n          <label for=\"checkForBreaches\">\n            {{ \"checkForBreaches\" | i18n }}\n          </label>\n        </div>\n      </div>\n    </div>\n    <div [hidden]=\"!showCaptcha()\"><iframe id=\"hcaptcha_iframe\" height=\"80\"></iframe></div>\n    <div class=\"box last\" *ngIf=\"showTerms\">\n      <div class=\"box-content\">\n        <div\n          class=\"box-content-row box-content-row-checkbox box-content-row-checkbox-left box-content-row-word-break\"\n          appBoxRow\n        >\n          <input type=\"checkbox\" id=\"acceptPolicies\" formControlName=\"acceptPolicies\" />\n          <label for=\"acceptPolicies\">\n            {{ \"acceptPolicies\" | i18n }}<br />\n            <a href=\"https://bitwarden.com/terms/\" target=\"_blank\" rel=\"noopener\">{{\n              \"termsOfService\" | i18n\n            }}</a\n            >,\n            <a href=\"https://bitwarden.com/privacy/\" target=\"_blank\" rel=\"noopener\">{{\n              \"privacyPolicy\" | i18n\n            }}</a>\n          </label>\n        </div>\n      </div>\n    </div>\n  </main>\n</form>\n","import { Component } from \"@angular/core\";\nimport { UntypedFormBuilder } from \"@angular/forms\";\nimport { Router } from \"@angular/router\";\n\nimport { RegisterComponent as BaseRegisterComponent } from \"@bitwarden/angular/components/register.component\";\nimport { ApiService } from \"@bitwarden/common/abstractions/api.service\";\nimport { AuditService } from \"@bitwarden/common/abstractions/audit.service\";\nimport { AuthService } from \"@bitwarden/common/abstractions/auth.service\";\nimport { CryptoService } from \"@bitwarden/common/abstractions/crypto.service\";\nimport { EnvironmentService } from \"@bitwarden/common/abstractions/environment.service\";\nimport { FormValidationErrorsService } from \"@bitwarden/common/abstractions/formValidationErrors.service\";\nimport { I18nService } from \"@bitwarden/common/abstractions/i18n.service\";\nimport { LogService } from \"@bitwarden/common/abstractions/log.service\";\nimport { PasswordGenerationService } from \"@bitwarden/common/abstractions/passwordGeneration.service\";\nimport { PlatformUtilsService } from \"@bitwarden/common/abstractions/platformUtils.service\";\nimport { StateService } from \"@bitwarden/common/abstractions/state.service\";\n\n@Component({\n  selector: \"app-register\",\n  templateUrl: \"register.component.html\",\n})\nexport class RegisterComponent extends BaseRegisterComponent {\n  color: string;\n  text: string;\n\n  constructor(\n    formValidationErrorService: FormValidationErrorsService,\n    formBuilder: UntypedFormBuilder,\n    authService: AuthService,\n    router: Router,\n    i18nService: I18nService,\n    cryptoService: CryptoService,\n    apiService: ApiService,\n    stateService: StateService,\n    platformUtilsService: PlatformUtilsService,\n    passwordGenerationService: PasswordGenerationService,\n    environmentService: EnvironmentService,\n    logService: LogService,\n    auditService: AuditService\n  ) {\n    super(\n      formValidationErrorService,\n      formBuilder,\n      authService,\n      router,\n      i18nService,\n      cryptoService,\n      apiService,\n      stateService,\n      platformUtilsService,\n      passwordGenerationService,\n      environmentService,\n      logService,\n      auditService\n    );\n  }\n}\n","import { OrganizationApiKeyType } from \"../../enums/organizationApiKeyType\";\nimport { ImportDirectoryRequest } from \"../../models/request/import-directory.request\";\nimport { OrganizationApiKeyRequest } from \"../../models/request/organization-api-key.request\";\nimport { OrganizationCreateRequest } from \"../../models/request/organization-create.request\";\nimport { OrganizationKeysRequest } from \"../../models/request/organization-keys.request\";\nimport { OrganizationSubscriptionUpdateRequest } from \"../../models/request/organization-subscription-update.request\";\nimport { OrganizationTaxInfoUpdateRequest } from \"../../models/request/organization-tax-info-update.request\";\nimport { OrganizationUpdateRequest } from \"../../models/request/organization-update.request\";\nimport { OrganizationUpgradeRequest } from \"../../models/request/organization-upgrade.request\";\nimport { OrganizationSsoRequest } from \"../../models/request/organization/organization-sso.request\";\nimport { PaymentRequest } from \"../../models/request/payment.request\";\nimport { SeatRequest } from \"../../models/request/seat.request\";\nimport { SecretVerificationRequest } from \"../../models/request/secret-verification.request\";\nimport { StorageRequest } from \"../../models/request/storage.request\";\nimport { VerifyBankRequest } from \"../../models/request/verify-bank.request\";\nimport { ApiKeyResponse } from \"../../models/response/api-key.response\";\nimport { BillingResponse } from \"../../models/response/billing.response\";\nimport { ListResponse } from \"../../models/response/list.response\";\nimport { OrganizationApiKeyInformationResponse } from \"../../models/response/organization-api-key-information.response\";\nimport { OrganizationAutoEnrollStatusResponse } from \"../../models/response/organization-auto-enroll-status.response\";\nimport { OrganizationKeysResponse } from \"../../models/response/organization-keys.response\";\nimport { OrganizationSubscriptionResponse } from \"../../models/response/organization-subscription.response\";\nimport { OrganizationResponse } from \"../../models/response/organization.response\";\nimport { OrganizationSsoResponse } from \"../../models/response/organization/organization-sso.response\";\nimport { PaymentResponse } from \"../../models/response/payment.response\";\nimport { TaxInfoResponse } from \"../../models/response/tax-info.response\";\n\nexport class OrganizationApiServiceAbstraction {\n  get: (id: string) => Promise<OrganizationResponse>;\n  getBilling: (id: string) => Promise<BillingResponse>;\n  getSubscription: (id: string) => Promise<OrganizationSubscriptionResponse>;\n  getLicense: (id: string, installationId: string) => Promise<unknown>;\n  getAutoEnrollStatus: (identifier: string) => Promise<OrganizationAutoEnrollStatusResponse>;\n  create: (request: OrganizationCreateRequest) => Promise<OrganizationResponse>;\n  createLicense: (data: FormData) => Promise<OrganizationResponse>;\n  save: (id: string, request: OrganizationUpdateRequest) => Promise<OrganizationResponse>;\n  updatePayment: (id: string, request: PaymentRequest) => Promise<void>;\n  upgrade: (id: string, request: OrganizationUpgradeRequest) => Promise<PaymentResponse>;\n  updateSubscription: (id: string, request: OrganizationSubscriptionUpdateRequest) => Promise<void>;\n  updateSeats: (id: string, request: SeatRequest) => Promise<PaymentResponse>;\n  updateStorage: (id: string, request: StorageRequest) => Promise<PaymentResponse>;\n  verifyBank: (id: string, request: VerifyBankRequest) => Promise<void>;\n  cancel: (id: string) => Promise<void>;\n  reinstate: (id: string) => Promise<void>;\n  leave: (id: string) => Promise<void>;\n  delete: (id: string, request: SecretVerificationRequest) => Promise<void>;\n  updateLicense: (id: string, data: FormData) => Promise<void>;\n  importDirectory: (organizationId: string, request: ImportDirectoryRequest) => Promise<void>;\n  getOrCreateApiKey: (id: string, request: OrganizationApiKeyRequest) => Promise<ApiKeyResponse>;\n  getApiKeyInformation: (\n    id: string,\n    organizationApiKeyType?: OrganizationApiKeyType\n  ) => Promise<ListResponse<OrganizationApiKeyInformationResponse>>;\n  rotateApiKey: (id: string, request: OrganizationApiKeyRequest) => Promise<ApiKeyResponse>;\n  getTaxInfo: (id: string) => Promise<TaxInfoResponse>;\n  updateTaxInfo: (id: string, request: OrganizationTaxInfoUpdateRequest) => Promise<void>;\n  getKeys: (id: string) => Promise<OrganizationKeysResponse>;\n  updateKeys: (id: string, request: OrganizationKeysRequest) => Promise<OrganizationKeysResponse>;\n  getSso: (id: string) => Promise<OrganizationSsoResponse>;\n  updateSso: (id: string, request: OrganizationSsoRequest) => Promise<OrganizationSsoResponse>;\n  selfHostedSyncLicense: (id: string) => Promise<void>;\n}\n","import { Directive, OnInit } from \"@angular/core\";\nimport { Router } from \"@angular/router\";\n\nimport { I18nService } from \"@bitwarden/common/abstractions/i18n.service\";\nimport { KeyConnectorService } from \"@bitwarden/common/abstractions/keyConnector.service\";\nimport { OrganizationApiServiceAbstraction } from \"@bitwarden/common/abstractions/organization/organization-api.service.abstraction\";\nimport { PlatformUtilsService } from \"@bitwarden/common/abstractions/platformUtils.service\";\nimport { StateService } from \"@bitwarden/common/abstractions/state.service\";\nimport { Organization } from \"@bitwarden/common/models/domain/organization\";\nimport { SyncService } from \"@bitwarden/common/vault/abstractions/sync/sync.service.abstraction\";\n\n@Directive()\nexport class RemovePasswordComponent implements OnInit {\n  actionPromise: Promise<void | boolean>;\n  continuing = false;\n  leaving = false;\n\n  loading = true;\n  organization: Organization;\n  email: string;\n\n  constructor(\n    private router: Router,\n    private stateService: StateService,\n    private syncService: SyncService,\n    private platformUtilsService: PlatformUtilsService,\n    private i18nService: I18nService,\n    private keyConnectorService: KeyConnectorService,\n    private organizationApiService: OrganizationApiServiceAbstraction\n  ) {}\n\n  async ngOnInit() {\n    this.organization = await this.keyConnectorService.getManagingOrganization();\n    this.email = await this.stateService.getEmail();\n    await this.syncService.fullSync(false);\n    this.loading = false;\n  }\n\n  async convert() {\n    this.continuing = true;\n    this.actionPromise = this.keyConnectorService.migrateUser();\n\n    try {\n      await this.actionPromise;\n      this.platformUtilsService.showToast(\n        \"success\",\n        null,\n        this.i18nService.t(\"removedMasterPassword\")\n      );\n      await this.keyConnectorService.removeConvertAccountRequired();\n      this.router.navigate([\"\"]);\n    } catch (e) {\n      this.platformUtilsService.showToast(\"error\", this.i18nService.t(\"errorOccurred\"), e.message);\n    }\n  }\n\n  async leave() {\n    const confirmed = await this.platformUtilsService.showDialog(\n      this.i18nService.t(\"leaveOrganizationConfirmation\"),\n      this.organization.name,\n      this.i18nService.t(\"yes\"),\n      this.i18nService.t(\"no\"),\n      \"warning\"\n    );\n    if (!confirmed) {\n      return false;\n    }\n\n    try {\n      this.leaving = true;\n      this.actionPromise = this.organizationApiService.leave(this.organization.id);\n      await this.actionPromise;\n      this.platformUtilsService.showToast(\"success\", null, this.i18nService.t(\"leftOrganization\"));\n      await this.keyConnectorService.removeConvertAccountRequired();\n      this.router.navigate([\"\"]);\n    } catch (e) {\n      this.platformUtilsService.showToast(\"error\", this.i18nService.t(\"errorOccurred\"), e);\n    }\n  }\n}\n","<header>\n  <div class=\"left\"></div>\n  <div class=\"center\">\n    <span class=\"title\">{{ \"removeMasterPassword\" | i18n }}</span>\n  </div>\n  <div class=\"right\"></div>\n</header>\n\n<main tabindex=\"-1\">\n  <div class=\"box\">\n    <div class=\"box-content\">\n      <div class=\"box-content-row\" appBoxRow>\n        <p>{{ \"convertOrganizationEncryptionDesc\" | i18n: organization.name }}</p>\n      </div>\n      <div class=\"box-content-row\">\n        <button\n          type=\"button\"\n          class=\"btn block primary\"\n          (click)=\"convert()\"\n          [disabled]=\"actionPromise\"\n        >\n          <i\n            class=\"bwi bwi-spinner bwi-spin\"\n            title=\"{{ 'loading' | i18n }}\"\n            aria-hidden=\"true\"\n            *ngIf=\"continuing\"\n          ></i>\n          {{ \"removeMasterPassword\" | i18n }}\n        </button>\n      </div>\n      <div class=\"box-content-row\">\n        <button\n          type=\"button\"\n          class=\"btn btn-outline-secondary block\"\n          (click)=\"leave()\"\n          [disabled]=\"actionPromise\"\n        >\n          <i\n            class=\"bwi bwi-spinner bwi-spin\"\n            title=\"{{ 'loading' | i18n }}\"\n            aria-hidden=\"true\"\n            *ngIf=\"leaving\"\n          ></i>\n          {{ \"leaveOrganization\" | i18n }}\n        </button>\n      </div>\n    </div>\n  </div>\n</main>\n","import { Component } from \"@angular/core\";\n\nimport { RemovePasswordComponent as BaseRemovePasswordComponent } from \"@bitwarden/angular/components/remove-password.component\";\n\n@Component({\n  selector: \"app-remove-password\",\n  templateUrl: \"remove-password.component.html\",\n})\nexport class RemovePasswordComponent extends BaseRemovePasswordComponent {}\n","import { SecretVerificationRequest } from \"../../../models/request/secret-verification.request\";\n\nexport class OrganizationUserResetPasswordEnrollmentRequest extends SecretVerificationRequest {\n  resetPasswordKey: string;\n}\n","import { KdfType } from \"../../enums/kdfType\";\n\nimport { KeysRequest } from \"./keys.request\";\n\nexport class SetPasswordRequest {\n  masterPasswordHash: string;\n  key: string;\n  masterPasswordHint: string;\n  keys: KeysRequest;\n  kdf: KdfType;\n  kdfIterations: number;\n  kdfMemory?: number;\n  kdfParallelism?: number;\n  orgIdentifier: string;\n\n  constructor(\n    masterPasswordHash: string,\n    key: string,\n    masterPasswordHint: string,\n    orgIdentifier: string,\n    keys: KeysRequest,\n    kdf: KdfType,\n    kdfIterations: number,\n    kdfMemory?: number,\n    kdfParallelism?: number\n  ) {\n    this.masterPasswordHash = masterPasswordHash;\n    this.key = key;\n    this.masterPasswordHint = masterPasswordHint;\n    this.kdf = kdf;\n    this.kdfIterations = kdfIterations;\n    this.kdfMemory = kdfMemory;\n    this.kdfParallelism = kdfParallelism;\n    this.orgIdentifier = orgIdentifier;\n    this.keys = keys;\n  }\n}\n","import { Directive, OnDestroy, OnInit } from \"@angular/core\";\nimport { Subject, takeUntil } from \"rxjs\";\n\nimport { CryptoService } from \"@bitwarden/common/abstractions/crypto.service\";\nimport { I18nService } from \"@bitwarden/common/abstractions/i18n.service\";\nimport { MessagingService } from \"@bitwarden/common/abstractions/messaging.service\";\nimport { PasswordGenerationService } from \"@bitwarden/common/abstractions/passwordGeneration.service\";\nimport { PlatformUtilsService } from \"@bitwarden/common/abstractions/platformUtils.service\";\nimport { PolicyService } from \"@bitwarden/common/abstractions/policy/policy.service.abstraction\";\nimport { StateService } from \"@bitwarden/common/abstractions/state.service\";\nimport { KdfType } from \"@bitwarden/common/enums/kdfType\";\nimport { EncString } from \"@bitwarden/common/models/domain/enc-string\";\nimport { KdfConfig } from \"@bitwarden/common/models/domain/kdf-config\";\nimport { MasterPasswordPolicyOptions } from \"@bitwarden/common/models/domain/master-password-policy-options\";\nimport { SymmetricCryptoKey } from \"@bitwarden/common/models/domain/symmetric-crypto-key\";\n\nimport { PasswordColorText } from \"../shared/components/password-strength/password-strength.component\";\n\n@Directive()\nexport class ChangePasswordComponent implements OnInit, OnDestroy {\n  masterPassword: string;\n  masterPasswordRetype: string;\n  formPromise: Promise<any>;\n  enforcedPolicyOptions: MasterPasswordPolicyOptions;\n  passwordStrengthResult: any;\n  color: string;\n  text: string;\n\n  protected email: string;\n  protected kdf: KdfType;\n  protected kdfConfig: KdfConfig;\n\n  protected destroy$ = new Subject<void>();\n\n  constructor(\n    protected i18nService: I18nService,\n    protected cryptoService: CryptoService,\n    protected messagingService: MessagingService,\n    protected passwordGenerationService: PasswordGenerationService,\n    protected platformUtilsService: PlatformUtilsService,\n    protected policyService: PolicyService,\n    protected stateService: StateService\n  ) {}\n\n  async ngOnInit() {\n    this.email = await this.stateService.getEmail();\n    this.policyService\n      .masterPasswordPolicyOptions$()\n      .pipe(takeUntil(this.destroy$))\n      .subscribe(\n        (enforcedPasswordPolicyOptions) =>\n          (this.enforcedPolicyOptions ??= enforcedPasswordPolicyOptions)\n      );\n  }\n\n  ngOnDestroy(): void {\n    this.destroy$.next();\n    this.destroy$.complete();\n  }\n\n  async submit() {\n    if (!(await this.strongPassword())) {\n      return;\n    }\n\n    if (!(await this.setupSubmitActions())) {\n      return;\n    }\n\n    const email = await this.stateService.getEmail();\n    if (this.kdf == null) {\n      this.kdf = await this.stateService.getKdfType();\n    }\n    if (this.kdfConfig == null) {\n      this.kdfConfig = await this.stateService.getKdfConfig();\n    }\n    const key = await this.cryptoService.makeKey(\n      this.masterPassword,\n      email.trim().toLowerCase(),\n      this.kdf,\n      this.kdfConfig\n    );\n    const masterPasswordHash = await this.cryptoService.hashPassword(this.masterPassword, key);\n\n    let encKey: [SymmetricCryptoKey, EncString] = null;\n    const existingEncKey = await this.cryptoService.getEncKey();\n    if (existingEncKey == null) {\n      encKey = await this.cryptoService.makeEncKey(key);\n    } else {\n      encKey = await this.cryptoService.remakeEncKey(key);\n    }\n\n    await this.performSubmitActions(masterPasswordHash, key, encKey);\n  }\n\n  async setupSubmitActions(): Promise<boolean> {\n    // Override in sub-class\n    // Can be used for additional validation and/or other processes the should occur before changing passwords\n    return true;\n  }\n\n  async performSubmitActions(\n    masterPasswordHash: string,\n    key: SymmetricCryptoKey,\n    encKey: [SymmetricCryptoKey, EncString]\n  ) {\n    // Override in sub-class\n  }\n\n  async strongPassword(): Promise<boolean> {\n    if (this.masterPassword == null || this.masterPassword === \"\") {\n      this.platformUtilsService.showToast(\n        \"error\",\n        this.i18nService.t(\"errorOccurred\"),\n        this.i18nService.t(\"masterPasswordRequired\")\n      );\n      return false;\n    }\n    if (this.masterPassword.length < 8) {\n      this.platformUtilsService.showToast(\n        \"error\",\n        this.i18nService.t(\"errorOccurred\"),\n        this.i18nService.t(\"masterPasswordMinlength\")\n      );\n      return false;\n    }\n    if (this.masterPassword !== this.masterPasswordRetype) {\n      this.platformUtilsService.showToast(\n        \"error\",\n        this.i18nService.t(\"errorOccurred\"),\n        this.i18nService.t(\"masterPassDoesntMatch\")\n      );\n      return false;\n    }\n\n    const strengthResult = this.passwordStrengthResult;\n\n    if (\n      this.enforcedPolicyOptions != null &&\n      !this.policyService.evaluateMasterPassword(\n        strengthResult.score,\n        this.masterPassword,\n        this.enforcedPolicyOptions\n      )\n    ) {\n      this.platformUtilsService.showToast(\n        \"error\",\n        this.i18nService.t(\"errorOccurred\"),\n        this.i18nService.t(\"masterPasswordPolicyRequirementsNotMet\")\n      );\n      return false;\n    }\n\n    if (strengthResult != null && strengthResult.score < 3) {\n      const result = await this.platformUtilsService.showDialog(\n        this.i18nService.t(\"weakMasterPasswordDesc\"),\n        this.i18nService.t(\"weakMasterPassword\"),\n        this.i18nService.t(\"yes\"),\n        this.i18nService.t(\"no\"),\n        \"warning\"\n      );\n      if (!result) {\n        return false;\n      }\n    }\n\n    return true;\n  }\n\n  async logOut() {\n    const confirmed = await this.platformUtilsService.showDialog(\n      this.i18nService.t(\"logOutConfirmation\"),\n      this.i18nService.t(\"logOut\"),\n      this.i18nService.t(\"logOut\"),\n      this.i18nService.t(\"cancel\")\n    );\n    if (confirmed) {\n      this.messagingService.send(\"logout\");\n    }\n  }\n\n  getStrengthResult(result: any) {\n    this.passwordStrengthResult = result;\n  }\n\n  getPasswordScoreText(event: PasswordColorText) {\n    this.color = event.color;\n    this.text = event.text;\n  }\n}\n","import { PolicyType } from \"../../enums/policyType\";\nimport { MasterPasswordPolicyOptions } from \"../../models/domain/master-password-policy-options\";\nimport { PolicyRequest } from \"../../models/request/policy.request\";\nimport { ListResponse } from \"../../models/response/list.response\";\nimport { PolicyResponse } from \"../../models/response/policy.response\";\n\nexport class PolicyApiServiceAbstraction {\n  getPolicy: (organizationId: string, type: PolicyType) => Promise<PolicyResponse>;\n  getPolicies: (organizationId: string) => Promise<ListResponse<PolicyResponse>>;\n  getPoliciesByToken: (\n    organizationId: string,\n    token: string,\n    email: string,\n    organizationUserId: string\n  ) => Promise<ListResponse<PolicyResponse>>;\n  getPoliciesByInvitedUser: (\n    organizationId: string,\n    userId: string\n  ) => Promise<ListResponse<PolicyResponse>>;\n  getMasterPasswordPoliciesForInvitedUsers: (orgId: string) => Promise<MasterPasswordPolicyOptions>;\n  putPolicy: (organizationId: string, type: PolicyType, request: PolicyRequest) => Promise<any>;\n}\n","import { ListResponse } from \"../../models/response/list.response\";\n\nimport {\n  OrganizationUserAcceptRequest,\n  OrganizationUserBulkConfirmRequest,\n  OrganizationUserConfirmRequest,\n  OrganizationUserInviteRequest,\n  OrganizationUserResetPasswordEnrollmentRequest,\n  OrganizationUserResetPasswordRequest,\n  OrganizationUserUpdateGroupsRequest,\n  OrganizationUserUpdateRequest,\n} from \"./requests\";\nimport {\n  OrganizationUserBulkPublicKeyResponse,\n  OrganizationUserBulkResponse,\n  OrganizationUserDetailsResponse,\n  OrganizationUserResetPasswordDetailsReponse,\n  OrganizationUserUserDetailsResponse,\n} from \"./responses\";\n\n/**\n * Service for interacting with Organization Users via the API\n */\nexport abstract class OrganizationUserService {\n  /**\n   * Retrieve a single organization user by Id\n   * @param organizationId - Identifier for the user's organization\n   * @param id - Organization user identifier\n   * @param options - Options for the request\n   */\n  abstract getOrganizationUser(\n    organizationId: string,\n    id: string,\n    options?: {\n      includeGroups?: boolean;\n    }\n  ): Promise<OrganizationUserDetailsResponse>;\n\n  /**\n   * Retrieve a list of groups Ids the specified organization user belongs to\n   * @param organizationId - Identifier for the user's organization\n   * @param id - Organization user identifier\n   */\n  abstract getOrganizationUserGroups(organizationId: string, id: string): Promise<string[]>;\n\n  /**\n   * Retrieve a list of all users that belong to the specified organization\n   * @param organizationId - Identifier for the organization\n   * @param options - Options for the request\n   */\n  abstract getAllUsers(\n    organizationId: string,\n    options?: {\n      includeCollections?: boolean;\n      includeGroups?: boolean;\n    }\n  ): Promise<ListResponse<OrganizationUserUserDetailsResponse>>;\n\n  /**\n   * Retrieve reset password details for the specified organization user\n   * @param organizationId - Identifier for the user's organization\n   * @param id - Organization user identifier\n   */\n  abstract getOrganizationUserResetPasswordDetails(\n    organizationId: string,\n    id: string\n  ): Promise<OrganizationUserResetPasswordDetailsReponse>;\n\n  /**\n   * Create new organization user invite(s) for the specified organization\n   * @param organizationId - Identifier for the organization\n   * @param request - New user invitation request details\n   */\n  abstract postOrganizationUserInvite(\n    organizationId: string,\n    request: OrganizationUserInviteRequest\n  ): Promise<void>;\n\n  /**\n   * Re-invite the specified organization user\n   * @param organizationId - Identifier for the user's organization\n   * @param id - Organization user identifier\n   */\n  abstract postOrganizationUserReinvite(organizationId: string, id: string): Promise<any>;\n\n  /**\n   * Re-invite many organization users for the specified organization\n   * @param organizationId - Identifier for the organization\n   * @param ids - A list of organization user identifiers\n   * @return List of user ids, including both those that were successfully re-invited and those that had an error\n   */\n  abstract postManyOrganizationUserReinvite(\n    organizationId: string,\n    ids: string[]\n  ): Promise<ListResponse<OrganizationUserBulkResponse>>;\n\n  /**\n   * Accept an organization user invitation\n   * @param organizationId - Identifier for the organization to accept\n   * @param id - Organization user identifier\n   * @param request - Request details for accepting the invitation\n   */\n  abstract postOrganizationUserAccept(\n    organizationId: string,\n    id: string,\n    request: OrganizationUserAcceptRequest\n  ): Promise<void>;\n\n  /**\n   * Confirm an organization user that has accepted their invitation\n   * @param organizationId - Identifier for the organization to confirm\n   * @param id - Organization user identifier\n   * @param request - Request details for confirming the user\n   */\n  abstract postOrganizationUserConfirm(\n    organizationId: string,\n    id: string,\n    request: OrganizationUserConfirmRequest\n  ): Promise<void>;\n\n  /**\n   * Retrieve a list of the specified users' public keys\n   * @param organizationId - Identifier for the organization to accept\n   * @param ids - A list of organization user identifiers to retrieve public keys for\n   */\n  abstract postOrganizationUsersPublicKey(\n    organizationId: string,\n    ids: string[]\n  ): Promise<ListResponse<OrganizationUserBulkPublicKeyResponse>>;\n\n  /**\n   * Confirm many organization users that have accepted their invitations\n   * @param organizationId - Identifier for the organization to confirm users\n   * @param request - Bulk request details for confirming the user\n   */\n  abstract postOrganizationUserBulkConfirm(\n    organizationId: string,\n    request: OrganizationUserBulkConfirmRequest\n  ): Promise<ListResponse<OrganizationUserBulkResponse>>;\n\n  /**\n   * Update an organization users\n   * @param organizationId - Identifier for the organization the user belongs to\n   * @param id - Organization user identifier\n   * @param request - Request details for updating the user\n   */\n  abstract putOrganizationUser(\n    organizationId: string,\n    id: string,\n    request: OrganizationUserUpdateRequest\n  ): Promise<void>;\n\n  /**\n   * Update an organization user's groups\n   * @param organizationId - Identifier for the organization the user belongs to\n   * @param id - Organization user identifier\n   * @param groupIds - List of group ids to associate the user with\n   */\n  abstract putOrganizationUserGroups(\n    organizationId: string,\n    id: string,\n    groupIds: OrganizationUserUpdateGroupsRequest\n  ): Promise<void>;\n\n  /**\n   * Update an organization user's reset password enrollment\n   * @param organizationId - Identifier for the organization the user belongs to\n   * @param userId - Organization user identifier\n   * @param request - Reset password enrollment details\n   */\n  abstract putOrganizationUserResetPasswordEnrollment(\n    organizationId: string,\n    userId: string,\n    request: OrganizationUserResetPasswordEnrollmentRequest\n  ): Promise<void>;\n\n  /**\n   * Reset an organization user's password\n   * @param organizationId - Identifier for the organization the user belongs to\n   * @param id - Organization user identifier\n   * @param request - Reset password details\n   */\n  abstract putOrganizationUserResetPassword(\n    organizationId: string,\n    id: string,\n    request: OrganizationUserResetPasswordRequest\n  ): Promise<void>;\n\n  /**\n   * Delete an organization user\n   * @param organizationId - Identifier for the organization the user belongs to\n   * @param id - Organization user identifier\n   */\n  abstract deleteOrganizationUser(organizationId: string, id: string): Promise<void>;\n\n  /**\n   * Delete many organization users\n   * @param organizationId - Identifier for the organization the users belongs to\n   * @param ids - List of organization user identifiers to delete\n   * @return List of user ids, including both those that were successfully deleted and those that had an error\n   */\n  abstract deleteManyOrganizationUsers(\n    organizationId: string,\n    ids: string[]\n  ): Promise<ListResponse<OrganizationUserBulkResponse>>;\n\n  /**\n   * Revoke an organization user's access to the organization\n   * @param organizationId - Identifier for the organization the user belongs to\n   * @param id - Organization user identifier\n   */\n  abstract revokeOrganizationUser(organizationId: string, id: string): Promise<void>;\n\n  /**\n   * Revoke many organization users' access to the organization\n   * @param organizationId - Identifier for the organization the users belongs to\n   * @param ids - List of organization user identifiers to revoke\n   * @return List of user ids, including both those that were successfully revoked and those that had an error\n   */\n  abstract revokeManyOrganizationUsers(\n    organizationId: string,\n    ids: string[]\n  ): Promise<ListResponse<OrganizationUserBulkResponse>>;\n\n  /**\n   * Restore an organization user's access to the organization\n   * @param organizationId - Identifier for the organization the user belongs to\n   * @param id - Organization user identifier\n   */\n  abstract restoreOrganizationUser(organizationId: string, id: string): Promise<void>;\n\n  /**\n   * Restore many organization users' access to the organization\n   * @param organizationId - Identifier for the organization the users belongs to\n   * @param ids - List of organization user identifiers to restore\n   * @return List of user ids, including both those that were successfully restored and those that had an error\n   */\n  abstract restoreManyOrganizationUsers(\n    organizationId: string,\n    ids: string[]\n  ): Promise<ListResponse<OrganizationUserBulkResponse>>;\n}\n","import { Directive } from \"@angular/core\";\nimport { ActivatedRoute, Router } from \"@angular/router\";\nimport { first } from \"rxjs/operators\";\n\nimport { ApiService } from \"@bitwarden/common/abstractions/api.service\";\nimport { CryptoService } from \"@bitwarden/common/abstractions/crypto.service\";\nimport { I18nService } from \"@bitwarden/common/abstractions/i18n.service\";\nimport { MessagingService } from \"@bitwarden/common/abstractions/messaging.service\";\nimport { OrganizationUserService } from \"@bitwarden/common/abstractions/organization-user/organization-user.service\";\nimport { OrganizationUserResetPasswordEnrollmentRequest } from \"@bitwarden/common/abstractions/organization-user/requests\";\nimport { OrganizationApiServiceAbstraction } from \"@bitwarden/common/abstractions/organization/organization-api.service.abstraction\";\nimport { PasswordGenerationService } from \"@bitwarden/common/abstractions/passwordGeneration.service\";\nimport { PlatformUtilsService } from \"@bitwarden/common/abstractions/platformUtils.service\";\nimport { PolicyApiServiceAbstraction } from \"@bitwarden/common/abstractions/policy/policy-api.service.abstraction\";\nimport { PolicyService } from \"@bitwarden/common/abstractions/policy/policy.service.abstraction\";\nimport { StateService } from \"@bitwarden/common/abstractions/state.service\";\nimport { HashPurpose } from \"@bitwarden/common/enums/hashPurpose\";\nimport { DEFAULT_KDF_TYPE, DEFAULT_KDF_CONFIG } from \"@bitwarden/common/enums/kdfType\";\nimport { Utils } from \"@bitwarden/common/misc/utils\";\nimport { EncString } from \"@bitwarden/common/models/domain/enc-string\";\nimport { SymmetricCryptoKey } from \"@bitwarden/common/models/domain/symmetric-crypto-key\";\nimport { KeysRequest } from \"@bitwarden/common/models/request/keys.request\";\nimport { SetPasswordRequest } from \"@bitwarden/common/models/request/set-password.request\";\nimport { SyncService } from \"@bitwarden/common/vault/abstractions/sync/sync.service.abstraction\";\n\nimport { ChangePasswordComponent as BaseChangePasswordComponent } from \"./change-password.component\";\n\n@Directive()\nexport class SetPasswordComponent extends BaseChangePasswordComponent {\n  syncLoading = true;\n  showPassword = false;\n  hint = \"\";\n  identifier: string = null;\n  orgId: string;\n  resetPasswordAutoEnroll = false;\n\n  onSuccessfulChangePassword: () => Promise<void>;\n  successRoute = \"vault\";\n\n  constructor(\n    i18nService: I18nService,\n    cryptoService: CryptoService,\n    messagingService: MessagingService,\n    passwordGenerationService: PasswordGenerationService,\n    platformUtilsService: PlatformUtilsService,\n    private policyApiService: PolicyApiServiceAbstraction,\n    policyService: PolicyService,\n    protected router: Router,\n    private apiService: ApiService,\n    private syncService: SyncService,\n    private route: ActivatedRoute,\n    stateService: StateService,\n    private organizationApiService: OrganizationApiServiceAbstraction,\n    private organizationUserService: OrganizationUserService\n  ) {\n    super(\n      i18nService,\n      cryptoService,\n      messagingService,\n      passwordGenerationService,\n      platformUtilsService,\n      policyService,\n      stateService\n    );\n  }\n\n  async ngOnInit() {\n    await this.syncService.fullSync(true);\n    this.syncLoading = false;\n\n    // eslint-disable-next-line rxjs/no-async-subscribe\n    this.route.queryParams.pipe(first()).subscribe(async (qParams) => {\n      if (qParams.identifier != null) {\n        this.identifier = qParams.identifier;\n      }\n    });\n\n    // Automatic Enrollment Detection\n    if (this.identifier != null) {\n      try {\n        const response = await this.organizationApiService.getAutoEnrollStatus(this.identifier);\n        this.orgId = response.id;\n        this.resetPasswordAutoEnroll = response.resetPasswordEnabled;\n        this.enforcedPolicyOptions =\n          await this.policyApiService.getMasterPasswordPoliciesForInvitedUsers(this.orgId);\n      } catch {\n        this.platformUtilsService.showToast(\"error\", null, this.i18nService.t(\"errorOccurred\"));\n      }\n    }\n\n    super.ngOnInit();\n  }\n\n  async setupSubmitActions() {\n    this.kdf = DEFAULT_KDF_TYPE;\n    this.kdfConfig = DEFAULT_KDF_CONFIG;\n    return true;\n  }\n\n  async performSubmitActions(\n    masterPasswordHash: string,\n    key: SymmetricCryptoKey,\n    encKey: [SymmetricCryptoKey, EncString]\n  ) {\n    const keys = await this.cryptoService.makeKeyPair(encKey[0]);\n    const request = new SetPasswordRequest(\n      masterPasswordHash,\n      encKey[1].encryptedString,\n      this.hint,\n      this.identifier,\n      new KeysRequest(keys[0], keys[1].encryptedString),\n      this.kdf,\n      this.kdfConfig.iterations,\n      this.kdfConfig.memory,\n      this.kdfConfig.parallelism\n    );\n    try {\n      if (this.resetPasswordAutoEnroll) {\n        this.formPromise = this.apiService\n          .setPassword(request)\n          .then(async () => {\n            await this.onSetPasswordSuccess(key, encKey, keys);\n            return this.organizationApiService.getKeys(this.orgId);\n          })\n          .then(async (response) => {\n            if (response == null) {\n              throw new Error(this.i18nService.t(\"resetPasswordOrgKeysError\"));\n            }\n            const userId = await this.stateService.getUserId();\n            const publicKey = Utils.fromB64ToArray(response.publicKey);\n\n            // RSA Encrypt user's encKey.key with organization public key\n            const userEncKey = await this.cryptoService.getEncKey();\n            const encryptedKey = await this.cryptoService.rsaEncrypt(\n              userEncKey.key,\n              publicKey.buffer\n            );\n\n            const resetRequest = new OrganizationUserResetPasswordEnrollmentRequest();\n            resetRequest.masterPasswordHash = masterPasswordHash;\n            resetRequest.resetPasswordKey = encryptedKey.encryptedString;\n\n            return this.organizationUserService.putOrganizationUserResetPasswordEnrollment(\n              this.orgId,\n              userId,\n              resetRequest\n            );\n          });\n      } else {\n        this.formPromise = this.apiService.setPassword(request).then(async () => {\n          await this.onSetPasswordSuccess(key, encKey, keys);\n        });\n      }\n\n      await this.formPromise;\n\n      if (this.onSuccessfulChangePassword != null) {\n        this.onSuccessfulChangePassword();\n      } else {\n        this.router.navigate([this.successRoute]);\n      }\n    } catch {\n      this.platformUtilsService.showToast(\"error\", null, this.i18nService.t(\"errorOccurred\"));\n    }\n  }\n\n  togglePassword(confirmField: boolean) {\n    this.showPassword = !this.showPassword;\n    document.getElementById(confirmField ? \"masterPasswordRetype\" : \"masterPassword\").focus();\n  }\n\n  private async onSetPasswordSuccess(\n    key: SymmetricCryptoKey,\n    encKey: [SymmetricCryptoKey, EncString],\n    keys: [string, EncString]\n  ) {\n    await this.stateService.setKdfType(this.kdf);\n    await this.stateService.setKdfConfig(this.kdfConfig);\n    await this.cryptoService.setKey(key);\n    await this.cryptoService.setEncKey(encKey[1].encryptedString);\n    await this.cryptoService.setEncPrivateKey(keys[1].encryptedString);\n\n    const localKeyHash = await this.cryptoService.hashPassword(\n      this.masterPassword,\n      key,\n      HashPurpose.LocalAuthorization\n    );\n    await this.cryptoService.setKeyHash(localKeyHash);\n  }\n}\n","<form #form (ngSubmit)=\"submit()\" [appApiAction]=\"formPromise\">\n  <header>\n    <div class=\"left\">\n      <button type=\"button\" routerLink=\"/home\">{{ \"cancel\" | i18n }}</button>\n    </div>\n    <h1 class=\"center\">\n      <span class=\"title\">{{ \"setMasterPassword\" | i18n }}</span>\n    </h1>\n    <div class=\"right\">\n      <button type=\"submit\" [disabled]=\"form.loading\">\n        <span [hidden]=\"form.loading\">{{ \"submit\" | i18n }}</span>\n        <i class=\"bwi bwi-spinner bwi-lg bwi-spin\" [hidden]=\"!form.loading\" aria-hidden=\"true\"></i>\n      </button>\n    </div>\n  </header>\n  <main tabindex=\"-1\">\n    <div class=\"full-loading-spinner\" *ngIf=\"syncLoading\">\n      <i class=\"bwi bwi-spinner bwi-spin bwi-3x\" aria-hidden=\"true\"></i>\n    </div>\n    <div *ngIf=\"!syncLoading\">\n      <div class=\"box\">\n        <app-callout type=\"tip\">{{ \"ssoCompleteRegistration\" | i18n }}</app-callout>\n        <app-callout\n          type=\"warning\"\n          title=\"{{ 'resetPasswordPolicyAutoEnroll' | i18n }}\"\n          *ngIf=\"resetPasswordAutoEnroll\"\n        >\n          {{ \"resetPasswordAutoEnrollInviteWarning\" | i18n }}\n        </app-callout>\n        <app-callout\n          type=\"info\"\n          [enforcedPolicyOptions]=\"enforcedPolicyOptions\"\n          *ngIf=\"enforcedPolicyOptions\"\n        >\n        </app-callout>\n      </div>\n      <div class=\"box\">\n        <div class=\"box-content\">\n          <div class=\"box-content-row\" appBoxRow>\n            <div class=\"box-content-row-flex\">\n              <div class=\"row-main\">\n                <label for=\"masterPassword\">\n                  {{ \"masterPass\" | i18n }}\n                  <strong class=\"sub-label text-{{ color }}\" *ngIf=\"text\">\n                    {{ text }}\n                  </strong>\n                </label>\n                <input\n                  id=\"masterPassword\"\n                  type=\"{{ showPassword ? 'text' : 'password' }}\"\n                  name=\"MasterPassword\"\n                  aria-describedby=\"masterPasswordHelp\"\n                  class=\"monospaced\"\n                  [(ngModel)]=\"masterPassword\"\n                  required\n                  appInputVerbatim\n                />\n              </div>\n              <div class=\"action-buttons\">\n                <button\n                  type=\"button\"\n                  class=\"row-btn\"\n                  appStopClick\n                  appA11yTitle=\"{{ 'toggleVisibility' | i18n }}\"\n                  (click)=\"togglePassword(false)\"\n                  [attr.aria-pressed]=\"showPassword\"\n                >\n                  <i\n                    class=\"bwi bwi-lg\"\n                    aria-hidden=\"true\"\n                    [ngClass]=\"{ 'bwi-eye': !showPassword, 'bwi-eye-slash': showPassword }\"\n                  ></i>\n                </button>\n              </div>\n            </div>\n\n            <app-password-strength\n              [password]=\"masterPassword\"\n              [email]=\"email\"\n              (passwordStrengthResult)=\"getStrengthResult($event)\"\n              (passwordScoreColor)=\"getPasswordScoreText($event)\"\n            >\n            </app-password-strength>\n          </div>\n        </div>\n        <div id=\"masterPasswordHelp\" class=\"box-footer\">\n          {{ \"masterPassDesc\" | i18n }}\n        </div>\n      </div>\n      <div class=\"box\">\n        <div class=\"box-content\">\n          <div class=\"box-content-row\" appBoxRow>\n            <div class=\"box-content-row-flex\">\n              <div class=\"row-main\">\n                <label for=\"masterPasswordRetype\">{{ \"reTypeMasterPass\" | i18n }}</label>\n                <input\n                  id=\"masterPasswordRetype\"\n                  type=\"password\"\n                  name=\"MasterPasswordRetype\"\n                  class=\"monospaced\"\n                  [(ngModel)]=\"masterPasswordRetype\"\n                  required\n                  appInputVerbatim\n                  autocomplete=\"new-password\"\n                />\n              </div>\n              <div class=\"action-buttons\">\n                <button\n                  type=\"button\"\n                  class=\"row-btn\"\n                  appStopClick\n                  appA11yTitle=\"{{ 'toggleVisibility' | i18n }}\"\n                  (click)=\"togglePassword(true)\"\n                  [attr.aria-pressed]=\"showPassword\"\n                >\n                  <i\n                    class=\"bwi bwi-lg\"\n                    aria-hidden=\"true\"\n                    [ngClass]=\"{ 'bwi-eye': !showPassword, 'bwi-eye-slash': showPassword }\"\n                  ></i>\n                </button>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n      <div class=\"box last\">\n        <div class=\"box-content\">\n          <div class=\"box-content-row\" appBoxRow>\n            <label for=\"hint\">{{ \"masterPassHint\" | i18n }}</label>\n            <input\n              id=\"hint\"\n              type=\"text\"\n              name=\"Hint\"\n              aria-describedby=\"hintHelp\"\n              [(ngModel)]=\"hint\"\n            />\n          </div>\n        </div>\n        <div id=\"hintHelp\" class=\"box-footer\">\n          {{ \"masterPassHintDesc\" | i18n }}\n        </div>\n      </div>\n    </div>\n  </main>\n</form>\n","import { Component } from \"@angular/core\";\nimport { ActivatedRoute, Router } from \"@angular/router\";\n\nimport { SetPasswordComponent as BaseSetPasswordComponent } from \"@bitwarden/angular/components/set-password.component\";\nimport { ApiService } from \"@bitwarden/common/abstractions/api.service\";\nimport { CryptoService } from \"@bitwarden/common/abstractions/crypto.service\";\nimport { I18nService } from \"@bitwarden/common/abstractions/i18n.service\";\nimport { MessagingService } from \"@bitwarden/common/abstractions/messaging.service\";\nimport { OrganizationUserService } from \"@bitwarden/common/abstractions/organization-user/organization-user.service\";\nimport { OrganizationApiServiceAbstraction } from \"@bitwarden/common/abstractions/organization/organization-api.service.abstraction\";\nimport { PasswordGenerationService } from \"@bitwarden/common/abstractions/passwordGeneration.service\";\nimport { PlatformUtilsService } from \"@bitwarden/common/abstractions/platformUtils.service\";\nimport { PolicyApiServiceAbstraction } from \"@bitwarden/common/abstractions/policy/policy-api.service.abstraction\";\nimport { PolicyService } from \"@bitwarden/common/abstractions/policy/policy.service.abstraction\";\nimport { StateService } from \"@bitwarden/common/abstractions/state.service\";\nimport { SyncService } from \"@bitwarden/common/vault/abstractions/sync/sync.service.abstraction\";\n\n@Component({\n  selector: \"app-set-password\",\n  templateUrl: \"set-password.component.html\",\n})\nexport class SetPasswordComponent extends BaseSetPasswordComponent {\n  constructor(\n    apiService: ApiService,\n    i18nService: I18nService,\n    cryptoService: CryptoService,\n    messagingService: MessagingService,\n    stateService: StateService,\n    passwordGenerationService: PasswordGenerationService,\n    platformUtilsService: PlatformUtilsService,\n    policyApiService: PolicyApiServiceAbstraction,\n    policyService: PolicyService,\n    router: Router,\n    syncService: SyncService,\n    route: ActivatedRoute,\n    organizationApiService: OrganizationApiServiceAbstraction,\n    organizationUserService: OrganizationUserService\n  ) {\n    super(\n      i18nService,\n      cryptoService,\n      messagingService,\n      passwordGenerationService,\n      platformUtilsService,\n      policyApiService,\n      policyService,\n      router,\n      apiService,\n      syncService,\n      route,\n      stateService,\n      organizationApiService,\n      organizationUserService\n    );\n  }\n}\n","import { Directive } from \"@angular/core\";\nimport { ActivatedRoute, Router } from \"@angular/router\";\nimport { first } from \"rxjs/operators\";\n\nimport { ApiService } from \"@bitwarden/common/abstractions/api.service\";\nimport { AuthService } from \"@bitwarden/common/abstractions/auth.service\";\nimport { CryptoFunctionService } from \"@bitwarden/common/abstractions/cryptoFunction.service\";\nimport { EnvironmentService } from \"@bitwarden/common/abstractions/environment.service\";\nimport { I18nService } from \"@bitwarden/common/abstractions/i18n.service\";\nimport { LogService } from \"@bitwarden/common/abstractions/log.service\";\nimport { PasswordGenerationService } from \"@bitwarden/common/abstractions/passwordGeneration.service\";\nimport { PlatformUtilsService } from \"@bitwarden/common/abstractions/platformUtils.service\";\nimport { StateService } from \"@bitwarden/common/abstractions/state.service\";\nimport { Utils } from \"@bitwarden/common/misc/utils\";\nimport { AuthResult } from \"@bitwarden/common/models/domain/auth-result\";\nimport { SsoLogInCredentials } from \"@bitwarden/common/models/domain/log-in-credentials\";\nimport { SsoPreValidateResponse } from \"@bitwarden/common/models/response/sso-pre-validate.response\";\n\n@Directive()\nexport class SsoComponent {\n  identifier: string;\n  loggingIn = false;\n\n  formPromise: Promise<AuthResult>;\n  initiateSsoFormPromise: Promise<SsoPreValidateResponse>;\n  onSuccessfulLogin: () => Promise<any>;\n  onSuccessfulLoginNavigate: () => Promise<any>;\n  onSuccessfulLoginTwoFactorNavigate: () => Promise<any>;\n  onSuccessfulLoginChangePasswordNavigate: () => Promise<any>;\n  onSuccessfulLoginForceResetNavigate: () => Promise<any>;\n\n  protected twoFactorRoute = \"2fa\";\n  protected successRoute = \"lock\";\n  protected changePasswordRoute = \"set-password\";\n  protected forcePasswordResetRoute = \"update-temp-password\";\n  protected clientId: string;\n  protected redirectUri: string;\n  protected state: string;\n  protected codeChallenge: string;\n\n  constructor(\n    protected authService: AuthService,\n    protected router: Router,\n    protected i18nService: I18nService,\n    protected route: ActivatedRoute,\n    protected stateService: StateService,\n    protected platformUtilsService: PlatformUtilsService,\n    protected apiService: ApiService,\n    protected cryptoFunctionService: CryptoFunctionService,\n    protected environmentService: EnvironmentService,\n    protected passwordGenerationService: PasswordGenerationService,\n    protected logService: LogService\n  ) {}\n\n  async ngOnInit() {\n    // eslint-disable-next-line rxjs/no-async-subscribe\n    this.route.queryParams.pipe(first()).subscribe(async (qParams) => {\n      if (qParams.code != null && qParams.state != null) {\n        const codeVerifier = await this.stateService.getSsoCodeVerifier();\n        const state = await this.stateService.getSsoState();\n        await this.stateService.setSsoCodeVerifier(null);\n        await this.stateService.setSsoState(null);\n        if (\n          qParams.code != null &&\n          codeVerifier != null &&\n          state != null &&\n          this.checkState(state, qParams.state)\n        ) {\n          await this.logIn(\n            qParams.code,\n            codeVerifier,\n            this.getOrgIdentifierFromState(qParams.state)\n          );\n        }\n      } else if (\n        qParams.clientId != null &&\n        qParams.redirectUri != null &&\n        qParams.state != null &&\n        qParams.codeChallenge != null\n      ) {\n        this.redirectUri = qParams.redirectUri;\n        this.state = qParams.state;\n        this.codeChallenge = qParams.codeChallenge;\n        this.clientId = qParams.clientId;\n      }\n    });\n  }\n\n  async submit(returnUri?: string, includeUserIdentifier?: boolean) {\n    if (this.identifier == null || this.identifier === \"\") {\n      this.platformUtilsService.showToast(\n        \"error\",\n        this.i18nService.t(\"ssoValidationFailed\"),\n        this.i18nService.t(\"ssoIdentifierRequired\")\n      );\n      return;\n    }\n\n    this.initiateSsoFormPromise = this.apiService.preValidateSso(this.identifier);\n    const response = await this.initiateSsoFormPromise;\n\n    const authorizeUrl = await this.buildAuthorizeUrl(\n      returnUri,\n      includeUserIdentifier,\n      response.token\n    );\n    this.platformUtilsService.launchUri(authorizeUrl, { sameWindow: true });\n  }\n\n  protected async buildAuthorizeUrl(\n    returnUri?: string,\n    includeUserIdentifier?: boolean,\n    token?: string\n  ): Promise<string> {\n    let codeChallenge = this.codeChallenge;\n    let state = this.state;\n\n    const passwordOptions: any = {\n      type: \"password\",\n      length: 64,\n      uppercase: true,\n      lowercase: true,\n      numbers: true,\n      special: false,\n    };\n\n    if (codeChallenge == null) {\n      const codeVerifier = await this.passwordGenerationService.generatePassword(passwordOptions);\n      const codeVerifierHash = await this.cryptoFunctionService.hash(codeVerifier, \"sha256\");\n      codeChallenge = Utils.fromBufferToUrlB64(codeVerifierHash);\n      await this.stateService.setSsoCodeVerifier(codeVerifier);\n    }\n\n    if (state == null) {\n      state = await this.passwordGenerationService.generatePassword(passwordOptions);\n      if (returnUri) {\n        state += `_returnUri='${returnUri}'`;\n      }\n    }\n\n    // Add Organization Identifier to state\n    state += `_identifier=${this.identifier}`;\n\n    // Save state (regardless of new or existing)\n    await this.stateService.setSsoState(state);\n\n    let authorizeUrl =\n      this.environmentService.getIdentityUrl() +\n      \"/connect/authorize?\" +\n      \"client_id=\" +\n      this.clientId +\n      \"&redirect_uri=\" +\n      encodeURIComponent(this.redirectUri) +\n      \"&\" +\n      \"response_type=code&scope=api offline_access&\" +\n      \"state=\" +\n      state +\n      \"&code_challenge=\" +\n      codeChallenge +\n      \"&\" +\n      \"code_challenge_method=S256&response_mode=query&\" +\n      \"domain_hint=\" +\n      encodeURIComponent(this.identifier) +\n      \"&ssoToken=\" +\n      encodeURIComponent(token);\n\n    if (includeUserIdentifier) {\n      const userIdentifier = await this.apiService.getSsoUserIdentifier();\n      authorizeUrl += `&user_identifier=${encodeURIComponent(userIdentifier)}`;\n    }\n\n    return authorizeUrl;\n  }\n\n  private async logIn(code: string, codeVerifier: string, orgIdFromState: string) {\n    this.loggingIn = true;\n    try {\n      const credentials = new SsoLogInCredentials(\n        code,\n        codeVerifier,\n        this.redirectUri,\n        orgIdFromState\n      );\n      this.formPromise = this.authService.logIn(credentials);\n      const response = await this.formPromise;\n      if (response.requiresTwoFactor) {\n        if (this.onSuccessfulLoginTwoFactorNavigate != null) {\n          this.onSuccessfulLoginTwoFactorNavigate();\n        } else {\n          this.router.navigate([this.twoFactorRoute], {\n            queryParams: {\n              identifier: orgIdFromState,\n              sso: \"true\",\n            },\n          });\n        }\n      } else if (response.resetMasterPassword) {\n        if (this.onSuccessfulLoginChangePasswordNavigate != null) {\n          this.onSuccessfulLoginChangePasswordNavigate();\n        } else {\n          this.router.navigate([this.changePasswordRoute], {\n            queryParams: {\n              identifier: orgIdFromState,\n            },\n          });\n        }\n      } else if (response.forcePasswordReset) {\n        if (this.onSuccessfulLoginForceResetNavigate != null) {\n          this.onSuccessfulLoginForceResetNavigate();\n        } else {\n          this.router.navigate([this.forcePasswordResetRoute]);\n        }\n      } else {\n        const disableFavicon = await this.stateService.getDisableFavicon();\n        await this.stateService.setDisableFavicon(!!disableFavicon);\n        if (this.onSuccessfulLogin != null) {\n          this.onSuccessfulLogin();\n        }\n        if (this.onSuccessfulLoginNavigate != null) {\n          this.onSuccessfulLoginNavigate();\n        } else {\n          this.router.navigate([this.successRoute]);\n        }\n      }\n    } catch (e) {\n      this.logService.error(e);\n\n      // TODO: Key Connector Service should pass this error message to the logout callback instead of displaying here\n      if (e.message === \"Key Connector error\") {\n        this.platformUtilsService.showToast(\n          \"error\",\n          null,\n          this.i18nService.t(\"ssoKeyConnectorError\")\n        );\n      }\n    }\n    this.loggingIn = false;\n  }\n\n  private getOrgIdentifierFromState(state: string): string {\n    if (state === null || state === undefined) {\n      return null;\n    }\n\n    const stateSplit = state.split(\"_identifier=\");\n    return stateSplit.length > 1 ? stateSplit[1] : null;\n  }\n\n  private checkState(state: string, checkState: string): boolean {\n    if (state === null || state === undefined) {\n      return false;\n    }\n    if (checkState === null || checkState === undefined) {\n      return false;\n    }\n\n    const stateSplit = state.split(\"_identifier=\");\n    const checkStateSplit = checkState.split(\"_identifier=\");\n    return stateSplit[0] === checkStateSplit[0];\n  }\n}\n","import { Component } from \"@angular/core\";\nimport { ActivatedRoute, Router } from \"@angular/router\";\n\nimport { SsoComponent as BaseSsoComponent } from \"@bitwarden/angular/components/sso.component\";\nimport { ApiService } from \"@bitwarden/common/abstractions/api.service\";\nimport { AuthService } from \"@bitwarden/common/abstractions/auth.service\";\nimport { CryptoFunctionService } from \"@bitwarden/common/abstractions/cryptoFunction.service\";\nimport { EnvironmentService } from \"@bitwarden/common/abstractions/environment.service\";\nimport { I18nService } from \"@bitwarden/common/abstractions/i18n.service\";\nimport { LogService } from \"@bitwarden/common/abstractions/log.service\";\nimport { PasswordGenerationService } from \"@bitwarden/common/abstractions/passwordGeneration.service\";\nimport { PlatformUtilsService } from \"@bitwarden/common/abstractions/platformUtils.service\";\nimport { StateService } from \"@bitwarden/common/abstractions/state.service\";\nimport { VaultTimeoutService } from \"@bitwarden/common/abstractions/vaultTimeout/vaultTimeout.service\";\nimport { AuthenticationStatus } from \"@bitwarden/common/enums/authenticationStatus\";\nimport { SyncService } from \"@bitwarden/common/vault/abstractions/sync/sync.service.abstraction\";\n\nimport { BrowserApi } from \"../../browser/browserApi\";\n\n@Component({\n  selector: \"app-sso\",\n  templateUrl: \"sso.component.html\",\n})\nexport class SsoComponent extends BaseSsoComponent {\n  constructor(\n    authService: AuthService,\n    router: Router,\n    i18nService: I18nService,\n    route: ActivatedRoute,\n    stateService: StateService,\n    platformUtilsService: PlatformUtilsService,\n    apiService: ApiService,\n    cryptoFunctionService: CryptoFunctionService,\n    passwordGenerationService: PasswordGenerationService,\n    syncService: SyncService,\n    environmentService: EnvironmentService,\n    logService: LogService,\n    private vaultTimeoutService: VaultTimeoutService\n  ) {\n    super(\n      authService,\n      router,\n      i18nService,\n      route,\n      stateService,\n      platformUtilsService,\n      apiService,\n      cryptoFunctionService,\n      environmentService,\n      passwordGenerationService,\n      logService\n    );\n\n    const url = this.environmentService.getWebVaultUrl();\n\n    this.redirectUri = url + \"/sso-connector.html\";\n    this.clientId = \"browser\";\n\n    super.onSuccessfulLogin = async () => {\n      await syncService.fullSync(true);\n\n      // If the vault is unlocked then this will clear keys from memory, which we don't want to do\n      if ((await this.authService.getAuthStatus()) !== AuthenticationStatus.Unlocked) {\n        BrowserApi.reloadOpenWindows();\n      }\n\n      const thisWindow = window.open(\"\", \"_self\");\n      thisWindow.close();\n    };\n  }\n}\n","import { TwoFactorProviderType } from \"../enums/twoFactorProviderType\";\nimport { IdentityTwoFactorResponse } from \"../models/response/identity-two-factor.response\";\n\nexport interface TwoFactorProviderDetails {\n  type: TwoFactorProviderType;\n  name: string;\n  description: string;\n  priority: number;\n  sort: number;\n  premium: boolean;\n}\n\nexport abstract class TwoFactorService {\n  init: () => void;\n  getSupportedProviders: (win: Window) => TwoFactorProviderDetails[];\n  getDefaultProvider: (webAuthnSupported: boolean) => TwoFactorProviderType;\n  setSelectedProvider: (type: TwoFactorProviderType) => void;\n  clearSelectedProvider: () => void;\n\n  setProviders: (response: IdentityTwoFactorResponse) => void;\n  clearProviders: () => void;\n  getProviders: () => Map<TwoFactorProviderType, { [key: string]: string }>;\n}\n","import { Directive, EventEmitter, OnInit, Output } from \"@angular/core\";\nimport { Router } from \"@angular/router\";\n\nimport { I18nService } from \"@bitwarden/common/abstractions/i18n.service\";\nimport { PlatformUtilsService } from \"@bitwarden/common/abstractions/platformUtils.service\";\nimport { TwoFactorService } from \"@bitwarden/common/abstractions/twoFactor.service\";\nimport { TwoFactorProviderType } from \"@bitwarden/common/enums/twoFactorProviderType\";\n\n@Directive()\nexport class TwoFactorOptionsComponent implements OnInit {\n  @Output() onProviderSelected = new EventEmitter<TwoFactorProviderType>();\n  @Output() onRecoverSelected = new EventEmitter();\n\n  providers: any[] = [];\n\n  constructor(\n    protected twoFactorService: TwoFactorService,\n    protected router: Router,\n    protected i18nService: I18nService,\n    protected platformUtilsService: PlatformUtilsService,\n    protected win: Window\n  ) {}\n\n  ngOnInit() {\n    this.providers = this.twoFactorService.getSupportedProviders(this.win);\n  }\n\n  choose(p: any) {\n    this.onProviderSelected.emit(p.type);\n  }\n\n  recover() {\n    this.platformUtilsService.launchUri(\"https://bitwarden.com/help/lost-two-step-device/\");\n    this.onRecoverSelected.emit();\n  }\n}\n","<header>\n  <div class=\"left\">\n    <button type=\"button\" routerLink=\"/2fa\">{{ \"close\" | i18n }}</button>\n  </div>\n  <h1 class=\"center\">\n    <span class=\"title\">{{ \"twoStepOptions\" | i18n }}</span>\n  </h1>\n  <div class=\"right\"></div>\n</header>\n<main tabindex=\"-1\">\n  <div class=\"box\">\n    <div class=\"box-content\">\n      <button\n        type=\"button\"\n        appStopClick\n        *ngFor=\"let p of providers\"\n        class=\"box-content-row\"\n        (click)=\"choose(p)\"\n      >\n        <span class=\"text\">{{ p.name }}</span>\n        <span class=\"detail\">{{ p.description }}</span>\n      </button>\n      <button type=\"button\" appStopClick class=\"box-content-row\" (click)=\"recover()\">\n        <span class=\"text\">{{ \"recoveryCodeTitle\" | i18n }}</span>\n        <span class=\"detail\">{{ \"recoveryCodeDesc\" | i18n }}</span>\n      </button>\n    </div>\n  </div>\n</main>\n","import { Component } from \"@angular/core\";\nimport { Router } from \"@angular/router\";\n\nimport { TwoFactorOptionsComponent as BaseTwoFactorOptionsComponent } from \"@bitwarden/angular/components/two-factor-options.component\";\nimport { I18nService } from \"@bitwarden/common/abstractions/i18n.service\";\nimport { PlatformUtilsService } from \"@bitwarden/common/abstractions/platformUtils.service\";\nimport { TwoFactorService } from \"@bitwarden/common/abstractions/twoFactor.service\";\n\n@Component({\n  selector: \"app-two-factor-options\",\n  templateUrl: \"two-factor-options.component.html\",\n})\nexport class TwoFactorOptionsComponent extends BaseTwoFactorOptionsComponent {\n  constructor(\n    twoFactorService: TwoFactorService,\n    router: Router,\n    i18nService: I18nService,\n    platformUtilsService: PlatformUtilsService\n  ) {\n    super(twoFactorService, router, i18nService, platformUtilsService, window);\n  }\n\n  choose(p: any) {\n    super.choose(p);\n    this.twoFactorService.setSelectedProvider(p.type);\n    this.router.navigate([\"2fa\"]);\n  }\n}\n","export enum TwoFactorProviderType {\n  Authenticator = 0,\n  Email = 1,\n  Duo = 2,\n  Yubikey = 3,\n  U2f = 4,\n  Remember = 5,\n  OrganizationDuo = 6,\n  WebAuthn = 7,\n}\n","import { I18nService } from \"../abstractions/i18n.service\";\nimport { PlatformUtilsService } from \"../abstractions/platformUtils.service\";\n\nexport class WebAuthnIFrame {\n  private iframe: HTMLIFrameElement = null;\n  private connectorLink: HTMLAnchorElement;\n  private parseFunction = this.parseMessage.bind(this);\n\n  constructor(\n    private win: Window,\n    private webVaultUrl: string,\n    private webAuthnNewTab: boolean,\n    private platformUtilsService: PlatformUtilsService,\n    private i18nService: I18nService,\n    private successCallback: Function, // eslint-disable-line\n    private errorCallback: Function, // eslint-disable-line\n    private infoCallback: Function // eslint-disable-line\n  ) {\n    this.connectorLink = win.document.createElement(\"a\");\n  }\n\n  init(data: any): void {\n    const params = new URLSearchParams({\n      data: this.base64Encode(JSON.stringify(data)),\n      parent: encodeURIComponent(this.win.document.location.href),\n      btnText: encodeURIComponent(this.i18nService.t(\"webAuthnAuthenticate\")),\n      v: \"1\",\n    });\n\n    if (this.webAuthnNewTab) {\n      // Firefox fallback which opens the webauthn page in a new tab\n      params.append(\"locale\", this.i18nService.translationLocale);\n      this.platformUtilsService.launchUri(\n        `${this.webVaultUrl}/webauthn-fallback-connector.html?${params}`\n      );\n    } else {\n      this.connectorLink.href = `${this.webVaultUrl}/webauthn-connector.html?${params}`;\n      this.iframe = this.win.document.getElementById(\"webauthn_iframe\") as HTMLIFrameElement;\n      this.iframe.allow = \"publickey-credentials-get \" + new URL(this.webVaultUrl).origin;\n      this.iframe.src = this.connectorLink.href;\n\n      this.win.addEventListener(\"message\", this.parseFunction, false);\n    }\n  }\n\n  stop() {\n    this.sendMessage(\"stop\");\n  }\n\n  start() {\n    this.sendMessage(\"start\");\n  }\n\n  sendMessage(message: any) {\n    if (!this.iframe || !this.iframe.src || !this.iframe.contentWindow) {\n      return;\n    }\n\n    this.iframe.contentWindow.postMessage(message, this.iframe.src);\n  }\n\n  base64Encode(str: string): string {\n    return btoa(\n      encodeURIComponent(str).replace(/%([0-9A-F]{2})/g, (match, p1) => {\n        return String.fromCharCode((\"0x\" + p1) as any);\n      })\n    );\n  }\n\n  cleanup() {\n    this.win.removeEventListener(\"message\", this.parseFunction, false);\n  }\n\n  private parseMessage(event: MessageEvent) {\n    if (!this.validMessage(event)) {\n      return;\n    }\n\n    const parts: string[] = event.data.split(\"|\");\n    if (parts[0] === \"success\" && this.successCallback) {\n      this.successCallback(parts[1]);\n    } else if (parts[0] === \"error\" && this.errorCallback) {\n      this.errorCallback(parts[1]);\n    } else if (parts[0] === \"info\" && this.infoCallback) {\n      this.infoCallback(parts[1]);\n    }\n  }\n\n  private validMessage(event: MessageEvent) {\n    if (\n      event.origin == null ||\n      event.origin === \"\" ||\n      event.origin !== (this.connectorLink as any).origin ||\n      event.data == null ||\n      typeof event.data !== \"string\"\n    ) {\n      return false;\n    }\n\n    return (\n      event.data.indexOf(\"success|\") === 0 ||\n      event.data.indexOf(\"error|\") === 0 ||\n      event.data.indexOf(\"info|\") === 0\n    );\n  }\n}\n","import { TwoFactorProviderType } from \"../../../enums/twoFactorProviderType\";\n\nexport class TokenTwoFactorRequest {\n  constructor(\n    public provider: TwoFactorProviderType = null,\n    public token: string = null,\n    public remember: boolean = false\n  ) {}\n}\n","import { SecretVerificationRequest } from \"./secret-verification.request\";\n\nexport class TwoFactorEmailRequest extends SecretVerificationRequest {\n  email: string;\n  deviceIdentifier: string;\n  authRequestId: string;\n}\n","import { I18nService } from \"../abstractions/i18n.service\";\nimport { PlatformUtilsService } from \"../abstractions/platformUtils.service\";\nimport {\n  TwoFactorProviderDetails,\n  TwoFactorService as TwoFactorServiceAbstraction,\n} from \"../abstractions/twoFactor.service\";\nimport { TwoFactorProviderType } from \"../enums/twoFactorProviderType\";\nimport { IdentityTwoFactorResponse } from \"../models/response/identity-two-factor.response\";\n\nexport const TwoFactorProviders: Partial<Record<TwoFactorProviderType, TwoFactorProviderDetails>> =\n  {\n    [TwoFactorProviderType.Authenticator]: {\n      type: TwoFactorProviderType.Authenticator,\n      name: null as string,\n      description: null as string,\n      priority: 1,\n      sort: 1,\n      premium: false,\n    },\n    [TwoFactorProviderType.Yubikey]: {\n      type: TwoFactorProviderType.Yubikey,\n      name: null as string,\n      description: null as string,\n      priority: 3,\n      sort: 2,\n      premium: true,\n    },\n    [TwoFactorProviderType.Duo]: {\n      type: TwoFactorProviderType.Duo,\n      name: \"Duo\",\n      description: null as string,\n      priority: 2,\n      sort: 3,\n      premium: true,\n    },\n    [TwoFactorProviderType.OrganizationDuo]: {\n      type: TwoFactorProviderType.OrganizationDuo,\n      name: \"Duo (Organization)\",\n      description: null as string,\n      priority: 10,\n      sort: 4,\n      premium: false,\n    },\n    [TwoFactorProviderType.Email]: {\n      type: TwoFactorProviderType.Email,\n      name: null as string,\n      description: null as string,\n      priority: 0,\n      sort: 6,\n      premium: false,\n    },\n    [TwoFactorProviderType.WebAuthn]: {\n      type: TwoFactorProviderType.WebAuthn,\n      name: null as string,\n      description: null as string,\n      priority: 4,\n      sort: 5,\n      premium: true,\n    },\n  };\n\nexport class TwoFactorService implements TwoFactorServiceAbstraction {\n  private twoFactorProvidersData: Map<TwoFactorProviderType, { [key: string]: string }>;\n  private selectedTwoFactorProviderType: TwoFactorProviderType = null;\n\n  constructor(\n    private i18nService: I18nService,\n    private platformUtilsService: PlatformUtilsService\n  ) {}\n\n  init() {\n    TwoFactorProviders[TwoFactorProviderType.Email].name = this.i18nService.t(\"emailTitle\");\n    TwoFactorProviders[TwoFactorProviderType.Email].description = this.i18nService.t(\"emailDesc\");\n\n    TwoFactorProviders[TwoFactorProviderType.Authenticator].name =\n      this.i18nService.t(\"authenticatorAppTitle\");\n    TwoFactorProviders[TwoFactorProviderType.Authenticator].description =\n      this.i18nService.t(\"authenticatorAppDesc\");\n\n    TwoFactorProviders[TwoFactorProviderType.Duo].description = this.i18nService.t(\"duoDesc\");\n\n    TwoFactorProviders[TwoFactorProviderType.OrganizationDuo].name =\n      \"Duo (\" + this.i18nService.t(\"organization\") + \")\";\n    TwoFactorProviders[TwoFactorProviderType.OrganizationDuo].description =\n      this.i18nService.t(\"duoOrganizationDesc\");\n\n    TwoFactorProviders[TwoFactorProviderType.WebAuthn].name = this.i18nService.t(\"webAuthnTitle\");\n    TwoFactorProviders[TwoFactorProviderType.WebAuthn].description =\n      this.i18nService.t(\"webAuthnDesc\");\n\n    TwoFactorProviders[TwoFactorProviderType.Yubikey].name = this.i18nService.t(\"yubiKeyTitle\");\n    TwoFactorProviders[TwoFactorProviderType.Yubikey].description =\n      this.i18nService.t(\"yubiKeyDesc\");\n  }\n\n  getSupportedProviders(win: Window): TwoFactorProviderDetails[] {\n    const providers: any[] = [];\n    if (this.twoFactorProvidersData == null) {\n      return providers;\n    }\n\n    if (\n      this.twoFactorProvidersData.has(TwoFactorProviderType.OrganizationDuo) &&\n      this.platformUtilsService.supportsDuo()\n    ) {\n      providers.push(TwoFactorProviders[TwoFactorProviderType.OrganizationDuo]);\n    }\n\n    if (this.twoFactorProvidersData.has(TwoFactorProviderType.Authenticator)) {\n      providers.push(TwoFactorProviders[TwoFactorProviderType.Authenticator]);\n    }\n\n    if (this.twoFactorProvidersData.has(TwoFactorProviderType.Yubikey)) {\n      providers.push(TwoFactorProviders[TwoFactorProviderType.Yubikey]);\n    }\n\n    if (\n      this.twoFactorProvidersData.has(TwoFactorProviderType.Duo) &&\n      this.platformUtilsService.supportsDuo()\n    ) {\n      providers.push(TwoFactorProviders[TwoFactorProviderType.Duo]);\n    }\n\n    if (\n      this.twoFactorProvidersData.has(TwoFactorProviderType.WebAuthn) &&\n      this.platformUtilsService.supportsWebAuthn(win)\n    ) {\n      providers.push(TwoFactorProviders[TwoFactorProviderType.WebAuthn]);\n    }\n\n    if (this.twoFactorProvidersData.has(TwoFactorProviderType.Email)) {\n      providers.push(TwoFactorProviders[TwoFactorProviderType.Email]);\n    }\n\n    return providers;\n  }\n\n  getDefaultProvider(webAuthnSupported: boolean): TwoFactorProviderType {\n    if (this.twoFactorProvidersData == null) {\n      return null;\n    }\n\n    if (\n      this.selectedTwoFactorProviderType != null &&\n      this.twoFactorProvidersData.has(this.selectedTwoFactorProviderType)\n    ) {\n      return this.selectedTwoFactorProviderType;\n    }\n\n    let providerType: TwoFactorProviderType = null;\n    let providerPriority = -1;\n    this.twoFactorProvidersData.forEach((_value, type) => {\n      const provider = (TwoFactorProviders as any)[type];\n      if (provider != null && provider.priority > providerPriority) {\n        if (type === TwoFactorProviderType.WebAuthn && !webAuthnSupported) {\n          return;\n        }\n\n        providerType = type;\n        providerPriority = provider.priority;\n      }\n    });\n\n    return providerType;\n  }\n\n  setSelectedProvider(type: TwoFactorProviderType) {\n    this.selectedTwoFactorProviderType = type;\n  }\n\n  clearSelectedProvider() {\n    this.selectedTwoFactorProviderType = null;\n  }\n\n  setProviders(response: IdentityTwoFactorResponse) {\n    this.twoFactorProvidersData = response.twoFactorProviders2;\n  }\n\n  clearProviders() {\n    this.twoFactorProvidersData = null;\n  }\n\n  getProviders() {\n    return this.twoFactorProvidersData;\n  }\n}\n","import { Directive, OnDestroy, OnInit } from \"@angular/core\";\nimport { ActivatedRoute, Router } from \"@angular/router\";\nimport * as DuoWebSDK from \"duo_web_sdk\";\nimport { first } from \"rxjs/operators\";\n\nimport { ApiService } from \"@bitwarden/common/abstractions/api.service\";\nimport { AppIdService } from \"@bitwarden/common/abstractions/appId.service\";\nimport { AuthService } from \"@bitwarden/common/abstractions/auth.service\";\nimport { EnvironmentService } from \"@bitwarden/common/abstractions/environment.service\";\nimport { I18nService } from \"@bitwarden/common/abstractions/i18n.service\";\nimport { LogService } from \"@bitwarden/common/abstractions/log.service\";\nimport { LoginService } from \"@bitwarden/common/abstractions/login.service\";\nimport { PlatformUtilsService } from \"@bitwarden/common/abstractions/platformUtils.service\";\nimport { StateService } from \"@bitwarden/common/abstractions/state.service\";\nimport { TwoFactorService } from \"@bitwarden/common/abstractions/twoFactor.service\";\nimport { TwoFactorProviderType } from \"@bitwarden/common/enums/twoFactorProviderType\";\nimport { WebAuthnIFrame } from \"@bitwarden/common/misc/webauthn_iframe\";\nimport { AuthResult } from \"@bitwarden/common/models/domain/auth-result\";\nimport { TokenTwoFactorRequest } from \"@bitwarden/common/models/request/identity-token/token-two-factor.request\";\nimport { TwoFactorEmailRequest } from \"@bitwarden/common/models/request/two-factor-email.request\";\nimport { TwoFactorProviders } from \"@bitwarden/common/services/twoFactor.service\";\n\nimport { CaptchaProtectedComponent } from \"./captchaProtected.component\";\n\n@Directive()\nexport class TwoFactorComponent extends CaptchaProtectedComponent implements OnInit, OnDestroy {\n  token = \"\";\n  remember = false;\n  webAuthnReady = false;\n  webAuthnNewTab = false;\n  providers = TwoFactorProviders;\n  providerType = TwoFactorProviderType;\n  selectedProviderType: TwoFactorProviderType = TwoFactorProviderType.Authenticator;\n  webAuthnSupported = false;\n  webAuthn: WebAuthnIFrame = null;\n  title = \"\";\n  twoFactorEmail: string = null;\n  formPromise: Promise<any>;\n  emailPromise: Promise<any>;\n  identifier: string = null;\n  onSuccessfulLogin: () => Promise<any>;\n  onSuccessfulLoginNavigate: () => Promise<any>;\n\n  get webAuthnAllow(): string {\n    return `publickey-credentials-get ${this.environmentService.getWebVaultUrl()}`;\n  }\n\n  protected loginRoute = \"login\";\n  protected successRoute = \"vault\";\n\n  constructor(\n    protected authService: AuthService,\n    protected router: Router,\n    protected i18nService: I18nService,\n    protected apiService: ApiService,\n    protected platformUtilsService: PlatformUtilsService,\n    protected win: Window,\n    protected environmentService: EnvironmentService,\n    protected stateService: StateService,\n    protected route: ActivatedRoute,\n    protected logService: LogService,\n    protected twoFactorService: TwoFactorService,\n    protected appIdService: AppIdService,\n    protected loginService: LoginService\n  ) {\n    super(environmentService, i18nService, platformUtilsService);\n    this.webAuthnSupported = this.platformUtilsService.supportsWebAuthn(win);\n  }\n\n  async ngOnInit() {\n    if (!this.authing || this.twoFactorService.getProviders() == null) {\n      this.router.navigate([this.loginRoute]);\n      return;\n    }\n\n    this.route.queryParams.pipe(first()).subscribe((qParams) => {\n      if (qParams.identifier != null) {\n        this.identifier = qParams.identifier;\n      }\n    });\n\n    if (this.needsLock) {\n      this.successRoute = \"lock\";\n    }\n\n    if (this.win != null && this.webAuthnSupported) {\n      const webVaultUrl = this.environmentService.getWebVaultUrl();\n      this.webAuthn = new WebAuthnIFrame(\n        this.win,\n        webVaultUrl,\n        this.webAuthnNewTab,\n        this.platformUtilsService,\n        this.i18nService,\n        (token: string) => {\n          this.token = token;\n          this.submit();\n        },\n        (error: string) => {\n          this.platformUtilsService.showToast(\"error\", this.i18nService.t(\"errorOccurred\"), error);\n        },\n        (info: string) => {\n          if (info === \"ready\") {\n            this.webAuthnReady = true;\n          }\n        }\n      );\n    }\n\n    this.selectedProviderType = this.twoFactorService.getDefaultProvider(this.webAuthnSupported);\n    await this.init();\n  }\n\n  ngOnDestroy(): void {\n    this.cleanupWebAuthn();\n    this.webAuthn = null;\n  }\n\n  async init() {\n    if (this.selectedProviderType == null) {\n      this.title = this.i18nService.t(\"loginUnavailable\");\n      return;\n    }\n\n    this.cleanupWebAuthn();\n    this.title = (TwoFactorProviders as any)[this.selectedProviderType].name;\n    const providerData = this.twoFactorService.getProviders().get(this.selectedProviderType);\n    switch (this.selectedProviderType) {\n      case TwoFactorProviderType.WebAuthn:\n        if (!this.webAuthnNewTab) {\n          setTimeout(() => {\n            this.authWebAuthn();\n          }, 500);\n        }\n        break;\n      case TwoFactorProviderType.Duo:\n      case TwoFactorProviderType.OrganizationDuo:\n        setTimeout(() => {\n          DuoWebSDK.init({\n            iframe: undefined,\n            host: providerData.Host,\n            sig_request: providerData.Signature,\n            submit_callback: async (f: HTMLFormElement) => {\n              const sig = f.querySelector('input[name=\"sig_response\"]') as HTMLInputElement;\n              if (sig != null) {\n                this.token = sig.value;\n                await this.submit();\n              }\n            },\n          });\n        }, 0);\n        break;\n      case TwoFactorProviderType.Email:\n        this.twoFactorEmail = providerData.Email;\n        if (this.twoFactorService.getProviders().size > 1) {\n          await this.sendEmail(false);\n        }\n        break;\n      default:\n        break;\n    }\n  }\n\n  async submit() {\n    await this.setupCaptcha();\n\n    if (this.token == null || this.token === \"\") {\n      this.platformUtilsService.showToast(\n        \"error\",\n        this.i18nService.t(\"errorOccurred\"),\n        this.i18nService.t(\"verificationCodeRequired\")\n      );\n      return;\n    }\n\n    if (this.selectedProviderType === TwoFactorProviderType.WebAuthn) {\n      if (this.webAuthn != null) {\n        this.webAuthn.stop();\n      } else {\n        return;\n      }\n    } else if (\n      this.selectedProviderType === TwoFactorProviderType.Email ||\n      this.selectedProviderType === TwoFactorProviderType.Authenticator\n    ) {\n      this.token = this.token.replace(\" \", \"\").trim();\n    }\n\n    try {\n      await this.doSubmit();\n    } catch {\n      if (this.selectedProviderType === TwoFactorProviderType.WebAuthn && this.webAuthn != null) {\n        this.webAuthn.start();\n      }\n    }\n  }\n\n  async doSubmit() {\n    this.formPromise = this.authService.logInTwoFactor(\n      new TokenTwoFactorRequest(this.selectedProviderType, this.token, this.remember),\n      this.captchaToken\n    );\n    const response: AuthResult = await this.formPromise;\n    const disableFavicon = await this.stateService.getDisableFavicon();\n    await this.stateService.setDisableFavicon(!!disableFavicon);\n    if (this.handleCaptchaRequired(response)) {\n      return;\n    }\n    if (this.onSuccessfulLogin != null) {\n      this.loginService.clearValues();\n      this.onSuccessfulLogin();\n    }\n    if (response.resetMasterPassword) {\n      this.successRoute = \"set-password\";\n    }\n    if (response.forcePasswordReset) {\n      this.successRoute = \"update-temp-password\";\n    }\n    if (this.onSuccessfulLoginNavigate != null) {\n      this.loginService.clearValues();\n      this.onSuccessfulLoginNavigate();\n    } else {\n      this.loginService.clearValues();\n      this.router.navigate([this.successRoute], {\n        queryParams: {\n          identifier: this.identifier,\n        },\n      });\n    }\n  }\n\n  async sendEmail(doToast: boolean) {\n    if (this.selectedProviderType !== TwoFactorProviderType.Email) {\n      return;\n    }\n\n    if (this.emailPromise != null) {\n      return;\n    }\n\n    try {\n      const request = new TwoFactorEmailRequest();\n      request.email = this.authService.email;\n      request.masterPasswordHash = this.authService.masterPasswordHash;\n      request.deviceIdentifier = await this.appIdService.getAppId();\n      request.authRequestAccessCode = this.authService.accessCode;\n      request.authRequestId = this.authService.authRequestId;\n      this.emailPromise = this.apiService.postTwoFactorEmail(request);\n      await this.emailPromise;\n      if (doToast) {\n        this.platformUtilsService.showToast(\n          \"success\",\n          null,\n          this.i18nService.t(\"verificationCodeEmailSent\", this.twoFactorEmail)\n        );\n      }\n    } catch (e) {\n      this.logService.error(e);\n    }\n\n    this.emailPromise = null;\n  }\n\n  authWebAuthn() {\n    const providerData = this.twoFactorService.getProviders().get(this.selectedProviderType);\n\n    if (!this.webAuthnSupported || this.webAuthn == null) {\n      return;\n    }\n\n    this.webAuthn.init(providerData);\n  }\n\n  private cleanupWebAuthn() {\n    if (this.webAuthn != null) {\n      this.webAuthn.stop();\n      this.webAuthn.cleanup();\n    }\n  }\n\n  get authing(): boolean {\n    return (\n      this.authService.authingWithPassword() ||\n      this.authService.authingWithSso() ||\n      this.authService.authingWithUserApiKey() ||\n      this.authService.authingWithPasswordless()\n    );\n  }\n\n  get needsLock(): boolean {\n    return this.authService.authingWithSso() || this.authService.authingWithUserApiKey();\n  }\n}\n","<form id=\"two-factor-page\" #form (ngSubmit)=\"submit()\" [appApiAction]=\"formPromise\">\n  <header>\n    <div class=\"left\">\n      <button type=\"button\" routerLink=\"/login\">{{ \"back\" | i18n }}</button>\n    </div>\n    <h1 class=\"center\">\n      <span class=\"title\">{{ title }}</span>\n    </h1>\n    <div class=\"right\">\n      <button\n        type=\"submit\"\n        [disabled]=\"form.loading\"\n        *ngIf=\"\n          selectedProviderType != null &&\n          selectedProviderType !== providerType.Duo &&\n          selectedProviderType !== providerType.OrganizationDuo &&\n          (selectedProviderType !== providerType.WebAuthn || form.loading)\n        \"\n      >\n        <span [hidden]=\"form.loading\">{{ \"continue\" | i18n }}</span>\n        <i class=\"bwi bwi-spinner bwi-lg bwi-spin\" [hidden]=\"!form.loading\" aria-hidden=\"true\"></i>\n      </button>\n    </div>\n  </header>\n  <main tabindex=\"-1\">\n    <ng-container\n      *ngIf=\"\n        selectedProviderType === providerType.Authenticator ||\n        selectedProviderType === providerType.Email\n      \"\n    >\n      <div class=\"content text-center\">\n        <span *ngIf=\"selectedProviderType === providerType.Authenticator\">\n          {{ \"enterVerificationCodeApp\" | i18n }}\n        </span>\n        <span *ngIf=\"selectedProviderType === providerType.Email\">\n          {{ \"enterVerificationCodeEmail\" | i18n: twoFactorEmail }}\n        </span>\n      </div>\n      <div class=\"box first\">\n        <div class=\"box-content\">\n          <div class=\"box-content-row\" appBoxRow>\n            <label for=\"code\">{{ \"verificationCode\" | i18n }}</label>\n            <input\n              id=\"code\"\n              type=\"text\"\n              name=\"Code\"\n              [(ngModel)]=\"token\"\n              required\n              appAutofocus\n              inputmode=\"tel\"\n              appInputVerbatim\n            />\n          </div>\n          <div class=\"box-content-row box-content-row-checkbox\" appBoxRow>\n            <label for=\"remember\">{{ \"rememberMe\" | i18n }}</label>\n            <input id=\"remember\" type=\"checkbox\" name=\"Remember\" [(ngModel)]=\"remember\" />\n          </div>\n        </div>\n      </div>\n    </ng-container>\n    <ng-container *ngIf=\"selectedProviderType === providerType.Yubikey\">\n      <div class=\"content text-center\">\n        <p class=\"text-center\">{{ \"insertYubiKey\" | i18n }}</p>\n        <img src=\"../../popup/images/yubikey.jpg\" class=\"img-rounded img-responsive\" alt=\"\" />\n      </div>\n      <div class=\"box first\">\n        <div class=\"box-content\">\n          <div class=\"box-content-row\" appBoxRow>\n            <label for=\"code\" class=\"sr-only\">{{ \"verificationCode\" | i18n }}</label>\n            <input\n              id=\"code\"\n              type=\"password\"\n              name=\"Code\"\n              [(ngModel)]=\"token\"\n              required\n              appAutofocus\n              appInputVerbatim\n            />\n          </div>\n          <div class=\"box-content-row box-content-row-checkbox\" appBoxRow>\n            <label for=\"remember\">{{ \"rememberMe\" | i18n }}</label>\n            <input id=\"remember\" type=\"checkbox\" name=\"Remember\" [(ngModel)]=\"remember\" />\n          </div>\n        </div>\n      </div>\n    </ng-container>\n    <ng-container *ngIf=\"selectedProviderType === providerType.WebAuthn && !webAuthnNewTab\">\n      <div id=\"web-authn-frame\">\n        <iframe id=\"webauthn_iframe\" [attr.allow]=\"webAuthnAllow\"></iframe>\n      </div>\n      <div class=\"box\">\n        <div class=\"box-content\">\n          <div class=\"box-content-row box-content-row-checkbox\" appBoxRow>\n            <label for=\"remember\">{{ \"rememberMe\" | i18n }}</label>\n            <input id=\"remember\" type=\"checkbox\" name=\"Remember\" [(ngModel)]=\"remember\" />\n          </div>\n        </div>\n      </div>\n    </ng-container>\n    <ng-container *ngIf=\"selectedProviderType === providerType.WebAuthn && webAuthnNewTab\">\n      <div class=\"content text-center\" *ngIf=\"webAuthnNewTab\">\n        <p class=\"text-center\">{{ \"webAuthnNewTab\" | i18n }}</p>\n        <button type=\"button\" class=\"btn primary block\" (click)=\"authWebAuthn()\" appStopClick>\n          {{ \"webAuthnNewTabOpen\" | i18n }}\n        </button>\n      </div>\n    </ng-container>\n    <ng-container\n      *ngIf=\"\n        selectedProviderType === providerType.Duo ||\n        selectedProviderType === providerType.OrganizationDuo\n      \"\n    >\n      <div id=\"duo-frame\"><iframe id=\"duo_iframe\"></iframe></div>\n      <div class=\"box\">\n        <div class=\"box-content\">\n          <div class=\"box-content-row box-content-row-checkbox\" appBoxRow>\n            <label for=\"remember\">{{ \"rememberMe\" | i18n }}</label>\n            <input id=\"remember\" type=\"checkbox\" name=\"Remember\" [(ngModel)]=\"remember\" />\n          </div>\n        </div>\n      </div>\n    </ng-container>\n    <div class=\"box-content-row\" [hidden]=\"!showCaptcha()\">\n      <iframe id=\"hcaptcha_iframe\" height=\"80\"></iframe>\n    </div>\n    <div class=\"content\" *ngIf=\"selectedProviderType == null\">\n      <p class=\"text-center\">{{ \"noTwoStepProviders\" | i18n }}</p>\n      <p class=\"text-center\">{{ \"noTwoStepProviders2\" | i18n }}</p>\n    </div>\n    <div class=\"content no-vpad\" *ngIf=\"selectedProviderType != null\">\n      <p class=\"text-center\">\n        <button type=\"button\" appStopClick (click)=\"anotherMethod()\">\n          {{ \"useAnotherTwoStepMethod\" | i18n }}\n        </button>\n      </p>\n      <p *ngIf=\"selectedProviderType === providerType.Email\" class=\"text-center\">\n        <button type=\"button\" appStopClick (click)=\"sendEmail(true)\" [appApiAction]=\"emailPromise\">\n          {{ \"sendVerificationCodeEmailAgain\" | i18n }}\n        </button>\n      </p>\n    </div>\n  </main>\n</form>\n","import { Component } from \"@angular/core\";\nimport { ActivatedRoute, Router } from \"@angular/router\";\nimport { first } from \"rxjs/operators\";\n\nimport { TwoFactorComponent as BaseTwoFactorComponent } from \"@bitwarden/angular/components/two-factor.component\";\nimport { ApiService } from \"@bitwarden/common/abstractions/api.service\";\nimport { AppIdService } from \"@bitwarden/common/abstractions/appId.service\";\nimport { AuthService } from \"@bitwarden/common/abstractions/auth.service\";\nimport { BroadcasterService } from \"@bitwarden/common/abstractions/broadcaster.service\";\nimport { EnvironmentService } from \"@bitwarden/common/abstractions/environment.service\";\nimport { I18nService } from \"@bitwarden/common/abstractions/i18n.service\";\nimport { LogService } from \"@bitwarden/common/abstractions/log.service\";\nimport { LoginService } from \"@bitwarden/common/abstractions/login.service\";\nimport { MessagingService } from \"@bitwarden/common/abstractions/messaging.service\";\nimport { PlatformUtilsService } from \"@bitwarden/common/abstractions/platformUtils.service\";\nimport { StateService } from \"@bitwarden/common/abstractions/state.service\";\nimport { TwoFactorService } from \"@bitwarden/common/abstractions/twoFactor.service\";\nimport { TwoFactorProviderType } from \"@bitwarden/common/enums/twoFactorProviderType\";\nimport { SyncService } from \"@bitwarden/common/vault/abstractions/sync/sync.service.abstraction\";\n\nimport { BrowserApi } from \"../../browser/browserApi\";\nimport { PopupUtilsService } from \"../services/popup-utils.service\";\n\nconst BroadcasterSubscriptionId = \"TwoFactorComponent\";\n\n@Component({\n  selector: \"app-two-factor\",\n  templateUrl: \"two-factor.component.html\",\n})\nexport class TwoFactorComponent extends BaseTwoFactorComponent {\n  showNewWindowMessage = false;\n\n  constructor(\n    authService: AuthService,\n    router: Router,\n    i18nService: I18nService,\n    apiService: ApiService,\n    platformUtilsService: PlatformUtilsService,\n    private syncService: SyncService,\n    environmentService: EnvironmentService,\n    private broadcasterService: BroadcasterService,\n    private popupUtilsService: PopupUtilsService,\n    stateService: StateService,\n    route: ActivatedRoute,\n    private messagingService: MessagingService,\n    logService: LogService,\n    twoFactorService: TwoFactorService,\n    appIdService: AppIdService,\n    loginService: LoginService\n  ) {\n    super(\n      authService,\n      router,\n      i18nService,\n      apiService,\n      platformUtilsService,\n      window,\n      environmentService,\n      stateService,\n      route,\n      logService,\n      twoFactorService,\n      appIdService,\n      loginService\n    );\n    super.onSuccessfulLogin = () => {\n      this.loginService.clearValues();\n      return syncService.fullSync(true);\n    };\n    super.successRoute = \"/tabs/vault\";\n    // FIXME: Chromium 110 has broken WebAuthn support in extensions via an iframe\n    this.webAuthnNewTab = true;\n  }\n\n  async ngOnInit() {\n    if (this.route.snapshot.paramMap.has(\"webAuthnResponse\")) {\n      // WebAuthn fallback response\n      this.selectedProviderType = TwoFactorProviderType.WebAuthn;\n      this.token = this.route.snapshot.paramMap.get(\"webAuthnResponse\");\n      super.onSuccessfulLogin = async () => {\n        this.syncService.fullSync(true);\n        this.messagingService.send(\"reloadPopup\");\n        window.close();\n      };\n      this.remember = this.route.snapshot.paramMap.get(\"remember\") === \"true\";\n      await this.doSubmit();\n      return;\n    }\n\n    await super.ngOnInit();\n    if (this.selectedProviderType == null) {\n      return;\n    }\n\n    // WebAuthn prompt appears inside the popup on linux, and requires a larger popup width\n    // than usual to avoid cutting off the dialog.\n    if (this.selectedProviderType === TwoFactorProviderType.WebAuthn && (await this.isLinux())) {\n      document.body.classList.add(\"linux-webauthn\");\n    }\n\n    if (\n      this.selectedProviderType === TwoFactorProviderType.Email &&\n      this.popupUtilsService.inPopup(window)\n    ) {\n      const confirmed = await this.platformUtilsService.showDialog(\n        this.i18nService.t(\"popup2faCloseMessage\"),\n        null,\n        this.i18nService.t(\"yes\"),\n        this.i18nService.t(\"no\")\n      );\n      if (confirmed) {\n        this.popupUtilsService.popOut(window);\n      }\n    }\n\n    // eslint-disable-next-line rxjs-angular/prefer-takeuntil, rxjs/no-async-subscribe\n    this.route.queryParams.pipe(first()).subscribe(async (qParams) => {\n      if (qParams.sso === \"true\") {\n        super.onSuccessfulLogin = () => {\n          BrowserApi.reloadOpenWindows();\n          const thisWindow = window.open(\"\", \"_self\");\n          thisWindow.close();\n          return this.syncService.fullSync(true);\n        };\n      }\n    });\n  }\n\n  async ngOnDestroy() {\n    this.broadcasterService.unsubscribe(BroadcasterSubscriptionId);\n\n    if (this.selectedProviderType === TwoFactorProviderType.WebAuthn && (await this.isLinux())) {\n      document.body.classList.remove(\"linux-webauthn\");\n    }\n    super.ngOnDestroy();\n  }\n\n  anotherMethod() {\n    this.router.navigate([\"2fa-options\"]);\n  }\n\n  async isLinux() {\n    return (await BrowserApi.getPlatformInfo()).os === \"linux\";\n  }\n}\n","import { OrganizationUserResetPasswordRequest } from \"../../abstractions/organization-user/requests\";\n\nexport class UpdateTempPasswordRequest extends OrganizationUserResetPasswordRequest {\n  masterPasswordHint: string;\n}\n","export class OrganizationUserResetPasswordRequest {\n  newMasterPasswordHash: string;\n  key: string;\n}\n","import { Directive } from \"@angular/core\";\n\nimport { ApiService } from \"@bitwarden/common/abstractions/api.service\";\nimport { CryptoService } from \"@bitwarden/common/abstractions/crypto.service\";\nimport { I18nService } from \"@bitwarden/common/abstractions/i18n.service\";\nimport { LogService } from \"@bitwarden/common/abstractions/log.service\";\nimport { MessagingService } from \"@bitwarden/common/abstractions/messaging.service\";\nimport { PasswordGenerationService } from \"@bitwarden/common/abstractions/passwordGeneration.service\";\nimport { PlatformUtilsService } from \"@bitwarden/common/abstractions/platformUtils.service\";\nimport { PolicyService } from \"@bitwarden/common/abstractions/policy/policy.service.abstraction\";\nimport { StateService } from \"@bitwarden/common/abstractions/state.service\";\nimport { EncString } from \"@bitwarden/common/models/domain/enc-string\";\nimport { MasterPasswordPolicyOptions } from \"@bitwarden/common/models/domain/master-password-policy-options\";\nimport { SymmetricCryptoKey } from \"@bitwarden/common/models/domain/symmetric-crypto-key\";\nimport { UpdateTempPasswordRequest } from \"@bitwarden/common/models/request/update-temp-password.request\";\nimport { SyncService } from \"@bitwarden/common/vault/abstractions/sync/sync.service.abstraction\";\n\nimport { ChangePasswordComponent as BaseChangePasswordComponent } from \"./change-password.component\";\n\n@Directive()\nexport class UpdateTempPasswordComponent extends BaseChangePasswordComponent {\n  hint: string;\n  key: string;\n  enforcedPolicyOptions: MasterPasswordPolicyOptions;\n  showPassword = false;\n\n  onSuccessfulChangePassword: () => Promise<any>;\n\n  constructor(\n    i18nService: I18nService,\n    platformUtilsService: PlatformUtilsService,\n    passwordGenerationService: PasswordGenerationService,\n    policyService: PolicyService,\n    cryptoService: CryptoService,\n    messagingService: MessagingService,\n    private apiService: ApiService,\n    stateService: StateService,\n    private syncService: SyncService,\n    private logService: LogService\n  ) {\n    super(\n      i18nService,\n      cryptoService,\n      messagingService,\n      passwordGenerationService,\n      platformUtilsService,\n      policyService,\n      stateService\n    );\n  }\n\n  async ngOnInit() {\n    await this.syncService.fullSync(true);\n    super.ngOnInit();\n  }\n\n  togglePassword(confirmField: boolean) {\n    this.showPassword = !this.showPassword;\n    document.getElementById(confirmField ? \"masterPasswordRetype\" : \"masterPassword\").focus();\n  }\n\n  async setupSubmitActions(): Promise<boolean> {\n    this.email = await this.stateService.getEmail();\n    this.kdf = await this.stateService.getKdfType();\n    this.kdfConfig = await this.stateService.getKdfConfig();\n    return true;\n  }\n\n  async submit() {\n    // Validation\n    if (!(await this.strongPassword())) {\n      return;\n    }\n\n    if (!(await this.setupSubmitActions())) {\n      return;\n    }\n\n    try {\n      // Create new key and hash new password\n      const newKey = await this.cryptoService.makeKey(\n        this.masterPassword,\n        this.email.trim().toLowerCase(),\n        this.kdf,\n        this.kdfConfig\n      );\n      const newPasswordHash = await this.cryptoService.hashPassword(this.masterPassword, newKey);\n\n      // Grab user's current enc key\n      const userEncKey = await this.cryptoService.getEncKey();\n\n      // Create new encKey for the User\n      const newEncKey = await this.cryptoService.remakeEncKey(newKey, userEncKey);\n\n      await this.performSubmitActions(newPasswordHash, newKey, newEncKey);\n    } catch (e) {\n      this.logService.error(e);\n    }\n  }\n\n  async performSubmitActions(\n    masterPasswordHash: string,\n    key: SymmetricCryptoKey,\n    encKey: [SymmetricCryptoKey, EncString]\n  ) {\n    try {\n      // Create request\n      const request = new UpdateTempPasswordRequest();\n      request.key = encKey[1].encryptedString;\n      request.newMasterPasswordHash = masterPasswordHash;\n      request.masterPasswordHint = this.hint;\n\n      // Update user's password\n      this.formPromise = this.apiService.putUpdateTempPassword(request);\n      await this.formPromise;\n      this.platformUtilsService.showToast(\n        \"success\",\n        null,\n        this.i18nService.t(\"updatedMasterPassword\")\n      );\n\n      if (this.onSuccessfulChangePassword != null) {\n        this.onSuccessfulChangePassword();\n      } else {\n        this.messagingService.send(\"logout\");\n      }\n    } catch (e) {\n      this.logService.error(e);\n    }\n  }\n}\n","<form #form (ngSubmit)=\"submit()\" [appApiAction]=\"formPromise\">\n  <header>\n    <div class=\"left\">\n      <a (click)=\"logOut()\">{{ \"logOut\" | i18n }}</a>\n    </div>\n    <h1 class=\"center\">\n      <span class=\"title\">{{ \"updateMasterPassword\" | i18n }}</span>\n    </h1>\n    <div class=\"right\">\n      <button type=\"submit\" [disabled]=\"form.loading\">\n        <span [hidden]=\"form.loading\">{{ \"submit\" | i18n }}</span>\n        <i class=\"bwi bwi-spinner bwi-lg bwi-spin\" [hidden]=\"!form.loading\" aria-hidden=\"true\"></i>\n      </button>\n    </div>\n  </header>\n  <main tabindex=\"-1\">\n    <app-callout type=\"warning\" title=\"{{ 'updateMasterPassword' | i18n }}\">\n      {{ \"updateMasterPasswordWarning\" | i18n }}\n    </app-callout>\n    <app-callout\n      type=\"info\"\n      [enforcedPolicyOptions]=\"enforcedPolicyOptions\"\n      *ngIf=\"enforcedPolicyOptions\"\n    >\n    </app-callout>\n    <div class=\"box\">\n      <div class=\"box-content\">\n        <div class=\"box-content-row\" appBoxRow>\n          <div class=\"box-content-row-flex\">\n            <div class=\"row-main\">\n              <label for=\"masterPassword\">\n                {{ \"masterPass\" | i18n }}\n                <strong class=\"sub-label text-{{ color }}\" *ngIf=\"text\">\n                  {{ text }}\n                </strong>\n              </label>\n              <input\n                id=\"masterPassword\"\n                type=\"{{ showPassword ? 'text' : 'password' }}\"\n                name=\"MasterPassword\"\n                class=\"monospaced\"\n                [(ngModel)]=\"masterPassword\"\n                required\n                appInputVerbatim\n              />\n            </div>\n            <div class=\"action-buttons\">\n              <button\n                type=\"button\"\n                class=\"row-btn\"\n                appStopClick\n                appA11yTitle=\"{{ 'toggleVisibility' | i18n }}\"\n                (click)=\"togglePassword(false)\"\n                [attr.aria-pressed]=\"showPassword\"\n              >\n                <i\n                  class=\"bwi bwi-lg\"\n                  aria-hidden=\"true\"\n                  [ngClass]=\"{ 'bwi-eye': !showPassword, 'bwi-eye-slash': showPassword }\"\n                ></i>\n              </button>\n            </div>\n          </div>\n          <app-password-strength\n            [password]=\"masterPassword\"\n            [email]=\"email\"\n            (passwordStrengthResult)=\"getStrengthResult($event)\"\n            (passwordScoreColor)=\"getPasswordScoreText($event)\"\n          >\n          </app-password-strength>\n        </div>\n      </div>\n    </div>\n    <div class=\"box\">\n      <div class=\"box-content\">\n        <div class=\"box-content-row box-content-row-flex\" appBoxRow>\n          <div class=\"row-main\">\n            <label for=\"masterPasswordRetype\">{{ \"reTypeMasterPass\" | i18n }}</label>\n            <input\n              id=\"masterPasswordRetype\"\n              type=\"{{ showPassword ? 'text' : 'password' }}\"\n              name=\"MasterPasswordRetype\"\n              class=\"monospaced\"\n              [(ngModel)]=\"masterPasswordRetype\"\n              required\n              appInputVerbatim\n            />\n          </div>\n          <div class=\"action-buttons\">\n            <button\n              type=\"button\"\n              class=\"row-btn\"\n              appStopClick\n              appA11yTitle=\"{{ 'toggleVisibility' | i18n }}\"\n              (click)=\"togglePassword(true)\"\n              [attr.aria-pressed]=\"showPassword\"\n            >\n              <i\n                class=\"bwi bwi-lg\"\n                aria-hidden=\"true\"\n                [ngClass]=\"{ 'bwi-eye': !showPassword, 'bwi-eye-slash': showPassword }\"\n              ></i>\n            </button>\n          </div>\n        </div>\n      </div>\n    </div>\n    <div class=\"box\">\n      <div class=\"box-content\">\n        <div class=\"box-content-row\" appBoxRow>\n          <label for=\"hint\">{{ \"masterPassHint\" | i18n }}</label>\n          <input id=\"hint\" type=\"text\" name=\"Hint\" aria-describedby=\"hintHelp\" [(ngModel)]=\"hint\" />\n        </div>\n      </div>\n      <div id=\"hintHelp\" class=\"box-footer\">\n        {{ \"masterPassHintDesc\" | i18n }}\n      </div>\n    </div>\n  </main>\n</form>\n","import { Component } from \"@angular/core\";\n\nimport { UpdateTempPasswordComponent as BaseUpdateTempPasswordComponent } from \"@bitwarden/angular/components/update-temp-password.component\";\nimport { ApiService } from \"@bitwarden/common/abstractions/api.service\";\nimport { CryptoService } from \"@bitwarden/common/abstractions/crypto.service\";\nimport { I18nService } from \"@bitwarden/common/abstractions/i18n.service\";\nimport { LogService } from \"@bitwarden/common/abstractions/log.service\";\nimport { MessagingService } from \"@bitwarden/common/abstractions/messaging.service\";\nimport { PasswordGenerationService } from \"@bitwarden/common/abstractions/passwordGeneration.service\";\nimport { PlatformUtilsService } from \"@bitwarden/common/abstractions/platformUtils.service\";\nimport { PolicyService } from \"@bitwarden/common/abstractions/policy/policy.service.abstraction\";\nimport { StateService } from \"@bitwarden/common/abstractions/state.service\";\nimport { SyncService } from \"@bitwarden/common/vault/abstractions/sync/sync.service.abstraction\";\n\n@Component({\n  selector: \"app-update-temp-password\",\n  templateUrl: \"update-temp-password.component.html\",\n})\nexport class UpdateTempPasswordComponent extends BaseUpdateTempPasswordComponent {\n  constructor(\n    i18nService: I18nService,\n    platformUtilsService: PlatformUtilsService,\n    passwordGenerationService: PasswordGenerationService,\n    policyService: PolicyService,\n    cryptoService: CryptoService,\n    stateService: StateService,\n    messagingService: MessagingService,\n    apiService: ApiService,\n    syncService: SyncService,\n    logService: LogService\n  ) {\n    super(\n      i18nService,\n      platformUtilsService,\n      passwordGenerationService,\n      policyService,\n      cryptoService,\n      messagingService,\n      apiService,\n      stateService,\n      syncService,\n      logService\n    );\n  }\n}\n","export abstract class UsernameGenerationService {\n  generateUsername: (options: any) => Promise<string>;\n  generateWord: (options: any) => Promise<string>;\n  generateSubaddress: (options: any) => Promise<string>;\n  generateCatchall: (options: any) => Promise<string>;\n  generateForwarded: (options: any) => Promise<string>;\n  getOptions: () => Promise<any>;\n  saveOptions: (options: any) => Promise<void>;\n}\n","import { Directive, EventEmitter, Input, OnInit, Output } from \"@angular/core\";\nimport { ActivatedRoute } from \"@angular/router\";\nimport { first } from \"rxjs/operators\";\n\nimport { I18nService } from \"@bitwarden/common/abstractions/i18n.service\";\nimport { LogService } from \"@bitwarden/common/abstractions/log.service\";\nimport { PasswordGenerationService } from \"@bitwarden/common/abstractions/passwordGeneration.service\";\nimport { PlatformUtilsService } from \"@bitwarden/common/abstractions/platformUtils.service\";\nimport { StateService } from \"@bitwarden/common/abstractions/state.service\";\nimport { UsernameGenerationService } from \"@bitwarden/common/abstractions/usernameGeneration.service\";\nimport { PasswordGeneratorPolicyOptions } from \"@bitwarden/common/models/domain/password-generator-policy-options\";\n\n@Directive()\nexport class GeneratorComponent implements OnInit {\n  @Input() comingFromAddEdit = false;\n  @Input() type: string;\n  @Output() onSelected = new EventEmitter<string>();\n\n  usernameGeneratingPromise: Promise<string>;\n  typeOptions: any[];\n  passTypeOptions: any[];\n  usernameTypeOptions: any[];\n  subaddressOptions: any[];\n  catchallOptions: any[];\n  forwardOptions: any[];\n  usernameOptions: any = {};\n  passwordOptions: any = {};\n  username = \"-\";\n  password = \"-\";\n  showOptions = false;\n  avoidAmbiguous = false;\n  enforcedPasswordPolicyOptions: PasswordGeneratorPolicyOptions;\n  usernameWebsite: string = null;\n\n  constructor(\n    protected passwordGenerationService: PasswordGenerationService,\n    protected usernameGenerationService: UsernameGenerationService,\n    protected platformUtilsService: PlatformUtilsService,\n    protected stateService: StateService,\n    protected i18nService: I18nService,\n    protected logService: LogService,\n    protected route: ActivatedRoute,\n    private win: Window\n  ) {\n    this.typeOptions = [\n      { name: i18nService.t(\"password\"), value: \"password\" },\n      { name: i18nService.t(\"username\"), value: \"username\" },\n    ];\n    this.passTypeOptions = [\n      { name: i18nService.t(\"password\"), value: \"password\" },\n      { name: i18nService.t(\"passphrase\"), value: \"passphrase\" },\n    ];\n    this.usernameTypeOptions = [\n      {\n        name: i18nService.t(\"plusAddressedEmail\"),\n        value: \"subaddress\",\n        desc: i18nService.t(\"plusAddressedEmailDesc\"),\n      },\n      {\n        name: i18nService.t(\"catchallEmail\"),\n        value: \"catchall\",\n        desc: i18nService.t(\"catchallEmailDesc\"),\n      },\n      {\n        name: i18nService.t(\"forwardedEmail\"),\n        value: \"forwarded\",\n        desc: i18nService.t(\"forwardedEmailDesc\"),\n      },\n      { name: i18nService.t(\"randomWord\"), value: \"word\" },\n    ];\n    this.subaddressOptions = [{ name: i18nService.t(\"random\"), value: \"random\" }];\n    this.catchallOptions = [{ name: i18nService.t(\"random\"), value: \"random\" }];\n    this.initForwardOptions();\n  }\n\n  async ngOnInit() {\n    // eslint-disable-next-line rxjs/no-async-subscribe\n    this.route.queryParams.pipe(first()).subscribe(async (qParams) => {\n      const passwordOptionsResponse = await this.passwordGenerationService.getOptions();\n      this.passwordOptions = passwordOptionsResponse[0];\n      this.enforcedPasswordPolicyOptions = passwordOptionsResponse[1];\n      this.avoidAmbiguous = !this.passwordOptions.ambiguous;\n      this.passwordOptions.type =\n        this.passwordOptions.type === \"passphrase\" ? \"passphrase\" : \"password\";\n\n      this.usernameOptions = await this.usernameGenerationService.getOptions();\n      if (this.usernameOptions.type == null) {\n        this.usernameOptions.type = \"word\";\n      }\n      if (\n        this.usernameOptions.subaddressEmail == null ||\n        this.usernameOptions.subaddressEmail === \"\"\n      ) {\n        this.usernameOptions.subaddressEmail = await this.stateService.getEmail();\n      }\n      if (this.usernameWebsite == null) {\n        this.usernameOptions.subaddressType = this.usernameOptions.catchallType = \"random\";\n      } else {\n        this.usernameOptions.website = this.usernameWebsite;\n        const websiteOption = { name: this.i18nService.t(\"websiteName\"), value: \"website-name\" };\n        this.subaddressOptions.push(websiteOption);\n        this.catchallOptions.push(websiteOption);\n      }\n\n      if (this.type !== \"username\" && this.type !== \"password\") {\n        if (qParams.type === \"username\" || qParams.type === \"password\") {\n          this.type = qParams.type;\n        } else {\n          const generatorOptions = await this.stateService.getGeneratorOptions();\n          this.type = generatorOptions?.type ?? \"password\";\n        }\n      }\n      if (this.regenerateWithoutButtonPress()) {\n        await this.regenerate();\n      }\n    });\n  }\n\n  async typeChanged() {\n    await this.stateService.setGeneratorOptions({ type: this.type });\n    if (this.regenerateWithoutButtonPress()) {\n      await this.regenerate();\n    }\n  }\n\n  async regenerate() {\n    if (this.type === \"password\") {\n      await this.regeneratePassword();\n    } else if (this.type === \"username\") {\n      await this.regenerateUsername();\n    }\n  }\n\n  async sliderChanged() {\n    this.savePasswordOptions(false);\n    await this.passwordGenerationService.addHistory(this.password);\n  }\n\n  async sliderInput() {\n    this.normalizePasswordOptions();\n    this.password = await this.passwordGenerationService.generatePassword(this.passwordOptions);\n  }\n\n  async savePasswordOptions(regenerate = true) {\n    this.normalizePasswordOptions();\n    await this.passwordGenerationService.saveOptions(this.passwordOptions);\n\n    if (regenerate && this.regenerateWithoutButtonPress()) {\n      await this.regeneratePassword();\n    }\n  }\n\n  async saveUsernameOptions(regenerate = true) {\n    await this.usernameGenerationService.saveOptions(this.usernameOptions);\n    if (this.usernameOptions.type === \"forwarded\") {\n      this.username = \"-\";\n    }\n    if (regenerate && this.regenerateWithoutButtonPress()) {\n      await this.regenerateUsername();\n    }\n  }\n\n  async regeneratePassword() {\n    this.password = await this.passwordGenerationService.generatePassword(this.passwordOptions);\n    await this.passwordGenerationService.addHistory(this.password);\n  }\n\n  regenerateUsername() {\n    return this.generateUsername();\n  }\n\n  async generateUsername() {\n    try {\n      this.usernameGeneratingPromise = this.usernameGenerationService.generateUsername(\n        this.usernameOptions\n      );\n      this.username = await this.usernameGeneratingPromise;\n      if (this.username === \"\" || this.username === null) {\n        this.username = \"-\";\n      }\n    } catch (e) {\n      this.logService.error(e);\n    }\n  }\n\n  copy() {\n    const password = this.type === \"password\";\n    const copyOptions = this.win != null ? { window: this.win } : null;\n    this.platformUtilsService.copyToClipboard(\n      password ? this.password : this.username,\n      copyOptions\n    );\n    this.platformUtilsService.showToast(\n      \"info\",\n      null,\n      this.i18nService.t(\"valueCopied\", this.i18nService.t(password ? \"password\" : \"username\"))\n    );\n  }\n\n  select() {\n    this.onSelected.emit(this.type === \"password\" ? this.password : this.username);\n  }\n\n  toggleOptions() {\n    this.showOptions = !this.showOptions;\n  }\n\n  regenerateWithoutButtonPress() {\n    return this.type !== \"username\" || this.usernameOptions.type !== \"forwarded\";\n  }\n\n  private normalizePasswordOptions() {\n    // Application level normalize options depedent on class variables\n    this.passwordOptions.ambiguous = !this.avoidAmbiguous;\n\n    if (\n      !this.passwordOptions.uppercase &&\n      !this.passwordOptions.lowercase &&\n      !this.passwordOptions.number &&\n      !this.passwordOptions.special\n    ) {\n      this.passwordOptions.lowercase = true;\n      if (this.win != null) {\n        const lowercase = this.win.document.querySelector(\"#lowercase\") as HTMLInputElement;\n        if (lowercase) {\n          lowercase.checked = true;\n        }\n      }\n    }\n\n    this.passwordGenerationService.normalizeOptions(\n      this.passwordOptions,\n      this.enforcedPasswordPolicyOptions\n    );\n  }\n\n  private async initForwardOptions() {\n    this.forwardOptions = [\n      { name: \"AnonAddy\", value: \"anonaddy\" },\n      { name: \"DuckDuckGo\", value: \"duckduckgo\" },\n      { name: \"Fastmail\", value: \"fastmail\" },\n      { name: \"Firefox Relay\", value: \"firefoxrelay\" },\n      { name: \"SimpleLogin\", value: \"simplelogin\" },\n    ];\n\n    this.usernameOptions = await this.usernameGenerationService.getOptions();\n    if (\n      this.usernameOptions.forwardedService == null ||\n      this.usernameOptions.forwardedService === \"\"\n    ) {\n      this.forwardOptions.push({ name: \"\", value: null });\n    }\n\n    this.forwardOptions = this.forwardOptions.sort((a, b) => a.name.localeCompare(b.name));\n  }\n}\n","<header>\n  <div class=\"left\">\n    <app-pop-out [show]=\"!comingFromAddEdit\"></app-pop-out>\n    <button type=\"button\" (click)=\"close()\" *ngIf=\"comingFromAddEdit\">\n      {{ \"cancel\" | i18n }}\n    </button>\n  </div>\n  <h1 class=\"center\">\n    <span class=\"title\">{{ \"generator\" | i18n }}</span>\n  </h1>\n  <div class=\"right\">\n    <button type=\"button\" (click)=\"select()\" *ngIf=\"comingFromAddEdit\">\n      {{ \"select\" | i18n }}\n    </button>\n  </div>\n</header>\n<main tabindex=\"-1\">\n  <app-callout type=\"info\" *ngIf=\"enforcedPasswordPolicyOptions?.inEffect() && type === 'password'\">\n    {{ \"passwordGeneratorPolicyInEffect\" | i18n }}\n  </app-callout>\n  <div class=\"generated-block\" *ngIf=\"type === 'password'\">\n    <div class=\"generated-wrapper\" [innerHTML]=\"password | colorPassword\" appSelectCopy></div>\n    <div class=\"action-buttons\">\n      <button\n        type=\"button\"\n        class=\"row-btn\"\n        appStopClick\n        appA11yTitle=\"{{ 'copyPassword' | i18n }}\"\n        (click)=\"copy()\"\n      >\n        <i class=\"bwi bwi-lg bwi-clone\" aria-hidden=\"true\"></i>\n      </button>\n      <button\n        type=\"button\"\n        appStopClick\n        appA11yTitle=\"{{ 'regeneratePassword' | i18n }}\"\n        (click)=\"regenerate()\"\n      >\n        <i class=\"bwi bwi-lg bwi-generate\" aria-hidden=\"true\"></i>\n      </button>\n    </div>\n  </div>\n  <div class=\"generated-block\" *ngIf=\"type === 'username'\">\n    <div class=\"generated-wrapper\" [innerHTML]=\"username | colorPassword\" appSelectCopy></div>\n    <div class=\"action-buttons\" #form [appApiAction]=\"usernameGeneratingPromise\">\n      <button\n        type=\"button\"\n        class=\"row-btn\"\n        appStopClick\n        appA11yTitle=\"{{ 'copyUsername' | i18n }}\"\n        (click)=\"copy()\"\n      >\n        <i class=\"bwi bwi-lg bwi-clone\" aria-hidden=\"true\"></i>\n      </button>\n      <button\n        type=\"button\"\n        appStopClick\n        appA11yTitle=\"{{ 'regenerateUsername' | i18n }}\"\n        (click)=\"$any(form).loading ? false : regenerate()\"\n        [attr.aria-disabled]=\"$any(form).loading ? 'true' : null\"\n      >\n        <i\n          class=\"bwi bwi-lg bwi-generate\"\n          [ngClass]=\"$any(form).loading ? 'bwi-spin' : ''\"\n          aria-hidden=\"true\"\n        ></i>\n      </button>\n    </div>\n  </div>\n  <div class=\"box\">\n    <div class=\"box-content\">\n      <div class=\"box-content-row\" role=\"radiogroup\" aria-labelledby=\"typeHeading\">\n        <label id=\"typeHeading\" class=\"radio-header\">{{\n          \"whatWouldYouLikeToGenerate\" | i18n\n        }}</label>\n        <div class=\"radio-group text-default\" appBoxRow *ngFor=\"let o of typeOptions\">\n          <input\n            type=\"radio\"\n            [(ngModel)]=\"type\"\n            name=\"Type\"\n            id=\"type_{{ o.value }}\"\n            [value]=\"o.value\"\n            (change)=\"typeChanged()\"\n            [checked]=\"type === o.value\"\n            [disabled]=\"comingFromAddEdit && type !== o.value\"\n          />\n          <label for=\"type_{{ o.value }}\">\n            {{ o.name }}\n          </label>\n        </div>\n      </div>\n    </div>\n  </div>\n  <ng-container *ngIf=\"type === 'password'\">\n    <div class=\"box\">\n      <h2 class=\"box-header\">\n        {{ \"options\" | i18n }}\n      </h2>\n      <div class=\"box-content\">\n        <div class=\"box-content-row\" role=\"radiogroup\" aria-labelledby=\"passwordTypeHeading\">\n          <label id=\"passwordTypeHeading\" class=\"radio-header\">{{ \"passwordType\" | i18n }}</label>\n          <div class=\"radio-group text-default\" appBoxRow *ngFor=\"let o of passTypeOptions\">\n            <input\n              type=\"radio\"\n              [(ngModel)]=\"passwordOptions.type\"\n              name=\"PasswordType\"\n              id=\"passwordtype_{{ o.value }}\"\n              [value]=\"o.value\"\n              (change)=\"savePasswordOptions()\"\n              [checked]=\"passwordOptions.type === o.value\"\n            />\n            <label for=\"passwordtype_{{ o.value }}\">\n              {{ o.name }}\n            </label>\n          </div>\n        </div>\n      </div>\n    </div>\n    <div class=\"box\" *ngIf=\"passwordOptions.type === 'passphrase'\">\n      <div class=\"box-content\">\n        <div class=\"box-content-row box-content-row-input\" appBoxRow>\n          <label for=\"num-words\">{{ \"numWords\" | i18n }}</label>\n          <input\n            id=\"num-words\"\n            type=\"number\"\n            min=\"3\"\n            max=\"20\"\n            (change)=\"savePasswordOptions()\"\n            [(ngModel)]=\"passwordOptions.numWords\"\n          />\n        </div>\n        <div class=\"box-content-row box-content-row-input\" appBoxRow>\n          <label for=\"word-separator\">{{ \"wordSeparator\" | i18n }}</label>\n          <input\n            id=\"word-separator\"\n            type=\"text\"\n            maxlength=\"1\"\n            (input)=\"savePasswordOptions()\"\n            [(ngModel)]=\"passwordOptions.wordSeparator\"\n          />\n        </div>\n        <div class=\"box-content-row box-content-row-checkbox\" appBoxRow>\n          <label for=\"capitalize\">{{ \"capitalize\" | i18n }}</label>\n          <input\n            id=\"capitalize\"\n            type=\"checkbox\"\n            (change)=\"savePasswordOptions()\"\n            [(ngModel)]=\"passwordOptions.capitalize\"\n            [disabled]=\"enforcedPasswordPolicyOptions?.capitalize\"\n          />\n        </div>\n        <div class=\"box-content-row box-content-row-checkbox\" appBoxRow>\n          <label for=\"include-number\">{{ \"includeNumber\" | i18n }}</label>\n          <input\n            id=\"include-number\"\n            type=\"checkbox\"\n            (change)=\"savePasswordOptions()\"\n            [(ngModel)]=\"passwordOptions.includeNumber\"\n            [disabled]=\"enforcedPasswordPolicyOptions?.includeNumber\"\n          />\n        </div>\n      </div>\n    </div>\n    <ng-container *ngIf=\"passwordOptions.type === 'password'\">\n      <div class=\"box\">\n        <div class=\"box-content\">\n          <div class=\"box-content-row box-content-row-slider\" appBoxRow>\n            <label for=\"length\">{{ \"length\" | i18n }}</label>\n            <input\n              id=\"length\"\n              type=\"number\"\n              min=\"5\"\n              max=\"128\"\n              [(ngModel)]=\"passwordOptions.length\"\n              (change)=\"savePasswordOptions()\"\n            />\n            <input\n              id=\"lengthRange\"\n              type=\"range\"\n              min=\"5\"\n              max=\"128\"\n              step=\"1\"\n              [(ngModel)]=\"passwordOptions.length\"\n              (change)=\"sliderChanged()\"\n              (input)=\"sliderInput()\"\n              attr.aria-label=\"{{ 'length' | i18n }}\"\n              tabindex=\"-1\"\n            />\n          </div>\n          <div class=\"box-content-row box-content-row-checkbox\" appBoxRow>\n            <label for=\"uppercase\">A-Z</label>\n            <input\n              id=\"uppercase\"\n              type=\"checkbox\"\n              (change)=\"savePasswordOptions()\"\n              attr.aria-label=\"{{ 'uppercase' | i18n }}\"\n              [disabled]=\"enforcedPasswordPolicyOptions.useUppercase\"\n              [(ngModel)]=\"passwordOptions.uppercase\"\n            />\n          </div>\n          <div class=\"box-content-row box-content-row-checkbox\" appBoxRow>\n            <label for=\"lowercase\">a-z</label>\n            <input\n              id=\"lowercase\"\n              type=\"checkbox\"\n              (change)=\"savePasswordOptions()\"\n              attr.aria-label=\"{{ 'lowercase' | i18n }}\"\n              [disabled]=\"enforcedPasswordPolicyOptions.useLowercase\"\n              [(ngModel)]=\"passwordOptions.lowercase\"\n            />\n          </div>\n          <div class=\"box-content-row box-content-row-checkbox\" appBoxRow>\n            <label for=\"numbers\">0-9</label>\n            <input\n              id=\"numbers\"\n              type=\"checkbox\"\n              (change)=\"savePasswordOptions()\"\n              attr.aria-label=\"{{ 'numbers' | i18n }}\"\n              [disabled]=\"enforcedPasswordPolicyOptions.useNumbers\"\n              [(ngModel)]=\"passwordOptions.number\"\n            />\n          </div>\n          <div class=\"box-content-row box-content-row-checkbox\" appBoxRow>\n            <label for=\"special\">!@#$%^&*</label>\n            <input\n              id=\"special\"\n              type=\"checkbox\"\n              (change)=\"savePasswordOptions()\"\n              attr.aria-label=\"{{ 'specialCharacters' | i18n }}\"\n              [disabled]=\"enforcedPasswordPolicyOptions.useSpecial\"\n              [(ngModel)]=\"passwordOptions.special\"\n            />\n          </div>\n        </div>\n      </div>\n      <div class=\"box\">\n        <div class=\"box-content\">\n          <div class=\"box-content-row box-content-row-input\" appBoxRow>\n            <label for=\"min-number\">{{ \"minNumbers\" | i18n }}</label>\n            <input\n              id=\"min-number\"\n              type=\"number\"\n              min=\"0\"\n              max=\"9\"\n              (change)=\"savePasswordOptions()\"\n              [(ngModel)]=\"passwordOptions.minNumber\"\n            />\n          </div>\n          <div class=\"box-content-row box-content-row-input\" appBoxRow>\n            <label for=\"min-special\">{{ \"minSpecial\" | i18n }}</label>\n            <input\n              id=\"min-special\"\n              type=\"number\"\n              min=\"0\"\n              max=\"9\"\n              (change)=\"savePasswordOptions()\"\n              [(ngModel)]=\"passwordOptions.minSpecial\"\n            />\n          </div>\n          <div class=\"box-content-row box-content-row-checkbox\" appBoxRow>\n            <label for=\"ambiguous\">{{ \"avoidAmbChar\" | i18n }}</label>\n            <input\n              id=\"ambiguous\"\n              type=\"checkbox\"\n              (change)=\"savePasswordOptions()\"\n              [(ngModel)]=\"avoidAmbiguous\"\n            />\n          </div>\n        </div>\n      </div>\n    </ng-container>\n    <div class=\"box list\">\n      <div class=\"box-content single-line\">\n        <a class=\"box-content-row box-content-row-flex\" routerLink=\"/generator-history\">\n          <div class=\"row-main\">{{ \"passwordHistory\" | i18n }}</div>\n          <i class=\"bwi bwi-angle-right bwi-lg row-sub-icon\" aria-hidden=\"true\"></i>\n        </a>\n      </div>\n    </div>\n  </ng-container>\n  <ng-container *ngIf=\"type === 'username'\">\n    <div class=\"box\">\n      <h2 class=\"box-header\">\n        {{ \"options\" | i18n }}\n      </h2>\n      <div class=\"box-content\">\n        <div class=\"box-content-row\" role=\"radiogroup\" aria-labelledby=\"usernameTypeHeading\">\n          <label id=\"usernameTypeHeading\" class=\"radio-header\">\n            {{ \"usernameType\" | i18n }}\n            <a\n              href=\"https://bitwarden.com/help/generator/#username-types\"\n              target=\"_blank\"\n              rel=\"noopener\"\n              appA11yTitle=\"{{ 'learnMore' | i18n }}\"\n            >\n              <i class=\"bwi bwi-question-circle\" aria-hidden=\"true\"></i>\n            </a>\n          </label>\n          <div\n            class=\"radio-group align-start text-default\"\n            appBoxRow\n            *ngFor=\"let o of usernameTypeOptions\"\n          >\n            <input\n              type=\"radio\"\n              [(ngModel)]=\"usernameOptions.type\"\n              name=\"UsernameType\"\n              id=\"type_{{ o.value }}\"\n              [value]=\"o.value\"\n              (change)=\"saveUsernameOptions()\"\n              [checked]=\"usernameOptions.type === o.value\"\n            />\n            <label for=\"type_{{ o.value }}\">\n              {{ o.name }}\n              <div class=\"small text-muted\" *ngIf=\"o.desc\">\n                {{ o.desc }}\n              </div>\n            </label>\n          </div>\n        </div>\n      </div>\n    </div>\n    <div class=\"box\" *ngIf=\"usernameOptions.type === 'forwarded'\">\n      <div class=\"box-content\">\n        <div class=\"box-content-row\" role=\"listbox\" aria-labelledby=\"forwardTypeHeading\">\n          <label id=\"forwardTypeHeading\">{{ \"service\" | i18n }}</label>\n          <select\n            id=\"ForwardTypeDropdown\"\n            name=\"ForwardType\"\n            [(ngModel)]=\"usernameOptions.forwardedService\"\n            (change)=\"saveUsernameOptions()\"\n          >\n            <option *ngFor=\"let o of forwardOptions\" [ngValue]=\"o.value\" role=\"option\">\n              {{ o.name }}\n            </option>\n          </select>\n        </div>\n        <ng-container *ngIf=\"usernameOptions.forwardedService === 'simplelogin'\">\n          <div class=\"box-content-row\" appBoxRow>\n            <label for=\"simplelogin-apikey\">{{ \"apiKey\" | i18n }}</label>\n            <input\n              id=\"simplelogin-apikey\"\n              type=\"password\"\n              name=\"SimpleLoginApiKey\"\n              [(ngModel)]=\"usernameOptions.forwardedSimpleLoginApiKey\"\n              (blur)=\"saveUsernameOptions()\"\n            />\n          </div>\n        </ng-container>\n        <ng-container *ngIf=\"usernameOptions.forwardedService === 'duckduckgo'\">\n          <div class=\"box-content-row\" appBoxRow>\n            <label for=\"duckduckgo-apikey\">{{ \"apiKey\" | i18n }}</label>\n            <input\n              id=\"duckduckgo-apikey\"\n              type=\"password\"\n              name=\"DuckDuckGoApiKey\"\n              [(ngModel)]=\"usernameOptions.forwardedDuckDuckGoToken\"\n              (blur)=\"saveUsernameOptions()\"\n            />\n          </div>\n        </ng-container>\n        <ng-container *ngIf=\"usernameOptions.forwardedService === 'anonaddy'\">\n          <div class=\"box-content-row\" appBoxRow>\n            <label for=\"anonaddy-accessToken\">{{ \"apiAccessToken\" | i18n }}</label>\n            <input\n              id=\"anonaddy-accessToken\"\n              type=\"password\"\n              name=\"AnonAddyAccessToken\"\n              [(ngModel)]=\"usernameOptions.forwardedAnonAddyApiToken\"\n              (blur)=\"saveUsernameOptions()\"\n            />\n          </div>\n          <div class=\"box-content-row\" appBoxRow>\n            <label for=\"anonaddy-domain\">{{ \"domainName\" | i18n }}</label>\n            <input\n              id=\"anonaddy-domain\"\n              type=\"text\"\n              name=\"AnonAddyDomain\"\n              [(ngModel)]=\"usernameOptions.forwardedAnonAddyDomain\"\n              (blur)=\"saveUsernameOptions()\"\n            />\n          </div>\n        </ng-container>\n        <ng-container *ngIf=\"usernameOptions.forwardedService === 'firefoxrelay'\">\n          <div class=\"box-content-row\" appBoxRow>\n            <label for=\"firefox-apikey\">{{ \"apiAccessToken\" | i18n }}</label>\n            <input\n              id=\"firefox-apikey\"\n              type=\"password\"\n              name=\"FirefoxApiKey\"\n              [(ngModel)]=\"usernameOptions.forwardedFirefoxApiToken\"\n              (blur)=\"saveUsernameOptions()\"\n            />\n          </div>\n        </ng-container>\n        <ng-container *ngIf=\"usernameOptions.forwardedService === 'fastmail'\">\n          <div class=\"box-content-row\" appBoxRow>\n            <label for=\"fastmail-apiToken\">{{ \"apiAccessToken\" | i18n }}</label>\n            <input\n              id=\"fastmail-apiToken\"\n              type=\"password\"\n              name=\"FastmailApiToken\"\n              [(ngModel)]=\"usernameOptions.forwardedFastmailApiToken\"\n              (blur)=\"saveUsernameOptions()\"\n            />\n          </div>\n        </ng-container>\n      </div>\n    </div>\n    <div class=\"box\" *ngIf=\"usernameOptions.type === 'subaddress'\">\n      <div class=\"box-content\">\n        <div class=\"box-content-row\" appBoxRow>\n          <label for=\"subaddress-email\">{{ \"emailAddress\" | i18n }}</label>\n          <input\n            id=\"subaddress-email\"\n            type=\"text\"\n            name=\"SubaddressEmail\"\n            [(ngModel)]=\"usernameOptions.subaddressEmail\"\n            (blur)=\"saveUsernameOptions()\"\n          />\n        </div>\n        <div\n          class=\"box-content-row\"\n          role=\"radiogroup\"\n          aria-labelledby=\"subaddressTypeHeading\"\n          *ngIf=\"subaddressOptions.length > 1\"\n        >\n          <label id=\"subaddressTypeHeading\" class=\"radio-header\">{{ \"type\" | i18n }}</label>\n          <div class=\"radio-group text-default\" appBoxRow *ngFor=\"let o of subaddressOptions\">\n            <input\n              type=\"radio\"\n              [(ngModel)]=\"usernameOptions.subaddressType\"\n              name=\"SubaddressType\"\n              id=\"subaddresstype_{{ o.value }}\"\n              [value]=\"o.value\"\n              (change)=\"saveUsernameOptions()\"\n              [checked]=\"usernameOptions.subaddressType === o.value\"\n            />\n            <label for=\"subaddresstype_{{ o.value }}\">\n              {{ o.name }}\n            </label>\n          </div>\n        </div>\n        <div class=\"box-content-row\" appBoxRow *ngIf=\"usernameWebsite\">\n          <label for=\"subaddress-website\">{{ \"website\" | i18n }}</label>\n          <input\n            id=\"subaddress-website\"\n            type=\"text\"\n            name=\"SubaddressWebsite\"\n            [value]=\"usernameOptions.website\"\n            disabled\n            readonly\n          />\n        </div>\n      </div>\n    </div>\n    <div class=\"box\" *ngIf=\"usernameOptions.type === 'catchall'\">\n      <div class=\"box-content\">\n        <div class=\"box-content-row\" appBoxRow>\n          <label for=\"catchall-domain\">{{ \"domainName\" | i18n }}</label>\n          <input\n            id=\"catchall-domain\"\n            type=\"text\"\n            name=\"CatchallDomain\"\n            [(ngModel)]=\"usernameOptions.catchallDomain\"\n            (blur)=\"saveUsernameOptions()\"\n          />\n        </div>\n        <div\n          class=\"box-content-row\"\n          role=\"radiogroup\"\n          aria-labelledby=\"catchallTypeHeading\"\n          *ngIf=\"catchallOptions.length > 1\"\n        >\n          <label id=\"catchallTypeHeading\" class=\"radio-header\">{{ \"type\" | i18n }}</label>\n          <div class=\"radio-group text-default\" appBoxRow *ngFor=\"let o of catchallOptions\">\n            <input\n              type=\"radio\"\n              [(ngModel)]=\"usernameOptions.catchallType\"\n              name=\"CatchallType\"\n              id=\"catchalltype_{{ o.value }}\"\n              [value]=\"o.value\"\n              (change)=\"saveUsernameOptions()\"\n              [checked]=\"usernameOptions.catchallType === o.value\"\n            />\n            <label for=\"catchalltype_{{ o.value }}\">\n              {{ o.name }}\n            </label>\n          </div>\n        </div>\n        <div class=\"box-content-row\" appBoxRow *ngIf=\"usernameWebsite\">\n          <label for=\"catchall-website\">{{ \"website\" | i18n }}</label>\n          <input\n            id=\"catchall-website\"\n            type=\"text\"\n            name=\"CatchallWebsite\"\n            [value]=\"usernameOptions.website\"\n            disabled\n            readonly\n          />\n        </div>\n      </div>\n    </div>\n    <div class=\"box\" *ngIf=\"usernameOptions.type === 'word'\">\n      <div class=\"box-content\">\n        <div class=\"box-content-row box-content-row-checkbox\" appBoxRow>\n          <label for=\"capitalize\">{{ \"capitalize\" | i18n }}</label>\n          <input\n            id=\"capitalize\"\n            type=\"checkbox\"\n            (change)=\"saveUsernameOptions()\"\n            [(ngModel)]=\"usernameOptions.wordCapitalize\"\n          />\n        </div>\n        <div class=\"box-content-row box-content-row-checkbox\" appBoxRow>\n          <label for=\"include-number\">{{ \"includeNumber\" | i18n }}</label>\n          <input\n            id=\"include-number\"\n            type=\"checkbox\"\n            (change)=\"saveUsernameOptions()\"\n            [(ngModel)]=\"usernameOptions.wordIncludeNumber\"\n          />\n        </div>\n      </div>\n    </div>\n  </ng-container>\n</main>\n","import { Location } from \"@angular/common\";\nimport { Component } from \"@angular/core\";\nimport { ActivatedRoute } from \"@angular/router\";\n\nimport { GeneratorComponent as BaseGeneratorComponent } from \"@bitwarden/angular/components/generator.component\";\nimport { I18nService } from \"@bitwarden/common/abstractions/i18n.service\";\nimport { LogService } from \"@bitwarden/common/abstractions/log.service\";\nimport { PasswordGenerationService } from \"@bitwarden/common/abstractions/passwordGeneration.service\";\nimport { PlatformUtilsService } from \"@bitwarden/common/abstractions/platformUtils.service\";\nimport { StateService } from \"@bitwarden/common/abstractions/state.service\";\nimport { UsernameGenerationService } from \"@bitwarden/common/abstractions/usernameGeneration.service\";\nimport { CipherView } from \"@bitwarden/common/vault/models/view/cipher.view\";\n\n@Component({\n  selector: \"app-generator\",\n  templateUrl: \"generator.component.html\",\n})\nexport class GeneratorComponent extends BaseGeneratorComponent {\n  private addEditCipherInfo: any;\n  private cipherState: CipherView;\n\n  constructor(\n    passwordGenerationService: PasswordGenerationService,\n    usernameGenerationService: UsernameGenerationService,\n    platformUtilsService: PlatformUtilsService,\n    i18nService: I18nService,\n    stateService: StateService,\n    route: ActivatedRoute,\n    logService: LogService,\n    private location: Location\n  ) {\n    super(\n      passwordGenerationService,\n      usernameGenerationService,\n      platformUtilsService,\n      stateService,\n      i18nService,\n      logService,\n      route,\n      window\n    );\n  }\n\n  async ngOnInit() {\n    this.addEditCipherInfo = await this.stateService.getAddEditCipherInfo();\n    if (this.addEditCipherInfo != null) {\n      this.cipherState = this.addEditCipherInfo.cipher;\n    }\n    this.comingFromAddEdit = this.cipherState != null;\n    if (this.cipherState?.login?.hasUris) {\n      this.usernameWebsite = this.cipherState.login.uris[0].hostname;\n    }\n    await super.ngOnInit();\n  }\n\n  select() {\n    super.select();\n    if (this.type === \"password\") {\n      this.cipherState.login.password = this.password;\n    } else if (this.type === \"username\") {\n      this.cipherState.login.username = this.username;\n    }\n    this.addEditCipherInfo.cipher = this.cipherState;\n    this.stateService.setAddEditCipherInfo(this.addEditCipherInfo);\n    this.close();\n  }\n\n  close() {\n    this.location.back();\n  }\n}\n","export enum SendType {\n  Text = 0,\n  File = 1,\n}\n","import { Directive, OnInit } from \"@angular/core\";\n\nimport { I18nService } from \"@bitwarden/common/abstractions/i18n.service\";\nimport { PasswordGenerationService } from \"@bitwarden/common/abstractions/passwordGeneration.service\";\nimport { PlatformUtilsService } from \"@bitwarden/common/abstractions/platformUtils.service\";\nimport { GeneratedPasswordHistory } from \"@bitwarden/common/models/domain/generated-password-history\";\n\n@Directive()\nexport class PasswordGeneratorHistoryComponent implements OnInit {\n  history: GeneratedPasswordHistory[] = [];\n\n  constructor(\n    protected passwordGenerationService: PasswordGenerationService,\n    protected platformUtilsService: PlatformUtilsService,\n    protected i18nService: I18nService,\n    private win: Window\n  ) {}\n\n  async ngOnInit() {\n    this.history = await this.passwordGenerationService.getHistory();\n  }\n\n  clear() {\n    this.history = [];\n    this.passwordGenerationService.clear();\n  }\n\n  copy(password: string) {\n    const copyOptions = this.win != null ? { window: this.win } : null;\n    this.platformUtilsService.copyToClipboard(password, copyOptions);\n    this.platformUtilsService.showToast(\n      \"info\",\n      null,\n      this.i18nService.t(\"valueCopied\", this.i18nService.t(\"password\"))\n    );\n  }\n}\n","<header>\n  <div class=\"left\">\n    <button type=\"button\" type=\"button\" (click)=\"close()\">\n      <span class=\"header-icon\" aria-hidden=\"true\"><i class=\"bwi bwi-angle-left\"></i></span>\n      <span>{{ \"back\" | i18n }}</span>\n    </button>\n  </div>\n  <h1 class=\"center\">\n    <span class=\"title\">{{ \"passwordHistory\" | i18n }}</span>\n  </h1>\n  <div class=\"right\">\n    <button type=\"button\" type=\"button\" (click)=\"clear()\">\n      {{ \"clear\" | i18n }}\n    </button>\n  </div>\n</header>\n<main tabindex=\"-1\">\n  <div class=\"box list full-list\" *ngIf=\"history && history.length\">\n    <div class=\"box-content\">\n      <div class=\"box-content-row box-content-row-flex\" *ngFor=\"let h of history\">\n        <div class=\"row-main\">\n          <div class=\"row-main-content\">\n            <div\n              class=\"monospaced password-wrapper\"\n              appSelectCopy\n              [innerHTML]=\"h.password | colorPassword\"\n            ></div>\n            <span class=\"detail\">{{ h.date | date: \"medium\" }}</span>\n          </div>\n        </div>\n        <div class=\"action-buttons\">\n          <button\n            type=\"button\"\n            class=\"row-btn\"\n            appStopClick\n            appA11yTitle=\"{{ 'copyPassword' | i18n }}\"\n            (click)=\"copy(h.password)\"\n          >\n            <i class=\"bwi bwi-lg bwi-clone\" aria-hidden=\"true\"></i>\n          </button>\n        </div>\n      </div>\n    </div>\n  </div>\n  <div class=\"no-items\" *ngIf=\"!history || !history.length\">\n    <p>{{ \"noPasswordsInList\" | i18n }}</p>\n  </div>\n</main>\n","import { Location } from \"@angular/common\";\nimport { Component } from \"@angular/core\";\n\nimport { PasswordGeneratorHistoryComponent as BasePasswordGeneratorHistoryComponent } from \"@bitwarden/angular/components/password-generator-history.component\";\nimport { I18nService } from \"@bitwarden/common/abstractions/i18n.service\";\nimport { PasswordGenerationService } from \"@bitwarden/common/abstractions/passwordGeneration.service\";\nimport { PlatformUtilsService } from \"@bitwarden/common/abstractions/platformUtils.service\";\n\n@Component({\n  selector: \"app-password-generator-history\",\n  templateUrl: \"password-generator-history.component.html\",\n})\nexport class PasswordGeneratorHistoryComponent extends BasePasswordGeneratorHistoryComponent {\n  constructor(\n    passwordGenerationService: PasswordGenerationService,\n    platformUtilsService: PlatformUtilsService,\n    i18nService: I18nService,\n    private location: Location\n  ) {\n    super(passwordGenerationService, platformUtilsService, i18nService, window);\n  }\n\n  close() {\n    this.location.back();\n  }\n}\n","import { DeepJsonify } from \"../../types/deep-jsonify\";\nimport { SendFile } from \"../domain/send-file\";\n\nimport { View } from \"./view\";\n\nexport class SendFileView implements View {\n  id: string = null;\n  size: string = null;\n  sizeName: string = null;\n  fileName: string = null;\n\n  constructor(f?: SendFile) {\n    if (!f) {\n      return;\n    }\n\n    this.id = f.id;\n    this.size = f.size;\n    this.sizeName = f.sizeName;\n  }\n\n  get fileSize(): number {\n    try {\n      if (this.size != null) {\n        return parseInt(this.size, null);\n      }\n    } catch {\n      // Invalid file size.\n    }\n    return 0;\n  }\n\n  static fromJSON(json: DeepJsonify<SendFileView>) {\n    if (json == null) {\n      return null;\n    }\n\n    return Object.assign(new SendFileView(), json);\n  }\n}\n","import { DeepJsonify } from \"../../types/deep-jsonify\";\nimport { SendText } from \"../domain/send-text\";\n\nimport { View } from \"./view\";\n\nexport class SendTextView implements View {\n  text: string = null;\n  hidden: boolean;\n\n  constructor(t?: SendText) {\n    if (!t) {\n      return;\n    }\n\n    this.hidden = t.hidden;\n  }\n\n  get maskedText(): string {\n    return this.text != null ? \"••••••••\" : null;\n  }\n\n  static fromJSON(json: DeepJsonify<SendTextView>) {\n    if (json == null) {\n      return null;\n    }\n\n    return Object.assign(new SendTextView(), json);\n  }\n}\n","import { SendType } from \"../../enums/sendType\";\nimport { Utils } from \"../../misc/utils\";\nimport { DeepJsonify } from \"../../types/deep-jsonify\";\nimport { Send } from \"../domain/send\";\nimport { SymmetricCryptoKey } from \"../domain/symmetric-crypto-key\";\n\nimport { SendFileView } from \"./send-file.view\";\nimport { SendTextView } from \"./send-text.view\";\nimport { View } from \"./view\";\n\nexport class SendView implements View {\n  id: string = null;\n  accessId: string = null;\n  name: string = null;\n  notes: string = null;\n  key: ArrayBuffer;\n  cryptoKey: SymmetricCryptoKey;\n  type: SendType = null;\n  text = new SendTextView();\n  file = new SendFileView();\n  maxAccessCount?: number = null;\n  accessCount = 0;\n  revisionDate: Date = null;\n  deletionDate: Date = null;\n  expirationDate: Date = null;\n  password: string = null;\n  disabled = false;\n  hideEmail = false;\n\n  constructor(s?: Send) {\n    if (!s) {\n      return;\n    }\n\n    this.id = s.id;\n    this.accessId = s.accessId;\n    this.type = s.type;\n    this.maxAccessCount = s.maxAccessCount;\n    this.accessCount = s.accessCount;\n    this.revisionDate = s.revisionDate;\n    this.deletionDate = s.deletionDate;\n    this.expirationDate = s.expirationDate;\n    this.disabled = s.disabled;\n    this.password = s.password;\n    this.hideEmail = s.hideEmail;\n  }\n\n  get urlB64Key(): string {\n    return Utils.fromBufferToUrlB64(this.key);\n  }\n\n  get maxAccessCountReached(): boolean {\n    if (this.maxAccessCount == null) {\n      return false;\n    }\n    return this.accessCount >= this.maxAccessCount;\n  }\n\n  get expired(): boolean {\n    if (this.expirationDate == null) {\n      return false;\n    }\n    return this.expirationDate <= new Date();\n  }\n\n  get pendingDelete(): boolean {\n    return this.deletionDate <= new Date();\n  }\n\n  toJSON() {\n    return Utils.merge(this, {\n      key: Utils.fromBufferToB64(this.key),\n    });\n  }\n\n  static fromJSON(json: DeepJsonify<SendView>) {\n    if (json == null) {\n      return null;\n    }\n\n    return Object.assign(new SendView(), json, {\n      key: Utils.fromB64ToArray(json.key)?.buffer,\n      cryptoKey: SymmetricCryptoKey.fromJSON(json.cryptoKey),\n      text: SendTextView.fromJSON(json.text),\n      file: SendFileView.fromJSON(json.file),\n      revisionDate: json.revisionDate == null ? null : new Date(json.revisionDate),\n      deletionDate: json.deletionDate == null ? null : new Date(json.deletionDate),\n      expirationDate: json.expirationDate == null ? null : new Date(json.expirationDate),\n    });\n  }\n}\n","import { SendData } from \"../models/data/send.data\";\nimport { EncArrayBuffer } from \"../models/domain/enc-array-buffer\";\nimport { Send } from \"../models/domain/send\";\nimport { SymmetricCryptoKey } from \"../models/domain/symmetric-crypto-key\";\nimport { SendView } from \"../models/view/send.view\";\n\nexport abstract class SendService {\n  clearCache: () => Promise<void>;\n  encrypt: (\n    model: SendView,\n    file: File | ArrayBuffer,\n    password: string,\n    key?: SymmetricCryptoKey\n  ) => Promise<[Send, EncArrayBuffer]>;\n  get: (id: string) => Promise<Send>;\n  getAll: () => Promise<Send[]>;\n  getAllDecrypted: () => Promise<SendView[]>;\n  saveWithServer: (sendData: [Send, EncArrayBuffer]) => Promise<any>;\n  upsert: (send: SendData | SendData[]) => Promise<any>;\n  replace: (sends: { [id: string]: SendData }) => Promise<any>;\n  clear: (userId: string) => Promise<any>;\n  delete: (id: string | string[]) => Promise<any>;\n  deleteWithServer: (id: string) => Promise<any>;\n  removePasswordWithServer: (id: string) => Promise<any>;\n}\n","import { DatePipe } from \"@angular/common\";\nimport { Directive, EventEmitter, Input, OnInit, Output } from \"@angular/core\";\nimport { UntypedFormControl, UntypedFormGroup } from \"@angular/forms\";\n\nimport { I18nService } from \"@bitwarden/common/abstractions/i18n.service\";\nimport { PlatformUtilsService } from \"@bitwarden/common/abstractions/platformUtils.service\";\n\n// Different BrowserPath = different controls.\nenum BrowserPath {\n  // Native datetime-locale.\n  // We are happy.\n  Default = \"default\",\n\n  // Native date and time inputs, but no datetime-locale.\n  // We use individual date and time inputs and create a datetime programatically on submit.\n  Firefox = \"firefox\",\n\n  // No native date, time, or datetime-locale inputs.\n  // We use a polyfill for dates and a dropdown for times.\n  Safari = \"safari\",\n}\n\nenum DateField {\n  DeletionDate = \"deletion\",\n  ExpriationDate = \"expiration\",\n}\n\n// Value = hours\nenum DatePreset {\n  OneHour = 1,\n  OneDay = 24,\n  TwoDays = 48,\n  ThreeDays = 72,\n  SevenDays = 168,\n  ThirtyDays = 720,\n  Custom = 0,\n  Never = null,\n}\n\n// TimeOption is used for the dropdown implementation of custom times\n// twelveHour = displayed time; twentyFourHour = time used in logic\ninterface TimeOption {\n  twelveHour: string;\n  twentyFourHour: string;\n}\n\n@Directive()\nexport class EffluxDatesComponent implements OnInit {\n  @Input() readonly initialDeletionDate: Date;\n  @Input() readonly initialExpirationDate: Date;\n  @Input() readonly editMode: boolean;\n  @Input() readonly disabled: boolean;\n\n  @Output() datesChanged = new EventEmitter<{ deletionDate: string; expirationDate: string }>();\n\n  get browserPath(): BrowserPath {\n    if (this.platformUtilsService.isFirefox()) {\n      return BrowserPath.Firefox;\n    } else if (this.platformUtilsService.isSafari()) {\n      return BrowserPath.Safari;\n    }\n    return BrowserPath.Default;\n  }\n\n  datesForm = new UntypedFormGroup({\n    selectedDeletionDatePreset: new UntypedFormControl(),\n    selectedExpirationDatePreset: new UntypedFormControl(),\n    defaultDeletionDateTime: new UntypedFormControl(),\n    defaultExpirationDateTime: new UntypedFormControl(),\n    fallbackDeletionDate: new UntypedFormControl(),\n    fallbackDeletionTime: new UntypedFormControl(),\n    fallbackExpirationDate: new UntypedFormControl(),\n    fallbackExpirationTime: new UntypedFormControl(),\n  });\n\n  deletionDatePresets: any[] = [\n    { name: this.i18nService.t(\"oneHour\"), value: DatePreset.OneHour },\n    { name: this.i18nService.t(\"oneDay\"), value: DatePreset.OneDay },\n    { name: this.i18nService.t(\"days\", \"2\"), value: DatePreset.TwoDays },\n    { name: this.i18nService.t(\"days\", \"3\"), value: DatePreset.ThreeDays },\n    { name: this.i18nService.t(\"days\", \"7\"), value: DatePreset.SevenDays },\n    { name: this.i18nService.t(\"days\", \"30\"), value: DatePreset.ThirtyDays },\n    { name: this.i18nService.t(\"custom\"), value: DatePreset.Custom },\n  ];\n\n  expirationDatePresets: any[] = [\n    { name: this.i18nService.t(\"never\"), value: DatePreset.Never },\n  ].concat([...this.deletionDatePresets]);\n\n  get selectedDeletionDatePreset(): UntypedFormControl {\n    return this.datesForm.get(\"selectedDeletionDatePreset\") as UntypedFormControl;\n  }\n\n  get selectedExpirationDatePreset(): UntypedFormControl {\n    return this.datesForm.get(\"selectedExpirationDatePreset\") as UntypedFormControl;\n  }\n\n  get defaultDeletionDateTime(): UntypedFormControl {\n    return this.datesForm.get(\"defaultDeletionDateTime\") as UntypedFormControl;\n  }\n\n  get defaultExpirationDateTime(): UntypedFormControl {\n    return this.datesForm.get(\"defaultExpirationDateTime\") as UntypedFormControl;\n  }\n\n  get fallbackDeletionDate(): UntypedFormControl {\n    return this.datesForm.get(\"fallbackDeletionDate\") as UntypedFormControl;\n  }\n\n  get fallbackDeletionTime(): UntypedFormControl {\n    return this.datesForm.get(\"fallbackDeletionTime\") as UntypedFormControl;\n  }\n\n  get fallbackExpirationDate(): UntypedFormControl {\n    return this.datesForm.get(\"fallbackExpirationDate\") as UntypedFormControl;\n  }\n\n  get fallbackExpirationTime(): UntypedFormControl {\n    return this.datesForm.get(\"fallbackExpirationTime\") as UntypedFormControl;\n  }\n\n  // Should be able to call these at any time and compute a submitable value\n  get formattedDeletionDate(): string {\n    switch (this.selectedDeletionDatePreset.value as DatePreset) {\n      case DatePreset.Never:\n        this.selectedDeletionDatePreset.setValue(DatePreset.SevenDays);\n        return this.formattedDeletionDate;\n      case DatePreset.Custom:\n        switch (this.browserPath) {\n          case BrowserPath.Safari:\n          case BrowserPath.Firefox:\n            return this.fallbackDeletionDate.value + \"T\" + this.fallbackDeletionTime.value;\n          default:\n            return this.defaultDeletionDateTime.value;\n        }\n      default: {\n        const now = new Date();\n        const miliseconds = now.setTime(\n          now.getTime() + (this.selectedDeletionDatePreset.value as number) * 60 * 60 * 1000\n        );\n        return new Date(miliseconds).toString();\n      }\n    }\n  }\n\n  get formattedExpirationDate(): string {\n    switch (this.selectedExpirationDatePreset.value as DatePreset) {\n      case DatePreset.Never:\n        return null;\n      case DatePreset.Custom:\n        switch (this.browserPath) {\n          case BrowserPath.Safari:\n          case BrowserPath.Firefox:\n            if (\n              (!this.fallbackExpirationDate.value || !this.fallbackExpirationTime.value) &&\n              this.editMode\n            ) {\n              return null;\n            }\n            return this.fallbackExpirationDate.value + \"T\" + this.fallbackExpirationTime.value;\n          default:\n            if (!this.defaultExpirationDateTime.value) {\n              return null;\n            }\n            return this.defaultExpirationDateTime.value;\n        }\n      default: {\n        const now = new Date();\n        const miliseconds = now.setTime(\n          now.getTime() + (this.selectedExpirationDatePreset.value as number) * 60 * 60 * 1000\n        );\n        return new Date(miliseconds).toString();\n      }\n    }\n  }\n  //\n\n  get safariDeletionTimePresetOptions() {\n    return this.safariTimePresetOptions(DateField.DeletionDate);\n  }\n\n  get safariExpirationTimePresetOptions() {\n    return this.safariTimePresetOptions(DateField.ExpriationDate);\n  }\n\n  private get nextWeek(): Date {\n    const nextWeek = new Date();\n    nextWeek.setDate(nextWeek.getDate() + 7);\n    return nextWeek;\n  }\n\n  constructor(\n    protected i18nService: I18nService,\n    protected platformUtilsService: PlatformUtilsService,\n    protected datePipe: DatePipe\n  ) {}\n\n  ngOnInit(): void {\n    this.setInitialFormValues();\n    this.emitDates();\n    this.datesForm.valueChanges.subscribe(() => {\n      this.emitDates();\n    });\n  }\n\n  onDeletionDatePresetSelect(value: DatePreset) {\n    this.selectedDeletionDatePreset.setValue(value);\n  }\n\n  clearExpiration() {\n    switch (this.browserPath) {\n      case BrowserPath.Safari:\n      case BrowserPath.Firefox:\n        this.fallbackExpirationDate.setValue(null);\n        this.fallbackExpirationTime.setValue(null);\n        break;\n      case BrowserPath.Default:\n        this.defaultExpirationDateTime.setValue(null);\n        break;\n    }\n  }\n\n  protected emitDates() {\n    this.datesChanged.emit({\n      deletionDate: this.formattedDeletionDate,\n      expirationDate: this.formattedExpirationDate,\n    });\n  }\n\n  protected setInitialFormValues() {\n    if (this.editMode) {\n      this.selectedDeletionDatePreset.setValue(DatePreset.Custom);\n      this.selectedExpirationDatePreset.setValue(DatePreset.Custom);\n      switch (this.browserPath) {\n        case BrowserPath.Safari:\n        case BrowserPath.Firefox:\n          this.fallbackDeletionDate.setValue(this.initialDeletionDate.toISOString().slice(0, 10));\n          this.fallbackDeletionTime.setValue(this.initialDeletionDate.toTimeString().slice(0, 5));\n          if (this.initialExpirationDate != null) {\n            this.fallbackExpirationDate.setValue(\n              this.initialExpirationDate.toISOString().slice(0, 10)\n            );\n            this.fallbackExpirationTime.setValue(\n              this.initialExpirationDate.toTimeString().slice(0, 5)\n            );\n          }\n          break;\n        case BrowserPath.Default:\n          if (this.initialExpirationDate) {\n            this.defaultExpirationDateTime.setValue(\n              this.datePipe.transform(new Date(this.initialExpirationDate), \"yyyy-MM-ddTHH:mm\")\n            );\n          }\n          this.defaultDeletionDateTime.setValue(\n            this.datePipe.transform(new Date(this.initialDeletionDate), \"yyyy-MM-ddTHH:mm\")\n          );\n          break;\n      }\n    } else {\n      this.selectedDeletionDatePreset.setValue(DatePreset.SevenDays);\n      this.selectedExpirationDatePreset.setValue(DatePreset.Never);\n\n      switch (this.browserPath) {\n        case BrowserPath.Safari:\n          this.fallbackDeletionDate.setValue(this.nextWeek.toISOString().slice(0, 10));\n          this.fallbackDeletionTime.setValue(\n            this.safariTimePresetOptions(DateField.DeletionDate)[1].twentyFourHour\n          );\n          break;\n        default:\n          break;\n      }\n    }\n  }\n\n  protected safariTimePresetOptions(field: DateField): TimeOption[] {\n    // init individual arrays for major sort groups\n    const noon: TimeOption[] = [];\n    const midnight: TimeOption[] = [];\n    const ams: TimeOption[] = [];\n    const pms: TimeOption[] = [];\n\n    // determine minute skip (5 min, 10 min, 15 min, etc.)\n    const minuteIncrementer = 15;\n\n    // loop through each hour on a 12 hour system\n    for (let h = 1; h <= 12; h++) {\n      // loop through each minute in the hour using the skip to incriment\n      for (let m = 0; m < 60; m += minuteIncrementer) {\n        // init the final strings that will be added to the lists\n        let hour = h.toString();\n        let minutes = m.toString();\n\n        // add prepending 0s to single digit hours/minutes\n        if (h < 10) {\n          hour = \"0\" + hour;\n        }\n        if (m < 10) {\n          minutes = \"0\" + minutes;\n        }\n\n        // build time strings and push to relevant sort groups\n        if (h === 12) {\n          const midnightOption: TimeOption = {\n            twelveHour: `${hour}:${minutes} AM`,\n            twentyFourHour: `00:${minutes}`,\n          };\n          midnight.push(midnightOption);\n\n          const noonOption: TimeOption = {\n            twelveHour: `${hour}:${minutes} PM`,\n            twentyFourHour: `${hour}:${minutes}`,\n          };\n          noon.push(noonOption);\n        } else {\n          const amOption: TimeOption = {\n            twelveHour: `${hour}:${minutes} AM`,\n            twentyFourHour: `${hour}:${minutes}`,\n          };\n          ams.push(amOption);\n\n          const pmOption: TimeOption = {\n            twelveHour: `${hour}:${minutes} PM`,\n            twentyFourHour: `${h + 12}:${minutes}`,\n          };\n          pms.push(pmOption);\n        }\n      }\n    }\n\n    // bring all the arrays together in the right order\n    const validTimes = [...midnight, ...ams, ...noon, ...pms];\n\n    // determine if an unsupported value already exists on the send & add that to the top of the option list\n    // example: if the Send was created with a different client\n    if (field === DateField.ExpriationDate && this.initialExpirationDate != null && this.editMode) {\n      const previousValue: TimeOption = {\n        twelveHour: this.datePipe.transform(this.initialExpirationDate, \"hh:mm a\"),\n        twentyFourHour: this.datePipe.transform(this.initialExpirationDate, \"HH:mm\"),\n      };\n      return [previousValue, { twelveHour: null, twentyFourHour: null }, ...validTimes];\n    } else if (\n      field === DateField.DeletionDate &&\n      this.initialDeletionDate != null &&\n      this.editMode\n    ) {\n      const previousValue: TimeOption = {\n        twelveHour: this.datePipe.transform(this.initialDeletionDate, \"hh:mm a\"),\n        twentyFourHour: this.datePipe.transform(this.initialDeletionDate, \"HH:mm\"),\n      };\n      return [previousValue, ...validTimes];\n    } else {\n      return [{ twelveHour: null, twentyFourHour: null }, ...validTimes];\n    }\n  }\n}\n","import { DatePipe } from \"@angular/common\";\nimport { Directive, EventEmitter, Input, OnDestroy, OnInit, Output } from \"@angular/core\";\nimport { Subject, takeUntil } from \"rxjs\";\n\nimport { EnvironmentService } from \"@bitwarden/common/abstractions/environment.service\";\nimport { I18nService } from \"@bitwarden/common/abstractions/i18n.service\";\nimport { LogService } from \"@bitwarden/common/abstractions/log.service\";\nimport { MessagingService } from \"@bitwarden/common/abstractions/messaging.service\";\nimport { PlatformUtilsService } from \"@bitwarden/common/abstractions/platformUtils.service\";\nimport { PolicyService } from \"@bitwarden/common/abstractions/policy/policy.service.abstraction\";\nimport { SendService } from \"@bitwarden/common/abstractions/send.service\";\nimport { StateService } from \"@bitwarden/common/abstractions/state.service\";\nimport { PolicyType } from \"@bitwarden/common/enums/policyType\";\nimport { SendType } from \"@bitwarden/common/enums/sendType\";\nimport { EncArrayBuffer } from \"@bitwarden/common/models/domain/enc-array-buffer\";\nimport { Send } from \"@bitwarden/common/models/domain/send\";\nimport { SendFileView } from \"@bitwarden/common/models/view/send-file.view\";\nimport { SendTextView } from \"@bitwarden/common/models/view/send-text.view\";\nimport { SendView } from \"@bitwarden/common/models/view/send.view\";\n\n@Directive()\nexport class AddEditComponent implements OnInit, OnDestroy {\n  @Input() sendId: string;\n  @Input() type: SendType;\n\n  @Output() onSavedSend = new EventEmitter<SendView>();\n  @Output() onDeletedSend = new EventEmitter<SendView>();\n  @Output() onCancelled = new EventEmitter<SendView>();\n\n  copyLink = false;\n  disableSend = false;\n  disableHideEmail = false;\n  send: SendView;\n  deletionDate: string;\n  expirationDate: string;\n  hasPassword: boolean;\n  password: string;\n  showPassword = false;\n  formPromise: Promise<any>;\n  deletePromise: Promise<any>;\n  sendType = SendType;\n  typeOptions: any[];\n  canAccessPremium = true;\n  emailVerified = true;\n  alertShown = false;\n  showOptions = false;\n\n  protected componentName = \"\";\n  private sendLinkBaseUrl: string;\n  private destroy$ = new Subject<void>();\n\n  constructor(\n    protected i18nService: I18nService,\n    protected platformUtilsService: PlatformUtilsService,\n    protected environmentService: EnvironmentService,\n    protected datePipe: DatePipe,\n    protected sendService: SendService,\n    protected messagingService: MessagingService,\n    protected policyService: PolicyService,\n    private logService: LogService,\n    protected stateService: StateService\n  ) {\n    this.typeOptions = [\n      { name: i18nService.t(\"sendTypeFile\"), value: SendType.File },\n      { name: i18nService.t(\"sendTypeText\"), value: SendType.Text },\n    ];\n    this.sendLinkBaseUrl = this.environmentService.getSendUrl();\n  }\n\n  get link(): string {\n    if (this.send.id != null && this.send.accessId != null) {\n      return this.sendLinkBaseUrl + this.send.accessId + \"/\" + this.send.urlB64Key;\n    }\n    return null;\n  }\n\n  get isSafari() {\n    return this.platformUtilsService.isSafari();\n  }\n\n  get isDateTimeLocalSupported(): boolean {\n    return !(this.platformUtilsService.isFirefox() || this.platformUtilsService.isSafari());\n  }\n\n  async ngOnInit() {\n    this.policyService\n      .policyAppliesToActiveUser$(PolicyType.DisableSend)\n      .pipe(takeUntil(this.destroy$))\n      .subscribe((policyAppliesToActiveUser) => {\n        this.disableSend = policyAppliesToActiveUser;\n      });\n\n    this.policyService\n      .policyAppliesToActiveUser$(PolicyType.SendOptions, (p) => p.data.disableHideEmail)\n      .pipe(takeUntil(this.destroy$))\n      .subscribe((policyAppliesToActiveUser) => {\n        this.disableHideEmail = policyAppliesToActiveUser;\n      });\n\n    await this.load();\n  }\n\n  ngOnDestroy() {\n    this.destroy$.next();\n    this.destroy$.complete();\n  }\n\n  get editMode(): boolean {\n    return this.sendId != null;\n  }\n\n  get title(): string {\n    return this.i18nService.t(this.editMode ? \"editSend\" : \"createSend\");\n  }\n\n  setDates(event: { deletionDate: string; expirationDate: string }) {\n    this.deletionDate = event.deletionDate;\n    this.expirationDate = event.expirationDate;\n  }\n\n  async load() {\n    this.canAccessPremium = await this.stateService.getCanAccessPremium();\n    this.emailVerified = await this.stateService.getEmailVerified();\n    if (!this.canAccessPremium || !this.emailVerified) {\n      this.type = SendType.Text;\n    }\n\n    if (this.send == null) {\n      if (this.editMode) {\n        const send = await this.loadSend();\n        this.send = await send.decrypt();\n      } else {\n        this.send = new SendView();\n        this.send.type = this.type == null ? SendType.File : this.type;\n        this.send.file = new SendFileView();\n        this.send.text = new SendTextView();\n        this.send.deletionDate = new Date();\n        this.send.deletionDate.setDate(this.send.deletionDate.getDate() + 7);\n      }\n    }\n\n    this.hasPassword = this.send.password != null && this.send.password.trim() !== \"\";\n  }\n\n  async submit(): Promise<boolean> {\n    if (this.disableSend) {\n      this.platformUtilsService.showToast(\n        \"error\",\n        this.i18nService.t(\"errorOccurred\"),\n        this.i18nService.t(\"sendDisabledWarning\")\n      );\n      return false;\n    }\n\n    if (this.send.name == null || this.send.name === \"\") {\n      this.platformUtilsService.showToast(\n        \"error\",\n        this.i18nService.t(\"errorOccurred\"),\n        this.i18nService.t(\"nameRequired\")\n      );\n      return false;\n    }\n\n    let file: File = null;\n    if (this.send.type === SendType.File && !this.editMode) {\n      const fileEl = document.getElementById(\"file\") as HTMLInputElement;\n      const files = fileEl.files;\n      if (files == null || files.length === 0) {\n        this.platformUtilsService.showToast(\n          \"error\",\n          this.i18nService.t(\"errorOccurred\"),\n          this.i18nService.t(\"selectFile\")\n        );\n        return;\n      }\n\n      file = files[0];\n      if (files[0].size > 524288000) {\n        // 500 MB\n        this.platformUtilsService.showToast(\n          \"error\",\n          this.i18nService.t(\"errorOccurred\"),\n          this.i18nService.t(\"maxFileSize\")\n        );\n        return;\n      }\n    }\n\n    if (this.password != null && this.password.trim() === \"\") {\n      this.password = null;\n    }\n\n    this.formPromise = this.encryptSend(file).then(async (encSend) => {\n      const uploadPromise = this.sendService.saveWithServer(encSend);\n      await uploadPromise;\n      if (this.send.id == null) {\n        this.send.id = encSend[0].id;\n      }\n      if (this.send.accessId == null) {\n        this.send.accessId = encSend[0].accessId;\n      }\n      this.onSavedSend.emit(this.send);\n      if (this.copyLink && this.link != null) {\n        await this.handleCopyLinkToClipboard();\n        return;\n      }\n      this.platformUtilsService.showToast(\n        \"success\",\n        null,\n        this.i18nService.t(this.editMode ? \"editedSend\" : \"createdSend\")\n      );\n    });\n    try {\n      await this.formPromise;\n      return true;\n    } catch (e) {\n      this.logService.error(e);\n    }\n    return false;\n  }\n\n  async copyLinkToClipboard(link: string): Promise<void | boolean> {\n    return Promise.resolve(this.platformUtilsService.copyToClipboard(link));\n  }\n\n  async delete(): Promise<boolean> {\n    if (this.deletePromise != null) {\n      return false;\n    }\n    const confirmed = await this.platformUtilsService.showDialog(\n      this.i18nService.t(\"deleteSendConfirmation\"),\n      this.i18nService.t(\"deleteSend\"),\n      this.i18nService.t(\"yes\"),\n      this.i18nService.t(\"no\"),\n      \"warning\",\n      false,\n      this.componentName != \"\" ? this.componentName + \" .modal-content\" : null\n    );\n    if (!confirmed) {\n      return false;\n    }\n\n    try {\n      this.deletePromise = this.sendService.deleteWithServer(this.send.id);\n      await this.deletePromise;\n      this.platformUtilsService.showToast(\"success\", null, this.i18nService.t(\"deletedSend\"));\n      await this.load();\n      this.onDeletedSend.emit(this.send);\n      return true;\n    } catch (e) {\n      this.logService.error(e);\n    }\n\n    return false;\n  }\n\n  typeChanged() {\n    if (this.send.type === SendType.File && !this.alertShown) {\n      if (!this.canAccessPremium) {\n        this.alertShown = true;\n        this.messagingService.send(\"premiumRequired\");\n      } else if (!this.emailVerified) {\n        this.alertShown = true;\n        this.messagingService.send(\"emailVerificationRequired\");\n      }\n    }\n  }\n\n  toggleOptions() {\n    this.showOptions = !this.showOptions;\n  }\n\n  protected async loadSend(): Promise<Send> {\n    return this.sendService.get(this.sendId);\n  }\n\n  protected async encryptSend(file: File): Promise<[Send, EncArrayBuffer]> {\n    const sendData = await this.sendService.encrypt(this.send, file, this.password, null);\n\n    // Parse dates\n    try {\n      sendData[0].deletionDate = this.deletionDate == null ? null : new Date(this.deletionDate);\n    } catch {\n      sendData[0].deletionDate = null;\n    }\n    try {\n      sendData[0].expirationDate =\n        this.expirationDate == null ? null : new Date(this.expirationDate);\n    } catch {\n      sendData[0].expirationDate = null;\n    }\n\n    return sendData;\n  }\n\n  protected togglePasswordVisible() {\n    this.showPassword = !this.showPassword;\n    document.getElementById(\"password\").focus();\n  }\n  private async handleCopyLinkToClipboard() {\n    const copySuccess = await this.copyLinkToClipboard(this.link);\n    if (copySuccess ?? true) {\n      this.platformUtilsService.showToast(\n        \"success\",\n        null,\n        this.i18nService.t(this.editMode ? \"editedSend\" : \"createdSend\")\n      );\n    } else {\n      await this.platformUtilsService.showDialog(\n        this.i18nService.t(this.editMode ? \"editedSend\" : \"createdSend\"),\n        null,\n        this.i18nService.t(\"ok\"),\n        null,\n        \"success\",\n        null\n      );\n      await this.copyLinkToClipboard(this.link);\n    }\n  }\n}\n","<ng-container [formGroup]=\"datesForm\">\n  <div class=\"box\">\n    <div class=\"box-content\">\n      <ng-container *ngIf=\"!editMode\">\n        <div class=\"box-content-row\" appBoxRow>\n          <label for=\"deletionDate\">{{ \"deletionDate\" | i18n }}</label>\n          <select\n            id=\"deletionDate\"\n            name=\"DeletionDateSelect\"\n            aria-describedby=\"deletionDateHelp\"\n            formControlName=\"selectedDeletionDatePreset\"\n            required\n          >\n            <option *ngFor=\"let o of deletionDatePresets\" [ngValue]=\"o.value\">{{ o.name }}</option>\n          </select>\n        </div>\n        <div class=\"box-content-row\" appBoxRow *ngIf=\"selectedDeletionDatePreset.value === 0\">\n          <ng-container *ngTemplateOutlet=\"deletionDateCustom\"></ng-container>\n        </div>\n      </ng-container>\n      <div class=\"box-content-row\" appBoxRow *ngIf=\"editMode\">\n        <label for=\"deletionDate\">{{ \"deletionDate\" | i18n }}</label>\n        <ng-container *ngTemplateOutlet=\"deletionDateCustom\"></ng-container>\n      </div>\n    </div>\n    <div id=\"deletionDateHelp\" class=\"box-footer\">\n      {{ \"deletionDateDesc\" | i18n }}\n      <ng-container\n        *ngIf=\"\n          !inPopout &&\n          browserPath == 'firefox' &&\n          (editMode || (selectedDeletionDatePreset.value === 0 && !editMode))\n        \"\n      >\n        <br />{{ \"sendFirefoxCustomDatePopoutMessage1\" | i18n }}\n        <a (click)=\"popOutWindow.emit()\">{{ \"sendFirefoxCustomDatePopoutMessage2\" | i18n }}</a>\n        {{ \"sendFirefoxCustomDatePopoutMessage3\" | i18n }}\n      </ng-container>\n    </div>\n  </div>\n  <div class=\"box\">\n    <div class=\"box-content\">\n      <ng-container *ngIf=\"!editMode\">\n        <div class=\"box-content-row\" *ngIf=\"!editMode\" appBoxRow>\n          <label for=\"editExpirationDate\">{{ \"expirationDate\" | i18n }}</label>\n          <select\n            id=\"expirationDate\"\n            name=\"ExpirationDateSelect\"\n            aria-describedby=\"expirationDateHelp\"\n            formControlName=\"selectedExpirationDatePreset\"\n            required\n          >\n            <option *ngFor=\"let o of expirationDatePresets\" [ngValue]=\"o.value\">\n              {{ o.name }}\n            </option>\n          </select>\n        </div>\n        <div class=\"box-content-row\" *ngIf=\"selectedExpirationDatePreset.value === 0\" appBoxRow>\n          <ng-container *ngTemplateOutlet=\"expirationDateCustom\"></ng-container>\n        </div>\n      </ng-container>\n      <div class=\"box-content-row\" *ngIf=\"editMode\" appBoxRow>\n        <div class=\"flex-label\">\n          <label>{{ \"expirationDate\" | i18n }}</label>\n          <button type=\"button\" *ngIf=\"!disabled\" appStopClick (click)=\"clearExpiration()\">\n            {{ \"clear\" | i18n }}\n          </button>\n        </div>\n        <ng-container *ngTemplateOutlet=\"expirationDateCustom\"></ng-container>\n      </div>\n    </div>\n    <div id=\"expirationDateHelp\" class=\"box-footer\">\n      {{ \"expirationDateDesc\" | i18n }}\n      <ng-container\n        *ngIf=\"\n          !inPopout &&\n          browserPath == 'firefox' &&\n          (editMode || (selectedExpirationDatePreset.value === 0 && !editMode))\n        \"\n      >\n        <br />{{ \"sendFirefoxCustomDatePopoutMessage1\" | i18n }}\n        <a (click)=\"popOutWindow.emit()\">{{ \"sendFirefoxCustomDatePopoutMessage2\" | i18n }}</a>\n        {{ \"sendFirefoxCustomDatePopoutMessage3\" | i18n }}\n      </ng-container>\n    </div>\n  </div>\n  <ng-template #deletionDateCustom>\n    <ng-container [ngSwitch]=\"browserPath\">\n      <ng-container *ngSwitchCase=\"'firefox'\">\n        <div class=\"flex flex-grow\">\n          <input\n            id=\"deletionDateCustomFallback\"\n            type=\"date\"\n            name=\"DeletionDateFallback\"\n            aria-describedby=\"deletionDateHelp\"\n            formControlName=\"fallbackDeletionDate\"\n            required\n            placeholder=\"MM/DD/YYYY\"\n            [readOnly]=\"disabled\"\n            data-date-format=\"mm/dd/yyyy\"\n          />\n          <input\n            id=\"deletionTimeCustomFallback\"\n            type=\"time\"\n            name=\"DeletionTimeDate\"\n            formControlName=\"fallbackDeletionTime\"\n            required\n            placeholder=\"HH:MM AM/PM\"\n            [readOnly]=\"disabled\"\n          />\n        </div>\n      </ng-container>\n      <ng-container *ngSwitchCase=\"'safari'\">\n        <div class=\"flex flex-grow\">\n          <input\n            id=\"deletionDateCustomFallback\"\n            type=\"date\"\n            name=\"DeletionDateFallback\"\n            aria-describedby=\"deletionDateHelp\"\n            formControlName=\"fallbackDeletionDate\"\n            required\n            placeholder=\"MM/DD/YYYY\"\n            [readOnly]=\"disabled\"\n            data-date-format=\"mm/dd/yyyy\"\n          />\n          <select\n            id=\"deletionTimeCustomFallback\"\n            formControlName=\"fallbackDeletionTime\"\n            name=\"SafariDeletionTime\"\n          >\n            <option *ngFor=\"let o of safariDeletionTimePresetOptions\" [ngValue]=\"o.twentyFourHour\">\n              {{ o.twelveHour }}\n            </option>\n          </select>\n        </div>\n      </ng-container>\n      <ng-container *ngSwitchDefault>\n        <input\n          id=\"deletionDateCustom\"\n          type=\"datetime-local\"\n          name=\"DeletionDate\"\n          aria-describedby=\"deletionDateHelp\"\n          formControlName=\"defaultDeletionDateTime\"\n          required\n          placeholder=\"MM/DD/YYYY HH:MM AM/PM\"\n        />\n      </ng-container>\n    </ng-container>\n  </ng-template>\n  <ng-template #expirationDateCustom>\n    <ng-container [ngSwitch]=\"browserPath\">\n      <ng-container *ngSwitchCase=\"'firefox'\">\n        <div class=\"flex flex-grow\">\n          <input\n            id=\"expirationDateCustomFallback\"\n            type=\"date\"\n            name=\"ExpirationDateFallback\"\n            aria-describedby=\"expirationDateHelp\"\n            formControlName=\"fallbackExpirationDate\"\n            [required]=\"!editMode\"\n            placeholder=\"MM/DD/YYYY\"\n            [readOnly]=\"disabled\"\n            data-date-format=\"mm/dd/yyyy\"\n          />\n          <input\n            id=\"expirationTimeCustomFallback\"\n            type=\"time\"\n            name=\"ExpirationTimeFallback\"\n            formControlName=\"fallbackExpirationTime\"\n            [required]=\"!editMode\"\n            placeholder=\"HH:MM AM/PM\"\n            [readOnly]=\"disabled\"\n          />\n        </div>\n      </ng-container>\n      <ng-container *ngSwitchCase=\"'safari'\">\n        <div class=\"flex flex-grow\">\n          <input\n            id=\"expirationDateCustomFallback\"\n            type=\"date\"\n            name=\"ExpirationDateFallback\"\n            aria-describedby=\"expirationDateHelp\"\n            formControlName=\"fallbackExpirationDate\"\n            [required]=\"!editMode\"\n            placeholder=\"MM/DD/YYYY\"\n            [readOnly]=\"disabled\"\n            data-date-format=\"mm/dd/yyyy\"\n          />\n          <select\n            id=\"expirationTimeCustomFallback\"\n            formControlName=\"fallbackExpirationTime\"\n            name=\"SafariExpirationTime\"\n          >\n            <option\n              *ngFor=\"let o of safariExpirationTimePresetOptions\"\n              [ngValue]=\"o.twentyFourHour\"\n            >\n              {{ o.twelveHour }}\n            </option>\n          </select>\n        </div>\n      </ng-container>\n      <ng-container *ngSwitchDefault>\n        <input\n          id=\"expirationDateCustom\"\n          type=\"datetime-local\"\n          name=\"ExpirationDate\"\n          aria-describedby=\"expirationDateHelp\"\n          formControlName=\"defaultExpirationDateTime\"\n          required\n          placeholder=\"MM/DD/YYYY HH:MM AM/PM\"\n          [readOnly]=\"disabled\"\n        />\n      </ng-container>\n    </ng-container>\n  </ng-template>\n</ng-container>\n","import { DatePipe } from \"@angular/common\";\nimport { Component, EventEmitter, Input, Output } from \"@angular/core\";\nimport { ControlContainer, NgForm } from \"@angular/forms\";\n\nimport { EffluxDatesComponent as BaseEffluxDatesComponent } from \"@bitwarden/angular/components/send/efflux-dates.component\";\nimport { I18nService } from \"@bitwarden/common/abstractions/i18n.service\";\nimport { PlatformUtilsService } from \"@bitwarden/common/abstractions/platformUtils.service\";\n\n@Component({\n  selector: \"app-send-efflux-dates\",\n  templateUrl: \"efflux-dates.component.html\",\n  viewProviders: [{ provide: ControlContainer, useExisting: NgForm }],\n})\nexport class EffluxDatesComponent extends BaseEffluxDatesComponent {\n  @Input() readonly inPopout: boolean;\n  @Output() popOutWindow = new EventEmitter();\n\n  constructor(\n    protected i18nService: I18nService,\n    protected platformUtilsService: PlatformUtilsService,\n    protected datePipe: DatePipe\n  ) {\n    super(i18nService, platformUtilsService, datePipe);\n  }\n}\n","<form #form (ngSubmit)=\"submit()\" [appApiAction]=\"formPromise\">\n  <header>\n    <div class=\"left\">\n      <button type=\"button\" (click)=\"cancel()\">{{ \"cancel\" | i18n }}</button>\n    </div>\n    <h1 class=\"center\">\n      <span class=\"title\">{{ title }}</span>\n    </h1>\n    <div class=\"right\">\n      <button type=\"submit\" [disabled]=\"form.loading || disableSend\">\n        <span [hidden]=\"form.loading\">{{ \"save\" | i18n }}</span>\n        <i class=\"bwi bwi-spinner bwi-lg bwi-spin\" [hidden]=\"!form.loading\" aria-hidden=\"true\"></i>\n      </button>\n    </div>\n  </header>\n  <main tabindex=\"-1\" *ngIf=\"send\">\n    <!-- Policy Banner -->\n    <app-callout type=\"warning\" title=\"{{ 'sendDisabled' | i18n }}\" *ngIf=\"disableSend\">\n      {{ \"sendDisabledWarning\" | i18n }}\n    </app-callout>\n    <app-callout type=\"info\" *ngIf=\"disableHideEmail && !disableSend\">\n      {{ \"sendOptionsPolicyInEffect\" | i18n }}\n    </app-callout>\n    <!-- File Warning -->\n    <app-callout\n      type=\"warning\"\n      icon=\"bwi-external-link bwi-rotate-270 bwi-fw\"\n      [clickable]=\"true\"\n      title=\"{{ 'sendFileCalloutHeader' | i18n }}\"\n      *ngIf=\"showFilePopoutMessage && send.type === sendType.File && !disableSend\"\n      (click)=\"popOutWindow()\"\n    >\n      <div *ngIf=\"showChromiumFileWarning\">{{ \"sendLinuxChromiumFileWarning\" | i18n }}</div>\n      <div *ngIf=\"showFirefoxFileWarning\">{{ \"sendFirefoxFileWarning\" | i18n }}</div>\n      <div *ngIf=\"showSafariFileWarning\">{{ \"sendSafariFileWarning\" | i18n }}</div>\n    </app-callout>\n    <!-- Name -->\n    <div class=\"box\">\n      <div class=\"box-content\">\n        <div class=\"box-content-row\" appBoxRow>\n          <label for=\"name\">{{ \"name\" | i18n }}</label>\n          <input\n            id=\"name\"\n            type=\"text\"\n            name=\"Name\"\n            aria-describedby=\"nameHelp\"\n            [(ngModel)]=\"send.name\"\n            [readonly]=\"disableSend\"\n          />\n        </div>\n      </div>\n      <div id=\"nameHelp\" class=\"box-footer\">\n        {{ \"sendNameDesc\" | i18n }}\n      </div>\n    </div>\n    <!-- Type Options -->\n    <div class=\"box\" *ngIf=\"!editMode\">\n      <div class=\"box-content no-hover\">\n        <div class=\"box-content-row\">\n          <label for=\"sendTypeOptions\">{{ \"sendTypeHeader\" | i18n }}</label>\n          <div\n            class=\"radio-group text-default\"\n            appBoxRow\n            name=\"SendTypeOptions\"\n            *ngFor=\"let o of typeOptions\"\n          >\n            <input\n              type=\"radio\"\n              [(ngModel)]=\"send.type\"\n              name=\"Type_{{ o.value }}\"\n              id=\"type_{{ o.value }}\"\n              [value]=\"o.value\"\n              (change)=\"typeChanged()\"\n              [checked]=\"send.type === o.value\"\n              [readonly]=\"disableSend\"\n            />\n            <label for=\"type_{{ o.value }}\">\n              {{ o.name }}\n            </label>\n          </div>\n        </div>\n      </div>\n    </div>\n    <!-- File -->\n    <div class=\"box\" *ngIf=\"send.type === sendType.File && (editMode || showFileSelector)\">\n      <div class=\"box-content no-hover\">\n        <div class=\"box-content-row\" *ngIf=\"editMode\">\n          <label for=\"file\">{{ \"file\" | i18n }}</label>\n          <div class=\"row-main\">{{ send.file.fileName }} ({{ send.file.sizeName }})</div>\n        </div>\n        <div class=\"box-content-row\" *ngIf=\"showFileSelector\">\n          <label for=\"file\">{{ \"file\" | i18n }}</label>\n          <input\n            type=\"file\"\n            id=\"file\"\n            name=\"file\"\n            aria-describedby=\"fileHelp\"\n            required\n            [readonly]=\"disableSend\"\n          />\n        </div>\n      </div>\n      <div id=\"fileHelp\" class=\"box-footer\" *ngIf=\"showFileSelector\">\n        {{ \"sendFileDesc\" | i18n }} {{ \"maxFileSize\" | i18n }}\n      </div>\n    </div>\n    <!-- Text -->\n    <div class=\"box\" *ngIf=\"send.type === sendType.Text\">\n      <div class=\"box-content\">\n        <div class=\"box-content-row\" appBoxRow>\n          <label for=\"text\">{{ \"sendTypeText\" | i18n }}</label>\n          <textarea\n            id=\"text\"\n            name=\"Text\"\n            aria-describedby=\"textHelp\"\n            rows=\"6\"\n            [(ngModel)]=\"send.text.text\"\n            [readonly]=\"disableSend\"\n          ></textarea>\n        </div>\n      </div>\n      <div id=\"textHelp\" class=\"box-footer\">\n        {{ \"sendTextDesc\" | i18n }}\n      </div>\n      <div class=\"box-content\">\n        <div class=\"box-content-row box-content-row-checkbox\" appBoxRow>\n          <label for=\"hideText\">{{ \"sendHideText\" | i18n }}</label>\n          <input\n            id=\"hideText\"\n            type=\"checkbox\"\n            name=\"HideText\"\n            [(ngModel)]=\"send.text.hidden\"\n            [disabled]=\"disableSend\"\n          />\n        </div>\n      </div>\n    </div>\n    <!-- Share -->\n    <div class=\"box\">\n      <h2 class=\"box-header\">\n        {{ \"share\" | i18n }}\n      </h2>\n      <div class=\"box-content\">\n        <!-- Copy Link on Save -->\n        <div class=\"box-content-row box-content-row-checkbox\" appBoxRow>\n          <label for=\"copyOnSave\">{{ \"sendShareDesc\" | i18n }}</label>\n          <input\n            id=\"copyOnSave\"\n            type=\"checkbox\"\n            name=\"CopyOnSave\"\n            [(ngModel)]=\"copyLink\"\n            [disabled]=\"disableSend\"\n          />\n        </div>\n      </div>\n    </div>\n    <!-- Options -->\n    <div class=\"box\">\n      <h2>\n        <button\n          type=\"button\"\n          class=\"box-header-expandable\"\n          (click)=\"showOptions = !showOptions\"\n          [attr.aria-expanded]=\"showOptions\"\n        >\n          <i *ngIf=\"!showOptions\" class=\"bwi bwi-angle-right bwi-sm icon\" aria-hidden=\"true\"></i>\n          <i *ngIf=\"showOptions\" class=\"bwi bwi-angle-down bwi-sm icon\" aria-hidden=\"true\"></i>\n          {{ \"options\" | i18n }}\n        </button>\n      </h2>\n    </div>\n    <div [hidden]=\"!showOptions\">\n      <app-send-efflux-dates\n        [initialDeletionDate]=\"send.deletionDate\"\n        [initialExpirationDate]=\"send.expirationDate\"\n        [editMode]=\"editMode\"\n        [disabled]=\"disableSend\"\n        (datesChanged)=\"setDates($event)\"\n        (popOutWindow)=\"popOutWindow()\"\n      >\n      </app-send-efflux-dates>\n      <!-- Maximum Access Count -->\n      <div class=\"box\">\n        <div class=\"box-content\">\n          <div class=\"box-content-row\" appBoxRow>\n            <label for=\"maximumAccessCount\">{{ \"maximumAccessCount\" | i18n }}</label>\n            <input\n              id=\"maximumAccessCount\"\n              min=\"1\"\n              type=\"number\"\n              name=\"MaximumAccessCount\"\n              aria-describedby=\"maximumAccessCountHelp\"\n              [(ngModel)]=\"send.maxAccessCount\"\n              [readonly]=\"disableSend\"\n            />\n          </div>\n        </div>\n        <div id=\"maximumAccessCountHelp\" class=\"box-footer\">\n          {{ \"maximumAccessCountDesc\" | i18n }}\n        </div>\n      </div>\n      <!-- Current Access Count -->\n      <div class=\"box\" *ngIf=\"editMode\">\n        <div class=\"box-content\">\n          <div class=\"box-content-row\" appBoxRow>\n            <label for=\"currentAccessCount\">{{ \"currentAccessCount\" | i18n }}</label>\n            <input\n              id=\"currentAccessCount\"\n              readonly\n              type=\"text\"\n              name=\"CurrentAccessCount\"\n              [(ngModel)]=\"send.accessCount\"\n            />\n          </div>\n        </div>\n      </div>\n      <!-- Password -->\n      <div class=\"box\">\n        <div class=\"box-content\">\n          <div class=\"box-content-row box-content-row-flex\" appBoxRow>\n            <div class=\"row-main\">\n              <label for=\"password\" *ngIf=\"hasPassword\">{{ \"newPassword\" | i18n }}</label>\n              <label for=\"password\" *ngIf=\"!hasPassword\">{{ \"password\" | i18n }}</label>\n              <input\n                id=\"password\"\n                type=\"{{ showPassword ? 'text' : 'password' }}\"\n                name=\"Password\"\n                aria-describedby=\"passwordHelp\"\n                class=\"monospaced\"\n                [(ngModel)]=\"password\"\n                appInputVerbatim\n                [readonly]=\"disableSend\"\n              />\n            </div>\n            <div class=\"action-buttons\" *ngIf=\"!disableSend\">\n              <button\n                type=\"button\"\n                class=\"row-btn\"\n                appStopClick\n                appA11yTitle=\"{{ 'toggleVisibility' | i18n }}\"\n                (click)=\"togglePasswordVisible()\"\n                [attr.aria-pressed]=\"showPassword\"\n              >\n                <i\n                  class=\"bwi bwi-lg\"\n                  [ngClass]=\"{ 'bwi-eye': !showPassword, 'bwi-eye-slash': showPassword }\"\n                  aria-hidden=\"true\"\n                ></i>\n              </button>\n            </div>\n          </div>\n        </div>\n        <div id=\"passwordHelp\" class=\"box-footer\">\n          {{ \"sendPasswordDesc\" | i18n }}\n        </div>\n      </div>\n      <!-- Notes -->\n      <div class=\"box\">\n        <div class=\"box-content\">\n          <div class=\"box-content-row\" appBoxRow>\n            <label for=\"notes\">{{ \"notes\" | i18n }}</label>\n            <textarea\n              id=\"notes\"\n              name=\"Notes\"\n              aria-describedby=\"notesHelp\"\n              rows=\"6\"\n              [(ngModel)]=\"send.notes\"\n              [readonly]=\"disableSend\"\n            ></textarea>\n          </div>\n        </div>\n        <div id=\"notesHelp\" class=\"box-footer\">\n          {{ \"sendNotesDesc\" | i18n }}\n        </div>\n      </div>\n      <!-- Hide Email -->\n      <div class=\"box\">\n        <div class=\"box-content\">\n          <div class=\"box-content-row box-content-row-checkbox\" appBoxRow>\n            <label for=\"hideEmail\">{{ \"hideEmail\" | i18n }}</label>\n            <input\n              id=\"hideEmail\"\n              type=\"checkbox\"\n              name=\"HideEmail\"\n              [(ngModel)]=\"send.hideEmail\"\n              [disabled]=\"(disableHideEmail && !send.hideEmail) || disableSend\"\n            />\n          </div>\n        </div>\n      </div>\n      <!-- Disable Send -->\n      <div class=\"box\">\n        <div class=\"box-content\">\n          <div class=\"box-content-row box-content-row-checkbox\" appBoxRow>\n            <label for=\"disableSend\">{{ \"sendDisableDesc\" | i18n }}</label>\n            <input\n              id=\"disableSend\"\n              type=\"checkbox\"\n              name=\"DisableSend\"\n              [(ngModel)]=\"send.disabled\"\n              [disabled]=\"disableSend\"\n            />\n          </div>\n        </div>\n      </div>\n    </div>\n    <!-- Delete -->\n    <div class=\"box list\" *ngIf=\"editMode\">\n      <div class=\"box-content single-line\">\n        <button\n          type=\"button\"\n          class=\"box-content-row\"\n          appStopClick\n          (click)=\"delete()\"\n          [appApiAction]=\"deletePromise\"\n          #deleteBtn\n        >\n          <div class=\"row-main text-danger\">\n            <div class=\"icon text-danger\" aria-hidden=\"true\">\n              <i class=\"bwi bwi-trash bwi-lg bwi-fw\" [hidden]=\"$any(deleteBtn).loading\"></i>\n              <i\n                class=\"bwi bwi-spinner bwi-spin bwi-lg bwi-fw\"\n                [hidden]=\"!$any(deleteBtn).loading\"\n              ></i>\n            </div>\n            <span>{{ \"deleteSend\" | i18n }}</span>\n          </div>\n        </button>\n      </div>\n    </div>\n  </main>\n</form>\n","import { DatePipe, Location } from \"@angular/common\";\nimport { Component } from \"@angular/core\";\nimport { ActivatedRoute, Router } from \"@angular/router\";\nimport { first } from \"rxjs/operators\";\n\nimport { AddEditComponent as BaseAddEditComponent } from \"@bitwarden/angular/components/send/add-edit.component\";\nimport { EnvironmentService } from \"@bitwarden/common/abstractions/environment.service\";\nimport { I18nService } from \"@bitwarden/common/abstractions/i18n.service\";\nimport { LogService } from \"@bitwarden/common/abstractions/log.service\";\nimport { MessagingService } from \"@bitwarden/common/abstractions/messaging.service\";\nimport { PlatformUtilsService } from \"@bitwarden/common/abstractions/platformUtils.service\";\nimport { PolicyService } from \"@bitwarden/common/abstractions/policy/policy.service.abstraction\";\nimport { SendService } from \"@bitwarden/common/abstractions/send.service\";\n\nimport { BrowserStateService } from \"../../services/abstractions/browser-state.service\";\nimport { PopupUtilsService } from \"../services/popup-utils.service\";\n\n@Component({\n  selector: \"app-send-add-edit\",\n  templateUrl: \"send-add-edit.component.html\",\n})\n// eslint-disable-next-line rxjs-angular/prefer-takeuntil\nexport class SendAddEditComponent extends BaseAddEditComponent {\n  // Options header\n  showOptions = false;\n  // File visibility\n  isFirefox = false;\n  inPopout = false;\n  inSidebar = false;\n  isLinux = false;\n  isUnsupportedMac = false;\n\n  constructor(\n    i18nService: I18nService,\n    platformUtilsService: PlatformUtilsService,\n    stateService: BrowserStateService,\n    messagingService: MessagingService,\n    policyService: PolicyService,\n    environmentService: EnvironmentService,\n    datePipe: DatePipe,\n    sendService: SendService,\n    private route: ActivatedRoute,\n    private router: Router,\n    private location: Location,\n    private popupUtilsService: PopupUtilsService,\n    logService: LogService\n  ) {\n    super(\n      i18nService,\n      platformUtilsService,\n      environmentService,\n      datePipe,\n      sendService,\n      messagingService,\n      policyService,\n      logService,\n      stateService\n    );\n  }\n\n  get showFileSelector(): boolean {\n    return !(this.editMode || this.showFilePopoutMessage);\n  }\n\n  get showFilePopoutMessage(): boolean {\n    return (\n      !this.editMode &&\n      (this.showFirefoxFileWarning || this.showSafariFileWarning || this.showChromiumFileWarning)\n    );\n  }\n\n  get showFirefoxFileWarning(): boolean {\n    return this.isFirefox && !(this.inSidebar || this.inPopout);\n  }\n\n  get showSafariFileWarning(): boolean {\n    return this.isSafari && !this.inPopout;\n  }\n\n  // Only show this for Chromium based browsers in Linux and Mac > Big Sur\n  get showChromiumFileWarning(): boolean {\n    return (\n      (this.isLinux || this.isUnsupportedMac) &&\n      !this.isFirefox &&\n      !(this.inSidebar || this.inPopout)\n    );\n  }\n\n  popOutWindow() {\n    this.popupUtilsService.popOut(window);\n  }\n\n  async ngOnInit() {\n    // File visilibity\n    this.isFirefox = this.platformUtilsService.isFirefox();\n    this.inPopout = this.popupUtilsService.inPopout(window);\n    this.inSidebar = this.popupUtilsService.inSidebar(window);\n    this.isLinux = window?.navigator?.userAgent.indexOf(\"Linux\") !== -1;\n    this.isUnsupportedMac =\n      this.platformUtilsService.isChrome() && window?.navigator?.appVersion.includes(\"Mac OS X 11\");\n\n    // eslint-disable-next-line rxjs-angular/prefer-takeuntil, rxjs/no-async-subscribe\n    this.route.queryParams.pipe(first()).subscribe(async (params) => {\n      if (params.sendId) {\n        this.sendId = params.sendId;\n      }\n      if (params.type) {\n        const type = parseInt(params.type, null);\n        this.type = type;\n      }\n      await super.ngOnInit();\n    });\n\n    window.setTimeout(() => {\n      if (!this.editMode) {\n        document.getElementById(\"name\").focus();\n      }\n    }, 200);\n  }\n\n  async submit(): Promise<boolean> {\n    if (await super.submit()) {\n      this.cancel();\n      return true;\n    }\n\n    return false;\n  }\n\n  async delete(): Promise<boolean> {\n    if (await super.delete()) {\n      this.cancel();\n      return true;\n    }\n\n    return false;\n  }\n\n  cancel() {\n    // If true, the window was pop'd out on the add-send page. location.back will not work\n    if ((window as any).previousPopupUrl.startsWith(\"/add-send\")) {\n      this.router.navigate([\"tabs/send\"]);\n    } else {\n      this.location.back();\n    }\n  }\n}\n","import { Directive, NgZone, OnDestroy, OnInit } from \"@angular/core\";\nimport { Subject, takeUntil } from \"rxjs\";\n\nimport { EnvironmentService } from \"@bitwarden/common/abstractions/environment.service\";\nimport { I18nService } from \"@bitwarden/common/abstractions/i18n.service\";\nimport { LogService } from \"@bitwarden/common/abstractions/log.service\";\nimport { PlatformUtilsService } from \"@bitwarden/common/abstractions/platformUtils.service\";\nimport { PolicyService } from \"@bitwarden/common/abstractions/policy/policy.service.abstraction\";\nimport { SearchService } from \"@bitwarden/common/abstractions/search.service\";\nimport { SendService } from \"@bitwarden/common/abstractions/send.service\";\nimport { PolicyType } from \"@bitwarden/common/enums/policyType\";\nimport { SendType } from \"@bitwarden/common/enums/sendType\";\nimport { SendView } from \"@bitwarden/common/models/view/send.view\";\n\n@Directive()\nexport class SendComponent implements OnInit, OnDestroy {\n  disableSend = false;\n  sendType = SendType;\n  loaded = false;\n  loading = true;\n  refreshing = false;\n  expired = false;\n  type: SendType = null;\n  sends: SendView[] = [];\n  filteredSends: SendView[] = [];\n  searchText: string;\n  selectedType: SendType;\n  selectedAll: boolean;\n  searchPlaceholder: string;\n  filter: (cipher: SendView) => boolean;\n  searchPending = false;\n  hasSearched = false; // search() function called - returns true if text qualifies for search\n\n  actionPromise: any;\n  onSuccessfulRemovePassword: () => Promise<any>;\n  onSuccessfulDelete: () => Promise<any>;\n  onSuccessfulLoad: () => Promise<any>;\n\n  private searchTimeout: any;\n  private destroy$ = new Subject<void>();\n\n  constructor(\n    protected sendService: SendService,\n    protected i18nService: I18nService,\n    protected platformUtilsService: PlatformUtilsService,\n    protected environmentService: EnvironmentService,\n    protected ngZone: NgZone,\n    protected searchService: SearchService,\n    protected policyService: PolicyService,\n    private logService: LogService\n  ) {}\n\n  async ngOnInit() {\n    this.policyService\n      .policyAppliesToActiveUser$(PolicyType.DisableSend)\n      .pipe(takeUntil(this.destroy$))\n      .subscribe((policyAppliesToActiveUser) => {\n        this.disableSend = policyAppliesToActiveUser;\n      });\n  }\n\n  ngOnDestroy() {\n    this.destroy$.next();\n    this.destroy$.complete();\n  }\n\n  async load(filter: (send: SendView) => boolean = null) {\n    this.loading = true;\n    const sends = await this.sendService.getAllDecrypted();\n    this.sends = sends;\n    if (this.onSuccessfulLoad != null) {\n      await this.onSuccessfulLoad();\n    } else {\n      // Default action\n      this.selectAll();\n    }\n    this.loading = false;\n    this.loaded = true;\n  }\n\n  async reload(filter: (send: SendView) => boolean = null) {\n    this.loaded = false;\n    this.sends = [];\n    await this.load(filter);\n  }\n\n  async refresh() {\n    try {\n      this.refreshing = true;\n      await this.reload(this.filter);\n    } finally {\n      this.refreshing = false;\n    }\n  }\n\n  async applyFilter(filter: (send: SendView) => boolean = null) {\n    this.filter = filter;\n    await this.search(null);\n  }\n\n  async search(timeout: number = null) {\n    this.searchPending = false;\n    if (this.searchTimeout != null) {\n      clearTimeout(this.searchTimeout);\n    }\n    if (timeout == null) {\n      this.hasSearched = this.searchService.isSearchable(this.searchText);\n      this.filteredSends = this.sends.filter((s) => this.filter == null || this.filter(s));\n      this.applyTextSearch();\n      return;\n    }\n    this.searchPending = true;\n    this.searchTimeout = setTimeout(async () => {\n      this.hasSearched = this.searchService.isSearchable(this.searchText);\n      this.filteredSends = this.sends.filter((s) => this.filter == null || this.filter(s));\n      this.applyTextSearch();\n      this.searchPending = false;\n    }, timeout);\n  }\n\n  async removePassword(s: SendView): Promise<boolean> {\n    if (this.actionPromise != null || s.password == null) {\n      return;\n    }\n    const confirmed = await this.platformUtilsService.showDialog(\n      this.i18nService.t(\"removePasswordConfirmation\"),\n      this.i18nService.t(\"removePassword\"),\n      this.i18nService.t(\"yes\"),\n      this.i18nService.t(\"no\"),\n      \"warning\"\n    );\n    if (!confirmed) {\n      return false;\n    }\n\n    try {\n      this.actionPromise = this.sendService.removePasswordWithServer(s.id);\n      await this.actionPromise;\n      if (this.onSuccessfulRemovePassword != null) {\n        this.onSuccessfulRemovePassword();\n      } else {\n        // Default actions\n        this.platformUtilsService.showToast(\"success\", null, this.i18nService.t(\"removedPassword\"));\n        await this.load();\n      }\n    } catch (e) {\n      this.logService.error(e);\n    }\n    this.actionPromise = null;\n  }\n\n  async delete(s: SendView): Promise<boolean> {\n    if (this.actionPromise != null) {\n      return false;\n    }\n    const confirmed = await this.platformUtilsService.showDialog(\n      this.i18nService.t(\"deleteSendConfirmation\"),\n      this.i18nService.t(\"deleteSend\"),\n      this.i18nService.t(\"yes\"),\n      this.i18nService.t(\"no\"),\n      \"warning\"\n    );\n    if (!confirmed) {\n      return false;\n    }\n\n    try {\n      this.actionPromise = this.sendService.deleteWithServer(s.id);\n      await this.actionPromise;\n\n      if (this.onSuccessfulDelete != null) {\n        this.onSuccessfulDelete();\n      } else {\n        // Default actions\n        this.platformUtilsService.showToast(\"success\", null, this.i18nService.t(\"deletedSend\"));\n        await this.refresh();\n      }\n    } catch (e) {\n      this.logService.error(e);\n    }\n    this.actionPromise = null;\n    return true;\n  }\n\n  copy(s: SendView) {\n    const sendLinkBaseUrl = this.environmentService.getSendUrl();\n    const link = sendLinkBaseUrl + s.accessId + \"/\" + s.urlB64Key;\n    this.platformUtilsService.copyToClipboard(link);\n    this.platformUtilsService.showToast(\n      \"success\",\n      null,\n      this.i18nService.t(\"valueCopied\", this.i18nService.t(\"sendLink\"))\n    );\n  }\n\n  searchTextChanged() {\n    this.search(200);\n  }\n\n  selectAll() {\n    this.clearSelections();\n    this.selectedAll = true;\n    this.applyFilter(null);\n  }\n\n  selectType(type: SendType) {\n    this.clearSelections();\n    this.selectedType = type;\n    this.applyFilter((s) => s.type === type);\n  }\n\n  clearSelections() {\n    this.selectedAll = false;\n    this.selectedType = null;\n  }\n\n  private applyTextSearch() {\n    if (this.searchText != null) {\n      this.filteredSends = this.searchService.searchSends(this.filteredSends, this.searchText);\n    }\n  }\n}\n","import { SendType } from \"@bitwarden/common/enums/sendType\";\nimport { Utils } from \"@bitwarden/common/misc/utils\";\nimport { SendView } from \"@bitwarden/common/models/view/send.view\";\nimport { DeepJsonify } from \"@bitwarden/common/types/deep-jsonify\";\n\nimport { BrowserComponentState } from \"./browserComponentState\";\n\nexport class BrowserSendComponentState extends BrowserComponentState {\n  sends: SendView[];\n  typeCounts: Map<SendType, number>;\n\n  toJSON() {\n    return Utils.merge(this, {\n      typeCounts: Utils.mapToRecord(this.typeCounts),\n    });\n  }\n\n  static fromJSON(json: DeepJsonify<BrowserSendComponentState>) {\n    if (json == null) {\n      return null;\n    }\n\n    return Object.assign(new BrowserSendComponentState(), json, {\n      sends: json.sends?.map((s) => SendView.fromJSON(s)),\n      typeCounts: Utils.recordToMap(json.typeCounts),\n    });\n  }\n}\n","<div\n  role=\"group\"\n  *ngFor=\"let s of sends\"\n  appA11yTitle=\"{{ s.name }}\"\n  class=\"box-content-row box-content-row-flex\"\n>\n  <button\n    type=\"button\"\n    class=\"row-main\"\n    (click)=\"selectSend(s)\"\n    appStopClick\n    title=\"{{ title }} - {{ s.name }}\"\n  >\n    <div class=\"app-vault-icon\">\n      <div class=\"icon\" aria-hidden=\"true\">\n        <i class=\"bwi bwi-fw bwi-lg bwi-file-text\" *ngIf=\"s.type === sendType.Text\"></i>\n        <i class=\"bwi bwi-fw bwi-lg bwi-file\" *ngIf=\"s.type === sendType.File\"></i>\n      </div>\n    </div>\n    <div class=\"row-main-content\">\n      <span class=\"text\">\n        {{ s.name }}\n        <ng-container *ngIf=\"s.disabled\">\n          <i\n            class=\"bwi bwi-exclamation-triangle text-muted\"\n            title=\"{{ 'disabled' | i18n }}\"\n            aria-hidden=\"true\"\n          ></i>\n          <span class=\"sr-only\">{{ \"disabled\" | i18n }}</span>\n        </ng-container>\n        <ng-container *ngIf=\"s.password\">\n          <i\n            class=\"bwi bwi-key text-muted\"\n            title=\"{{ 'passwordProtected' | i18n }}\"\n            aria-hidden=\"true\"\n          ></i>\n          <span class=\"sr-only\">{{ \"passwordProtected\" | i18n }}</span>\n        </ng-container>\n        <ng-container *ngIf=\"s.maxAccessCountReached\">\n          <i\n            class=\"bwi bwi-ban text-muted\"\n            title=\"{{ 'maxAccessCountReached' | i18n }}\"\n            aria-hidden=\"true\"\n          ></i>\n          <span class=\"sr-only\">{{ \"maxAccessCountReached\" | i18n }}</span>\n        </ng-container>\n        <ng-container *ngIf=\"s.expired\">\n          <i class=\"bwi bwi-clock text-muted\" title=\"{{ 'expired' | i18n }}\" aria-hidden=\"true\"></i>\n          <span class=\"sr-only\">{{ \"expired\" | i18n }}</span>\n        </ng-container>\n        <ng-container *ngIf=\"s.pendingDelete\">\n          <i\n            class=\"bwi bwi-trash text-muted\"\n            title=\"{{ 'pendingDeletion' | i18n }}\"\n            aria-hidden=\"true\"\n          ></i>\n          <span class=\"sr-only\">{{ \"pendingDeletion\" | i18n }}</span>\n        </ng-container>\n      </span>\n      <span class=\"detail\">{{ s.deletionDate | date: \"medium\" }}</span>\n    </div>\n  </button>\n  <div class=\"action-buttons\">\n    <button\n      type=\"button\"\n      class=\"row-btn\"\n      appStopClick\n      appStopProp\n      appA11yTitle=\"{{ 'copySendLink' | i18n }}\"\n      (click)=\"copySendLink(s)\"\n    >\n      <i class=\"bwi bwi-lg bwi-files\" aria-hidden=\"true\"></i>\n    </button>\n    <button\n      type=\"button\"\n      class=\"row-btn\"\n      [ngClass]=\"{ disabled: disabledByPolicy }\"\n      [attr.disabled]=\"disabledByPolicy ? '' : null\"\n      appStopClick\n      appStopProp\n      appA11yTitle=\"{{ 'removePassword' | i18n }}\"\n      (click)=\"removePassword(s)\"\n      *ngIf=\"s.password\"\n    >\n      <i class=\"bwi bwi-lg bwi-undo\" aria-hidden=\"true\"></i>\n    </button>\n    <button\n      type=\"button\"\n      class=\"row-btn\"\n      appStopClick\n      appStopProp\n      appA11yTitle=\"{{ 'delete' | i18n }}\"\n      (click)=\"delete(s)\"\n    >\n      <i class=\"bwi bwi-lg bwi-trash\" aria-hidden=\"true\"></i>\n    </button>\n  </div>\n</div>\n","import { Component, EventEmitter, Input, Output } from \"@angular/core\";\n\nimport { SendType } from \"@bitwarden/common/enums/sendType\";\nimport { SendView } from \"@bitwarden/common/models/view/send.view\";\n\n@Component({\n  selector: \"app-send-list\",\n  templateUrl: \"send-list.component.html\",\n})\nexport class SendListComponent {\n  @Input() sends: SendView[];\n  @Input() title: string;\n  @Input() disabledByPolicy = false;\n  @Output() onSelected = new EventEmitter<SendView>();\n  @Output() onCopySendLink = new EventEmitter<SendView>();\n  @Output() onRemovePassword = new EventEmitter<SendView>();\n  @Output() onDeleteSend = new EventEmitter<SendView>();\n\n  sendType = SendType;\n\n  selectSend(s: SendView) {\n    this.onSelected.emit(s);\n  }\n\n  copySendLink(s: SendView) {\n    this.onCopySendLink.emit(s);\n  }\n\n  removePassword(s: SendView) {\n    this.onRemovePassword.emit(s);\n  }\n\n  delete(s: SendView) {\n    this.onDeleteSend.emit(s);\n  }\n}\n","<header>\n  <div class=\"left\" *ngIf=\"showLeftHeader\">\n    <app-pop-out></app-pop-out>\n  </div>\n  <h1 class=\"sr-only\">{{ \"send\" | i18n }}</h1>\n  <div class=\"search\">\n    <input\n      type=\"search\"\n      placeholder=\"{{ 'searchSends' | i18n }}\"\n      id=\"search\"\n      [(ngModel)]=\"searchText\"\n      (input)=\"search(200)\"\n      autocomplete=\"off\"\n      appAutofocus\n    />\n    <i class=\"bwi bwi-search\"></i>\n  </div>\n  <div class=\"right\">\n    <button\n      type=\"button\"\n      (click)=\"addSend()\"\n      appA11yTitle=\"{{ 'addSend' | i18n }}\"\n      [disabled]=\"disableSend\"\n    >\n      <i class=\"bwi bwi-plus bwi-lg bwi-fw\" aria-hidden=\"true\"></i>\n    </button>\n  </div>\n</header>\n<main tabindex=\"-1\" [ngClass]=\"{ flex: disableSend, 'tab-page': disableSend }\">\n  <app-callout type=\"warning\" title=\"{{ 'sendDisabled' | i18n }}\" *ngIf=\"disableSend\">\n    {{ \"sendDisabledWarning\" | i18n }}\n  </app-callout>\n  <div class=\"no-items\" *ngIf=\"(!sends || !sends.length) && !showSearching()\">\n    <i class=\"bwi bwi-spinner bwi-spin bwi-3x\" *ngIf=\"!loaded\"></i>\n    <ng-container *ngIf=\"loaded\">\n      <img class=\"no-items-image\" aria-hidden=\"true\" />\n      <p>{{ \"noItemsInList\" | i18n }}</p>\n      <button\n        type=\"button\"\n        (click)=\"addSend()\"\n        class=\"btn block primary link\"\n        [disabled]=\"disableSend\"\n      >\n        {{ \"addSend\" | i18n }}\n      </button>\n    </ng-container>\n  </div>\n  <ng-container *ngIf=\"sends && sends.length && !showSearching()\">\n    <div class=\"box list\">\n      <h2 class=\"box-header\">\n        {{ \"types\" | i18n }}\n      </h2>\n      <div class=\"box-content single-line\">\n        <button\n          type=\"button\"\n          class=\"box-content-row\"\n          appStopClick\n          (click)=\"selectType(sendType.Text)\"\n        >\n          <div class=\"row-main\">\n            <div class=\"icon\"><i class=\"bwi bwi-fw bwi-lg bwi-file-text\"></i></div>\n            <span class=\"text\">{{ \"sendTypeText\" | i18n }}</span>\n          </div>\n          <span class=\"row-sub-label\">{{ typeCounts.get(sendType.Text) || 0 }}</span>\n          <span><i class=\"bwi bwi-angle-right bwi-lg row-sub-icon\"></i></span>\n        </button>\n        <button\n          type=\"button\"\n          class=\"box-content-row\"\n          appStopClick\n          (click)=\"selectType(sendType.File)\"\n        >\n          <div class=\"row-main\">\n            <div class=\"icon\"><i class=\"bwi bwi-fw bwi-lg bwi-file\"></i></div>\n            <span class=\"text\">{{ \"sendTypeFile\" | i18n }}</span>\n          </div>\n          <span class=\"row-sub-label\">{{ typeCounts.get(sendType.File) || 0 }}</span>\n          <span><i class=\"bwi bwi-angle-right bwi-lg row-sub-icon\"></i></span>\n        </button>\n      </div>\n    </div>\n    <div class=\"box list\">\n      <h2 class=\"box-header\">\n        {{ \"allSends\" | i18n }}\n        <div class=\"flex-right\">{{ sends.length }}</div>\n      </h2>\n      <div class=\"box-content\">\n        <app-send-list\n          [sends]=\"sends\"\n          title=\"{{ 'editItem' | i18n }}\"\n          [disabledByPolicy]=\"disableSend\"\n          (onSelected)=\"selectSend($event)\"\n          (onCopySendLink)=\"copy($event)\"\n          (onRemovePassword)=\"removePassword($event)\"\n          (onDeleteSend)=\"delete($event)\"\n        ></app-send-list>\n      </div>\n    </div>\n  </ng-container>\n  <ng-container *ngIf=\"showSearching()\">\n    <div class=\"no-items\" *ngIf=\"!filteredSends || !filteredSends.length\">\n      <p>{{ \"noItemsInList\" | i18n }}</p>\n    </div>\n    <div class=\"box list full-list\" *ngIf=\"filteredSends && filteredSends.length > 0\">\n      <div class=\"box-content\">\n        <app-send-list\n          [sends]=\"filteredSends\"\n          title=\"{{ 'editItem' | i18n }}\"\n          [disabledByPolicy]=\"disableSend\"\n          (onSelected)=\"selectSend($event)\"\n          (onCopySendLink)=\"copy($event)\"\n          (onRemovePassword)=\"removePassword($event)\"\n          (onDeleteSend)=\"delete($event)\"\n        >\n        </app-send-list>\n      </div>\n    </div>\n  </ng-container>\n</main>\n","import { ChangeDetectorRef, Component, NgZone } from \"@angular/core\";\nimport { Router } from \"@angular/router\";\n\nimport { SendComponent as BaseSendComponent } from \"@bitwarden/angular/components/send/send.component\";\nimport { BroadcasterService } from \"@bitwarden/common/abstractions/broadcaster.service\";\nimport { EnvironmentService } from \"@bitwarden/common/abstractions/environment.service\";\nimport { I18nService } from \"@bitwarden/common/abstractions/i18n.service\";\nimport { LogService } from \"@bitwarden/common/abstractions/log.service\";\nimport { PlatformUtilsService } from \"@bitwarden/common/abstractions/platformUtils.service\";\nimport { PolicyService } from \"@bitwarden/common/abstractions/policy/policy.service.abstraction\";\nimport { SearchService } from \"@bitwarden/common/abstractions/search.service\";\nimport { SendService } from \"@bitwarden/common/abstractions/send.service\";\nimport { SendType } from \"@bitwarden/common/enums/sendType\";\nimport { SendView } from \"@bitwarden/common/models/view/send.view\";\nimport { SyncService } from \"@bitwarden/common/vault/abstractions/sync/sync.service.abstraction\";\n\nimport { BrowserSendComponentState } from \"../../models/browserSendComponentState\";\nimport { BrowserStateService } from \"../../services/abstractions/browser-state.service\";\nimport { PopupUtilsService } from \"../services/popup-utils.service\";\n\nconst ComponentId = \"SendComponent\";\n\n@Component({\n  selector: \"app-send-groupings\",\n  templateUrl: \"send-groupings.component.html\",\n})\nexport class SendGroupingsComponent extends BaseSendComponent {\n  // Header\n  showLeftHeader = true;\n  // Send Type Calculations\n  typeCounts = new Map<SendType, number>();\n  // State Handling\n  state: BrowserSendComponentState;\n  private loadedTimeout: number;\n\n  constructor(\n    sendService: SendService,\n    i18nService: I18nService,\n    platformUtilsService: PlatformUtilsService,\n    environmentService: EnvironmentService,\n    ngZone: NgZone,\n    policyService: PolicyService,\n    searchService: SearchService,\n    private popupUtils: PopupUtilsService,\n    private stateService: BrowserStateService,\n    private router: Router,\n    private syncService: SyncService,\n    private changeDetectorRef: ChangeDetectorRef,\n    private broadcasterService: BroadcasterService,\n    logService: LogService\n  ) {\n    super(\n      sendService,\n      i18nService,\n      platformUtilsService,\n      environmentService,\n      ngZone,\n      searchService,\n      policyService,\n      logService\n    );\n    super.onSuccessfulLoad = async () => {\n      this.calculateTypeCounts();\n      this.selectAll();\n    };\n  }\n\n  async ngOnInit() {\n    // Determine Header details\n    this.showLeftHeader = !(\n      this.popupUtils.inSidebar(window) && this.platformUtilsService.isFirefox()\n    );\n    // Clear state of Send Type Component\n    await this.stateService.setBrowserSendTypeComponentState(null);\n    // Let super class finish\n    await super.ngOnInit();\n    // Handle State Restore if necessary\n    const restoredScopeState = await this.restoreState();\n    if (this.state?.searchText != null) {\n      this.searchText = this.state.searchText;\n    }\n\n    if (!this.syncService.syncInProgress) {\n      this.load();\n    } else {\n      this.loadedTimeout = window.setTimeout(() => {\n        if (!this.loaded) {\n          this.load();\n        }\n      }, 5000);\n    }\n\n    if (!this.syncService.syncInProgress || restoredScopeState) {\n      window.setTimeout(() => this.popupUtils.setContentScrollY(window, this.state?.scrollY), 0);\n    }\n\n    // Load all sends if sync completed in background\n    this.broadcasterService.subscribe(ComponentId, (message: any) => {\n      this.ngZone.run(async () => {\n        switch (message.command) {\n          case \"syncCompleted\":\n            window.setTimeout(() => {\n              this.load();\n            }, 500);\n            break;\n          default:\n            break;\n        }\n\n        this.changeDetectorRef.detectChanges();\n      });\n    });\n  }\n\n  ngOnDestroy() {\n    // Remove timeout\n    if (this.loadedTimeout != null) {\n      window.clearTimeout(this.loadedTimeout);\n    }\n    // Save state\n    this.saveState();\n    // Unsubscribe\n    this.broadcasterService.unsubscribe(ComponentId);\n  }\n\n  async selectType(type: SendType) {\n    this.router.navigate([\"/send-type\"], { queryParams: { type: type } });\n  }\n\n  async selectSend(s: SendView) {\n    this.router.navigate([\"/edit-send\"], { queryParams: { sendId: s.id } });\n  }\n\n  async addSend() {\n    if (this.disableSend) {\n      return;\n    }\n    this.router.navigate([\"/add-send\"]);\n  }\n\n  async removePassword(s: SendView): Promise<boolean> {\n    if (this.disableSend) {\n      return;\n    }\n    super.removePassword(s);\n  }\n\n  showSearching() {\n    return (\n      this.hasSearched || (!this.searchPending && this.searchService.isSearchable(this.searchText))\n    );\n  }\n\n  private calculateTypeCounts() {\n    // Create type counts\n    const typeCounts = new Map<SendType, number>();\n    this.sends.forEach((s) => {\n      if (typeCounts.has(s.type)) {\n        typeCounts.set(s.type, typeCounts.get(s.type) + 1);\n      } else {\n        typeCounts.set(s.type, 1);\n      }\n    });\n    this.typeCounts = typeCounts;\n  }\n\n  private async saveState() {\n    this.state = Object.assign(new BrowserSendComponentState(), {\n      scrollY: this.popupUtils.getContentScrollY(window),\n      searchText: this.searchText,\n      sends: this.sends,\n      typeCounts: this.typeCounts,\n    });\n    await this.stateService.setBrowserSendComponentState(this.state);\n  }\n\n  private async restoreState(): Promise<boolean> {\n    this.state = await this.stateService.getBrowserSendComponentState();\n    if (this.state == null) {\n      return false;\n    }\n\n    if (this.state.sends != null) {\n      this.sends = this.state.sends;\n    }\n    if (this.state.typeCounts != null) {\n      this.typeCounts = this.state.typeCounts;\n    }\n\n    return true;\n  }\n}\n","<header>\n  <div class=\"left\">\n    <button type=\"button\" (click)=\"back()\">\n      <span class=\"header-icon\"><i class=\"bwi bwi-angle-left\" aria-hidden=\"true\"></i></span>\n      <span>{{ \"back\" | i18n }}</span>\n    </button>\n  </div>\n  <h1 class=\"sr-only\">{{ \"send\" | i18n }}</h1>\n  <div class=\"search\">\n    <input\n      type=\"search\"\n      placeholder=\"{{ 'searchType' | i18n }}\"\n      id=\"search\"\n      [(ngModel)]=\"searchText\"\n      (input)=\"search(200)\"\n      autocomplete=\"off\"\n      appAutofocus\n    />\n    <i class=\"bwi bwi-search\"></i>\n  </div>\n  <div class=\"right\">\n    <button\n      type=\"button\"\n      (click)=\"addSend()\"\n      appA11yTitle=\"{{ 'addSend' | i18n }}\"\n      [disabled]=\"disableSend\"\n    >\n      <i class=\"bwi bwi-plus bwi-lg bwi-fw\" aria-hidden=\"true\"></i>\n    </button>\n  </div>\n</header>\n<main tabindex=\"-1\" [ngClass]=\"{ flex: disableSend }\">\n  <app-callout type=\"warning\" title=\"{{ 'sendDisabled' | i18n }}\" *ngIf=\"disableSend\">\n    {{ \"sendDisabledWarning\" | i18n }}\n  </app-callout>\n  <div class=\"no-items\" *ngIf=\"!filteredSends.length\">\n    <i class=\"bwi bwi-spinner bwi-spin bwi-3x\" *ngIf=\"!loaded\" aria-hidden=\"true\"></i>\n    <ng-container *ngIf=\"loaded\">\n      <p>{{ \"noItemsInList\" | i18n }}</p>\n      <button\n        type=\"button\"\n        (click)=\"addSend()\"\n        class=\"btn block primary link\"\n        [disabled]=\"disableSend\"\n      >\n        {{ \"addSend\" | i18n }}\n      </button>\n    </ng-container>\n  </div>\n  <div class=\"box list only-list\" *ngIf=\"filteredSends.length\">\n    <h2 class=\"box-header\">\n      {{ groupingTitle }}\n      <span class=\"flex-right\">{{ filteredSends.length }}</span>\n    </h2>\n    <div class=\"box-content\">\n      <app-send-list\n        [sends]=\"filteredSends\"\n        title=\"{{ 'editItem' | i18n }}\"\n        [disabledByPolicy]=\"disableSend\"\n        (onSelected)=\"selectSend($event)\"\n        (onCopySendLink)=\"copy($event)\"\n        (onRemovePassword)=\"removePassword($event)\"\n        (onDeleteSend)=\"delete($event)\"\n      >\n      </app-send-list>\n    </div>\n  </div>\n</main>\n","import { Location } from \"@angular/common\";\nimport { ChangeDetectorRef, Component, NgZone } from \"@angular/core\";\nimport { ActivatedRoute, Router } from \"@angular/router\";\nimport { first } from \"rxjs/operators\";\n\nimport { SendComponent as BaseSendComponent } from \"@bitwarden/angular/components/send/send.component\";\nimport { BroadcasterService } from \"@bitwarden/common/abstractions/broadcaster.service\";\nimport { EnvironmentService } from \"@bitwarden/common/abstractions/environment.service\";\nimport { I18nService } from \"@bitwarden/common/abstractions/i18n.service\";\nimport { LogService } from \"@bitwarden/common/abstractions/log.service\";\nimport { PlatformUtilsService } from \"@bitwarden/common/abstractions/platformUtils.service\";\nimport { PolicyService } from \"@bitwarden/common/abstractions/policy/policy.service.abstraction\";\nimport { SearchService } from \"@bitwarden/common/abstractions/search.service\";\nimport { SendService } from \"@bitwarden/common/abstractions/send.service\";\nimport { SendType } from \"@bitwarden/common/enums/sendType\";\nimport { SendView } from \"@bitwarden/common/models/view/send.view\";\n\nimport { BrowserComponentState } from \"../../models/browserComponentState\";\nimport { BrowserStateService } from \"../../services/abstractions/browser-state.service\";\nimport { PopupUtilsService } from \"../services/popup-utils.service\";\n\nconst ComponentId = \"SendTypeComponent\";\n\n@Component({\n  selector: \"app-send-type\",\n  templateUrl: \"send-type.component.html\",\n})\nexport class SendTypeComponent extends BaseSendComponent {\n  groupingTitle: string;\n  // State Handling\n  state: BrowserComponentState;\n  private refreshTimeout: number;\n  private applySavedState = true;\n\n  constructor(\n    sendService: SendService,\n    i18nService: I18nService,\n    platformUtilsService: PlatformUtilsService,\n    environmentService: EnvironmentService,\n    ngZone: NgZone,\n    policyService: PolicyService,\n    searchService: SearchService,\n    private popupUtils: PopupUtilsService,\n    private stateService: BrowserStateService,\n    private route: ActivatedRoute,\n    private location: Location,\n    private changeDetectorRef: ChangeDetectorRef,\n    private broadcasterService: BroadcasterService,\n    private router: Router,\n    logService: LogService\n  ) {\n    super(\n      sendService,\n      i18nService,\n      platformUtilsService,\n      environmentService,\n      ngZone,\n      searchService,\n      policyService,\n      logService\n    );\n    super.onSuccessfulLoad = async () => {\n      this.selectType(this.type);\n    };\n    this.applySavedState =\n      (window as any).previousPopupUrl != null &&\n      !(window as any).previousPopupUrl.startsWith(\"/send-type\");\n  }\n\n  async ngOnInit() {\n    // Let super class finish\n    await super.ngOnInit();\n    // eslint-disable-next-line rxjs-angular/prefer-takeuntil, rxjs/no-async-subscribe\n    this.route.queryParams.pipe(first()).subscribe(async (params) => {\n      if (this.applySavedState) {\n        this.state = await this.stateService.getBrowserSendTypeComponentState();\n        if (this.state?.searchText != null) {\n          this.searchText = this.state.searchText;\n        }\n      }\n\n      if (params.type != null) {\n        this.type = parseInt(params.type, null);\n        switch (this.type) {\n          case SendType.Text:\n            this.groupingTitle = this.i18nService.t(\"sendTypeText\");\n            break;\n          case SendType.File:\n            this.groupingTitle = this.i18nService.t(\"sendTypeFile\");\n            break;\n          default:\n            break;\n        }\n        await this.load((s) => s.type === this.type);\n      }\n\n      // Restore state and remove reference\n      if (this.applySavedState && this.state != null) {\n        window.setTimeout(() => this.popupUtils.setContentScrollY(window, this.state?.scrollY), 0);\n      }\n      this.stateService.setBrowserSendTypeComponentState(null);\n    });\n\n    // Refresh Send list if sync completed in background\n    this.broadcasterService.subscribe(ComponentId, (message: any) => {\n      this.ngZone.run(async () => {\n        switch (message.command) {\n          case \"syncCompleted\":\n            if (message.successfully) {\n              this.refreshTimeout = window.setTimeout(() => {\n                this.refresh();\n              }, 500);\n            }\n            break;\n          default:\n            break;\n        }\n\n        this.changeDetectorRef.detectChanges();\n      });\n    });\n  }\n\n  ngOnDestroy() {\n    // Remove timeout\n    if (this.refreshTimeout != null) {\n      window.clearTimeout(this.refreshTimeout);\n    }\n    // Save state\n    this.saveState();\n    // Unsubscribe\n    this.broadcasterService.unsubscribe(ComponentId);\n  }\n\n  async selectSend(s: SendView) {\n    this.router.navigate([\"/edit-send\"], { queryParams: { sendId: s.id } });\n  }\n\n  async addSend() {\n    if (this.disableSend) {\n      return;\n    }\n    this.router.navigate([\"/add-send\"], { queryParams: { type: this.type } });\n  }\n\n  async removePassword(s: SendView): Promise<boolean> {\n    if (this.disableSend) {\n      return;\n    }\n    super.removePassword(s);\n  }\n\n  back() {\n    (window as any).routeDirection = \"b\";\n    this.location.back();\n  }\n\n  private async saveState() {\n    this.state = {\n      scrollY: this.popupUtils.getContentScrollY(window),\n      searchText: this.searchText,\n    };\n    await this.stateService.setBrowserSendTypeComponentState(this.state);\n  }\n}\n","import { Injectable, OnDestroy } from \"@angular/core\";\nimport { CanActivate, NavigationEnd, NavigationStart, Router } from \"@angular/router\";\nimport { Subscription } from \"rxjs\";\nimport { filter, pairwise } from \"rxjs/operators\";\n\n@Injectable()\nexport class DebounceNavigationService implements CanActivate, OnDestroy {\n  navigationStartSub: Subscription;\n  navigationSuccessSub: Subscription;\n\n  private lastNavigation: NavigationStart;\n  private thisNavigation: NavigationStart;\n  private lastNavigationSuccessId: number;\n\n  constructor(private router: Router) {\n    this.navigationStartSub = this.router.events\n      .pipe(\n        filter((event) => event instanceof NavigationStart),\n        pairwise()\n      )\n      .subscribe(\n        (events: [NavigationStart, NavigationStart]) =>\n          ([this.lastNavigation, this.thisNavigation] = events)\n      );\n\n    this.navigationSuccessSub = this.router.events\n      .pipe(filter((event) => event instanceof NavigationEnd))\n      .subscribe((event: NavigationEnd) => (this.lastNavigationSuccessId = event.id));\n  }\n\n  async canActivate() {\n    return !(\n      this.thisNavigation?.navigationTrigger === \"hashchange\" &&\n      this.lastNavigation.navigationTrigger === \"popstate\" &&\n      this.lastNavigationSuccessId === this.lastNavigation.id &&\n      this.lastNavigation.url === this.thisNavigation?.url\n    );\n  }\n\n  ngOnDestroy() {\n    if (this.navigationStartSub != null) {\n      this.navigationStartSub.unsubscribe();\n    }\n\n    if (this.navigationSuccessSub != null) {\n      this.navigationSuccessSub.unsubscribe();\n    }\n  }\n}\n","<header>\n  <div class=\"left\">\n    <button type=\"button\" routerLink=\"/tabs/settings\">\n      <span class=\"header-icon\"><i class=\"bwi bwi-angle-left\" aria-hidden=\"true\"></i></span>\n      <span>{{ \"back\" | i18n }}</span>\n    </button>\n  </div>\n  <h1 class=\"center\">\n    <span class=\"title\">{{ \"autofill\" | i18n }}</span>\n  </h1>\n  <div class=\"right\"></div>\n</header>\n<main tabindex=\"-1\">\n  <div class=\"box\">\n    <div class=\"box-content\">\n      <div class=\"box-content-row box-content-row-checkbox\" appBoxRow>\n        <label for=\"autofill\">{{ \"enableAutoFillOnPageLoad\" | i18n }}</label>\n        <input\n          id=\"autofill\"\n          type=\"checkbox\"\n          aria-describedby=\"autofillHelp\"\n          (change)=\"updateAutoFillOnPageLoad()\"\n          [(ngModel)]=\"enableAutoFillOnPageLoad\"\n        />\n      </div>\n    </div>\n    <div id=\"autofillHelp\" class=\"box-footer\">\n      {{ \"enableAutoFillOnPageLoadDesc\" | i18n }}\n      <b>{{ \"warning\" | i18n }}</b\n      >: {{ \"experimentalFeature\" | i18n }}\n      <a (click)=\"AboutAutofill()\">{{ \"learnMoreAboutAutofill\" | i18n }}</a>\n    </div>\n  </div>\n  <div class=\"box\">\n    <div class=\"box-content\">\n      <div class=\"box-content-row\" appBoxRow>\n        <label for=\"defaultAutofill\">{{ \"defaultAutoFillOnPageLoad\" | i18n }}</label>\n        <select\n          id=\"defaultAutofill\"\n          name=\"DefaultAutofill\"\n          aria-describedby=\"defaultAutofillHelp\"\n          [(ngModel)]=\"autoFillOnPageLoadDefault\"\n          (change)=\"updateAutoFillOnPageLoadDefault()\"\n          [disabled]=\"!enableAutoFillOnPageLoad\"\n        >\n          <option *ngFor=\"let o of autoFillOnPageLoadOptions\" [ngValue]=\"o.value\">\n            {{ o.name }}\n          </option>\n        </select>\n      </div>\n    </div>\n    <div id=\"defaultAutofillHelp\" class=\"box-footer\">\n      {{ \"defaultAutoFillOnPageLoadDesc\" | i18n }}\n    </div>\n  </div>\n  <div class=\"box\">\n    <div class=\"box-content\">\n      <div class=\"box-content-row\" appBoxRow>\n        <label for=\"defaultUriMatch\">{{ \"defaultUriMatchDetection\" | i18n }}</label>\n        <select\n          id=\"defaultUriMatch\"\n          name=\"DefaultUriMatch\"\n          aria-describedby=\"defaultUriMatchHelp\"\n          [(ngModel)]=\"defaultUriMatch\"\n          (change)=\"saveDefaultUriMatch()\"\n        >\n          <option *ngFor=\"let o of uriMatchOptions\" [ngValue]=\"o.value\">{{ o.name }}</option>\n        </select>\n      </div>\n    </div>\n    <div id=\"defaultUriMatchHelp\" class=\"box-footer\">\n      {{ \"defaultUriMatchDetectionDesc\" | i18n }}\n    </div>\n  </div>\n</main>\n","import { Component, OnInit } from \"@angular/core\";\n\nimport { I18nService } from \"@bitwarden/common/abstractions/i18n.service\";\nimport { StateService } from \"@bitwarden/common/abstractions/state.service\";\nimport { UriMatchType } from \"@bitwarden/common/enums/uriMatchType\";\n\nimport { BrowserApi } from \"../../browser/browserApi\";\n\n@Component({\n  selector: \"app-autofill\",\n  templateUrl: \"autofill.component.html\",\n})\nexport class AutofillComponent implements OnInit {\n  enableAutoFillOnPageLoad = false;\n  autoFillOnPageLoadDefault = false;\n  autoFillOnPageLoadOptions: any[];\n  defaultUriMatch = UriMatchType.Domain;\n  uriMatchOptions: any[];\n\n  constructor(private stateService: StateService, i18nService: I18nService) {\n    this.autoFillOnPageLoadOptions = [\n      { name: i18nService.t(\"autoFillOnPageLoadYes\"), value: true },\n      { name: i18nService.t(\"autoFillOnPageLoadNo\"), value: false },\n    ];\n    this.uriMatchOptions = [\n      { name: i18nService.t(\"baseDomain\"), value: UriMatchType.Domain },\n      { name: i18nService.t(\"host\"), value: UriMatchType.Host },\n      { name: i18nService.t(\"startsWith\"), value: UriMatchType.StartsWith },\n      { name: i18nService.t(\"regEx\"), value: UriMatchType.RegularExpression },\n      { name: i18nService.t(\"exact\"), value: UriMatchType.Exact },\n      { name: i18nService.t(\"never\"), value: UriMatchType.Never },\n    ];\n  }\n\n  async ngOnInit() {\n    this.enableAutoFillOnPageLoad = await this.stateService.getEnableAutoFillOnPageLoad();\n\n    this.autoFillOnPageLoadDefault =\n      (await this.stateService.getAutoFillOnPageLoadDefault()) ?? true;\n\n    const defaultUriMatch = await this.stateService.getDefaultUriMatch();\n    this.defaultUriMatch = defaultUriMatch == null ? UriMatchType.Domain : defaultUriMatch;\n  }\n\n  async updateAutoFillOnPageLoad() {\n    await this.stateService.setEnableAutoFillOnPageLoad(this.enableAutoFillOnPageLoad);\n  }\n\n  async updateAutoFillOnPageLoadDefault() {\n    await this.stateService.setAutoFillOnPageLoadDefault(this.autoFillOnPageLoadDefault);\n  }\n\n  async saveDefaultUriMatch() {\n    await this.stateService.setDefaultUriMatch(this.defaultUriMatch);\n  }\n\n  AboutAutofill() {\n    BrowserApi.createNewTab(\"https://bitwarden.com/help/auto-fill-browser/\");\n  }\n}\n","<form #form (ngSubmit)=\"submit()\">\n  <header>\n    <div class=\"left\">\n      <button type=\"button\" routerLink=\"/tabs/settings\">\n        <span class=\"header-icon\"><i class=\"bwi bwi-angle-left\" aria-hidden=\"true\"></i></span>\n        <span>{{ \"back\" | i18n }}</span>\n      </button>\n    </div>\n    <h1 class=\"center\">\n      <span class=\"title\">{{ \"excludedDomains\" | i18n }}</span>\n    </h1>\n    <div class=\"right\">\n      <button type=\"submit\">{{ \"save\" | i18n }}</button>\n    </div>\n  </header>\n  <main tabindex=\"-1\">\n    <div class=\"box\">\n      <div class=\"box-content\">\n        <ng-container *ngIf=\"excludedDomains\">\n          <div\n            class=\"box-content-row box-content-row-multi\"\n            appBoxRow\n            *ngFor=\"let domain of excludedDomains; let i = index; trackBy: trackByFunction\"\n          >\n            <button\n              type=\"button\"\n              appStopClick\n              (click)=\"removeUri(i)\"\n              appA11yTitle=\"{{ 'remove' | i18n }}\"\n            >\n              <i class=\"bwi bwi-minus-circle bwi-lg\" aria-hidden=\"true\"></i>\n            </button>\n            <div class=\"row-main\">\n              <label for=\"excludedDomain{{ i }}\">{{ \"uriPosition\" | i18n: i + 1 }}</label>\n              <input\n                id=\"excludedDomain{{ i }}\"\n                name=\"excludedDomain{{ i }}\"\n                type=\"text\"\n                [(ngModel)]=\"domain.uri\"\n                placeholder=\"{{ 'ex' | i18n }} https://google.com\"\n                inputmode=\"url\"\n                appInputVerbatim\n              />\n              <label for=\"currentUris{{ i }}\" class=\"sr-only\">\n                {{ \"currentUri\" | i18n }} {{ i + 1 }}\n              </label>\n              <select\n                *ngIf=\"currentUris && currentUris.length\"\n                id=\"currentUris{{ i }}\"\n                name=\"currentUris{{ i }}\"\n                [(ngModel)]=\"domain.uri\"\n                [hidden]=\"!domain.showCurrentUris\"\n              >\n                <option [ngValue]=\"null\">-- {{ \"select\" | i18n }} --</option>\n                <option *ngFor=\"let u of currentUris\" [ngValue]=\"u\">{{ u }}</option>\n              </select>\n            </div>\n            <div class=\"action-buttons\">\n              <button\n                type=\"button\"\n                *ngIf=\"currentUris && currentUris.length\"\n                class=\"row-btn\"\n                appStopClick\n                appA11yTitle=\"{{ 'toggleCurrentUris' | i18n }}\"\n                (click)=\"toggleUriInput(domain)\"\n                [attr.aria-pressed]=\"domain.showCurrentUris === true\"\n              >\n                <i aria-hidden=\"true\" class=\"bwi bwi-lg bwi-list\"></i>\n              </button>\n            </div>\n          </div>\n        </ng-container>\n        <button\n          type=\"button\"\n          appStopClick\n          (click)=\"addUri()\"\n          class=\"box-content-row box-content-row-newmulti single-line\"\n        >\n          <i class=\"bwi bwi-plus-circle bwi-fw bwi-lg\" aria-hidden=\"true\"></i> {{ \"newUri\" | i18n }}\n        </button>\n      </div>\n      <div class=\"box-footer\">\n        {{ \"excludedDomainsDesc\" | i18n }}\n      </div>\n    </div>\n  </main>\n</form>\n","import { Component, NgZone, OnDestroy, OnInit } from \"@angular/core\";\nimport { Router } from \"@angular/router\";\n\nimport { BroadcasterService } from \"@bitwarden/common/abstractions/broadcaster.service\";\nimport { I18nService } from \"@bitwarden/common/abstractions/i18n.service\";\nimport { PlatformUtilsService } from \"@bitwarden/common/abstractions/platformUtils.service\";\nimport { StateService } from \"@bitwarden/common/abstractions/state.service\";\nimport { Utils } from \"@bitwarden/common/misc/utils\";\n\nimport { BrowserApi } from \"../../browser/browserApi\";\n\ninterface ExcludedDomain {\n  uri: string;\n  showCurrentUris: boolean;\n}\n\nconst BroadcasterSubscriptionId = \"excludedDomains\";\n\n@Component({\n  selector: \"app-excluded-domains\",\n  templateUrl: \"excluded-domains.component.html\",\n})\nexport class ExcludedDomainsComponent implements OnInit, OnDestroy {\n  excludedDomains: ExcludedDomain[] = [];\n  existingExcludedDomains: ExcludedDomain[] = [];\n  currentUris: string[];\n  loadCurrentUrisTimeout: number;\n\n  constructor(\n    private stateService: StateService,\n    private i18nService: I18nService,\n    private router: Router,\n    private broadcasterService: BroadcasterService,\n    private ngZone: NgZone,\n    private platformUtilsService: PlatformUtilsService\n  ) {}\n\n  async ngOnInit() {\n    const savedDomains = await this.stateService.getNeverDomains();\n    if (savedDomains) {\n      for (const uri of Object.keys(savedDomains)) {\n        this.excludedDomains.push({ uri: uri, showCurrentUris: false });\n        this.existingExcludedDomains.push({ uri: uri, showCurrentUris: false });\n      }\n    }\n\n    await this.loadCurrentUris();\n\n    this.broadcasterService.subscribe(BroadcasterSubscriptionId, (message: any) => {\n      this.ngZone.run(async () => {\n        switch (message.command) {\n          case \"tabChanged\":\n          case \"windowChanged\":\n            if (this.loadCurrentUrisTimeout != null) {\n              window.clearTimeout(this.loadCurrentUrisTimeout);\n            }\n            this.loadCurrentUrisTimeout = window.setTimeout(\n              async () => await this.loadCurrentUris(),\n              500\n            );\n            break;\n          default:\n            break;\n        }\n      });\n    });\n  }\n\n  ngOnDestroy() {\n    this.broadcasterService.unsubscribe(BroadcasterSubscriptionId);\n  }\n\n  async addUri() {\n    this.excludedDomains.push({ uri: \"\", showCurrentUris: false });\n  }\n\n  async removeUri(i: number) {\n    this.excludedDomains.splice(i, 1);\n  }\n\n  async submit() {\n    const savedDomains: { [name: string]: null } = {};\n    const newExcludedDomains = this.getNewlyAddedDomians(this.excludedDomains);\n    for (const domain of this.excludedDomains) {\n      const resp = newExcludedDomains.filter((e) => e.uri === domain.uri);\n      if (resp.length === 0) {\n        savedDomains[domain.uri] = null;\n      } else {\n        if (domain.uri && domain.uri !== \"\") {\n          const validDomain = Utils.getHostname(domain.uri);\n          if (!validDomain) {\n            this.platformUtilsService.showToast(\n              \"error\",\n              null,\n              this.i18nService.t(\"excludedDomainsInvalidDomain\", domain.uri)\n            );\n            return;\n          }\n          savedDomains[validDomain] = null;\n        }\n      }\n    }\n\n    await this.stateService.setNeverDomains(savedDomains);\n    this.router.navigate([\"/tabs/settings\"]);\n  }\n\n  trackByFunction(index: number, item: any) {\n    return index;\n  }\n\n  getNewlyAddedDomians(domain: ExcludedDomain[]): ExcludedDomain[] {\n    const result = this.excludedDomains.filter(\n      (newDomain) =>\n        !this.existingExcludedDomains.some((oldDomain) => newDomain.uri === oldDomain.uri)\n    );\n    return result;\n  }\n\n  toggleUriInput(domain: ExcludedDomain) {\n    domain.showCurrentUris = !domain.showCurrentUris;\n  }\n\n  async loadCurrentUris() {\n    const tabs = await BrowserApi.tabsQuery({ windowType: \"normal\" });\n    if (tabs) {\n      const uriSet = new Set(tabs.map((tab) => Utils.getHostname(tab.url)));\n      uriSet.delete(null);\n      this.currentUris = Array.from(uriSet);\n    }\n  }\n}\n","export enum EncryptedExportType {\n  AccountEncrypted = 0,\n  FileEncrypted = 1,\n}\n","import { EventView } from \"../models/view/event.view\";\n\nexport type ExportFormat = \"csv\" | \"json\" | \"encrypted_json\";\n\nexport abstract class ExportService {\n  getExport: (format?: ExportFormat, organizationId?: string) => Promise<string>;\n  getPasswordProtectedExport: (password: string, organizationId?: string) => Promise<string>;\n  getOrganizationExport: (organizationId: string, format?: ExportFormat) => Promise<string>;\n  getEventExport: (events: EventView[]) => Promise<string>;\n  getFileName: (prefix?: string, extension?: string) => string;\n}\n","import { SecretVerificationRequest } from \"../../models/request/secret-verification.request\";\nimport { Verification } from \"../../types/verification\";\n\nexport abstract class UserVerificationService {\n  buildRequest: <T extends SecretVerificationRequest>(\n    verification: Verification,\n    requestClass?: new () => T,\n    alreadyHashed?: boolean\n  ) => Promise<T>;\n  verifyUser: (verification: Verification) => Promise<boolean>;\n  requestOTP: () => Promise<void>;\n}\n","import { Directive, EventEmitter, OnDestroy, OnInit, Output } from \"@angular/core\";\nimport { UntypedFormBuilder, Validators } from \"@angular/forms\";\nimport { merge, takeUntil, Subject, startWith } from \"rxjs\";\n\nimport { CryptoService } from \"@bitwarden/common/abstractions/crypto.service\";\nimport { EventCollectionService } from \"@bitwarden/common/abstractions/event/event-collection.service\";\nimport { ExportService } from \"@bitwarden/common/abstractions/export.service\";\nimport { FileDownloadService } from \"@bitwarden/common/abstractions/fileDownload/fileDownload.service\";\nimport { I18nService } from \"@bitwarden/common/abstractions/i18n.service\";\nimport { LogService } from \"@bitwarden/common/abstractions/log.service\";\nimport { PlatformUtilsService } from \"@bitwarden/common/abstractions/platformUtils.service\";\nimport { PolicyService } from \"@bitwarden/common/abstractions/policy/policy.service.abstraction\";\nimport { UserVerificationService } from \"@bitwarden/common/abstractions/userVerification/userVerification.service.abstraction\";\nimport { EncryptedExportType } from \"@bitwarden/common/enums/encryptedExportType\";\nimport { EventType } from \"@bitwarden/common/enums/eventType\";\nimport { PolicyType } from \"@bitwarden/common/enums/policyType\";\n\n@Directive()\nexport class ExportComponent implements OnInit, OnDestroy {\n  @Output() onSaved = new EventEmitter();\n\n  formPromise: Promise<string>;\n  disabledByPolicy = false;\n\n  exportForm = this.formBuilder.group({\n    format: [\"json\"],\n    secret: [\"\"],\n    filePassword: [\"\", Validators.required],\n    confirmFilePassword: [\"\", Validators.required],\n    fileEncryptionType: [EncryptedExportType.AccountEncrypted],\n  });\n\n  formatOptions = [\n    { name: \".json\", value: \"json\" },\n    { name: \".csv\", value: \"csv\" },\n    { name: \".json (Encrypted)\", value: \"encrypted_json\" },\n  ];\n\n  private destroy$ = new Subject<void>();\n\n  constructor(\n    protected cryptoService: CryptoService,\n    protected i18nService: I18nService,\n    protected platformUtilsService: PlatformUtilsService,\n    protected exportService: ExportService,\n    protected eventCollectionService: EventCollectionService,\n    private policyService: PolicyService,\n    protected win: Window,\n    private logService: LogService,\n    private userVerificationService: UserVerificationService,\n    private formBuilder: UntypedFormBuilder,\n    protected fileDownloadService: FileDownloadService\n  ) {}\n\n  async ngOnInit() {\n    this.policyService\n      .policyAppliesToActiveUser$(PolicyType.DisablePersonalVaultExport)\n      .pipe(takeUntil(this.destroy$))\n      .subscribe((policyAppliesToActiveUser) => {\n        this.disabledByPolicy = policyAppliesToActiveUser;\n      });\n\n    await this.checkExportDisabled();\n\n    merge(\n      this.exportForm.get(\"format\").valueChanges,\n      this.exportForm.get(\"fileEncryptionType\").valueChanges\n    )\n      .pipe(takeUntil(this.destroy$))\n      .pipe(startWith(0))\n      .subscribe(() => this.adjustValidators());\n  }\n\n  ngOnDestroy(): void {\n    this.destroy$.next();\n  }\n\n  async checkExportDisabled() {\n    if (this.disabledByPolicy) {\n      this.exportForm.disable();\n    }\n  }\n\n  get encryptedFormat() {\n    return this.format === \"encrypted_json\";\n  }\n\n  protected async doExport() {\n    try {\n      this.formPromise = this.getExportData();\n      const data = await this.formPromise;\n      this.downloadFile(data);\n      this.saved();\n      await this.collectEvent();\n      this.exportForm.get(\"secret\").setValue(\"\");\n      this.exportForm.clearValidators();\n    } catch (e) {\n      this.logService.error(e);\n    }\n  }\n\n  async submit() {\n    if (this.disabledByPolicy) {\n      this.platformUtilsService.showToast(\n        \"error\",\n        null,\n        this.i18nService.t(\"personalVaultExportPolicyInEffect\")\n      );\n      return;\n    }\n\n    const acceptedWarning = await this.warningDialog();\n    if (!acceptedWarning) {\n      return;\n    }\n    const secret = this.exportForm.get(\"secret\").value;\n\n    try {\n      await this.userVerificationService.verifyUser(secret);\n    } catch (e) {\n      this.platformUtilsService.showToast(\"error\", this.i18nService.t(\"errorOccurred\"), e.message);\n      return;\n    }\n\n    this.doExport();\n  }\n\n  async warningDialog() {\n    if (this.encryptedFormat) {\n      return await this.platformUtilsService.showDialog(\n        \"<p>\" +\n          this.i18nService.t(\"encExportKeyWarningDesc\") +\n          \"<p>\" +\n          this.i18nService.t(\"encExportAccountWarningDesc\"),\n        this.i18nService.t(\"confirmVaultExport\"),\n        this.i18nService.t(\"exportVault\"),\n        this.i18nService.t(\"cancel\"),\n        \"warning\",\n        true\n      );\n    } else {\n      return await this.platformUtilsService.showDialog(\n        this.i18nService.t(\"exportWarningDesc\"),\n        this.i18nService.t(\"confirmVaultExport\"),\n        this.i18nService.t(\"exportVault\"),\n        this.i18nService.t(\"cancel\"),\n        \"warning\"\n      );\n    }\n  }\n\n  protected saved() {\n    this.onSaved.emit();\n  }\n\n  protected getExportData() {\n    if (\n      this.format === \"encrypted_json\" &&\n      this.fileEncryptionType === EncryptedExportType.FileEncrypted\n    ) {\n      return this.exportService.getPasswordProtectedExport(this.filePassword);\n    } else {\n      return this.exportService.getExport(this.format, null);\n    }\n  }\n\n  protected getFileName(prefix?: string) {\n    let extension = this.format;\n    if (this.format === \"encrypted_json\") {\n      if (prefix == null) {\n        prefix = \"encrypted\";\n      } else {\n        prefix = \"encrypted_\" + prefix;\n      }\n      extension = \"json\";\n    }\n    return this.exportService.getFileName(prefix, extension);\n  }\n\n  protected async collectEvent(): Promise<void> {\n    await this.eventCollectionService.collect(EventType.User_ClientExportedVault);\n  }\n\n  get format() {\n    return this.exportForm.get(\"format\").value;\n  }\n\n  get filePassword() {\n    return this.exportForm.get(\"filePassword\").value;\n  }\n\n  get confirmFilePassword() {\n    return this.exportForm.get(\"confirmFilePassword\").value;\n  }\n\n  get fileEncryptionType() {\n    return this.exportForm.get(\"fileEncryptionType\").value;\n  }\n\n  adjustValidators() {\n    this.exportForm.get(\"confirmFilePassword\").reset();\n    this.exportForm.get(\"filePassword\").reset();\n\n    if (this.encryptedFormat && this.fileEncryptionType == EncryptedExportType.FileEncrypted) {\n      this.exportForm.controls.filePassword.enable();\n      this.exportForm.controls.confirmFilePassword.enable();\n    } else {\n      this.exportForm.controls.filePassword.disable();\n      this.exportForm.controls.confirmFilePassword.disable();\n    }\n  }\n\n  private downloadFile(csv: string): void {\n    const fileName = this.getFileName();\n    this.fileDownloadService.download({\n      fileName: fileName,\n      blobData: csv,\n      blobOptions: { type: \"text/plain\" },\n    });\n  }\n}\n","export enum VerificationType {\n  MasterPassword = 0,\n  OTP = 1,\n}\n","<ng-container *ngIf=\"show\">\n  <app-callout type=\"info\" title=\"{{ scopeConfig.title | i18n }}\">\n    {{ scopeConfig.description | i18n: scopeConfig.scopeIdentifier }}\n  </app-callout>\n</ng-container>\n","import { Component, Input, OnInit } from \"@angular/core\";\n\nimport { OrganizationService } from \"@bitwarden/common/abstractions/organization/organization.service.abstraction\";\nimport { StateService } from \"@bitwarden/common/abstractions/state.service\";\n\n@Component({\n  selector: \"app-export-scope-callout\",\n  templateUrl: \"export-scope-callout.component.html\",\n})\nexport class ExportScopeCalloutComponent implements OnInit {\n  @Input() organizationId: string = null;\n\n  show = false;\n  scopeConfig: {\n    title: string;\n    description: string;\n    scopeIdentifier: string;\n  };\n\n  constructor(\n    protected organizationService: OrganizationService,\n    protected stateService: StateService\n  ) {}\n\n  async ngOnInit(): Promise<void> {\n    if (!this.organizationService.hasOrganizations()) {\n      return;\n    }\n    this.scopeConfig =\n      this.organizationId != null\n        ? {\n            title: \"exportingOrganizationVaultTitle\",\n            description: \"exportingOrganizationVaultDescription\",\n            scopeIdentifier: this.organizationService.get(this.organizationId).name,\n          }\n        : {\n            title: \"exportingPersonalVaultTitle\",\n            description: \"exportingPersonalVaultDescription\",\n            scopeIdentifier: await this.stateService.getEmail(),\n          };\n    this.show = true;\n  }\n}\n","import { Directive, OnInit } from \"@angular/core\";\nimport { ControlValueAccessor, FormControl } from \"@angular/forms\";\n\nimport { KeyConnectorService } from \"@bitwarden/common/abstractions/keyConnector.service\";\nimport { UserVerificationService } from \"@bitwarden/common/abstractions/userVerification/userVerification.service.abstraction\";\nimport { VerificationType } from \"@bitwarden/common/enums/verificationType\";\nimport { Utils } from \"@bitwarden/common/misc/utils\";\nimport { Verification } from \"@bitwarden/common/types/verification\";\n\n/**\n * Used for general-purpose user verification throughout the app.\n * Collects the user's master password, or if they are using Key Connector, prompts for an OTP via email.\n * This is exposed to the parent component via the ControlValueAccessor interface (e.g. bind it to a FormControl).\n * Use UserVerificationService to verify the user's input.\n */\n@Directive({\n  selector: \"app-user-verification\",\n})\n// eslint-disable-next-line rxjs-angular/prefer-takeuntil\nexport class UserVerificationComponent implements ControlValueAccessor, OnInit {\n  usesKeyConnector = false;\n  disableRequestOTP = false;\n  sentCode = false;\n\n  secret = new FormControl(\"\");\n\n  private onChange: (value: Verification) => void;\n\n  constructor(\n    private keyConnectorService: KeyConnectorService,\n    private userVerificationService: UserVerificationService\n  ) {}\n\n  async ngOnInit() {\n    this.usesKeyConnector = await this.keyConnectorService.getUsesKeyConnector();\n    this.processChanges(this.secret.value);\n\n    // eslint-disable-next-line rxjs-angular/prefer-takeuntil\n    this.secret.valueChanges.subscribe((secret: string) => this.processChanges(secret));\n  }\n\n  async requestOTP() {\n    if (this.usesKeyConnector) {\n      this.disableRequestOTP = true;\n      try {\n        await this.userVerificationService.requestOTP();\n        this.sentCode = true;\n      } finally {\n        this.disableRequestOTP = false;\n      }\n    }\n  }\n\n  writeValue(obj: any): void {\n    this.secret.setValue(obj);\n  }\n\n  registerOnChange(fn: any): void {\n    this.onChange = fn;\n  }\n\n  registerOnTouched(fn: any): void {\n    // Not implemented\n  }\n\n  setDisabledState?(isDisabled: boolean): void {\n    this.disableRequestOTP = isDisabled;\n    if (isDisabled) {\n      this.secret.disable();\n    } else {\n      this.secret.enable();\n    }\n  }\n\n  private processChanges(secret: string) {\n    if (this.onChange == null) {\n      return;\n    }\n\n    this.onChange({\n      type: this.usesKeyConnector ? VerificationType.OTP : VerificationType.MasterPassword,\n      secret: Utils.isNullOrWhitespace(secret) ? null : secret,\n    });\n  }\n}\n","<ng-container *ngIf=\"!usesKeyConnector\">\n  <div class=\"box-content-row\" appBoxRow>\n    <label for=\"masterPassword\">{{ \"masterPass\" | i18n }}</label>\n    <input\n      id=\"masterPassword\"\n      type=\"password\"\n      name=\"MasterPasswordHash\"\n      aria-describedby=\"confirmIdentityHelp\"\n      class=\"form-control\"\n      [formControl]=\"secret\"\n      required\n      appAutofocus\n      appInputVerbatim\n    />\n  </div>\n</ng-container>\n<ng-container *ngIf=\"usesKeyConnector\">\n  <div class=\"box-content-row\" appBoxRow>\n    <label class=\"d-block\">{{ \"sendVerificationCode\" | i18n }}</label>\n    <button\n      type=\"button\"\n      class=\"btn btn-outline-secondary\"\n      (click)=\"requestOTP()\"\n      [disabled]=\"disableRequestOTP\"\n    >\n      {{ \"sendCode\" | i18n }}\n    </button>\n    <span class=\"ml-2 text-success\" role=\"alert\" @sent *ngIf=\"sentCode\">\n      <i class=\"bwi bwi-check-circle\" aria-hidden=\"true\"></i>\n      {{ \"codeSent\" | i18n }}\n    </span>\n  </div>\n\n  <div class=\"box-content-row\" appBoxRow>\n    <label for=\"verificationCode\">{{ \"verificationCode\" | i18n }}</label>\n    <input\n      id=\"verificationCode\"\n      type=\"input\"\n      name=\"verificationCode\"\n      class=\"form-control\"\n      [formControl]=\"secret\"\n      required\n      appAutofocus\n      appInputVerbatim\n    />\n  </div>\n</ng-container>\n","import { animate, style, transition, trigger } from \"@angular/animations\";\nimport { Component } from \"@angular/core\";\nimport { NG_VALUE_ACCESSOR } from \"@angular/forms\";\n\nimport { UserVerificationComponent as BaseComponent } from \"@bitwarden/angular/components/user-verification.component\";\n\n@Component({\n  selector: \"app-user-verification\",\n  templateUrl: \"user-verification.component.html\",\n  providers: [\n    {\n      provide: NG_VALUE_ACCESSOR,\n      multi: true,\n      useExisting: UserVerificationComponent,\n    },\n  ],\n  animations: [\n    trigger(\"sent\", [\n      transition(\":enter\", [style({ opacity: 0 }), animate(\"100ms\", style({ opacity: 1 }))]),\n    ]),\n  ],\n})\nexport class UserVerificationComponent extends BaseComponent {}\n","<form (ngSubmit)=\"submit()\" [formGroup]=\"exportForm\">\n  <header>\n    <div class=\"left\">\n      <button type=\"button\" routerLink=\"/tabs/settings\">\n        <span class=\"header-icon\" aria-hidden=\"true\"><i class=\"bwi bwi-angle-left\"></i></span>\n        <span>{{ \"back\" | i18n }}</span>\n      </button>\n    </div>\n    <h1 class=\"center\">\n      <span class=\"title\">{{ \"exportVault\" | i18n }}</span>\n    </h1>\n    <div class=\"right\">\n      <button type=\"submit\" [disabled]=\"!exportForm.enabled\">\n        {{ \"submit\" | i18n }}\n      </button>\n    </div>\n  </header>\n  <main tabindex=\"-1\">\n    <app-callout type=\"warning\" title=\"{{ 'vaultExportDisabled' | i18n }}\" *ngIf=\"disabledByPolicy\">\n      {{ \"personalVaultExportPolicyInEffect\" | i18n }}\n    </app-callout>\n    <app-export-scope-callout *ngIf=\"!disabledByPolicy\"></app-export-scope-callout>\n\n    <div class=\"box\">\n      <div class=\"box-content\">\n        <div class=\"box-content-row\" appBoxRow>\n          <label for=\"format\">{{ \"fileFormat\" | i18n }}</label>\n          <select id=\"format\" name=\"Format\" formControlName=\"format\">\n            <option *ngFor=\"let f of formatOptions\" [value]=\"f.value\">{{ f.name }}</option>\n          </select>\n        </div>\n        <app-user-verification ngDefaultControl formControlName=\"secret\" name=\"Secret\">\n        </app-user-verification>\n      </div>\n      <div id=\"confirmIdentityHelp\" class=\"box-footer\">\n        <p>{{ \"confirmIdentity\" | i18n }}</p>\n      </div>\n    </div>\n  </main>\n</form>\n","import { Component } from \"@angular/core\";\nimport { UntypedFormBuilder } from \"@angular/forms\";\nimport { Router } from \"@angular/router\";\n\nimport { ExportComponent as BaseExportComponent } from \"@bitwarden/angular/components/export.component\";\nimport { CryptoService } from \"@bitwarden/common/abstractions/crypto.service\";\nimport { EventCollectionService } from \"@bitwarden/common/abstractions/event/event-collection.service\";\nimport { ExportService } from \"@bitwarden/common/abstractions/export.service\";\nimport { FileDownloadService } from \"@bitwarden/common/abstractions/fileDownload/fileDownload.service\";\nimport { I18nService } from \"@bitwarden/common/abstractions/i18n.service\";\nimport { LogService } from \"@bitwarden/common/abstractions/log.service\";\nimport { PlatformUtilsService } from \"@bitwarden/common/abstractions/platformUtils.service\";\nimport { PolicyService } from \"@bitwarden/common/abstractions/policy/policy.service.abstraction\";\nimport { UserVerificationService } from \"@bitwarden/common/abstractions/userVerification/userVerification.service.abstraction\";\n\n@Component({\n  selector: \"app-export\",\n  templateUrl: \"export.component.html\",\n})\nexport class ExportComponent extends BaseExportComponent {\n  constructor(\n    cryptoService: CryptoService,\n    i18nService: I18nService,\n    platformUtilsService: PlatformUtilsService,\n    exportService: ExportService,\n    eventCollectionService: EventCollectionService,\n    policyService: PolicyService,\n    private router: Router,\n    logService: LogService,\n    userVerificationService: UserVerificationService,\n    formBuilder: UntypedFormBuilder,\n    fileDownloadService: FileDownloadService\n  ) {\n    super(\n      cryptoService,\n      i18nService,\n      platformUtilsService,\n      exportService,\n      eventCollectionService,\n      policyService,\n      window,\n      logService,\n      userVerificationService,\n      formBuilder,\n      fileDownloadService\n    );\n  }\n\n  protected saved() {\n    super.saved();\n    this.router.navigate([\"/tabs/settings\"]);\n  }\n}\n","import { Folder } from \"../../models/domain/folder\";\nimport { FolderResponse } from \"../../models/response/folder.response\";\n\nexport class FolderApiServiceAbstraction {\n  save: (folder: Folder) => Promise<any>;\n  delete: (id: string) => Promise<any>;\n  get: (id: string) => Promise<FolderResponse>;\n}\n","import { Directive, EventEmitter, Input, OnInit, Output } from \"@angular/core\";\n\nimport { I18nService } from \"@bitwarden/common/abstractions/i18n.service\";\nimport { LogService } from \"@bitwarden/common/abstractions/log.service\";\nimport { PlatformUtilsService } from \"@bitwarden/common/abstractions/platformUtils.service\";\nimport { FolderApiServiceAbstraction } from \"@bitwarden/common/vault/abstractions/folder/folder-api.service.abstraction\";\nimport { FolderService } from \"@bitwarden/common/vault/abstractions/folder/folder.service.abstraction\";\nimport { FolderView } from \"@bitwarden/common/vault/models/view/folder.view\";\n\n@Directive()\nexport class FolderAddEditComponent implements OnInit {\n  @Input() folderId: string;\n  @Output() onSavedFolder = new EventEmitter<FolderView>();\n  @Output() onDeletedFolder = new EventEmitter<FolderView>();\n\n  editMode = false;\n  folder: FolderView = new FolderView();\n  title: string;\n  formPromise: Promise<any>;\n  deletePromise: Promise<any>;\n  protected componentName = \"\";\n\n  constructor(\n    protected folderService: FolderService,\n    protected folderApiService: FolderApiServiceAbstraction,\n    protected i18nService: I18nService,\n    protected platformUtilsService: PlatformUtilsService,\n    private logService: LogService\n  ) {}\n\n  async ngOnInit() {\n    await this.init();\n  }\n\n  async submit(): Promise<boolean> {\n    if (this.folder.name == null || this.folder.name === \"\") {\n      this.platformUtilsService.showToast(\n        \"error\",\n        this.i18nService.t(\"errorOccurred\"),\n        this.i18nService.t(\"nameRequired\")\n      );\n      return false;\n    }\n\n    try {\n      const folder = await this.folderService.encrypt(this.folder);\n      this.formPromise = this.folderApiService.save(folder);\n      await this.formPromise;\n      this.platformUtilsService.showToast(\n        \"success\",\n        null,\n        this.i18nService.t(this.editMode ? \"editedFolder\" : \"addedFolder\")\n      );\n      this.onSavedFolder.emit(this.folder);\n      return true;\n    } catch (e) {\n      this.logService.error(e);\n    }\n\n    return false;\n  }\n\n  async delete(): Promise<boolean> {\n    const confirmed = await this.platformUtilsService.showDialog(\n      this.i18nService.t(\"deleteFolderConfirmation\"),\n      this.i18nService.t(\"deleteFolder\"),\n      this.i18nService.t(\"yes\"),\n      this.i18nService.t(\"no\"),\n      \"warning\",\n      false,\n      this.componentName != \"\" ? this.componentName + \" .modal-content\" : null\n    );\n    if (!confirmed) {\n      return false;\n    }\n\n    try {\n      this.deletePromise = this.folderApiService.delete(this.folder.id);\n      await this.deletePromise;\n      this.platformUtilsService.showToast(\"success\", null, this.i18nService.t(\"deletedFolder\"));\n      this.onDeletedFolder.emit(this.folder);\n    } catch (e) {\n      this.logService.error(e);\n    }\n\n    return true;\n  }\n\n  protected async init() {\n    this.editMode = this.folderId != null;\n\n    if (this.editMode) {\n      this.editMode = true;\n      this.title = this.i18nService.t(\"editFolder\");\n      const folder = await this.folderService.get(this.folderId);\n      this.folder = await folder.decrypt();\n    } else {\n      this.title = this.i18nService.t(\"addFolder\");\n    }\n  }\n}\n","export enum ThemeType {\n  System = \"system\",\n  Light = \"light\",\n  Dark = \"dark\",\n  Nord = \"nord\",\n  SolarizedDark = \"solarizedDark\",\n}\n","<form #form (ngSubmit)=\"submit()\" [appApiAction]=\"formPromise\">\n  <header>\n    <div class=\"left\">\n      <button type=\"button\" routerLink=\"/folders\">{{ \"cancel\" | i18n }}</button>\n    </div>\n    <h1 class=\"center\">\n      <span class=\"title\">{{ title }}</span>\n    </h1>\n    <div class=\"right\">\n      <button type=\"submit\" [disabled]=\"form.loading\">\n        <span [hidden]=\"form.loading\">{{ \"save\" | i18n }}</span>\n        <i class=\"bwi bwi-spinner bwi-lg bwi-spin\" [hidden]=\"!form.loading\" aria-hidden=\"true\"></i>\n      </button>\n    </div>\n  </header>\n  <main tabindex=\"-1\" *ngIf=\"folder\">\n    <div class=\"box\">\n      <div class=\"box-content\">\n        <div class=\"box-content-row\" appBoxRow>\n          <label for=\"name\">{{ \"name\" | i18n }}</label>\n          <input\n            id=\"name\"\n            type=\"text\"\n            name=\"Name\"\n            [(ngModel)]=\"folder.name\"\n            [appAutofocus]=\"!editMode\"\n          />\n        </div>\n      </div>\n    </div>\n    <div class=\"box list\" *ngIf=\"editMode\">\n      <div class=\"box-content single-line\">\n        <button\n          type=\"button\"\n          class=\"box-content-row\"\n          appStopClick\n          (click)=\"delete()\"\n          [appApiAction]=\"deletePromise\"\n          #deleteBtn\n        >\n          <div class=\"row-main text-danger\">\n            <div class=\"icon text-danger\" aria-hidden=\"true\">\n              <i class=\"bwi bwi-trash bwi-lg bwi-fw\" [hidden]=\"$any(deleteBtn).loading\"></i>\n              <i\n                class=\"bwi bwi-spinner bwi-spin bwi-lg bwi-fw\"\n                [hidden]=\"!$any(deleteBtn).loading\"\n              ></i>\n            </div>\n            <span>{{ \"deleteFolder\" | i18n }}</span>\n          </div>\n        </button>\n      </div>\n    </div>\n  </main>\n</form>\n","import { Component } from \"@angular/core\";\nimport { ActivatedRoute, Router } from \"@angular/router\";\nimport { first } from \"rxjs/operators\";\n\nimport { FolderAddEditComponent as BaseFolderAddEditComponent } from \"@bitwarden/angular/vault/components/folder-add-edit.component\";\nimport { I18nService } from \"@bitwarden/common/abstractions/i18n.service\";\nimport { LogService } from \"@bitwarden/common/abstractions/log.service\";\nimport { PlatformUtilsService } from \"@bitwarden/common/abstractions/platformUtils.service\";\nimport { FolderApiServiceAbstraction } from \"@bitwarden/common/vault/abstractions/folder/folder-api.service.abstraction\";\nimport { FolderService } from \"@bitwarden/common/vault/abstractions/folder/folder.service.abstraction\";\n\n@Component({\n  selector: \"app-folder-add-edit\",\n  templateUrl: \"folder-add-edit.component.html\",\n})\n// eslint-disable-next-line rxjs-angular/prefer-takeuntil\nexport class FolderAddEditComponent extends BaseFolderAddEditComponent {\n  constructor(\n    folderService: FolderService,\n    folderApiService: FolderApiServiceAbstraction,\n    i18nService: I18nService,\n    platformUtilsService: PlatformUtilsService,\n    private router: Router,\n    private route: ActivatedRoute,\n    logService: LogService\n  ) {\n    super(folderService, folderApiService, i18nService, platformUtilsService, logService);\n  }\n\n  async ngOnInit() {\n    // eslint-disable-next-line rxjs-angular/prefer-takeuntil, rxjs/no-async-subscribe\n    this.route.queryParams.pipe(first()).subscribe(async (params) => {\n      if (params.folderId) {\n        this.folderId = params.folderId;\n      }\n      await this.init();\n    });\n  }\n\n  async submit(): Promise<boolean> {\n    if (await super.submit()) {\n      this.router.navigate([\"/folders\"]);\n      return true;\n    }\n\n    return false;\n  }\n\n  async delete(): Promise<boolean> {\n    const confirmed = await super.delete();\n    if (confirmed) {\n      this.router.navigate([\"/folders\"]);\n    }\n    return confirmed;\n  }\n}\n","<header>\n  <div class=\"left\">\n    <button type=\"button\" routerLink=\"/tabs/settings\">\n      <span class=\"header-icon\"><i class=\"bwi bwi-angle-left\" aria-hidden=\"true\"></i></span>\n      <span>{{ \"back\" | i18n }}</span>\n    </button>\n  </div>\n  <h1 class=\"center\">\n    <span class=\"title\">{{ \"folders\" | i18n }}</span>\n  </h1>\n  <div class=\"right\">\n    <button type=\"button\" (click)=\"addFolder()\" appA11yTitle=\"{{ 'addFolder' | i18n }}\">\n      <i class=\"bwi bwi-plus bwi-lg bwi-fw\" aria-hidden=\"true\"></i>\n    </button>\n  </div>\n</header>\n<main tabindex=\"-1\">\n  <div class=\"box list full-list\" *ngIf=\"(folders$ | async)?.length\">\n    <div class=\"box-content\">\n      <button\n        type=\"button\"\n        appStopClick\n        (click)=\"folderSelected(f)\"\n        class=\"box-content-row padded\"\n        *ngFor=\"let f of folders$ | async\"\n      >\n        {{ f.name }}\n      </button>\n    </div>\n  </div>\n  <div class=\"no-items\" *ngIf=\"!(folders$ | async)?.length\">\n    <p>{{ \"noFolders\" | i18n }}</p>\n  </div>\n</main>\n","import { Component } from \"@angular/core\";\nimport { Router } from \"@angular/router\";\nimport { map, Observable } from \"rxjs\";\n\nimport { FolderService } from \"@bitwarden/common/vault/abstractions/folder/folder.service.abstraction\";\nimport { FolderView } from \"@bitwarden/common/vault/models/view/folder.view\";\n\n@Component({\n  selector: \"app-folders\",\n  templateUrl: \"folders.component.html\",\n})\nexport class FoldersComponent {\n  folders$: Observable<FolderView[]>;\n\n  constructor(private folderService: FolderService, private router: Router) {\n    this.folders$ = this.folderService.folderViews$.pipe(\n      map((folders) => {\n        if (folders.length > 0) {\n          folders = folders.slice(0, folders.length - 1);\n        }\n\n        return folders;\n      })\n    );\n  }\n\n  folderSelected(folder: FolderView) {\n    this.router.navigate([\"/edit-folder\"], { queryParams: { folderId: folder.id } });\n  }\n\n  addFolder() {\n    this.router.navigate([\"/add-folder\"]);\n  }\n}\n","import { Observable } from \"rxjs\";\n\nimport { ThemeType } from \"@bitwarden/common/enums/themeType\";\n\nimport { Theme } from \"./theme\";\n\nexport abstract class AbstractThemingService {\n  theme$: Observable<Theme>;\n  monitorThemeChanges: () => Promise<void>;\n  updateSystemTheme: (systemTheme: ThemeType) => void;\n  updateConfiguredTheme: (theme: ThemeType) => Promise<void>;\n}\n","<header>\n  <div class=\"left\">\n    <button type=\"button\" routerLink=\"/tabs/settings\">\n      <span class=\"header-icon\"><i class=\"bwi bwi-angle-left\" aria-hidden=\"true\"></i></span>\n      <span>{{ \"back\" | i18n }}</span>\n    </button>\n  </div>\n  <h1 class=\"center\">\n    <span class=\"title\">{{ \"options\" | i18n }}</span>\n  </h1>\n  <div class=\"right\"></div>\n</header>\n<main tabindex=\"-1\">\n  <div class=\"box\">\n    <h2>\n      <button\n        type=\"button\"\n        class=\"box-header-expandable\"\n        (click)=\"showGeneral = !showGeneral\"\n        [attr.aria-expanded]=\"showGeneral\"\n      >\n        <i *ngIf=\"!showGeneral\" class=\"bwi bwi-angle-right bwi-sm icon\" aria-hidden=\"true\"></i>\n        <i *ngIf=\"showGeneral\" class=\"bwi bwi-angle-down bwi-sm icon\" aria-hidden=\"true\"></i>\n        General\n      </button>\n    </h2>\n  </div>\n  <ng-container *ngIf=\"showGeneral\">\n    <div class=\"box\" *ngIf=\"showClearClipboard\">\n      <div class=\"box-content\">\n        <div class=\"box-content-row\" appBoxRow>\n          <label for=\"clearClipboard\">{{ \"clearClipboard\" | i18n }}</label>\n          <select\n            id=\"clearClipboard\"\n            name=\"ClearClipboard\"\n            aria-describedby=\"clearClipboardHelp\"\n            [(ngModel)]=\"clearClipboard\"\n            (change)=\"saveClearClipboard()\"\n          >\n            <option *ngFor=\"let o of clearClipboardOptions\" [ngValue]=\"o.value\">\n              {{ o.name }}\n            </option>\n          </select>\n        </div>\n      </div>\n      <div id=\"clearClipboardHelp\" class=\"box-footer\">{{ \"clearClipboardDesc\" | i18n }}</div>\n    </div>\n    <div class=\"box\">\n      <div class=\"box-content\">\n        <div class=\"box-content-row box-content-row-checkbox\" appBoxRow>\n          <label for=\"totp\">{{ \"enableAutoTotpCopy\" | i18n }}</label>\n          <input\n            id=\"totp\"\n            type=\"checkbox\"\n            aria-describedby=\"totpHelp\"\n            (change)=\"updateAutoTotpCopy()\"\n            [(ngModel)]=\"enableAutoTotpCopy\"\n          />\n        </div>\n      </div>\n      <div id=\"totpHelp\" class=\"box-footer\">{{ \"disableAutoTotpCopyDesc\" | i18n }}</div>\n    </div>\n    <div class=\"box\">\n      <div class=\"box-content\">\n        <div class=\"box-content-row box-content-row-checkbox\" appBoxRow>\n          <label for=\"addlogin-notification-bar\">{{ \"enableAddLoginNotification\" | i18n }}</label>\n          <input\n            id=\"addlogin-notification-bar\"\n            type=\"checkbox\"\n            aria-describedby=\"addlogin-notification-barHelp\"\n            (change)=\"updateAddLoginNotification()\"\n            [(ngModel)]=\"enableAddLoginNotification\"\n          />\n        </div>\n      </div>\n      <div id=\"addlogin-notification-barHelp\" class=\"box-footer\">\n        {{ \"addLoginNotificationDesc\" | i18n }}\n      </div>\n    </div>\n    <div class=\"box\">\n      <div class=\"box-content\">\n        <div class=\"box-content-row box-content-row-checkbox\" appBoxRow>\n          <label for=\"changedpass-notification-bar\">{{\n            \"enableChangedPasswordNotification\" | i18n\n          }}</label>\n          <input\n            id=\"changedpass-notification-bar\"\n            type=\"checkbox\"\n            aria-describedby=\"changedpass-notification-barHelp\"\n            (change)=\"updateChangedPasswordNotification()\"\n            [(ngModel)]=\"enableChangedPasswordNotification\"\n          />\n        </div>\n      </div>\n      <div id=\"changedpass-notification-barHelp\" class=\"box-footer\">\n        {{ \"changedPasswordNotificationDesc\" | i18n }}\n      </div>\n    </div>\n    <div class=\"box\">\n      <div class=\"box-content\">\n        <div class=\"box-content-row box-content-row-checkbox\" appBoxRow>\n          <label for=\"context-menu\">{{ \"enableContextMenuItem\" | i18n }}</label>\n          <input\n            id=\"context-menu\"\n            type=\"checkbox\"\n            aria-describedby=\"context-menuHelp\"\n            (change)=\"updateContextMenuItem()\"\n            [(ngModel)]=\"enableContextMenuItem\"\n          />\n        </div>\n      </div>\n      <div id=\"context-menuHelp\" class=\"box-footer\">{{ \"contextMenuItemDesc\" | i18n }}</div>\n    </div>\n  </ng-container>\n  <div class=\"box box-section-divider\">\n    <h2>\n      <button\n        type=\"button\"\n        class=\"box-header-expandable\"\n        (click)=\"showDisplay = !showDisplay\"\n        [attr.aria-expanded]=\"showDisplay\"\n      >\n        <i *ngIf=\"!showDisplay\" class=\"bwi bwi-angle-right bwi-sm icon\" aria-hidden=\"true\"></i>\n        <i *ngIf=\"showDisplay\" class=\"bwi bwi-angle-down bwi-sm icon\" aria-hidden=\"true\"></i>\n        Display\n      </button>\n    </h2>\n  </div>\n  <ng-container *ngIf=\"showDisplay\">\n    <div class=\"box\">\n      <div class=\"box-content\">\n        <div class=\"box-content-row box-content-row-checkbox\" appBoxRow>\n          <label for=\"showCardsCurrentTab\">{{ \"showCardsCurrentTab\" | i18n }}</label>\n          <input\n            id=\"showCardsCurrentTab\"\n            type=\"checkbox\"\n            aria-describedby=\"showCardsCurrentTabHelp\"\n            (change)=\"updateShowCardsCurrentTab()\"\n            [(ngModel)]=\"showCardsCurrentTab\"\n          />\n        </div>\n      </div>\n      <div id=\"showCardsCurrentTabHelp\" class=\"box-footer\">\n        {{ \"showCardsCurrentTabDesc\" | i18n }}\n      </div>\n    </div>\n    <div class=\"box\">\n      <div class=\"box-content\">\n        <div class=\"box-content-row box-content-row-checkbox\" appBoxRow>\n          <label for=\"showIdentitiesCurrentTab\">{{ \"showIdentitiesCurrentTab\" | i18n }}</label>\n          <input\n            id=\"showIdentitiesCurrentTab\"\n            type=\"checkbox\"\n            aria-describedby=\"showIdentitiesCurrentTabHelp\"\n            (change)=\"updateShowIdentitiesCurrentTab()\"\n            [(ngModel)]=\"showIdentitiesCurrentTab\"\n          />\n        </div>\n      </div>\n      <div id=\"showIdentitiesCurrentTabHelp\" class=\"box-footer\">\n        {{ \"showIdentitiesCurrentTabDesc\" | i18n }}\n      </div>\n    </div>\n    <div class=\"box\">\n      <div class=\"box-content\">\n        <div class=\"box-content-row box-content-row-checkbox\" appBoxRow>\n          <label for=\"favicon\">{{ \"enableFavicon\" | i18n }}</label>\n          <input\n            id=\"favicon\"\n            type=\"checkbox\"\n            aria-describedby=\"faviconHelp\"\n            (change)=\"updateFavicon()\"\n            [(ngModel)]=\"enableFavicon\"\n          />\n        </div>\n      </div>\n      <div id=\"faviconHelp\" class=\"box-footer\">{{ \"faviconDesc\" | i18n }}</div>\n    </div>\n    <div class=\"box\">\n      <div class=\"box-content\">\n        <div class=\"box-content-row box-content-row-checkbox\" appBoxRow>\n          <label for=\"badge\">{{ \"enableBadgeCounter\" | i18n }}</label>\n          <input\n            id=\"badge\"\n            type=\"checkbox\"\n            aria-describedby=\"badgeHelp\"\n            (change)=\"updateBadgeCounter()\"\n            [(ngModel)]=\"enableBadgeCounter\"\n          />\n        </div>\n      </div>\n      <div id=\"badgeHelp\" class=\"box-footer\">{{ \"badgeCounterDesc\" | i18n }}</div>\n    </div>\n    <div class=\"box\">\n      <div class=\"box-content\">\n        <div class=\"box-content-row\" appBoxRow>\n          <label for=\"theme\">{{ \"theme\" | i18n }}</label>\n          <select\n            id=\"theme\"\n            name=\"Theme\"\n            aria-describedby=\"themeHelp\"\n            [(ngModel)]=\"theme\"\n            (change)=\"saveTheme()\"\n          >\n            <option *ngFor=\"let o of themeOptions\" [ngValue]=\"o.value\">{{ o.name }}</option>\n          </select>\n        </div>\n      </div>\n      <div id=\"themeHelp\" class=\"box-footer\">{{ \"themeDesc\" | i18n }}</div>\n    </div>\n  </ng-container>\n</main>\n","import { Component, OnInit } from \"@angular/core\";\n\nimport { AbstractThemingService } from \"@bitwarden/angular/services/theming/theming.service.abstraction\";\nimport { I18nService } from \"@bitwarden/common/abstractions/i18n.service\";\nimport { MessagingService } from \"@bitwarden/common/abstractions/messaging.service\";\nimport { StateService } from \"@bitwarden/common/abstractions/state.service\";\nimport { TotpService } from \"@bitwarden/common/abstractions/totp.service\";\nimport { ThemeType } from \"@bitwarden/common/enums/themeType\";\nimport { UriMatchType } from \"@bitwarden/common/enums/uriMatchType\";\n\n@Component({\n  selector: \"app-options\",\n  templateUrl: \"options.component.html\",\n})\nexport class OptionsComponent implements OnInit {\n  enableFavicon = false;\n  enableBadgeCounter = false;\n  enableAutoFillOnPageLoad = false;\n  autoFillOnPageLoadDefault = false;\n  autoFillOnPageLoadOptions: any[];\n  enableAutoTotpCopy = false; // TODO: Does it matter if this is set to false or true?\n  enableContextMenuItem = false;\n  enableAddLoginNotification = false;\n  enableChangedPasswordNotification = false;\n  showCardsCurrentTab = false;\n  showIdentitiesCurrentTab = false;\n  showClearClipboard = true;\n  theme: ThemeType;\n  themeOptions: any[];\n  defaultUriMatch = UriMatchType.Domain;\n  uriMatchOptions: any[];\n  clearClipboard: number;\n  clearClipboardOptions: any[];\n  showGeneral = true;\n  showAutofill = true;\n  showDisplay = true;\n\n  constructor(\n    private messagingService: MessagingService,\n    private stateService: StateService,\n    private totpService: TotpService,\n    i18nService: I18nService,\n    private themingService: AbstractThemingService\n  ) {\n    this.themeOptions = [\n      { name: i18nService.t(\"default\"), value: ThemeType.System },\n      { name: i18nService.t(\"light\"), value: ThemeType.Light },\n      { name: i18nService.t(\"dark\"), value: ThemeType.Dark },\n      { name: \"Nord\", value: ThemeType.Nord },\n      { name: i18nService.t(\"solarizedDark\"), value: ThemeType.SolarizedDark },\n    ];\n    this.uriMatchOptions = [\n      { name: i18nService.t(\"baseDomain\"), value: UriMatchType.Domain },\n      { name: i18nService.t(\"host\"), value: UriMatchType.Host },\n      { name: i18nService.t(\"startsWith\"), value: UriMatchType.StartsWith },\n      { name: i18nService.t(\"regEx\"), value: UriMatchType.RegularExpression },\n      { name: i18nService.t(\"exact\"), value: UriMatchType.Exact },\n      { name: i18nService.t(\"never\"), value: UriMatchType.Never },\n    ];\n    this.clearClipboardOptions = [\n      { name: i18nService.t(\"never\"), value: null },\n      { name: i18nService.t(\"tenSeconds\"), value: 10 },\n      { name: i18nService.t(\"twentySeconds\"), value: 20 },\n      { name: i18nService.t(\"thirtySeconds\"), value: 30 },\n      { name: i18nService.t(\"oneMinute\"), value: 60 },\n      { name: i18nService.t(\"twoMinutes\"), value: 120 },\n      { name: i18nService.t(\"fiveMinutes\"), value: 300 },\n    ];\n    this.autoFillOnPageLoadOptions = [\n      { name: i18nService.t(\"autoFillOnPageLoadYes\"), value: true },\n      { name: i18nService.t(\"autoFillOnPageLoadNo\"), value: false },\n    ];\n  }\n\n  async ngOnInit() {\n    this.enableAutoFillOnPageLoad = await this.stateService.getEnableAutoFillOnPageLoad();\n\n    this.autoFillOnPageLoadDefault =\n      (await this.stateService.getAutoFillOnPageLoadDefault()) ?? true;\n\n    this.enableAddLoginNotification = !(await this.stateService.getDisableAddLoginNotification());\n\n    this.enableChangedPasswordNotification =\n      !(await this.stateService.getDisableChangedPasswordNotification());\n\n    this.enableContextMenuItem = !(await this.stateService.getDisableContextMenuItem());\n\n    this.showCardsCurrentTab = !(await this.stateService.getDontShowCardsCurrentTab());\n    this.showIdentitiesCurrentTab = !(await this.stateService.getDontShowIdentitiesCurrentTab());\n\n    this.enableAutoTotpCopy = !(await this.stateService.getDisableAutoTotpCopy());\n\n    this.enableFavicon = !(await this.stateService.getDisableFavicon());\n\n    this.enableBadgeCounter = !(await this.stateService.getDisableBadgeCounter());\n\n    this.theme = await this.stateService.getTheme();\n\n    const defaultUriMatch = await this.stateService.getDefaultUriMatch();\n    this.defaultUriMatch = defaultUriMatch == null ? UriMatchType.Domain : defaultUriMatch;\n\n    this.clearClipboard = await this.stateService.getClearClipboard();\n  }\n\n  async updateAddLoginNotification() {\n    await this.stateService.setDisableAddLoginNotification(!this.enableAddLoginNotification);\n  }\n\n  async updateChangedPasswordNotification() {\n    await this.stateService.setDisableChangedPasswordNotification(\n      !this.enableChangedPasswordNotification\n    );\n  }\n\n  async updateContextMenuItem() {\n    await this.stateService.setDisableContextMenuItem(!this.enableContextMenuItem);\n    this.messagingService.send(\"bgUpdateContextMenu\");\n  }\n\n  async updateAutoTotpCopy() {\n    await this.stateService.setDisableAutoTotpCopy(!this.enableAutoTotpCopy);\n  }\n\n  async updateAutoFillOnPageLoad() {\n    await this.stateService.setEnableAutoFillOnPageLoad(this.enableAutoFillOnPageLoad);\n  }\n\n  async updateAutoFillOnPageLoadDefault() {\n    await this.stateService.setAutoFillOnPageLoadDefault(this.autoFillOnPageLoadDefault);\n  }\n\n  async updateFavicon() {\n    await this.stateService.setDisableFavicon(!this.enableFavicon);\n  }\n\n  async updateBadgeCounter() {\n    await this.stateService.setDisableBadgeCounter(!this.enableBadgeCounter);\n    this.messagingService.send(\"bgUpdateContextMenu\");\n  }\n\n  async updateShowCardsCurrentTab() {\n    await this.stateService.setDontShowCardsCurrentTab(!this.showCardsCurrentTab);\n  }\n\n  async updateShowIdentitiesCurrentTab() {\n    await this.stateService.setDontShowIdentitiesCurrentTab(!this.showIdentitiesCurrentTab);\n  }\n\n  async saveTheme() {\n    await this.themingService.updateConfiguredTheme(this.theme);\n  }\n\n  async saveDefaultUriMatch() {\n    await this.stateService.setDefaultUriMatch(this.defaultUriMatch);\n  }\n\n  async saveClearClipboard() {\n    await this.stateService.setClearClipboard(this.clearClipboard);\n  }\n}\n","import { Directive, OnInit } from \"@angular/core\";\n\nimport { ApiService } from \"@bitwarden/common/abstractions/api.service\";\nimport { I18nService } from \"@bitwarden/common/abstractions/i18n.service\";\nimport { LogService } from \"@bitwarden/common/abstractions/log.service\";\nimport { PlatformUtilsService } from \"@bitwarden/common/abstractions/platformUtils.service\";\nimport { StateService } from \"@bitwarden/common/abstractions/state.service\";\n\n@Directive()\nexport class PremiumComponent implements OnInit {\n  isPremium = false;\n  price = 10;\n  refreshPromise: Promise<any>;\n\n  constructor(\n    protected i18nService: I18nService,\n    protected platformUtilsService: PlatformUtilsService,\n    protected apiService: ApiService,\n    private logService: LogService,\n    protected stateService: StateService\n  ) {}\n\n  async ngOnInit() {\n    this.isPremium = await this.stateService.getCanAccessPremium();\n  }\n\n  async refresh() {\n    try {\n      this.refreshPromise = this.apiService.refreshIdentityToken();\n      await this.refreshPromise;\n      this.platformUtilsService.showToast(\"success\", null, this.i18nService.t(\"refreshComplete\"));\n      this.isPremium = await this.stateService.getCanAccessPremium();\n    } catch (e) {\n      this.logService.error(e);\n    }\n  }\n\n  async purchase() {\n    const confirmed = await this.platformUtilsService.showDialog(\n      this.i18nService.t(\"premiumPurchaseAlert\"),\n      this.i18nService.t(\"premiumPurchase\"),\n      this.i18nService.t(\"yes\"),\n      this.i18nService.t(\"cancel\")\n    );\n    if (confirmed) {\n      this.platformUtilsService.launchUri(\"https://vault.bitwarden.com/#/?premium=purchase\");\n    }\n  }\n\n  async manage() {\n    const confirmed = await this.platformUtilsService.showDialog(\n      this.i18nService.t(\"premiumManageAlert\"),\n      this.i18nService.t(\"premiumManage\"),\n      this.i18nService.t(\"yes\"),\n      this.i18nService.t(\"cancel\")\n    );\n    if (confirmed) {\n      this.platformUtilsService.launchUri(\"https://vault.bitwarden.com/#/?premium=manage\");\n    }\n  }\n}\n","<header>\n  <div class=\"left\">\n    <button type=\"button\" (click)=\"goBack()\">\n      <span class=\"header-icon\"><i class=\"bwi bwi-angle-left\" aria-hidden=\"true\"></i></span>\n      <span>{{ \"back\" | i18n }}</span>\n    </button>\n  </div>\n  <h1 class=\"center\">\n    <span class=\"title\">{{ \"premiumMembership\" | i18n }}</span>\n  </h1>\n  <div class=\"right\"></div>\n</header>\n<main tabindex=\"-1\">\n  <div class=\"content\">\n    <ng-container *ngIf=\"!isPremium\">\n      <p class=\"text-center lead\">{{ \"premiumNotCurrentMember\" | i18n }}</p>\n      <p>{{ \"premiumSignUpAndGet\" | i18n }}</p>\n      <ul class=\"bwi-ul\">\n        <li>\n          <i class=\"bwi bwi-li bwi-check text-success\" aria-hidden=\"true\"></i>\n          {{ \"ppremiumSignUpStorage\" | i18n }}\n        </li>\n        <li>\n          <i class=\"bwi bwi-li bwi-check text-success\" aria-hidden=\"true\"></i>\n          {{ \"ppremiumSignUpTwoStep\" | i18n }}\n        </li>\n        <li>\n          <i class=\"bwi bwi-li bwi-check text-success\" aria-hidden=\"true\"></i>\n          {{ \"ppremiumSignUpReports\" | i18n }}\n        </li>\n        <li>\n          <i class=\"bwi bwi-li bwi-check text-success\" aria-hidden=\"true\"></i>\n          {{ \"ppremiumSignUpTotp\" | i18n }}\n        </li>\n        <li>\n          <i class=\"bwi bwi-li bwi-check text-success\" aria-hidden=\"true\"></i>\n          {{ \"ppremiumSignUpSupport\" | i18n }}\n        </li>\n        <li>\n          <i class=\"bwi bwi-li bwi-check text-success\" aria-hidden=\"true\"></i>\n          {{ \"ppremiumSignUpFuture\" | i18n }}\n        </li>\n      </ul>\n      <p class=\"text-center lead\">{{ priceString }}</p>\n      <button type=\"button\" class=\"btn primary block\" (click)=\"purchase()\">\n        <b>{{ \"premiumPurchase\" | i18n }}</b>\n      </button>\n      <button\n        #refreshBtn\n        type=\"button\"\n        (click)=\"refresh()\"\n        [disabled]=\"$any(refreshBtn).loading\"\n        [appApiAction]=\"refreshPromise\"\n        class=\"btn link block\"\n      >\n        <span [hidden]=\"$any(refreshBtn).loading\">{{ \"premiumRefresh\" | i18n }}</span>\n        <i\n          class=\"bwi bwi-spinner bwi-spin bwi-lg bwi-fw\"\n          [hidden]=\"!$any(refreshBtn).loading\"\n          aria-hidden=\"true\"\n        ></i>\n      </button>\n    </ng-container>\n    <ng-container *ngIf=\"isPremium\">\n      <p class=\"text-center lead\">{{ \"premiumCurrentMember\" | i18n }}</p>\n      <p class=\"text-center\">{{ \"premiumCurrentMemberThanks\" | i18n }}</p>\n      <button type=\"button\" class=\"btn block primary\" (click)=\"manage()\">\n        <b>{{ \"premiumManage\" | i18n }}</b>\n      </button>\n    </ng-container>\n  </div>\n</main>\n","import { CurrencyPipe, Location } from \"@angular/common\";\nimport { Component } from \"@angular/core\";\n\nimport { PremiumComponent as BasePremiumComponent } from \"@bitwarden/angular/vault/components/premium.component\";\nimport { ApiService } from \"@bitwarden/common/abstractions/api.service\";\nimport { I18nService } from \"@bitwarden/common/abstractions/i18n.service\";\nimport { LogService } from \"@bitwarden/common/abstractions/log.service\";\nimport { PlatformUtilsService } from \"@bitwarden/common/abstractions/platformUtils.service\";\nimport { StateService } from \"@bitwarden/common/abstractions/state.service\";\n\n@Component({\n  selector: \"app-premium\",\n  templateUrl: \"premium.component.html\",\n})\nexport class PremiumComponent extends BasePremiumComponent {\n  priceString: string;\n\n  constructor(\n    i18nService: I18nService,\n    platformUtilsService: PlatformUtilsService,\n    apiService: ApiService,\n    stateService: StateService,\n    logService: LogService,\n    private location: Location,\n    private currencyPipe: CurrencyPipe\n  ) {\n    super(i18nService, platformUtilsService, apiService, logService, stateService);\n\n    // Support old price string. Can be removed in future once all translations are properly updated.\n    const thePrice = this.currencyPipe.transform(this.price, \"$\");\n    this.priceString = i18nService.t(\"premiumPrice\", thePrice);\n    if (this.priceString.indexOf(\"%price%\") > -1) {\n      this.priceString = this.priceString.replace(\"%price%\", thePrice);\n    }\n  }\n\n  goBack() {\n    this.location.back();\n  }\n}\n","import { Observable, Subject } from \"rxjs\";\nimport { first } from \"rxjs/operators\";\n\nexport class ModalRef {\n  onCreated: Observable<HTMLElement>; // Modal added to the DOM.\n  onClose: Observable<any>; // Initiated close.\n  onClosed: Observable<any>; // Modal was closed (Remove element from DOM)\n  onShow: Observable<void>; // Start showing modal\n  onShown: Observable<void>; // Modal is fully visible\n\n  private readonly _onCreated = new Subject<HTMLElement>();\n  private readonly _onClose = new Subject<any>();\n  private readonly _onClosed = new Subject<any>();\n  private readonly _onShow = new Subject<void>();\n  private readonly _onShown = new Subject<void>();\n  private lastResult: any;\n\n  constructor() {\n    this.onCreated = this._onCreated.asObservable();\n    this.onClose = this._onClose.asObservable();\n    this.onClosed = this._onClosed.asObservable();\n    this.onShow = this._onShow.asObservable();\n    this.onShown = this._onShow.asObservable();\n  }\n\n  show() {\n    this._onShow.next();\n  }\n\n  shown() {\n    this._onShown.next();\n  }\n\n  close(result?: any) {\n    this.lastResult = result;\n    this._onClose.next(result);\n  }\n\n  closed() {\n    this._onClosed.next(this.lastResult);\n  }\n\n  created(el: HTMLElement) {\n    this._onCreated.next(el);\n  }\n\n  onClosedPromise(): Promise<any> {\n    return this.onClosed.pipe(first()).toPromise();\n  }\n}\n","import { ConfigurableFocusTrap, ConfigurableFocusTrapFactory } from \"@angular/cdk/a11y\";\nimport {\n  AfterViewInit,\n  ChangeDetectorRef,\n  Component,\n  ComponentRef,\n  ElementRef,\n  OnDestroy,\n  Type,\n  ViewChild,\n  ViewContainerRef,\n} from \"@angular/core\";\n\nimport { ModalService } from \"../../services/modal.service\";\n\nimport { ModalRef } from \"./modal.ref\";\n\n@Component({\n  selector: \"app-modal\",\n  template: \"<ng-template #modalContent></ng-template>\",\n})\nexport class DynamicModalComponent implements AfterViewInit, OnDestroy {\n  componentRef: ComponentRef<any>;\n\n  @ViewChild(\"modalContent\", { read: ViewContainerRef, static: true })\n  modalContentRef: ViewContainerRef;\n\n  childComponentType: Type<any>;\n  setComponentParameters: (component: any) => void;\n\n  private focusTrap: ConfigurableFocusTrap;\n\n  constructor(\n    private modalService: ModalService,\n    private cd: ChangeDetectorRef,\n    private el: ElementRef<HTMLElement>,\n    private focusTrapFactory: ConfigurableFocusTrapFactory,\n    public modalRef: ModalRef\n  ) {}\n\n  ngAfterViewInit() {\n    this.loadChildComponent(this.childComponentType);\n    if (this.setComponentParameters != null) {\n      this.setComponentParameters(this.componentRef.instance);\n    }\n    this.cd.detectChanges();\n\n    this.modalRef.created(this.el.nativeElement);\n    this.focusTrap = this.focusTrapFactory.create(\n      this.el.nativeElement.querySelector(\".modal-dialog\")\n    );\n    if (this.el.nativeElement.querySelector(\"[appAutoFocus]\") == null) {\n      this.focusTrap.focusFirstTabbableElementWhenReady();\n    }\n  }\n\n  loadChildComponent(componentType: Type<any>) {\n    const componentFactory = this.modalService.resolveComponentFactory(componentType);\n\n    this.modalContentRef.clear();\n    this.componentRef = this.modalContentRef.createComponent(componentFactory);\n  }\n\n  ngOnDestroy() {\n    if (this.componentRef) {\n      this.componentRef.destroy();\n    }\n    this.focusTrap.destroy();\n  }\n\n  close() {\n    this.modalRef.close();\n  }\n\n  getFocus() {\n    const autoFocusEl = this.el.nativeElement.querySelector(\"[appAutoFocus]\") as HTMLElement;\n    autoFocusEl?.focus();\n  }\n}\n","import { InjectFlags, InjectionToken, Injector, Type } from \"@angular/core\";\n\nexport class ModalInjector implements Injector {\n  constructor(private _parentInjector: Injector, private _additionalTokens: WeakMap<any, any>) {}\n\n  get<T>(token: Type<T> | InjectionToken<T>, notFoundValue?: T, flags?: InjectFlags): T;\n  get(token: any, notFoundValue?: any, flags?: any) {\n    return this._additionalTokens.get(token) ?? this._parentInjector.get<any>(token, notFoundValue);\n  }\n}\n","import {\n  ApplicationRef,\n  ComponentFactory,\n  ComponentFactoryResolver,\n  ComponentRef,\n  EmbeddedViewRef,\n  Injectable,\n  Injector,\n  Type,\n  ViewContainerRef,\n} from \"@angular/core\";\nimport { first } from \"rxjs/operators\";\n\nimport { DynamicModalComponent } from \"../components/modal/dynamic-modal.component\";\nimport { ModalInjector } from \"../components/modal/modal-injector\";\nimport { ModalRef } from \"../components/modal/modal.ref\";\n\nexport class ModalConfig<D = any> {\n  data?: D;\n  allowMultipleModals?: boolean;\n  replaceTopModal?: boolean;\n}\n\n@Injectable()\nexport class ModalService {\n  protected modalList: ComponentRef<DynamicModalComponent>[] = [];\n\n  // Lazy loaded modules are not available in componentFactoryResolver,\n  // therefore modules needs to manually initialize their resolvers.\n  private factoryResolvers: Map<Type<any>, ComponentFactoryResolver> = new Map();\n\n  constructor(\n    private componentFactoryResolver: ComponentFactoryResolver,\n    private applicationRef: ApplicationRef,\n    private injector: Injector\n  ) {\n    document.addEventListener(\"keyup\", (event) => {\n      if (event.key === \"Escape\" && this.modalCount > 0) {\n        this.topModal.instance.close();\n      }\n    });\n  }\n\n  get modalCount() {\n    return this.modalList.length;\n  }\n\n  private get topModal() {\n    return this.modalList[this.modalCount - 1];\n  }\n\n  /**\n   * @deprecated Use `dialogService.open` (in web) or `modalService.open` (in desktop/browser) instead.\n   * If replacing an existing call to this method, also remove any `@ViewChild` and `<ng-template>` associated with the\n   * existing usage.\n   */\n  async openViewRef<T>(\n    componentType: Type<T>,\n    viewContainerRef: ViewContainerRef,\n    setComponentParameters: (component: T) => void = null\n  ): Promise<[ModalRef, T]> {\n    const [modalRef, modalComponentRef] = this.openInternal(componentType, null, false);\n    modalComponentRef.instance.setComponentParameters = setComponentParameters;\n\n    viewContainerRef.insert(modalComponentRef.hostView);\n\n    await modalRef.onCreated.pipe(first()).toPromise();\n\n    return [modalRef, modalComponentRef.instance.componentRef.instance];\n  }\n\n  open(componentType: Type<any>, config: ModalConfig = {}) {\n    const { replaceTopModal = false, allowMultipleModals = false } = config;\n\n    if (this.modalCount > 0 && replaceTopModal) {\n      this.topModal.instance.close();\n    }\n\n    if (this.modalCount > 0 && !allowMultipleModals) {\n      return;\n    }\n\n    const [modalRef] = this.openInternal(componentType, config, true);\n\n    return modalRef;\n  }\n\n  registerComponentFactoryResolver<T>(\n    componentType: Type<T>,\n    componentFactoryResolver: ComponentFactoryResolver\n  ): void {\n    this.factoryResolvers.set(componentType, componentFactoryResolver);\n  }\n\n  resolveComponentFactory<T>(componentType: Type<T>): ComponentFactory<T> {\n    if (this.factoryResolvers.has(componentType)) {\n      return this.factoryResolvers.get(componentType).resolveComponentFactory(componentType);\n    }\n\n    return this.componentFactoryResolver.resolveComponentFactory(componentType);\n  }\n\n  closeAll(): void {\n    this.modalList.forEach((modal) => modal.instance.close());\n  }\n\n  protected openInternal(\n    componentType: Type<any>,\n    config?: ModalConfig,\n    attachToDom?: boolean\n  ): [ModalRef, ComponentRef<DynamicModalComponent>] {\n    const [modalRef, componentRef] = this.createModalComponent(config);\n    componentRef.instance.childComponentType = componentType;\n\n    if (attachToDom) {\n      this.applicationRef.attachView(componentRef.hostView);\n      const domElem = (componentRef.hostView as EmbeddedViewRef<any>).rootNodes[0] as HTMLElement;\n      document.body.appendChild(domElem);\n    }\n\n    modalRef.onClosed.pipe(first()).subscribe(() => {\n      if (attachToDom) {\n        this.applicationRef.detachView(componentRef.hostView);\n      }\n      componentRef.destroy();\n\n      this.modalList.pop();\n      if (this.modalCount > 0) {\n        this.topModal.instance.getFocus();\n      }\n    });\n\n    this.setupHandlers(modalRef);\n\n    this.modalList.push(componentRef);\n\n    return [modalRef, componentRef];\n  }\n\n  protected setupHandlers(modalRef: ModalRef) {\n    let backdrop: HTMLElement = null;\n\n    // Add backdrop, setup [data-dismiss] handler.\n    modalRef.onCreated.pipe(first()).subscribe((el) => {\n      document.body.classList.add(\"modal-open\");\n\n      const modalEl: HTMLElement = el.querySelector(\".modal\");\n      const dialogEl = modalEl.querySelector(\".modal-dialog\") as HTMLElement;\n\n      backdrop = document.createElement(\"div\");\n      backdrop.className = \"modal-backdrop fade\";\n      backdrop.style.zIndex = `${this.modalCount}040`;\n      modalEl.prepend(backdrop);\n\n      dialogEl.addEventListener(\"click\", (e: Event) => {\n        e.stopPropagation();\n      });\n      dialogEl.style.zIndex = `${this.modalCount}050`;\n\n      const modals = Array.from(\n        el.querySelectorAll('.modal-backdrop, .modal *[data-dismiss=\"modal\"]')\n      );\n      for (const closeElement of modals) {\n        closeElement.addEventListener(\"click\", () => {\n          modalRef.close();\n        });\n      }\n    });\n\n    // onClose is used in Web to hook into bootstrap. On other projects we pipe it directly to closed.\n    modalRef.onClose.pipe(first()).subscribe(() => {\n      modalRef.closed();\n\n      if (this.modalCount === 0) {\n        document.body.classList.remove(\"modal-open\");\n      }\n    });\n  }\n\n  protected createModalComponent(\n    config: ModalConfig\n  ): [ModalRef, ComponentRef<DynamicModalComponent>] {\n    const modalRef = new ModalRef();\n\n    const map = new WeakMap();\n    map.set(ModalConfig, config);\n    map.set(ModalRef, modalRef);\n\n    const componentFactory =\n      this.componentFactoryResolver.resolveComponentFactory(DynamicModalComponent);\n    const componentRef = componentFactory.create(new ModalInjector(this.injector, map));\n\n    return [modalRef, componentRef];\n  }\n}\n","import { Directive, OnInit } from \"@angular/core\";\n\nimport { CryptoService } from \"@bitwarden/common/abstractions/crypto.service\";\nimport { KeyConnectorService } from \"@bitwarden/common/abstractions/keyConnector.service\";\nimport { StateService } from \"@bitwarden/common/abstractions/state.service\";\nimport { Utils } from \"@bitwarden/common/misc/utils\";\n\nimport { ModalRef } from \"./modal/modal.ref\";\n\n@Directive()\nexport class SetPinComponent implements OnInit {\n  pin = \"\";\n  showPin = false;\n  masterPassOnRestart = true;\n  showMasterPassOnRestart = true;\n\n  constructor(\n    private modalRef: ModalRef,\n    private cryptoService: CryptoService,\n    private keyConnectorService: KeyConnectorService,\n    private stateService: StateService\n  ) {}\n\n  async ngOnInit() {\n    this.showMasterPassOnRestart = this.masterPassOnRestart =\n      !(await this.keyConnectorService.getUsesKeyConnector());\n  }\n\n  toggleVisibility() {\n    this.showPin = !this.showPin;\n  }\n\n  async submit() {\n    if (Utils.isNullOrWhitespace(this.pin)) {\n      this.modalRef.close(false);\n    }\n\n    const kdf = await this.stateService.getKdfType();\n    const kdfConfig = await this.stateService.getKdfConfig();\n    const email = await this.stateService.getEmail();\n    const pinKey = await this.cryptoService.makePinKey(this.pin, email, kdf, kdfConfig);\n    const key = await this.cryptoService.getKey();\n    const pinProtectedKey = await this.cryptoService.encrypt(key.key, pinKey);\n    if (this.masterPassOnRestart) {\n      const encPin = await this.cryptoService.encrypt(this.pin);\n      await this.stateService.setProtectedPin(encPin.encryptedString);\n      await this.stateService.setDecryptedPinProtected(pinProtectedKey);\n    } else {\n      await this.stateService.setEncryptedPinProtected(pinProtectedKey.encryptedString);\n    }\n\n    this.modalRef.close(true);\n  }\n}\n","<div class=\"modal fade\" role=\"dialog\" aria-modal=\"true\">\n  <div class=\"modal-dialog modal-dialog-scrollable\" role=\"document\">\n    <form class=\"modal-content\" #form (ngSubmit)=\"submit()\">\n      <div class=\"modal-body\">\n        <div>\n          {{ \"setYourPinCode\" | i18n }}\n        </div>\n        <div class=\"box\">\n          <div class=\"box-content\">\n            <div class=\"box-content-row box-content-row-flex no-hover no-bg\" appBoxRow>\n              <div class=\"row-main\">\n                <label for=\"pin\">{{ \"pin\" | i18n }}</label>\n                <input\n                  id=\"pin\"\n                  type=\"{{ showPin ? 'text' : 'password' }}\"\n                  name=\"Pin\"\n                  class=\"monospaced\"\n                  [(ngModel)]=\"pin\"\n                  required\n                  appInputVerbatim\n                />\n              </div>\n              <div class=\"action-buttons\">\n                <button\n                  type=\"button\"\n                  class=\"row-btn\"\n                  appStopClick\n                  appA11yTitle=\"{{ 'toggleVisibility' | i18n }}\"\n                  (click)=\"toggleVisibility()\"\n                  [attr.aria-pressed]=\"showPin\"\n                >\n                  <i\n                    class=\"bwi bwi-lg\"\n                    aria-hidden=\"true\"\n                    [ngClass]=\"{ 'bwi-eye': !showPin, 'bwi-eye-slash': showPin }\"\n                  ></i>\n                </button>\n              </div>\n            </div>\n          </div>\n        </div>\n        <div class=\"checkbox\" *ngIf=\"showMasterPassOnRestart\">\n          <label for=\"masterPasswordOnRestart\">\n            <input\n              type=\"checkbox\"\n              id=\"masterPasswordOnRestart\"\n              name=\"MasterPasswordOnRestart\"\n              [(ngModel)]=\"masterPassOnRestart\"\n            />\n            <span>{{ \"lockWithMasterPassOnRestart\" | i18n }}</span>\n          </label>\n        </div>\n      </div>\n      <div class=\"modal-footer\">\n        <button type=\"submit\" class=\"btn btn-primary btn-submit\">\n          <span>{{ \"ok\" | i18n }}</span>\n        </button>\n        <button type=\"button\" class=\"btn btn-outline-secondary\" data-dismiss=\"modal\">\n          {{ \"cancel\" | i18n }}\n        </button>\n      </div>\n    </form>\n  </div>\n</div>\n","import { Component } from \"@angular/core\";\n\nimport { SetPinComponent as BaseSetPinComponent } from \"@bitwarden/angular/components/set-pin.component\";\n\n@Component({\n  templateUrl: \"set-pin.component.html\",\n})\nexport class SetPinComponent extends BaseSetPinComponent {}\n","import { Observable } from \"rxjs\";\n\nimport { ServerConfig } from \"./server-config\";\n\nexport abstract class ConfigServiceAbstraction {\n  serverConfig$: Observable<ServerConfig | null>;\n}\n","<div class=\"modal fade\" role=\"dialog\" aria-modal=\"true\">\n  <div class=\"modal-dialog modal-dialog-centered modal-dialog-scrollable\" role=\"document\">\n    <div class=\"modal-content\">\n      <div class=\"modal-body\">\n        <p class=\"text-center\">\n          <i class=\"bwi bwi-shield bwi-3x\" aria-hidden=\"true\"></i>\n        </p>\n        <p class=\"text-center\">\n          <b>Bitwarden</b>\n        </p>\n        <p class=\"text-center\">&copy; Bitwarden Inc. 2015-{{ year }}</p>\n        <p class=\"text-center\">{{ \"version\" | i18n }}: {{ version }}</p>\n        <ng-container *ngIf=\"serverConfig$ | async as serverConfig\">\n          <p class=\"text-center\" *ngIf=\"isCloud\">\n            {{ \"serverVersion\" | i18n }}: {{ this.serverConfig?.version }}\n            <span *ngIf=\"!serverConfig.isValid()\">\n              ({{ \"lastSeenOn\" | i18n: (serverConfig.utcDate | date: \"mediumDate\") }})\n            </span>\n          </p>\n\n          <ng-container *ngIf=\"!isCloud\">\n            <ng-container *ngIf=\"serverConfig.server\">\n              <p class=\"text-center\">\n                {{ \"serverVersion\" | i18n }} <small>({{ \"thirdParty\" | i18n }})</small>:\n                {{ this.serverConfig?.version }}\n                <span *ngIf=\"!serverConfig.isValid()\">\n                  ({{ \"lastSeenOn\" | i18n: (serverConfig.utcDate | date: \"mediumDate\") }})\n                </span>\n              </p>\n              <div class=\"text-center\">\n                <small>{{ \"thirdPartyServerMessage\" | i18n: serverConfig.server?.name }}</small>\n              </div>\n            </ng-container>\n\n            <p class=\"text-center\" *ngIf=\"!serverConfig.server\">\n              {{ \"serverVersion\" | i18n }} <small>({{ \"selfHosted\" | i18n }})</small>:\n              {{ this.serverConfig?.version }}\n              <span *ngIf=\"!serverConfig.isValid()\">\n                ({{ \"lastSeenOn\" | i18n: (serverConfig.utcDate | date: \"mediumDate\") }})\n              </span>\n            </p>\n          </ng-container>\n        </ng-container>\n      </div>\n      <div class=\"modal-footer\">\n        <button type=\"button\" class=\"btn btn-outline-secondary\" data-dismiss=\"modal\">\n          {{ \"close\" | i18n }}\n        </button>\n      </div>\n    </div>\n  </div>\n</div>\n","import { Component } from \"@angular/core\";\nimport { Observable } from \"rxjs\";\n\nimport { ConfigServiceAbstraction } from \"@bitwarden/common/abstractions/config/config.service.abstraction\";\nimport { ServerConfig } from \"@bitwarden/common/abstractions/config/server-config\";\nimport { EnvironmentService } from \"@bitwarden/common/abstractions/environment.service\";\n\nimport { BrowserApi } from \"../../browser/browserApi\";\n\n@Component({\n  selector: \"app-about\",\n  templateUrl: \"about.component.html\",\n})\nexport class AboutComponent {\n  serverConfig$: Observable<ServerConfig>;\n\n  year = new Date().getFullYear();\n  version = BrowserApi.getApplicationVersion();\n  isCloud: boolean;\n\n  constructor(configService: ConfigServiceAbstraction, environmentService: EnvironmentService) {\n    this.serverConfig$ = configService.serverConfig$;\n    this.isCloud = environmentService.isCloud();\n  }\n}\n","import { Directive, Input, OnDestroy, OnInit } from \"@angular/core\";\nimport {\n  AbstractControl,\n  ControlValueAccessor,\n  FormBuilder,\n  ValidationErrors,\n  Validator,\n} from \"@angular/forms\";\nimport { combineLatestWith, Subject, takeUntil } from \"rxjs\";\n\nimport { I18nService } from \"@bitwarden/common/abstractions/i18n.service\";\nimport { PolicyService } from \"@bitwarden/common/abstractions/policy/policy.service.abstraction\";\nimport { PolicyType } from \"@bitwarden/common/enums/policyType\";\nimport { Policy } from \"@bitwarden/common/models/domain/policy\";\n\n@Directive()\nexport class VaultTimeoutInputComponent\n  implements ControlValueAccessor, Validator, OnInit, OnDestroy\n{\n  get showCustom() {\n    return this.form.get(\"vaultTimeout\").value === VaultTimeoutInputComponent.CUSTOM_VALUE;\n  }\n\n  get exceedsMinimumTimout(): boolean {\n    return (\n      !this.showCustom || this.customTimeInMinutes() > VaultTimeoutInputComponent.MIN_CUSTOM_MINUTES\n    );\n  }\n\n  static CUSTOM_VALUE = -100;\n  static MIN_CUSTOM_MINUTES = 0;\n\n  form = this.formBuilder.group({\n    vaultTimeout: [null],\n    custom: this.formBuilder.group({\n      hours: [null],\n      minutes: [null],\n    }),\n  });\n\n  @Input() vaultTimeouts: { name: string; value: number }[];\n  vaultTimeoutPolicy: Policy;\n  vaultTimeoutPolicyHours: number;\n  vaultTimeoutPolicyMinutes: number;\n\n  private onChange: (vaultTimeout: number) => void;\n  private validatorChange: () => void;\n  private destroy$ = new Subject<void>();\n\n  constructor(\n    private formBuilder: FormBuilder,\n    private policyService: PolicyService,\n    private i18nService: I18nService\n  ) {}\n\n  async ngOnInit() {\n    this.policyService\n      .policyAppliesToActiveUser$(PolicyType.MaximumVaultTimeout)\n      .pipe(combineLatestWith(this.policyService.policies$), takeUntil(this.destroy$))\n      .subscribe(([policyAppliesToActiveUser, policies]) => {\n        if (policyAppliesToActiveUser) {\n          const vaultTimeoutPolicy = policies.find(\n            (policy) => policy.type === PolicyType.MaximumVaultTimeout && policy.enabled\n          );\n\n          this.vaultTimeoutPolicy = vaultTimeoutPolicy;\n          this.applyVaultTimeoutPolicy();\n        }\n      });\n\n    // eslint-disable-next-line rxjs/no-async-subscribe\n    this.form.valueChanges.subscribe(async (value) => {\n      this.onChange(this.getVaultTimeout(value));\n    });\n\n    // Assign the previous value to the custom fields\n    this.form.get(\"vaultTimeout\").valueChanges.subscribe((value) => {\n      if (value !== VaultTimeoutInputComponent.CUSTOM_VALUE) {\n        return;\n      }\n\n      const current = Math.max(this.form.value.vaultTimeout, 0);\n      this.form.patchValue({\n        custom: {\n          hours: Math.floor(current / 60),\n          minutes: current % 60,\n        },\n      });\n    });\n  }\n\n  ngOnDestroy() {\n    this.destroy$.next();\n    this.destroy$.complete();\n  }\n\n  ngOnChanges() {\n    this.vaultTimeouts.push({\n      name: this.i18nService.t(\"custom\"),\n      value: VaultTimeoutInputComponent.CUSTOM_VALUE,\n    });\n  }\n\n  getVaultTimeout(value: any) {\n    if (value.vaultTimeout !== VaultTimeoutInputComponent.CUSTOM_VALUE) {\n      return value.vaultTimeout;\n    }\n\n    return value.custom.hours * 60 + value.custom.minutes;\n  }\n\n  writeValue(value: number): void {\n    if (value == null) {\n      return;\n    }\n\n    if (this.vaultTimeouts.every((p) => p.value !== value)) {\n      this.form.setValue({\n        vaultTimeout: VaultTimeoutInputComponent.CUSTOM_VALUE,\n        custom: {\n          hours: Math.floor(value / 60),\n          minutes: value % 60,\n        },\n      });\n      return;\n    }\n\n    this.form.patchValue({\n      vaultTimeout: value,\n    });\n  }\n\n  registerOnChange(onChange: any): void {\n    this.onChange = onChange;\n  }\n\n  registerOnTouched(onTouched: any): void {\n    // Empty\n  }\n\n  setDisabledState?(isDisabled: boolean): void {\n    // Empty\n  }\n\n  validate(control: AbstractControl): ValidationErrors {\n    if (this.vaultTimeoutPolicy && this.vaultTimeoutPolicy?.data?.minutes < control.value) {\n      return { policyError: true };\n    }\n\n    if (!this.exceedsMinimumTimout) {\n      return { minTimeoutError: true };\n    }\n\n    return null;\n  }\n\n  registerOnValidatorChange(fn: () => void): void {\n    this.validatorChange = fn;\n  }\n\n  private customTimeInMinutes() {\n    return this.form.value.custom.hours * 60 + this.form.value.custom.minutes;\n  }\n\n  private applyVaultTimeoutPolicy() {\n    this.vaultTimeoutPolicyHours = Math.floor(this.vaultTimeoutPolicy.data.minutes / 60);\n    this.vaultTimeoutPolicyMinutes = this.vaultTimeoutPolicy.data.minutes % 60;\n\n    this.vaultTimeouts = this.vaultTimeouts.filter(\n      (t) =>\n        t.value <= this.vaultTimeoutPolicy.data.minutes &&\n        (t.value > 0 || t.value === VaultTimeoutInputComponent.CUSTOM_VALUE) &&\n        t.value != null\n    );\n    this.validatorChange();\n  }\n}\n","<app-callout type=\"info\" *ngIf=\"vaultTimeoutPolicy\">\n  {{ \"vaultTimeoutPolicyInEffect\" | i18n: vaultTimeoutPolicyHours:vaultTimeoutPolicyMinutes }}\n</app-callout>\n\n<div [formGroup]=\"form\">\n  <div class=\"box-content-row last display-block\" appBoxRow>\n    <label for=\"vaultTimeout\">{{ \"vaultTimeout\" | i18n }}</label>\n    <select\n      id=\"vaultTimeout\"\n      name=\"VaultTimeout\"\n      formControlName=\"vaultTimeout\"\n      class=\"form-control\"\n    >\n      <option *ngFor=\"let o of vaultTimeouts\" [ngValue]=\"o.value\">{{ o.name }}</option>\n    </select>\n  </div>\n  <div class=\"box-content-row last\" *ngIf=\"showCustom\">\n    <div formGroupName=\"custom\" class=\"row\">\n      <div class=\"col\">\n        <div class=\"display-block\" appBoxRow>\n          <label for=\"customVaultTimeout\">{{ \"hours\" | i18n }}</label>\n          <input\n            id=\"hours\"\n            class=\"form-control\"\n            type=\"number\"\n            min=\"0\"\n            name=\"hours\"\n            formControlName=\"hours\"\n          />\n        </div>\n      </div>\n      <div class=\"col\">\n        <div class=\"display-block\" appBoxRow>\n          <label for=\"customVaultTimeout\">{{ \"minutes\" | i18n }}</label>\n          <input\n            id=\"minutes\"\n            class=\"form-control\"\n            type=\"number\"\n            min=\"0\"\n            max=\"59\"\n            name=\"minutes\"\n            formControlName=\"minutes\"\n          />\n        </div>\n      </div>\n    </div>\n  </div>\n</div>\n","import { Component } from \"@angular/core\";\nimport { NG_VALIDATORS, NG_VALUE_ACCESSOR } from \"@angular/forms\";\n\nimport { VaultTimeoutInputComponent as VaultTimeoutInputComponentBase } from \"@bitwarden/angular/components/settings/vault-timeout-input.component\";\n\n@Component({\n  selector: \"app-vault-timeout-input\",\n  templateUrl: \"vault-timeout-input.component.html\",\n  providers: [\n    {\n      provide: NG_VALUE_ACCESSOR,\n      multi: true,\n      useExisting: VaultTimeoutInputComponent,\n    },\n    {\n      provide: NG_VALIDATORS,\n      multi: true,\n      useExisting: VaultTimeoutInputComponent,\n    },\n  ],\n})\nexport class VaultTimeoutInputComponent extends VaultTimeoutInputComponentBase {}\n","<header>\n  <div class=\"left\">\n    <app-pop-out></app-pop-out>\n  </div>\n  <h1 class=\"center\">\n    <span class=\"title\">{{ \"settings\" | i18n }}</span>\n  </h1>\n  <div class=\"right\"></div>\n</header>\n<main tabindex=\"-1\">\n  <div class=\"box list\">\n    <h2 class=\"box-header\">{{ \"manage\" | i18n }}</h2>\n    <div class=\"box-content single-line\">\n      <button\n        type=\"button\"\n        class=\"box-content-row box-content-row-flex text-default\"\n        routerLink=\"/autofill\"\n      >\n        <div class=\"row-main\">{{ \"autofill\" | i18n }}</div>\n        <i class=\"bwi bwi-angle-right bwi-lg row-sub-icon\" aria-hidden=\"true\"></i>\n      </button>\n      <button\n        type=\"button\"\n        class=\"box-content-row box-content-row-flex text-default\"\n        routerLink=\"/folders\"\n      >\n        <div class=\"row-main\">{{ \"folders\" | i18n }}</div>\n        <i class=\"bwi bwi-angle-right bwi-lg row-sub-icon\" aria-hidden=\"true\"></i>\n      </button>\n      <button\n        type=\"button\"\n        class=\"box-content-row box-content-row-flex text-default\"\n        routerLink=\"/sync\"\n      >\n        <div class=\"row-main\">{{ \"sync\" | i18n }}</div>\n        <i class=\"bwi bwi-angle-right bwi-lg row-sub-icon\" aria-hidden=\"true\"></i>\n      </button>\n      <button\n        type=\"button\"\n        class=\"box-content-row box-content-row-flex text-default\"\n        routerLink=\"/excluded-domains\"\n      >\n        <div class=\"row-main\">{{ \"excludedDomains\" | i18n }}</div>\n        <i class=\"bwi bwi-angle-right bwi-lg row-sub-icon\" aria-hidden=\"true\"></i>\n      </button>\n    </div>\n  </div>\n  <div class=\"box list\">\n    <h2 class=\"box-header\">{{ \"security\" | i18n }}</h2>\n    <div class=\"box-content single-line\">\n      <app-vault-timeout-input\n        [vaultTimeouts]=\"vaultTimeouts\"\n        [formControl]=\"vaultTimeout\"\n        ngDefaultControl\n      >\n      </app-vault-timeout-input>\n      <div class=\"box-content-row display-block\" appBoxRow>\n        <label for=\"vaultTimeoutAction\">{{ \"vaultTimeoutAction\" | i18n }}</label>\n        <select\n          #vaultTimeoutActionSelect\n          id=\"vaultTimeoutAction\"\n          name=\"VaultTimeoutActions\"\n          [ngModel]=\"vaultTimeoutAction\"\n          (ngModelChange)=\"saveVaultTimeoutAction($event)\"\n        >\n          <option *ngFor=\"let o of vaultTimeoutActions\" [ngValue]=\"o.value\">{{ o.name }}</option>\n        </select>\n      </div>\n      <div class=\"box-content-row box-content-row-checkbox\" appBoxRow>\n        <label for=\"pin\">{{ \"unlockWithPin\" | i18n }}</label>\n        <input id=\"pin\" type=\"checkbox\" (change)=\"updatePin()\" [(ngModel)]=\"pin\" />\n      </div>\n      <div class=\"box-content-row box-content-row-checkbox\" appBoxRow *ngIf=\"supportsBiometric\">\n        <label for=\"biometric\">{{ \"unlockWithBiometrics\" | i18n }}</label>\n        <input\n          id=\"biometric\"\n          type=\"checkbox\"\n          (change)=\"updateBiometric()\"\n          [(ngModel)]=\"biometric\"\n        />\n      </div>\n      <div\n        class=\"box-content-row box-content-row-checkbox\"\n        appBoxRow\n        *ngIf=\"supportsBiometric && biometric\"\n      >\n        <label for=\"autoBiometricsPrompt\">{{ \"enableAutoBiometricsPrompt\" | i18n }}</label>\n        <input\n          id=\"autoBiometricsPrompt\"\n          type=\"checkbox\"\n          (change)=\"updateAutoBiometricsPrompt()\"\n          [disabled]=\"!biometric\"\n          [(ngModel)]=\"enableAutoBiometricsPrompt\"\n        />\n      </div>\n      <button\n        type=\"button\"\n        class=\"box-content-row box-content-row-flex text-default\"\n        appStopClick\n        (click)=\"lock()\"\n      >\n        <div class=\"row-main\">{{ \"lockNow\" | i18n }}</div>\n        <i class=\"bwi bwi-angle-right bwi-lg row-sub-icon\" aria-hidden=\"true\"></i>\n      </button>\n      <button\n        type=\"button\"\n        class=\"box-content-row box-content-row-flex text-default\"\n        appStopClick\n        (click)=\"twoStep()\"\n      >\n        <div class=\"row-main\">{{ \"twoStepLogin\" | i18n }}</div>\n        <i class=\"bwi bwi-angle-right bwi-lg row-sub-icon\" aria-hidden=\"true\"></i>\n      </button>\n    </div>\n  </div>\n  <div class=\"box list\">\n    <h2 class=\"box-header\">{{ \"account\" | i18n }}</h2>\n    <div class=\"box-content single-line\">\n      <button type=\"button\" class=\"box-content-row\" routerLink=\"/premium\">\n        <div class=\"row-main\">\n          <div class=\"icon text-primary\">\n            <i class=\"bwi bwi-fw bwi-lg bwi-star-f\" aria-hidden=\"true\"></i>\n          </div>\n          <span class=\"text text-primary\"\n            ><b>{{ \"premiumMembership\" | i18n }}</b></span\n          >\n        </div>\n        <span><i class=\"bwi bwi-angle-right bwi-lg row-sub-icon\" aria-hidden=\"true\"></i></span>\n      </button>\n      <button\n        type=\"button\"\n        class=\"box-content-row box-content-row-flex text-default\"\n        appStopClick\n        (click)=\"changePassword()\"\n        *ngIf=\"showChangeMasterPass\"\n      >\n        <div class=\"row-main\">{{ \"changeMasterPassword\" | i18n }}</div>\n        <i class=\"bwi bwi-angle-right bwi-lg row-sub-icon\" aria-hidden=\"true\"></i>\n      </button>\n      <button\n        type=\"button\"\n        class=\"box-content-row box-content-row-flex text-default\"\n        appStopClick\n        (click)=\"fingerprint()\"\n      >\n        <div class=\"row-main\">{{ \"fingerprintPhrase\" | i18n }}</div>\n        <i class=\"bwi bwi-angle-right bwi-lg row-sub-icon\" aria-hidden=\"true\"></i>\n      </button>\n      <button\n        type=\"button\"\n        class=\"box-content-row box-content-row-flex text-default\"\n        appStopClick\n        (click)=\"logOut()\"\n      >\n        <div class=\"row-main\">{{ \"logOut\" | i18n }}</div>\n        <i class=\"bwi bwi-angle-right bwi-lg row-sub-icon\" aria-hidden=\"true\"></i>\n      </button>\n    </div>\n  </div>\n  <div class=\"box list\">\n    <h2 class=\"box-header\">{{ \"tools\" | i18n }}</h2>\n    <div class=\"box-content single-line\">\n      <button\n        type=\"button\"\n        class=\"box-content-row box-content-row-flex text-default\"\n        appStopClick\n        (click)=\"import()\"\n      >\n        <div class=\"row-main\">{{ \"importItems\" | i18n }}</div>\n        <i class=\"bwi bwi-angle-right bwi-lg row-sub-icon\" aria-hidden=\"true\"></i>\n      </button>\n      <button\n        type=\"button\"\n        class=\"box-content-row box-content-row-flex text-default\"\n        appStopClick\n        (click)=\"export()\"\n      >\n        <div class=\"row-main\">{{ \"exportVault\" | i18n }}</div>\n        <i class=\"bwi bwi-angle-right bwi-lg row-sub-icon\" aria-hidden=\"true\"></i>\n      </button>\n      <button\n        type=\"button\"\n        class=\"box-content-row box-content-row-flex text-default\"\n        appStopClick\n        (click)=\"webVault()\"\n      >\n        <div class=\"row-main\">{{ \"bitWebVault\" | i18n }}</div>\n        <i class=\"bwi bwi-angle-right bwi-lg row-sub-icon\" aria-hidden=\"true\"></i>\n      </button>\n    </div>\n  </div>\n  <div class=\"box list\">\n    <h2 class=\"box-header\">{{ \"other\" | i18n }}</h2>\n    <div class=\"box-content single-line\">\n      <button\n        type=\"button\"\n        class=\"box-content-row box-content-row-flex text-default\"\n        routerLink=\"/options\"\n      >\n        <div class=\"row-main\">{{ \"options\" | i18n }}</div>\n        <i class=\"bwi bwi-angle-right bwi-lg row-sub-icon\" aria-hidden=\"true\"></i>\n      </button>\n      <button\n        type=\"button\"\n        class=\"box-content-row box-content-row-flex text-default\"\n        appStopClick\n        (click)=\"about()\"\n      >\n        <div class=\"row-main\">{{ \"about\" | i18n }}</div>\n        <i class=\"bwi bwi-angle-right bwi-lg row-sub-icon\" aria-hidden=\"true\"></i>\n      </button>\n      <button\n        type=\"button\"\n        class=\"box-content-row box-content-row-flex text-default\"\n        appStopClick\n        (click)=\"share()\"\n      >\n        <div class=\"row-main\">{{ \"learnOrg\" | i18n }}</div>\n        <i class=\"bwi bwi-angle-right bwi-lg row-sub-icon\" aria-hidden=\"true\"></i>\n      </button>\n      <button\n        type=\"button\"\n        class=\"box-content-row box-content-row-flex text-default\"\n        appStopClick\n        (click)=\"help()\"\n      >\n        <div class=\"row-main\">{{ \"helpFeedback\" | i18n }}</div>\n        <i class=\"bwi bwi-angle-right bwi-lg row-sub-icon\" aria-hidden=\"true\"></i>\n      </button>\n      <button\n        type=\"button\"\n        aria-describedby=\"rateExtensionHelp\"\n        class=\"box-content-row box-content-row-flex text-default\"\n        appStopClick\n        (click)=\"rate()\"\n      >\n        <div class=\"row-main\">{{ \"rateExtension\" | i18n }}</div>\n        <i class=\"bwi bwi-angle-right bwi-lg row-sub-icon\" aria-hidden=\"true\"></i>\n      </button>\n    </div>\n    <div id=\"rateExtensionHelp\" class=\"box-footer\">{{ \"rateExtensionDesc\" | i18n }}</div>\n  </div>\n</main>\n","import { Component, ElementRef, OnInit, ViewChild } from \"@angular/core\";\nimport { UntypedFormControl } from \"@angular/forms\";\nimport { Router } from \"@angular/router\";\nimport Swal from \"sweetalert2\";\n\nimport { ModalService } from \"@bitwarden/angular/services/modal.service\";\nimport { CryptoService } from \"@bitwarden/common/abstractions/crypto.service\";\nimport { EnvironmentService } from \"@bitwarden/common/abstractions/environment.service\";\nimport { I18nService } from \"@bitwarden/common/abstractions/i18n.service\";\nimport { KeyConnectorService } from \"@bitwarden/common/abstractions/keyConnector.service\";\nimport { MessagingService } from \"@bitwarden/common/abstractions/messaging.service\";\nimport { PlatformUtilsService } from \"@bitwarden/common/abstractions/platformUtils.service\";\nimport { StateService } from \"@bitwarden/common/abstractions/state.service\";\nimport { VaultTimeoutService } from \"@bitwarden/common/abstractions/vaultTimeout/vaultTimeout.service\";\nimport { VaultTimeoutSettingsService } from \"@bitwarden/common/abstractions/vaultTimeout/vaultTimeoutSettings.service\";\nimport { DeviceType } from \"@bitwarden/common/enums/deviceType\";\n\nimport { BrowserApi } from \"../../browser/browserApi\";\nimport { BiometricErrors, BiometricErrorTypes } from \"../../models/biometricErrors\";\nimport { SetPinComponent } from \"../components/set-pin.component\";\nimport { PopupUtilsService } from \"../services/popup-utils.service\";\n\nimport { AboutComponent } from \"./about.component\";\n\nconst RateUrls = {\n  [DeviceType.ChromeExtension]:\n    \"https://chrome.google.com/webstore/detail/bitwarden-free-password-m/nngceckbapebfimnlniiiahkandclblb/reviews\",\n  [DeviceType.FirefoxExtension]:\n    \"https://addons.mozilla.org/en-US/firefox/addon/bitwarden-password-manager/#reviews\",\n  [DeviceType.OperaExtension]:\n    \"https://addons.opera.com/en/extensions/details/bitwarden-free-password-manager/#feedback-container\",\n  [DeviceType.EdgeExtension]:\n    \"https://microsoftedge.microsoft.com/addons/detail/jbkfoedolllekgbhcbcoahefnbanhhlh\",\n  [DeviceType.VivaldiExtension]:\n    \"https://chrome.google.com/webstore/detail/bitwarden-free-password-m/nngceckbapebfimnlniiiahkandclblb/reviews\",\n  [DeviceType.SafariExtension]: \"https://apps.apple.com/app/bitwarden/id1352778147\",\n};\n\n@Component({\n  selector: \"app-settings\",\n  templateUrl: \"settings.component.html\",\n})\n// eslint-disable-next-line rxjs-angular/prefer-takeuntil\nexport class SettingsComponent implements OnInit {\n  @ViewChild(\"vaultTimeoutActionSelect\", { read: ElementRef, static: true })\n  vaultTimeoutActionSelectRef: ElementRef;\n  vaultTimeouts: any[];\n  vaultTimeoutActions: any[];\n  vaultTimeoutAction: string;\n  pin: boolean = null;\n  supportsBiometric: boolean;\n  biometric = false;\n  enableAutoBiometricsPrompt = true;\n  previousVaultTimeout: number = null;\n  showChangeMasterPass = true;\n\n  vaultTimeout: UntypedFormControl = new UntypedFormControl(null);\n\n  constructor(\n    private platformUtilsService: PlatformUtilsService,\n    private i18nService: I18nService,\n    private vaultTimeoutService: VaultTimeoutService,\n    private vaultTimeoutSettingsService: VaultTimeoutSettingsService,\n    public messagingService: MessagingService,\n    private router: Router,\n    private environmentService: EnvironmentService,\n    private cryptoService: CryptoService,\n    private stateService: StateService,\n    private popupUtilsService: PopupUtilsService,\n    private modalService: ModalService,\n    private keyConnectorService: KeyConnectorService\n  ) {}\n\n  async ngOnInit() {\n    const showOnLocked =\n      !this.platformUtilsService.isFirefox() && !this.platformUtilsService.isSafari();\n\n    this.vaultTimeouts = [\n      { name: this.i18nService.t(\"immediately\"), value: 0 },\n      { name: this.i18nService.t(\"oneMinute\"), value: 1 },\n      { name: this.i18nService.t(\"fiveMinutes\"), value: 5 },\n      { name: this.i18nService.t(\"fifteenMinutes\"), value: 15 },\n      { name: this.i18nService.t(\"thirtyMinutes\"), value: 30 },\n      { name: this.i18nService.t(\"oneHour\"), value: 60 },\n      { name: this.i18nService.t(\"fourHours\"), value: 240 },\n      // { name: i18nService.t('onIdle'), value: -4 },\n      // { name: i18nService.t('onSleep'), value: -3 },\n    ];\n\n    if (showOnLocked) {\n      this.vaultTimeouts.push({ name: this.i18nService.t(\"onLocked\"), value: -2 });\n    }\n\n    this.vaultTimeouts.push({ name: this.i18nService.t(\"onRestart\"), value: -1 });\n    this.vaultTimeouts.push({ name: this.i18nService.t(\"never\"), value: null });\n\n    this.vaultTimeoutActions = [\n      { name: this.i18nService.t(\"lock\"), value: \"lock\" },\n      { name: this.i18nService.t(\"logOut\"), value: \"logOut\" },\n    ];\n\n    let timeout = await this.vaultTimeoutSettingsService.getVaultTimeout();\n    if (timeout != null) {\n      if (timeout === -2 && !showOnLocked) {\n        timeout = -1;\n      }\n      this.vaultTimeout.setValue(timeout);\n    }\n    this.previousVaultTimeout = this.vaultTimeout.value;\n    // eslint-disable-next-line rxjs-angular/prefer-takeuntil, rxjs/no-async-subscribe\n    this.vaultTimeout.valueChanges.subscribe(async (value) => {\n      await this.saveVaultTimeout(value);\n    });\n\n    const action = await this.stateService.getVaultTimeoutAction();\n    this.vaultTimeoutAction = action == null ? \"lock\" : action;\n\n    const pinSet = await this.vaultTimeoutSettingsService.isPinLockSet();\n    this.pin = pinSet[0] || pinSet[1];\n\n    this.supportsBiometric = await this.platformUtilsService.supportsBiometric();\n    this.biometric = await this.vaultTimeoutSettingsService.isBiometricLockSet();\n    this.enableAutoBiometricsPrompt = !(await this.stateService.getDisableAutoBiometricsPrompt());\n    this.showChangeMasterPass = !(await this.keyConnectorService.getUsesKeyConnector());\n  }\n\n  async saveVaultTimeout(newValue: number) {\n    if (newValue == null) {\n      const confirmed = await this.platformUtilsService.showDialog(\n        this.i18nService.t(\"neverLockWarning\"),\n        null,\n        this.i18nService.t(\"yes\"),\n        this.i18nService.t(\"cancel\"),\n        \"warning\"\n      );\n      if (!confirmed) {\n        this.vaultTimeout.setValue(this.previousVaultTimeout);\n        return;\n      }\n    }\n\n    // The minTimeoutError does not apply to browser because it supports Immediately\n    // So only check for the policyError\n    if (this.vaultTimeout.hasError(\"policyError\")) {\n      this.platformUtilsService.showToast(\n        \"error\",\n        null,\n        this.i18nService.t(\"vaultTimeoutTooLarge\")\n      );\n      return;\n    }\n\n    this.previousVaultTimeout = this.vaultTimeout.value;\n\n    await this.vaultTimeoutSettingsService.setVaultTimeoutOptions(\n      this.vaultTimeout.value,\n      this.vaultTimeoutAction\n    );\n    if (this.previousVaultTimeout == null) {\n      this.messagingService.send(\"bgReseedStorage\");\n    }\n  }\n\n  async saveVaultTimeoutAction(newValue: string) {\n    if (newValue === \"logOut\") {\n      const confirmed = await this.platformUtilsService.showDialog(\n        this.i18nService.t(\"vaultTimeoutLogOutConfirmation\"),\n        this.i18nService.t(\"vaultTimeoutLogOutConfirmationTitle\"),\n        this.i18nService.t(\"yes\"),\n        this.i18nService.t(\"cancel\"),\n        \"warning\"\n      );\n      if (!confirmed) {\n        this.vaultTimeoutActions.forEach((option: any, i) => {\n          if (option.value === this.vaultTimeoutAction) {\n            this.vaultTimeoutActionSelectRef.nativeElement.value =\n              i + \": \" + this.vaultTimeoutAction;\n          }\n        });\n        return;\n      }\n    }\n\n    if (this.vaultTimeout.hasError(\"policyError\")) {\n      this.platformUtilsService.showToast(\n        \"error\",\n        null,\n        this.i18nService.t(\"vaultTimeoutTooLarge\")\n      );\n      return;\n    }\n\n    this.vaultTimeoutAction = newValue;\n    await this.vaultTimeoutSettingsService.setVaultTimeoutOptions(\n      this.vaultTimeout.value,\n      this.vaultTimeoutAction\n    );\n  }\n\n  async updatePin() {\n    if (this.pin) {\n      const ref = this.modalService.open(SetPinComponent, { allowMultipleModals: true });\n\n      if (ref == null) {\n        this.pin = false;\n        return;\n      }\n\n      this.pin = await ref.onClosedPromise();\n    } else {\n      await this.cryptoService.clearPinProtectedKey();\n      await this.vaultTimeoutSettingsService.clear();\n    }\n  }\n\n  async updateBiometric() {\n    if (this.biometric && this.supportsBiometric) {\n      let granted;\n      try {\n        granted = await BrowserApi.requestPermission({ permissions: [\"nativeMessaging\"] });\n      } catch (e) {\n        // eslint-disable-next-line\n        console.error(e);\n\n        if (this.platformUtilsService.isFirefox() && this.popupUtilsService.inSidebar(window)) {\n          await this.platformUtilsService.showDialog(\n            this.i18nService.t(\"nativeMessaginPermissionSidebarDesc\"),\n            this.i18nService.t(\"nativeMessaginPermissionSidebarTitle\"),\n            this.i18nService.t(\"ok\"),\n            null\n          );\n          this.biometric = false;\n          return;\n        }\n      }\n\n      if (!granted) {\n        await this.platformUtilsService.showDialog(\n          this.i18nService.t(\"nativeMessaginPermissionErrorDesc\"),\n          this.i18nService.t(\"nativeMessaginPermissionErrorTitle\"),\n          this.i18nService.t(\"ok\"),\n          null\n        );\n        this.biometric = false;\n        return;\n      }\n\n      const submitted = Swal.fire({\n        heightAuto: false,\n        buttonsStyling: false,\n        titleText: this.i18nService.t(\"awaitDesktop\"),\n        text: this.i18nService.t(\"awaitDesktopDesc\"),\n        icon: \"info\",\n        iconHtml: '<i class=\"swal-custom-icon bwi bwi-info-circle text-info\"></i>',\n        showCancelButton: true,\n        cancelButtonText: this.i18nService.t(\"cancel\"),\n        showConfirmButton: false,\n        allowOutsideClick: false,\n      });\n\n      await this.stateService.setBiometricAwaitingAcceptance(true);\n      await this.cryptoService.toggleKey();\n\n      await Promise.race([\n        submitted.then(async (result) => {\n          if (result.dismiss === Swal.DismissReason.cancel) {\n            this.biometric = false;\n            await this.stateService.setBiometricAwaitingAcceptance(null);\n          }\n        }),\n        this.platformUtilsService\n          .authenticateBiometric()\n          .then((result) => {\n            this.biometric = result;\n\n            Swal.close();\n            if (this.biometric === false) {\n              this.platformUtilsService.showToast(\n                \"error\",\n                this.i18nService.t(\"errorEnableBiometricTitle\"),\n                this.i18nService.t(\"errorEnableBiometricDesc\")\n              );\n            }\n          })\n          .catch((e) => {\n            // Handle connection errors\n            this.biometric = false;\n\n            const error = BiometricErrors[e as BiometricErrorTypes];\n\n            this.platformUtilsService.showDialog(\n              this.i18nService.t(error.description),\n              this.i18nService.t(error.title),\n              this.i18nService.t(\"ok\"),\n              null,\n              \"error\"\n            );\n          }),\n      ]);\n    } else {\n      await this.stateService.setBiometricUnlock(null);\n      await this.stateService.setBiometricFingerprintValidated(false);\n    }\n  }\n\n  async updateAutoBiometricsPrompt() {\n    await this.stateService.setDisableAutoBiometricsPrompt(!this.enableAutoBiometricsPrompt);\n  }\n\n  async lock() {\n    await this.vaultTimeoutService.lock();\n  }\n\n  async logOut() {\n    const confirmed = await this.platformUtilsService.showDialog(\n      this.i18nService.t(\"logOutConfirmation\"),\n      this.i18nService.t(\"logOut\"),\n      this.i18nService.t(\"yes\"),\n      this.i18nService.t(\"cancel\")\n    );\n    if (confirmed) {\n      this.messagingService.send(\"logout\");\n    }\n  }\n\n  async changePassword() {\n    const confirmed = await this.platformUtilsService.showDialog(\n      this.i18nService.t(\"changeMasterPasswordConfirmation\"),\n      this.i18nService.t(\"changeMasterPassword\"),\n      this.i18nService.t(\"yes\"),\n      this.i18nService.t(\"cancel\")\n    );\n    if (confirmed) {\n      BrowserApi.createNewTab(\n        \"https://bitwarden.com/help/master-password/#change-your-master-password\"\n      );\n    }\n  }\n\n  async twoStep() {\n    const confirmed = await this.platformUtilsService.showDialog(\n      this.i18nService.t(\"twoStepLoginConfirmation\"),\n      this.i18nService.t(\"twoStepLogin\"),\n      this.i18nService.t(\"yes\"),\n      this.i18nService.t(\"cancel\")\n    );\n    if (confirmed) {\n      BrowserApi.createNewTab(\"https://bitwarden.com/help/setup-two-step-login/\");\n    }\n  }\n\n  async share() {\n    const confirmed = await this.platformUtilsService.showDialog(\n      this.i18nService.t(\"learnOrgConfirmation\"),\n      this.i18nService.t(\"learnOrg\"),\n      this.i18nService.t(\"yes\"),\n      this.i18nService.t(\"cancel\")\n    );\n    if (confirmed) {\n      BrowserApi.createNewTab(\"https://bitwarden.com/help/about-organizations/\");\n    }\n  }\n\n  async webVault() {\n    const url = this.environmentService.getWebVaultUrl();\n    BrowserApi.createNewTab(url);\n  }\n\n  import() {\n    BrowserApi.createNewTab(\"https://bitwarden.com/help/import-data/\");\n  }\n\n  export() {\n    this.router.navigate([\"/export\"]);\n  }\n\n  help() {\n    BrowserApi.createNewTab(\"https://bitwarden.com/help/\");\n  }\n\n  about() {\n    this.modalService.open(AboutComponent);\n  }\n\n  async fingerprint() {\n    const fingerprint = await this.cryptoService.getFingerprint(\n      await this.stateService.getUserId()\n    );\n    const p = document.createElement(\"p\");\n    p.innerText = this.i18nService.t(\"yourAccountsFingerprint\") + \":\";\n    const p2 = document.createElement(\"p\");\n    p2.innerText = fingerprint.join(\"-\");\n    const div = document.createElement(\"div\");\n    div.appendChild(p);\n    div.appendChild(p2);\n\n    const result = await Swal.fire({\n      heightAuto: false,\n      buttonsStyling: false,\n      html: div,\n      showCancelButton: true,\n      cancelButtonText: this.i18nService.t(\"close\"),\n      showConfirmButton: true,\n      confirmButtonText: this.i18nService.t(\"learnMore\"),\n    });\n\n    if (result.value) {\n      this.platformUtilsService.launchUri(\"https://bitwarden.com/help/fingerprint-phrase/\");\n    }\n  }\n\n  rate() {\n    const deviceType = this.platformUtilsService.getDevice();\n    BrowserApi.createNewTab((RateUrls as any)[deviceType]);\n  }\n}\n","import { Component, OnInit } from \"@angular/core\";\n\nimport { I18nService } from \"@bitwarden/common/abstractions/i18n.service\";\nimport { PlatformUtilsService } from \"@bitwarden/common/abstractions/platformUtils.service\";\nimport { SyncService } from \"@bitwarden/common/vault/abstractions/sync/sync.service.abstraction\";\n\n@Component({\n  selector: \"app-sync\",\n  templateUrl: \"sync.component.html\",\n})\nexport class SyncComponent implements OnInit {\n  lastSync = \"--\";\n  syncPromise: Promise<any>;\n\n  constructor(\n    private syncService: SyncService,\n    private platformUtilsService: PlatformUtilsService,\n    private i18nService: I18nService\n  ) {}\n\n  async ngOnInit() {\n    await this.setLastSync();\n  }\n\n  async sync() {\n    this.syncPromise = this.syncService.fullSync(true);\n    const success = await this.syncPromise;\n    if (success) {\n      await this.setLastSync();\n      this.platformUtilsService.showToast(\"success\", null, this.i18nService.t(\"syncingComplete\"));\n    } else {\n      this.platformUtilsService.showToast(\"error\", null, this.i18nService.t(\"syncingFailed\"));\n    }\n  }\n\n  async setLastSync() {\n    const last = await this.syncService.getLastSync();\n    if (last != null) {\n      this.lastSync = last.toLocaleDateString() + \" \" + last.toLocaleTimeString();\n    } else {\n      this.lastSync = this.i18nService.t(\"never\");\n    }\n  }\n}\n","<div class=\"tab-page\">\n  <router-outlet></router-outlet>\n  <nav class=\"tabs\">\n    <ul>\n      <li routerLinkActive=\"active\" #rlaCurrentTab=\"routerLinkActive\" *ngIf=\"showCurrentTab\">\n        <button\n          type=\"button\"\n          routerLink=\"current\"\n          appA11yTitle=\"{{ 'currentTab' | i18n }}\"\n          [attr.aria-pressed]=\"rlaCurrentTab.isActive\"\n        >\n          <i class=\"bwi bwi-folder-closed-f bwi-2x\" aria-hidden=\"true\"></i>{{ \"tab\" | i18n }}\n        </button>\n      </li>\n      <li routerLinkActive=\"active\" #rlaMyVault=\"routerLinkActive\">\n        <button\n          type=\"button\"\n          routerLink=\"vault\"\n          appA11yTitle=\"{{ 'myVault' | i18n }}\"\n          [attr.aria-pressed]=\"rlaMyVault.isActive\"\n        >\n          <i class=\"bwi bwi-lock-f bwi-2x\" aria-hidden=\"true\"></i>{{ \"vault\" | i18n }}\n        </button>\n      </li>\n      <li routerLinkActive=\"active\" #rlaSend=\"routerLinkActive\">\n        <button\n          type=\"button\"\n          routerLink=\"send\"\n          appA11yTitle=\"{{ 'send' | i18n }}\"\n          [attr.aria-pressed]=\"rlaSend.isActive\"\n        >\n          <i class=\"bwi bwi-send-f bwi-2x\" aria-hidden=\"true\"></i>{{ \"send\" | i18n }}\n        </button>\n      </li>\n      <li routerLinkActive=\"active\" #rlaGenerator=\"routerLinkActive\">\n        <button\n          type=\"button\"\n          routerLink=\"generator\"\n          appA11yTitle=\"{{ 'passGen' | i18n }}\"\n          [attr.aria-pressed]=\"rlaGenerator.isActive\"\n        >\n          <i class=\"bwi bwi-generate-f bwi-2x\" aria-hidden=\"true\"></i>{{ \"generator\" | i18n }}\n        </button>\n      </li>\n      <li routerLinkActive=\"active\" #rlaSettings=\"routerLinkActive\">\n        <button\n          type=\"button\"\n          routerLink=\"settings\"\n          appA11yTitle=\"{{ 'settings' | i18n }}\"\n          [attr.aria-pressed]=\"rlaSettings.isActive\"\n        >\n          <i class=\"bwi bwi-cog-f bwi-2x\" aria-hidden=\"true\"></i>{{ \"settings\" | i18n }}\n        </button>\n      </li>\n    </ul>\n  </nav>\n</div>\n","<header>\n  <div class=\"left\">\n    <button type=\"button\" routerLink=\"/tabs/settings\">\n      <span class=\"header-icon\"><i class=\"bwi bwi-angle-left\" aria-hidden=\"true\"></i></span>\n      <span>{{ \"back\" | i18n }}</span>\n    </button>\n  </div>\n  <h1 class=\"center\">\n    <span class=\"title\">{{ \"sync\" | i18n }}</span>\n  </h1>\n  <div class=\"right\"></div>\n</header>\n<main tabindex=\"-1\">\n  <div class=\"content center-content\">\n    <button\n      type=\"button\"\n      class=\"btn block primary\"\n      aria-describedby=\"lastSyncHint\"\n      (click)=\"sync()\"\n      #syncBtn\n      [disabled]=\"$any(syncBtn).loading\"\n      [appApiAction]=\"syncPromise\"\n    >\n      <span [hidden]=\"$any(syncBtn).loading\">{{ \"syncVaultNow\" | i18n }}</span>\n      <i\n        class=\"bwi bwi-spinner bwi-lg bwi-spin\"\n        [hidden]=\"!$any(syncBtn).loading\"\n        aria-hidden=\"true\"\n      ></i>\n    </button>\n    <p id=\"lastSyncHint\" class=\"text-center text-muted small\">\n      {{ \"lastSync\" | i18n }} {{ lastSync }}\n    </p>\n  </div>\n</main>\n","import { Component, OnInit } from \"@angular/core\";\n\nimport { PopupUtilsService } from \"./services/popup-utils.service\";\n\n@Component({\n  selector: \"app-tabs\",\n  templateUrl: \"tabs.component.html\",\n})\nexport class TabsComponent implements OnInit {\n  showCurrentTab = true;\n\n  constructor(private popupUtilsService: PopupUtilsService) {}\n\n  ngOnInit() {\n    this.showCurrentTab = !this.popupUtilsService.inPopout(window);\n  }\n}\n","import { Directive, EventEmitter, Input, OnInit, Output } from \"@angular/core\";\n\nimport { CollectionService } from \"@bitwarden/common/abstractions/collection.service\";\nimport { I18nService } from \"@bitwarden/common/abstractions/i18n.service\";\nimport { LogService } from \"@bitwarden/common/abstractions/log.service\";\nimport { PlatformUtilsService } from \"@bitwarden/common/abstractions/platformUtils.service\";\nimport { CollectionView } from \"@bitwarden/common/models/view/collection.view\";\nimport { CipherService } from \"@bitwarden/common/vault/abstractions/cipher.service\";\nimport { Cipher } from \"@bitwarden/common/vault/models/domain/cipher\";\nimport { CipherView } from \"@bitwarden/common/vault/models/view/cipher.view\";\n\n@Directive()\nexport class CollectionsComponent implements OnInit {\n  @Input() cipherId: string;\n  @Input() allowSelectNone = false;\n  @Output() onSavedCollections = new EventEmitter();\n\n  formPromise: Promise<any>;\n  cipher: CipherView;\n  collectionIds: string[];\n  collections: CollectionView[] = [];\n\n  protected cipherDomain: Cipher;\n\n  constructor(\n    protected collectionService: CollectionService,\n    protected platformUtilsService: PlatformUtilsService,\n    protected i18nService: I18nService,\n    protected cipherService: CipherService,\n    private logService: LogService\n  ) {}\n\n  async ngOnInit() {\n    await this.load();\n  }\n\n  async load() {\n    this.cipherDomain = await this.loadCipher();\n    this.collectionIds = this.loadCipherCollections();\n    this.cipher = await this.cipherDomain.decrypt();\n    this.collections = await this.loadCollections();\n\n    this.collections.forEach((c) => ((c as any).checked = false));\n    if (this.collectionIds != null) {\n      this.collections.forEach((c) => {\n        (c as any).checked = this.collectionIds != null && this.collectionIds.indexOf(c.id) > -1;\n      });\n    }\n  }\n\n  async submit() {\n    const selectedCollectionIds = this.collections\n      .filter((c) => !!(c as any).checked)\n      .map((c) => c.id);\n    if (!this.allowSelectNone && selectedCollectionIds.length === 0) {\n      this.platformUtilsService.showToast(\n        \"error\",\n        this.i18nService.t(\"errorOccurred\"),\n        this.i18nService.t(\"selectOneCollection\")\n      );\n      return;\n    }\n    this.cipherDomain.collectionIds = selectedCollectionIds;\n    try {\n      this.formPromise = this.saveCollections();\n      await this.formPromise;\n      this.onSavedCollections.emit();\n      this.platformUtilsService.showToast(\"success\", null, this.i18nService.t(\"editedItem\"));\n    } catch (e) {\n      this.logService.error(e);\n    }\n  }\n\n  protected loadCipher() {\n    return this.cipherService.get(this.cipherId);\n  }\n\n  protected loadCipherCollections() {\n    return this.cipherDomain.collectionIds;\n  }\n\n  protected async loadCollections() {\n    const allCollections = await this.collectionService.getAllDecrypted();\n    return allCollections.filter(\n      (c) => !c.readOnly && c.organizationId === this.cipher.organizationId\n    );\n  }\n\n  protected saveCollections() {\n    return this.cipherService.saveCollectionsWithServer(this.cipherDomain);\n  }\n}\n","<form #form (ngSubmit)=\"submit()\" [appApiAction]=\"formPromise\">\n  <header>\n    <div class=\"left\">\n      <button type=\"button\" (click)=\"back()\">\n        <span class=\"header-icon\"><i class=\"bwi bwi-angle-left\" aria-hidden=\"true\"></i></span>\n        <span>{{ \"back\" | i18n }}</span>\n      </button>\n    </div>\n    <h1 class=\"center\">\n      <span class=\"title\">{{ \"collections\" | i18n }}</span>\n    </h1>\n    <div class=\"right\">\n      <button type=\"submit\" [disabled]=\"form.loading\">\n        <span [hidden]=\"form.loading\">{{ \"save\" | i18n }}</span>\n        <i class=\"bwi bwi-spinner bwi-lg bwi-spin\" [hidden]=\"!form.loading\" aria-hidden=\"true\"></i>\n      </button>\n    </div>\n  </header>\n  <main tabindex=\"-1\">\n    <div class=\"box\">\n      <div class=\"box-content\" *ngIf=\"!collections || !collections.length\">\n        <div class=\"box-content-row padded no-hover\">\n          {{ \"noCollectionsInList\" | i18n }}\n        </div>\n      </div>\n      <div class=\"box-content\" *ngIf=\"collections && collections.length\">\n        <div\n          class=\"box-content-row box-content-row-checkbox\"\n          *ngFor=\"let c of collections; let i = index\"\n          appBoxRow\n        >\n          <label for=\"collection_{{ i }}\">{{ c.name }}</label>\n          <input\n            id=\"collection_{{ i }}\"\n            type=\"checkbox\"\n            [(ngModel)]=\"$any(c).checked\"\n            name=\"Collection[{{ i }}].Checked\"\n          />\n        </div>\n      </div>\n    </div>\n  </main>\n</form>\n","import { Location } from \"@angular/common\";\nimport { Component } from \"@angular/core\";\nimport { ActivatedRoute } from \"@angular/router\";\nimport { first } from \"rxjs/operators\";\n\nimport { CollectionsComponent as BaseCollectionsComponent } from \"@bitwarden/angular/components/collections.component\";\nimport { CollectionService } from \"@bitwarden/common/abstractions/collection.service\";\nimport { I18nService } from \"@bitwarden/common/abstractions/i18n.service\";\nimport { LogService } from \"@bitwarden/common/abstractions/log.service\";\nimport { PlatformUtilsService } from \"@bitwarden/common/abstractions/platformUtils.service\";\nimport { CipherService } from \"@bitwarden/common/vault/abstractions/cipher.service\";\n\n@Component({\n  selector: \"app-vault-collections\",\n  templateUrl: \"collections.component.html\",\n})\n// eslint-disable-next-line rxjs-angular/prefer-takeuntil\nexport class CollectionsComponent extends BaseCollectionsComponent {\n  constructor(\n    collectionService: CollectionService,\n    platformUtilsService: PlatformUtilsService,\n    i18nService: I18nService,\n    cipherService: CipherService,\n    private route: ActivatedRoute,\n    private location: Location,\n    logService: LogService\n  ) {\n    super(collectionService, platformUtilsService, i18nService, cipherService, logService);\n  }\n\n  async ngOnInit() {\n    // eslint-disable-next-line rxjs-angular/prefer-takeuntil\n    this.onSavedCollections.subscribe(() => {\n      this.back();\n    });\n    // eslint-disable-next-line rxjs-angular/prefer-takeuntil, rxjs/no-async-subscribe\n    this.route.queryParams.pipe(first()).subscribe(async (params) => {\n      this.cipherId = params.cipherId;\n      await this.load();\n    });\n  }\n\n  back() {\n    this.location.back();\n  }\n}\n","import { Injectable, NgModule } from \"@angular/core\";\nimport { ActivatedRouteSnapshot, RouteReuseStrategy, RouterModule, Routes } from \"@angular/router\";\n\nimport { AuthGuard } from \"@bitwarden/angular/guards/auth.guard\";\nimport { LockGuard } from \"@bitwarden/angular/guards/lock.guard\";\nimport { UnauthGuard } from \"@bitwarden/angular/guards/unauth.guard\";\n\nimport { AddEditComponent } from \"../vault/popup/components/vault/add-edit.component\";\nimport { AttachmentsComponent } from \"../vault/popup/components/vault/attachments.component\";\nimport { CurrentTabComponent } from \"../vault/popup/components/vault/current-tab.component\";\nimport { PasswordHistoryComponent } from \"../vault/popup/components/vault/password-history.component\";\nimport { ShareComponent } from \"../vault/popup/components/vault/share.component\";\nimport { VaultFilterComponent } from \"../vault/popup/components/vault/vault-filter.component\";\nimport { VaultItemsComponent } from \"../vault/popup/components/vault/vault-items.component\";\nimport { ViewComponent } from \"../vault/popup/components/vault/view.component\";\n\nimport { EnvironmentComponent } from \"./accounts/environment.component\";\nimport { HintComponent } from \"./accounts/hint.component\";\nimport { HomeComponent } from \"./accounts/home.component\";\nimport { LockComponent } from \"./accounts/lock.component\";\nimport { LoginWithDeviceComponent } from \"./accounts/login-with-device.component\";\nimport { LoginComponent } from \"./accounts/login.component\";\nimport { RegisterComponent } from \"./accounts/register.component\";\nimport { RemovePasswordComponent } from \"./accounts/remove-password.component\";\nimport { SetPasswordComponent } from \"./accounts/set-password.component\";\nimport { SsoComponent } from \"./accounts/sso.component\";\nimport { TwoFactorOptionsComponent } from \"./accounts/two-factor-options.component\";\nimport { TwoFactorComponent } from \"./accounts/two-factor.component\";\nimport { UpdateTempPasswordComponent } from \"./accounts/update-temp-password.component\";\nimport { GeneratorComponent } from \"./generator/generator.component\";\nimport { PasswordGeneratorHistoryComponent } from \"./generator/password-generator-history.component\";\nimport { SendAddEditComponent } from \"./send/send-add-edit.component\";\nimport { SendGroupingsComponent } from \"./send/send-groupings.component\";\nimport { SendTypeComponent } from \"./send/send-type.component\";\nimport { DebounceNavigationService } from \"./services/debounceNavigationService\";\nimport { AutofillComponent } from \"./settings/autofill.component\";\nimport { ExcludedDomainsComponent } from \"./settings/excluded-domains.component\";\nimport { ExportComponent } from \"./settings/export.component\";\nimport { FolderAddEditComponent } from \"./settings/folder-add-edit.component\";\nimport { FoldersComponent } from \"./settings/folders.component\";\nimport { OptionsComponent } from \"./settings/options.component\";\nimport { PremiumComponent } from \"./settings/premium.component\";\nimport { SettingsComponent } from \"./settings/settings.component\";\nimport { SyncComponent } from \"./settings/sync.component\";\nimport { TabsComponent } from \"./tabs.component\";\nimport { CollectionsComponent } from \"./vault/collections.component\";\n\nconst routes: Routes = [\n  {\n    path: \"\",\n    redirectTo: \"home\",\n    pathMatch: \"full\",\n  },\n  {\n    path: \"vault\",\n    redirectTo: \"/tabs/vault\",\n    pathMatch: \"full\",\n  },\n  {\n    path: \"home\",\n    component: HomeComponent,\n    canActivate: [UnauthGuard],\n    data: { state: \"home\" },\n  },\n  {\n    path: \"login\",\n    component: LoginComponent,\n    canActivate: [UnauthGuard],\n    data: { state: \"login\" },\n  },\n  {\n    path: \"login-with-device\",\n    component: LoginWithDeviceComponent,\n    canActivate: [UnauthGuard],\n    data: { state: \"login-with-device\" },\n  },\n  {\n    path: \"lock\",\n    component: LockComponent,\n    canActivate: [LockGuard],\n    data: { state: \"lock\" },\n  },\n  {\n    path: \"2fa\",\n    component: TwoFactorComponent,\n    canActivate: [UnauthGuard],\n    data: { state: \"2fa\" },\n  },\n  {\n    path: \"2fa-options\",\n    component: TwoFactorOptionsComponent,\n    canActivate: [UnauthGuard],\n    data: { state: \"2fa-options\" },\n  },\n  {\n    path: \"sso\",\n    component: SsoComponent,\n    canActivate: [UnauthGuard],\n    data: { state: \"sso\" },\n  },\n  {\n    path: \"set-password\",\n    component: SetPasswordComponent,\n    data: { state: \"set-password\" },\n  },\n  {\n    path: \"remove-password\",\n    component: RemovePasswordComponent,\n    canActivate: [AuthGuard],\n    data: { state: \"remove-password\" },\n  },\n  {\n    path: \"register\",\n    component: RegisterComponent,\n    canActivate: [UnauthGuard],\n    data: { state: \"register\" },\n  },\n  {\n    path: \"hint\",\n    component: HintComponent,\n    canActivate: [UnauthGuard],\n    data: { state: \"hint\" },\n  },\n  {\n    path: \"environment\",\n    component: EnvironmentComponent,\n    canActivate: [UnauthGuard],\n    data: { state: \"environment\" },\n  },\n  {\n    path: \"ciphers\",\n    component: VaultItemsComponent,\n    canActivate: [AuthGuard],\n    data: { state: \"ciphers\" },\n  },\n  {\n    path: \"view-cipher\",\n    component: ViewComponent,\n    canActivate: [AuthGuard],\n    data: { state: \"view-cipher\" },\n  },\n  {\n    path: \"cipher-password-history\",\n    component: PasswordHistoryComponent,\n    canActivate: [AuthGuard],\n    data: { state: \"cipher-password-history\" },\n  },\n  {\n    path: \"add-cipher\",\n    component: AddEditComponent,\n    canActivate: [AuthGuard, DebounceNavigationService],\n    data: { state: \"add-cipher\" },\n    runGuardsAndResolvers: \"always\",\n  },\n  {\n    path: \"edit-cipher\",\n    component: AddEditComponent,\n    canActivate: [AuthGuard, DebounceNavigationService],\n    data: { state: \"edit-cipher\" },\n    runGuardsAndResolvers: \"always\",\n  },\n  {\n    path: \"share-cipher\",\n    component: ShareComponent,\n    canActivate: [AuthGuard],\n    data: { state: \"share-cipher\" },\n  },\n  {\n    path: \"collections\",\n    component: CollectionsComponent,\n    canActivate: [AuthGuard],\n    data: { state: \"collections\" },\n  },\n  {\n    path: \"attachments\",\n    component: AttachmentsComponent,\n    canActivate: [AuthGuard],\n    data: { state: \"attachments\" },\n  },\n  {\n    path: \"generator\",\n    component: GeneratorComponent,\n    canActivate: [AuthGuard],\n    data: { state: \"generator\" },\n  },\n  {\n    path: \"generator-history\",\n    component: PasswordGeneratorHistoryComponent,\n    canActivate: [AuthGuard],\n    data: { state: \"generator-history\" },\n  },\n  {\n    path: \"export\",\n    component: ExportComponent,\n    canActivate: [AuthGuard],\n    data: { state: \"export\" },\n  },\n  {\n    path: \"autofill\",\n    component: AutofillComponent,\n    canActivate: [AuthGuard],\n    data: { state: \"autofill\" },\n  },\n  {\n    path: \"folders\",\n    component: FoldersComponent,\n    canActivate: [AuthGuard],\n    data: { state: \"folders\" },\n  },\n  {\n    path: \"add-folder\",\n    component: FolderAddEditComponent,\n    canActivate: [AuthGuard],\n    data: { state: \"add-folder\" },\n  },\n  {\n    path: \"edit-folder\",\n    component: FolderAddEditComponent,\n    canActivate: [AuthGuard],\n    data: { state: \"edit-folder\" },\n  },\n  {\n    path: \"sync\",\n    component: SyncComponent,\n    canActivate: [AuthGuard],\n    data: { state: \"sync\" },\n  },\n  {\n    path: \"excluded-domains\",\n    component: ExcludedDomainsComponent,\n    canActivate: [AuthGuard],\n    data: { state: \"excluded-domains\" },\n  },\n  {\n    path: \"premium\",\n    component: PremiumComponent,\n    canActivate: [AuthGuard],\n    data: { state: \"premium\" },\n  },\n  {\n    path: \"options\",\n    component: OptionsComponent,\n    canActivate: [AuthGuard],\n    data: { state: \"options\" },\n  },\n  {\n    path: \"clone-cipher\",\n    component: AddEditComponent,\n    canActivate: [AuthGuard],\n    data: { state: \"clone-cipher\" },\n  },\n  {\n    path: \"send-type\",\n    component: SendTypeComponent,\n    canActivate: [AuthGuard],\n    data: { state: \"send-type\" },\n  },\n  {\n    path: \"add-send\",\n    component: SendAddEditComponent,\n    canActivate: [AuthGuard],\n    data: { state: \"add-send\" },\n  },\n  {\n    path: \"edit-send\",\n    component: SendAddEditComponent,\n    canActivate: [AuthGuard],\n    data: { state: \"edit-send\" },\n  },\n  {\n    path: \"update-temp-password\",\n    component: UpdateTempPasswordComponent,\n    canActivate: [AuthGuard],\n    data: { state: \"update-temp-password\" },\n  },\n  {\n    path: \"tabs\",\n    component: TabsComponent,\n    data: { state: \"tabs\" },\n    children: [\n      {\n        path: \"\",\n        redirectTo: \"/tabs/vault\",\n        pathMatch: \"full\",\n      },\n      {\n        path: \"current\",\n        component: CurrentTabComponent,\n        canActivate: [AuthGuard],\n        data: { state: \"tabs_current\" },\n        runGuardsAndResolvers: \"always\",\n      },\n      {\n        path: \"vault\",\n        component: VaultFilterComponent,\n        canActivate: [AuthGuard],\n        data: { state: \"tabs_vault\" },\n      },\n      {\n        path: \"generator\",\n        component: GeneratorComponent,\n        canActivate: [AuthGuard],\n        data: { state: \"tabs_generator\" },\n      },\n      {\n        path: \"settings\",\n        component: SettingsComponent,\n        canActivate: [AuthGuard],\n        data: { state: \"tabs_settings\" },\n      },\n      {\n        path: \"send\",\n        component: SendGroupingsComponent,\n        canActivate: [AuthGuard],\n        data: { state: \"tabs_send\" },\n      },\n    ],\n  },\n];\n\n@Injectable()\nexport class NoRouteReuseStrategy implements RouteReuseStrategy {\n  shouldDetach(route: ActivatedRouteSnapshot) {\n    return false;\n  }\n\n  // eslint-disable-next-line\n  store(route: ActivatedRouteSnapshot, handle: {}) {\n    /* Nothing */\n  }\n\n  shouldAttach(route: ActivatedRouteSnapshot) {\n    return false;\n  }\n\n  retrieve(route: ActivatedRouteSnapshot): any {\n    return null;\n  }\n\n  shouldReuseRoute(future: ActivatedRouteSnapshot, curr: ActivatedRouteSnapshot) {\n    return false;\n  }\n}\n\n@NgModule({\n  imports: [\n    RouterModule.forRoot(routes, {\n      useHash: true,\n      onSameUrlNavigation: \"reload\",\n      /*enableTracing: true,*/\n    }),\n  ],\n  exports: [RouterModule],\n  providers: [{ provide: RouteReuseStrategy, useClass: NoRouteReuseStrategy }],\n})\nexport class AppRoutingModule {}\n","import { animate, group, query, style, transition, trigger } from \"@angular/animations\";\n\nconst queryShown = query(\n  \":enter, :leave\",\n  [style({ position: \"fixed\", width: \"100%\", height: \"100%\" })],\n  {\n    optional: true,\n  }\n);\n\n// ref: https://github.com/angular/angular/issues/15477\nconst queryChildRoute = query(\"router-outlet ~ *\", [style({}), animate(1, style({}))], {\n  optional: true,\n});\n\nconst speed = \"0.4s\";\n\nexport function queryTranslate(\n  direction: string,\n  axis: string,\n  from: number,\n  to: number,\n  zIndex = 1000\n) {\n  return query(\n    \":\" + direction,\n    [\n      style({\n        transform: \"translate\" + axis + \"(\" + from + \"%)\",\n        zIndex: zIndex,\n        boxShadow: \"0 3px 2px -2px gray\",\n      }),\n      animate(speed + \" ease-in-out\", style({ transform: \"translate\" + axis + \"(\" + to + \"%)\" })),\n    ],\n    { optional: true }\n  );\n}\n\nexport function queryTranslateX(direction: string, from: number, to: number, zIndex = 1000) {\n  return queryTranslate(direction, \"X\", from, to, zIndex);\n}\n\nexport function queryTranslateY(direction: string, from: number, to: number, zIndex = 1000) {\n  return queryTranslate(direction, \"Y\", from, to, zIndex);\n}\n\nconst inSlideLeft = [\n  queryShown,\n  group([queryTranslateX(\"enter\", 100, 0), queryTranslateX(\"leave\", 0, -100), queryChildRoute]),\n];\n\nconst outSlideRight = [\n  queryShown,\n  group([queryTranslateX(\"enter\", -100, 0), queryTranslateX(\"leave\", 0, 100)]),\n];\n\nconst inSlideUp = [\n  queryShown,\n  group([queryTranslateY(\"enter\", 100, 0, 1010), queryTranslateY(\"leave\", 0, 0), queryChildRoute]),\n];\n\nconst outSlideDown = [\n  queryShown,\n  group([queryTranslateY(\"enter\", 0, 0), queryTranslateY(\"leave\", 0, 100, 1010)]),\n];\n\nconst inSlideDown = [\n  queryShown,\n  group([queryTranslateY(\"enter\", -100, 0, 1010), queryTranslateY(\"leave\", 0, 0), queryChildRoute]),\n];\n\n// eslint-disable-next-line\nconst outSlideUp = [\n  queryShown,\n  group([queryTranslateY(\"enter\", 0, 0), queryTranslateY(\"leave\", 0, -100, 1010)]),\n];\n\nexport function tabsToCiphers(fromState: string, toState: string) {\n  if (fromState == null || toState === null || toState.indexOf(\"ciphers_\") === -1) {\n    return false;\n  }\n  return (\n    (fromState.indexOf(\"ciphers_\") === 0 && fromState.indexOf(\"ciphers_direction=b\") === -1) ||\n    fromState === \"tabs\"\n  );\n}\n\nexport function ciphersToTabs(fromState: string, toState: string) {\n  if (fromState == null || toState === null || fromState.indexOf(\"ciphers_\") === -1) {\n    return false;\n  }\n  return toState.indexOf(\"ciphers_direction=b\") === 0 || toState === \"tabs\";\n}\n\nexport function ciphersToView(fromState: string, toState: string) {\n  if (fromState == null || toState === null) {\n    return false;\n  }\n  return (\n    fromState.indexOf(\"ciphers_\") === 0 &&\n    (toState === \"view-cipher\" || toState === \"add-cipher\" || toState === \"clone-cipher\")\n  );\n}\n\nexport function viewToCiphers(fromState: string, toState: string) {\n  if (fromState == null || toState === null) {\n    return false;\n  }\n  return (\n    (fromState === \"view-cipher\" || fromState === \"add-cipher\" || fromState === \"clone-cipher\") &&\n    toState.indexOf(\"ciphers_\") === 0\n  );\n}\n\nexport const routerTransition = trigger(\"routerTransition\", [\n  transition(\"void => home\", inSlideLeft),\n  transition(\"void => tabs\", inSlideLeft),\n\n  transition(\"home => environment, home => login, home => register\", inSlideUp),\n\n  transition(\"login => home\", outSlideDown),\n  transition(\"login => hint\", inSlideUp),\n  transition(\"login => tabs, login => 2fa, login => login-with-device\", inSlideLeft),\n\n  transition(\"hint => login, register => home, environment => home\", outSlideDown),\n\n  transition(\"2fa => login\", outSlideRight),\n  transition(\"2fa => 2fa-options\", inSlideUp),\n  transition(\"2fa-options => 2fa\", outSlideDown),\n  transition(\"2fa => tabs\", inSlideLeft),\n\n  transition(\"login-with-device => tabs, login-with-device => 2fa\", inSlideLeft),\n  transition(\"login-with-device => login\", outSlideRight),\n\n  transition(tabsToCiphers, inSlideLeft),\n  transition(ciphersToTabs, outSlideRight),\n\n  transition(ciphersToView, inSlideUp),\n  transition(viewToCiphers, outSlideDown),\n\n  transition(\"tabs => view-cipher\", inSlideUp),\n  transition(\"view-cipher => tabs\", outSlideDown),\n\n  transition(\"view-cipher => edit-cipher, view-cipher => cipher-password-history\", inSlideUp),\n  transition(\n    \"edit-cipher => view-cipher, cipher-password-history => view-cipher, edit-cipher => tabs\",\n    outSlideDown\n  ),\n\n  transition(\"view-cipher => clone-cipher\", inSlideUp),\n  transition(\"clone-cipher => view-cipher, clone-cipher => tabs\", outSlideDown),\n\n  transition(\"view-cipher => share-cipher\", inSlideUp),\n  transition(\"share-cipher => view-cipher\", outSlideDown),\n\n  transition(\"tabs => add-cipher\", inSlideUp),\n  transition(\"add-cipher => tabs\", outSlideDown),\n\n  transition(\"generator => generator-history, tabs => generator-history\", inSlideLeft),\n  transition(\"generator-history => generator, generator-history => tabs\", outSlideRight),\n\n  transition(\n    \"add-cipher => generator, edit-cipher => generator, clone-cipher => generator\",\n    inSlideUp\n  ),\n  transition(\n    \"generator => add-cipher, generator => edit-cipher, generator => clone-cipher\",\n    outSlideDown\n  ),\n\n  transition(\"edit-cipher => attachments, edit-cipher => collections\", inSlideLeft),\n  transition(\"attachments => edit-cipher, collections => edit-cipher\", outSlideRight),\n\n  transition(\"clone-cipher => attachments, clone-cipher => collections\", inSlideLeft),\n  transition(\"attachments => clone-cipher, collections => clone-cipher\", outSlideRight),\n\n  transition(\"tabs => export\", inSlideLeft),\n  transition(\"export => tabs\", outSlideRight),\n\n  transition(\"tabs => folders\", inSlideLeft),\n  transition(\"folders => tabs\", outSlideRight),\n\n  transition(\"folders => edit-folder, folders => add-folder\", inSlideUp),\n  transition(\"edit-folder => folders, add-folder => folders\", outSlideDown),\n\n  transition(\"tabs => sync\", inSlideLeft),\n  transition(\"sync => tabs\", outSlideRight),\n\n  transition(\"tabs => excluded-domains\", inSlideLeft),\n  transition(\"excluded-domains => tabs\", outSlideRight),\n\n  transition(\"tabs => options\", inSlideLeft),\n  transition(\"options => tabs\", outSlideRight),\n\n  transition(\"tabs => premium\", inSlideLeft),\n  transition(\"premium => tabs\", outSlideRight),\n\n  transition(\"tabs => lock\", inSlideDown),\n\n  transition(\"tabs => send-type\", inSlideLeft),\n  transition(\"send-type => tabs\", outSlideRight),\n\n  transition(\"tabs => add-send, send-type => add-send\", inSlideUp),\n  transition(\"add-send => tabs, add-send => send-type\", outSlideDown),\n\n  transition(\"tabs => edit-send, send-type => edit-send\", inSlideUp),\n  transition(\"edit-send => tabs, edit-send => send-type\", outSlideDown),\n]);\n","import {\n  ChangeDetectorRef,\n  Component,\n  NgZone,\n  OnDestroy,\n  OnInit,\n  SecurityContext,\n} from \"@angular/core\";\nimport { DomSanitizer } from \"@angular/platform-browser\";\nimport { NavigationEnd, Router, RouterOutlet } from \"@angular/router\";\nimport { IndividualConfig, ToastrService } from \"ngx-toastr\";\nimport { Subject, takeUntil } from \"rxjs\";\nimport Swal, { SweetAlertIcon } from \"sweetalert2\";\n\nimport { AuthService } from \"@bitwarden/common/abstractions/auth.service\";\nimport { BroadcasterService } from \"@bitwarden/common/abstractions/broadcaster.service\";\nimport { I18nService } from \"@bitwarden/common/abstractions/i18n.service\";\nimport { MessagingService } from \"@bitwarden/common/abstractions/messaging.service\";\nimport { PlatformUtilsService } from \"@bitwarden/common/abstractions/platformUtils.service\";\n\nimport { BrowserApi } from \"../browser/browserApi\";\nimport { BrowserStateService } from \"../services/abstractions/browser-state.service\";\n\nimport { routerTransition } from \"./app-routing.animations\";\n\n@Component({\n  selector: \"app-root\",\n  styles: [],\n  animations: [routerTransition],\n  template: ` <div [@routerTransition]=\"getState(o)\">\n    <router-outlet #o=\"outlet\"></router-outlet>\n  </div>`,\n})\nexport class AppComponent implements OnInit, OnDestroy {\n  private lastActivity: number = null;\n  private activeUserId: string;\n\n  private destroy$ = new Subject<void>();\n\n  constructor(\n    private toastrService: ToastrService,\n    private broadcasterService: BroadcasterService,\n    private authService: AuthService,\n    private i18nService: I18nService,\n    private router: Router,\n    private stateService: BrowserStateService,\n    private messagingService: MessagingService,\n    private changeDetectorRef: ChangeDetectorRef,\n    private ngZone: NgZone,\n    private sanitizer: DomSanitizer,\n    private platformUtilsService: PlatformUtilsService\n  ) {}\n\n  async ngOnInit() {\n    // Component states must not persist between closing and reopening the popup, otherwise they become dead objects\n    // Clear them aggressively to make sure this doesn't occur\n    await this.clearComponentStates();\n\n    this.stateService.activeAccount$.pipe(takeUntil(this.destroy$)).subscribe((userId) => {\n      this.activeUserId = userId;\n    });\n\n    this.ngZone.runOutsideAngular(() => {\n      window.onmousedown = () => this.recordActivity();\n      window.ontouchstart = () => this.recordActivity();\n      window.onclick = () => this.recordActivity();\n      window.onscroll = () => this.recordActivity();\n      window.onkeypress = () => this.recordActivity();\n    });\n\n    (window as any).bitwardenPopupMainMessageListener = async (\n      msg: any,\n      sender: any,\n      sendResponse: any\n    ) => {\n      if (msg.command === \"doneLoggingOut\") {\n        this.ngZone.run(async () => {\n          this.authService.logOut(async () => {\n            if (msg.expired) {\n              this.showToast({\n                type: \"warning\",\n                title: this.i18nService.t(\"loggedOut\"),\n                text: this.i18nService.t(\"loginExpired\"),\n              });\n            }\n\n            if (this.activeUserId === null) {\n              this.router.navigate([\"home\"]);\n            }\n          });\n          this.changeDetectorRef.detectChanges();\n        });\n      } else if (msg.command === \"authBlocked\") {\n        this.ngZone.run(() => {\n          this.router.navigate([\"home\"]);\n        });\n      } else if (msg.command === \"locked\") {\n        if (msg.userId == null || msg.userId === (await this.stateService.getUserId())) {\n          this.ngZone.run(() => {\n            this.router.navigate([\"lock\"]);\n          });\n        }\n      } else if (msg.command === \"showDialog\") {\n        await this.showDialog(msg);\n      } else if (msg.command === \"showToast\") {\n        this.ngZone.run(() => {\n          this.showToast(msg);\n        });\n      } else if (msg.command === \"reloadProcess\") {\n        const forceWindowReload =\n          this.platformUtilsService.isSafari() ||\n          this.platformUtilsService.isFirefox() ||\n          this.platformUtilsService.isOpera();\n        // Wait to make sure background has reloaded first.\n        window.setTimeout(\n          () => BrowserApi.reloadExtension(forceWindowReload ? window : null),\n          2000\n        );\n      } else if (msg.command === \"reloadPopup\") {\n        this.ngZone.run(() => {\n          this.router.navigate([\"/\"]);\n        });\n      } else if (msg.command === \"convertAccountToKeyConnector\") {\n        this.ngZone.run(async () => {\n          this.router.navigate([\"/remove-password\"]);\n        });\n      } else {\n        msg.webExtSender = sender;\n        this.broadcasterService.send(msg);\n      }\n    };\n\n    BrowserApi.messageListener(\"app.component\", (window as any).bitwardenPopupMainMessageListener);\n\n    // eslint-disable-next-line rxjs/no-async-subscribe\n    this.router.events.pipe(takeUntil(this.destroy$)).subscribe(async (event) => {\n      if (event instanceof NavigationEnd) {\n        const url = event.urlAfterRedirects || event.url || \"\";\n        if (\n          url.startsWith(\"/tabs/\") &&\n          (window as any).previousPopupUrl != null &&\n          (window as any).previousPopupUrl.startsWith(\"/tabs/\")\n        ) {\n          await this.clearComponentStates();\n        }\n        if (url.startsWith(\"/tabs/\")) {\n          await this.stateService.setAddEditCipherInfo(null);\n        }\n        (window as any).previousPopupUrl = url;\n\n        // Clear route direction after animation (400ms)\n        if ((window as any).routeDirection != null) {\n          window.setTimeout(() => {\n            (window as any).routeDirection = null;\n          }, 400);\n        }\n      }\n    });\n  }\n\n  ngOnDestroy(): void {\n    this.destroy$.next();\n    this.destroy$.complete();\n  }\n\n  getState(outlet: RouterOutlet) {\n    if (outlet.activatedRouteData.state === \"ciphers\") {\n      const routeDirection =\n        (window as any).routeDirection != null ? (window as any).routeDirection : \"\";\n      return (\n        \"ciphers_direction=\" +\n        routeDirection +\n        \"_\" +\n        (outlet.activatedRoute.queryParams as any).value.folderId +\n        \"_\" +\n        (outlet.activatedRoute.queryParams as any).value.collectionId\n      );\n    } else {\n      return outlet.activatedRouteData.state;\n    }\n  }\n\n  private async recordActivity() {\n    if (this.activeUserId == null) {\n      return;\n    }\n\n    const now = new Date().getTime();\n    if (this.lastActivity != null && now - this.lastActivity < 250) {\n      return;\n    }\n\n    this.lastActivity = now;\n    await this.stateService.setLastActive(now, { userId: this.activeUserId });\n  }\n\n  private showToast(msg: any) {\n    let message = \"\";\n\n    const options: Partial<IndividualConfig> = {};\n\n    if (typeof msg.text === \"string\") {\n      message = msg.text;\n    } else if (msg.text.length === 1) {\n      message = msg.text[0];\n    } else {\n      msg.text.forEach(\n        (t: string) =>\n          (message += \"<p>\" + this.sanitizer.sanitize(SecurityContext.HTML, t) + \"</p>\")\n      );\n      options.enableHtml = true;\n    }\n    if (msg.options != null) {\n      if (msg.options.trustedHtml === true) {\n        options.enableHtml = true;\n      }\n      if (msg.options.timeout != null && msg.options.timeout > 0) {\n        options.timeOut = msg.options.timeout;\n      }\n    }\n\n    this.toastrService.show(message, msg.title, options, \"toast-\" + msg.type);\n  }\n\n  private async showDialog(msg: any) {\n    let iconClasses: string = null;\n    const type = msg.type;\n    if (type != null) {\n      // If you add custom types to this part, the type to SweetAlertIcon cast below needs to be changed.\n      switch (type) {\n        case \"success\":\n          iconClasses = \"bwi-check text-success\";\n          break;\n        case \"warning\":\n          iconClasses = \"bwi-exclamation-triangle text-warning\";\n          break;\n        case \"error\":\n          iconClasses = \"bwi-error text-danger\";\n          break;\n        case \"info\":\n          iconClasses = \"bwi-info-circle text-info\";\n          break;\n        default:\n          break;\n      }\n    }\n\n    const cancelText = msg.cancelText;\n    const confirmText = msg.confirmText;\n    const confirmed = await Swal.fire({\n      heightAuto: false,\n      buttonsStyling: false,\n      icon: type as SweetAlertIcon, // required to be any of the SweetAlertIcons to output the iconHtml.\n      iconHtml:\n        iconClasses != null ? `<i class=\"swal-custom-icon bwi ${iconClasses}\"></i>` : undefined,\n      text: msg.text,\n      html: msg.html,\n      titleText: msg.title,\n      showCancelButton: cancelText != null,\n      cancelButtonText: cancelText,\n      showConfirmButton: true,\n      confirmButtonText: confirmText == null ? this.i18nService.t(\"ok\") : confirmText,\n      timer: 300000,\n    });\n\n    this.messagingService.send(\"showDialogResolve\", {\n      dialogId: msg.dialogId,\n      confirmed: confirmed.value,\n    });\n  }\n\n  private async clearComponentStates() {\n    if (!(await this.stateService.getIsAuthenticated())) {\n      return;\n    }\n\n    await Promise.all([\n      this.stateService.setBrowserGroupingComponentState(null),\n      this.stateService.setBrowserVaultItemsComponentState(null),\n      this.stateService.setBrowserSendComponentState(null),\n      this.stateService.setBrowserSendTypeComponentState(null),\n    ]);\n  }\n}\n","import { InjectionToken } from \"@angular/core\";\n\nimport {\n  AbstractMemoryStorageService,\n  AbstractStorageService,\n} from \"@bitwarden/common/abstractions/storage.service\";\nimport { StateFactory } from \"@bitwarden/common/factories/stateFactory\";\n\nexport const WINDOW = new InjectionToken<Window>(\"WINDOW\");\nexport const MEMORY_STORAGE = new InjectionToken<AbstractMemoryStorageService>(\"MEMORY_STORAGE\");\nexport const SECURE_STORAGE = new InjectionToken<AbstractStorageService>(\"SECURE_STORAGE\");\nexport const STATE_FACTORY = new InjectionToken<StateFactory>(\"STATE_FACTORY\");\nexport const STATE_SERVICE_USE_CACHE = new InjectionToken<boolean>(\"STATE_SERVICE_USE_CACHE\");\nexport const LOGOUT_CALLBACK = new InjectionToken<(expired: boolean, userId?: string) => void>(\n  \"LOGOUT_CALLBACK\"\n);\nexport const LOCKED_CALLBACK = new InjectionToken<() => void>(\"LOCKED_CALLBACK\");\nexport const CLIENT_TYPE = new InjectionToken<boolean>(\"CLIENT_TYPE\");\nexport const LOCALES_DIRECTORY = new InjectionToken<string>(\"LOCALES_DIRECTORY\");\nexport const SYSTEM_LANGUAGE = new InjectionToken<string>(\"SYSTEM_LANGUAGE\");\nexport const LOG_MAC_FAILURES = new InjectionToken<string>(\"LOG_MAC_FAILURES\");\n","export abstract class AccountService {}\n\nexport abstract class InternalAccountService extends AccountService {\n  abstract delete(): void;\n}\n","export enum StateVersion {\n  One = 1, // Original flat key/value pair store\n  Two = 2, // Move to a typed State object\n  Three = 3, // Fix migration of users' premium status\n  Four = 4, // Fix 'Never Lock' option by removing stale data\n  Five = 5, // Migrate to new storage of encrypted organization keys\n  Six = 6, // Delete account.keys.legacyEtmKey property\n  Latest = Six,\n}\n","import { ServerConfigResponse } from \"../../models/response/server-config.response\";\n\nexport abstract class ConfigApiServiceAbstraction {\n  get: () => Promise<ServerConfigResponse>;\n}\n","import { IEncrypted } from \"../interfaces/IEncrypted\";\nimport { Decryptable } from \"../interfaces/decryptable.interface\";\nimport { InitializerMetadata } from \"../interfaces/initializer-metadata.interface\";\nimport { EncArrayBuffer } from \"../models/domain/enc-array-buffer\";\nimport { EncString } from \"../models/domain/enc-string\";\nimport { SymmetricCryptoKey } from \"../models/domain/symmetric-crypto-key\";\n\nexport abstract class EncryptService {\n  abstract encrypt(plainValue: string | ArrayBuffer, key: SymmetricCryptoKey): Promise<EncString>;\n  abstract encryptToBytes: (\n    plainValue: ArrayBuffer,\n    key?: SymmetricCryptoKey\n  ) => Promise<EncArrayBuffer>;\n  abstract decryptToUtf8: (encString: EncString, key: SymmetricCryptoKey) => Promise<string>;\n  abstract decryptToBytes: (encThing: IEncrypted, key: SymmetricCryptoKey) => Promise<ArrayBuffer>;\n  abstract resolveLegacyKey: (key: SymmetricCryptoKey, encThing: IEncrypted) => SymmetricCryptoKey;\n  abstract decryptItems: <T extends InitializerMetadata>(\n    items: Decryptable<T>[],\n    key: SymmetricCryptoKey\n  ) => Promise<T[]>;\n}\n","export abstract class EventUploadService {\n  uploadEvents: (userId?: string) => Promise<void>;\n}\n","import { EncArrayBuffer } from \"../models/domain/enc-array-buffer\";\nimport { EncString } from \"../models/domain/enc-string\";\nimport { SendFileUploadDataResponse } from \"../models/response/send-file-upload-data.response\";\nimport { AttachmentUploadDataResponse } from \"../vault/models/response/attachment-upload-data.response\";\n\nexport abstract class FileUploadService {\n  uploadSendFile: (\n    uploadData: SendFileUploadDataResponse,\n    fileName: EncString,\n    encryptedFileData: EncArrayBuffer\n  ) => Promise<any>;\n  uploadCipherAttachment: (\n    admin: boolean,\n    uploadData: AttachmentUploadDataResponse,\n    fileName: EncString,\n    encryptedFileData: EncArrayBuffer\n  ) => Promise<any>;\n}\n","export abstract class NotificationsService {\n  init: () => Promise<void>;\n  updateConnection: (sync?: boolean) => Promise<void>;\n  reconnectFromActivity: () => Promise<void>;\n  disconnectFromInactivity: () => Promise<void>;\n}\n","import { ProviderData } from \"../models/data/provider.data\";\nimport { Provider } from \"../models/domain/provider\";\n\nexport abstract class ProviderService {\n  get: (id: string) => Promise<Provider>;\n  getAll: () => Promise<Provider[]>;\n  save: (providers: { [id: string]: ProviderData }) => Promise<any>;\n}\n","import { Observable } from \"rxjs\";\n\nimport { AccountSettingsSettings } from \"../models/domain/account\";\n\nexport abstract class SettingsService {\n  settings$: Observable<AccountSettingsSettings>;\n\n  setEquivalentDomains: (equivalentDomains: string[][]) => Promise<any>;\n  clear: (userId?: string) => Promise<void>;\n}\n","export abstract class StateMigrationService {\n  needsMigration: () => Promise<boolean>;\n  migrate: () => Promise<void>;\n}\n","import { MemoryStorageOptions, StorageOptions } from \"../models/domain/storage-options\";\n\nexport abstract class AbstractStorageService {\n  abstract get<T>(key: string, options?: StorageOptions): Promise<T>;\n  abstract has(key: string, options?: StorageOptions): Promise<boolean>;\n  abstract save<T>(key: string, obj: T, options?: StorageOptions): Promise<void>;\n  abstract remove(key: string, options?: StorageOptions): Promise<void>;\n}\n\nexport abstract class AbstractMemoryStorageService extends AbstractStorageService {\n  // Used to identify the service in the session sync decorator framework\n  static readonly TYPE = \"MemoryStorageService\";\n  readonly type = AbstractMemoryStorageService.TYPE;\n\n  abstract get<T>(key: string, options?: MemoryStorageOptions<T>): Promise<T>;\n  abstract getBypassCache<T>(key: string, options?: MemoryStorageOptions<T>): Promise<T>;\n}\n","import { VerifyOTPRequest } from \"../../models/request/account/verify-otp.request\";\n\nexport abstract class UserVerificationApiServiceAbstraction {\n  postAccountVerifyOTP: (request: VerifyOTPRequest) => Promise<void>;\n  postAccountRequestOTP: () => Promise<void>;\n}\n","import { Account } from \"../models/domain/account\";\n\nexport class AccountFactory<T extends Account = Account> {\n  private accountConstructor: new (init: Partial<T>) => T;\n\n  constructor(accountConstructor: new (init: Partial<T>) => T) {\n    this.accountConstructor = accountConstructor;\n  }\n\n  create(args: Partial<T>) {\n    return new this.accountConstructor(args);\n  }\n}\n","import { GlobalState } from \"../models/domain/global-state\";\n\nexport class GlobalStateFactory<T extends GlobalState = GlobalState> {\n  private globalStateConstructor: new (init: Partial<T>) => T;\n\n  constructor(globalStateConstructor: new (init: Partial<T>) => T) {\n    this.globalStateConstructor = globalStateConstructor;\n  }\n\n  create(args?: Partial<T>) {\n    return new this.globalStateConstructor(args);\n  }\n}\n","import { Account } from \"../models/domain/account\";\nimport { GlobalState } from \"../models/domain/global-state\";\n\nimport { AccountFactory } from \"./accountFactory\";\nimport { GlobalStateFactory } from \"./globalStateFactory\";\n\nexport class StateFactory<\n  TGlobal extends GlobalState = GlobalState,\n  TAccount extends Account = Account\n> {\n  private globalStateFactory: GlobalStateFactory<TGlobal>;\n  private accountFactory: AccountFactory<TAccount>;\n\n  constructor(\n    globalStateConstructor: new (init: Partial<TGlobal>) => TGlobal,\n    accountConstructor: new (init: Partial<TAccount>) => TAccount\n  ) {\n    this.globalStateFactory = new GlobalStateFactory(globalStateConstructor);\n    this.accountFactory = new AccountFactory(accountConstructor);\n  }\n\n  createGlobal(args: Partial<TGlobal>): TGlobal {\n    return this.globalStateFactory.create(args);\n  }\n\n  createAccount(args: Partial<TAccount>): TAccount {\n    return this.accountFactory.create(args);\n  }\n}\n","import { Jsonify } from \"type-fest\";\n\nimport {\n  ServerConfigResponse,\n  ThirdPartyServerConfigResponse,\n  EnvironmentServerConfigResponse,\n} from \"../response/server-config.response\";\n\nexport class ServerConfigData {\n  version: string;\n  gitHash: string;\n  server?: ThirdPartyServerConfigData;\n  environment?: EnvironmentServerConfigData;\n  utcDate: string;\n\n  constructor(serverConfigResponse: Partial<ServerConfigResponse>) {\n    this.version = serverConfigResponse?.version;\n    this.gitHash = serverConfigResponse?.gitHash;\n    this.server = serverConfigResponse?.server\n      ? new ThirdPartyServerConfigData(serverConfigResponse.server)\n      : null;\n    this.utcDate = new Date().toISOString();\n    this.environment = serverConfigResponse?.environment\n      ? new EnvironmentServerConfigData(serverConfigResponse.environment)\n      : null;\n  }\n\n  static fromJSON(obj: Jsonify<ServerConfigData>): ServerConfigData {\n    return Object.assign(new ServerConfigData({}), obj, {\n      server: obj?.server ? ThirdPartyServerConfigData.fromJSON(obj.server) : null,\n      environment: obj?.environment ? EnvironmentServerConfigData.fromJSON(obj.environment) : null,\n    });\n  }\n}\n\nexport class ThirdPartyServerConfigData {\n  name: string;\n  url: string;\n\n  constructor(response: Partial<ThirdPartyServerConfigResponse>) {\n    this.name = response.name;\n    this.url = response.url;\n  }\n\n  static fromJSON(obj: Jsonify<ThirdPartyServerConfigData>): ThirdPartyServerConfigData {\n    return Object.assign(new ThirdPartyServerConfigData({}), obj);\n  }\n}\n\nexport class EnvironmentServerConfigData {\n  vault: string;\n  api: string;\n  identity: string;\n  notifications: string;\n  sso: string;\n\n  constructor(response: Partial<EnvironmentServerConfigResponse>) {\n    this.vault = response.vault;\n    this.api = response.api;\n    this.identity = response.identity;\n    this.notifications = response.notifications;\n    this.sso = response.sso;\n  }\n\n  static fromJSON(obj: Jsonify<EnvironmentServerConfigData>): EnvironmentServerConfigData {\n    return Object.assign(new EnvironmentServerConfigData({}), obj);\n  }\n}\n","import { Jsonify } from \"type-fest\";\n\nimport { AuthenticationStatus } from \"../../enums/authenticationStatus\";\nimport { KdfType } from \"../../enums/kdfType\";\nimport { UriMatchType } from \"../../enums/uriMatchType\";\nimport { Utils } from \"../../misc/utils\";\nimport { DeepJsonify } from \"../../types/deep-jsonify\";\nimport { CipherData } from \"../../vault/models/data/cipher.data\";\nimport { FolderData } from \"../../vault/models/data/folder.data\";\nimport { CipherView } from \"../../vault/models/view/cipher.view\";\nimport { CollectionData } from \"../data/collection.data\";\nimport { EncryptedOrganizationKeyData } from \"../data/encrypted-organization-key.data\";\nimport { EventData } from \"../data/event.data\";\nimport { OrganizationData } from \"../data/organization.data\";\nimport { PolicyData } from \"../data/policy.data\";\nimport { ProviderData } from \"../data/provider.data\";\nimport { SendData } from \"../data/send.data\";\nimport { ServerConfigData } from \"../data/server-config.data\";\nimport { CollectionView } from \"../view/collection.view\";\nimport { SendView } from \"../view/send.view\";\n\nimport { EncString } from \"./enc-string\";\nimport { EnvironmentUrls } from \"./environment-urls\";\nimport { GeneratedPasswordHistory } from \"./generated-password-history\";\nimport { Policy } from \"./policy\";\nimport { SymmetricCryptoKey } from \"./symmetric-crypto-key\";\n\nexport class EncryptionPair<TEncrypted, TDecrypted> {\n  encrypted?: TEncrypted;\n  decrypted?: TDecrypted;\n\n  toJSON() {\n    return {\n      encrypted: this.encrypted,\n      decrypted:\n        this.decrypted instanceof ArrayBuffer\n          ? Utils.fromBufferToByteString(this.decrypted)\n          : this.decrypted,\n    };\n  }\n\n  static fromJSON<TEncrypted, TDecrypted>(\n    obj: { encrypted?: Jsonify<TEncrypted>; decrypted?: string | Jsonify<TDecrypted> },\n    decryptedFromJson?: (decObj: Jsonify<TDecrypted> | string) => TDecrypted,\n    encryptedFromJson?: (encObj: Jsonify<TEncrypted>) => TEncrypted\n  ) {\n    if (obj == null) {\n      return null;\n    }\n\n    const pair = new EncryptionPair<TEncrypted, TDecrypted>();\n    if (obj?.encrypted != null) {\n      pair.encrypted = encryptedFromJson\n        ? encryptedFromJson(obj.encrypted)\n        : (obj.encrypted as TEncrypted);\n    }\n    if (obj?.decrypted != null) {\n      pair.decrypted = decryptedFromJson\n        ? decryptedFromJson(obj.decrypted)\n        : (obj.decrypted as TDecrypted);\n    }\n    return pair;\n  }\n}\n\nexport class DataEncryptionPair<TEncrypted, TDecrypted> {\n  encrypted?: { [id: string]: TEncrypted };\n  decrypted?: TDecrypted[];\n}\n\n// This is a temporary structure to handle migrated `DataEncryptionPair` to\n//  avoid needing a data migration at this stage. It should be replaced with\n//  proper data migrations when `DataEncryptionPair` is deprecated.\nexport class TemporaryDataEncryption<TEncrypted> {\n  encrypted?: { [id: string]: TEncrypted };\n}\n\nexport class AccountData {\n  ciphers?: DataEncryptionPair<CipherData, CipherView> = new DataEncryptionPair<\n    CipherData,\n    CipherView\n  >();\n  folders? = new TemporaryDataEncryption<FolderData>();\n  localData?: any;\n  sends?: DataEncryptionPair<SendData, SendView> = new DataEncryptionPair<SendData, SendView>();\n  collections?: DataEncryptionPair<CollectionData, CollectionView> = new DataEncryptionPair<\n    CollectionData,\n    CollectionView\n  >();\n  policies?: DataEncryptionPair<PolicyData, Policy> = new DataEncryptionPair<PolicyData, Policy>();\n  passwordGenerationHistory?: EncryptionPair<\n    GeneratedPasswordHistory[],\n    GeneratedPasswordHistory[]\n  > = new EncryptionPair<GeneratedPasswordHistory[], GeneratedPasswordHistory[]>();\n  addEditCipherInfo?: any;\n  eventCollection?: EventData[];\n  organizations?: { [id: string]: OrganizationData };\n  providers?: { [id: string]: ProviderData };\n}\n\nexport class AccountKeys {\n  cryptoMasterKey?: SymmetricCryptoKey;\n  cryptoMasterKeyAuto?: string;\n  cryptoMasterKeyB64?: string;\n  cryptoMasterKeyBiometric?: string;\n  cryptoSymmetricKey?: EncryptionPair<string, SymmetricCryptoKey> = new EncryptionPair<\n    string,\n    SymmetricCryptoKey\n  >();\n  organizationKeys?: EncryptionPair<\n    { [orgId: string]: EncryptedOrganizationKeyData },\n    Record<string, SymmetricCryptoKey>\n  > = new EncryptionPair<\n    { [orgId: string]: EncryptedOrganizationKeyData },\n    Record<string, SymmetricCryptoKey>\n  >();\n  providerKeys?: EncryptionPair<any, Record<string, SymmetricCryptoKey>> = new EncryptionPair<\n    any,\n    Record<string, SymmetricCryptoKey>\n  >();\n  privateKey?: EncryptionPair<string, ArrayBuffer> = new EncryptionPair<string, ArrayBuffer>();\n  publicKey?: ArrayBuffer;\n  apiKeyClientSecret?: string;\n\n  toJSON() {\n    return Utils.merge(this, {\n      publicKey: Utils.fromBufferToByteString(this.publicKey),\n    });\n  }\n\n  static fromJSON(obj: DeepJsonify<AccountKeys>): AccountKeys {\n    if (obj == null) {\n      return null;\n    }\n\n    return Object.assign(\n      new AccountKeys(),\n      { cryptoMasterKey: SymmetricCryptoKey.fromJSON(obj?.cryptoMasterKey) },\n      {\n        cryptoSymmetricKey: EncryptionPair.fromJSON(\n          obj?.cryptoSymmetricKey,\n          SymmetricCryptoKey.fromJSON\n        ),\n      },\n      { organizationKeys: AccountKeys.initRecordEncryptionPairsFromJSON(obj?.organizationKeys) },\n      { providerKeys: AccountKeys.initRecordEncryptionPairsFromJSON(obj?.providerKeys) },\n      {\n        privateKey: EncryptionPair.fromJSON<string, ArrayBuffer>(\n          obj?.privateKey,\n          (decObj: string) => Utils.fromByteStringToArray(decObj).buffer\n        ),\n      },\n      {\n        publicKey: Utils.fromByteStringToArray(obj?.publicKey)?.buffer,\n      }\n    );\n  }\n\n  static initRecordEncryptionPairsFromJSON(obj: any) {\n    return EncryptionPair.fromJSON(obj, (decObj: any) => {\n      if (obj == null) {\n        return null;\n      }\n\n      const record: Record<string, SymmetricCryptoKey> = {};\n      for (const id in decObj) {\n        record[id] = SymmetricCryptoKey.fromJSON(decObj[id]);\n      }\n      return record;\n    });\n  }\n}\n\nexport class AccountProfile {\n  apiKeyClientId?: string;\n  authenticationStatus?: AuthenticationStatus;\n  convertAccountToKeyConnector?: boolean;\n  name?: string;\n  email?: string;\n  emailVerified?: boolean;\n  entityId?: string;\n  entityType?: string;\n  everBeenUnlocked?: boolean;\n  forcePasswordReset?: boolean;\n  hasPremiumPersonally?: boolean;\n  hasPremiumFromOrganization?: boolean;\n  lastSync?: string;\n  userId?: string;\n  usesKeyConnector?: boolean;\n  keyHash?: string;\n  kdfIterations?: number;\n  kdfMemory?: number;\n  kdfParallelism?: number;\n  kdfType?: KdfType;\n\n  static fromJSON(obj: Jsonify<AccountProfile>): AccountProfile {\n    if (obj == null) {\n      return null;\n    }\n\n    return Object.assign(new AccountProfile(), obj);\n  }\n}\n\nexport class AccountSettings {\n  autoConfirmFingerPrints?: boolean;\n  autoFillOnPageLoadDefault?: boolean;\n  biometricUnlock?: boolean;\n  clearClipboard?: number;\n  collapsedGroupings?: string[];\n  defaultUriMatch?: UriMatchType;\n  disableAddLoginNotification?: boolean;\n  disableAutoBiometricsPrompt?: boolean;\n  disableAutoTotpCopy?: boolean;\n  disableBadgeCounter?: boolean;\n  disableChangedPasswordNotification?: boolean;\n  disableContextMenuItem?: boolean;\n  disableGa?: boolean;\n  dontShowCardsCurrentTab?: boolean;\n  dontShowIdentitiesCurrentTab?: boolean;\n  enableAlwaysOnTop?: boolean;\n  enableAutoFillOnPageLoad?: boolean;\n  enableBiometric?: boolean;\n  enableFullWidth?: boolean;\n  environmentUrls: EnvironmentUrls = new EnvironmentUrls();\n  equivalentDomains?: any;\n  minimizeOnCopyToClipboard?: boolean;\n  neverDomains?: { [id: string]: any };\n  passwordGenerationOptions?: any;\n  usernameGenerationOptions?: any;\n  generatorOptions?: any;\n  pinProtected?: EncryptionPair<string, EncString> = new EncryptionPair<string, EncString>();\n  protectedPin?: string;\n  settings?: AccountSettingsSettings; // TODO: Merge whatever is going on here into the AccountSettings model properly\n  vaultTimeout?: number;\n  vaultTimeoutAction?: string = \"lock\";\n  serverConfig?: ServerConfigData;\n  approveLoginRequests?: boolean;\n  avatarColor?: string;\n\n  static fromJSON(obj: Jsonify<AccountSettings>): AccountSettings {\n    if (obj == null) {\n      return null;\n    }\n\n    return Object.assign(new AccountSettings(), obj, {\n      environmentUrls: EnvironmentUrls.fromJSON(obj?.environmentUrls),\n      pinProtected: EncryptionPair.fromJSON<string, EncString>(\n        obj?.pinProtected,\n        EncString.fromJSON\n      ),\n      serverConfig: ServerConfigData.fromJSON(obj?.serverConfig),\n    });\n  }\n}\n\nexport type AccountSettingsSettings = {\n  equivalentDomains?: string[][];\n};\n\nexport class AccountTokens {\n  accessToken?: string;\n  refreshToken?: string;\n  securityStamp?: string;\n\n  static fromJSON(obj: Jsonify<AccountTokens>): AccountTokens {\n    if (obj == null) {\n      return null;\n    }\n\n    return Object.assign(new AccountTokens(), obj);\n  }\n}\n\nexport class Account {\n  data?: AccountData = new AccountData();\n  keys?: AccountKeys = new AccountKeys();\n  profile?: AccountProfile = new AccountProfile();\n  settings?: AccountSettings = new AccountSettings();\n  tokens?: AccountTokens = new AccountTokens();\n\n  constructor(init: Partial<Account>) {\n    Object.assign(this, {\n      data: {\n        ...new AccountData(),\n        ...init?.data,\n      },\n      keys: {\n        ...new AccountKeys(),\n        ...init?.keys,\n      },\n      profile: {\n        ...new AccountProfile(),\n        ...init?.profile,\n      },\n      settings: {\n        ...new AccountSettings(),\n        ...init?.settings,\n      },\n      tokens: {\n        ...new AccountTokens(),\n        ...init?.tokens,\n      },\n    });\n  }\n\n  static fromJSON(json: Jsonify<Account>): Account {\n    if (json == null) {\n      return null;\n    }\n\n    return Object.assign(new Account({}), json, {\n      keys: AccountKeys.fromJSON(json?.keys),\n      profile: AccountProfile.fromJSON(json?.profile),\n      settings: AccountSettings.fromJSON(json?.settings),\n      tokens: AccountTokens.fromJSON(json?.tokens),\n    });\n  }\n}\n","export class WindowState {\n  width?: number;\n  height?: number;\n  isMaximized?: boolean;\n  // TODO: displayBounds is an Electron.Rectangle.\n  // We need to establish some kind of client-specific global state, similiar to the way we already extend a base Account.\n  displayBounds: any;\n  x?: number;\n  y?: number;\n  zoomFactor?: number;\n}\n","import { StateVersion } from \"../../enums/stateVersion\";\nimport { ThemeType } from \"../../enums/themeType\";\n\nimport { EnvironmentUrls } from \"./environment-urls\";\nimport { WindowState } from \"./window-state\";\n\nexport class GlobalState {\n  enableAlwaysOnTop?: boolean;\n  installedVersion?: string;\n  locale?: string;\n  organizationInvitation?: any;\n  ssoCodeVerifier?: string;\n  ssoOrganizationIdentifier?: string;\n  ssoState?: string;\n  rememberedEmail?: string;\n  theme?: ThemeType = ThemeType.System;\n  window?: WindowState = new WindowState();\n  twoFactorToken?: string;\n  disableFavicon?: boolean;\n  biometricAwaitingAcceptance?: boolean;\n  biometricFingerprintValidated?: boolean;\n  vaultTimeout?: number;\n  vaultTimeoutAction?: string;\n  loginRedirect?: any;\n  mainWindowSize?: number;\n  enableBiometrics?: boolean;\n  biometricText?: string;\n  noAutoPromptBiometrics?: boolean;\n  noAutoPromptBiometricsText?: string;\n  stateVersion: StateVersion = StateVersion.One;\n  environmentUrls: EnvironmentUrls = new EnvironmentUrls();\n  enableTray?: boolean;\n  enableMinimizeToTray?: boolean;\n  enableCloseToTray?: boolean;\n  enableStartToTray?: boolean;\n  openAtLogin?: boolean;\n  alwaysShowDock?: boolean;\n  enableBrowserIntegration?: boolean;\n  enableBrowserIntegrationFingerprint?: boolean;\n  enableDuckDuckGoBrowserIntegration?: boolean;\n}\n","export class UpdateAvatarRequest {\n  avatarColor: string;\n\n  constructor(avatarColor: string) {\n    this.avatarColor = avatarColor;\n  }\n}\n","import { BehaviorSubject, Observable } from \"rxjs\";\n\nimport { AvatarUpdateService as AvatarUpdateServiceAbstraction } from \"../../abstractions/account/avatar-update.service\";\nimport { ApiService } from \"../../abstractions/api.service\";\nimport { StateService } from \"../../abstractions/state.service\";\nimport { UpdateAvatarRequest } from \"../../models/request/update-avatar.request\";\nimport { ProfileResponse } from \"../../models/response/profile.response\";\n\nexport class AvatarUpdateService implements AvatarUpdateServiceAbstraction {\n  private _avatarUpdate$ = new BehaviorSubject<string | null>(null);\n  avatarUpdate$: Observable<string | null> = this._avatarUpdate$.asObservable();\n\n  constructor(private apiService: ApiService, private stateService: StateService) {\n    this.loadColorFromState();\n  }\n\n  loadColorFromState(): Promise<string | null> {\n    return this.stateService.getAvatarColor().then((color) => {\n      this._avatarUpdate$.next(color);\n      return color;\n    });\n  }\n\n  pushUpdate(color: string | null): Promise<ProfileResponse | void> {\n    return this.apiService.putAvatar(new UpdateAvatarRequest(color)).then((response) => {\n      this.stateService.setAvatarColor(response.avatarColor);\n      this._avatarUpdate$.next(response.avatarColor);\n    });\n  }\n}\n","export enum NotificationType {\n  SyncCipherUpdate = 0,\n  SyncCipherCreate = 1,\n  SyncLoginDelete = 2,\n  SyncFolderDelete = 3,\n  SyncCiphers = 4,\n\n  SyncVault = 5,\n  SyncOrgKeys = 6,\n  SyncFolderCreate = 7,\n  SyncFolderUpdate = 8,\n  SyncCipherDelete = 9,\n  SyncSettings = 10,\n\n  LogOut = 11,\n\n  SyncSendCreate = 12,\n  SyncSendUpdate = 13,\n  SyncSendDelete = 14,\n\n  AuthRequest = 15,\n  AuthRequestResponse = 16,\n}\n","import { NotificationType } from \"../../enums/notificationType\";\n\nimport { BaseResponse } from \"./base.response\";\n\nexport class NotificationResponse extends BaseResponse {\n  contextId: string;\n  type: NotificationType;\n  payload: any;\n\n  constructor(response: any) {\n    super(response);\n    this.contextId = this.getResponseProperty(\"ContextId\");\n    this.type = this.getResponseProperty(\"Type\");\n\n    const payload = this.getResponseProperty(\"Payload\");\n    switch (this.type) {\n      case NotificationType.SyncCipherCreate:\n      case NotificationType.SyncCipherDelete:\n      case NotificationType.SyncCipherUpdate:\n      case NotificationType.SyncLoginDelete:\n        this.payload = new SyncCipherNotification(payload);\n        break;\n      case NotificationType.SyncFolderCreate:\n      case NotificationType.SyncFolderDelete:\n      case NotificationType.SyncFolderUpdate:\n        this.payload = new SyncFolderNotification(payload);\n        break;\n      case NotificationType.SyncVault:\n      case NotificationType.SyncCiphers:\n      case NotificationType.SyncOrgKeys:\n      case NotificationType.SyncSettings:\n      case NotificationType.LogOut:\n        this.payload = new UserNotification(payload);\n        break;\n      case NotificationType.SyncSendCreate:\n      case NotificationType.SyncSendUpdate:\n      case NotificationType.SyncSendDelete:\n        this.payload = new SyncSendNotification(payload);\n        break;\n      case NotificationType.AuthRequest:\n      case NotificationType.AuthRequestResponse:\n        this.payload = new AuthRequestPushNotification(payload);\n        break;\n      default:\n        break;\n    }\n  }\n}\n\nexport class SyncCipherNotification extends BaseResponse {\n  id: string;\n  userId: string;\n  organizationId: string;\n  collectionIds: string[];\n  revisionDate: Date;\n\n  constructor(response: any) {\n    super(response);\n    this.id = this.getResponseProperty(\"Id\");\n    this.userId = this.getResponseProperty(\"UserId\");\n    this.organizationId = this.getResponseProperty(\"OrganizationId\");\n    this.collectionIds = this.getResponseProperty(\"CollectionIds\");\n    this.revisionDate = new Date(this.getResponseProperty(\"RevisionDate\"));\n  }\n}\n\nexport class SyncFolderNotification extends BaseResponse {\n  id: string;\n  userId: string;\n  revisionDate: Date;\n\n  constructor(response: any) {\n    super(response);\n    this.id = this.getResponseProperty(\"Id\");\n    this.userId = this.getResponseProperty(\"UserId\");\n    this.revisionDate = new Date(this.getResponseProperty(\"RevisionDate\"));\n  }\n}\n\nexport class UserNotification extends BaseResponse {\n  userId: string;\n  date: Date;\n\n  constructor(response: any) {\n    super(response);\n    this.userId = this.getResponseProperty(\"UserId\");\n    this.date = new Date(this.getResponseProperty(\"Date\"));\n  }\n}\n\nexport class SyncSendNotification extends BaseResponse {\n  id: string;\n  userId: string;\n  revisionDate: Date;\n\n  constructor(response: any) {\n    super(response);\n    this.id = this.getResponseProperty(\"Id\");\n    this.userId = this.getResponseProperty(\"UserId\");\n    this.revisionDate = new Date(this.getResponseProperty(\"RevisionDate\"));\n  }\n}\n\nexport class AuthRequestPushNotification extends BaseResponse {\n  id: string;\n  userId: string;\n\n  constructor(response: any) {\n    super(response);\n    this.id = this.getResponseProperty(\"Id\");\n    this.userId = this.getResponseProperty(\"UserId\");\n  }\n}\n","import { Injectable } from \"@angular/core\";\nimport {\n  HttpTransportType,\n  HubConnection,\n  HubConnectionBuilder,\n  IHubProtocol,\n} from \"@microsoft/signalr\";\nimport { MessagePackHubProtocol } from \"@microsoft/signalr-protocol-msgpack\";\n\nimport { AnonymousHubService as AnonymousHubServiceAbstraction } from \"../abstractions/anonymousHub.service\";\nimport { AuthService } from \"../abstractions/auth.service\";\nimport { EnvironmentService } from \"../abstractions/environment.service\";\nimport { LogService } from \"../abstractions/log.service\";\n\nimport {\n  AuthRequestPushNotification,\n  NotificationResponse,\n} from \"./../models/response/notification.response\";\n\n@Injectable()\nexport class AnonymousHubService implements AnonymousHubServiceAbstraction {\n  private anonHubConnection: HubConnection;\n  private url: string;\n\n  constructor(\n    private environmentService: EnvironmentService,\n    private authService: AuthService,\n    private logService: LogService\n  ) {}\n\n  async createHubConnection(token: string) {\n    this.url = this.environmentService.getNotificationsUrl();\n\n    this.anonHubConnection = new HubConnectionBuilder()\n      .withUrl(this.url + \"/anonymous-hub?Token=\" + token, {\n        skipNegotiation: true,\n        transport: HttpTransportType.WebSockets,\n      })\n      .withHubProtocol(new MessagePackHubProtocol() as IHubProtocol)\n      .build();\n\n    this.anonHubConnection.start().catch((error) => this.logService.error(error));\n\n    this.anonHubConnection.on(\"AuthRequestResponseRecieved\", (data: any) => {\n      this.ProcessNotification(new NotificationResponse(data));\n    });\n  }\n\n  stopHubConnection() {\n    if (this.anonHubConnection) {\n      this.anonHubConnection.stop();\n    }\n  }\n\n  private async ProcessNotification(notification: NotificationResponse) {\n    await this.authService.authResponsePushNotifiction(\n      notification.payload as AuthRequestPushNotification\n    );\n  }\n}\n","import { PlatformUtilsService } from \"../../abstractions/platformUtils.service\";\nimport { DeviceType } from \"../../enums/deviceType\";\n\nexport class DeviceRequest {\n  type: DeviceType;\n  name: string;\n  identifier: string;\n  pushToken?: string;\n\n  constructor(appId: string, platformUtilsService: PlatformUtilsService) {\n    this.type = platformUtilsService.getDevice();\n    this.name = platformUtilsService.getDeviceString();\n    this.identifier = appId;\n    this.pushToken = null;\n  }\n}\n","import { DeviceRequest } from \"../device.request\";\n\nimport { TokenTwoFactorRequest } from \"./token-two-factor.request\";\n\nexport abstract class TokenRequest {\n  protected device?: DeviceRequest;\n  protected passwordlessAuthRequest: string;\n\n  constructor(protected twoFactor: TokenTwoFactorRequest, device?: DeviceRequest) {\n    this.device = device != null ? device : null;\n  }\n\n  // eslint-disable-next-line\n  alterIdentityTokenHeaders(headers: Headers) {\n    // Implemented in subclass if required\n  }\n\n  setTwoFactor(twoFactor: TokenTwoFactorRequest) {\n    this.twoFactor = twoFactor;\n  }\n\n  setPasswordlessAccessCode(accessCode: string) {\n    this.passwordlessAuthRequest = accessCode;\n  }\n\n  protected toIdentityToken(clientId: string) {\n    const obj: any = {\n      scope: \"api offline_access\",\n      client_id: clientId,\n    };\n\n    if (this.device) {\n      obj.deviceType = this.device.type;\n      obj.deviceIdentifier = this.device.identifier;\n      obj.deviceName = this.device.name;\n      // no push tokens for browser apps yet\n      // obj.devicePushToken = this.device.pushToken;\n    }\n\n    //passswordless login\n    if (this.passwordlessAuthRequest) {\n      obj.authRequest = this.passwordlessAuthRequest;\n    }\n\n    if (this.twoFactor) {\n      if (this.twoFactor.token && this.twoFactor.provider != null) {\n        obj.twoFactorToken = this.twoFactor.token;\n        obj.twoFactorProvider = this.twoFactor.provider;\n        obj.twoFactorRemember = this.twoFactor.remember ? \"1\" : \"0\";\n      }\n    }\n\n    return obj;\n  }\n}\n","import { DeviceRequest } from \"../device.request\";\n\nimport { TokenTwoFactorRequest } from \"./token-two-factor.request\";\nimport { TokenRequest } from \"./token.request\";\n\nexport class UserApiTokenRequest extends TokenRequest {\n  constructor(\n    public clientId: string,\n    public clientSecret: string,\n    protected twoFactor: TokenTwoFactorRequest,\n    device?: DeviceRequest\n  ) {\n    super(twoFactor, device);\n  }\n\n  toIdentityToken() {\n    const obj = super.toIdentityToken(this.clientId);\n\n    obj.scope = this.clientId.startsWith(\"organization\") ? \"api.organization\" : \"api\";\n    obj.grant_type = \"client_credentials\";\n    obj.client_secret = this.clientSecret;\n\n    return obj;\n  }\n}\n","import { BaseResponse } from \"./base.response\";\n\nexport class ApiKeyResponse extends BaseResponse {\n  apiKey: string;\n  revisionDate: Date;\n\n  constructor(response: any) {\n    super(response);\n    this.apiKey = this.getResponseProperty(\"ApiKey\");\n    this.revisionDate = new Date(this.getResponseProperty(\"RevisionDate\"));\n  }\n}\n","import { DeviceType } from \"../../enums/deviceType\";\n\nimport { BaseResponse } from \"./base.response\";\n\nconst RequestTimeOut = 60000 * 15; //15 Minutes\n\nexport class AuthRequestResponse extends BaseResponse {\n  id: string;\n  publicKey: string;\n  requestDeviceType: DeviceType;\n  requestIpAddress: string;\n  key: string;\n  masterPasswordHash: string;\n  creationDate: string;\n  requestApproved?: boolean;\n  requestFingerprint?: string;\n  responseDate?: string;\n  isAnswered: boolean;\n  isExpired: boolean;\n\n  constructor(response: any) {\n    super(response);\n    this.id = this.getResponseProperty(\"Id\");\n    this.publicKey = this.getResponseProperty(\"PublicKey\");\n    this.requestDeviceType = this.getResponseProperty(\"RequestDeviceType\");\n    this.requestIpAddress = this.getResponseProperty(\"RequestIpAddress\");\n    this.key = this.getResponseProperty(\"Key\");\n    this.masterPasswordHash = this.getResponseProperty(\"MasterPasswordHash\");\n    this.creationDate = this.getResponseProperty(\"CreationDate\");\n    this.requestApproved = this.getResponseProperty(\"RequestApproved\");\n    this.requestFingerprint = this.getResponseProperty(\"RequestFingerprint\");\n    this.responseDate = this.getResponseProperty(\"ResponseDate\");\n\n    const requestDate = new Date(this.creationDate);\n    const requestDateUTC = Date.UTC(\n      requestDate.getUTCFullYear(),\n      requestDate.getUTCMonth(),\n      requestDate.getDate(),\n      requestDate.getUTCHours(),\n      requestDate.getUTCMinutes(),\n      requestDate.getUTCSeconds(),\n      requestDate.getUTCMilliseconds()\n    );\n\n    const dateNow = new Date(Date.now());\n    const dateNowUTC = Date.UTC(\n      dateNow.getUTCFullYear(),\n      dateNow.getUTCMonth(),\n      dateNow.getDate(),\n      dateNow.getUTCHours(),\n      dateNow.getUTCMinutes(),\n      dateNow.getUTCSeconds(),\n      dateNow.getUTCMilliseconds()\n    );\n\n    this.isExpired = dateNowUTC - requestDateUTC >= RequestTimeOut;\n    this.isAnswered = this.requestApproved != null && this.responseDate != null;\n  }\n}\n","import { BaseResponse } from \"../base.response\";\n\nimport { ICaptchaProtectedResponse } from \"./captcha-protected.response\";\n\nexport class RegisterResponse extends BaseResponse implements ICaptchaProtectedResponse {\n  captchaBypassToken: string;\n\n  constructor(response: any) {\n    super(response);\n    this.captchaBypassToken = this.getResponseProperty(\"CaptchaBypassToken\");\n  }\n}\n","import { PaymentMethodType } from \"../../enums/paymentMethodType\";\nimport { TransactionType } from \"../../enums/transactionType\";\n\nimport { BaseResponse } from \"./base.response\";\n\nexport class BillingResponse extends BaseResponse {\n  balance: number;\n  paymentSource: BillingSourceResponse;\n  invoices: BillingInvoiceResponse[] = [];\n  transactions: BillingTransactionResponse[] = [];\n\n  constructor(response: any) {\n    super(response);\n    this.balance = this.getResponseProperty(\"Balance\");\n    const paymentSource = this.getResponseProperty(\"PaymentSource\");\n    const transactions = this.getResponseProperty(\"Transactions\");\n    const invoices = this.getResponseProperty(\"Invoices\");\n    this.paymentSource = paymentSource == null ? null : new BillingSourceResponse(paymentSource);\n    if (transactions != null) {\n      this.transactions = transactions.map((t: any) => new BillingTransactionResponse(t));\n    }\n    if (invoices != null) {\n      this.invoices = invoices.map((i: any) => new BillingInvoiceResponse(i));\n    }\n  }\n\n  get hasNoHistory() {\n    return this.invoices.length == 0 && this.transactions.length == 0;\n  }\n}\n\nexport class BillingSourceResponse extends BaseResponse {\n  type: PaymentMethodType;\n  cardBrand: string;\n  description: string;\n  needsVerification: boolean;\n\n  constructor(response: any) {\n    super(response);\n    this.type = this.getResponseProperty(\"Type\");\n    this.cardBrand = this.getResponseProperty(\"CardBrand\");\n    this.description = this.getResponseProperty(\"Description\");\n    this.needsVerification = this.getResponseProperty(\"NeedsVerification\");\n  }\n}\n\nexport class BillingInvoiceResponse extends BaseResponse {\n  url: string;\n  pdfUrl: string;\n  number: string;\n  paid: boolean;\n  date: string;\n  amount: number;\n\n  constructor(response: any) {\n    super(response);\n    this.url = this.getResponseProperty(\"Url\");\n    this.pdfUrl = this.getResponseProperty(\"PdfUrl\");\n    this.number = this.getResponseProperty(\"Number\");\n    this.paid = this.getResponseProperty(\"Paid\");\n    this.date = this.getResponseProperty(\"Date\");\n    this.amount = this.getResponseProperty(\"Amount\");\n  }\n}\n\nexport class BillingTransactionResponse extends BaseResponse {\n  createdDate: string;\n  amount: number;\n  refunded: boolean;\n  partiallyRefunded: boolean;\n  refundedAmount: number;\n  type: TransactionType;\n  paymentMethodType: PaymentMethodType;\n  details: string;\n\n  constructor(response: any) {\n    super(response);\n    this.createdDate = this.getResponseProperty(\"CreatedDate\");\n    this.amount = this.getResponseProperty(\"Amount\");\n    this.refunded = this.getResponseProperty(\"Refunded\");\n    this.partiallyRefunded = this.getResponseProperty(\"PartiallyRefunded\");\n    this.refundedAmount = this.getResponseProperty(\"RefundedAmount\");\n    this.type = this.getResponseProperty(\"Type\");\n    this.paymentMethodType = this.getResponseProperty(\"PaymentMethodType\");\n    this.details = this.getResponseProperty(\"Details\");\n  }\n}\n","import { BaseResponse } from \"./base.response\";\nimport { BillingInvoiceResponse, BillingTransactionResponse } from \"./billing.response\";\n\nexport class BillingHistoryResponse extends BaseResponse {\n  invoices: BillingInvoiceResponse[] = [];\n  transactions: BillingTransactionResponse[] = [];\n\n  constructor(response: any) {\n    super(response);\n    const transactions = this.getResponseProperty(\"Transactions\");\n    const invoices = this.getResponseProperty(\"Invoices\");\n    if (transactions != null) {\n      this.transactions = transactions.map((t: any) => new BillingTransactionResponse(t));\n    }\n    if (invoices != null) {\n      this.invoices = invoices.map((i: any) => new BillingInvoiceResponse(i));\n    }\n  }\n\n  get hasNoHistory() {\n    return this.invoices.length == 0 && this.transactions.length == 0;\n  }\n}\n","import { BaseResponse } from \"./base.response\";\nimport { BillingSourceResponse } from \"./billing.response\";\n\nexport class BillingPaymentResponse extends BaseResponse {\n  balance: number;\n  paymentSource: BillingSourceResponse;\n\n  constructor(response: any) {\n    super(response);\n    this.balance = this.getResponseProperty(\"Balance\");\n    const paymentSource = this.getResponseProperty(\"PaymentSource\");\n    this.paymentSource = paymentSource == null ? null : new BillingSourceResponse(paymentSource);\n  }\n}\n","import { BaseResponse } from \"./base.response\";\n\nexport class BreachAccountResponse extends BaseResponse {\n  addedDate: string;\n  breachDate: string;\n  dataClasses: string[];\n  description: string;\n  domain: string;\n  isActive: boolean;\n  isVerified: boolean;\n  logoPath: string;\n  modifiedDate: string;\n  name: string;\n  pwnCount: number;\n  title: string;\n\n  constructor(response: any) {\n    super(response);\n    this.addedDate = this.getResponseProperty(\"AddedDate\");\n    this.breachDate = this.getResponseProperty(\"BreachDate\");\n    this.dataClasses = this.getResponseProperty(\"DataClasses\");\n    this.description = this.getResponseProperty(\"Description\");\n    this.domain = this.getResponseProperty(\"Domain\");\n    this.isActive = this.getResponseProperty(\"IsActive\");\n    this.isVerified = this.getResponseProperty(\"IsVerified\");\n    this.logoPath = this.getResponseProperty(\"LogoPath\");\n    this.modifiedDate = this.getResponseProperty(\"ModifiedDate\");\n    this.name = this.getResponseProperty(\"Name\");\n    this.pwnCount = this.getResponseProperty(\"PwnCount\");\n    this.title = this.getResponseProperty(\"Title\");\n  }\n}\n","import { BaseResponse } from \"./base.response\";\n\nexport class SelectionReadOnlyResponse extends BaseResponse {\n  id: string;\n  readOnly: boolean;\n  hidePasswords: boolean;\n\n  constructor(response: any) {\n    super(response);\n    this.id = this.getResponseProperty(\"Id\");\n    this.readOnly = this.getResponseProperty(\"ReadOnly\");\n    this.hidePasswords = this.getResponseProperty(\"HidePasswords\");\n  }\n}\n","import { BaseResponse } from \"./base.response\";\nimport { SelectionReadOnlyResponse } from \"./selection-read-only.response\";\n\nexport class CollectionResponse extends BaseResponse {\n  id: string;\n  organizationId: string;\n  name: string;\n  externalId: string;\n\n  constructor(response: any) {\n    super(response);\n    this.id = this.getResponseProperty(\"Id\");\n    this.organizationId = this.getResponseProperty(\"OrganizationId\");\n    this.name = this.getResponseProperty(\"Name\");\n    this.externalId = this.getResponseProperty(\"ExternalId\");\n  }\n}\n\nexport class CollectionDetailsResponse extends CollectionResponse {\n  readOnly: boolean;\n\n  constructor(response: any) {\n    super(response);\n    this.readOnly = this.getResponseProperty(\"ReadOnly\") || false;\n  }\n}\n\nexport class CollectionAccessDetailsResponse extends CollectionResponse {\n  groups: SelectionReadOnlyResponse[] = [];\n  users: SelectionReadOnlyResponse[] = [];\n\n  /**\n   * Flag indicating the user has been explicitly assigned to this Collection\n   */\n  assigned: boolean;\n\n  constructor(response: any) {\n    super(response);\n    this.assigned = this.getResponseProperty(\"Assigned\") || false;\n\n    const groups = this.getResponseProperty(\"Groups\");\n    if (groups != null) {\n      this.groups = groups.map((g: any) => new SelectionReadOnlyResponse(g));\n    }\n\n    const users = this.getResponseProperty(\"Users\");\n    if (users != null) {\n      this.users = users.map((g: any) => new SelectionReadOnlyResponse(g));\n    }\n  }\n}\n","import { BaseResponse } from \"./base.response\";\n\nexport class DeviceVerificationResponse extends BaseResponse {\n  isDeviceVerificationSectionEnabled: boolean;\n  unknownDeviceVerificationEnabled: boolean;\n\n  constructor(response: any) {\n    super(response);\n    this.isDeviceVerificationSectionEnabled = this.getResponseProperty(\n      \"IsDeviceVerificationSectionEnabled\"\n    );\n    this.unknownDeviceVerificationEnabled = this.getResponseProperty(\n      \"UnknownDeviceVerificationEnabled\"\n    );\n  }\n}\n","import { BaseResponse } from \"./base.response\";\n\nexport class GlobalDomainResponse extends BaseResponse {\n  type: number;\n  domains: string[];\n  excluded: boolean;\n\n  constructor(response: any) {\n    super(response);\n    this.type = this.getResponseProperty(\"Type\");\n    this.domains = this.getResponseProperty(\"Domains\");\n    this.excluded = this.getResponseProperty(\"Excluded\");\n  }\n}\n","import { BaseResponse } from \"./base.response\";\nimport { GlobalDomainResponse } from \"./global-domain.response\";\n\nexport class DomainsResponse extends BaseResponse {\n  equivalentDomains: string[][];\n  globalEquivalentDomains: GlobalDomainResponse[] = [];\n\n  constructor(response: any) {\n    super(response);\n    this.equivalentDomains = this.getResponseProperty(\"EquivalentDomains\");\n    const globalEquivalentDomains = this.getResponseProperty(\"GlobalEquivalentDomains\");\n    if (globalEquivalentDomains != null) {\n      this.globalEquivalentDomains = globalEquivalentDomains.map(\n        (d: any) => new GlobalDomainResponse(d)\n      );\n    } else {\n      this.globalEquivalentDomains = [];\n    }\n  }\n}\n","import { BaseResponse } from \"../response/base.response\";\n\nexport class CardApi extends BaseResponse {\n  cardholderName: string;\n  brand: string;\n  number: string;\n  expMonth: string;\n  expYear: string;\n  code: string;\n\n  constructor(data: any = null) {\n    super(data);\n    if (data == null) {\n      return;\n    }\n    this.cardholderName = this.getResponseProperty(\"CardholderName\");\n    this.brand = this.getResponseProperty(\"Brand\");\n    this.number = this.getResponseProperty(\"Number\");\n    this.expMonth = this.getResponseProperty(\"ExpMonth\");\n    this.expYear = this.getResponseProperty(\"ExpYear\");\n    this.code = this.getResponseProperty(\"Code\");\n  }\n}\n","import { FieldType } from \"../../enums/fieldType\";\nimport { LinkedIdType } from \"../../enums/linkedIdType\";\nimport { BaseResponse } from \"../response/base.response\";\n\nexport class FieldApi extends BaseResponse {\n  name: string;\n  value: string;\n  type: FieldType;\n  linkedId: LinkedIdType;\n\n  constructor(data: any = null) {\n    super(data);\n    if (data == null) {\n      return;\n    }\n    this.type = this.getResponseProperty(\"Type\");\n    this.name = this.getResponseProperty(\"Name\");\n    this.value = this.getResponseProperty(\"Value\");\n    this.linkedId = this.getResponseProperty(\"linkedId\");\n  }\n}\n","import { BaseResponse } from \"../response/base.response\";\n\nexport class IdentityApi extends BaseResponse {\n  title: string;\n  firstName: string;\n  middleName: string;\n  lastName: string;\n  address1: string;\n  address2: string;\n  address3: string;\n  city: string;\n  state: string;\n  postalCode: string;\n  country: string;\n  company: string;\n  email: string;\n  phone: string;\n  ssn: string;\n  username: string;\n  passportNumber: string;\n  licenseNumber: string;\n\n  constructor(data: any = null) {\n    super(data);\n    if (data == null) {\n      return;\n    }\n    this.title = this.getResponseProperty(\"Title\");\n    this.firstName = this.getResponseProperty(\"FirstName\");\n    this.middleName = this.getResponseProperty(\"MiddleName\");\n    this.lastName = this.getResponseProperty(\"LastName\");\n    this.address1 = this.getResponseProperty(\"Address1\");\n    this.address2 = this.getResponseProperty(\"Address2\");\n    this.address3 = this.getResponseProperty(\"Address3\");\n    this.city = this.getResponseProperty(\"City\");\n    this.state = this.getResponseProperty(\"State\");\n    this.postalCode = this.getResponseProperty(\"PostalCode\");\n    this.country = this.getResponseProperty(\"Country\");\n    this.company = this.getResponseProperty(\"Company\");\n    this.email = this.getResponseProperty(\"Email\");\n    this.phone = this.getResponseProperty(\"Phone\");\n    this.ssn = this.getResponseProperty(\"SSN\");\n    this.username = this.getResponseProperty(\"Username\");\n    this.passportNumber = this.getResponseProperty(\"PassportNumber\");\n    this.licenseNumber = this.getResponseProperty(\"LicenseNumber\");\n  }\n}\n","import { UriMatchType } from \"../../enums/uriMatchType\";\nimport { BaseResponse } from \"../response/base.response\";\n\nexport class LoginUriApi extends BaseResponse {\n  uri: string;\n  match: UriMatchType = null;\n\n  constructor(data: any = null) {\n    super(data);\n    if (data == null) {\n      return;\n    }\n    this.uri = this.getResponseProperty(\"Uri\");\n    const match = this.getResponseProperty(\"Match\");\n    this.match = match != null ? match : null;\n  }\n}\n","import { BaseResponse } from \"../response/base.response\";\n\nimport { LoginUriApi } from \"./login-uri.api\";\n\nexport class LoginApi extends BaseResponse {\n  uris: LoginUriApi[];\n  username: string;\n  password: string;\n  passwordRevisionDate: string;\n  totp: string;\n  autofillOnPageLoad: boolean;\n\n  constructor(data: any = null) {\n    super(data);\n    if (data == null) {\n      return;\n    }\n    this.username = this.getResponseProperty(\"Username\");\n    this.password = this.getResponseProperty(\"Password\");\n    this.passwordRevisionDate = this.getResponseProperty(\"PasswordRevisionDate\");\n    this.totp = this.getResponseProperty(\"Totp\");\n    this.autofillOnPageLoad = this.getResponseProperty(\"AutofillOnPageLoad\");\n\n    const uris = this.getResponseProperty(\"Uris\");\n    if (uris != null) {\n      this.uris = uris.map((u: any) => new LoginUriApi(u));\n    }\n  }\n}\n","import { SecureNoteType } from \"../../enums/secureNoteType\";\nimport { BaseResponse } from \"../response/base.response\";\n\nexport class SecureNoteApi extends BaseResponse {\n  type: SecureNoteType;\n\n  constructor(data: any = null) {\n    super(data);\n    if (data == null) {\n      return;\n    }\n    this.type = this.getResponseProperty(\"Type\");\n  }\n}\n","import { BaseResponse } from \"../../../models/response/base.response\";\n\nexport class AttachmentResponse extends BaseResponse {\n  id: string;\n  url: string;\n  fileName: string;\n  key: string;\n  size: string;\n  sizeName: string;\n\n  constructor(response: any) {\n    super(response);\n    this.id = this.getResponseProperty(\"Id\");\n    this.url = this.getResponseProperty(\"Url\");\n    this.fileName = this.getResponseProperty(\"FileName\");\n    this.key = this.getResponseProperty(\"Key\");\n    this.size = this.getResponseProperty(\"Size\");\n    this.sizeName = this.getResponseProperty(\"SizeName\");\n  }\n}\n","import { BaseResponse } from \"../../../models/response/base.response\";\n\nexport class PasswordHistoryResponse extends BaseResponse {\n  password: string;\n  lastUsedDate: string;\n\n  constructor(response: any) {\n    super(response);\n    this.password = this.getResponseProperty(\"Password\");\n    this.lastUsedDate = this.getResponseProperty(\"LastUsedDate\");\n  }\n}\n","import { CardApi } from \"../../../models/api/card.api\";\nimport { FieldApi } from \"../../../models/api/field.api\";\nimport { IdentityApi } from \"../../../models/api/identity.api\";\nimport { LoginApi } from \"../../../models/api/login.api\";\nimport { SecureNoteApi } from \"../../../models/api/secure-note.api\";\nimport { BaseResponse } from \"../../../models/response/base.response\";\nimport { CipherRepromptType } from \"../../enums/cipher-reprompt-type\";\n\nimport { AttachmentResponse } from \"./attachment.response\";\nimport { PasswordHistoryResponse } from \"./password-history.response\";\n\nexport class CipherResponse extends BaseResponse {\n  id: string;\n  organizationId: string;\n  folderId: string;\n  type: number;\n  name: string;\n  notes: string;\n  fields: FieldApi[];\n  login: LoginApi;\n  card: CardApi;\n  identity: IdentityApi;\n  secureNote: SecureNoteApi;\n  favorite: boolean;\n  edit: boolean;\n  viewPassword: boolean;\n  organizationUseTotp: boolean;\n  revisionDate: string;\n  attachments: AttachmentResponse[];\n  passwordHistory: PasswordHistoryResponse[];\n  collectionIds: string[];\n  creationDate: string;\n  deletedDate: string;\n  reprompt: CipherRepromptType;\n\n  constructor(response: any) {\n    super(response);\n    this.id = this.getResponseProperty(\"Id\");\n    this.organizationId = this.getResponseProperty(\"OrganizationId\");\n    this.folderId = this.getResponseProperty(\"FolderId\") || null;\n    this.type = this.getResponseProperty(\"Type\");\n    this.name = this.getResponseProperty(\"Name\");\n    this.notes = this.getResponseProperty(\"Notes\");\n    this.favorite = this.getResponseProperty(\"Favorite\") || false;\n    this.edit = !!this.getResponseProperty(\"Edit\");\n    if (this.getResponseProperty(\"ViewPassword\") == null) {\n      this.viewPassword = true;\n    } else {\n      this.viewPassword = this.getResponseProperty(\"ViewPassword\");\n    }\n    this.organizationUseTotp = this.getResponseProperty(\"OrganizationUseTotp\");\n    this.revisionDate = this.getResponseProperty(\"RevisionDate\");\n    this.collectionIds = this.getResponseProperty(\"CollectionIds\");\n    this.creationDate = this.getResponseProperty(\"CreationDate\");\n    this.deletedDate = this.getResponseProperty(\"DeletedDate\");\n\n    const login = this.getResponseProperty(\"Login\");\n    if (login != null) {\n      this.login = new LoginApi(login);\n    }\n\n    const card = this.getResponseProperty(\"Card\");\n    if (card != null) {\n      this.card = new CardApi(card);\n    }\n\n    const identity = this.getResponseProperty(\"Identity\");\n    if (identity != null) {\n      this.identity = new IdentityApi(identity);\n    }\n\n    const secureNote = this.getResponseProperty(\"SecureNote\");\n    if (secureNote != null) {\n      this.secureNote = new SecureNoteApi(secureNote);\n    }\n\n    const fields = this.getResponseProperty(\"Fields\");\n    if (fields != null) {\n      this.fields = fields.map((f: any) => new FieldApi(f));\n    }\n\n    const attachments = this.getResponseProperty(\"Attachments\");\n    if (attachments != null) {\n      this.attachments = attachments.map((a: any) => new AttachmentResponse(a));\n    }\n\n    const passwordHistory = this.getResponseProperty(\"PasswordHistory\");\n    if (passwordHistory != null) {\n      this.passwordHistory = passwordHistory.map((h: any) => new PasswordHistoryResponse(h));\n    }\n\n    this.reprompt = this.getResponseProperty(\"Reprompt\") || CipherRepromptType.None;\n  }\n}\n","import { EmergencyAccessStatusType } from \"../../enums/emergencyAccessStatusType\";\nimport { EmergencyAccessType } from \"../../enums/emergencyAccessType\";\nimport { KdfType } from \"../../enums/kdfType\";\nimport { CipherResponse } from \"../../vault/models/response/cipher.response\";\n\nimport { BaseResponse } from \"./base.response\";\n\nexport class EmergencyAccessGranteeDetailsResponse extends BaseResponse {\n  id: string;\n  granteeId: string;\n  name: string;\n  email: string;\n  type: EmergencyAccessType;\n  status: EmergencyAccessStatusType;\n  waitTimeDays: number;\n  creationDate: string;\n  avatarColor: string;\n\n  constructor(response: any) {\n    super(response);\n    this.id = this.getResponseProperty(\"Id\");\n    this.granteeId = this.getResponseProperty(\"GranteeId\");\n    this.name = this.getResponseProperty(\"Name\");\n    this.email = this.getResponseProperty(\"Email\");\n    this.type = this.getResponseProperty(\"Type\");\n    this.status = this.getResponseProperty(\"Status\");\n    this.waitTimeDays = this.getResponseProperty(\"WaitTimeDays\");\n    this.creationDate = this.getResponseProperty(\"CreationDate\");\n    this.avatarColor = this.getResponseProperty(\"AvatarColor\");\n  }\n}\n\nexport class EmergencyAccessGrantorDetailsResponse extends BaseResponse {\n  id: string;\n  grantorId: string;\n  name: string;\n  email: string;\n  type: EmergencyAccessType;\n  status: EmergencyAccessStatusType;\n  waitTimeDays: number;\n  creationDate: string;\n  avatarColor: string;\n\n  constructor(response: any) {\n    super(response);\n    this.id = this.getResponseProperty(\"Id\");\n    this.grantorId = this.getResponseProperty(\"GrantorId\");\n    this.name = this.getResponseProperty(\"Name\");\n    this.email = this.getResponseProperty(\"Email\");\n    this.type = this.getResponseProperty(\"Type\");\n    this.status = this.getResponseProperty(\"Status\");\n    this.waitTimeDays = this.getResponseProperty(\"WaitTimeDays\");\n    this.creationDate = this.getResponseProperty(\"CreationDate\");\n    this.avatarColor = this.getResponseProperty(\"AvatarColor\");\n  }\n}\n\nexport class EmergencyAccessTakeoverResponse extends BaseResponse {\n  keyEncrypted: string;\n  kdf: KdfType;\n  kdfIterations: number;\n  kdfMemory?: number;\n  kdfParallelism?: number;\n\n  constructor(response: any) {\n    super(response);\n\n    this.keyEncrypted = this.getResponseProperty(\"KeyEncrypted\");\n    this.kdf = this.getResponseProperty(\"Kdf\");\n    this.kdfIterations = this.getResponseProperty(\"KdfIterations\");\n    this.kdfMemory = this.getResponseProperty(\"KdfMemory\");\n    this.kdfParallelism = this.getResponseProperty(\"KdfParallelism\");\n  }\n}\n\nexport class EmergencyAccessViewResponse extends BaseResponse {\n  keyEncrypted: string;\n  ciphers: CipherResponse[] = [];\n\n  constructor(response: any) {\n    super(response);\n\n    this.keyEncrypted = this.getResponseProperty(\"KeyEncrypted\");\n\n    const ciphers = this.getResponseProperty(\"Ciphers\");\n    if (ciphers != null) {\n      this.ciphers = ciphers.map((c: any) => new CipherResponse(c));\n    }\n  }\n}\n","import { DeviceType } from \"../../enums/deviceType\";\nimport { EventSystemUser } from \"../../enums/event-system-user\";\nimport { EventType } from \"../../enums/eventType\";\n\nimport { BaseResponse } from \"./base.response\";\n\nexport class EventResponse extends BaseResponse {\n  type: EventType;\n  userId: string;\n  organizationId: string;\n  providerId: string;\n  cipherId: string;\n  collectionId: string;\n  groupId: string;\n  policyId: string;\n  organizationUserId: string;\n  providerUserId: string;\n  providerOrganizationId: string;\n  actingUserId: string;\n  date: string;\n  deviceType: DeviceType;\n  ipAddress: string;\n  installationId: string;\n  systemUser: EventSystemUser;\n\n  constructor(response: any) {\n    super(response);\n    this.type = this.getResponseProperty(\"Type\");\n    this.userId = this.getResponseProperty(\"UserId\");\n    this.organizationId = this.getResponseProperty(\"OrganizationId\");\n    this.providerId = this.getResponseProperty(\"ProviderId\");\n    this.cipherId = this.getResponseProperty(\"CipherId\");\n    this.collectionId = this.getResponseProperty(\"CollectionId\");\n    this.groupId = this.getResponseProperty(\"GroupId\");\n    this.policyId = this.getResponseProperty(\"PolicyId\");\n    this.organizationUserId = this.getResponseProperty(\"OrganizationUserId\");\n    this.providerUserId = this.getResponseProperty(\"ProviderUserId\");\n    this.providerOrganizationId = this.getResponseProperty(\"ProviderOrganizationId\");\n    this.actingUserId = this.getResponseProperty(\"ActingUserId\");\n    this.date = this.getResponseProperty(\"Date\");\n    this.deviceType = this.getResponseProperty(\"DeviceType\");\n    this.ipAddress = this.getResponseProperty(\"IpAddress\");\n    this.installationId = this.getResponseProperty(\"InstallationId\");\n    this.systemUser = this.getResponseProperty(\"SystemUser\");\n  }\n}\n","import { BaseResponse } from \"./base.response\";\n\nexport class IdentityCaptchaResponse extends BaseResponse {\n  siteKey: string;\n\n  constructor(response: any) {\n    super(response);\n    this.siteKey = this.getResponseProperty(\"HCaptcha_SiteKey\");\n  }\n}\n","import { KdfType } from \"../../enums/kdfType\";\n\nimport { BaseResponse } from \"./base.response\";\n\nexport class IdentityTokenResponse extends BaseResponse {\n  accessToken: string;\n  expiresIn: number;\n  refreshToken: string;\n  tokenType: string;\n\n  resetMasterPassword: boolean;\n  privateKey: string;\n  key: string;\n  twoFactorToken: string;\n  kdf: KdfType;\n  kdfIterations: number;\n  kdfMemory?: number;\n  kdfParallelism?: number;\n  forcePasswordReset: boolean;\n  apiUseKeyConnector: boolean;\n  keyConnectorUrl: string;\n\n  constructor(response: any) {\n    super(response);\n    this.accessToken = response.access_token;\n    this.expiresIn = response.expires_in;\n    this.refreshToken = response.refresh_token;\n    this.tokenType = response.token_type;\n\n    this.resetMasterPassword = this.getResponseProperty(\"ResetMasterPassword\");\n    this.privateKey = this.getResponseProperty(\"PrivateKey\");\n    this.key = this.getResponseProperty(\"Key\");\n    this.twoFactorToken = this.getResponseProperty(\"TwoFactorToken\");\n    this.kdf = this.getResponseProperty(\"Kdf\");\n    this.kdfIterations = this.getResponseProperty(\"KdfIterations\");\n    this.kdfMemory = this.getResponseProperty(\"KdfMemory\");\n    this.kdfParallelism = this.getResponseProperty(\"KdfParallelism\");\n    this.forcePasswordReset = this.getResponseProperty(\"ForcePasswordReset\");\n    this.apiUseKeyConnector = this.getResponseProperty(\"ApiUseKeyConnector\");\n    this.keyConnectorUrl = this.getResponseProperty(\"KeyConnectorUrl\");\n  }\n}\n","import { TwoFactorProviderType } from \"../../enums/twoFactorProviderType\";\n\nimport { BaseResponse } from \"./base.response\";\n\nexport class IdentityTwoFactorResponse extends BaseResponse {\n  twoFactorProviders: TwoFactorProviderType[];\n  twoFactorProviders2 = new Map<TwoFactorProviderType, { [key: string]: string }>();\n  captchaToken: string;\n\n  constructor(response: any) {\n    super(response);\n    this.captchaToken = this.getResponseProperty(\"CaptchaBypassToken\");\n    this.twoFactorProviders = this.getResponseProperty(\"TwoFactorProviders\");\n    const twoFactorProviders2 = this.getResponseProperty(\"TwoFactorProviders2\");\n    if (twoFactorProviders2 != null) {\n      for (const prop in twoFactorProviders2) {\n        // eslint-disable-next-line\n        if (twoFactorProviders2.hasOwnProperty(prop)) {\n          this.twoFactorProviders2.set(parseInt(prop, null), twoFactorProviders2[prop]);\n        }\n      }\n    }\n  }\n}\n","import { BaseResponse } from \"./base.response\";\n\nexport class KeyConnectorUserKeyResponse extends BaseResponse {\n  key: string;\n\n  constructor(response: any) {\n    super(response);\n    this.key = this.getResponseProperty(\"Key\");\n  }\n}\n","import { BaseResponse } from \"./base.response\";\n\nexport class ListResponse<T> extends BaseResponse {\n  data: T[];\n  continuationToken: string;\n\n  constructor(response: any, t: new (dataResponse: any) => T) {\n    super(response);\n    const data = this.getResponseProperty(\"Data\");\n    this.data = data == null ? [] : data.map((dr: any) => new t(dr));\n    this.continuationToken = this.getResponseProperty(\"ContinuationToken\");\n  }\n}\n","import { OrganizationConnectionType } from \"../../enums/organizationConnectionType\";\nimport { BillingSyncConfigApi } from \"../api/billing-sync-config.api\";\nimport { ScimConfigApi } from \"../api/scim-config.api\";\n\nimport { BaseResponse } from \"./base.response\";\n\n/**API response config types for OrganizationConnectionResponse */\nexport type OrganizationConnectionConfigApis = BillingSyncConfigApi | ScimConfigApi;\n\nexport class OrganizationConnectionResponse<\n  TConfig extends OrganizationConnectionConfigApis\n> extends BaseResponse {\n  id: string;\n  type: OrganizationConnectionType;\n  organizationId: string;\n  enabled: boolean;\n  config: TConfig;\n\n  constructor(response: any, configType: { new (response: any): TConfig }) {\n    super(response);\n    this.id = this.getResponseProperty(\"Id\");\n    this.type = this.getResponseProperty(\"Type\");\n    this.organizationId = this.getResponseProperty(\"OrganizationId\");\n    this.enabled = this.getResponseProperty(\"Enabled\");\n    const rawConfig = this.getResponseProperty(\"Config\");\n    this.config = rawConfig == null ? null : new configType(rawConfig);\n  }\n}\n","import { CipherResponse } from \"../../vault/models/response/cipher.response\";\n\nimport { BaseResponse } from \"./base.response\";\nimport { CollectionResponse } from \"./collection.response\";\n\nexport class OrganizationExportResponse extends BaseResponse {\n  collections: CollectionResponse[];\n  ciphers: CipherResponse[];\n\n  constructor(response: any) {\n    super(response);\n    const collections = this.getResponseProperty(\"Collections\");\n    if (collections != null) {\n      this.collections = collections.map((c: any) => new CollectionResponse(c));\n    }\n    const ciphers = this.getResponseProperty(\"Ciphers\");\n    if (ciphers != null) {\n      this.ciphers = ciphers.map((c: any) => new CipherResponse(c));\n    }\n  }\n}\n","import { BaseResponse } from \"./base.response\";\n\nexport class OrganizationSponsorshipSyncStatusResponse extends BaseResponse {\n  lastSyncDate?: Date;\n\n  constructor(response: any) {\n    super(response);\n    const lastSyncDate = this.getResponseProperty(\"LastSyncDate\");\n    if (lastSyncDate) {\n      this.lastSyncDate = new Date(lastSyncDate);\n    }\n  }\n}\n","import { BaseResponse } from \"../response/base.response\";\n\nexport class PermissionsApi extends BaseResponse {\n  accessEventLogs: boolean;\n  accessImportExport: boolean;\n  accessReports: boolean;\n  createNewCollections: boolean;\n  editAnyCollection: boolean;\n  deleteAnyCollection: boolean;\n  editAssignedCollections: boolean;\n  deleteAssignedCollections: boolean;\n  manageCiphers: boolean;\n  manageGroups: boolean;\n  manageSso: boolean;\n  managePolicies: boolean;\n  manageUsers: boolean;\n  manageResetPassword: boolean;\n  manageScim: boolean;\n\n  constructor(data: any = null) {\n    super(data);\n    if (data == null) {\n      return this;\n    }\n    this.accessEventLogs = this.getResponseProperty(\"AccessEventLogs\");\n    this.accessImportExport = this.getResponseProperty(\"AccessImportExport\");\n    this.accessReports = this.getResponseProperty(\"AccessReports\");\n\n    this.createNewCollections = this.getResponseProperty(\"CreateNewCollections\");\n    this.editAnyCollection = this.getResponseProperty(\"EditAnyCollection\");\n    this.deleteAnyCollection = this.getResponseProperty(\"DeleteAnyCollection\");\n    this.editAssignedCollections = this.getResponseProperty(\"EditAssignedCollections\");\n    this.deleteAssignedCollections = this.getResponseProperty(\"DeleteAssignedCollections\");\n\n    this.manageCiphers = this.getResponseProperty(\"ManageCiphers\");\n    this.manageGroups = this.getResponseProperty(\"ManageGroups\");\n    this.manageSso = this.getResponseProperty(\"ManageSso\");\n    this.managePolicies = this.getResponseProperty(\"ManagePolicies\");\n    this.manageUsers = this.getResponseProperty(\"ManageUsers\");\n    this.manageResetPassword = this.getResponseProperty(\"ManageResetPassword\");\n    this.manageScim = this.getResponseProperty(\"ManageScim\");\n  }\n}\n","import { OrganizationUserStatusType } from \"../../enums/organizationUserStatusType\";\nimport { OrganizationUserType } from \"../../enums/organizationUserType\";\nimport { ProductType } from \"../../enums/productType\";\nimport { PermissionsApi } from \"../api/permissions.api\";\n\nimport { BaseResponse } from \"./base.response\";\n\nexport class ProfileOrganizationResponse extends BaseResponse {\n  id: string;\n  name: string;\n  usePolicies: boolean;\n  useGroups: boolean;\n  useDirectory: boolean;\n  useEvents: boolean;\n  useTotp: boolean;\n  use2fa: boolean;\n  useApi: boolean;\n  useSso: boolean;\n  useKeyConnector: boolean;\n  useScim: boolean;\n  useCustomPermissions: boolean;\n  useResetPassword: boolean;\n  useSecretsManager: boolean;\n  selfHost: boolean;\n  usersGetPremium: boolean;\n  seats: number;\n  maxCollections: number;\n  maxStorageGb?: number;\n  key: string;\n  hasPublicAndPrivateKeys: boolean;\n  status: OrganizationUserStatusType;\n  type: OrganizationUserType;\n  enabled: boolean;\n  ssoBound: boolean;\n  identifier: string;\n  permissions: PermissionsApi;\n  resetPasswordEnrolled: boolean;\n  userId: string;\n  providerId: string;\n  providerName: string;\n  familySponsorshipFriendlyName: string;\n  familySponsorshipAvailable: boolean;\n  planProductType: ProductType;\n  keyConnectorEnabled: boolean;\n  keyConnectorUrl: string;\n  familySponsorshipLastSyncDate?: Date;\n  familySponsorshipValidUntil?: Date;\n  familySponsorshipToDelete?: boolean;\n  accessSecretsManager: boolean;\n\n  constructor(response: any) {\n    super(response);\n    this.id = this.getResponseProperty(\"Id\");\n    this.name = this.getResponseProperty(\"Name\");\n    this.usePolicies = this.getResponseProperty(\"UsePolicies\");\n    this.useGroups = this.getResponseProperty(\"UseGroups\");\n    this.useDirectory = this.getResponseProperty(\"UseDirectory\");\n    this.useEvents = this.getResponseProperty(\"UseEvents\");\n    this.useTotp = this.getResponseProperty(\"UseTotp\");\n    this.use2fa = this.getResponseProperty(\"Use2fa\");\n    this.useApi = this.getResponseProperty(\"UseApi\");\n    this.useSso = this.getResponseProperty(\"UseSso\");\n    this.useKeyConnector = this.getResponseProperty(\"UseKeyConnector\") ?? false;\n    this.useScim = this.getResponseProperty(\"UseScim\") ?? false;\n    this.useCustomPermissions = this.getResponseProperty(\"UseCustomPermissions\") ?? false;\n    this.useResetPassword = this.getResponseProperty(\"UseResetPassword\");\n    this.useSecretsManager = this.getResponseProperty(\"UseSecretsManager\");\n    this.selfHost = this.getResponseProperty(\"SelfHost\");\n    this.usersGetPremium = this.getResponseProperty(\"UsersGetPremium\");\n    this.seats = this.getResponseProperty(\"Seats\");\n    this.maxCollections = this.getResponseProperty(\"MaxCollections\");\n    this.maxStorageGb = this.getResponseProperty(\"MaxStorageGb\");\n    this.key = this.getResponseProperty(\"Key\");\n    this.hasPublicAndPrivateKeys = this.getResponseProperty(\"HasPublicAndPrivateKeys\");\n    this.status = this.getResponseProperty(\"Status\");\n    this.type = this.getResponseProperty(\"Type\");\n    this.enabled = this.getResponseProperty(\"Enabled\");\n    this.ssoBound = this.getResponseProperty(\"SsoBound\");\n    this.identifier = this.getResponseProperty(\"Identifier\");\n    this.permissions = new PermissionsApi(this.getResponseProperty(\"permissions\"));\n    this.resetPasswordEnrolled = this.getResponseProperty(\"ResetPasswordEnrolled\");\n    this.userId = this.getResponseProperty(\"UserId\");\n    this.providerId = this.getResponseProperty(\"ProviderId\");\n    this.providerName = this.getResponseProperty(\"ProviderName\");\n    this.familySponsorshipFriendlyName = this.getResponseProperty(\"FamilySponsorshipFriendlyName\");\n    this.familySponsorshipAvailable = this.getResponseProperty(\"FamilySponsorshipAvailable\");\n    this.planProductType = this.getResponseProperty(\"PlanProductType\");\n    this.keyConnectorEnabled = this.getResponseProperty(\"KeyConnectorEnabled\") ?? false;\n    this.keyConnectorUrl = this.getResponseProperty(\"KeyConnectorUrl\");\n    const familySponsorshipLastSyncDateString = this.getResponseProperty(\n      \"FamilySponsorshipLastSyncDate\"\n    );\n    if (familySponsorshipLastSyncDateString) {\n      this.familySponsorshipLastSyncDate = new Date(familySponsorshipLastSyncDateString);\n    }\n    const familySponsorshipValidUntilString = this.getResponseProperty(\n      \"FamilySponsorshipValidUntil\"\n    );\n    if (familySponsorshipValidUntilString) {\n      this.familySponsorshipValidUntil = new Date(familySponsorshipValidUntilString);\n    }\n    this.familySponsorshipToDelete = this.getResponseProperty(\"FamilySponsorshipToDelete\");\n    this.accessSecretsManager = this.getResponseProperty(\"AccessSecretsManager\");\n  }\n}\n","import { ProfileOrganizationResponse } from \"./profile-organization.response\";\n\nexport class ProfileProviderOrganizationResponse extends ProfileOrganizationResponse {\n  constructor(response: any) {\n    super(response);\n    this.keyConnectorEnabled = false;\n  }\n}\n","import { ProviderUserStatusType } from \"../../enums/providerUserStatusType\";\nimport { ProviderUserType } from \"../../enums/providerUserType\";\nimport { PermissionsApi } from \"../api/permissions.api\";\n\nimport { BaseResponse } from \"./base.response\";\n\nexport class ProfileProviderResponse extends BaseResponse {\n  id: string;\n  name: string;\n  key: string;\n  status: ProviderUserStatusType;\n  type: ProviderUserType;\n  enabled: boolean;\n  permissions: PermissionsApi;\n  userId: string;\n  useEvents: boolean;\n\n  constructor(response: any) {\n    super(response);\n    this.id = this.getResponseProperty(\"Id\");\n    this.name = this.getResponseProperty(\"Name\");\n    this.key = this.getResponseProperty(\"Key\");\n    this.status = this.getResponseProperty(\"Status\");\n    this.type = this.getResponseProperty(\"Type\");\n    this.enabled = this.getResponseProperty(\"Enabled\");\n    this.permissions = new PermissionsApi(this.getResponseProperty(\"permissions\"));\n    this.userId = this.getResponseProperty(\"UserId\");\n    this.useEvents = this.getResponseProperty(\"UseEvents\");\n  }\n}\n","import { BaseResponse } from \"./base.response\";\nimport { ProfileOrganizationResponse } from \"./profile-organization.response\";\nimport { ProfileProviderOrganizationResponse } from \"./profile-provider-organization.response\";\nimport { ProfileProviderResponse } from \"./profile-provider.response\";\n\nexport class ProfileResponse extends BaseResponse {\n  id: string;\n  name: string;\n  email: string;\n  emailVerified: boolean;\n  masterPasswordHint: string;\n  premiumPersonally: boolean;\n  premiumFromOrganization: boolean;\n  culture: string;\n  twoFactorEnabled: boolean;\n  key: string;\n  avatarColor: string;\n  privateKey: string;\n  securityStamp: string;\n  forcePasswordReset: boolean;\n  usesKeyConnector: boolean;\n  organizations: ProfileOrganizationResponse[] = [];\n  providers: ProfileProviderResponse[] = [];\n  providerOrganizations: ProfileProviderOrganizationResponse[] = [];\n\n  constructor(response: any) {\n    super(response);\n    this.id = this.getResponseProperty(\"Id\");\n    this.name = this.getResponseProperty(\"Name\");\n    this.email = this.getResponseProperty(\"Email\");\n    this.emailVerified = this.getResponseProperty(\"EmailVerified\");\n    this.masterPasswordHint = this.getResponseProperty(\"MasterPasswordHint\");\n    this.premiumPersonally = this.getResponseProperty(\"Premium\");\n    this.premiumFromOrganization = this.getResponseProperty(\"PremiumFromOrganization\");\n    this.culture = this.getResponseProperty(\"Culture\");\n    this.twoFactorEnabled = this.getResponseProperty(\"TwoFactorEnabled\");\n    this.key = this.getResponseProperty(\"Key\");\n    this.avatarColor = this.getResponseProperty(\"AvatarColor\");\n    this.privateKey = this.getResponseProperty(\"PrivateKey\");\n    this.securityStamp = this.getResponseProperty(\"SecurityStamp\");\n    this.forcePasswordReset = this.getResponseProperty(\"ForcePasswordReset\") ?? false;\n    this.usesKeyConnector = this.getResponseProperty(\"UsesKeyConnector\") ?? false;\n\n    const organizations = this.getResponseProperty(\"Organizations\");\n    if (organizations != null) {\n      this.organizations = organizations.map((o: any) => new ProfileOrganizationResponse(o));\n    }\n    const providers = this.getResponseProperty(\"Providers\");\n    if (providers != null) {\n      this.providers = providers.map((o: any) => new ProfileProviderResponse(o));\n    }\n    const providerOrganizations = this.getResponseProperty(\"ProviderOrganizations\");\n    if (providerOrganizations != null) {\n      this.providerOrganizations = providerOrganizations.map(\n        (o: any) => new ProfileProviderOrganizationResponse(o)\n      );\n    }\n  }\n}\n","import { BaseResponse } from \"./base.response\";\nimport { ProfileResponse } from \"./profile.response\";\n\nexport class PaymentResponse extends BaseResponse {\n  userProfile: ProfileResponse;\n  paymentIntentClientSecret: string;\n  success: boolean;\n\n  constructor(response: any) {\n    super(response);\n    const userProfile = this.getResponseProperty(\"UserProfile\");\n    if (userProfile != null) {\n      this.userProfile = new ProfileResponse(userProfile);\n    }\n    this.paymentIntentClientSecret = this.getResponseProperty(\"PaymentIntentClientSecret\");\n    this.success = this.getResponseProperty(\"Success\");\n  }\n}\n","import { PlanType } from \"../../enums/planType\";\nimport { ProductType } from \"../../enums/productType\";\n\nimport { BaseResponse } from \"./base.response\";\n\nexport class PlanResponse extends BaseResponse {\n  type: PlanType;\n  product: ProductType;\n  name: string;\n  isAnnual: boolean;\n  nameLocalizationKey: string;\n  descriptionLocalizationKey: string;\n  canBeUsedByBusiness: boolean;\n  baseSeats: number;\n  baseStorageGb: number;\n  maxCollections: number;\n  maxUsers: number;\n\n  hasAdditionalSeatsOption: boolean;\n  maxAdditionalSeats: number;\n  hasAdditionalStorageOption: boolean;\n  maxAdditionalStorage: number;\n  hasPremiumAccessOption: boolean;\n  trialPeriodDays: number;\n\n  hasSelfHost: boolean;\n  hasPolicies: boolean;\n  hasGroups: boolean;\n  hasDirectory: boolean;\n  hasEvents: boolean;\n  hasTotp: boolean;\n  has2fa: boolean;\n  hasApi: boolean;\n  hasSso: boolean;\n  hasResetPassword: boolean;\n  usersGetPremium: boolean;\n\n  upgradeSortOrder: number;\n  displaySortOrder: number;\n  legacyYear: number;\n  disabled: boolean;\n\n  stripePlanId: string;\n  stripeSeatPlanId: string;\n  stripeStoragePlanId: string;\n  stripePremiumAccessPlanId: string;\n  basePrice: number;\n  seatPrice: number;\n  additionalStoragePricePerGb: number;\n  premiumAccessOptionPrice: number;\n\n  constructor(response: any) {\n    super(response);\n    this.type = this.getResponseProperty(\"Type\");\n    this.product = this.getResponseProperty(\"Product\");\n    this.name = this.getResponseProperty(\"Name\");\n    this.isAnnual = this.getResponseProperty(\"IsAnnual\");\n    this.nameLocalizationKey = this.getResponseProperty(\"NameLocalizationKey\");\n    this.descriptionLocalizationKey = this.getResponseProperty(\"DescriptionLocalizationKey\");\n    this.canBeUsedByBusiness = this.getResponseProperty(\"CanBeUsedByBusiness\");\n    this.baseSeats = this.getResponseProperty(\"BaseSeats\");\n    this.baseStorageGb = this.getResponseProperty(\"BaseStorageGb\");\n    this.maxCollections = this.getResponseProperty(\"MaxCollections\");\n    this.maxUsers = this.getResponseProperty(\"MaxUsers\");\n    this.hasAdditionalSeatsOption = this.getResponseProperty(\"HasAdditionalSeatsOption\");\n    this.maxAdditionalSeats = this.getResponseProperty(\"MaxAdditionalSeats\");\n    this.hasAdditionalStorageOption = this.getResponseProperty(\"HasAdditionalStorageOption\");\n    this.maxAdditionalStorage = this.getResponseProperty(\"MaxAdditionalStorage\");\n    this.hasPremiumAccessOption = this.getResponseProperty(\"HasPremiumAccessOption\");\n    this.trialPeriodDays = this.getResponseProperty(\"TrialPeriodDays\");\n    this.hasSelfHost = this.getResponseProperty(\"HasSelfHost\");\n    this.hasPolicies = this.getResponseProperty(\"HasPolicies\");\n    this.hasGroups = this.getResponseProperty(\"HasGroups\");\n    this.hasDirectory = this.getResponseProperty(\"HasDirectory\");\n    this.hasEvents = this.getResponseProperty(\"HasEvents\");\n    this.hasTotp = this.getResponseProperty(\"HasTotp\");\n    this.has2fa = this.getResponseProperty(\"Has2fa\");\n    this.hasApi = this.getResponseProperty(\"HasApi\");\n    this.hasSso = this.getResponseProperty(\"HasSso\");\n    this.hasResetPassword = this.getResponseProperty(\"HasResetPassword\");\n    this.usersGetPremium = this.getResponseProperty(\"UsersGetPremium\");\n    this.upgradeSortOrder = this.getResponseProperty(\"UpgradeSortOrder\");\n    this.displaySortOrder = this.getResponseProperty(\"SortOrder\");\n    this.legacyYear = this.getResponseProperty(\"LegacyYear\");\n    this.disabled = this.getResponseProperty(\"Disabled\");\n    this.stripePlanId = this.getResponseProperty(\"StripePlanId\");\n    this.stripeSeatPlanId = this.getResponseProperty(\"StripeSeatPlanId\");\n    this.stripeStoragePlanId = this.getResponseProperty(\"StripeStoragePlanId\");\n    this.stripePremiumAccessPlanId = this.getResponseProperty(\"StripePremiumAccessPlanId\");\n    this.basePrice = this.getResponseProperty(\"BasePrice\");\n    this.seatPrice = this.getResponseProperty(\"SeatPrice\");\n    this.additionalStoragePricePerGb = this.getResponseProperty(\"AdditionalStoragePricePerGb\");\n    this.premiumAccessOptionPrice = this.getResponseProperty(\"PremiumAccessOptionPrice\");\n  }\n}\n","import { PolicyType } from \"../../enums/policyType\";\n\nimport { BaseResponse } from \"./base.response\";\n\nexport class PolicyResponse extends BaseResponse {\n  id: string;\n  organizationId: string;\n  type: PolicyType;\n  data: any;\n  enabled: boolean;\n\n  constructor(response: any) {\n    super(response);\n    this.id = this.getResponseProperty(\"Id\");\n    this.organizationId = this.getResponseProperty(\"OrganizationId\");\n    this.type = this.getResponseProperty(\"Type\");\n    this.data = this.getResponseProperty(\"Data\");\n    this.enabled = this.getResponseProperty(\"Enabled\");\n  }\n}\n","import { KdfType } from \"../../enums/kdfType\";\n\nimport { BaseResponse } from \"./base.response\";\n\nexport class PreloginResponse extends BaseResponse {\n  kdf: KdfType;\n  kdfIterations: number;\n  kdfMemory?: number;\n  kdfParallelism?: number;\n\n  constructor(response: any) {\n    super(response);\n    this.kdf = this.getResponseProperty(\"Kdf\");\n    this.kdfIterations = this.getResponseProperty(\"KdfIterations\");\n    this.kdfMemory = this.getResponseProperty(\"KdfMemory\");\n    this.kdfParallelism = this.getResponseProperty(\"KdfParallelism\");\n  }\n}\n","import { BaseResponse } from \"../base.response\";\n\nexport class ProviderOrganizationResponse extends BaseResponse {\n  id: string;\n  providerId: string;\n  organizationId: string;\n  key: string;\n  settings: string;\n  creationDate: string;\n  revisionDate: string;\n  userCount: number;\n  seats?: number;\n  plan?: string;\n\n  constructor(response: any) {\n    super(response);\n    this.id = this.getResponseProperty(\"Id\");\n    this.providerId = this.getResponseProperty(\"ProviderId\");\n    this.organizationId = this.getResponseProperty(\"OrganizationId\");\n    this.key = this.getResponseProperty(\"Key\");\n    this.settings = this.getResponseProperty(\"Settings\");\n    this.creationDate = this.getResponseProperty(\"CreationDate\");\n    this.revisionDate = this.getResponseProperty(\"RevisionDate\");\n    this.userCount = this.getResponseProperty(\"UserCount\");\n    this.seats = this.getResponseProperty(\"Seats\");\n    this.plan = this.getResponseProperty(\"Plan\");\n  }\n}\n\nexport class ProviderOrganizationOrganizationDetailsResponse extends ProviderOrganizationResponse {\n  organizationName: string;\n\n  constructor(response: any) {\n    super(response);\n    this.organizationName = this.getResponseProperty(\"OrganizationName\");\n  }\n}\n","import { BaseResponse } from \"../../../models/response/base.response\";\n\nexport class OrganizationUserBulkPublicKeyResponse extends BaseResponse {\n  id: string;\n  userId: string;\n  key: string;\n\n  constructor(response: any) {\n    super(response);\n    this.id = this.getResponseProperty(\"Id\");\n    this.userId = this.getResponseProperty(\"UserId\");\n    this.key = this.getResponseProperty(\"Key\");\n  }\n}\n","import { OrganizationUserBulkPublicKeyResponse } from \"../../../abstractions/organization-user/responses\";\n\nexport class ProviderUserBulkPublicKeyResponse extends OrganizationUserBulkPublicKeyResponse {}\n","import { BaseResponse } from \"../base.response\";\n\nexport class ProviderUserBulkResponse extends BaseResponse {\n  id: string;\n  error: string;\n\n  constructor(response: any) {\n    super(response);\n    this.id = this.getResponseProperty(\"Id\");\n    this.error = this.getResponseProperty(\"Error\");\n  }\n}\n","import { ProviderUserStatusType } from \"../../../enums/providerUserStatusType\";\nimport { ProviderUserType } from \"../../../enums/providerUserType\";\nimport { PermissionsApi } from \"../../api/permissions.api\";\nimport { BaseResponse } from \"../base.response\";\n\nexport class ProviderUserResponse extends BaseResponse {\n  id: string;\n  userId: string;\n  type: ProviderUserType;\n  status: ProviderUserStatusType;\n  permissions: PermissionsApi;\n\n  constructor(response: any) {\n    super(response);\n    this.id = this.getResponseProperty(\"Id\");\n    this.userId = this.getResponseProperty(\"UserId\");\n    this.type = this.getResponseProperty(\"Type\");\n    this.status = this.getResponseProperty(\"Status\");\n    this.permissions = new PermissionsApi(this.getResponseProperty(\"Permissions\"));\n  }\n}\n\nexport class ProviderUserUserDetailsResponse extends ProviderUserResponse {\n  name: string;\n  email: string;\n\n  constructor(response: any) {\n    super(response);\n    this.name = this.getResponseProperty(\"Name\");\n    this.email = this.getResponseProperty(\"Email\");\n  }\n}\n","import { BaseResponse } from \"../base.response\";\n\nexport class ProviderResponse extends BaseResponse {\n  id: string;\n  name: string;\n  businessName: string;\n  billingEmail: string;\n\n  constructor(response: any) {\n    super(response);\n    this.id = this.getResponseProperty(\"Id\");\n    this.name = this.getResponseProperty(\"Name\");\n    this.businessName = this.getResponseProperty(\"BusinessName\");\n    this.billingEmail = this.getResponseProperty(\"BillingEmail\");\n  }\n}\n","import { BaseResponse } from \"../response/base.response\";\n\nexport class SendFileApi extends BaseResponse {\n  id: string;\n  fileName: string;\n  size: string;\n  sizeName: string;\n\n  constructor(data: any = null) {\n    super(data);\n    if (data == null) {\n      return;\n    }\n    this.id = this.getResponseProperty(\"Id\");\n    this.fileName = this.getResponseProperty(\"FileName\");\n    this.size = this.getResponseProperty(\"Size\");\n    this.sizeName = this.getResponseProperty(\"SizeName\");\n  }\n}\n","import { BaseResponse } from \"../response/base.response\";\n\nexport class SendTextApi extends BaseResponse {\n  text: string;\n  hidden: boolean;\n\n  constructor(data: any = null) {\n    super(data);\n    if (data == null) {\n      return;\n    }\n    this.text = this.getResponseProperty(\"Text\");\n    this.hidden = this.getResponseProperty(\"Hidden\") || false;\n  }\n}\n","import { SendType } from \"../../enums/sendType\";\nimport { SendFileApi } from \"../api/send-file.api\";\nimport { SendTextApi } from \"../api/send-text.api\";\n\nimport { BaseResponse } from \"./base.response\";\n\nexport class SendAccessResponse extends BaseResponse {\n  id: string;\n  type: SendType;\n  name: string;\n  file: SendFileApi;\n  text: SendTextApi;\n  expirationDate: Date;\n  creatorIdentifier: string;\n\n  constructor(response: any) {\n    super(response);\n    this.id = this.getResponseProperty(\"Id\");\n    this.type = this.getResponseProperty(\"Type\");\n    this.name = this.getResponseProperty(\"Name\");\n\n    const text = this.getResponseProperty(\"Text\");\n    if (text != null) {\n      this.text = new SendTextApi(text);\n    }\n\n    const file = this.getResponseProperty(\"File\");\n    if (file != null) {\n      this.file = new SendFileApi(file);\n    }\n\n    this.expirationDate = this.getResponseProperty(\"ExpirationDate\");\n    this.creatorIdentifier = this.getResponseProperty(\"CreatorIdentifier\");\n  }\n}\n","import { BaseResponse } from \"./base.response\";\n\nexport class SendFileDownloadDataResponse extends BaseResponse {\n  id: string = null;\n  url: string = null;\n  constructor(response: any) {\n    super(response);\n    this.id = this.getResponseProperty(\"Id\");\n    this.url = this.getResponseProperty(\"Url\");\n  }\n}\n","import { SendType } from \"../../enums/sendType\";\nimport { SendFileApi } from \"../api/send-file.api\";\nimport { SendTextApi } from \"../api/send-text.api\";\n\nimport { BaseResponse } from \"./base.response\";\n\nexport class SendResponse extends BaseResponse {\n  id: string;\n  accessId: string;\n  type: SendType;\n  name: string;\n  notes: string;\n  file: SendFileApi;\n  text: SendTextApi;\n  key: string;\n  maxAccessCount?: number;\n  accessCount: number;\n  revisionDate: string;\n  expirationDate: string;\n  deletionDate: string;\n  password: string;\n  disable: boolean;\n  hideEmail: boolean;\n\n  constructor(response: any) {\n    super(response);\n    this.id = this.getResponseProperty(\"Id\");\n    this.accessId = this.getResponseProperty(\"AccessId\");\n    this.type = this.getResponseProperty(\"Type\");\n    this.name = this.getResponseProperty(\"Name\");\n    this.notes = this.getResponseProperty(\"Notes\");\n    this.key = this.getResponseProperty(\"Key\");\n    this.maxAccessCount = this.getResponseProperty(\"MaxAccessCount\");\n    this.accessCount = this.getResponseProperty(\"AccessCount\");\n    this.revisionDate = this.getResponseProperty(\"RevisionDate\");\n    this.expirationDate = this.getResponseProperty(\"ExpirationDate\");\n    this.deletionDate = this.getResponseProperty(\"DeletionDate\");\n    this.password = this.getResponseProperty(\"Password\");\n    this.disable = this.getResponseProperty(\"Disabled\") || false;\n    this.hideEmail = this.getResponseProperty(\"HideEmail\") || false;\n\n    const text = this.getResponseProperty(\"Text\");\n    if (text != null) {\n      this.text = new SendTextApi(text);\n    }\n\n    const file = this.getResponseProperty(\"File\");\n    if (file != null) {\n      this.file = new SendFileApi(file);\n    }\n  }\n}\n","import { FileUploadType } from \"../../enums/fileUploadType\";\n\nimport { BaseResponse } from \"./base.response\";\nimport { SendResponse } from \"./send.response\";\n\nexport class SendFileUploadDataResponse extends BaseResponse {\n  fileUploadType: FileUploadType;\n  sendResponse: SendResponse;\n  url: string = null;\n  constructor(response: any) {\n    super(response);\n    this.fileUploadType = this.getResponseProperty(\"FileUploadType\");\n    const sendResponse = this.getResponseProperty(\"SendResponse\");\n    this.sendResponse = sendResponse == null ? null : new SendResponse(sendResponse);\n    this.url = this.getResponseProperty(\"Url\");\n  }\n}\n","import { BaseResponse } from \"./base.response\";\n\nexport class SsoPreValidateResponse extends BaseResponse {\n  token: string;\n\n  constructor(response: any) {\n    super(response);\n    this.token = this.getResponseProperty(\"Token\");\n  }\n}\n","import { BaseResponse } from \"./base.response\";\n\nexport class SubscriptionResponse extends BaseResponse {\n  storageName: string;\n  storageGb: number;\n  maxStorageGb: number;\n  subscription: BillingSubscriptionResponse;\n  upcomingInvoice: BillingSubscriptionUpcomingInvoiceResponse;\n  license: any;\n  expiration: string;\n  usingInAppPurchase: boolean;\n\n  constructor(response: any) {\n    super(response);\n    this.storageName = this.getResponseProperty(\"StorageName\");\n    this.storageGb = this.getResponseProperty(\"StorageGb\");\n    this.maxStorageGb = this.getResponseProperty(\"MaxStorageGb\");\n    this.license = this.getResponseProperty(\"License\");\n    this.expiration = this.getResponseProperty(\"Expiration\");\n    this.usingInAppPurchase = this.getResponseProperty(\"UsingInAppPurchase\");\n    const subscription = this.getResponseProperty(\"Subscription\");\n    const upcomingInvoice = this.getResponseProperty(\"UpcomingInvoice\");\n    this.subscription = subscription == null ? null : new BillingSubscriptionResponse(subscription);\n    this.upcomingInvoice =\n      upcomingInvoice == null\n        ? null\n        : new BillingSubscriptionUpcomingInvoiceResponse(upcomingInvoice);\n  }\n}\n\nexport class BillingSubscriptionResponse extends BaseResponse {\n  trialStartDate: string;\n  trialEndDate: string;\n  periodStartDate: string;\n  periodEndDate: string;\n  cancelledDate: string;\n  cancelAtEndDate: boolean;\n  status: string;\n  cancelled: boolean;\n  items: BillingSubscriptionItemResponse[] = [];\n\n  constructor(response: any) {\n    super(response);\n    this.trialEndDate = this.getResponseProperty(\"TrialStartDate\");\n    this.trialEndDate = this.getResponseProperty(\"TrialEndDate\");\n    this.periodStartDate = this.getResponseProperty(\"PeriodStartDate\");\n    this.periodEndDate = this.getResponseProperty(\"PeriodEndDate\");\n    this.cancelledDate = this.getResponseProperty(\"CancelledDate\");\n    this.cancelAtEndDate = this.getResponseProperty(\"CancelAtEndDate\");\n    this.status = this.getResponseProperty(\"Status\");\n    this.cancelled = this.getResponseProperty(\"Cancelled\");\n    const items = this.getResponseProperty(\"Items\");\n    if (items != null) {\n      this.items = items.map((i: any) => new BillingSubscriptionItemResponse(i));\n    }\n  }\n}\n\nexport class BillingSubscriptionItemResponse extends BaseResponse {\n  name: string;\n  amount: number;\n  quantity: number;\n  interval: string;\n  sponsoredSubscriptionItem: boolean;\n\n  constructor(response: any) {\n    super(response);\n    this.name = this.getResponseProperty(\"Name\");\n    this.amount = this.getResponseProperty(\"Amount\");\n    this.quantity = this.getResponseProperty(\"Quantity\");\n    this.interval = this.getResponseProperty(\"Interval\");\n    this.sponsoredSubscriptionItem = this.getResponseProperty(\"SponsoredSubscriptionItem\");\n  }\n}\n\nexport class BillingSubscriptionUpcomingInvoiceResponse extends BaseResponse {\n  date: string;\n  amount: number;\n\n  constructor(response: any) {\n    super(response);\n    this.date = this.getResponseProperty(\"Date\");\n    this.amount = this.getResponseProperty(\"Amount\");\n  }\n}\n","import { BaseResponse } from \"./base.response\";\n\nexport class TaxInfoResponse extends BaseResponse {\n  taxId: string;\n  taxIdType: string;\n  line1: string;\n  line2: string;\n  city: string;\n  state: string;\n  country: string;\n  postalCode: string;\n\n  constructor(response: any) {\n    super(response);\n    this.taxId = this.getResponseProperty(\"TaxIdNumber\");\n    this.taxIdType = this.getResponseProperty(\"TaxIdType\");\n    this.line1 = this.getResponseProperty(\"Line1\");\n    this.line2 = this.getResponseProperty(\"Line2\");\n    this.city = this.getResponseProperty(\"City\");\n    this.state = this.getResponseProperty(\"State\");\n    this.postalCode = this.getResponseProperty(\"PostalCode\");\n    this.country = this.getResponseProperty(\"Country\");\n  }\n}\n","import { BaseResponse } from \"./base.response\";\n\nexport class TaxRateResponse extends BaseResponse {\n  id: string;\n  country: string;\n  state: string;\n  postalCode: string;\n  rate: number;\n\n  constructor(response: any) {\n    super(response);\n    this.id = this.getResponseProperty(\"Id\");\n    this.country = this.getResponseProperty(\"Country\");\n    this.state = this.getResponseProperty(\"State\");\n    this.postalCode = this.getResponseProperty(\"PostalCode\");\n    this.rate = this.getResponseProperty(\"Rate\");\n  }\n}\n","import { BaseResponse } from \"./base.response\";\n\nexport class TwoFactorAuthenticatorResponse extends BaseResponse {\n  enabled: boolean;\n  key: string;\n\n  constructor(response: any) {\n    super(response);\n    this.enabled = this.getResponseProperty(\"Enabled\");\n    this.key = this.getResponseProperty(\"Key\");\n  }\n}\n","import { BaseResponse } from \"./base.response\";\n\nexport class TwoFactorDuoResponse extends BaseResponse {\n  enabled: boolean;\n  host: string;\n  secretKey: string;\n  integrationKey: string;\n\n  constructor(response: any) {\n    super(response);\n    this.enabled = this.getResponseProperty(\"Enabled\");\n    this.host = this.getResponseProperty(\"Host\");\n    this.secretKey = this.getResponseProperty(\"SecretKey\");\n    this.integrationKey = this.getResponseProperty(\"IntegrationKey\");\n  }\n}\n","import { BaseResponse } from \"./base.response\";\n\nexport class TwoFactorEmailResponse extends BaseResponse {\n  enabled: boolean;\n  email: string;\n\n  constructor(response: any) {\n    super(response);\n    this.enabled = this.getResponseProperty(\"Enabled\");\n    this.email = this.getResponseProperty(\"Email\");\n  }\n}\n","import { TwoFactorProviderType } from \"../../enums/twoFactorProviderType\";\n\nimport { BaseResponse } from \"./base.response\";\n\nexport class TwoFactorProviderResponse extends BaseResponse {\n  enabled: boolean;\n  type: TwoFactorProviderType;\n\n  constructor(response: any) {\n    super(response);\n    this.enabled = this.getResponseProperty(\"Enabled\");\n    this.type = this.getResponseProperty(\"Type\");\n  }\n}\n","import { BaseResponse } from \"./base.response\";\n\nexport class TwoFactorRecoverResponse extends BaseResponse {\n  code: string;\n\n  constructor(response: any) {\n    super(response);\n    this.code = this.getResponseProperty(\"Code\");\n  }\n}\n","import { Utils } from \"../../misc/utils\";\n\nimport { BaseResponse } from \"./base.response\";\n\nexport class TwoFactorWebAuthnResponse extends BaseResponse {\n  enabled: boolean;\n  keys: KeyResponse[];\n\n  constructor(response: any) {\n    super(response);\n    this.enabled = this.getResponseProperty(\"Enabled\");\n    const keys = this.getResponseProperty(\"Keys\");\n    this.keys = keys == null ? null : keys.map((k: any) => new KeyResponse(k));\n  }\n}\n\nexport class KeyResponse extends BaseResponse {\n  name: string;\n  id: number;\n  migrated: boolean;\n\n  constructor(response: any) {\n    super(response);\n    this.name = this.getResponseProperty(\"Name\");\n    this.id = this.getResponseProperty(\"Id\");\n    this.migrated = this.getResponseProperty(\"Migrated\");\n  }\n}\n\nexport class ChallengeResponse extends BaseResponse implements PublicKeyCredentialCreationOptions {\n  attestation?: AttestationConveyancePreference;\n  authenticatorSelection?: AuthenticatorSelectionCriteria;\n  challenge: BufferSource;\n  excludeCredentials?: PublicKeyCredentialDescriptor[];\n  extensions?: AuthenticationExtensionsClientInputs;\n  pubKeyCredParams: PublicKeyCredentialParameters[];\n  rp: PublicKeyCredentialRpEntity;\n  timeout?: number;\n  user: PublicKeyCredentialUserEntity;\n\n  constructor(response: any) {\n    super(response);\n    this.attestation = this.getResponseProperty(\"attestation\");\n    this.authenticatorSelection = this.getResponseProperty(\"authenticatorSelection\");\n    this.challenge = Utils.fromUrlB64ToArray(this.getResponseProperty(\"challenge\"));\n    this.excludeCredentials = this.getResponseProperty(\"excludeCredentials\").map((c: any) => {\n      c.id = Utils.fromUrlB64ToArray(c.id).buffer;\n      return c;\n    });\n    this.extensions = this.getResponseProperty(\"extensions\");\n    this.pubKeyCredParams = this.getResponseProperty(\"pubKeyCredParams\");\n    this.rp = this.getResponseProperty(\"rp\");\n    this.timeout = this.getResponseProperty(\"timeout\");\n\n    const user = this.getResponseProperty(\"user\");\n    user.id = Utils.fromUrlB64ToArray(user.id);\n\n    this.user = user;\n  }\n}\n","import { BaseResponse } from \"./base.response\";\n\nexport class TwoFactorYubiKeyResponse extends BaseResponse {\n  enabled: boolean;\n  key1: string;\n  key2: string;\n  key3: string;\n  key4: string;\n  key5: string;\n  nfc: boolean;\n\n  constructor(response: any) {\n    super(response);\n    this.enabled = this.getResponseProperty(\"Enabled\");\n    this.key1 = this.getResponseProperty(\"Key1\");\n    this.key2 = this.getResponseProperty(\"Key2\");\n    this.key3 = this.getResponseProperty(\"Key3\");\n    this.key4 = this.getResponseProperty(\"Key4\");\n    this.key5 = this.getResponseProperty(\"Key5\");\n    this.nfc = this.getResponseProperty(\"Nfc\");\n  }\n}\n","import { BaseResponse } from \"./base.response\";\n\nexport class UserKeyResponse extends BaseResponse {\n  userId: string;\n  publicKey: string;\n\n  constructor(response: any) {\n    super(response);\n    this.userId = this.getResponseProperty(\"UserId\");\n    this.publicKey = this.getResponseProperty(\"PublicKey\");\n  }\n}\n","import { FileUploadType } from \"../../../enums/fileUploadType\";\nimport { BaseResponse } from \"../../../models/response/base.response\";\n\nimport { CipherResponse } from \"./cipher.response\";\n\nexport class AttachmentUploadDataResponse extends BaseResponse {\n  attachmentId: string;\n  fileUploadType: FileUploadType;\n  cipherResponse: CipherResponse;\n  cipherMiniResponse: CipherResponse;\n  url: string = null;\n  constructor(response: any) {\n    super(response);\n    this.attachmentId = this.getResponseProperty(\"AttachmentId\");\n    this.fileUploadType = this.getResponseProperty(\"FileUploadType\");\n    const cipherResponse = this.getResponseProperty(\"CipherResponse\");\n    const cipherMiniResponse = this.getResponseProperty(\"CipherMiniResponse\");\n    this.cipherResponse = cipherResponse == null ? null : new CipherResponse(cipherResponse);\n    this.cipherMiniResponse =\n      cipherMiniResponse == null ? null : new CipherResponse(cipherMiniResponse);\n    this.url = this.getResponseProperty(\"Url\");\n  }\n}\n","import { BaseResponse } from \"../../../models/response/base.response\";\n\nexport class FolderResponse extends BaseResponse {\n  id: string;\n  name: string;\n  revisionDate: string;\n\n  constructor(response: any) {\n    super(response);\n    this.id = this.getResponseProperty(\"Id\");\n    this.name = this.getResponseProperty(\"Name\");\n    this.revisionDate = this.getResponseProperty(\"RevisionDate\");\n  }\n}\n","import { BaseResponse } from \"../../../models/response/base.response\";\nimport { CollectionDetailsResponse } from \"../../../models/response/collection.response\";\nimport { DomainsResponse } from \"../../../models/response/domains.response\";\nimport { PolicyResponse } from \"../../../models/response/policy.response\";\nimport { ProfileResponse } from \"../../../models/response/profile.response\";\nimport { SendResponse } from \"../../../models/response/send.response\";\n\nimport { CipherResponse } from \"./cipher.response\";\nimport { FolderResponse } from \"./folder.response\";\n\nexport class SyncResponse extends BaseResponse {\n  profile?: ProfileResponse;\n  folders: FolderResponse[] = [];\n  collections: CollectionDetailsResponse[] = [];\n  ciphers: CipherResponse[] = [];\n  domains?: DomainsResponse;\n  policies?: PolicyResponse[] = [];\n  sends: SendResponse[] = [];\n\n  constructor(response: any) {\n    super(response);\n\n    const profile = this.getResponseProperty(\"Profile\");\n    if (profile != null) {\n      this.profile = new ProfileResponse(profile);\n    }\n\n    const folders = this.getResponseProperty(\"Folders\");\n    if (folders != null) {\n      this.folders = folders.map((f: any) => new FolderResponse(f));\n    }\n\n    const collections = this.getResponseProperty(\"Collections\");\n    if (collections != null) {\n      this.collections = collections.map((c: any) => new CollectionDetailsResponse(c));\n    }\n\n    const ciphers = this.getResponseProperty(\"Ciphers\");\n    if (ciphers != null) {\n      this.ciphers = ciphers.map((c: any) => new CipherResponse(c));\n    }\n\n    const domains = this.getResponseProperty(\"Domains\");\n    if (domains != null) {\n      this.domains = new DomainsResponse(domains);\n    }\n\n    const policies = this.getResponseProperty(\"Policies\");\n    if (policies != null) {\n      this.policies = policies.map((p: any) => new PolicyResponse(p));\n    }\n\n    const sends = this.getResponseProperty(\"Sends\");\n    if (sends != null) {\n      this.sends = sends.map((s: any) => new SendResponse(s));\n    }\n  }\n}\n","export enum HtmlStorageLocation {\n  Local = \"local\",\n  Memory = \"memory\",\n  Session = \"session\",\n}\n","import { ApiService as ApiServiceAbstraction } from \"../abstractions/api.service\";\nimport { AppIdService } from \"../abstractions/appId.service\";\nimport { EnvironmentService } from \"../abstractions/environment.service\";\nimport { PlatformUtilsService } from \"../abstractions/platformUtils.service\";\nimport { TokenService } from \"../abstractions/token.service\";\nimport { DeviceType } from \"../enums/deviceType\";\nimport { OrganizationConnectionType } from \"../enums/organizationConnectionType\";\nimport { Utils } from \"../misc/utils\";\nimport { SetKeyConnectorKeyRequest } from \"../models/request/account/set-key-connector-key.request\";\nimport { BitPayInvoiceRequest } from \"../models/request/bit-pay-invoice.request\";\nimport { CollectionBulkDeleteRequest } from \"../models/request/collection-bulk-delete.request\";\nimport { CollectionRequest } from \"../models/request/collection.request\";\nimport { DeleteRecoverRequest } from \"../models/request/delete-recover.request\";\nimport { DeviceVerificationRequest } from \"../models/request/device-verification.request\";\nimport { DeviceRequest } from \"../models/request/device.request\";\nimport { EmailTokenRequest } from \"../models/request/email-token.request\";\nimport { EmailRequest } from \"../models/request/email.request\";\nimport { EmergencyAccessAcceptRequest } from \"../models/request/emergency-access-accept.request\";\nimport { EmergencyAccessConfirmRequest } from \"../models/request/emergency-access-confirm.request\";\nimport { EmergencyAccessInviteRequest } from \"../models/request/emergency-access-invite.request\";\nimport { EmergencyAccessPasswordRequest } from \"../models/request/emergency-access-password.request\";\nimport { EmergencyAccessUpdateRequest } from \"../models/request/emergency-access-update.request\";\nimport { EventRequest } from \"../models/request/event.request\";\nimport { IapCheckRequest } from \"../models/request/iap-check.request\";\nimport { PasswordTokenRequest } from \"../models/request/identity-token/password-token.request\";\nimport { SsoTokenRequest } from \"../models/request/identity-token/sso-token.request\";\nimport { TokenTwoFactorRequest } from \"../models/request/identity-token/token-two-factor.request\";\nimport { UserApiTokenRequest } from \"../models/request/identity-token/user-api-token.request\";\nimport { KdfRequest } from \"../models/request/kdf.request\";\nimport { KeyConnectorUserKeyRequest } from \"../models/request/key-connector-user-key.request\";\nimport { KeysRequest } from \"../models/request/keys.request\";\nimport { OrganizationConnectionRequest } from \"../models/request/organization-connection.request\";\nimport { OrganizationImportRequest } from \"../models/request/organization-import.request\";\nimport { OrganizationSponsorshipCreateRequest } from \"../models/request/organization/organization-sponsorship-create.request\";\nimport { OrganizationSponsorshipRedeemRequest } from \"../models/request/organization/organization-sponsorship-redeem.request\";\nimport { PasswordHintRequest } from \"../models/request/password-hint.request\";\nimport { PasswordRequest } from \"../models/request/password.request\";\nimport { PasswordlessAuthRequest } from \"../models/request/passwordless-auth.request\";\nimport { PasswordlessCreateAuthRequest } from \"../models/request/passwordless-create-auth.request\";\nimport { PaymentRequest } from \"../models/request/payment.request\";\nimport { PreloginRequest } from \"../models/request/prelogin.request\";\nimport { ProviderAddOrganizationRequest } from \"../models/request/provider/provider-add-organization.request\";\nimport { ProviderOrganizationCreateRequest } from \"../models/request/provider/provider-organization-create.request\";\nimport { ProviderSetupRequest } from \"../models/request/provider/provider-setup.request\";\nimport { ProviderUpdateRequest } from \"../models/request/provider/provider-update.request\";\nimport { ProviderUserAcceptRequest } from \"../models/request/provider/provider-user-accept.request\";\nimport { ProviderUserBulkConfirmRequest } from \"../models/request/provider/provider-user-bulk-confirm.request\";\nimport { ProviderUserBulkRequest } from \"../models/request/provider/provider-user-bulk.request\";\nimport { ProviderUserConfirmRequest } from \"../models/request/provider/provider-user-confirm.request\";\nimport { ProviderUserInviteRequest } from \"../models/request/provider/provider-user-invite.request\";\nimport { ProviderUserUpdateRequest } from \"../models/request/provider/provider-user-update.request\";\nimport { RegisterRequest } from \"../models/request/register.request\";\nimport { SecretVerificationRequest } from \"../models/request/secret-verification.request\";\nimport { SelectionReadOnlyRequest } from \"../models/request/selection-read-only.request\";\nimport { SendAccessRequest } from \"../models/request/send-access.request\";\nimport { SendRequest } from \"../models/request/send.request\";\nimport { SetPasswordRequest } from \"../models/request/set-password.request\";\nimport { StorageRequest } from \"../models/request/storage.request\";\nimport { TaxInfoUpdateRequest } from \"../models/request/tax-info-update.request\";\nimport { TwoFactorEmailRequest } from \"../models/request/two-factor-email.request\";\nimport { TwoFactorProviderRequest } from \"../models/request/two-factor-provider.request\";\nimport { TwoFactorRecoveryRequest } from \"../models/request/two-factor-recovery.request\";\nimport { UpdateAvatarRequest } from \"../models/request/update-avatar.request\";\nimport { UpdateDomainsRequest } from \"../models/request/update-domains.request\";\nimport { UpdateKeyRequest } from \"../models/request/update-key.request\";\nimport { UpdateProfileRequest } from \"../models/request/update-profile.request\";\nimport { UpdateTempPasswordRequest } from \"../models/request/update-temp-password.request\";\nimport { UpdateTwoFactorAuthenticatorRequest } from \"../models/request/update-two-factor-authenticator.request\";\nimport { UpdateTwoFactorDuoRequest } from \"../models/request/update-two-factor-duo.request\";\nimport { UpdateTwoFactorEmailRequest } from \"../models/request/update-two-factor-email.request\";\nimport { UpdateTwoFactorWebAuthnDeleteRequest } from \"../models/request/update-two-factor-web-authn-delete.request\";\nimport { UpdateTwoFactorWebAuthnRequest } from \"../models/request/update-two-factor-web-authn.request\";\nimport { UpdateTwoFactorYubioOtpRequest } from \"../models/request/update-two-factor-yubio-otp.request\";\nimport { VerifyDeleteRecoverRequest } from \"../models/request/verify-delete-recover.request\";\nimport { VerifyEmailRequest } from \"../models/request/verify-email.request\";\nimport { ApiKeyResponse } from \"../models/response/api-key.response\";\nimport { AuthRequestResponse } from \"../models/response/auth-request.response\";\nimport { RegisterResponse } from \"../models/response/authentication/register.response\";\nimport { BillingHistoryResponse } from \"../models/response/billing-history.response\";\nimport { BillingPaymentResponse } from \"../models/response/billing-payment.response\";\nimport { BreachAccountResponse } from \"../models/response/breach-account.response\";\nimport {\n  CollectionAccessDetailsResponse,\n  CollectionResponse,\n} from \"../models/response/collection.response\";\nimport { DeviceVerificationResponse } from \"../models/response/device-verification.response\";\nimport { DomainsResponse } from \"../models/response/domains.response\";\nimport {\n  EmergencyAccessGranteeDetailsResponse,\n  EmergencyAccessGrantorDetailsResponse,\n  EmergencyAccessTakeoverResponse,\n  EmergencyAccessViewResponse,\n} from \"../models/response/emergency-access.response\";\nimport { ErrorResponse } from \"../models/response/error.response\";\nimport { EventResponse } from \"../models/response/event.response\";\nimport { IdentityCaptchaResponse } from \"../models/response/identity-captcha.response\";\nimport { IdentityTokenResponse } from \"../models/response/identity-token.response\";\nimport { IdentityTwoFactorResponse } from \"../models/response/identity-two-factor.response\";\nimport { KeyConnectorUserKeyResponse } from \"../models/response/key-connector-user-key.response\";\nimport { ListResponse } from \"../models/response/list.response\";\nimport {\n  OrganizationConnectionConfigApis,\n  OrganizationConnectionResponse,\n} from \"../models/response/organization-connection.response\";\nimport { OrganizationExportResponse } from \"../models/response/organization-export.response\";\nimport { OrganizationSponsorshipSyncStatusResponse } from \"../models/response/organization-sponsorship-sync-status.response\";\nimport { PaymentResponse } from \"../models/response/payment.response\";\nimport { PlanResponse } from \"../models/response/plan.response\";\nimport { PolicyResponse } from \"../models/response/policy.response\";\nimport { PreloginResponse } from \"../models/response/prelogin.response\";\nimport { ProfileResponse } from \"../models/response/profile.response\";\nimport {\n  ProviderOrganizationOrganizationDetailsResponse,\n  ProviderOrganizationResponse,\n} from \"../models/response/provider/provider-organization.response\";\nimport { ProviderUserBulkPublicKeyResponse } from \"../models/response/provider/provider-user-bulk-public-key.response\";\nimport { ProviderUserBulkResponse } from \"../models/response/provider/provider-user-bulk.response\";\nimport {\n  ProviderUserResponse,\n  ProviderUserUserDetailsResponse,\n} from \"../models/response/provider/provider-user.response\";\nimport { ProviderResponse } from \"../models/response/provider/provider.response\";\nimport { SelectionReadOnlyResponse } from \"../models/response/selection-read-only.response\";\nimport { SendAccessResponse } from \"../models/response/send-access.response\";\nimport { SendFileDownloadDataResponse } from \"../models/response/send-file-download-data.response\";\nimport { SendFileUploadDataResponse } from \"../models/response/send-file-upload-data.response\";\nimport { SendResponse } from \"../models/response/send.response\";\nimport { SsoPreValidateResponse } from \"../models/response/sso-pre-validate.response\";\nimport { SubscriptionResponse } from \"../models/response/subscription.response\";\nimport { TaxInfoResponse } from \"../models/response/tax-info.response\";\nimport { TaxRateResponse } from \"../models/response/tax-rate.response\";\nimport { TwoFactorAuthenticatorResponse } from \"../models/response/two-factor-authenticator.response\";\nimport { TwoFactorDuoResponse } from \"../models/response/two-factor-duo.response\";\nimport { TwoFactorEmailResponse } from \"../models/response/two-factor-email.response\";\nimport { TwoFactorProviderResponse } from \"../models/response/two-factor-provider.response\";\nimport { TwoFactorRecoverResponse } from \"../models/response/two-factor-recover.response\";\nimport {\n  ChallengeResponse,\n  TwoFactorWebAuthnResponse,\n} from \"../models/response/two-factor-web-authn.response\";\nimport { TwoFactorYubiKeyResponse } from \"../models/response/two-factor-yubi-key.response\";\nimport { UserKeyResponse } from \"../models/response/user-key.response\";\nimport { SendAccessView } from \"../models/view/send-access.view\";\nimport { AttachmentRequest } from \"../vault/models/request/attachment.request\";\nimport { CipherBulkDeleteRequest } from \"../vault/models/request/cipher-bulk-delete.request\";\nimport { CipherBulkMoveRequest } from \"../vault/models/request/cipher-bulk-move.request\";\nimport { CipherBulkShareRequest } from \"../vault/models/request/cipher-bulk-share.request\";\nimport { CipherCollectionsRequest } from \"../vault/models/request/cipher-collections.request\";\nimport { CipherCreateRequest } from \"../vault/models/request/cipher-create.request\";\nimport { CipherPartialRequest } from \"../vault/models/request/cipher-partial.request\";\nimport { CipherShareRequest } from \"../vault/models/request/cipher-share.request\";\nimport { CipherRequest } from \"../vault/models/request/cipher.request\";\nimport { AttachmentUploadDataResponse } from \"../vault/models/response/attachment-upload-data.response\";\nimport { AttachmentResponse } from \"../vault/models/response/attachment.response\";\nimport { CipherResponse } from \"../vault/models/response/cipher.response\";\nimport { SyncResponse } from \"../vault/models/response/sync.response\";\n\n/**\n * @deprecated The `ApiService` class is deprecated and calls should be extracted into individual\n * api services. The `send` method is still allowed to be used within api services. For background\n * of this decision please read https://contributing.bitwarden.com/architecture/adr/refactor-api-service.\n */\nexport class ApiService implements ApiServiceAbstraction {\n  private device: DeviceType;\n  private deviceType: string;\n  private isWebClient = false;\n  private isDesktopClient = false;\n\n  constructor(\n    private tokenService: TokenService,\n    private platformUtilsService: PlatformUtilsService,\n    private environmentService: EnvironmentService,\n    private appIdService: AppIdService,\n    private logoutCallback: (expired: boolean) => Promise<void>,\n    private customUserAgent: string = null\n  ) {\n    this.device = platformUtilsService.getDevice();\n    this.deviceType = this.device.toString();\n    this.isWebClient =\n      this.device === DeviceType.IEBrowser ||\n      this.device === DeviceType.ChromeBrowser ||\n      this.device === DeviceType.EdgeBrowser ||\n      this.device === DeviceType.FirefoxBrowser ||\n      this.device === DeviceType.OperaBrowser ||\n      this.device === DeviceType.SafariBrowser ||\n      this.device === DeviceType.UnknownBrowser ||\n      this.device === DeviceType.VivaldiBrowser;\n    this.isDesktopClient =\n      this.device === DeviceType.WindowsDesktop ||\n      this.device === DeviceType.MacOsDesktop ||\n      this.device === DeviceType.LinuxDesktop;\n  }\n\n  // Auth APIs\n\n  async postIdentityToken(\n    request: UserApiTokenRequest | PasswordTokenRequest | SsoTokenRequest\n  ): Promise<IdentityTokenResponse | IdentityTwoFactorResponse | IdentityCaptchaResponse> {\n    const headers = new Headers({\n      \"Content-Type\": \"application/x-www-form-urlencoded; charset=utf-8\",\n      Accept: \"application/json\",\n      \"Device-Type\": this.deviceType,\n    });\n    if (this.customUserAgent != null) {\n      headers.set(\"User-Agent\", this.customUserAgent);\n    }\n    request.alterIdentityTokenHeaders(headers);\n\n    const identityToken =\n      request instanceof UserApiTokenRequest\n        ? request.toIdentityToken()\n        : request.toIdentityToken(this.platformUtilsService.getClientType());\n\n    const response = await this.fetch(\n      new Request(this.environmentService.getIdentityUrl() + \"/connect/token\", {\n        body: this.qsStringify(identityToken),\n        credentials: this.getCredentials(),\n        cache: \"no-store\",\n        headers: headers,\n        method: \"POST\",\n      })\n    );\n\n    let responseJson: any = null;\n    if (this.isJsonResponse(response)) {\n      responseJson = await response.json();\n    }\n\n    if (responseJson != null) {\n      if (response.status === 200) {\n        return new IdentityTokenResponse(responseJson);\n      } else if (\n        response.status === 400 &&\n        responseJson.TwoFactorProviders2 &&\n        Object.keys(responseJson.TwoFactorProviders2).length\n      ) {\n        await this.tokenService.clearTwoFactorToken();\n        return new IdentityTwoFactorResponse(responseJson);\n      } else if (\n        response.status === 400 &&\n        responseJson.HCaptcha_SiteKey &&\n        Object.keys(responseJson.HCaptcha_SiteKey).length\n      ) {\n        return new IdentityCaptchaResponse(responseJson);\n      }\n    }\n\n    return Promise.reject(new ErrorResponse(responseJson, response.status, true));\n  }\n\n  async refreshIdentityToken(): Promise<any> {\n    try {\n      await this.doAuthRefresh();\n    } catch (e) {\n      return Promise.reject(null);\n    }\n  }\n\n  async postAuthRequest(request: PasswordlessCreateAuthRequest): Promise<AuthRequestResponse> {\n    const r = await this.send(\"POST\", \"/auth-requests/\", request, false, true);\n    return new AuthRequestResponse(r);\n  }\n\n  async getAuthResponse(id: string, accessCode: string): Promise<AuthRequestResponse> {\n    const path = `/auth-requests/${id}/response?code=${accessCode}`;\n    const r = await this.send(\"GET\", path, null, false, true);\n    return new AuthRequestResponse(r);\n  }\n\n  async getAuthRequest(id: string): Promise<AuthRequestResponse> {\n    const path = `/auth-requests/${id}`;\n    const r = await this.send(\"GET\", path, null, true, true);\n    return new AuthRequestResponse(r);\n  }\n\n  async putAuthRequest(id: string, request: PasswordlessAuthRequest): Promise<AuthRequestResponse> {\n    const path = `/auth-requests/${id}`;\n    const r = await this.send(\"PUT\", path, request, true, true);\n    return new AuthRequestResponse(r);\n  }\n\n  async getAuthRequests(): Promise<ListResponse<AuthRequestResponse>> {\n    const path = `/auth-requests/`;\n    const r = await this.send(\"GET\", path, null, true, true);\n    return new ListResponse(r, AuthRequestResponse);\n  }\n\n  async getLastAuthRequest(): Promise<AuthRequestResponse> {\n    const requests = await this.getAuthRequests();\n    const activeRequests = requests.data.filter((m) => !m.isAnswered && !m.isExpired);\n    const lastRequest = activeRequests.sort((a: AuthRequestResponse, b: AuthRequestResponse) =>\n      a.creationDate.localeCompare(b.creationDate)\n    )[activeRequests.length - 1];\n    return lastRequest;\n  }\n\n  // Account APIs\n\n  async getProfile(): Promise<ProfileResponse> {\n    const r = await this.send(\"GET\", \"/accounts/profile\", null, true, true);\n    return new ProfileResponse(r);\n  }\n\n  async getUserSubscription(): Promise<SubscriptionResponse> {\n    const r = await this.send(\"GET\", \"/accounts/subscription\", null, true, true);\n    return new SubscriptionResponse(r);\n  }\n\n  async getTaxInfo(): Promise<TaxInfoResponse> {\n    const r = await this.send(\"GET\", \"/accounts/tax\", null, true, true);\n    return new TaxInfoResponse(r);\n  }\n\n  async putProfile(request: UpdateProfileRequest): Promise<ProfileResponse> {\n    const r = await this.send(\"PUT\", \"/accounts/profile\", request, true, true);\n    return new ProfileResponse(r);\n  }\n\n  async putAvatar(request: UpdateAvatarRequest): Promise<ProfileResponse> {\n    const r = await this.send(\"PUT\", \"/accounts/avatar\", request, true, true);\n    return new ProfileResponse(r);\n  }\n\n  putTaxInfo(request: TaxInfoUpdateRequest): Promise<any> {\n    return this.send(\"PUT\", \"/accounts/tax\", request, true, false);\n  }\n\n  async postPrelogin(request: PreloginRequest): Promise<PreloginResponse> {\n    const r = await this.send(\n      \"POST\",\n      \"/accounts/prelogin\",\n      request,\n      false,\n      true,\n      this.environmentService.getIdentityUrl()\n    );\n    return new PreloginResponse(r);\n  }\n\n  postEmailToken(request: EmailTokenRequest): Promise<any> {\n    return this.send(\"POST\", \"/accounts/email-token\", request, true, false);\n  }\n\n  postEmail(request: EmailRequest): Promise<any> {\n    return this.send(\"POST\", \"/accounts/email\", request, true, false);\n  }\n\n  postPassword(request: PasswordRequest): Promise<any> {\n    return this.send(\"POST\", \"/accounts/password\", request, true, false);\n  }\n\n  setPassword(request: SetPasswordRequest): Promise<any> {\n    return this.send(\"POST\", \"/accounts/set-password\", request, true, false);\n  }\n\n  postSetKeyConnectorKey(request: SetKeyConnectorKeyRequest): Promise<any> {\n    return this.send(\"POST\", \"/accounts/set-key-connector-key\", request, true, false);\n  }\n\n  postSecurityStamp(request: SecretVerificationRequest): Promise<any> {\n    return this.send(\"POST\", \"/accounts/security-stamp\", request, true, false);\n  }\n\n  async getAccountRevisionDate(): Promise<number> {\n    const r = await this.send(\"GET\", \"/accounts/revision-date\", null, true, true);\n    return r as number;\n  }\n\n  postPasswordHint(request: PasswordHintRequest): Promise<any> {\n    return this.send(\"POST\", \"/accounts/password-hint\", request, false, false);\n  }\n\n  async postRegister(request: RegisterRequest): Promise<RegisterResponse> {\n    const r = await this.send(\n      \"POST\",\n      \"/accounts/register\",\n      request,\n      false,\n      true,\n      this.environmentService.getIdentityUrl()\n    );\n    return new RegisterResponse(r);\n  }\n\n  async postPremium(data: FormData): Promise<PaymentResponse> {\n    const r = await this.send(\"POST\", \"/accounts/premium\", data, true, true);\n    return new PaymentResponse(r);\n  }\n\n  async postIapCheck(request: IapCheckRequest): Promise<any> {\n    return this.send(\"POST\", \"/accounts/iap-check\", request, true, false);\n  }\n\n  postReinstatePremium(): Promise<any> {\n    return this.send(\"POST\", \"/accounts/reinstate-premium\", null, true, false);\n  }\n\n  postCancelPremium(): Promise<any> {\n    return this.send(\"POST\", \"/accounts/cancel-premium\", null, true, false);\n  }\n\n  async postAccountStorage(request: StorageRequest): Promise<PaymentResponse> {\n    const r = await this.send(\"POST\", \"/accounts/storage\", request, true, true);\n    return new PaymentResponse(r);\n  }\n\n  postAccountPayment(request: PaymentRequest): Promise<void> {\n    return this.send(\"POST\", \"/accounts/payment\", request, true, false);\n  }\n\n  postAccountLicense(data: FormData): Promise<any> {\n    return this.send(\"POST\", \"/accounts/license\", data, true, false);\n  }\n\n  postAccountKeys(request: KeysRequest): Promise<any> {\n    return this.send(\"POST\", \"/accounts/keys\", request, true, false);\n  }\n\n  postAccountKey(request: UpdateKeyRequest): Promise<any> {\n    return this.send(\"POST\", \"/accounts/key\", request, true, false);\n  }\n\n  postAccountVerifyEmail(): Promise<any> {\n    return this.send(\"POST\", \"/accounts/verify-email\", null, true, false);\n  }\n\n  postAccountVerifyEmailToken(request: VerifyEmailRequest): Promise<any> {\n    return this.send(\"POST\", \"/accounts/verify-email-token\", request, false, false);\n  }\n\n  postAccountVerifyPassword(request: SecretVerificationRequest): Promise<any> {\n    return this.send(\"POST\", \"/accounts/verify-password\", request, true, false);\n  }\n\n  postAccountRecoverDelete(request: DeleteRecoverRequest): Promise<any> {\n    return this.send(\"POST\", \"/accounts/delete-recover\", request, false, false);\n  }\n\n  postAccountRecoverDeleteToken(request: VerifyDeleteRecoverRequest): Promise<any> {\n    return this.send(\"POST\", \"/accounts/delete-recover-token\", request, false, false);\n  }\n\n  postAccountKdf(request: KdfRequest): Promise<any> {\n    return this.send(\"POST\", \"/accounts/kdf\", request, true, false);\n  }\n\n  async deleteSsoUser(organizationId: string): Promise<void> {\n    return this.send(\"DELETE\", \"/accounts/sso/\" + organizationId, null, true, false);\n  }\n\n  async getSsoUserIdentifier(): Promise<string> {\n    return this.send(\"GET\", \"/accounts/sso/user-identifier\", null, true, true);\n  }\n\n  async postUserApiKey(id: string, request: SecretVerificationRequest): Promise<ApiKeyResponse> {\n    const r = await this.send(\"POST\", \"/accounts/api-key\", request, true, true);\n    return new ApiKeyResponse(r);\n  }\n\n  async postUserRotateApiKey(\n    id: string,\n    request: SecretVerificationRequest\n  ): Promise<ApiKeyResponse> {\n    const r = await this.send(\"POST\", \"/accounts/rotate-api-key\", request, true, true);\n    return new ApiKeyResponse(r);\n  }\n\n  putUpdateTempPassword(request: UpdateTempPasswordRequest): Promise<any> {\n    return this.send(\"PUT\", \"/accounts/update-temp-password\", request, true, false);\n  }\n\n  postConvertToKeyConnector(): Promise<void> {\n    return this.send(\"POST\", \"/accounts/convert-to-key-connector\", null, true, false);\n  }\n\n  // Account Billing APIs\n\n  async getUserBillingHistory(): Promise<BillingHistoryResponse> {\n    const r = await this.send(\"GET\", \"/accounts/billing/history\", null, true, true);\n    return new BillingHistoryResponse(r);\n  }\n\n  async getUserBillingPayment(): Promise<BillingPaymentResponse> {\n    const r = await this.send(\"GET\", \"/accounts/billing/payment-method\", null, true, true);\n    return new BillingPaymentResponse(r);\n  }\n\n  // Send APIs\n\n  async getSend(id: string): Promise<SendResponse> {\n    const r = await this.send(\"GET\", \"/sends/\" + id, null, true, true);\n    return new SendResponse(r);\n  }\n\n  async postSendAccess(\n    id: string,\n    request: SendAccessRequest,\n    apiUrl?: string\n  ): Promise<SendAccessResponse> {\n    const addSendIdHeader = (headers: Headers) => {\n      headers.set(\"Send-Id\", id);\n    };\n    const r = await this.send(\n      \"POST\",\n      \"/sends/access/\" + id,\n      request,\n      false,\n      true,\n      apiUrl,\n      addSendIdHeader\n    );\n    return new SendAccessResponse(r);\n  }\n\n  async getSendFileDownloadData(\n    send: SendAccessView,\n    request: SendAccessRequest,\n    apiUrl?: string\n  ): Promise<SendFileDownloadDataResponse> {\n    const addSendIdHeader = (headers: Headers) => {\n      headers.set(\"Send-Id\", send.id);\n    };\n    const r = await this.send(\n      \"POST\",\n      \"/sends/\" + send.id + \"/access/file/\" + send.file.id,\n      request,\n      false,\n      true,\n      apiUrl,\n      addSendIdHeader\n    );\n    return new SendFileDownloadDataResponse(r);\n  }\n\n  async getSends(): Promise<ListResponse<SendResponse>> {\n    const r = await this.send(\"GET\", \"/sends\", null, true, true);\n    return new ListResponse(r, SendResponse);\n  }\n\n  async postSend(request: SendRequest): Promise<SendResponse> {\n    const r = await this.send(\"POST\", \"/sends\", request, true, true);\n    return new SendResponse(r);\n  }\n\n  async postFileTypeSend(request: SendRequest): Promise<SendFileUploadDataResponse> {\n    const r = await this.send(\"POST\", \"/sends/file/v2\", request, true, true);\n    return new SendFileUploadDataResponse(r);\n  }\n\n  async renewSendFileUploadUrl(\n    sendId: string,\n    fileId: string\n  ): Promise<SendFileUploadDataResponse> {\n    const r = await this.send(\"GET\", \"/sends/\" + sendId + \"/file/\" + fileId, null, true, true);\n    return new SendFileUploadDataResponse(r);\n  }\n\n  postSendFile(sendId: string, fileId: string, data: FormData): Promise<any> {\n    return this.send(\"POST\", \"/sends/\" + sendId + \"/file/\" + fileId, data, true, false);\n  }\n\n  /**\n   * @deprecated Mar 25 2021: This method has been deprecated in favor of direct uploads.\n   * This method still exists for backward compatibility with old server versions.\n   */\n  async postSendFileLegacy(data: FormData): Promise<SendResponse> {\n    const r = await this.send(\"POST\", \"/sends/file\", data, true, true);\n    return new SendResponse(r);\n  }\n\n  async putSend(id: string, request: SendRequest): Promise<SendResponse> {\n    const r = await this.send(\"PUT\", \"/sends/\" + id, request, true, true);\n    return new SendResponse(r);\n  }\n\n  async putSendRemovePassword(id: string): Promise<SendResponse> {\n    const r = await this.send(\"PUT\", \"/sends/\" + id + \"/remove-password\", null, true, true);\n    return new SendResponse(r);\n  }\n\n  deleteSend(id: string): Promise<any> {\n    return this.send(\"DELETE\", \"/sends/\" + id, null, true, false);\n  }\n\n  // Cipher APIs\n\n  async getCipher(id: string): Promise<CipherResponse> {\n    const r = await this.send(\"GET\", \"/ciphers/\" + id, null, true, true);\n    return new CipherResponse(r);\n  }\n\n  async getFullCipherDetails(id: string): Promise<CipherResponse> {\n    const r = await this.send(\"GET\", \"/ciphers/\" + id + \"/details\", null, true, true);\n    return new CipherResponse(r);\n  }\n\n  async getCipherAdmin(id: string): Promise<CipherResponse> {\n    const r = await this.send(\"GET\", \"/ciphers/\" + id + \"/admin\", null, true, true);\n    return new CipherResponse(r);\n  }\n\n  async getCiphersOrganization(organizationId: string): Promise<ListResponse<CipherResponse>> {\n    const r = await this.send(\n      \"GET\",\n      \"/ciphers/organization-details?organizationId=\" + organizationId,\n      null,\n      true,\n      true\n    );\n    return new ListResponse(r, CipherResponse);\n  }\n\n  async postCipher(request: CipherRequest): Promise<CipherResponse> {\n    const r = await this.send(\"POST\", \"/ciphers\", request, true, true);\n    return new CipherResponse(r);\n  }\n\n  async postCipherCreate(request: CipherCreateRequest): Promise<CipherResponse> {\n    const r = await this.send(\"POST\", \"/ciphers/create\", request, true, true);\n    return new CipherResponse(r);\n  }\n\n  async postCipherAdmin(request: CipherCreateRequest): Promise<CipherResponse> {\n    const r = await this.send(\"POST\", \"/ciphers/admin\", request, true, true);\n    return new CipherResponse(r);\n  }\n\n  async putCipher(id: string, request: CipherRequest): Promise<CipherResponse> {\n    const r = await this.send(\"PUT\", \"/ciphers/\" + id, request, true, true);\n    return new CipherResponse(r);\n  }\n\n  async putPartialCipher(id: string, request: CipherPartialRequest): Promise<CipherResponse> {\n    const r = await this.send(\"PUT\", \"/ciphers/\" + id + \"/partial\", request, true, true);\n    return new CipherResponse(r);\n  }\n\n  async putCipherAdmin(id: string, request: CipherRequest): Promise<CipherResponse> {\n    const r = await this.send(\"PUT\", \"/ciphers/\" + id + \"/admin\", request, true, true);\n    return new CipherResponse(r);\n  }\n\n  deleteCipher(id: string): Promise<any> {\n    return this.send(\"DELETE\", \"/ciphers/\" + id, null, true, false);\n  }\n\n  deleteCipherAdmin(id: string): Promise<any> {\n    return this.send(\"DELETE\", \"/ciphers/\" + id + \"/admin\", null, true, false);\n  }\n\n  deleteManyCiphers(request: CipherBulkDeleteRequest): Promise<any> {\n    return this.send(\"DELETE\", \"/ciphers\", request, true, false);\n  }\n\n  deleteManyCiphersAdmin(request: CipherBulkDeleteRequest): Promise<any> {\n    return this.send(\"DELETE\", \"/ciphers/admin\", request, true, false);\n  }\n\n  putMoveCiphers(request: CipherBulkMoveRequest): Promise<any> {\n    return this.send(\"PUT\", \"/ciphers/move\", request, true, false);\n  }\n\n  async putShareCipher(id: string, request: CipherShareRequest): Promise<CipherResponse> {\n    const r = await this.send(\"PUT\", \"/ciphers/\" + id + \"/share\", request, true, true);\n    return new CipherResponse(r);\n  }\n\n  putShareCiphers(request: CipherBulkShareRequest): Promise<any> {\n    return this.send(\"PUT\", \"/ciphers/share\", request, true, false);\n  }\n\n  putCipherCollections(id: string, request: CipherCollectionsRequest): Promise<any> {\n    return this.send(\"PUT\", \"/ciphers/\" + id + \"/collections\", request, true, false);\n  }\n\n  putCipherCollectionsAdmin(id: string, request: CipherCollectionsRequest): Promise<any> {\n    return this.send(\"PUT\", \"/ciphers/\" + id + \"/collections-admin\", request, true, false);\n  }\n\n  postPurgeCiphers(\n    request: SecretVerificationRequest,\n    organizationId: string = null\n  ): Promise<any> {\n    let path = \"/ciphers/purge\";\n    if (organizationId != null) {\n      path += \"?organizationId=\" + organizationId;\n    }\n    return this.send(\"POST\", path, request, true, false);\n  }\n\n  putDeleteCipher(id: string): Promise<any> {\n    return this.send(\"PUT\", \"/ciphers/\" + id + \"/delete\", null, true, false);\n  }\n\n  putDeleteCipherAdmin(id: string): Promise<any> {\n    return this.send(\"PUT\", \"/ciphers/\" + id + \"/delete-admin\", null, true, false);\n  }\n\n  putDeleteManyCiphers(request: CipherBulkDeleteRequest): Promise<any> {\n    return this.send(\"PUT\", \"/ciphers/delete\", request, true, false);\n  }\n\n  putDeleteManyCiphersAdmin(request: CipherBulkDeleteRequest): Promise<any> {\n    return this.send(\"PUT\", \"/ciphers/delete-admin\", request, true, false);\n  }\n\n  async putRestoreCipher(id: string): Promise<CipherResponse> {\n    const r = await this.send(\"PUT\", \"/ciphers/\" + id + \"/restore\", null, true, true);\n    return new CipherResponse(r);\n  }\n\n  async putRestoreCipherAdmin(id: string): Promise<CipherResponse> {\n    const r = await this.send(\"PUT\", \"/ciphers/\" + id + \"/restore-admin\", null, true, true);\n    return new CipherResponse(r);\n  }\n\n  async putRestoreManyCiphers(\n    request: CipherBulkDeleteRequest\n  ): Promise<ListResponse<CipherResponse>> {\n    const r = await this.send(\"PUT\", \"/ciphers/restore\", request, true, true);\n    return new ListResponse<CipherResponse>(r, CipherResponse);\n  }\n\n  // Attachments APIs\n\n  async getAttachmentData(\n    cipherId: string,\n    attachmentId: string,\n    emergencyAccessId?: string\n  ): Promise<AttachmentResponse> {\n    const path =\n      (emergencyAccessId != null ? \"/emergency-access/\" + emergencyAccessId + \"/\" : \"/ciphers/\") +\n      cipherId +\n      \"/attachment/\" +\n      attachmentId;\n    const r = await this.send(\"GET\", path, null, true, true);\n    return new AttachmentResponse(r);\n  }\n\n  async postCipherAttachment(\n    id: string,\n    request: AttachmentRequest\n  ): Promise<AttachmentUploadDataResponse> {\n    const r = await this.send(\"POST\", \"/ciphers/\" + id + \"/attachment/v2\", request, true, true);\n    return new AttachmentUploadDataResponse(r);\n  }\n\n  /**\n   * @deprecated Mar 25 2021: This method has been deprecated in favor of direct uploads.\n   * This method still exists for backward compatibility with old server versions.\n   */\n  async postCipherAttachmentLegacy(id: string, data: FormData): Promise<CipherResponse> {\n    const r = await this.send(\"POST\", \"/ciphers/\" + id + \"/attachment\", data, true, true);\n    return new CipherResponse(r);\n  }\n\n  /**\n   * @deprecated Mar 25 2021: This method has been deprecated in favor of direct uploads.\n   * This method still exists for backward compatibility with old server versions.\n   */\n  async postCipherAttachmentAdminLegacy(id: string, data: FormData): Promise<CipherResponse> {\n    const r = await this.send(\"POST\", \"/ciphers/\" + id + \"/attachment-admin\", data, true, true);\n    return new CipherResponse(r);\n  }\n\n  deleteCipherAttachment(id: string, attachmentId: string): Promise<any> {\n    return this.send(\"DELETE\", \"/ciphers/\" + id + \"/attachment/\" + attachmentId, null, true, false);\n  }\n\n  deleteCipherAttachmentAdmin(id: string, attachmentId: string): Promise<any> {\n    return this.send(\n      \"DELETE\",\n      \"/ciphers/\" + id + \"/attachment/\" + attachmentId + \"/admin\",\n      null,\n      true,\n      false\n    );\n  }\n\n  postShareCipherAttachment(\n    id: string,\n    attachmentId: string,\n    data: FormData,\n    organizationId: string\n  ): Promise<any> {\n    return this.send(\n      \"POST\",\n      \"/ciphers/\" + id + \"/attachment/\" + attachmentId + \"/share?organizationId=\" + organizationId,\n      data,\n      true,\n      false\n    );\n  }\n\n  async renewAttachmentUploadUrl(\n    id: string,\n    attachmentId: string\n  ): Promise<AttachmentUploadDataResponse> {\n    const r = await this.send(\n      \"GET\",\n      \"/ciphers/\" + id + \"/attachment/\" + attachmentId + \"/renew\",\n      null,\n      true,\n      true\n    );\n    return new AttachmentUploadDataResponse(r);\n  }\n\n  postAttachmentFile(id: string, attachmentId: string, data: FormData): Promise<any> {\n    return this.send(\"POST\", \"/ciphers/\" + id + \"/attachment/\" + attachmentId, data, true, false);\n  }\n\n  // Collections APIs\n\n  async getCollectionAccessDetails(\n    organizationId: string,\n    id: string\n  ): Promise<CollectionAccessDetailsResponse> {\n    const r = await this.send(\n      \"GET\",\n      \"/organizations/\" + organizationId + \"/collections/\" + id + \"/details\",\n      null,\n      true,\n      true\n    );\n    return new CollectionAccessDetailsResponse(r);\n  }\n\n  async getUserCollections(): Promise<ListResponse<CollectionResponse>> {\n    const r = await this.send(\"GET\", \"/collections\", null, true, true);\n    return new ListResponse(r, CollectionResponse);\n  }\n\n  async getCollections(organizationId: string): Promise<ListResponse<CollectionResponse>> {\n    const r = await this.send(\n      \"GET\",\n      \"/organizations/\" + organizationId + \"/collections\",\n      null,\n      true,\n      true\n    );\n    return new ListResponse(r, CollectionResponse);\n  }\n\n  async getManyCollectionsWithAccessDetails(\n    organizationId: string\n  ): Promise<ListResponse<CollectionAccessDetailsResponse>> {\n    const r = await this.send(\n      \"GET\",\n      \"/organizations/\" + organizationId + \"/collections/details\",\n      null,\n      true,\n      true\n    );\n    return new ListResponse(r, CollectionAccessDetailsResponse);\n  }\n\n  async getCollectionUsers(\n    organizationId: string,\n    id: string\n  ): Promise<SelectionReadOnlyResponse[]> {\n    const r = await this.send(\n      \"GET\",\n      \"/organizations/\" + organizationId + \"/collections/\" + id + \"/users\",\n      null,\n      true,\n      true\n    );\n    return r.map((dr: any) => new SelectionReadOnlyResponse(dr));\n  }\n\n  async postCollection(\n    organizationId: string,\n    request: CollectionRequest\n  ): Promise<CollectionResponse> {\n    const r = await this.send(\n      \"POST\",\n      \"/organizations/\" + organizationId + \"/collections\",\n      request,\n      true,\n      true\n    );\n    return new CollectionResponse(r);\n  }\n\n  async putCollection(\n    organizationId: string,\n    id: string,\n    request: CollectionRequest\n  ): Promise<CollectionResponse> {\n    const r = await this.send(\n      \"PUT\",\n      \"/organizations/\" + organizationId + \"/collections/\" + id,\n      request,\n      true,\n      true\n    );\n    return new CollectionResponse(r);\n  }\n\n  async putCollectionUsers(\n    organizationId: string,\n    id: string,\n    request: SelectionReadOnlyRequest[]\n  ): Promise<any> {\n    await this.send(\n      \"PUT\",\n      \"/organizations/\" + organizationId + \"/collections/\" + id + \"/users\",\n      request,\n      true,\n      false\n    );\n  }\n\n  deleteCollection(organizationId: string, id: string): Promise<any> {\n    return this.send(\n      \"DELETE\",\n      \"/organizations/\" + organizationId + \"/collections/\" + id,\n      null,\n      true,\n      false\n    );\n  }\n\n  deleteManyCollections(request: CollectionBulkDeleteRequest): Promise<any> {\n    return this.send(\n      \"DELETE\",\n      \"/organizations/\" + request.organizationId + \"/collections\",\n      request,\n      true,\n      false\n    );\n  }\n\n  deleteCollectionUser(\n    organizationId: string,\n    id: string,\n    organizationUserId: string\n  ): Promise<any> {\n    return this.send(\n      \"DELETE\",\n      \"/organizations/\" + organizationId + \"/collections/\" + id + \"/user/\" + organizationUserId,\n      null,\n      true,\n      false\n    );\n  }\n\n  // Groups APIs\n\n  async getGroupUsers(organizationId: string, id: string): Promise<string[]> {\n    const r = await this.send(\n      \"GET\",\n      \"/organizations/\" + organizationId + \"/groups/\" + id + \"/users\",\n      null,\n      true,\n      true\n    );\n    return r;\n  }\n\n  async putGroupUsers(organizationId: string, id: string, request: string[]): Promise<any> {\n    await this.send(\n      \"PUT\",\n      \"/organizations/\" + organizationId + \"/groups/\" + id + \"/users\",\n      request,\n      true,\n      false\n    );\n  }\n\n  deleteGroupUser(organizationId: string, id: string, organizationUserId: string): Promise<any> {\n    return this.send(\n      \"DELETE\",\n      \"/organizations/\" + organizationId + \"/groups/\" + id + \"/user/\" + organizationUserId,\n      null,\n      true,\n      false\n    );\n  }\n\n  // Plan APIs\n\n  async getPlans(): Promise<ListResponse<PlanResponse>> {\n    const r = await this.send(\"GET\", \"/plans/\", null, false, true);\n    return new ListResponse(r, PlanResponse);\n  }\n\n  async postPublicImportDirectory(request: OrganizationImportRequest): Promise<any> {\n    return this.send(\"POST\", \"/public/organization/import\", request, true, false);\n  }\n\n  async getTaxRates(): Promise<ListResponse<TaxRateResponse>> {\n    const r = await this.send(\"GET\", \"/plans/sales-tax-rates/\", null, true, true);\n    return new ListResponse(r, TaxRateResponse);\n  }\n\n  // Settings APIs\n\n  async getSettingsDomains(): Promise<DomainsResponse> {\n    const r = await this.send(\"GET\", \"/settings/domains\", null, true, true);\n    return new DomainsResponse(r);\n  }\n\n  async putSettingsDomains(request: UpdateDomainsRequest): Promise<DomainsResponse> {\n    const r = await this.send(\"PUT\", \"/settings/domains\", request, true, true);\n    return new DomainsResponse(r);\n  }\n\n  // Sync APIs\n\n  async getSync(): Promise<SyncResponse> {\n    const path = this.isDesktopClient || this.isWebClient ? \"/sync?excludeDomains=true\" : \"/sync\";\n    const r = await this.send(\"GET\", path, null, true, true);\n    return new SyncResponse(r);\n  }\n\n  // Two-factor APIs\n\n  async getTwoFactorProviders(): Promise<ListResponse<TwoFactorProviderResponse>> {\n    const r = await this.send(\"GET\", \"/two-factor\", null, true, true);\n    return new ListResponse(r, TwoFactorProviderResponse);\n  }\n\n  async getTwoFactorOrganizationProviders(\n    organizationId: string\n  ): Promise<ListResponse<TwoFactorProviderResponse>> {\n    const r = await this.send(\n      \"GET\",\n      \"/organizations/\" + organizationId + \"/two-factor\",\n      null,\n      true,\n      true\n    );\n    return new ListResponse(r, TwoFactorProviderResponse);\n  }\n\n  async getTwoFactorAuthenticator(\n    request: SecretVerificationRequest\n  ): Promise<TwoFactorAuthenticatorResponse> {\n    const r = await this.send(\"POST\", \"/two-factor/get-authenticator\", request, true, true);\n    return new TwoFactorAuthenticatorResponse(r);\n  }\n\n  async getTwoFactorEmail(request: SecretVerificationRequest): Promise<TwoFactorEmailResponse> {\n    const r = await this.send(\"POST\", \"/two-factor/get-email\", request, true, true);\n    return new TwoFactorEmailResponse(r);\n  }\n\n  async getTwoFactorDuo(request: SecretVerificationRequest): Promise<TwoFactorDuoResponse> {\n    const r = await this.send(\"POST\", \"/two-factor/get-duo\", request, true, true);\n    return new TwoFactorDuoResponse(r);\n  }\n\n  async getTwoFactorOrganizationDuo(\n    organizationId: string,\n    request: SecretVerificationRequest\n  ): Promise<TwoFactorDuoResponse> {\n    const r = await this.send(\n      \"POST\",\n      \"/organizations/\" + organizationId + \"/two-factor/get-duo\",\n      request,\n      true,\n      true\n    );\n    return new TwoFactorDuoResponse(r);\n  }\n\n  async getTwoFactorYubiKey(request: SecretVerificationRequest): Promise<TwoFactorYubiKeyResponse> {\n    const r = await this.send(\"POST\", \"/two-factor/get-yubikey\", request, true, true);\n    return new TwoFactorYubiKeyResponse(r);\n  }\n\n  async getTwoFactorWebAuthn(\n    request: SecretVerificationRequest\n  ): Promise<TwoFactorWebAuthnResponse> {\n    const r = await this.send(\"POST\", \"/two-factor/get-webauthn\", request, true, true);\n    return new TwoFactorWebAuthnResponse(r);\n  }\n\n  async getTwoFactorWebAuthnChallenge(\n    request: SecretVerificationRequest\n  ): Promise<ChallengeResponse> {\n    const r = await this.send(\"POST\", \"/two-factor/get-webauthn-challenge\", request, true, true);\n    return new ChallengeResponse(r);\n  }\n\n  async getTwoFactorRecover(request: SecretVerificationRequest): Promise<TwoFactorRecoverResponse> {\n    const r = await this.send(\"POST\", \"/two-factor/get-recover\", request, true, true);\n    return new TwoFactorRecoverResponse(r);\n  }\n\n  async putTwoFactorAuthenticator(\n    request: UpdateTwoFactorAuthenticatorRequest\n  ): Promise<TwoFactorAuthenticatorResponse> {\n    const r = await this.send(\"PUT\", \"/two-factor/authenticator\", request, true, true);\n    return new TwoFactorAuthenticatorResponse(r);\n  }\n\n  async putTwoFactorEmail(request: UpdateTwoFactorEmailRequest): Promise<TwoFactorEmailResponse> {\n    const r = await this.send(\"PUT\", \"/two-factor/email\", request, true, true);\n    return new TwoFactorEmailResponse(r);\n  }\n\n  async putTwoFactorDuo(request: UpdateTwoFactorDuoRequest): Promise<TwoFactorDuoResponse> {\n    const r = await this.send(\"PUT\", \"/two-factor/duo\", request, true, true);\n    return new TwoFactorDuoResponse(r);\n  }\n\n  async putTwoFactorOrganizationDuo(\n    organizationId: string,\n    request: UpdateTwoFactorDuoRequest\n  ): Promise<TwoFactorDuoResponse> {\n    const r = await this.send(\n      \"PUT\",\n      \"/organizations/\" + organizationId + \"/two-factor/duo\",\n      request,\n      true,\n      true\n    );\n    return new TwoFactorDuoResponse(r);\n  }\n\n  async putTwoFactorYubiKey(\n    request: UpdateTwoFactorYubioOtpRequest\n  ): Promise<TwoFactorYubiKeyResponse> {\n    const r = await this.send(\"PUT\", \"/two-factor/yubikey\", request, true, true);\n    return new TwoFactorYubiKeyResponse(r);\n  }\n\n  async putTwoFactorWebAuthn(\n    request: UpdateTwoFactorWebAuthnRequest\n  ): Promise<TwoFactorWebAuthnResponse> {\n    const response = request.deviceResponse.response as AuthenticatorAttestationResponse;\n    const data: any = Object.assign({}, request);\n\n    data.deviceResponse = {\n      id: request.deviceResponse.id,\n      rawId: btoa(request.deviceResponse.id),\n      type: request.deviceResponse.type,\n      extensions: request.deviceResponse.getClientExtensionResults(),\n      response: {\n        AttestationObject: Utils.fromBufferToB64(response.attestationObject),\n        clientDataJson: Utils.fromBufferToB64(response.clientDataJSON),\n      },\n    };\n\n    const r = await this.send(\"PUT\", \"/two-factor/webauthn\", data, true, true);\n    return new TwoFactorWebAuthnResponse(r);\n  }\n\n  async deleteTwoFactorWebAuthn(\n    request: UpdateTwoFactorWebAuthnDeleteRequest\n  ): Promise<TwoFactorWebAuthnResponse> {\n    const r = await this.send(\"DELETE\", \"/two-factor/webauthn\", request, true, true);\n    return new TwoFactorWebAuthnResponse(r);\n  }\n\n  async putTwoFactorDisable(request: TwoFactorProviderRequest): Promise<TwoFactorProviderResponse> {\n    const r = await this.send(\"PUT\", \"/two-factor/disable\", request, true, true);\n    return new TwoFactorProviderResponse(r);\n  }\n\n  async putTwoFactorOrganizationDisable(\n    organizationId: string,\n    request: TwoFactorProviderRequest\n  ): Promise<TwoFactorProviderResponse> {\n    const r = await this.send(\n      \"PUT\",\n      \"/organizations/\" + organizationId + \"/two-factor/disable\",\n      request,\n      true,\n      true\n    );\n    return new TwoFactorProviderResponse(r);\n  }\n\n  postTwoFactorRecover(request: TwoFactorRecoveryRequest): Promise<any> {\n    return this.send(\"POST\", \"/two-factor/recover\", request, false, false);\n  }\n\n  postTwoFactorEmailSetup(request: TwoFactorEmailRequest): Promise<any> {\n    return this.send(\"POST\", \"/two-factor/send-email\", request, true, false);\n  }\n\n  postTwoFactorEmail(request: TwoFactorEmailRequest): Promise<any> {\n    return this.send(\"POST\", \"/two-factor/send-email-login\", request, false, false);\n  }\n\n  async getDeviceVerificationSettings(): Promise<DeviceVerificationResponse> {\n    const r = await this.send(\n      \"GET\",\n      \"/two-factor/get-device-verification-settings\",\n      null,\n      true,\n      true\n    );\n    return new DeviceVerificationResponse(r);\n  }\n\n  async putDeviceVerificationSettings(\n    request: DeviceVerificationRequest\n  ): Promise<DeviceVerificationResponse> {\n    const r = await this.send(\n      \"PUT\",\n      \"/two-factor/device-verification-settings\",\n      request,\n      true,\n      true\n    );\n    return new DeviceVerificationResponse(r);\n  }\n\n  async getKnownDevice(email: string, deviceIdentifier: string): Promise<boolean> {\n    const path = `/devices/knowndevice/${email}/${deviceIdentifier}`;\n    const r = await this.send(\"GET\", path, null, false, true);\n    return r as boolean;\n  }\n\n  // Emergency Access APIs\n\n  async getEmergencyAccessTrusted(): Promise<ListResponse<EmergencyAccessGranteeDetailsResponse>> {\n    const r = await this.send(\"GET\", \"/emergency-access/trusted\", null, true, true);\n    return new ListResponse(r, EmergencyAccessGranteeDetailsResponse);\n  }\n\n  async getEmergencyAccessGranted(): Promise<ListResponse<EmergencyAccessGrantorDetailsResponse>> {\n    const r = await this.send(\"GET\", \"/emergency-access/granted\", null, true, true);\n    return new ListResponse(r, EmergencyAccessGrantorDetailsResponse);\n  }\n\n  async getEmergencyAccess(id: string): Promise<EmergencyAccessGranteeDetailsResponse> {\n    const r = await this.send(\"GET\", \"/emergency-access/\" + id, null, true, true);\n    return new EmergencyAccessGranteeDetailsResponse(r);\n  }\n\n  async getEmergencyGrantorPolicies(id: string): Promise<ListResponse<PolicyResponse>> {\n    const r = await this.send(\"GET\", \"/emergency-access/\" + id + \"/policies\", null, true, true);\n    return new ListResponse(r, PolicyResponse);\n  }\n\n  putEmergencyAccess(id: string, request: EmergencyAccessUpdateRequest): Promise<any> {\n    return this.send(\"PUT\", \"/emergency-access/\" + id, request, true, false);\n  }\n\n  deleteEmergencyAccess(id: string): Promise<any> {\n    return this.send(\"DELETE\", \"/emergency-access/\" + id, null, true, false);\n  }\n\n  postEmergencyAccessInvite(request: EmergencyAccessInviteRequest): Promise<any> {\n    return this.send(\"POST\", \"/emergency-access/invite\", request, true, false);\n  }\n\n  postEmergencyAccessReinvite(id: string): Promise<any> {\n    return this.send(\"POST\", \"/emergency-access/\" + id + \"/reinvite\", null, true, false);\n  }\n\n  postEmergencyAccessAccept(id: string, request: EmergencyAccessAcceptRequest): Promise<any> {\n    return this.send(\"POST\", \"/emergency-access/\" + id + \"/accept\", request, true, false);\n  }\n\n  postEmergencyAccessConfirm(id: string, request: EmergencyAccessConfirmRequest): Promise<any> {\n    return this.send(\"POST\", \"/emergency-access/\" + id + \"/confirm\", request, true, false);\n  }\n\n  postEmergencyAccessInitiate(id: string): Promise<any> {\n    return this.send(\"POST\", \"/emergency-access/\" + id + \"/initiate\", null, true, false);\n  }\n\n  postEmergencyAccessApprove(id: string): Promise<any> {\n    return this.send(\"POST\", \"/emergency-access/\" + id + \"/approve\", null, true, false);\n  }\n\n  postEmergencyAccessReject(id: string): Promise<any> {\n    return this.send(\"POST\", \"/emergency-access/\" + id + \"/reject\", null, true, false);\n  }\n\n  async postEmergencyAccessTakeover(id: string): Promise<EmergencyAccessTakeoverResponse> {\n    const r = await this.send(\"POST\", \"/emergency-access/\" + id + \"/takeover\", null, true, true);\n    return new EmergencyAccessTakeoverResponse(r);\n  }\n\n  async postEmergencyAccessPassword(\n    id: string,\n    request: EmergencyAccessPasswordRequest\n  ): Promise<any> {\n    await this.send(\"POST\", \"/emergency-access/\" + id + \"/password\", request, true, true);\n  }\n\n  async postEmergencyAccessView(id: string): Promise<EmergencyAccessViewResponse> {\n    const r = await this.send(\"POST\", \"/emergency-access/\" + id + \"/view\", null, true, true);\n    return new EmergencyAccessViewResponse(r);\n  }\n\n  // Organization APIs\n\n  async getCloudCommunicationsEnabled(): Promise<boolean> {\n    const r = await this.send(\"GET\", \"/organizations/connections/enabled\", null, true, true);\n    return r as boolean;\n  }\n\n  async getOrganizationConnection<TConfig extends OrganizationConnectionConfigApis>(\n    id: string,\n    type: OrganizationConnectionType,\n    configType: { new (response: any): TConfig }\n  ): Promise<OrganizationConnectionResponse<TConfig>> {\n    const r = await this.send(\"GET\", `/organizations/connections/${id}/${type}`, null, true, true);\n    return new OrganizationConnectionResponse(r, configType);\n  }\n\n  async createOrganizationConnection<TConfig extends OrganizationConnectionConfigApis>(\n    request: OrganizationConnectionRequest,\n    configType: { new (response: any): TConfig }\n  ): Promise<OrganizationConnectionResponse<TConfig>> {\n    const r = await this.send(\"POST\", \"/organizations/connections/\", request, true, true);\n    return new OrganizationConnectionResponse(r, configType);\n  }\n\n  async updateOrganizationConnection<TConfig extends OrganizationConnectionConfigApis>(\n    request: OrganizationConnectionRequest,\n    configType: { new (response: any): TConfig },\n    organizationConnectionId?: string\n  ): Promise<OrganizationConnectionResponse<TConfig>> {\n    const r = await this.send(\n      \"PUT\",\n      \"/organizations/connections/\" + organizationConnectionId,\n      request,\n      true,\n      true\n    );\n    return new OrganizationConnectionResponse(r, configType);\n  }\n\n  async deleteOrganizationConnection(id: string): Promise<void> {\n    return this.send(\"DELETE\", \"/organizations/connections/\" + id, null, true, false);\n  }\n\n  // Provider APIs\n\n  async postProviderSetup(id: string, request: ProviderSetupRequest) {\n    const r = await this.send(\"POST\", \"/providers/\" + id + \"/setup\", request, true, true);\n    return new ProviderResponse(r);\n  }\n\n  async getProvider(id: string) {\n    const r = await this.send(\"GET\", \"/providers/\" + id, null, true, true);\n    return new ProviderResponse(r);\n  }\n\n  async putProvider(id: string, request: ProviderUpdateRequest) {\n    const r = await this.send(\"PUT\", \"/providers/\" + id, request, true, true);\n    return new ProviderResponse(r);\n  }\n\n  // Provider User APIs\n\n  async getProviderUsers(\n    providerId: string\n  ): Promise<ListResponse<ProviderUserUserDetailsResponse>> {\n    const r = await this.send(\"GET\", \"/providers/\" + providerId + \"/users\", null, true, true);\n    return new ListResponse(r, ProviderUserUserDetailsResponse);\n  }\n\n  async getProviderUser(providerId: string, id: string): Promise<ProviderUserResponse> {\n    const r = await this.send(\"GET\", \"/providers/\" + providerId + \"/users/\" + id, null, true, true);\n    return new ProviderUserResponse(r);\n  }\n\n  postProviderUserInvite(providerId: string, request: ProviderUserInviteRequest): Promise<any> {\n    return this.send(\"POST\", \"/providers/\" + providerId + \"/users/invite\", request, true, false);\n  }\n\n  postProviderUserReinvite(providerId: string, id: string): Promise<any> {\n    return this.send(\n      \"POST\",\n      \"/providers/\" + providerId + \"/users/\" + id + \"/reinvite\",\n      null,\n      true,\n      false\n    );\n  }\n\n  async postManyProviderUserReinvite(\n    providerId: string,\n    request: ProviderUserBulkRequest\n  ): Promise<ListResponse<ProviderUserBulkResponse>> {\n    const r = await this.send(\n      \"POST\",\n      \"/providers/\" + providerId + \"/users/reinvite\",\n      request,\n      true,\n      true\n    );\n    return new ListResponse(r, ProviderUserBulkResponse);\n  }\n\n  async postProviderUserBulkConfirm(\n    providerId: string,\n    request: ProviderUserBulkConfirmRequest\n  ): Promise<ListResponse<ProviderUserBulkResponse>> {\n    const r = await this.send(\n      \"POST\",\n      \"/providers/\" + providerId + \"/users/confirm\",\n      request,\n      true,\n      true\n    );\n    return new ListResponse(r, ProviderUserBulkResponse);\n  }\n\n  async deleteManyProviderUsers(\n    providerId: string,\n    request: ProviderUserBulkRequest\n  ): Promise<ListResponse<ProviderUserBulkResponse>> {\n    const r = await this.send(\"DELETE\", \"/providers/\" + providerId + \"/users\", request, true, true);\n    return new ListResponse(r, ProviderUserBulkResponse);\n  }\n\n  postProviderUserAccept(\n    providerId: string,\n    id: string,\n    request: ProviderUserAcceptRequest\n  ): Promise<any> {\n    return this.send(\n      \"POST\",\n      \"/providers/\" + providerId + \"/users/\" + id + \"/accept\",\n      request,\n      true,\n      false\n    );\n  }\n\n  postProviderUserConfirm(\n    providerId: string,\n    id: string,\n    request: ProviderUserConfirmRequest\n  ): Promise<any> {\n    return this.send(\n      \"POST\",\n      \"/providers/\" + providerId + \"/users/\" + id + \"/confirm\",\n      request,\n      true,\n      false\n    );\n  }\n\n  async postProviderUsersPublicKey(\n    providerId: string,\n    request: ProviderUserBulkRequest\n  ): Promise<ListResponse<ProviderUserBulkPublicKeyResponse>> {\n    const r = await this.send(\n      \"POST\",\n      \"/providers/\" + providerId + \"/users/public-keys\",\n      request,\n      true,\n      true\n    );\n    return new ListResponse(r, ProviderUserBulkPublicKeyResponse);\n  }\n\n  putProviderUser(\n    providerId: string,\n    id: string,\n    request: ProviderUserUpdateRequest\n  ): Promise<any> {\n    return this.send(\"PUT\", \"/providers/\" + providerId + \"/users/\" + id, request, true, false);\n  }\n\n  deleteProviderUser(providerId: string, id: string): Promise<any> {\n    return this.send(\"DELETE\", \"/providers/\" + providerId + \"/users/\" + id, null, true, false);\n  }\n\n  // Provider Organization APIs\n\n  async getProviderClients(\n    providerId: string\n  ): Promise<ListResponse<ProviderOrganizationOrganizationDetailsResponse>> {\n    const r = await this.send(\n      \"GET\",\n      \"/providers/\" + providerId + \"/organizations\",\n      null,\n      true,\n      true\n    );\n    return new ListResponse(r, ProviderOrganizationOrganizationDetailsResponse);\n  }\n\n  postProviderAddOrganization(\n    providerId: string,\n    request: ProviderAddOrganizationRequest\n  ): Promise<any> {\n    return this.send(\n      \"POST\",\n      \"/providers/\" + providerId + \"/organizations/add\",\n      request,\n      true,\n      false\n    );\n  }\n\n  async postProviderCreateOrganization(\n    providerId: string,\n    request: ProviderOrganizationCreateRequest\n  ): Promise<ProviderOrganizationResponse> {\n    const r = await this.send(\n      \"POST\",\n      \"/providers/\" + providerId + \"/organizations\",\n      request,\n      true,\n      true\n    );\n    return new ProviderOrganizationResponse(r);\n  }\n\n  deleteProviderOrganization(providerId: string, id: string): Promise<any> {\n    return this.send(\n      \"DELETE\",\n      \"/providers/\" + providerId + \"/organizations/\" + id,\n      null,\n      true,\n      false\n    );\n  }\n\n  // Event APIs\n\n  async getEvents(start: string, end: string, token: string): Promise<ListResponse<EventResponse>> {\n    const r = await this.send(\n      \"GET\",\n      this.addEventParameters(\"/events\", start, end, token),\n      null,\n      true,\n      true\n    );\n    return new ListResponse(r, EventResponse);\n  }\n\n  async getEventsCipher(\n    id: string,\n    start: string,\n    end: string,\n    token: string\n  ): Promise<ListResponse<EventResponse>> {\n    const r = await this.send(\n      \"GET\",\n      this.addEventParameters(\"/ciphers/\" + id + \"/events\", start, end, token),\n      null,\n      true,\n      true\n    );\n    return new ListResponse(r, EventResponse);\n  }\n\n  async getEventsOrganization(\n    id: string,\n    start: string,\n    end: string,\n    token: string\n  ): Promise<ListResponse<EventResponse>> {\n    const r = await this.send(\n      \"GET\",\n      this.addEventParameters(\"/organizations/\" + id + \"/events\", start, end, token),\n      null,\n      true,\n      true\n    );\n    return new ListResponse(r, EventResponse);\n  }\n\n  async getEventsOrganizationUser(\n    organizationId: string,\n    id: string,\n    start: string,\n    end: string,\n    token: string\n  ): Promise<ListResponse<EventResponse>> {\n    const r = await this.send(\n      \"GET\",\n      this.addEventParameters(\n        \"/organizations/\" + organizationId + \"/users/\" + id + \"/events\",\n        start,\n        end,\n        token\n      ),\n      null,\n      true,\n      true\n    );\n    return new ListResponse(r, EventResponse);\n  }\n\n  async getEventsProvider(\n    id: string,\n    start: string,\n    end: string,\n    token: string\n  ): Promise<ListResponse<EventResponse>> {\n    const r = await this.send(\n      \"GET\",\n      this.addEventParameters(\"/providers/\" + id + \"/events\", start, end, token),\n      null,\n      true,\n      true\n    );\n    return new ListResponse(r, EventResponse);\n  }\n\n  async getEventsProviderUser(\n    providerId: string,\n    id: string,\n    start: string,\n    end: string,\n    token: string\n  ): Promise<ListResponse<EventResponse>> {\n    const r = await this.send(\n      \"GET\",\n      this.addEventParameters(\n        \"/providers/\" + providerId + \"/users/\" + id + \"/events\",\n        start,\n        end,\n        token\n      ),\n      null,\n      true,\n      true\n    );\n    return new ListResponse(r, EventResponse);\n  }\n\n  async postEventsCollect(request: EventRequest[]): Promise<any> {\n    const authHeader = await this.getActiveBearerToken();\n    const headers = new Headers({\n      \"Device-Type\": this.deviceType,\n      Authorization: \"Bearer \" + authHeader,\n      \"Content-Type\": \"application/json; charset=utf-8\",\n    });\n    if (this.customUserAgent != null) {\n      headers.set(\"User-Agent\", this.customUserAgent);\n    }\n    const response = await this.fetch(\n      new Request(this.environmentService.getEventsUrl() + \"/collect\", {\n        cache: \"no-store\",\n        credentials: this.getCredentials(),\n        method: \"POST\",\n        body: JSON.stringify(request),\n        headers: headers,\n      })\n    );\n    if (response.status !== 200) {\n      return Promise.reject(\"Event post failed.\");\n    }\n  }\n\n  // User APIs\n\n  async getUserPublicKey(id: string): Promise<UserKeyResponse> {\n    const r = await this.send(\"GET\", \"/users/\" + id + \"/public-key\", null, true, true);\n    return new UserKeyResponse(r);\n  }\n\n  // HIBP APIs\n\n  async getHibpBreach(username: string): Promise<BreachAccountResponse[]> {\n    const r = await this.send(\"GET\", \"/hibp/breach?username=\" + username, null, true, true);\n    return r.map((a: any) => new BreachAccountResponse(a));\n  }\n\n  // Misc\n\n  async postBitPayInvoice(request: BitPayInvoiceRequest): Promise<string> {\n    const r = await this.send(\"POST\", \"/bitpay-invoice\", request, true, true);\n    return r as string;\n  }\n\n  async postSetupPayment(): Promise<string> {\n    const r = await this.send(\"POST\", \"/setup-payment\", null, true, true);\n    return r as string;\n  }\n\n  // Key Connector\n\n  async getUserKeyFromKeyConnector(keyConnectorUrl: string): Promise<KeyConnectorUserKeyResponse> {\n    const authHeader = await this.getActiveBearerToken();\n\n    const response = await this.fetch(\n      new Request(keyConnectorUrl + \"/user-keys\", {\n        cache: \"no-store\",\n        method: \"GET\",\n        headers: new Headers({\n          Accept: \"application/json\",\n          Authorization: \"Bearer \" + authHeader,\n        }),\n      })\n    );\n\n    if (response.status !== 200) {\n      const error = await this.handleError(response, false, true);\n      return Promise.reject(error);\n    }\n\n    return new KeyConnectorUserKeyResponse(await response.json());\n  }\n\n  async postUserKeyToKeyConnector(\n    keyConnectorUrl: string,\n    request: KeyConnectorUserKeyRequest\n  ): Promise<void> {\n    const authHeader = await this.getActiveBearerToken();\n\n    const response = await this.fetch(\n      new Request(keyConnectorUrl + \"/user-keys\", {\n        cache: \"no-store\",\n        method: \"POST\",\n        headers: new Headers({\n          Accept: \"application/json\",\n          Authorization: \"Bearer \" + authHeader,\n          \"Content-Type\": \"application/json; charset=utf-8\",\n        }),\n        body: JSON.stringify(request),\n      })\n    );\n\n    if (response.status !== 200) {\n      const error = await this.handleError(response, false, true);\n      return Promise.reject(error);\n    }\n  }\n\n  async getKeyConnectorAlive(keyConnectorUrl: string) {\n    const response = await this.fetch(\n      new Request(keyConnectorUrl + \"/alive\", {\n        cache: \"no-store\",\n        method: \"GET\",\n        headers: new Headers({\n          Accept: \"application/json\",\n          \"Content-Type\": \"application/json; charset=utf-8\",\n        }),\n      })\n    );\n\n    if (response.status !== 200) {\n      const error = await this.handleError(response, false, true);\n      return Promise.reject(error);\n    }\n  }\n\n  async getOrganizationExport(organizationId: string): Promise<OrganizationExportResponse> {\n    const r = await this.send(\n      \"GET\",\n      \"/organizations/\" + organizationId + \"/export\",\n      null,\n      true,\n      true\n    );\n    return new OrganizationExportResponse(r);\n  }\n\n  // Helpers\n\n  async getActiveBearerToken(): Promise<string> {\n    let accessToken = await this.tokenService.getToken();\n    if (await this.tokenService.tokenNeedsRefresh()) {\n      await this.doAuthRefresh();\n      accessToken = await this.tokenService.getToken();\n    }\n    return accessToken;\n  }\n\n  async fetch(request: Request): Promise<Response> {\n    if (request.method === \"GET\") {\n      request.headers.set(\"Cache-Control\", \"no-store\");\n      request.headers.set(\"Pragma\", \"no-cache\");\n    }\n    request.headers.set(\"Bitwarden-Client-Name\", this.platformUtilsService.getClientType());\n    request.headers.set(\n      \"Bitwarden-Client-Version\",\n      await this.platformUtilsService.getApplicationVersionNumber()\n    );\n    return this.nativeFetch(request);\n  }\n\n  nativeFetch(request: Request): Promise<Response> {\n    return fetch(request);\n  }\n\n  async preValidateSso(identifier: string): Promise<SsoPreValidateResponse> {\n    if (identifier == null || identifier === \"\") {\n      throw new Error(\"Organization Identifier was not provided.\");\n    }\n    const headers = new Headers({\n      Accept: \"application/json\",\n      \"Device-Type\": this.deviceType,\n    });\n    if (this.customUserAgent != null) {\n      headers.set(\"User-Agent\", this.customUserAgent);\n    }\n\n    const path = `/account/prevalidate?domainHint=${encodeURIComponent(identifier)}`;\n    const response = await this.fetch(\n      new Request(this.environmentService.getIdentityUrl() + path, {\n        cache: \"no-store\",\n        credentials: this.getCredentials(),\n        headers: headers,\n        method: \"GET\",\n      })\n    );\n\n    if (response.status === 200) {\n      const body = await response.json();\n      return new SsoPreValidateResponse(body);\n    } else {\n      const error = await this.handleError(response, false, true);\n      return Promise.reject(error);\n    }\n  }\n\n  async postCreateSponsorship(\n    sponsoredOrgId: string,\n    request: OrganizationSponsorshipCreateRequest\n  ): Promise<void> {\n    return await this.send(\n      \"POST\",\n      \"/organization/sponsorship/\" +\n        (this.platformUtilsService.isSelfHost() ? \"self-hosted/\" : \"\") +\n        sponsoredOrgId +\n        \"/families-for-enterprise\",\n      request,\n      true,\n      false\n    );\n  }\n\n  async getSponsorshipSyncStatus(\n    sponsoredOrgId: string\n  ): Promise<OrganizationSponsorshipSyncStatusResponse> {\n    const response = await this.send(\n      \"GET\",\n      \"/organization/sponsorship/\" + sponsoredOrgId + \"/sync-status\",\n      null,\n      true,\n      true\n    );\n    return new OrganizationSponsorshipSyncStatusResponse(response);\n  }\n\n  async deleteRevokeSponsorship(sponsoringOrganizationId: string): Promise<void> {\n    return await this.send(\n      \"DELETE\",\n      \"/organization/sponsorship/\" +\n        (this.platformUtilsService.isSelfHost() ? \"self-hosted/\" : \"\") +\n        sponsoringOrganizationId,\n      null,\n      true,\n      false\n    );\n  }\n\n  async deleteRemoveSponsorship(sponsoringOrgId: string): Promise<void> {\n    return await this.send(\n      \"DELETE\",\n      \"/organization/sponsorship/sponsored/\" + sponsoringOrgId,\n      null,\n      true,\n      false\n    );\n  }\n\n  async postPreValidateSponsorshipToken(sponsorshipToken: string): Promise<boolean> {\n    const r = await this.send(\n      \"POST\",\n      \"/organization/sponsorship/validate-token?sponsorshipToken=\" +\n        encodeURIComponent(sponsorshipToken),\n      null,\n      true,\n      true\n    );\n    return r as boolean;\n  }\n\n  async postRedeemSponsorship(\n    sponsorshipToken: string,\n    request: OrganizationSponsorshipRedeemRequest\n  ): Promise<void> {\n    return await this.send(\n      \"POST\",\n      \"/organization/sponsorship/redeem?sponsorshipToken=\" + encodeURIComponent(sponsorshipToken),\n      request,\n      true,\n      false\n    );\n  }\n\n  async postResendSponsorshipOffer(sponsoringOrgId: string): Promise<void> {\n    return await this.send(\n      \"POST\",\n      \"/organization/sponsorship/\" + sponsoringOrgId + \"/families-for-enterprise/resend\",\n      null,\n      true,\n      false\n    );\n  }\n\n  protected async doAuthRefresh(): Promise<void> {\n    const refreshToken = await this.tokenService.getRefreshToken();\n    if (refreshToken != null && refreshToken !== \"\") {\n      return this.doRefreshToken();\n    }\n\n    const clientId = await this.tokenService.getClientId();\n    const clientSecret = await this.tokenService.getClientSecret();\n    if (!Utils.isNullOrWhitespace(clientId) && !Utils.isNullOrWhitespace(clientSecret)) {\n      return this.doApiTokenRefresh();\n    }\n\n    throw new Error(\"Cannot refresh token, no refresh token or api keys are stored\");\n  }\n\n  protected async doRefreshToken(): Promise<void> {\n    const refreshToken = await this.tokenService.getRefreshToken();\n    if (refreshToken == null || refreshToken === \"\") {\n      throw new Error();\n    }\n    const headers = new Headers({\n      \"Content-Type\": \"application/x-www-form-urlencoded; charset=utf-8\",\n      Accept: \"application/json\",\n      \"Device-Type\": this.deviceType,\n    });\n    if (this.customUserAgent != null) {\n      headers.set(\"User-Agent\", this.customUserAgent);\n    }\n\n    const decodedToken = await this.tokenService.decodeToken();\n    const response = await this.fetch(\n      new Request(this.environmentService.getIdentityUrl() + \"/connect/token\", {\n        body: this.qsStringify({\n          grant_type: \"refresh_token\",\n          client_id: decodedToken.client_id,\n          refresh_token: refreshToken,\n        }),\n        cache: \"no-store\",\n        credentials: this.getCredentials(),\n        headers: headers,\n        method: \"POST\",\n      })\n    );\n\n    if (response.status === 200) {\n      const responseJson = await response.json();\n      const tokenResponse = new IdentityTokenResponse(responseJson);\n      await this.tokenService.setTokens(\n        tokenResponse.accessToken,\n        tokenResponse.refreshToken,\n        null\n      );\n    } else {\n      const error = await this.handleError(response, true, true);\n      return Promise.reject(error);\n    }\n  }\n\n  protected async doApiTokenRefresh(): Promise<void> {\n    const clientId = await this.tokenService.getClientId();\n    const clientSecret = await this.tokenService.getClientSecret();\n\n    const appId = await this.appIdService.getAppId();\n    const deviceRequest = new DeviceRequest(appId, this.platformUtilsService);\n    const tokenRequest = new UserApiTokenRequest(\n      clientId,\n      clientSecret,\n      new TokenTwoFactorRequest(),\n      deviceRequest\n    );\n\n    const response = await this.postIdentityToken(tokenRequest);\n    if (!(response instanceof IdentityTokenResponse)) {\n      throw new Error(\"Invalid response received when refreshing api token\");\n    }\n\n    await this.tokenService.setToken(response.accessToken);\n  }\n\n  async send(\n    method: \"GET\" | \"POST\" | \"PUT\" | \"DELETE\",\n    path: string,\n    body: any,\n    authed: boolean,\n    hasResponse: boolean,\n    apiUrl?: string,\n    alterHeaders?: (headers: Headers) => void\n  ): Promise<any> {\n    apiUrl = Utils.isNullOrWhitespace(apiUrl) ? this.environmentService.getApiUrl() : apiUrl;\n\n    // Prevent directory traversal from malicious paths\n    const pathParts = path.split(\"?\");\n    const requestUrl =\n      apiUrl + Utils.normalizePath(pathParts[0]) + (pathParts.length > 1 ? `?${pathParts[1]}` : \"\");\n\n    const headers = new Headers({\n      \"Device-Type\": this.deviceType,\n    });\n    if (this.customUserAgent != null) {\n      headers.set(\"User-Agent\", this.customUserAgent);\n    }\n\n    const requestInit: RequestInit = {\n      cache: \"no-store\",\n      credentials: this.getCredentials(),\n      method: method,\n    };\n\n    if (authed) {\n      const authHeader = await this.getActiveBearerToken();\n      headers.set(\"Authorization\", \"Bearer \" + authHeader);\n    }\n    if (body != null) {\n      if (typeof body === \"string\") {\n        requestInit.body = body;\n        headers.set(\"Content-Type\", \"application/x-www-form-urlencoded; charset=utf-8\");\n      } else if (typeof body === \"object\") {\n        if (body instanceof FormData) {\n          requestInit.body = body;\n        } else {\n          headers.set(\"Content-Type\", \"application/json; charset=utf-8\");\n          requestInit.body = JSON.stringify(body);\n        }\n      }\n    }\n    if (hasResponse) {\n      headers.set(\"Accept\", \"application/json\");\n    }\n    if (alterHeaders != null) {\n      alterHeaders(headers);\n    }\n\n    requestInit.headers = headers;\n    const response = await this.fetch(new Request(requestUrl, requestInit));\n\n    const responseType = response.headers.get(\"content-type\");\n    const responseIsJson = responseType != null && responseType.indexOf(\"application/json\") !== -1;\n    if (hasResponse && response.status === 200 && responseIsJson) {\n      const responseJson = await response.json();\n      return responseJson;\n    } else if (response.status !== 200) {\n      const error = await this.handleError(response, false, authed);\n      return Promise.reject(error);\n    }\n  }\n\n  private async handleError(\n    response: Response,\n    tokenError: boolean,\n    authed: boolean\n  ): Promise<ErrorResponse> {\n    let responseJson: any = null;\n    if (this.isJsonResponse(response)) {\n      responseJson = await response.json();\n    } else if (this.isTextResponse(response)) {\n      responseJson = { Message: await response.text() };\n    }\n\n    if (authed) {\n      if (\n        response.status === 401 ||\n        response.status === 403 ||\n        (tokenError &&\n          response.status === 400 &&\n          responseJson != null &&\n          responseJson.error === \"invalid_grant\")\n      ) {\n        await this.logoutCallback(true);\n        return null;\n      }\n    }\n\n    return new ErrorResponse(responseJson, response.status, tokenError);\n  }\n\n  private qsStringify(params: any): string {\n    return Object.keys(params)\n      .map((key) => {\n        return encodeURIComponent(key) + \"=\" + encodeURIComponent(params[key]);\n      })\n      .join(\"&\");\n  }\n\n  private getCredentials(): RequestCredentials {\n    if (!this.isWebClient || this.environmentService.hasBaseUrl()) {\n      return \"include\";\n    }\n    return undefined;\n  }\n\n  private addEventParameters(base: string, start: string, end: string, token: string) {\n    if (start != null) {\n      base += \"?start=\" + start;\n    }\n    if (end != null) {\n      base += base.indexOf(\"?\") > -1 ? \"&\" : \"?\";\n      base += \"end=\" + end;\n    }\n    if (token != null) {\n      base += base.indexOf(\"?\") > -1 ? \"&\" : \"?\";\n      base += \"continuationToken=\" + token;\n    }\n    return base;\n  }\n\n  private isJsonResponse(response: Response): boolean {\n    const typeHeader = response.headers.get(\"content-type\");\n    return typeHeader != null && typeHeader.indexOf(\"application/json\") > -1;\n  }\n\n  private isTextResponse(response: Response): boolean {\n    const typeHeader = response.headers.get(\"content-type\");\n    return typeHeader != null && typeHeader.indexOf(\"text\") > -1;\n  }\n}\n","import { AppIdService as AppIdServiceAbstraction } from \"../abstractions/appId.service\";\nimport { AbstractStorageService } from \"../abstractions/storage.service\";\nimport { HtmlStorageLocation } from \"../enums/htmlStorageLocation\";\nimport { Utils } from \"../misc/utils\";\n\nexport class AppIdService implements AppIdServiceAbstraction {\n  constructor(private storageService: AbstractStorageService) {}\n\n  getAppId(): Promise<string> {\n    return this.makeAndGetAppId(\"appId\");\n  }\n\n  getAnonymousAppId(): Promise<string> {\n    return this.makeAndGetAppId(\"anonymousAppId\");\n  }\n\n  private async makeAndGetAppId(key: string) {\n    const existingId = await this.storageService.get<string>(key, {\n      htmlStorageLocation: HtmlStorageLocation.Local,\n    });\n    if (existingId != null) {\n      return existingId;\n    }\n\n    const guid = Utils.newGuid();\n    await this.storageService.save(key, guid, {\n      htmlStorageLocation: HtmlStorageLocation.Local,\n    });\n    return guid;\n  }\n}\n","import { ApiService } from \"../abstractions/api.service\";\nimport { AuditService as AuditServiceAbstraction } from \"../abstractions/audit.service\";\nimport { CryptoFunctionService } from \"../abstractions/cryptoFunction.service\";\nimport { throttle } from \"../misc/throttle\";\nimport { Utils } from \"../misc/utils\";\nimport { BreachAccountResponse } from \"../models/response/breach-account.response\";\nimport { ErrorResponse } from \"../models/response/error.response\";\n\nconst PwnedPasswordsApi = \"https://api.pwnedpasswords.com/range/\";\n\nexport class AuditService implements AuditServiceAbstraction {\n  constructor(\n    private cryptoFunctionService: CryptoFunctionService,\n    private apiService: ApiService\n  ) {}\n\n  @throttle(100, () => \"passwordLeaked\")\n  async passwordLeaked(password: string): Promise<number> {\n    const hashBytes = await this.cryptoFunctionService.hash(password, \"sha1\");\n    const hash = Utils.fromBufferToHex(hashBytes).toUpperCase();\n    const hashStart = hash.substr(0, 5);\n    const hashEnding = hash.substr(5);\n\n    const response = await this.apiService.nativeFetch(new Request(PwnedPasswordsApi + hashStart));\n    const leakedHashes = await response.text();\n    const match = leakedHashes.split(/\\r?\\n/).find((v) => {\n      return v.split(\":\")[0] === hashEnding;\n    });\n\n    return match != null ? parseInt(match.split(\":\")[1], 10) : 0;\n  }\n\n  async breachedAccounts(username: string): Promise<BreachAccountResponse[]> {\n    try {\n      return await this.apiService.getHibpBreach(username);\n    } catch (e) {\n      const error = e as ErrorResponse;\n      if (error.statusCode === 404) {\n        return [];\n      }\n      throw new Error();\n    }\n  }\n}\n","/**\n * Use as a Decorator on async functions, it will limit how many times the function can be\n * in-flight at a time.\n *\n * Calls beyond the limit will be queued, and run when one of the active calls finishes\n */\nexport function throttle(limit: number, throttleKey: (args: any[]) => string) {\n  return <T>(\n    target: any,\n    propertyKey: string | symbol,\n    descriptor: TypedPropertyDescriptor<(...args: any[]) => Promise<T>>\n  ) => {\n    const originalMethod: () => Promise<T> = descriptor.value;\n    const allThrottles = new Map<any, Map<string, (() => void)[]>>();\n\n    const getThrottles = (obj: any) => {\n      let throttles = allThrottles.get(obj);\n      if (throttles != null) {\n        return throttles;\n      }\n      throttles = new Map<string, (() => void)[]>();\n      allThrottles.set(obj, throttles);\n      return throttles;\n    };\n\n    return {\n      value: function (...args: any[]) {\n        const throttles = getThrottles(this);\n        const argsThrottleKey = throttleKey(args);\n        let queue = throttles.get(argsThrottleKey);\n        if (queue == null) {\n          queue = [];\n          throttles.set(argsThrottleKey, queue);\n        }\n\n        return new Promise<T>((resolve, reject) => {\n          const exec = () => {\n            const onFinally = () => {\n              queue.splice(queue.indexOf(exec), 1);\n              if (queue.length >= limit) {\n                queue[limit - 1]();\n              } else if (queue.length === 0) {\n                throttles.delete(argsThrottleKey);\n                if (throttles.size === 0) {\n                  allThrottles.delete(this);\n                }\n              }\n            };\n            originalMethod\n              .apply(this, args)\n              .then((val: any) => {\n                onFinally();\n                return val;\n              })\n              .catch((err: any) => {\n                onFinally();\n                throw err;\n              })\n              .then(resolve, reject);\n          };\n          queue.push(exec);\n          if (queue.length <= limit) {\n            exec();\n          }\n        });\n      },\n    };\n  };\n}\n","import { ClientType } from \"../../../enums/clientType\";\nimport { Utils } from \"../../../misc/utils\";\nimport { CaptchaProtectedRequest } from \"../captcha-protected.request\";\nimport { DeviceRequest } from \"../device.request\";\n\nimport { TokenTwoFactorRequest } from \"./token-two-factor.request\";\nimport { TokenRequest } from \"./token.request\";\n\nexport class PasswordTokenRequest extends TokenRequest implements CaptchaProtectedRequest {\n  constructor(\n    public email: string,\n    public masterPasswordHash: string,\n    public captchaResponse: string,\n    protected twoFactor: TokenTwoFactorRequest,\n    device?: DeviceRequest\n  ) {\n    super(twoFactor, device);\n  }\n\n  toIdentityToken(clientId: ClientType) {\n    const obj = super.toIdentityToken(clientId);\n\n    obj.grant_type = \"password\";\n    obj.username = this.email;\n    obj.password = this.masterPasswordHash;\n\n    if (this.captchaResponse != null) {\n      obj.captchaResponse = this.captchaResponse;\n    }\n\n    return obj;\n  }\n\n  alterIdentityTokenHeaders(headers: Headers) {\n    headers.set(\"Auth-Email\", Utils.fromUtf8ToUrlB64(this.email));\n  }\n}\n","import { TwoFactorProviderType } from \"../../enums/twoFactorProviderType\";\nimport { Utils } from \"../../misc/utils\";\n\nexport class AuthResult {\n  captchaSiteKey = \"\";\n  resetMasterPassword = false;\n  forcePasswordReset = false;\n  twoFactorProviders: Map<TwoFactorProviderType, { [key: string]: string }> = null;\n\n  get requiresCaptcha() {\n    return !Utils.isNullOrWhitespace(this.captchaSiteKey);\n  }\n\n  get requiresTwoFactor() {\n    return this.twoFactorProviders != null;\n  }\n}\n","import { ApiService } from \"../../abstractions/api.service\";\nimport { AppIdService } from \"../../abstractions/appId.service\";\nimport { CryptoService } from \"../../abstractions/crypto.service\";\nimport { LogService } from \"../../abstractions/log.service\";\nimport { MessagingService } from \"../../abstractions/messaging.service\";\nimport { PlatformUtilsService } from \"../../abstractions/platformUtils.service\";\nimport { StateService } from \"../../abstractions/state.service\";\nimport { TokenService } from \"../../abstractions/token.service\";\nimport { TwoFactorService } from \"../../abstractions/twoFactor.service\";\nimport { TwoFactorProviderType } from \"../../enums/twoFactorProviderType\";\nimport { Account, AccountProfile, AccountTokens } from \"../../models/domain/account\";\nimport { AuthResult } from \"../../models/domain/auth-result\";\nimport {\n  UserApiLogInCredentials,\n  PasswordLogInCredentials,\n  SsoLogInCredentials,\n  PasswordlessLogInCredentials,\n} from \"../../models/domain/log-in-credentials\";\nimport { DeviceRequest } from \"../../models/request/device.request\";\nimport { PasswordTokenRequest } from \"../../models/request/identity-token/password-token.request\";\nimport { SsoTokenRequest } from \"../../models/request/identity-token/sso-token.request\";\nimport { TokenTwoFactorRequest } from \"../../models/request/identity-token/token-two-factor.request\";\nimport { UserApiTokenRequest } from \"../../models/request/identity-token/user-api-token.request\";\nimport { KeysRequest } from \"../../models/request/keys.request\";\nimport { IdentityCaptchaResponse } from \"../../models/response/identity-captcha.response\";\nimport { IdentityTokenResponse } from \"../../models/response/identity-token.response\";\nimport { IdentityTwoFactorResponse } from \"../../models/response/identity-two-factor.response\";\n\nexport abstract class LogInStrategy {\n  protected abstract tokenRequest: UserApiTokenRequest | PasswordTokenRequest | SsoTokenRequest;\n  protected captchaBypassToken: string = null;\n\n  constructor(\n    protected cryptoService: CryptoService,\n    protected apiService: ApiService,\n    protected tokenService: TokenService,\n    protected appIdService: AppIdService,\n    protected platformUtilsService: PlatformUtilsService,\n    protected messagingService: MessagingService,\n    protected logService: LogService,\n    protected stateService: StateService,\n    protected twoFactorService: TwoFactorService\n  ) {}\n\n  abstract logIn(\n    credentials:\n      | UserApiLogInCredentials\n      | PasswordLogInCredentials\n      | SsoLogInCredentials\n      | PasswordlessLogInCredentials\n  ): Promise<AuthResult>;\n\n  // The user key comes from different sources depending on the login strategy\n  protected abstract setUserKey(response: IdentityTokenResponse): Promise<void>;\n\n  async logInTwoFactor(\n    twoFactor: TokenTwoFactorRequest,\n    captchaResponse: string = null\n  ): Promise<AuthResult> {\n    this.tokenRequest.setTwoFactor(twoFactor);\n    return this.startLogIn();\n  }\n\n  protected async startLogIn(): Promise<AuthResult> {\n    this.twoFactorService.clearSelectedProvider();\n\n    const response = await this.apiService.postIdentityToken(this.tokenRequest);\n\n    if (response instanceof IdentityTwoFactorResponse) {\n      return this.processTwoFactorResponse(response);\n    } else if (response instanceof IdentityCaptchaResponse) {\n      return this.processCaptchaResponse(response);\n    } else if (response instanceof IdentityTokenResponse) {\n      return this.processTokenResponse(response);\n    }\n\n    throw new Error(\"Invalid response object.\");\n  }\n\n  protected async buildDeviceRequest() {\n    const appId = await this.appIdService.getAppId();\n    return new DeviceRequest(appId, this.platformUtilsService);\n  }\n\n  protected async buildTwoFactor(userProvidedTwoFactor?: TokenTwoFactorRequest) {\n    if (userProvidedTwoFactor != null) {\n      return userProvidedTwoFactor;\n    }\n\n    const storedTwoFactorToken = await this.tokenService.getTwoFactorToken();\n    if (storedTwoFactorToken != null) {\n      return new TokenTwoFactorRequest(TwoFactorProviderType.Remember, storedTwoFactorToken, false);\n    }\n\n    return new TokenTwoFactorRequest();\n  }\n\n  protected async saveAccountInformation(tokenResponse: IdentityTokenResponse) {\n    const accountInformation = await this.tokenService.decodeToken(tokenResponse.accessToken);\n    await this.stateService.addAccount(\n      new Account({\n        profile: {\n          ...new AccountProfile(),\n          ...{\n            userId: accountInformation.sub,\n            name: accountInformation.name,\n            email: accountInformation.email,\n            hasPremiumPersonally: accountInformation.premium,\n            kdfIterations: tokenResponse.kdfIterations,\n            kdfMemory: tokenResponse.kdfMemory,\n            kdfParallelism: tokenResponse.kdfParallelism,\n            kdfType: tokenResponse.kdf,\n          },\n        },\n        tokens: {\n          ...new AccountTokens(),\n          ...{\n            accessToken: tokenResponse.accessToken,\n            refreshToken: tokenResponse.refreshToken,\n          },\n        },\n      })\n    );\n  }\n\n  protected async processTokenResponse(response: IdentityTokenResponse): Promise<AuthResult> {\n    const result = new AuthResult();\n    result.resetMasterPassword = response.resetMasterPassword;\n    result.forcePasswordReset = response.forcePasswordReset;\n\n    await this.saveAccountInformation(response);\n\n    if (response.twoFactorToken != null) {\n      await this.tokenService.setTwoFactorToken(response);\n    }\n\n    await this.setUserKey(response);\n\n    // Must come after the user Key is set, otherwise createKeyPairForOldAccount will fail\n    const newSsoUser = response.key == null;\n    if (!newSsoUser) {\n      await this.cryptoService.setEncKey(response.key);\n      await this.cryptoService.setEncPrivateKey(\n        response.privateKey ?? (await this.createKeyPairForOldAccount())\n      );\n    }\n\n    this.messagingService.send(\"loggedIn\");\n\n    return result;\n  }\n\n  private async processTwoFactorResponse(response: IdentityTwoFactorResponse): Promise<AuthResult> {\n    const result = new AuthResult();\n    result.twoFactorProviders = response.twoFactorProviders2;\n    this.twoFactorService.setProviders(response);\n    this.captchaBypassToken = response.captchaToken ?? null;\n    return result;\n  }\n\n  private async processCaptchaResponse(response: IdentityCaptchaResponse): Promise<AuthResult> {\n    const result = new AuthResult();\n    result.captchaSiteKey = response.siteKey;\n    return result;\n  }\n\n  private async createKeyPairForOldAccount() {\n    try {\n      const [publicKey, privateKey] = await this.cryptoService.makeKeyPair();\n      await this.apiService.postAccountKeys(new KeysRequest(publicKey, privateKey.encryptedString));\n      return privateKey.encryptedString;\n    } catch (e) {\n      this.logService.error(e);\n    }\n  }\n}\n","import { ApiService } from \"../../abstractions/api.service\";\nimport { AppIdService } from \"../../abstractions/appId.service\";\nimport { AuthService } from \"../../abstractions/auth.service\";\nimport { CryptoService } from \"../../abstractions/crypto.service\";\nimport { LogService } from \"../../abstractions/log.service\";\nimport { MessagingService } from \"../../abstractions/messaging.service\";\nimport { PlatformUtilsService } from \"../../abstractions/platformUtils.service\";\nimport { StateService } from \"../../abstractions/state.service\";\nimport { TokenService } from \"../../abstractions/token.service\";\nimport { TwoFactorService } from \"../../abstractions/twoFactor.service\";\nimport { HashPurpose } from \"../../enums/hashPurpose\";\nimport { AuthResult } from \"../../models/domain/auth-result\";\nimport { PasswordLogInCredentials } from \"../../models/domain/log-in-credentials\";\nimport { SymmetricCryptoKey } from \"../../models/domain/symmetric-crypto-key\";\nimport { PasswordTokenRequest } from \"../../models/request/identity-token/password-token.request\";\nimport { TokenTwoFactorRequest } from \"../../models/request/identity-token/token-two-factor.request\";\n\nimport { LogInStrategy } from \"./logIn.strategy\";\n\nexport class PasswordLogInStrategy extends LogInStrategy {\n  get email() {\n    return this.tokenRequest.email;\n  }\n\n  get masterPasswordHash() {\n    return this.tokenRequest.masterPasswordHash;\n  }\n\n  tokenRequest: PasswordTokenRequest;\n\n  private localHashedPassword: string;\n  private key: SymmetricCryptoKey;\n\n  constructor(\n    cryptoService: CryptoService,\n    apiService: ApiService,\n    tokenService: TokenService,\n    appIdService: AppIdService,\n    platformUtilsService: PlatformUtilsService,\n    messagingService: MessagingService,\n    logService: LogService,\n    stateService: StateService,\n    twoFactorService: TwoFactorService,\n    private authService: AuthService\n  ) {\n    super(\n      cryptoService,\n      apiService,\n      tokenService,\n      appIdService,\n      platformUtilsService,\n      messagingService,\n      logService,\n      stateService,\n      twoFactorService\n    );\n  }\n\n  async setUserKey() {\n    await this.cryptoService.setKey(this.key);\n    await this.cryptoService.setKeyHash(this.localHashedPassword);\n  }\n\n  async logInTwoFactor(\n    twoFactor: TokenTwoFactorRequest,\n    captchaResponse: string\n  ): Promise<AuthResult> {\n    this.tokenRequest.captchaResponse = captchaResponse ?? this.captchaBypassToken;\n    return super.logInTwoFactor(twoFactor);\n  }\n\n  async logIn(credentials: PasswordLogInCredentials) {\n    const { email, masterPassword, captchaToken, twoFactor } = credentials;\n\n    this.key = await this.authService.makePreloginKey(masterPassword, email);\n\n    // Hash the password early (before authentication) so we don't persist it in memory in plaintext\n    this.localHashedPassword = await this.cryptoService.hashPassword(\n      masterPassword,\n      this.key,\n      HashPurpose.LocalAuthorization\n    );\n    const hashedPassword = await this.cryptoService.hashPassword(masterPassword, this.key);\n\n    this.tokenRequest = new PasswordTokenRequest(\n      email,\n      hashedPassword,\n      captchaToken,\n      await this.buildTwoFactor(twoFactor),\n      await this.buildDeviceRequest()\n    );\n\n    return this.startLogIn();\n  }\n}\n","import { ApiService } from \"../../abstractions/api.service\";\nimport { AppIdService } from \"../../abstractions/appId.service\";\nimport { AuthService } from \"../../abstractions/auth.service\";\nimport { CryptoService } from \"../../abstractions/crypto.service\";\nimport { LogService } from \"../../abstractions/log.service\";\nimport { MessagingService } from \"../../abstractions/messaging.service\";\nimport { PlatformUtilsService } from \"../../abstractions/platformUtils.service\";\nimport { StateService } from \"../../abstractions/state.service\";\nimport { TokenService } from \"../../abstractions/token.service\";\nimport { TwoFactorService } from \"../../abstractions/twoFactor.service\";\nimport { AuthResult } from \"../../models/domain/auth-result\";\nimport { PasswordlessLogInCredentials } from \"../../models/domain/log-in-credentials\";\nimport { PasswordTokenRequest } from \"../../models/request/identity-token/password-token.request\";\nimport { TokenTwoFactorRequest } from \"../../models/request/identity-token/token-two-factor.request\";\n\nimport { LogInStrategy } from \"./logIn.strategy\";\n\nexport class PasswordlessLogInStrategy extends LogInStrategy {\n  get email() {\n    return this.tokenRequest.email;\n  }\n\n  get accessCode() {\n    return this.passwordlessCredentials.accessCode;\n  }\n\n  get authRequestId() {\n    return this.passwordlessCredentials.authRequestId;\n  }\n\n  tokenRequest: PasswordTokenRequest;\n  private passwordlessCredentials: PasswordlessLogInCredentials;\n\n  constructor(\n    cryptoService: CryptoService,\n    apiService: ApiService,\n    tokenService: TokenService,\n    appIdService: AppIdService,\n    platformUtilsService: PlatformUtilsService,\n    messagingService: MessagingService,\n    logService: LogService,\n    stateService: StateService,\n    twoFactorService: TwoFactorService,\n    private authService: AuthService\n  ) {\n    super(\n      cryptoService,\n      apiService,\n      tokenService,\n      appIdService,\n      platformUtilsService,\n      messagingService,\n      logService,\n      stateService,\n      twoFactorService\n    );\n  }\n\n  async setUserKey() {\n    await this.cryptoService.setKey(this.passwordlessCredentials.decKey);\n    await this.cryptoService.setKeyHash(this.passwordlessCredentials.localPasswordHash);\n  }\n\n  async logInTwoFactor(\n    twoFactor: TokenTwoFactorRequest,\n    captchaResponse: string\n  ): Promise<AuthResult> {\n    this.tokenRequest.captchaResponse = captchaResponse ?? this.captchaBypassToken;\n    return super.logInTwoFactor(twoFactor);\n  }\n\n  async logIn(credentials: PasswordlessLogInCredentials) {\n    this.passwordlessCredentials = credentials;\n\n    this.tokenRequest = new PasswordTokenRequest(\n      credentials.email,\n      credentials.accessCode,\n      null,\n      await this.buildTwoFactor(credentials.twoFactor),\n      await this.buildDeviceRequest()\n    );\n\n    this.tokenRequest.setPasswordlessAccessCode(credentials.authRequestId);\n    return this.startLogIn();\n  }\n}\n","import { DeviceRequest } from \"../device.request\";\n\nimport { TokenTwoFactorRequest } from \"./token-two-factor.request\";\nimport { TokenRequest } from \"./token.request\";\n\nexport class SsoTokenRequest extends TokenRequest {\n  constructor(\n    public code: string,\n    public codeVerifier: string,\n    public redirectUri: string,\n    protected twoFactor: TokenTwoFactorRequest,\n    device?: DeviceRequest\n  ) {\n    super(twoFactor, device);\n  }\n\n  toIdentityToken(clientId: string) {\n    const obj = super.toIdentityToken(clientId);\n\n    obj.grant_type = \"authorization_code\";\n    obj.code = this.code;\n    obj.code_verifier = this.codeVerifier;\n    obj.redirect_uri = this.redirectUri;\n\n    return obj;\n  }\n}\n","import { ApiService } from \"../../abstractions/api.service\";\nimport { AppIdService } from \"../../abstractions/appId.service\";\nimport { CryptoService } from \"../../abstractions/crypto.service\";\nimport { KeyConnectorService } from \"../../abstractions/keyConnector.service\";\nimport { LogService } from \"../../abstractions/log.service\";\nimport { MessagingService } from \"../../abstractions/messaging.service\";\nimport { PlatformUtilsService } from \"../../abstractions/platformUtils.service\";\nimport { StateService } from \"../../abstractions/state.service\";\nimport { TokenService } from \"../../abstractions/token.service\";\nimport { TwoFactorService } from \"../../abstractions/twoFactor.service\";\nimport { SsoLogInCredentials } from \"../../models/domain/log-in-credentials\";\nimport { SsoTokenRequest } from \"../../models/request/identity-token/sso-token.request\";\nimport { IdentityTokenResponse } from \"../../models/response/identity-token.response\";\n\nimport { LogInStrategy } from \"./logIn.strategy\";\n\nexport class SsoLogInStrategy extends LogInStrategy {\n  tokenRequest: SsoTokenRequest;\n  orgId: string;\n\n  constructor(\n    cryptoService: CryptoService,\n    apiService: ApiService,\n    tokenService: TokenService,\n    appIdService: AppIdService,\n    platformUtilsService: PlatformUtilsService,\n    messagingService: MessagingService,\n    logService: LogService,\n    stateService: StateService,\n    twoFactorService: TwoFactorService,\n    private keyConnectorService: KeyConnectorService\n  ) {\n    super(\n      cryptoService,\n      apiService,\n      tokenService,\n      appIdService,\n      platformUtilsService,\n      messagingService,\n      logService,\n      stateService,\n      twoFactorService\n    );\n  }\n\n  async setUserKey(tokenResponse: IdentityTokenResponse) {\n    const newSsoUser = tokenResponse.key == null;\n\n    if (tokenResponse.keyConnectorUrl != null) {\n      if (!newSsoUser) {\n        await this.keyConnectorService.getAndSetKey(tokenResponse.keyConnectorUrl);\n      } else {\n        await this.keyConnectorService.convertNewSsoUserToKeyConnector(tokenResponse, this.orgId);\n      }\n    }\n  }\n\n  async logIn(credentials: SsoLogInCredentials) {\n    this.orgId = credentials.orgId;\n    this.tokenRequest = new SsoTokenRequest(\n      credentials.code,\n      credentials.codeVerifier,\n      credentials.redirectUrl,\n      await this.buildTwoFactor(credentials.twoFactor),\n      await this.buildDeviceRequest()\n    );\n\n    return this.startLogIn();\n  }\n}\n","import { ApiService } from \"../../abstractions/api.service\";\nimport { AppIdService } from \"../../abstractions/appId.service\";\nimport { CryptoService } from \"../../abstractions/crypto.service\";\nimport { EnvironmentService } from \"../../abstractions/environment.service\";\nimport { KeyConnectorService } from \"../../abstractions/keyConnector.service\";\nimport { LogService } from \"../../abstractions/log.service\";\nimport { MessagingService } from \"../../abstractions/messaging.service\";\nimport { PlatformUtilsService } from \"../../abstractions/platformUtils.service\";\nimport { StateService } from \"../../abstractions/state.service\";\nimport { TokenService } from \"../../abstractions/token.service\";\nimport { TwoFactorService } from \"../../abstractions/twoFactor.service\";\nimport { UserApiLogInCredentials } from \"../../models/domain/log-in-credentials\";\nimport { UserApiTokenRequest } from \"../../models/request/identity-token/user-api-token.request\";\nimport { IdentityTokenResponse } from \"../../models/response/identity-token.response\";\n\nimport { LogInStrategy } from \"./logIn.strategy\";\n\nexport class UserApiLogInStrategy extends LogInStrategy {\n  tokenRequest: UserApiTokenRequest;\n\n  constructor(\n    cryptoService: CryptoService,\n    apiService: ApiService,\n    tokenService: TokenService,\n    appIdService: AppIdService,\n    platformUtilsService: PlatformUtilsService,\n    messagingService: MessagingService,\n    logService: LogService,\n    stateService: StateService,\n    twoFactorService: TwoFactorService,\n    private environmentService: EnvironmentService,\n    private keyConnectorService: KeyConnectorService\n  ) {\n    super(\n      cryptoService,\n      apiService,\n      tokenService,\n      appIdService,\n      platformUtilsService,\n      messagingService,\n      logService,\n      stateService,\n      twoFactorService\n    );\n  }\n\n  async setUserKey(tokenResponse: IdentityTokenResponse) {\n    if (tokenResponse.apiUseKeyConnector) {\n      const keyConnectorUrl = this.environmentService.getKeyConnectorUrl();\n      await this.keyConnectorService.getAndSetKey(keyConnectorUrl);\n    }\n  }\n\n  async logIn(credentials: UserApiLogInCredentials) {\n    this.tokenRequest = new UserApiTokenRequest(\n      credentials.clientId,\n      credentials.clientSecret,\n      await this.buildTwoFactor(),\n      await this.buildDeviceRequest()\n    );\n\n    return this.startLogIn();\n  }\n\n  protected async saveAccountInformation(tokenResponse: IdentityTokenResponse) {\n    await super.saveAccountInformation(tokenResponse);\n    await this.stateService.setApiKeyClientId(this.tokenRequest.clientId);\n    await this.stateService.setApiKeyClientSecret(this.tokenRequest.clientSecret);\n  }\n}\n","export class PasswordlessAuthRequest {\n  constructor(\n    readonly key: string,\n    readonly masterPasswordHash: string,\n    readonly deviceIdentifier: string,\n    readonly requestApproved: boolean\n  ) {}\n}\n","export class PreloginRequest {\n  email: string;\n\n  constructor(email: string) {\n    this.email = email;\n  }\n}\n","import { Observable, Subject } from \"rxjs\";\n\nimport { ApiService } from \"../abstractions/api.service\";\nimport { AppIdService } from \"../abstractions/appId.service\";\nimport { AuthService as AuthServiceAbstraction } from \"../abstractions/auth.service\";\nimport { CryptoService } from \"../abstractions/crypto.service\";\nimport { EncryptService } from \"../abstractions/encrypt.service\";\nimport { EnvironmentService } from \"../abstractions/environment.service\";\nimport { I18nService } from \"../abstractions/i18n.service\";\nimport { KeyConnectorService } from \"../abstractions/keyConnector.service\";\nimport { LogService } from \"../abstractions/log.service\";\nimport { MessagingService } from \"../abstractions/messaging.service\";\nimport { PlatformUtilsService } from \"../abstractions/platformUtils.service\";\nimport { StateService } from \"../abstractions/state.service\";\nimport { TokenService } from \"../abstractions/token.service\";\nimport { TwoFactorService } from \"../abstractions/twoFactor.service\";\nimport { AuthenticationStatus } from \"../enums/authenticationStatus\";\nimport { AuthenticationType } from \"../enums/authenticationType\";\nimport { KdfType } from \"../enums/kdfType\";\nimport { KeySuffixOptions } from \"../enums/keySuffixOptions\";\nimport { PasswordLogInStrategy } from \"../misc/logInStrategies/passwordLogin.strategy\";\nimport { PasswordlessLogInStrategy } from \"../misc/logInStrategies/passwordlessLogin.strategy\";\nimport { SsoLogInStrategy } from \"../misc/logInStrategies/ssoLogin.strategy\";\nimport { UserApiLogInStrategy } from \"../misc/logInStrategies/user-api-login.strategy\";\nimport { Utils } from \"../misc/utils\";\nimport { AuthResult } from \"../models/domain/auth-result\";\nimport { KdfConfig } from \"../models/domain/kdf-config\";\nimport {\n  UserApiLogInCredentials,\n  PasswordLogInCredentials,\n  SsoLogInCredentials,\n  PasswordlessLogInCredentials,\n} from \"../models/domain/log-in-credentials\";\nimport { SymmetricCryptoKey } from \"../models/domain/symmetric-crypto-key\";\nimport { TokenTwoFactorRequest } from \"../models/request/identity-token/token-two-factor.request\";\nimport { PasswordlessAuthRequest } from \"../models/request/passwordless-auth.request\";\nimport { PreloginRequest } from \"../models/request/prelogin.request\";\nimport { AuthRequestResponse } from \"../models/response/auth-request.response\";\nimport { ErrorResponse } from \"../models/response/error.response\";\nimport { AuthRequestPushNotification } from \"../models/response/notification.response\";\n\nconst sessionTimeoutLength = 2 * 60 * 1000; // 2 minutes\n\nexport class AuthService implements AuthServiceAbstraction {\n  get email(): string {\n    if (\n      this.logInStrategy instanceof PasswordLogInStrategy ||\n      this.logInStrategy instanceof PasswordlessLogInStrategy\n    ) {\n      return this.logInStrategy.email;\n    }\n\n    return null;\n  }\n\n  get masterPasswordHash(): string {\n    return this.logInStrategy instanceof PasswordLogInStrategy\n      ? this.logInStrategy.masterPasswordHash\n      : null;\n  }\n\n  get accessCode(): string {\n    return this.logInStrategy instanceof PasswordlessLogInStrategy\n      ? this.logInStrategy.accessCode\n      : null;\n  }\n\n  get authRequestId(): string {\n    return this.logInStrategy instanceof PasswordlessLogInStrategy\n      ? this.logInStrategy.authRequestId\n      : null;\n  }\n\n  private logInStrategy:\n    | UserApiLogInStrategy\n    | PasswordLogInStrategy\n    | SsoLogInStrategy\n    | PasswordlessLogInStrategy;\n  private sessionTimeout: any;\n\n  private pushNotificationSubject = new Subject<string>();\n\n  constructor(\n    protected cryptoService: CryptoService,\n    protected apiService: ApiService,\n    protected tokenService: TokenService,\n    protected appIdService: AppIdService,\n    protected platformUtilsService: PlatformUtilsService,\n    protected messagingService: MessagingService,\n    protected logService: LogService,\n    protected keyConnectorService: KeyConnectorService,\n    protected environmentService: EnvironmentService,\n    protected stateService: StateService,\n    protected twoFactorService: TwoFactorService,\n    protected i18nService: I18nService,\n    protected encryptService: EncryptService\n  ) {}\n\n  async logIn(\n    credentials:\n      | UserApiLogInCredentials\n      | PasswordLogInCredentials\n      | SsoLogInCredentials\n      | PasswordlessLogInCredentials\n  ): Promise<AuthResult> {\n    this.clearState();\n\n    let strategy:\n      | UserApiLogInStrategy\n      | PasswordLogInStrategy\n      | SsoLogInStrategy\n      | PasswordlessLogInStrategy;\n\n    switch (credentials.type) {\n      case AuthenticationType.Password:\n        strategy = new PasswordLogInStrategy(\n          this.cryptoService,\n          this.apiService,\n          this.tokenService,\n          this.appIdService,\n          this.platformUtilsService,\n          this.messagingService,\n          this.logService,\n          this.stateService,\n          this.twoFactorService,\n          this\n        );\n        break;\n      case AuthenticationType.Sso:\n        strategy = new SsoLogInStrategy(\n          this.cryptoService,\n          this.apiService,\n          this.tokenService,\n          this.appIdService,\n          this.platformUtilsService,\n          this.messagingService,\n          this.logService,\n          this.stateService,\n          this.twoFactorService,\n          this.keyConnectorService\n        );\n        break;\n      case AuthenticationType.UserApi:\n        strategy = new UserApiLogInStrategy(\n          this.cryptoService,\n          this.apiService,\n          this.tokenService,\n          this.appIdService,\n          this.platformUtilsService,\n          this.messagingService,\n          this.logService,\n          this.stateService,\n          this.twoFactorService,\n          this.environmentService,\n          this.keyConnectorService\n        );\n        break;\n      case AuthenticationType.Passwordless:\n        strategy = new PasswordlessLogInStrategy(\n          this.cryptoService,\n          this.apiService,\n          this.tokenService,\n          this.appIdService,\n          this.platformUtilsService,\n          this.messagingService,\n          this.logService,\n          this.stateService,\n          this.twoFactorService,\n          this\n        );\n        break;\n    }\n\n    const result = await strategy.logIn(credentials as any);\n\n    if (result?.requiresTwoFactor) {\n      this.saveState(strategy);\n    }\n    return result;\n  }\n\n  async logInTwoFactor(\n    twoFactor: TokenTwoFactorRequest,\n    captchaResponse: string\n  ): Promise<AuthResult> {\n    if (this.logInStrategy == null) {\n      throw new Error(this.i18nService.t(\"sessionTimeout\"));\n    }\n\n    try {\n      const result = await this.logInStrategy.logInTwoFactor(twoFactor, captchaResponse);\n\n      // Only clear state if 2FA token has been accepted, otherwise we need to be able to try again\n      if (!result.requiresTwoFactor && !result.requiresCaptcha) {\n        this.clearState();\n      }\n      return result;\n    } catch (e) {\n      // API exceptions are okay, but if there are any unhandled client-side errors then clear state to be safe\n      if (!(e instanceof ErrorResponse)) {\n        this.clearState();\n      }\n      throw e;\n    }\n  }\n\n  logOut(callback: () => void) {\n    callback();\n    this.messagingService.send(\"loggedOut\");\n  }\n\n  authingWithUserApiKey(): boolean {\n    return this.logInStrategy instanceof UserApiLogInStrategy;\n  }\n\n  authingWithSso(): boolean {\n    return this.logInStrategy instanceof SsoLogInStrategy;\n  }\n\n  authingWithPassword(): boolean {\n    return this.logInStrategy instanceof PasswordLogInStrategy;\n  }\n\n  authingWithPasswordless(): boolean {\n    return this.logInStrategy instanceof PasswordlessLogInStrategy;\n  }\n\n  async getAuthStatus(userId?: string): Promise<AuthenticationStatus> {\n    const isAuthenticated = await this.stateService.getIsAuthenticated({ userId: userId });\n    if (!isAuthenticated) {\n      return AuthenticationStatus.LoggedOut;\n    }\n\n    // Keys aren't stored for a device that is locked or logged out\n    // Make sure we're logged in before checking this, otherwise we could mix up those states\n    const neverLock =\n      (await this.cryptoService.hasKeyStored(KeySuffixOptions.Auto, userId)) &&\n      !(await this.stateService.getEverBeenUnlocked({ userId: userId }));\n    if (neverLock) {\n      // TODO: This also _sets_ the key so when we check memory in the next line it finds a key.\n      // We should refactor here.\n      await this.cryptoService.getKey(KeySuffixOptions.Auto, userId);\n    }\n\n    const hasKeyInMemory = await this.cryptoService.hasKeyInMemory(userId);\n    if (!hasKeyInMemory) {\n      return AuthenticationStatus.Locked;\n    }\n\n    return AuthenticationStatus.Unlocked;\n  }\n\n  async makePreloginKey(masterPassword: string, email: string): Promise<SymmetricCryptoKey> {\n    email = email.trim().toLowerCase();\n    let kdf: KdfType = null;\n    let kdfConfig: KdfConfig = null;\n    try {\n      const preloginResponse = await this.apiService.postPrelogin(new PreloginRequest(email));\n      if (preloginResponse != null) {\n        kdf = preloginResponse.kdf;\n        kdfConfig = new KdfConfig(\n          preloginResponse.kdfIterations,\n          preloginResponse.kdfMemory,\n          preloginResponse.kdfParallelism\n        );\n      }\n    } catch (e) {\n      if (e == null || e.statusCode !== 404) {\n        throw e;\n      }\n    }\n    return this.cryptoService.makeKey(masterPassword, email, kdf, kdfConfig);\n  }\n\n  async authResponsePushNotifiction(notification: AuthRequestPushNotification): Promise<any> {\n    this.pushNotificationSubject.next(notification.id);\n  }\n\n  getPushNotifcationObs$(): Observable<any> {\n    return this.pushNotificationSubject.asObservable();\n  }\n\n  async passwordlessLogin(\n    id: string,\n    key: string,\n    requestApproved: boolean\n  ): Promise<AuthRequestResponse> {\n    const pubKey = Utils.fromB64ToArray(key);\n    const encryptedKey = await this.cryptoService.rsaEncrypt(\n      (\n        await this.cryptoService.getKey()\n      ).encKey,\n      pubKey.buffer\n    );\n    const encryptedMasterPassword = await this.cryptoService.rsaEncrypt(\n      Utils.fromUtf8ToArray(await this.stateService.getKeyHash()),\n      pubKey.buffer\n    );\n    const request = new PasswordlessAuthRequest(\n      encryptedKey.encryptedString,\n      encryptedMasterPassword.encryptedString,\n      await this.appIdService.getAppId(),\n      requestApproved\n    );\n    return await this.apiService.putAuthRequest(id, request);\n  }\n\n  private saveState(\n    strategy:\n      | UserApiLogInStrategy\n      | PasswordLogInStrategy\n      | SsoLogInStrategy\n      | PasswordlessLogInStrategy\n  ) {\n    this.logInStrategy = strategy;\n    this.startSessionTimeout();\n  }\n\n  private clearState() {\n    this.logInStrategy = null;\n    this.clearSessionTimeout();\n  }\n\n  private startSessionTimeout() {\n    this.clearSessionTimeout();\n    this.sessionTimeout = setTimeout(() => this.clearState(), sessionTimeoutLength);\n  }\n\n  private clearSessionTimeout() {\n    if (this.sessionTimeout != null) {\n      clearTimeout(this.sessionTimeout);\n    }\n  }\n}\n","import { CollectionDetailsResponse } from \"../response/collection.response\";\n\nexport class CollectionData {\n  id: string;\n  organizationId: string;\n  name: string;\n  externalId: string;\n  readOnly: boolean;\n\n  constructor(response: CollectionDetailsResponse) {\n    this.id = response.id;\n    this.organizationId = response.organizationId;\n    this.name = response.name;\n    this.externalId = response.externalId;\n    this.readOnly = response.readOnly;\n  }\n}\n","import { Collection } from \"../domain/collection\";\nimport { ITreeNodeObject } from \"../domain/tree-node\";\nimport { CollectionAccessDetailsResponse } from \"../response/collection.response\";\n\nimport { View } from \"./view\";\n\nexport class CollectionView implements View, ITreeNodeObject {\n  id: string = null;\n  organizationId: string = null;\n  name: string = null;\n  externalId: string = null;\n  readOnly: boolean = null;\n  hidePasswords: boolean = null;\n\n  constructor(c?: Collection | CollectionAccessDetailsResponse) {\n    if (!c) {\n      return;\n    }\n\n    this.id = c.id;\n    this.organizationId = c.organizationId;\n    this.externalId = c.externalId;\n    if (c instanceof Collection) {\n      this.readOnly = c.readOnly;\n      this.hidePasswords = c.hidePasswords;\n    }\n  }\n}\n","import { CollectionData } from \"../data/collection.data\";\nimport { CollectionView } from \"../view/collection.view\";\n\nimport Domain from \"./domain-base\";\nimport { EncString } from \"./enc-string\";\n\nexport class Collection extends Domain {\n  id: string;\n  organizationId: string;\n  name: EncString;\n  externalId: string;\n  readOnly: boolean;\n  hidePasswords: boolean;\n\n  constructor(obj?: CollectionData) {\n    super();\n    if (obj == null) {\n      return;\n    }\n\n    this.buildDomainModel(\n      this,\n      obj,\n      {\n        id: null,\n        organizationId: null,\n        name: null,\n        externalId: null,\n        readOnly: null,\n        hidePasswords: null,\n      },\n      [\"id\", \"organizationId\", \"externalId\", \"readOnly\", \"hidePasswords\"]\n    );\n  }\n\n  decrypt(): Promise<CollectionView> {\n    return this.decryptObj(\n      new CollectionView(this),\n      {\n        name: null,\n      },\n      this.organizationId\n    );\n  }\n}\n","import { CollectionService as CollectionServiceAbstraction } from \"../abstractions/collection.service\";\nimport { CryptoService } from \"../abstractions/crypto.service\";\nimport { I18nService } from \"../abstractions/i18n.service\";\nimport { StateService } from \"../abstractions/state.service\";\nimport { ServiceUtils } from \"../misc/serviceUtils\";\nimport { Utils } from \"../misc/utils\";\nimport { CollectionData } from \"../models/data/collection.data\";\nimport { Collection } from \"../models/domain/collection\";\nimport { TreeNode } from \"../models/domain/tree-node\";\nimport { CollectionView } from \"../models/view/collection.view\";\n\nconst NestingDelimiter = \"/\";\n\nexport class CollectionService implements CollectionServiceAbstraction {\n  constructor(\n    private cryptoService: CryptoService,\n    private i18nService: I18nService,\n    private stateService: StateService\n  ) {}\n\n  async clearCache(userId?: string): Promise<void> {\n    await this.stateService.setDecryptedCollections(null, { userId: userId });\n  }\n\n  async encrypt(model: CollectionView): Promise<Collection> {\n    if (model.organizationId == null) {\n      throw new Error(\"Collection has no organization id.\");\n    }\n    const key = await this.cryptoService.getOrgKey(model.organizationId);\n    if (key == null) {\n      throw new Error(\"No key for this collection's organization.\");\n    }\n    const collection = new Collection();\n    collection.id = model.id;\n    collection.organizationId = model.organizationId;\n    collection.readOnly = model.readOnly;\n    collection.name = await this.cryptoService.encrypt(model.name, key);\n    return collection;\n  }\n\n  async decryptMany(collections: Collection[]): Promise<CollectionView[]> {\n    if (collections == null) {\n      return [];\n    }\n    const decCollections: CollectionView[] = [];\n    const promises: Promise<any>[] = [];\n    collections.forEach((collection) => {\n      promises.push(collection.decrypt().then((c) => decCollections.push(c)));\n    });\n    await Promise.all(promises);\n    return decCollections.sort(Utils.getSortFunction(this.i18nService, \"name\"));\n  }\n\n  async get(id: string): Promise<Collection> {\n    const collections = await this.stateService.getEncryptedCollections();\n    // eslint-disable-next-line\n    if (collections == null || !collections.hasOwnProperty(id)) {\n      return null;\n    }\n\n    return new Collection(collections[id]);\n  }\n\n  async getAll(): Promise<Collection[]> {\n    const collections = await this.stateService.getEncryptedCollections();\n    const response: Collection[] = [];\n    for (const id in collections) {\n      // eslint-disable-next-line\n      if (collections.hasOwnProperty(id)) {\n        response.push(new Collection(collections[id]));\n      }\n    }\n    return response;\n  }\n\n  async getAllDecrypted(): Promise<CollectionView[]> {\n    let decryptedCollections = await this.stateService.getDecryptedCollections();\n    if (decryptedCollections != null) {\n      return decryptedCollections;\n    }\n\n    const hasKey = await this.cryptoService.hasKey();\n    if (!hasKey) {\n      throw new Error(\"No key.\");\n    }\n\n    const collections = await this.getAll();\n    decryptedCollections = await this.decryptMany(collections);\n\n    await this.stateService.setDecryptedCollections(decryptedCollections);\n    return decryptedCollections;\n  }\n\n  async getAllNested(collections: CollectionView[] = null): Promise<TreeNode<CollectionView>[]> {\n    if (collections == null) {\n      collections = await this.getAllDecrypted();\n    }\n    const nodes: TreeNode<CollectionView>[] = [];\n    collections.forEach((c) => {\n      const collectionCopy = new CollectionView();\n      collectionCopy.id = c.id;\n      collectionCopy.organizationId = c.organizationId;\n      const parts = c.name != null ? c.name.replace(/^\\/+|\\/+$/g, \"\").split(NestingDelimiter) : [];\n      ServiceUtils.nestedTraverse(nodes, 0, parts, collectionCopy, null, NestingDelimiter);\n    });\n    return nodes;\n  }\n\n  /**\n   * @deprecated August 30 2022: Moved to new Vault Filter Service\n   * Remove when Desktop and Browser are updated\n   */\n  async getNested(id: string): Promise<TreeNode<CollectionView>> {\n    const collections = await this.getAllNested();\n    return ServiceUtils.getTreeNodeObjectFromList(collections, id) as TreeNode<CollectionView>;\n  }\n\n  async upsert(collection: CollectionData | CollectionData[]): Promise<any> {\n    let collections = await this.stateService.getEncryptedCollections();\n    if (collections == null) {\n      collections = {};\n    }\n\n    if (collection instanceof CollectionData) {\n      const c = collection as CollectionData;\n      collections[c.id] = c;\n    } else {\n      (collection as CollectionData[]).forEach((c) => {\n        collections[c.id] = c;\n      });\n    }\n\n    await this.replace(collections);\n  }\n\n  async replace(collections: { [id: string]: CollectionData }): Promise<any> {\n    await this.clearCache();\n    await this.stateService.setEncryptedCollections(collections);\n  }\n\n  async clear(userId?: string): Promise<any> {\n    await this.clearCache(userId);\n    await this.stateService.setEncryptedCollections(null, { userId: userId });\n  }\n\n  async delete(id: string | string[]): Promise<any> {\n    const collections = await this.stateService.getEncryptedCollections();\n    if (collections == null) {\n      return;\n    }\n\n    if (typeof id === \"string\") {\n      delete collections[id];\n    } else {\n      (id as string[]).forEach((i) => {\n        delete collections[i];\n      });\n    }\n\n    await this.replace(collections);\n  }\n}\n","import { BaseResponse } from \"./base.response\";\n\nexport class ServerConfigResponse extends BaseResponse {\n  version: string;\n  gitHash: string;\n  server: ThirdPartyServerConfigResponse;\n  environment: EnvironmentServerConfigResponse;\n\n  constructor(response: any) {\n    super(response);\n\n    if (response == null) {\n      return;\n    }\n\n    this.version = this.getResponseProperty(\"Version\");\n    this.gitHash = this.getResponseProperty(\"GitHash\");\n    this.server = new ThirdPartyServerConfigResponse(this.getResponseProperty(\"Server\"));\n    this.environment = new EnvironmentServerConfigResponse(this.getResponseProperty(\"Environment\"));\n  }\n}\n\nexport class EnvironmentServerConfigResponse extends BaseResponse {\n  vault: string;\n  api: string;\n  identity: string;\n  notifications: string;\n  sso: string;\n\n  constructor(data: any = null) {\n    super(data);\n\n    if (data == null) {\n      return;\n    }\n\n    this.vault = this.getResponseProperty(\"Vault\");\n    this.api = this.getResponseProperty(\"Api\");\n    this.identity = this.getResponseProperty(\"Identity\");\n    this.notifications = this.getResponseProperty(\"Notifications\");\n    this.sso = this.getResponseProperty(\"Sso\");\n  }\n}\n\nexport class ThirdPartyServerConfigResponse extends BaseResponse {\n  name: string;\n  url: string;\n\n  constructor(data: any = null) {\n    super(data);\n\n    if (data == null) {\n      return;\n    }\n\n    this.name = this.getResponseProperty(\"Name\");\n    this.url = this.getResponseProperty(\"Url\");\n  }\n}\n","import { Jsonify } from \"type-fest\";\n\nimport {\n  ServerConfigData,\n  ThirdPartyServerConfigData,\n  EnvironmentServerConfigData,\n} from \"../../models/data/server-config.data\";\n\nconst dayInMilliseconds = 24 * 3600 * 1000;\nconst eighteenHoursInMilliseconds = 18 * 3600 * 1000;\n\nexport class ServerConfig {\n  version: string;\n  gitHash: string;\n  server?: ThirdPartyServerConfigData;\n  environment?: EnvironmentServerConfigData;\n  utcDate: Date;\n\n  constructor(serverConfigData: ServerConfigData) {\n    this.version = serverConfigData.version;\n    this.gitHash = serverConfigData.gitHash;\n    this.server = serverConfigData.server;\n    this.utcDate = new Date(serverConfigData.utcDate);\n    this.environment = serverConfigData.environment;\n\n    if (this.server?.name == null && this.server?.url == null) {\n      this.server = null;\n    }\n  }\n\n  private getAgeInMilliseconds(): number {\n    return new Date().getTime() - this.utcDate?.getTime();\n  }\n\n  isValid(): boolean {\n    return this.getAgeInMilliseconds() <= dayInMilliseconds;\n  }\n\n  expiresSoon(): boolean {\n    return this.getAgeInMilliseconds() >= eighteenHoursInMilliseconds;\n  }\n\n  static fromJSON(obj: Jsonify<ServerConfig>): ServerConfig {\n    if (obj == null) {\n      return null;\n    }\n\n    return new ServerConfig(obj);\n  }\n}\n","export enum LogLevelType {\n  Debug,\n  Info,\n  Warning,\n  Error,\n}\n","import { BehaviorSubject, concatMap, map, switchMap, timer, EMPTY } from \"rxjs\";\n\nimport { ConfigApiServiceAbstraction } from \"../../abstractions/config/config-api.service.abstraction\";\nimport { ConfigServiceAbstraction } from \"../../abstractions/config/config.service.abstraction\";\nimport { ServerConfig } from \"../../abstractions/config/server-config\";\nimport { StateService } from \"../../abstractions/state.service\";\nimport { ServerConfigData } from \"../../models/data/server-config.data\";\n\nexport class ConfigService implements ConfigServiceAbstraction {\n  protected _serverConfig = new BehaviorSubject<ServerConfig | null>(null);\n  serverConfig$ = this._serverConfig.asObservable();\n\n  constructor(\n    private stateService: StateService,\n    private configApiService: ConfigApiServiceAbstraction\n  ) {\n    this.stateService.activeAccountUnlocked$\n      .pipe(\n        switchMap((unlocked) => {\n          if (!unlocked) {\n            this._serverConfig.next(null);\n            return EMPTY;\n          }\n\n          // Re-fetch the server config every hour\n          return timer(0, 3600 * 1000).pipe(map(() => unlocked));\n        }),\n        concatMap(async (unlocked) => {\n          return unlocked ? await this.buildServerConfig() : null;\n        })\n      )\n      .subscribe((serverConfig) => {\n        this._serverConfig.next(serverConfig);\n      });\n  }\n\n  private async buildServerConfig(): Promise<ServerConfig> {\n    const data = await this.stateService.getServerConfig();\n    const domain = data ? new ServerConfig(data) : null;\n\n    if (domain == null || !domain.isValid() || domain.expiresSoon()) {\n      const value = await this.fetchServerConfig();\n      return value ?? domain;\n    }\n\n    return domain;\n  }\n\n  private async fetchServerConfig(): Promise<ServerConfig> {\n    try {\n      const response = await this.configApiService.get();\n\n      if (response != null) {\n        const data = new ServerConfigData(response);\n        await this.stateService.setServerConfig(data);\n        return new ServerConfig(data);\n      }\n    } catch {\n      return null;\n    }\n  }\n}\n","import { LogService as LogServiceAbstraction } from \"../abstractions/log.service\";\nimport { LogLevelType } from \"../enums/logLevelType\";\n\nexport class ConsoleLogService implements LogServiceAbstraction {\n  protected timersMap: Map<string, [number, number]> = new Map();\n\n  constructor(\n    protected isDev: boolean,\n    protected filter: (level: LogLevelType) => boolean = null\n  ) {}\n\n  debug(message: string) {\n    if (!this.isDev) {\n      return;\n    }\n    this.write(LogLevelType.Debug, message);\n  }\n\n  info(message: string) {\n    this.write(LogLevelType.Info, message);\n  }\n\n  warning(message: string) {\n    this.write(LogLevelType.Warning, message);\n  }\n\n  error(message: string) {\n    this.write(LogLevelType.Error, message);\n  }\n\n  write(level: LogLevelType, message: string) {\n    if (this.filter != null && this.filter(level)) {\n      return;\n    }\n\n    switch (level) {\n      case LogLevelType.Debug:\n        // eslint-disable-next-line\n        console.log(message);\n        break;\n      case LogLevelType.Info:\n        // eslint-disable-next-line\n        console.log(message);\n        break;\n      case LogLevelType.Warning:\n        // eslint-disable-next-line\n        console.warn(message);\n        break;\n      case LogLevelType.Error:\n        // eslint-disable-next-line\n        console.error(message);\n        break;\n      default:\n        break;\n    }\n  }\n}\n","/**\n * Use as a Decorator on async functions, it will prevent multiple 'active' calls as the same time\n *\n * If a promise was returned from a previous call to this function, that hasn't yet resolved it will\n * be returned, instead of calling the original function again\n *\n * Results are not cached, once the promise has returned, the next call will result in a fresh call\n *\n * Read more at https://github.com/bitwarden/jslib/pull/7\n */\nexport function sequentialize(cacheKey: (args: any[]) => string) {\n  return (target: any, propertyKey: string | symbol, descriptor: PropertyDescriptor) => {\n    const originalMethod: () => Promise<any> = descriptor.value;\n    const caches = new Map<any, Map<string, Promise<any>>>();\n\n    const getCache = (obj: any) => {\n      let cache = caches.get(obj);\n      if (cache != null) {\n        return cache;\n      }\n      cache = new Map<string, Promise<any>>();\n      caches.set(obj, cache);\n      return cache;\n    };\n\n    return {\n      value: function (...args: any[]) {\n        const cache = getCache(this);\n        const argsCacheKey = cacheKey(args);\n        let response = cache.get(argsCacheKey);\n        if (response != null) {\n          return response;\n        }\n\n        const onFinally = () => {\n          cache.delete(argsCacheKey);\n          if (cache.size === 0) {\n            caches.delete(this);\n          }\n        };\n        response = originalMethod\n          .apply(this, args)\n          .then((val: any) => {\n            onFinally();\n            return val;\n          })\n          .catch((err: any) => {\n            onFinally();\n            throw err;\n          });\n\n        cache.set(argsCacheKey, response);\n        return response;\n      },\n    };\n  };\n}\n","// EFF's Long Wordlist from https://www.eff.org/dice\nexport const EFFLongWordList = [\n  \"abacus\",\n  \"abdomen\",\n  \"abdominal\",\n  \"abide\",\n  \"abiding\",\n  \"ability\",\n  \"ablaze\",\n  \"able\",\n  \"abnormal\",\n  \"abrasion\",\n  \"abrasive\",\n  \"abreast\",\n  \"abridge\",\n  \"abroad\",\n  \"abruptly\",\n  \"absence\",\n  \"absentee\",\n  \"absently\",\n  \"absinthe\",\n  \"absolute\",\n  \"absolve\",\n  \"abstain\",\n  \"abstract\",\n  \"absurd\",\n  \"accent\",\n  \"acclaim\",\n  \"acclimate\",\n  \"accompany\",\n  \"account\",\n  \"accuracy\",\n  \"accurate\",\n  \"accustom\",\n  \"acetone\",\n  \"achiness\",\n  \"aching\",\n  \"acid\",\n  \"acorn\",\n  \"acquaint\",\n  \"acquire\",\n  \"acre\",\n  \"acrobat\",\n  \"acronym\",\n  \"acting\",\n  \"action\",\n  \"activate\",\n  \"activator\",\n  \"active\",\n  \"activism\",\n  \"activist\",\n  \"activity\",\n  \"actress\",\n  \"acts\",\n  \"acutely\",\n  \"acuteness\",\n  \"aeration\",\n  \"aerobics\",\n  \"aerosol\",\n  \"aerospace\",\n  \"afar\",\n  \"affair\",\n  \"affected\",\n  \"affecting\",\n  \"affection\",\n  \"affidavit\",\n  \"affiliate\",\n  \"affirm\",\n  \"affix\",\n  \"afflicted\",\n  \"affluent\",\n  \"afford\",\n  \"affront\",\n  \"aflame\",\n  \"afloat\",\n  \"aflutter\",\n  \"afoot\",\n  \"afraid\",\n  \"afterglow\",\n  \"afterlife\",\n  \"aftermath\",\n  \"aftermost\",\n  \"afternoon\",\n  \"aged\",\n  \"ageless\",\n  \"agency\",\n  \"agenda\",\n  \"agent\",\n  \"aggregate\",\n  \"aghast\",\n  \"agile\",\n  \"agility\",\n  \"aging\",\n  \"agnostic\",\n  \"agonize\",\n  \"agonizing\",\n  \"agony\",\n  \"agreeable\",\n  \"agreeably\",\n  \"agreed\",\n  \"agreeing\",\n  \"agreement\",\n  \"aground\",\n  \"ahead\",\n  \"ahoy\",\n  \"aide\",\n  \"aids\",\n  \"aim\",\n  \"ajar\",\n  \"alabaster\",\n  \"alarm\",\n  \"albatross\",\n  \"album\",\n  \"alfalfa\",\n  \"algebra\",\n  \"algorithm\",\n  \"alias\",\n  \"alibi\",\n  \"alienable\",\n  \"alienate\",\n  \"aliens\",\n  \"alike\",\n  \"alive\",\n  \"alkaline\",\n  \"alkalize\",\n  \"almanac\",\n  \"almighty\",\n  \"almost\",\n  \"aloe\",\n  \"aloft\",\n  \"aloha\",\n  \"alone\",\n  \"alongside\",\n  \"aloof\",\n  \"alphabet\",\n  \"alright\",\n  \"although\",\n  \"altitude\",\n  \"alto\",\n  \"aluminum\",\n  \"alumni\",\n  \"always\",\n  \"amaretto\",\n  \"amaze\",\n  \"amazingly\",\n  \"amber\",\n  \"ambiance\",\n  \"ambiguity\",\n  \"ambiguous\",\n  \"ambition\",\n  \"ambitious\",\n  \"ambulance\",\n  \"ambush\",\n  \"amendable\",\n  \"amendment\",\n  \"amends\",\n  \"amenity\",\n  \"amiable\",\n  \"amicably\",\n  \"amid\",\n  \"amigo\",\n  \"amino\",\n  \"amiss\",\n  \"ammonia\",\n  \"ammonium\",\n  \"amnesty\",\n  \"amniotic\",\n  \"among\",\n  \"amount\",\n  \"amperage\",\n  \"ample\",\n  \"amplifier\",\n  \"amplify\",\n  \"amply\",\n  \"amuck\",\n  \"amulet\",\n  \"amusable\",\n  \"amused\",\n  \"amusement\",\n  \"amuser\",\n  \"amusing\",\n  \"anaconda\",\n  \"anaerobic\",\n  \"anagram\",\n  \"anatomist\",\n  \"anatomy\",\n  \"anchor\",\n  \"anchovy\",\n  \"ancient\",\n  \"android\",\n  \"anemia\",\n  \"anemic\",\n  \"aneurism\",\n  \"anew\",\n  \"angelfish\",\n  \"angelic\",\n  \"anger\",\n  \"angled\",\n  \"angler\",\n  \"angles\",\n  \"angling\",\n  \"angrily\",\n  \"angriness\",\n  \"anguished\",\n  \"angular\",\n  \"animal\",\n  \"animate\",\n  \"animating\",\n  \"animation\",\n  \"animator\",\n  \"anime\",\n  \"animosity\",\n  \"ankle\",\n  \"annex\",\n  \"annotate\",\n  \"announcer\",\n  \"annoying\",\n  \"annually\",\n  \"annuity\",\n  \"anointer\",\n  \"another\",\n  \"answering\",\n  \"antacid\",\n  \"antarctic\",\n  \"anteater\",\n  \"antelope\",\n  \"antennae\",\n  \"anthem\",\n  \"anthill\",\n  \"anthology\",\n  \"antibody\",\n  \"antics\",\n  \"antidote\",\n  \"antihero\",\n  \"antiquely\",\n  \"antiques\",\n  \"antiquity\",\n  \"antirust\",\n  \"antitoxic\",\n  \"antitrust\",\n  \"antiviral\",\n  \"antivirus\",\n  \"antler\",\n  \"antonym\",\n  \"antsy\",\n  \"anvil\",\n  \"anybody\",\n  \"anyhow\",\n  \"anymore\",\n  \"anyone\",\n  \"anyplace\",\n  \"anything\",\n  \"anytime\",\n  \"anyway\",\n  \"anywhere\",\n  \"aorta\",\n  \"apache\",\n  \"apostle\",\n  \"appealing\",\n  \"appear\",\n  \"appease\",\n  \"appeasing\",\n  \"appendage\",\n  \"appendix\",\n  \"appetite\",\n  \"appetizer\",\n  \"applaud\",\n  \"applause\",\n  \"apple\",\n  \"appliance\",\n  \"applicant\",\n  \"applied\",\n  \"apply\",\n  \"appointee\",\n  \"appraisal\",\n  \"appraiser\",\n  \"apprehend\",\n  \"approach\",\n  \"approval\",\n  \"approve\",\n  \"apricot\",\n  \"april\",\n  \"apron\",\n  \"aptitude\",\n  \"aptly\",\n  \"aqua\",\n  \"aqueduct\",\n  \"arbitrary\",\n  \"arbitrate\",\n  \"ardently\",\n  \"area\",\n  \"arena\",\n  \"arguable\",\n  \"arguably\",\n  \"argue\",\n  \"arise\",\n  \"armadillo\",\n  \"armband\",\n  \"armchair\",\n  \"armed\",\n  \"armful\",\n  \"armhole\",\n  \"arming\",\n  \"armless\",\n  \"armoire\",\n  \"armored\",\n  \"armory\",\n  \"armrest\",\n  \"army\",\n  \"aroma\",\n  \"arose\",\n  \"around\",\n  \"arousal\",\n  \"arrange\",\n  \"array\",\n  \"arrest\",\n  \"arrival\",\n  \"arrive\",\n  \"arrogance\",\n  \"arrogant\",\n  \"arson\",\n  \"art\",\n  \"ascend\",\n  \"ascension\",\n  \"ascent\",\n  \"ascertain\",\n  \"ashamed\",\n  \"ashen\",\n  \"ashes\",\n  \"ashy\",\n  \"aside\",\n  \"askew\",\n  \"asleep\",\n  \"asparagus\",\n  \"aspect\",\n  \"aspirate\",\n  \"aspire\",\n  \"aspirin\",\n  \"astonish\",\n  \"astound\",\n  \"astride\",\n  \"astrology\",\n  \"astronaut\",\n  \"astronomy\",\n  \"astute\",\n  \"atlantic\",\n  \"atlas\",\n  \"atom\",\n  \"atonable\",\n  \"atop\",\n  \"atrium\",\n  \"atrocious\",\n  \"atrophy\",\n  \"attach\",\n  \"attain\",\n  \"attempt\",\n  \"attendant\",\n  \"attendee\",\n  \"attention\",\n  \"attentive\",\n  \"attest\",\n  \"attic\",\n  \"attire\",\n  \"attitude\",\n  \"attractor\",\n  \"attribute\",\n  \"atypical\",\n  \"auction\",\n  \"audacious\",\n  \"audacity\",\n  \"audible\",\n  \"audibly\",\n  \"audience\",\n  \"audio\",\n  \"audition\",\n  \"augmented\",\n  \"august\",\n  \"authentic\",\n  \"author\",\n  \"autism\",\n  \"autistic\",\n  \"autograph\",\n  \"automaker\",\n  \"automated\",\n  \"automatic\",\n  \"autopilot\",\n  \"available\",\n  \"avalanche\",\n  \"avatar\",\n  \"avenge\",\n  \"avenging\",\n  \"avenue\",\n  \"average\",\n  \"aversion\",\n  \"avert\",\n  \"aviation\",\n  \"aviator\",\n  \"avid\",\n  \"avoid\",\n  \"await\",\n  \"awaken\",\n  \"award\",\n  \"aware\",\n  \"awhile\",\n  \"awkward\",\n  \"awning\",\n  \"awoke\",\n  \"awry\",\n  \"axis\",\n  \"babble\",\n  \"babbling\",\n  \"babied\",\n  \"baboon\",\n  \"backache\",\n  \"backboard\",\n  \"backboned\",\n  \"backdrop\",\n  \"backed\",\n  \"backer\",\n  \"backfield\",\n  \"backfire\",\n  \"backhand\",\n  \"backing\",\n  \"backlands\",\n  \"backlash\",\n  \"backless\",\n  \"backlight\",\n  \"backlit\",\n  \"backlog\",\n  \"backpack\",\n  \"backpedal\",\n  \"backrest\",\n  \"backroom\",\n  \"backshift\",\n  \"backside\",\n  \"backslid\",\n  \"backspace\",\n  \"backspin\",\n  \"backstab\",\n  \"backstage\",\n  \"backtalk\",\n  \"backtrack\",\n  \"backup\",\n  \"backward\",\n  \"backwash\",\n  \"backwater\",\n  \"backyard\",\n  \"bacon\",\n  \"bacteria\",\n  \"bacterium\",\n  \"badass\",\n  \"badge\",\n  \"badland\",\n  \"badly\",\n  \"badness\",\n  \"baffle\",\n  \"baffling\",\n  \"bagel\",\n  \"bagful\",\n  \"baggage\",\n  \"bagged\",\n  \"baggie\",\n  \"bagginess\",\n  \"bagging\",\n  \"baggy\",\n  \"bagpipe\",\n  \"baguette\",\n  \"baked\",\n  \"bakery\",\n  \"bakeshop\",\n  \"baking\",\n  \"balance\",\n  \"balancing\",\n  \"balcony\",\n  \"balmy\",\n  \"balsamic\",\n  \"bamboo\",\n  \"banana\",\n  \"banish\",\n  \"banister\",\n  \"banjo\",\n  \"bankable\",\n  \"bankbook\",\n  \"banked\",\n  \"banker\",\n  \"banking\",\n  \"banknote\",\n  \"bankroll\",\n  \"banner\",\n  \"bannister\",\n  \"banshee\",\n  \"banter\",\n  \"barbecue\",\n  \"barbed\",\n  \"barbell\",\n  \"barber\",\n  \"barcode\",\n  \"barge\",\n  \"bargraph\",\n  \"barista\",\n  \"baritone\",\n  \"barley\",\n  \"barmaid\",\n  \"barman\",\n  \"barn\",\n  \"barometer\",\n  \"barrack\",\n  \"barracuda\",\n  \"barrel\",\n  \"barrette\",\n  \"barricade\",\n  \"barrier\",\n  \"barstool\",\n  \"bartender\",\n  \"barterer\",\n  \"bash\",\n  \"basically\",\n  \"basics\",\n  \"basil\",\n  \"basin\",\n  \"basis\",\n  \"basket\",\n  \"batboy\",\n  \"batch\",\n  \"bath\",\n  \"baton\",\n  \"bats\",\n  \"battalion\",\n  \"battered\",\n  \"battering\",\n  \"battery\",\n  \"batting\",\n  \"battle\",\n  \"bauble\",\n  \"bazooka\",\n  \"blabber\",\n  \"bladder\",\n  \"blade\",\n  \"blah\",\n  \"blame\",\n  \"blaming\",\n  \"blanching\",\n  \"blandness\",\n  \"blank\",\n  \"blaspheme\",\n  \"blasphemy\",\n  \"blast\",\n  \"blatancy\",\n  \"blatantly\",\n  \"blazer\",\n  \"blazing\",\n  \"bleach\",\n  \"bleak\",\n  \"bleep\",\n  \"blemish\",\n  \"blend\",\n  \"bless\",\n  \"blighted\",\n  \"blimp\",\n  \"bling\",\n  \"blinked\",\n  \"blinker\",\n  \"blinking\",\n  \"blinks\",\n  \"blip\",\n  \"blissful\",\n  \"blitz\",\n  \"blizzard\",\n  \"bloated\",\n  \"bloating\",\n  \"blob\",\n  \"blog\",\n  \"bloomers\",\n  \"blooming\",\n  \"blooper\",\n  \"blot\",\n  \"blouse\",\n  \"blubber\",\n  \"bluff\",\n  \"bluish\",\n  \"blunderer\",\n  \"blunt\",\n  \"blurb\",\n  \"blurred\",\n  \"blurry\",\n  \"blurt\",\n  \"blush\",\n  \"blustery\",\n  \"boaster\",\n  \"boastful\",\n  \"boasting\",\n  \"boat\",\n  \"bobbed\",\n  \"bobbing\",\n  \"bobble\",\n  \"bobcat\",\n  \"bobsled\",\n  \"bobtail\",\n  \"bodacious\",\n  \"body\",\n  \"bogged\",\n  \"boggle\",\n  \"bogus\",\n  \"boil\",\n  \"bok\",\n  \"bolster\",\n  \"bolt\",\n  \"bonanza\",\n  \"bonded\",\n  \"bonding\",\n  \"bondless\",\n  \"boned\",\n  \"bonehead\",\n  \"boneless\",\n  \"bonelike\",\n  \"boney\",\n  \"bonfire\",\n  \"bonnet\",\n  \"bonsai\",\n  \"bonus\",\n  \"bony\",\n  \"boogeyman\",\n  \"boogieman\",\n  \"book\",\n  \"boondocks\",\n  \"booted\",\n  \"booth\",\n  \"bootie\",\n  \"booting\",\n  \"bootlace\",\n  \"bootleg\",\n  \"boots\",\n  \"boozy\",\n  \"borax\",\n  \"boring\",\n  \"borough\",\n  \"borrower\",\n  \"borrowing\",\n  \"boss\",\n  \"botanical\",\n  \"botanist\",\n  \"botany\",\n  \"botch\",\n  \"both\",\n  \"bottle\",\n  \"bottling\",\n  \"bottom\",\n  \"bounce\",\n  \"bouncing\",\n  \"bouncy\",\n  \"bounding\",\n  \"boundless\",\n  \"bountiful\",\n  \"bovine\",\n  \"boxcar\",\n  \"boxer\",\n  \"boxing\",\n  \"boxlike\",\n  \"boxy\",\n  \"breach\",\n  \"breath\",\n  \"breeches\",\n  \"breeching\",\n  \"breeder\",\n  \"breeding\",\n  \"breeze\",\n  \"breezy\",\n  \"brethren\",\n  \"brewery\",\n  \"brewing\",\n  \"briar\",\n  \"bribe\",\n  \"brick\",\n  \"bride\",\n  \"bridged\",\n  \"brigade\",\n  \"bright\",\n  \"brilliant\",\n  \"brim\",\n  \"bring\",\n  \"brink\",\n  \"brisket\",\n  \"briskly\",\n  \"briskness\",\n  \"bristle\",\n  \"brittle\",\n  \"broadband\",\n  \"broadcast\",\n  \"broaden\",\n  \"broadly\",\n  \"broadness\",\n  \"broadside\",\n  \"broadways\",\n  \"broiler\",\n  \"broiling\",\n  \"broken\",\n  \"broker\",\n  \"bronchial\",\n  \"bronco\",\n  \"bronze\",\n  \"bronzing\",\n  \"brook\",\n  \"broom\",\n  \"brought\",\n  \"browbeat\",\n  \"brownnose\",\n  \"browse\",\n  \"browsing\",\n  \"bruising\",\n  \"brunch\",\n  \"brunette\",\n  \"brunt\",\n  \"brush\",\n  \"brussels\",\n  \"brute\",\n  \"brutishly\",\n  \"bubble\",\n  \"bubbling\",\n  \"bubbly\",\n  \"buccaneer\",\n  \"bucked\",\n  \"bucket\",\n  \"buckle\",\n  \"buckshot\",\n  \"buckskin\",\n  \"bucktooth\",\n  \"buckwheat\",\n  \"buddhism\",\n  \"buddhist\",\n  \"budding\",\n  \"buddy\",\n  \"budget\",\n  \"buffalo\",\n  \"buffed\",\n  \"buffer\",\n  \"buffing\",\n  \"buffoon\",\n  \"buggy\",\n  \"bulb\",\n  \"bulge\",\n  \"bulginess\",\n  \"bulgur\",\n  \"bulk\",\n  \"bulldog\",\n  \"bulldozer\",\n  \"bullfight\",\n  \"bullfrog\",\n  \"bullhorn\",\n  \"bullion\",\n  \"bullish\",\n  \"bullpen\",\n  \"bullring\",\n  \"bullseye\",\n  \"bullwhip\",\n  \"bully\",\n  \"bunch\",\n  \"bundle\",\n  \"bungee\",\n  \"bunion\",\n  \"bunkbed\",\n  \"bunkhouse\",\n  \"bunkmate\",\n  \"bunny\",\n  \"bunt\",\n  \"busboy\",\n  \"bush\",\n  \"busily\",\n  \"busload\",\n  \"bust\",\n  \"busybody\",\n  \"buzz\",\n  \"cabana\",\n  \"cabbage\",\n  \"cabbie\",\n  \"cabdriver\",\n  \"cable\",\n  \"caboose\",\n  \"cache\",\n  \"cackle\",\n  \"cacti\",\n  \"cactus\",\n  \"caddie\",\n  \"caddy\",\n  \"cadet\",\n  \"cadillac\",\n  \"cadmium\",\n  \"cage\",\n  \"cahoots\",\n  \"cake\",\n  \"calamari\",\n  \"calamity\",\n  \"calcium\",\n  \"calculate\",\n  \"calculus\",\n  \"caliber\",\n  \"calibrate\",\n  \"calm\",\n  \"caloric\",\n  \"calorie\",\n  \"calzone\",\n  \"camcorder\",\n  \"cameo\",\n  \"camera\",\n  \"camisole\",\n  \"camper\",\n  \"campfire\",\n  \"camping\",\n  \"campsite\",\n  \"campus\",\n  \"canal\",\n  \"canary\",\n  \"cancel\",\n  \"candied\",\n  \"candle\",\n  \"candy\",\n  \"cane\",\n  \"canine\",\n  \"canister\",\n  \"cannabis\",\n  \"canned\",\n  \"canning\",\n  \"cannon\",\n  \"cannot\",\n  \"canola\",\n  \"canon\",\n  \"canopener\",\n  \"canopy\",\n  \"canteen\",\n  \"canyon\",\n  \"capable\",\n  \"capably\",\n  \"capacity\",\n  \"cape\",\n  \"capillary\",\n  \"capital\",\n  \"capitol\",\n  \"capped\",\n  \"capricorn\",\n  \"capsize\",\n  \"capsule\",\n  \"caption\",\n  \"captivate\",\n  \"captive\",\n  \"captivity\",\n  \"capture\",\n  \"caramel\",\n  \"carat\",\n  \"caravan\",\n  \"carbon\",\n  \"cardboard\",\n  \"carded\",\n  \"cardiac\",\n  \"cardigan\",\n  \"cardinal\",\n  \"cardstock\",\n  \"carefully\",\n  \"caregiver\",\n  \"careless\",\n  \"caress\",\n  \"caretaker\",\n  \"cargo\",\n  \"caring\",\n  \"carless\",\n  \"carload\",\n  \"carmaker\",\n  \"carnage\",\n  \"carnation\",\n  \"carnival\",\n  \"carnivore\",\n  \"carol\",\n  \"carpenter\",\n  \"carpentry\",\n  \"carpool\",\n  \"carport\",\n  \"carried\",\n  \"carrot\",\n  \"carrousel\",\n  \"carry\",\n  \"cartel\",\n  \"cartload\",\n  \"carton\",\n  \"cartoon\",\n  \"cartridge\",\n  \"cartwheel\",\n  \"carve\",\n  \"carving\",\n  \"carwash\",\n  \"cascade\",\n  \"case\",\n  \"cash\",\n  \"casing\",\n  \"casino\",\n  \"casket\",\n  \"cassette\",\n  \"casually\",\n  \"casualty\",\n  \"catacomb\",\n  \"catalog\",\n  \"catalyst\",\n  \"catalyze\",\n  \"catapult\",\n  \"cataract\",\n  \"catatonic\",\n  \"catcall\",\n  \"catchable\",\n  \"catcher\",\n  \"catching\",\n  \"catchy\",\n  \"caterer\",\n  \"catering\",\n  \"catfight\",\n  \"catfish\",\n  \"cathedral\",\n  \"cathouse\",\n  \"catlike\",\n  \"catnap\",\n  \"catnip\",\n  \"catsup\",\n  \"cattail\",\n  \"cattishly\",\n  \"cattle\",\n  \"catty\",\n  \"catwalk\",\n  \"caucasian\",\n  \"caucus\",\n  \"causal\",\n  \"causation\",\n  \"cause\",\n  \"causing\",\n  \"cauterize\",\n  \"caution\",\n  \"cautious\",\n  \"cavalier\",\n  \"cavalry\",\n  \"caviar\",\n  \"cavity\",\n  \"cedar\",\n  \"celery\",\n  \"celestial\",\n  \"celibacy\",\n  \"celibate\",\n  \"celtic\",\n  \"cement\",\n  \"census\",\n  \"ceramics\",\n  \"ceremony\",\n  \"certainly\",\n  \"certainty\",\n  \"certified\",\n  \"certify\",\n  \"cesarean\",\n  \"cesspool\",\n  \"chafe\",\n  \"chaffing\",\n  \"chain\",\n  \"chair\",\n  \"chalice\",\n  \"challenge\",\n  \"chamber\",\n  \"chamomile\",\n  \"champion\",\n  \"chance\",\n  \"change\",\n  \"channel\",\n  \"chant\",\n  \"chaos\",\n  \"chaperone\",\n  \"chaplain\",\n  \"chapped\",\n  \"chaps\",\n  \"chapter\",\n  \"character\",\n  \"charbroil\",\n  \"charcoal\",\n  \"charger\",\n  \"charging\",\n  \"chariot\",\n  \"charity\",\n  \"charm\",\n  \"charred\",\n  \"charter\",\n  \"charting\",\n  \"chase\",\n  \"chasing\",\n  \"chaste\",\n  \"chastise\",\n  \"chastity\",\n  \"chatroom\",\n  \"chatter\",\n  \"chatting\",\n  \"chatty\",\n  \"cheating\",\n  \"cheddar\",\n  \"cheek\",\n  \"cheer\",\n  \"cheese\",\n  \"cheesy\",\n  \"chef\",\n  \"chemicals\",\n  \"chemist\",\n  \"chemo\",\n  \"cherisher\",\n  \"cherub\",\n  \"chess\",\n  \"chest\",\n  \"chevron\",\n  \"chevy\",\n  \"chewable\",\n  \"chewer\",\n  \"chewing\",\n  \"chewy\",\n  \"chief\",\n  \"chihuahua\",\n  \"childcare\",\n  \"childhood\",\n  \"childish\",\n  \"childless\",\n  \"childlike\",\n  \"chili\",\n  \"chill\",\n  \"chimp\",\n  \"chip\",\n  \"chirping\",\n  \"chirpy\",\n  \"chitchat\",\n  \"chivalry\",\n  \"chive\",\n  \"chloride\",\n  \"chlorine\",\n  \"choice\",\n  \"chokehold\",\n  \"choking\",\n  \"chomp\",\n  \"chooser\",\n  \"choosing\",\n  \"choosy\",\n  \"chop\",\n  \"chosen\",\n  \"chowder\",\n  \"chowtime\",\n  \"chrome\",\n  \"chubby\",\n  \"chuck\",\n  \"chug\",\n  \"chummy\",\n  \"chump\",\n  \"chunk\",\n  \"churn\",\n  \"chute\",\n  \"cider\",\n  \"cilantro\",\n  \"cinch\",\n  \"cinema\",\n  \"cinnamon\",\n  \"circle\",\n  \"circling\",\n  \"circular\",\n  \"circulate\",\n  \"circus\",\n  \"citable\",\n  \"citadel\",\n  \"citation\",\n  \"citizen\",\n  \"citric\",\n  \"citrus\",\n  \"city\",\n  \"civic\",\n  \"civil\",\n  \"clad\",\n  \"claim\",\n  \"clambake\",\n  \"clammy\",\n  \"clamor\",\n  \"clamp\",\n  \"clamshell\",\n  \"clang\",\n  \"clanking\",\n  \"clapped\",\n  \"clapper\",\n  \"clapping\",\n  \"clarify\",\n  \"clarinet\",\n  \"clarity\",\n  \"clash\",\n  \"clasp\",\n  \"class\",\n  \"clatter\",\n  \"clause\",\n  \"clavicle\",\n  \"claw\",\n  \"clay\",\n  \"clean\",\n  \"clear\",\n  \"cleat\",\n  \"cleaver\",\n  \"cleft\",\n  \"clench\",\n  \"clergyman\",\n  \"clerical\",\n  \"clerk\",\n  \"clever\",\n  \"clicker\",\n  \"client\",\n  \"climate\",\n  \"climatic\",\n  \"cling\",\n  \"clinic\",\n  \"clinking\",\n  \"clip\",\n  \"clique\",\n  \"cloak\",\n  \"clobber\",\n  \"clock\",\n  \"clone\",\n  \"cloning\",\n  \"closable\",\n  \"closure\",\n  \"clothes\",\n  \"clothing\",\n  \"cloud\",\n  \"clover\",\n  \"clubbed\",\n  \"clubbing\",\n  \"clubhouse\",\n  \"clump\",\n  \"clumsily\",\n  \"clumsy\",\n  \"clunky\",\n  \"clustered\",\n  \"clutch\",\n  \"clutter\",\n  \"coach\",\n  \"coagulant\",\n  \"coastal\",\n  \"coaster\",\n  \"coasting\",\n  \"coastland\",\n  \"coastline\",\n  \"coat\",\n  \"coauthor\",\n  \"cobalt\",\n  \"cobbler\",\n  \"cobweb\",\n  \"cocoa\",\n  \"coconut\",\n  \"cod\",\n  \"coeditor\",\n  \"coerce\",\n  \"coexist\",\n  \"coffee\",\n  \"cofounder\",\n  \"cognition\",\n  \"cognitive\",\n  \"cogwheel\",\n  \"coherence\",\n  \"coherent\",\n  \"cohesive\",\n  \"coil\",\n  \"coke\",\n  \"cola\",\n  \"cold\",\n  \"coleslaw\",\n  \"coliseum\",\n  \"collage\",\n  \"collapse\",\n  \"collar\",\n  \"collected\",\n  \"collector\",\n  \"collide\",\n  \"collie\",\n  \"collision\",\n  \"colonial\",\n  \"colonist\",\n  \"colonize\",\n  \"colony\",\n  \"colossal\",\n  \"colt\",\n  \"coma\",\n  \"come\",\n  \"comfort\",\n  \"comfy\",\n  \"comic\",\n  \"coming\",\n  \"comma\",\n  \"commence\",\n  \"commend\",\n  \"comment\",\n  \"commerce\",\n  \"commode\",\n  \"commodity\",\n  \"commodore\",\n  \"common\",\n  \"commotion\",\n  \"commute\",\n  \"commuting\",\n  \"compacted\",\n  \"compacter\",\n  \"compactly\",\n  \"compactor\",\n  \"companion\",\n  \"company\",\n  \"compare\",\n  \"compel\",\n  \"compile\",\n  \"comply\",\n  \"component\",\n  \"composed\",\n  \"composer\",\n  \"composite\",\n  \"compost\",\n  \"composure\",\n  \"compound\",\n  \"compress\",\n  \"comprised\",\n  \"computer\",\n  \"computing\",\n  \"comrade\",\n  \"concave\",\n  \"conceal\",\n  \"conceded\",\n  \"concept\",\n  \"concerned\",\n  \"concert\",\n  \"conch\",\n  \"concierge\",\n  \"concise\",\n  \"conclude\",\n  \"concrete\",\n  \"concur\",\n  \"condense\",\n  \"condiment\",\n  \"condition\",\n  \"condone\",\n  \"conducive\",\n  \"conductor\",\n  \"conduit\",\n  \"cone\",\n  \"confess\",\n  \"confetti\",\n  \"confidant\",\n  \"confident\",\n  \"confider\",\n  \"confiding\",\n  \"configure\",\n  \"confined\",\n  \"confining\",\n  \"confirm\",\n  \"conflict\",\n  \"conform\",\n  \"confound\",\n  \"confront\",\n  \"confused\",\n  \"confusing\",\n  \"confusion\",\n  \"congenial\",\n  \"congested\",\n  \"congrats\",\n  \"congress\",\n  \"conical\",\n  \"conjoined\",\n  \"conjure\",\n  \"conjuror\",\n  \"connected\",\n  \"connector\",\n  \"consensus\",\n  \"consent\",\n  \"console\",\n  \"consoling\",\n  \"consonant\",\n  \"constable\",\n  \"constant\",\n  \"constrain\",\n  \"constrict\",\n  \"construct\",\n  \"consult\",\n  \"consumer\",\n  \"consuming\",\n  \"contact\",\n  \"container\",\n  \"contempt\",\n  \"contend\",\n  \"contented\",\n  \"contently\",\n  \"contents\",\n  \"contest\",\n  \"context\",\n  \"contort\",\n  \"contour\",\n  \"contrite\",\n  \"control\",\n  \"contusion\",\n  \"convene\",\n  \"convent\",\n  \"copartner\",\n  \"cope\",\n  \"copied\",\n  \"copier\",\n  \"copilot\",\n  \"coping\",\n  \"copious\",\n  \"copper\",\n  \"copy\",\n  \"coral\",\n  \"cork\",\n  \"cornball\",\n  \"cornbread\",\n  \"corncob\",\n  \"cornea\",\n  \"corned\",\n  \"corner\",\n  \"cornfield\",\n  \"cornflake\",\n  \"cornhusk\",\n  \"cornmeal\",\n  \"cornstalk\",\n  \"corny\",\n  \"coronary\",\n  \"coroner\",\n  \"corporal\",\n  \"corporate\",\n  \"corral\",\n  \"correct\",\n  \"corridor\",\n  \"corrode\",\n  \"corroding\",\n  \"corrosive\",\n  \"corsage\",\n  \"corset\",\n  \"cortex\",\n  \"cosigner\",\n  \"cosmetics\",\n  \"cosmic\",\n  \"cosmos\",\n  \"cosponsor\",\n  \"cost\",\n  \"cottage\",\n  \"cotton\",\n  \"couch\",\n  \"cough\",\n  \"could\",\n  \"countable\",\n  \"countdown\",\n  \"counting\",\n  \"countless\",\n  \"country\",\n  \"county\",\n  \"courier\",\n  \"covenant\",\n  \"cover\",\n  \"coveted\",\n  \"coveting\",\n  \"coyness\",\n  \"cozily\",\n  \"coziness\",\n  \"cozy\",\n  \"crabbing\",\n  \"crabgrass\",\n  \"crablike\",\n  \"crabmeat\",\n  \"cradle\",\n  \"cradling\",\n  \"crafter\",\n  \"craftily\",\n  \"craftsman\",\n  \"craftwork\",\n  \"crafty\",\n  \"cramp\",\n  \"cranberry\",\n  \"crane\",\n  \"cranial\",\n  \"cranium\",\n  \"crank\",\n  \"crate\",\n  \"crave\",\n  \"craving\",\n  \"crawfish\",\n  \"crawlers\",\n  \"crawling\",\n  \"crayfish\",\n  \"crayon\",\n  \"crazed\",\n  \"crazily\",\n  \"craziness\",\n  \"crazy\",\n  \"creamed\",\n  \"creamer\",\n  \"creamlike\",\n  \"crease\",\n  \"creasing\",\n  \"creatable\",\n  \"create\",\n  \"creation\",\n  \"creative\",\n  \"creature\",\n  \"credible\",\n  \"credibly\",\n  \"credit\",\n  \"creed\",\n  \"creme\",\n  \"creole\",\n  \"crepe\",\n  \"crept\",\n  \"crescent\",\n  \"crested\",\n  \"cresting\",\n  \"crestless\",\n  \"crevice\",\n  \"crewless\",\n  \"crewman\",\n  \"crewmate\",\n  \"crib\",\n  \"cricket\",\n  \"cried\",\n  \"crier\",\n  \"crimp\",\n  \"crimson\",\n  \"cringe\",\n  \"cringing\",\n  \"crinkle\",\n  \"crinkly\",\n  \"crisped\",\n  \"crisping\",\n  \"crisply\",\n  \"crispness\",\n  \"crispy\",\n  \"criteria\",\n  \"critter\",\n  \"croak\",\n  \"crock\",\n  \"crook\",\n  \"croon\",\n  \"crop\",\n  \"cross\",\n  \"crouch\",\n  \"crouton\",\n  \"crowbar\",\n  \"crowd\",\n  \"crown\",\n  \"crucial\",\n  \"crudely\",\n  \"crudeness\",\n  \"cruelly\",\n  \"cruelness\",\n  \"cruelty\",\n  \"crumb\",\n  \"crummiest\",\n  \"crummy\",\n  \"crumpet\",\n  \"crumpled\",\n  \"cruncher\",\n  \"crunching\",\n  \"crunchy\",\n  \"crusader\",\n  \"crushable\",\n  \"crushed\",\n  \"crusher\",\n  \"crushing\",\n  \"crust\",\n  \"crux\",\n  \"crying\",\n  \"cryptic\",\n  \"crystal\",\n  \"cubbyhole\",\n  \"cube\",\n  \"cubical\",\n  \"cubicle\",\n  \"cucumber\",\n  \"cuddle\",\n  \"cuddly\",\n  \"cufflink\",\n  \"culinary\",\n  \"culminate\",\n  \"culpable\",\n  \"culprit\",\n  \"cultivate\",\n  \"cultural\",\n  \"culture\",\n  \"cupbearer\",\n  \"cupcake\",\n  \"cupid\",\n  \"cupped\",\n  \"cupping\",\n  \"curable\",\n  \"curator\",\n  \"curdle\",\n  \"cure\",\n  \"curfew\",\n  \"curing\",\n  \"curled\",\n  \"curler\",\n  \"curliness\",\n  \"curling\",\n  \"curly\",\n  \"curry\",\n  \"curse\",\n  \"cursive\",\n  \"cursor\",\n  \"curtain\",\n  \"curtly\",\n  \"curtsy\",\n  \"curvature\",\n  \"curve\",\n  \"curvy\",\n  \"cushy\",\n  \"cusp\",\n  \"cussed\",\n  \"custard\",\n  \"custodian\",\n  \"custody\",\n  \"customary\",\n  \"customer\",\n  \"customize\",\n  \"customs\",\n  \"cut\",\n  \"cycle\",\n  \"cyclic\",\n  \"cycling\",\n  \"cyclist\",\n  \"cylinder\",\n  \"cymbal\",\n  \"cytoplasm\",\n  \"cytoplast\",\n  \"dab\",\n  \"dad\",\n  \"daffodil\",\n  \"dagger\",\n  \"daily\",\n  \"daintily\",\n  \"dainty\",\n  \"dairy\",\n  \"daisy\",\n  \"dallying\",\n  \"dance\",\n  \"dancing\",\n  \"dandelion\",\n  \"dander\",\n  \"dandruff\",\n  \"dandy\",\n  \"danger\",\n  \"dangle\",\n  \"dangling\",\n  \"daredevil\",\n  \"dares\",\n  \"daringly\",\n  \"darkened\",\n  \"darkening\",\n  \"darkish\",\n  \"darkness\",\n  \"darkroom\",\n  \"darling\",\n  \"darn\",\n  \"dart\",\n  \"darwinism\",\n  \"dash\",\n  \"dastardly\",\n  \"data\",\n  \"datebook\",\n  \"dating\",\n  \"daughter\",\n  \"daunting\",\n  \"dawdler\",\n  \"dawn\",\n  \"daybed\",\n  \"daybreak\",\n  \"daycare\",\n  \"daydream\",\n  \"daylight\",\n  \"daylong\",\n  \"dayroom\",\n  \"daytime\",\n  \"dazzler\",\n  \"dazzling\",\n  \"deacon\",\n  \"deafening\",\n  \"deafness\",\n  \"dealer\",\n  \"dealing\",\n  \"dealmaker\",\n  \"dealt\",\n  \"dean\",\n  \"debatable\",\n  \"debate\",\n  \"debating\",\n  \"debit\",\n  \"debrief\",\n  \"debtless\",\n  \"debtor\",\n  \"debug\",\n  \"debunk\",\n  \"decade\",\n  \"decaf\",\n  \"decal\",\n  \"decathlon\",\n  \"decay\",\n  \"deceased\",\n  \"deceit\",\n  \"deceiver\",\n  \"deceiving\",\n  \"december\",\n  \"decency\",\n  \"decent\",\n  \"deception\",\n  \"deceptive\",\n  \"decibel\",\n  \"decidable\",\n  \"decimal\",\n  \"decimeter\",\n  \"decipher\",\n  \"deck\",\n  \"declared\",\n  \"decline\",\n  \"decode\",\n  \"decompose\",\n  \"decorated\",\n  \"decorator\",\n  \"decoy\",\n  \"decrease\",\n  \"decree\",\n  \"dedicate\",\n  \"dedicator\",\n  \"deduce\",\n  \"deduct\",\n  \"deed\",\n  \"deem\",\n  \"deepen\",\n  \"deeply\",\n  \"deepness\",\n  \"deface\",\n  \"defacing\",\n  \"defame\",\n  \"default\",\n  \"defeat\",\n  \"defection\",\n  \"defective\",\n  \"defendant\",\n  \"defender\",\n  \"defense\",\n  \"defensive\",\n  \"deferral\",\n  \"deferred\",\n  \"defiance\",\n  \"defiant\",\n  \"defile\",\n  \"defiling\",\n  \"define\",\n  \"definite\",\n  \"deflate\",\n  \"deflation\",\n  \"deflator\",\n  \"deflected\",\n  \"deflector\",\n  \"defog\",\n  \"deforest\",\n  \"defraud\",\n  \"defrost\",\n  \"deftly\",\n  \"defuse\",\n  \"defy\",\n  \"degraded\",\n  \"degrading\",\n  \"degrease\",\n  \"degree\",\n  \"dehydrate\",\n  \"deity\",\n  \"dejected\",\n  \"delay\",\n  \"delegate\",\n  \"delegator\",\n  \"delete\",\n  \"deletion\",\n  \"delicacy\",\n  \"delicate\",\n  \"delicious\",\n  \"delighted\",\n  \"delirious\",\n  \"delirium\",\n  \"deliverer\",\n  \"delivery\",\n  \"delouse\",\n  \"delta\",\n  \"deluge\",\n  \"delusion\",\n  \"deluxe\",\n  \"demanding\",\n  \"demeaning\",\n  \"demeanor\",\n  \"demise\",\n  \"democracy\",\n  \"democrat\",\n  \"demote\",\n  \"demotion\",\n  \"demystify\",\n  \"denatured\",\n  \"deniable\",\n  \"denial\",\n  \"denim\",\n  \"denote\",\n  \"dense\",\n  \"density\",\n  \"dental\",\n  \"dentist\",\n  \"denture\",\n  \"deny\",\n  \"deodorant\",\n  \"deodorize\",\n  \"departed\",\n  \"departure\",\n  \"depict\",\n  \"deplete\",\n  \"depletion\",\n  \"deplored\",\n  \"deploy\",\n  \"deport\",\n  \"depose\",\n  \"depraved\",\n  \"depravity\",\n  \"deprecate\",\n  \"depress\",\n  \"deprive\",\n  \"depth\",\n  \"deputize\",\n  \"deputy\",\n  \"derail\",\n  \"deranged\",\n  \"derby\",\n  \"derived\",\n  \"desecrate\",\n  \"deserve\",\n  \"deserving\",\n  \"designate\",\n  \"designed\",\n  \"designer\",\n  \"designing\",\n  \"deskbound\",\n  \"desktop\",\n  \"deskwork\",\n  \"desolate\",\n  \"despair\",\n  \"despise\",\n  \"despite\",\n  \"destiny\",\n  \"destitute\",\n  \"destruct\",\n  \"detached\",\n  \"detail\",\n  \"detection\",\n  \"detective\",\n  \"detector\",\n  \"detention\",\n  \"detergent\",\n  \"detest\",\n  \"detonate\",\n  \"detonator\",\n  \"detoxify\",\n  \"detract\",\n  \"deuce\",\n  \"devalue\",\n  \"deviancy\",\n  \"deviant\",\n  \"deviate\",\n  \"deviation\",\n  \"deviator\",\n  \"device\",\n  \"devious\",\n  \"devotedly\",\n  \"devotee\",\n  \"devotion\",\n  \"devourer\",\n  \"devouring\",\n  \"devoutly\",\n  \"dexterity\",\n  \"dexterous\",\n  \"diabetes\",\n  \"diabetic\",\n  \"diabolic\",\n  \"diagnoses\",\n  \"diagnosis\",\n  \"diagram\",\n  \"dial\",\n  \"diameter\",\n  \"diaper\",\n  \"diaphragm\",\n  \"diary\",\n  \"dice\",\n  \"dicing\",\n  \"dictate\",\n  \"dictation\",\n  \"dictator\",\n  \"difficult\",\n  \"diffused\",\n  \"diffuser\",\n  \"diffusion\",\n  \"diffusive\",\n  \"dig\",\n  \"dilation\",\n  \"diligence\",\n  \"diligent\",\n  \"dill\",\n  \"dilute\",\n  \"dime\",\n  \"diminish\",\n  \"dimly\",\n  \"dimmed\",\n  \"dimmer\",\n  \"dimness\",\n  \"dimple\",\n  \"diner\",\n  \"dingbat\",\n  \"dinghy\",\n  \"dinginess\",\n  \"dingo\",\n  \"dingy\",\n  \"dining\",\n  \"dinner\",\n  \"diocese\",\n  \"dioxide\",\n  \"diploma\",\n  \"dipped\",\n  \"dipper\",\n  \"dipping\",\n  \"directed\",\n  \"direction\",\n  \"directive\",\n  \"directly\",\n  \"directory\",\n  \"direness\",\n  \"dirtiness\",\n  \"disabled\",\n  \"disagree\",\n  \"disallow\",\n  \"disarm\",\n  \"disarray\",\n  \"disaster\",\n  \"disband\",\n  \"disbelief\",\n  \"disburse\",\n  \"discard\",\n  \"discern\",\n  \"discharge\",\n  \"disclose\",\n  \"discolor\",\n  \"discount\",\n  \"discourse\",\n  \"discover\",\n  \"discuss\",\n  \"disdain\",\n  \"disengage\",\n  \"disfigure\",\n  \"disgrace\",\n  \"dish\",\n  \"disinfect\",\n  \"disjoin\",\n  \"disk\",\n  \"dislike\",\n  \"disliking\",\n  \"dislocate\",\n  \"dislodge\",\n  \"disloyal\",\n  \"dismantle\",\n  \"dismay\",\n  \"dismiss\",\n  \"dismount\",\n  \"disobey\",\n  \"disorder\",\n  \"disown\",\n  \"disparate\",\n  \"disparity\",\n  \"dispatch\",\n  \"dispense\",\n  \"dispersal\",\n  \"dispersed\",\n  \"disperser\",\n  \"displace\",\n  \"display\",\n  \"displease\",\n  \"disposal\",\n  \"dispose\",\n  \"disprove\",\n  \"dispute\",\n  \"disregard\",\n  \"disrupt\",\n  \"dissuade\",\n  \"distance\",\n  \"distant\",\n  \"distaste\",\n  \"distill\",\n  \"distinct\",\n  \"distort\",\n  \"distract\",\n  \"distress\",\n  \"district\",\n  \"distrust\",\n  \"ditch\",\n  \"ditto\",\n  \"ditzy\",\n  \"dividable\",\n  \"divided\",\n  \"dividend\",\n  \"dividers\",\n  \"dividing\",\n  \"divinely\",\n  \"diving\",\n  \"divinity\",\n  \"divisible\",\n  \"divisibly\",\n  \"division\",\n  \"divisive\",\n  \"divorcee\",\n  \"dizziness\",\n  \"dizzy\",\n  \"doable\",\n  \"docile\",\n  \"dock\",\n  \"doctrine\",\n  \"document\",\n  \"dodge\",\n  \"dodgy\",\n  \"doily\",\n  \"doing\",\n  \"dole\",\n  \"dollar\",\n  \"dollhouse\",\n  \"dollop\",\n  \"dolly\",\n  \"dolphin\",\n  \"domain\",\n  \"domelike\",\n  \"domestic\",\n  \"dominion\",\n  \"dominoes\",\n  \"donated\",\n  \"donation\",\n  \"donator\",\n  \"donor\",\n  \"donut\",\n  \"doodle\",\n  \"doorbell\",\n  \"doorframe\",\n  \"doorknob\",\n  \"doorman\",\n  \"doormat\",\n  \"doornail\",\n  \"doorpost\",\n  \"doorstep\",\n  \"doorstop\",\n  \"doorway\",\n  \"doozy\",\n  \"dork\",\n  \"dormitory\",\n  \"dorsal\",\n  \"dosage\",\n  \"dose\",\n  \"dotted\",\n  \"doubling\",\n  \"douche\",\n  \"dove\",\n  \"down\",\n  \"dowry\",\n  \"doze\",\n  \"drab\",\n  \"dragging\",\n  \"dragonfly\",\n  \"dragonish\",\n  \"dragster\",\n  \"drainable\",\n  \"drainage\",\n  \"drained\",\n  \"drainer\",\n  \"drainpipe\",\n  \"dramatic\",\n  \"dramatize\",\n  \"drank\",\n  \"drapery\",\n  \"drastic\",\n  \"draw\",\n  \"dreaded\",\n  \"dreadful\",\n  \"dreadlock\",\n  \"dreamboat\",\n  \"dreamily\",\n  \"dreamland\",\n  \"dreamless\",\n  \"dreamlike\",\n  \"dreamt\",\n  \"dreamy\",\n  \"drearily\",\n  \"dreary\",\n  \"drench\",\n  \"dress\",\n  \"drew\",\n  \"dribble\",\n  \"dried\",\n  \"drier\",\n  \"drift\",\n  \"driller\",\n  \"drilling\",\n  \"drinkable\",\n  \"drinking\",\n  \"dripping\",\n  \"drippy\",\n  \"drivable\",\n  \"driven\",\n  \"driver\",\n  \"driveway\",\n  \"driving\",\n  \"drizzle\",\n  \"drizzly\",\n  \"drone\",\n  \"drool\",\n  \"droop\",\n  \"drop-down\",\n  \"dropbox\",\n  \"dropkick\",\n  \"droplet\",\n  \"dropout\",\n  \"dropper\",\n  \"drove\",\n  \"drown\",\n  \"drowsily\",\n  \"drudge\",\n  \"drum\",\n  \"dry\",\n  \"dubbed\",\n  \"dubiously\",\n  \"duchess\",\n  \"duckbill\",\n  \"ducking\",\n  \"duckling\",\n  \"ducktail\",\n  \"ducky\",\n  \"duct\",\n  \"dude\",\n  \"duffel\",\n  \"dugout\",\n  \"duh\",\n  \"duke\",\n  \"duller\",\n  \"dullness\",\n  \"duly\",\n  \"dumping\",\n  \"dumpling\",\n  \"dumpster\",\n  \"duo\",\n  \"dupe\",\n  \"duplex\",\n  \"duplicate\",\n  \"duplicity\",\n  \"durable\",\n  \"durably\",\n  \"duration\",\n  \"duress\",\n  \"during\",\n  \"dusk\",\n  \"dust\",\n  \"dutiful\",\n  \"duty\",\n  \"duvet\",\n  \"dwarf\",\n  \"dweeb\",\n  \"dwelled\",\n  \"dweller\",\n  \"dwelling\",\n  \"dwindle\",\n  \"dwindling\",\n  \"dynamic\",\n  \"dynamite\",\n  \"dynasty\",\n  \"dyslexia\",\n  \"dyslexic\",\n  \"each\",\n  \"eagle\",\n  \"earache\",\n  \"eardrum\",\n  \"earflap\",\n  \"earful\",\n  \"earlobe\",\n  \"early\",\n  \"earmark\",\n  \"earmuff\",\n  \"earphone\",\n  \"earpiece\",\n  \"earplugs\",\n  \"earring\",\n  \"earshot\",\n  \"earthen\",\n  \"earthlike\",\n  \"earthling\",\n  \"earthly\",\n  \"earthworm\",\n  \"earthy\",\n  \"earwig\",\n  \"easeful\",\n  \"easel\",\n  \"easiest\",\n  \"easily\",\n  \"easiness\",\n  \"easing\",\n  \"eastbound\",\n  \"eastcoast\",\n  \"easter\",\n  \"eastward\",\n  \"eatable\",\n  \"eaten\",\n  \"eatery\",\n  \"eating\",\n  \"eats\",\n  \"ebay\",\n  \"ebony\",\n  \"ebook\",\n  \"ecard\",\n  \"eccentric\",\n  \"echo\",\n  \"eclair\",\n  \"eclipse\",\n  \"ecologist\",\n  \"ecology\",\n  \"economic\",\n  \"economist\",\n  \"economy\",\n  \"ecosphere\",\n  \"ecosystem\",\n  \"edge\",\n  \"edginess\",\n  \"edging\",\n  \"edgy\",\n  \"edition\",\n  \"editor\",\n  \"educated\",\n  \"education\",\n  \"educator\",\n  \"eel\",\n  \"effective\",\n  \"effects\",\n  \"efficient\",\n  \"effort\",\n  \"eggbeater\",\n  \"egging\",\n  \"eggnog\",\n  \"eggplant\",\n  \"eggshell\",\n  \"egomaniac\",\n  \"egotism\",\n  \"egotistic\",\n  \"either\",\n  \"eject\",\n  \"elaborate\",\n  \"elastic\",\n  \"elated\",\n  \"elbow\",\n  \"eldercare\",\n  \"elderly\",\n  \"eldest\",\n  \"electable\",\n  \"election\",\n  \"elective\",\n  \"elephant\",\n  \"elevate\",\n  \"elevating\",\n  \"elevation\",\n  \"elevator\",\n  \"eleven\",\n  \"elf\",\n  \"eligible\",\n  \"eligibly\",\n  \"eliminate\",\n  \"elite\",\n  \"elitism\",\n  \"elixir\",\n  \"elk\",\n  \"ellipse\",\n  \"elliptic\",\n  \"elm\",\n  \"elongated\",\n  \"elope\",\n  \"eloquence\",\n  \"eloquent\",\n  \"elsewhere\",\n  \"elude\",\n  \"elusive\",\n  \"elves\",\n  \"email\",\n  \"embargo\",\n  \"embark\",\n  \"embassy\",\n  \"embattled\",\n  \"embellish\",\n  \"ember\",\n  \"embezzle\",\n  \"emblaze\",\n  \"emblem\",\n  \"embody\",\n  \"embolism\",\n  \"emboss\",\n  \"embroider\",\n  \"emcee\",\n  \"emerald\",\n  \"emergency\",\n  \"emission\",\n  \"emit\",\n  \"emote\",\n  \"emoticon\",\n  \"emotion\",\n  \"empathic\",\n  \"empathy\",\n  \"emperor\",\n  \"emphases\",\n  \"emphasis\",\n  \"emphasize\",\n  \"emphatic\",\n  \"empirical\",\n  \"employed\",\n  \"employee\",\n  \"employer\",\n  \"emporium\",\n  \"empower\",\n  \"emptier\",\n  \"emptiness\",\n  \"empty\",\n  \"emu\",\n  \"enable\",\n  \"enactment\",\n  \"enamel\",\n  \"enchanted\",\n  \"enchilada\",\n  \"encircle\",\n  \"enclose\",\n  \"enclosure\",\n  \"encode\",\n  \"encore\",\n  \"encounter\",\n  \"encourage\",\n  \"encroach\",\n  \"encrust\",\n  \"encrypt\",\n  \"endanger\",\n  \"endeared\",\n  \"endearing\",\n  \"ended\",\n  \"ending\",\n  \"endless\",\n  \"endnote\",\n  \"endocrine\",\n  \"endorphin\",\n  \"endorse\",\n  \"endowment\",\n  \"endpoint\",\n  \"endurable\",\n  \"endurance\",\n  \"enduring\",\n  \"energetic\",\n  \"energize\",\n  \"energy\",\n  \"enforced\",\n  \"enforcer\",\n  \"engaged\",\n  \"engaging\",\n  \"engine\",\n  \"engorge\",\n  \"engraved\",\n  \"engraver\",\n  \"engraving\",\n  \"engross\",\n  \"engulf\",\n  \"enhance\",\n  \"enigmatic\",\n  \"enjoyable\",\n  \"enjoyably\",\n  \"enjoyer\",\n  \"enjoying\",\n  \"enjoyment\",\n  \"enlarged\",\n  \"enlarging\",\n  \"enlighten\",\n  \"enlisted\",\n  \"enquirer\",\n  \"enrage\",\n  \"enrich\",\n  \"enroll\",\n  \"enslave\",\n  \"ensnare\",\n  \"ensure\",\n  \"entail\",\n  \"entangled\",\n  \"entering\",\n  \"entertain\",\n  \"enticing\",\n  \"entire\",\n  \"entitle\",\n  \"entity\",\n  \"entomb\",\n  \"entourage\",\n  \"entrap\",\n  \"entree\",\n  \"entrench\",\n  \"entrust\",\n  \"entryway\",\n  \"entwine\",\n  \"enunciate\",\n  \"envelope\",\n  \"enviable\",\n  \"enviably\",\n  \"envious\",\n  \"envision\",\n  \"envoy\",\n  \"envy\",\n  \"enzyme\",\n  \"epic\",\n  \"epidemic\",\n  \"epidermal\",\n  \"epidermis\",\n  \"epidural\",\n  \"epilepsy\",\n  \"epileptic\",\n  \"epilogue\",\n  \"epiphany\",\n  \"episode\",\n  \"equal\",\n  \"equate\",\n  \"equation\",\n  \"equator\",\n  \"equinox\",\n  \"equipment\",\n  \"equity\",\n  \"equivocal\",\n  \"eradicate\",\n  \"erasable\",\n  \"erased\",\n  \"eraser\",\n  \"erasure\",\n  \"ergonomic\",\n  \"errand\",\n  \"errant\",\n  \"erratic\",\n  \"error\",\n  \"erupt\",\n  \"escalate\",\n  \"escalator\",\n  \"escapable\",\n  \"escapade\",\n  \"escapist\",\n  \"escargot\",\n  \"eskimo\",\n  \"esophagus\",\n  \"espionage\",\n  \"espresso\",\n  \"esquire\",\n  \"essay\",\n  \"essence\",\n  \"essential\",\n  \"establish\",\n  \"estate\",\n  \"esteemed\",\n  \"estimate\",\n  \"estimator\",\n  \"estranged\",\n  \"estrogen\",\n  \"etching\",\n  \"eternal\",\n  \"eternity\",\n  \"ethanol\",\n  \"ether\",\n  \"ethically\",\n  \"ethics\",\n  \"euphemism\",\n  \"evacuate\",\n  \"evacuee\",\n  \"evade\",\n  \"evaluate\",\n  \"evaluator\",\n  \"evaporate\",\n  \"evasion\",\n  \"evasive\",\n  \"even\",\n  \"everglade\",\n  \"evergreen\",\n  \"everybody\",\n  \"everyday\",\n  \"everyone\",\n  \"evict\",\n  \"evidence\",\n  \"evident\",\n  \"evil\",\n  \"evoke\",\n  \"evolution\",\n  \"evolve\",\n  \"exact\",\n  \"exalted\",\n  \"example\",\n  \"excavate\",\n  \"excavator\",\n  \"exceeding\",\n  \"exception\",\n  \"excess\",\n  \"exchange\",\n  \"excitable\",\n  \"exciting\",\n  \"exclaim\",\n  \"exclude\",\n  \"excluding\",\n  \"exclusion\",\n  \"exclusive\",\n  \"excretion\",\n  \"excretory\",\n  \"excursion\",\n  \"excusable\",\n  \"excusably\",\n  \"excuse\",\n  \"exemplary\",\n  \"exemplify\",\n  \"exemption\",\n  \"exerciser\",\n  \"exert\",\n  \"exes\",\n  \"exfoliate\",\n  \"exhale\",\n  \"exhaust\",\n  \"exhume\",\n  \"exile\",\n  \"existing\",\n  \"exit\",\n  \"exodus\",\n  \"exonerate\",\n  \"exorcism\",\n  \"exorcist\",\n  \"expand\",\n  \"expanse\",\n  \"expansion\",\n  \"expansive\",\n  \"expectant\",\n  \"expedited\",\n  \"expediter\",\n  \"expel\",\n  \"expend\",\n  \"expenses\",\n  \"expensive\",\n  \"expert\",\n  \"expire\",\n  \"expiring\",\n  \"explain\",\n  \"expletive\",\n  \"explicit\",\n  \"explode\",\n  \"exploit\",\n  \"explore\",\n  \"exploring\",\n  \"exponent\",\n  \"exporter\",\n  \"exposable\",\n  \"expose\",\n  \"exposure\",\n  \"express\",\n  \"expulsion\",\n  \"exquisite\",\n  \"extended\",\n  \"extending\",\n  \"extent\",\n  \"extenuate\",\n  \"exterior\",\n  \"external\",\n  \"extinct\",\n  \"extortion\",\n  \"extradite\",\n  \"extras\",\n  \"extrovert\",\n  \"extrude\",\n  \"extruding\",\n  \"exuberant\",\n  \"fable\",\n  \"fabric\",\n  \"fabulous\",\n  \"facebook\",\n  \"facecloth\",\n  \"facedown\",\n  \"faceless\",\n  \"facelift\",\n  \"faceplate\",\n  \"faceted\",\n  \"facial\",\n  \"facility\",\n  \"facing\",\n  \"facsimile\",\n  \"faction\",\n  \"factoid\",\n  \"factor\",\n  \"factsheet\",\n  \"factual\",\n  \"faculty\",\n  \"fade\",\n  \"fading\",\n  \"failing\",\n  \"falcon\",\n  \"fall\",\n  \"false\",\n  \"falsify\",\n  \"fame\",\n  \"familiar\",\n  \"family\",\n  \"famine\",\n  \"famished\",\n  \"fanatic\",\n  \"fancied\",\n  \"fanciness\",\n  \"fancy\",\n  \"fanfare\",\n  \"fang\",\n  \"fanning\",\n  \"fantasize\",\n  \"fantastic\",\n  \"fantasy\",\n  \"fascism\",\n  \"fastball\",\n  \"faster\",\n  \"fasting\",\n  \"fastness\",\n  \"faucet\",\n  \"favorable\",\n  \"favorably\",\n  \"favored\",\n  \"favoring\",\n  \"favorite\",\n  \"fax\",\n  \"feast\",\n  \"federal\",\n  \"fedora\",\n  \"feeble\",\n  \"feed\",\n  \"feel\",\n  \"feisty\",\n  \"feline\",\n  \"felt-tip\",\n  \"feminine\",\n  \"feminism\",\n  \"feminist\",\n  \"feminize\",\n  \"femur\",\n  \"fence\",\n  \"fencing\",\n  \"fender\",\n  \"ferment\",\n  \"fernlike\",\n  \"ferocious\",\n  \"ferocity\",\n  \"ferret\",\n  \"ferris\",\n  \"ferry\",\n  \"fervor\",\n  \"fester\",\n  \"festival\",\n  \"festive\",\n  \"festivity\",\n  \"fetal\",\n  \"fetch\",\n  \"fever\",\n  \"fiber\",\n  \"fiction\",\n  \"fiddle\",\n  \"fiddling\",\n  \"fidelity\",\n  \"fidgeting\",\n  \"fidgety\",\n  \"fifteen\",\n  \"fifth\",\n  \"fiftieth\",\n  \"fifty\",\n  \"figment\",\n  \"figure\",\n  \"figurine\",\n  \"filing\",\n  \"filled\",\n  \"filler\",\n  \"filling\",\n  \"film\",\n  \"filter\",\n  \"filth\",\n  \"filtrate\",\n  \"finale\",\n  \"finalist\",\n  \"finalize\",\n  \"finally\",\n  \"finance\",\n  \"financial\",\n  \"finch\",\n  \"fineness\",\n  \"finer\",\n  \"finicky\",\n  \"finished\",\n  \"finisher\",\n  \"finishing\",\n  \"finite\",\n  \"finless\",\n  \"finlike\",\n  \"fiscally\",\n  \"fit\",\n  \"five\",\n  \"flaccid\",\n  \"flagman\",\n  \"flagpole\",\n  \"flagship\",\n  \"flagstick\",\n  \"flagstone\",\n  \"flail\",\n  \"flakily\",\n  \"flaky\",\n  \"flame\",\n  \"flammable\",\n  \"flanked\",\n  \"flanking\",\n  \"flannels\",\n  \"flap\",\n  \"flaring\",\n  \"flashback\",\n  \"flashbulb\",\n  \"flashcard\",\n  \"flashily\",\n  \"flashing\",\n  \"flashy\",\n  \"flask\",\n  \"flatbed\",\n  \"flatfoot\",\n  \"flatly\",\n  \"flatness\",\n  \"flatten\",\n  \"flattered\",\n  \"flatterer\",\n  \"flattery\",\n  \"flattop\",\n  \"flatware\",\n  \"flatworm\",\n  \"flavored\",\n  \"flavorful\",\n  \"flavoring\",\n  \"flaxseed\",\n  \"fled\",\n  \"fleshed\",\n  \"fleshy\",\n  \"flick\",\n  \"flier\",\n  \"flight\",\n  \"flinch\",\n  \"fling\",\n  \"flint\",\n  \"flip\",\n  \"flirt\",\n  \"float\",\n  \"flock\",\n  \"flogging\",\n  \"flop\",\n  \"floral\",\n  \"florist\",\n  \"floss\",\n  \"flounder\",\n  \"flyable\",\n  \"flyaway\",\n  \"flyer\",\n  \"flying\",\n  \"flyover\",\n  \"flypaper\",\n  \"foam\",\n  \"foe\",\n  \"fog\",\n  \"foil\",\n  \"folic\",\n  \"folk\",\n  \"follicle\",\n  \"follow\",\n  \"fondling\",\n  \"fondly\",\n  \"fondness\",\n  \"fondue\",\n  \"font\",\n  \"food\",\n  \"fool\",\n  \"footage\",\n  \"football\",\n  \"footbath\",\n  \"footboard\",\n  \"footer\",\n  \"footgear\",\n  \"foothill\",\n  \"foothold\",\n  \"footing\",\n  \"footless\",\n  \"footman\",\n  \"footnote\",\n  \"footpad\",\n  \"footpath\",\n  \"footprint\",\n  \"footrest\",\n  \"footsie\",\n  \"footsore\",\n  \"footwear\",\n  \"footwork\",\n  \"fossil\",\n  \"foster\",\n  \"founder\",\n  \"founding\",\n  \"fountain\",\n  \"fox\",\n  \"foyer\",\n  \"fraction\",\n  \"fracture\",\n  \"fragile\",\n  \"fragility\",\n  \"fragment\",\n  \"fragrance\",\n  \"fragrant\",\n  \"frail\",\n  \"frame\",\n  \"framing\",\n  \"frantic\",\n  \"fraternal\",\n  \"frayed\",\n  \"fraying\",\n  \"frays\",\n  \"freckled\",\n  \"freckles\",\n  \"freebase\",\n  \"freebee\",\n  \"freebie\",\n  \"freedom\",\n  \"freefall\",\n  \"freehand\",\n  \"freeing\",\n  \"freeload\",\n  \"freely\",\n  \"freemason\",\n  \"freeness\",\n  \"freestyle\",\n  \"freeware\",\n  \"freeway\",\n  \"freewill\",\n  \"freezable\",\n  \"freezing\",\n  \"freight\",\n  \"french\",\n  \"frenzied\",\n  \"frenzy\",\n  \"frequency\",\n  \"frequent\",\n  \"fresh\",\n  \"fretful\",\n  \"fretted\",\n  \"friction\",\n  \"friday\",\n  \"fridge\",\n  \"fried\",\n  \"friend\",\n  \"frighten\",\n  \"frightful\",\n  \"frigidity\",\n  \"frigidly\",\n  \"frill\",\n  \"fringe\",\n  \"frisbee\",\n  \"frisk\",\n  \"fritter\",\n  \"frivolous\",\n  \"frolic\",\n  \"from\",\n  \"front\",\n  \"frostbite\",\n  \"frosted\",\n  \"frostily\",\n  \"frosting\",\n  \"frostlike\",\n  \"frosty\",\n  \"froth\",\n  \"frown\",\n  \"frozen\",\n  \"fructose\",\n  \"frugality\",\n  \"frugally\",\n  \"fruit\",\n  \"frustrate\",\n  \"frying\",\n  \"gab\",\n  \"gaffe\",\n  \"gag\",\n  \"gainfully\",\n  \"gaining\",\n  \"gains\",\n  \"gala\",\n  \"gallantly\",\n  \"galleria\",\n  \"gallery\",\n  \"galley\",\n  \"gallon\",\n  \"gallows\",\n  \"gallstone\",\n  \"galore\",\n  \"galvanize\",\n  \"gambling\",\n  \"game\",\n  \"gaming\",\n  \"gamma\",\n  \"gander\",\n  \"gangly\",\n  \"gangrene\",\n  \"gangway\",\n  \"gap\",\n  \"garage\",\n  \"garbage\",\n  \"garden\",\n  \"gargle\",\n  \"garland\",\n  \"garlic\",\n  \"garment\",\n  \"garnet\",\n  \"garnish\",\n  \"garter\",\n  \"gas\",\n  \"gatherer\",\n  \"gathering\",\n  \"gating\",\n  \"gauging\",\n  \"gauntlet\",\n  \"gauze\",\n  \"gave\",\n  \"gawk\",\n  \"gazing\",\n  \"gear\",\n  \"gecko\",\n  \"geek\",\n  \"geiger\",\n  \"gem\",\n  \"gender\",\n  \"generic\",\n  \"generous\",\n  \"genetics\",\n  \"genre\",\n  \"gentile\",\n  \"gentleman\",\n  \"gently\",\n  \"gents\",\n  \"geography\",\n  \"geologic\",\n  \"geologist\",\n  \"geology\",\n  \"geometric\",\n  \"geometry\",\n  \"geranium\",\n  \"gerbil\",\n  \"geriatric\",\n  \"germicide\",\n  \"germinate\",\n  \"germless\",\n  \"germproof\",\n  \"gestate\",\n  \"gestation\",\n  \"gesture\",\n  \"getaway\",\n  \"getting\",\n  \"getup\",\n  \"giant\",\n  \"gibberish\",\n  \"giblet\",\n  \"giddily\",\n  \"giddiness\",\n  \"giddy\",\n  \"gift\",\n  \"gigabyte\",\n  \"gigahertz\",\n  \"gigantic\",\n  \"giggle\",\n  \"giggling\",\n  \"giggly\",\n  \"gigolo\",\n  \"gilled\",\n  \"gills\",\n  \"gimmick\",\n  \"girdle\",\n  \"giveaway\",\n  \"given\",\n  \"giver\",\n  \"giving\",\n  \"gizmo\",\n  \"gizzard\",\n  \"glacial\",\n  \"glacier\",\n  \"glade\",\n  \"gladiator\",\n  \"gladly\",\n  \"glamorous\",\n  \"glamour\",\n  \"glance\",\n  \"glancing\",\n  \"glandular\",\n  \"glare\",\n  \"glaring\",\n  \"glass\",\n  \"glaucoma\",\n  \"glazing\",\n  \"gleaming\",\n  \"gleeful\",\n  \"glider\",\n  \"gliding\",\n  \"glimmer\",\n  \"glimpse\",\n  \"glisten\",\n  \"glitch\",\n  \"glitter\",\n  \"glitzy\",\n  \"gloater\",\n  \"gloating\",\n  \"gloomily\",\n  \"gloomy\",\n  \"glorified\",\n  \"glorifier\",\n  \"glorify\",\n  \"glorious\",\n  \"glory\",\n  \"gloss\",\n  \"glove\",\n  \"glowing\",\n  \"glowworm\",\n  \"glucose\",\n  \"glue\",\n  \"gluten\",\n  \"glutinous\",\n  \"glutton\",\n  \"gnarly\",\n  \"gnat\",\n  \"goal\",\n  \"goatskin\",\n  \"goes\",\n  \"goggles\",\n  \"going\",\n  \"goldfish\",\n  \"goldmine\",\n  \"goldsmith\",\n  \"golf\",\n  \"goliath\",\n  \"gonad\",\n  \"gondola\",\n  \"gone\",\n  \"gong\",\n  \"good\",\n  \"gooey\",\n  \"goofball\",\n  \"goofiness\",\n  \"goofy\",\n  \"google\",\n  \"goon\",\n  \"gopher\",\n  \"gore\",\n  \"gorged\",\n  \"gorgeous\",\n  \"gory\",\n  \"gosling\",\n  \"gossip\",\n  \"gothic\",\n  \"gotten\",\n  \"gout\",\n  \"gown\",\n  \"grab\",\n  \"graceful\",\n  \"graceless\",\n  \"gracious\",\n  \"gradation\",\n  \"graded\",\n  \"grader\",\n  \"gradient\",\n  \"grading\",\n  \"gradually\",\n  \"graduate\",\n  \"graffiti\",\n  \"grafted\",\n  \"grafting\",\n  \"grain\",\n  \"granddad\",\n  \"grandkid\",\n  \"grandly\",\n  \"grandma\",\n  \"grandpa\",\n  \"grandson\",\n  \"granite\",\n  \"granny\",\n  \"granola\",\n  \"grant\",\n  \"granular\",\n  \"grape\",\n  \"graph\",\n  \"grapple\",\n  \"grappling\",\n  \"grasp\",\n  \"grass\",\n  \"gratified\",\n  \"gratify\",\n  \"grating\",\n  \"gratitude\",\n  \"gratuity\",\n  \"gravel\",\n  \"graveness\",\n  \"graves\",\n  \"graveyard\",\n  \"gravitate\",\n  \"gravity\",\n  \"gravy\",\n  \"gray\",\n  \"grazing\",\n  \"greasily\",\n  \"greedily\",\n  \"greedless\",\n  \"greedy\",\n  \"green\",\n  \"greeter\",\n  \"greeting\",\n  \"grew\",\n  \"greyhound\",\n  \"grid\",\n  \"grief\",\n  \"grievance\",\n  \"grieving\",\n  \"grievous\",\n  \"grill\",\n  \"grimace\",\n  \"grimacing\",\n  \"grime\",\n  \"griminess\",\n  \"grimy\",\n  \"grinch\",\n  \"grinning\",\n  \"grip\",\n  \"gristle\",\n  \"grit\",\n  \"groggily\",\n  \"groggy\",\n  \"groin\",\n  \"groom\",\n  \"groove\",\n  \"grooving\",\n  \"groovy\",\n  \"grope\",\n  \"ground\",\n  \"grouped\",\n  \"grout\",\n  \"grove\",\n  \"grower\",\n  \"growing\",\n  \"growl\",\n  \"grub\",\n  \"grudge\",\n  \"grudging\",\n  \"grueling\",\n  \"gruffly\",\n  \"grumble\",\n  \"grumbling\",\n  \"grumbly\",\n  \"grumpily\",\n  \"grunge\",\n  \"grunt\",\n  \"guacamole\",\n  \"guidable\",\n  \"guidance\",\n  \"guide\",\n  \"guiding\",\n  \"guileless\",\n  \"guise\",\n  \"gulf\",\n  \"gullible\",\n  \"gully\",\n  \"gulp\",\n  \"gumball\",\n  \"gumdrop\",\n  \"gumminess\",\n  \"gumming\",\n  \"gummy\",\n  \"gurgle\",\n  \"gurgling\",\n  \"guru\",\n  \"gush\",\n  \"gusto\",\n  \"gusty\",\n  \"gutless\",\n  \"guts\",\n  \"gutter\",\n  \"guy\",\n  \"guzzler\",\n  \"gyration\",\n  \"habitable\",\n  \"habitant\",\n  \"habitat\",\n  \"habitual\",\n  \"hacked\",\n  \"hacker\",\n  \"hacking\",\n  \"hacksaw\",\n  \"had\",\n  \"haggler\",\n  \"haiku\",\n  \"half\",\n  \"halogen\",\n  \"halt\",\n  \"halved\",\n  \"halves\",\n  \"hamburger\",\n  \"hamlet\",\n  \"hammock\",\n  \"hamper\",\n  \"hamster\",\n  \"hamstring\",\n  \"handbag\",\n  \"handball\",\n  \"handbook\",\n  \"handbrake\",\n  \"handcart\",\n  \"handclap\",\n  \"handclasp\",\n  \"handcraft\",\n  \"handcuff\",\n  \"handed\",\n  \"handful\",\n  \"handgrip\",\n  \"handgun\",\n  \"handheld\",\n  \"handiness\",\n  \"handiwork\",\n  \"handlebar\",\n  \"handled\",\n  \"handler\",\n  \"handling\",\n  \"handmade\",\n  \"handoff\",\n  \"handpick\",\n  \"handprint\",\n  \"handrail\",\n  \"handsaw\",\n  \"handset\",\n  \"handsfree\",\n  \"handshake\",\n  \"handstand\",\n  \"handwash\",\n  \"handwork\",\n  \"handwoven\",\n  \"handwrite\",\n  \"handyman\",\n  \"hangnail\",\n  \"hangout\",\n  \"hangover\",\n  \"hangup\",\n  \"hankering\",\n  \"hankie\",\n  \"hanky\",\n  \"haphazard\",\n  \"happening\",\n  \"happier\",\n  \"happiest\",\n  \"happily\",\n  \"happiness\",\n  \"happy\",\n  \"harbor\",\n  \"hardcopy\",\n  \"hardcore\",\n  \"hardcover\",\n  \"harddisk\",\n  \"hardened\",\n  \"hardener\",\n  \"hardening\",\n  \"hardhat\",\n  \"hardhead\",\n  \"hardiness\",\n  \"hardly\",\n  \"hardness\",\n  \"hardship\",\n  \"hardware\",\n  \"hardwired\",\n  \"hardwood\",\n  \"hardy\",\n  \"harmful\",\n  \"harmless\",\n  \"harmonica\",\n  \"harmonics\",\n  \"harmonize\",\n  \"harmony\",\n  \"harness\",\n  \"harpist\",\n  \"harsh\",\n  \"harvest\",\n  \"hash\",\n  \"hassle\",\n  \"haste\",\n  \"hastily\",\n  \"hastiness\",\n  \"hasty\",\n  \"hatbox\",\n  \"hatchback\",\n  \"hatchery\",\n  \"hatchet\",\n  \"hatching\",\n  \"hatchling\",\n  \"hate\",\n  \"hatless\",\n  \"hatred\",\n  \"haunt\",\n  \"haven\",\n  \"hazard\",\n  \"hazelnut\",\n  \"hazily\",\n  \"haziness\",\n  \"hazing\",\n  \"hazy\",\n  \"headache\",\n  \"headband\",\n  \"headboard\",\n  \"headcount\",\n  \"headdress\",\n  \"headed\",\n  \"header\",\n  \"headfirst\",\n  \"headgear\",\n  \"heading\",\n  \"headlamp\",\n  \"headless\",\n  \"headlock\",\n  \"headphone\",\n  \"headpiece\",\n  \"headrest\",\n  \"headroom\",\n  \"headscarf\",\n  \"headset\",\n  \"headsman\",\n  \"headstand\",\n  \"headstone\",\n  \"headway\",\n  \"headwear\",\n  \"heap\",\n  \"heat\",\n  \"heave\",\n  \"heavily\",\n  \"heaviness\",\n  \"heaving\",\n  \"hedge\",\n  \"hedging\",\n  \"heftiness\",\n  \"hefty\",\n  \"helium\",\n  \"helmet\",\n  \"helper\",\n  \"helpful\",\n  \"helping\",\n  \"helpless\",\n  \"helpline\",\n  \"hemlock\",\n  \"hemstitch\",\n  \"hence\",\n  \"henchman\",\n  \"henna\",\n  \"herald\",\n  \"herbal\",\n  \"herbicide\",\n  \"herbs\",\n  \"heritage\",\n  \"hermit\",\n  \"heroics\",\n  \"heroism\",\n  \"herring\",\n  \"herself\",\n  \"hertz\",\n  \"hesitancy\",\n  \"hesitant\",\n  \"hesitate\",\n  \"hexagon\",\n  \"hexagram\",\n  \"hubcap\",\n  \"huddle\",\n  \"huddling\",\n  \"huff\",\n  \"hug\",\n  \"hula\",\n  \"hulk\",\n  \"hull\",\n  \"human\",\n  \"humble\",\n  \"humbling\",\n  \"humbly\",\n  \"humid\",\n  \"humiliate\",\n  \"humility\",\n  \"humming\",\n  \"hummus\",\n  \"humongous\",\n  \"humorist\",\n  \"humorless\",\n  \"humorous\",\n  \"humpback\",\n  \"humped\",\n  \"humvee\",\n  \"hunchback\",\n  \"hundredth\",\n  \"hunger\",\n  \"hungrily\",\n  \"hungry\",\n  \"hunk\",\n  \"hunter\",\n  \"hunting\",\n  \"huntress\",\n  \"huntsman\",\n  \"hurdle\",\n  \"hurled\",\n  \"hurler\",\n  \"hurling\",\n  \"hurray\",\n  \"hurricane\",\n  \"hurried\",\n  \"hurry\",\n  \"hurt\",\n  \"husband\",\n  \"hush\",\n  \"husked\",\n  \"huskiness\",\n  \"hut\",\n  \"hybrid\",\n  \"hydrant\",\n  \"hydrated\",\n  \"hydration\",\n  \"hydrogen\",\n  \"hydroxide\",\n  \"hyperlink\",\n  \"hypertext\",\n  \"hyphen\",\n  \"hypnoses\",\n  \"hypnosis\",\n  \"hypnotic\",\n  \"hypnotism\",\n  \"hypnotist\",\n  \"hypnotize\",\n  \"hypocrisy\",\n  \"hypocrite\",\n  \"ibuprofen\",\n  \"ice\",\n  \"iciness\",\n  \"icing\",\n  \"icky\",\n  \"icon\",\n  \"icy\",\n  \"idealism\",\n  \"idealist\",\n  \"idealize\",\n  \"ideally\",\n  \"idealness\",\n  \"identical\",\n  \"identify\",\n  \"identity\",\n  \"ideology\",\n  \"idiocy\",\n  \"idiom\",\n  \"idly\",\n  \"igloo\",\n  \"ignition\",\n  \"ignore\",\n  \"iguana\",\n  \"illicitly\",\n  \"illusion\",\n  \"illusive\",\n  \"image\",\n  \"imaginary\",\n  \"imagines\",\n  \"imaging\",\n  \"imbecile\",\n  \"imitate\",\n  \"imitation\",\n  \"immature\",\n  \"immerse\",\n  \"immersion\",\n  \"imminent\",\n  \"immobile\",\n  \"immodest\",\n  \"immorally\",\n  \"immortal\",\n  \"immovable\",\n  \"immovably\",\n  \"immunity\",\n  \"immunize\",\n  \"impaired\",\n  \"impale\",\n  \"impart\",\n  \"impatient\",\n  \"impeach\",\n  \"impeding\",\n  \"impending\",\n  \"imperfect\",\n  \"imperial\",\n  \"impish\",\n  \"implant\",\n  \"implement\",\n  \"implicate\",\n  \"implicit\",\n  \"implode\",\n  \"implosion\",\n  \"implosive\",\n  \"imply\",\n  \"impolite\",\n  \"important\",\n  \"importer\",\n  \"impose\",\n  \"imposing\",\n  \"impotence\",\n  \"impotency\",\n  \"impotent\",\n  \"impound\",\n  \"imprecise\",\n  \"imprint\",\n  \"imprison\",\n  \"impromptu\",\n  \"improper\",\n  \"improve\",\n  \"improving\",\n  \"improvise\",\n  \"imprudent\",\n  \"impulse\",\n  \"impulsive\",\n  \"impure\",\n  \"impurity\",\n  \"iodine\",\n  \"iodize\",\n  \"ion\",\n  \"ipad\",\n  \"iphone\",\n  \"ipod\",\n  \"irate\",\n  \"irk\",\n  \"iron\",\n  \"irregular\",\n  \"irrigate\",\n  \"irritable\",\n  \"irritably\",\n  \"irritant\",\n  \"irritate\",\n  \"islamic\",\n  \"islamist\",\n  \"isolated\",\n  \"isolating\",\n  \"isolation\",\n  \"isotope\",\n  \"issue\",\n  \"issuing\",\n  \"italicize\",\n  \"italics\",\n  \"item\",\n  \"itinerary\",\n  \"itunes\",\n  \"ivory\",\n  \"ivy\",\n  \"jab\",\n  \"jackal\",\n  \"jacket\",\n  \"jackknife\",\n  \"jackpot\",\n  \"jailbird\",\n  \"jailbreak\",\n  \"jailer\",\n  \"jailhouse\",\n  \"jalapeno\",\n  \"jam\",\n  \"janitor\",\n  \"january\",\n  \"jargon\",\n  \"jarring\",\n  \"jasmine\",\n  \"jaundice\",\n  \"jaunt\",\n  \"java\",\n  \"jawed\",\n  \"jawless\",\n  \"jawline\",\n  \"jaws\",\n  \"jaybird\",\n  \"jaywalker\",\n  \"jazz\",\n  \"jeep\",\n  \"jeeringly\",\n  \"jellied\",\n  \"jelly\",\n  \"jersey\",\n  \"jester\",\n  \"jet\",\n  \"jiffy\",\n  \"jigsaw\",\n  \"jimmy\",\n  \"jingle\",\n  \"jingling\",\n  \"jinx\",\n  \"jitters\",\n  \"jittery\",\n  \"job\",\n  \"jockey\",\n  \"jockstrap\",\n  \"jogger\",\n  \"jogging\",\n  \"john\",\n  \"joining\",\n  \"jokester\",\n  \"jokingly\",\n  \"jolliness\",\n  \"jolly\",\n  \"jolt\",\n  \"jot\",\n  \"jovial\",\n  \"joyfully\",\n  \"joylessly\",\n  \"joyous\",\n  \"joyride\",\n  \"joystick\",\n  \"jubilance\",\n  \"jubilant\",\n  \"judge\",\n  \"judgingly\",\n  \"judicial\",\n  \"judiciary\",\n  \"judo\",\n  \"juggle\",\n  \"juggling\",\n  \"jugular\",\n  \"juice\",\n  \"juiciness\",\n  \"juicy\",\n  \"jujitsu\",\n  \"jukebox\",\n  \"july\",\n  \"jumble\",\n  \"jumbo\",\n  \"jump\",\n  \"junction\",\n  \"juncture\",\n  \"june\",\n  \"junior\",\n  \"juniper\",\n  \"junkie\",\n  \"junkman\",\n  \"junkyard\",\n  \"jurist\",\n  \"juror\",\n  \"jury\",\n  \"justice\",\n  \"justifier\",\n  \"justify\",\n  \"justly\",\n  \"justness\",\n  \"juvenile\",\n  \"kabob\",\n  \"kangaroo\",\n  \"karaoke\",\n  \"karate\",\n  \"karma\",\n  \"kebab\",\n  \"keenly\",\n  \"keenness\",\n  \"keep\",\n  \"keg\",\n  \"kelp\",\n  \"kennel\",\n  \"kept\",\n  \"kerchief\",\n  \"kerosene\",\n  \"kettle\",\n  \"kick\",\n  \"kiln\",\n  \"kilobyte\",\n  \"kilogram\",\n  \"kilometer\",\n  \"kilowatt\",\n  \"kilt\",\n  \"kimono\",\n  \"kindle\",\n  \"kindling\",\n  \"kindly\",\n  \"kindness\",\n  \"kindred\",\n  \"kinetic\",\n  \"kinfolk\",\n  \"king\",\n  \"kinship\",\n  \"kinsman\",\n  \"kinswoman\",\n  \"kissable\",\n  \"kisser\",\n  \"kissing\",\n  \"kitchen\",\n  \"kite\",\n  \"kitten\",\n  \"kitty\",\n  \"kiwi\",\n  \"kleenex\",\n  \"knapsack\",\n  \"knee\",\n  \"knelt\",\n  \"knickers\",\n  \"knoll\",\n  \"koala\",\n  \"kooky\",\n  \"kosher\",\n  \"krypton\",\n  \"kudos\",\n  \"kung\",\n  \"labored\",\n  \"laborer\",\n  \"laboring\",\n  \"laborious\",\n  \"labrador\",\n  \"ladder\",\n  \"ladies\",\n  \"ladle\",\n  \"ladybug\",\n  \"ladylike\",\n  \"lagged\",\n  \"lagging\",\n  \"lagoon\",\n  \"lair\",\n  \"lake\",\n  \"lance\",\n  \"landed\",\n  \"landfall\",\n  \"landfill\",\n  \"landing\",\n  \"landlady\",\n  \"landless\",\n  \"landline\",\n  \"landlord\",\n  \"landmark\",\n  \"landmass\",\n  \"landmine\",\n  \"landowner\",\n  \"landscape\",\n  \"landside\",\n  \"landslide\",\n  \"language\",\n  \"lankiness\",\n  \"lanky\",\n  \"lantern\",\n  \"lapdog\",\n  \"lapel\",\n  \"lapped\",\n  \"lapping\",\n  \"laptop\",\n  \"lard\",\n  \"large\",\n  \"lark\",\n  \"lash\",\n  \"lasso\",\n  \"last\",\n  \"latch\",\n  \"late\",\n  \"lather\",\n  \"latitude\",\n  \"latrine\",\n  \"latter\",\n  \"latticed\",\n  \"launch\",\n  \"launder\",\n  \"laundry\",\n  \"laurel\",\n  \"lavender\",\n  \"lavish\",\n  \"laxative\",\n  \"lazily\",\n  \"laziness\",\n  \"lazy\",\n  \"lecturer\",\n  \"left\",\n  \"legacy\",\n  \"legal\",\n  \"legend\",\n  \"legged\",\n  \"leggings\",\n  \"legible\",\n  \"legibly\",\n  \"legislate\",\n  \"lego\",\n  \"legroom\",\n  \"legume\",\n  \"legwarmer\",\n  \"legwork\",\n  \"lemon\",\n  \"lend\",\n  \"length\",\n  \"lens\",\n  \"lent\",\n  \"leotard\",\n  \"lesser\",\n  \"letdown\",\n  \"lethargic\",\n  \"lethargy\",\n  \"letter\",\n  \"lettuce\",\n  \"level\",\n  \"leverage\",\n  \"levers\",\n  \"levitate\",\n  \"levitator\",\n  \"liability\",\n  \"liable\",\n  \"liberty\",\n  \"librarian\",\n  \"library\",\n  \"licking\",\n  \"licorice\",\n  \"lid\",\n  \"life\",\n  \"lifter\",\n  \"lifting\",\n  \"liftoff\",\n  \"ligament\",\n  \"likely\",\n  \"likeness\",\n  \"likewise\",\n  \"liking\",\n  \"lilac\",\n  \"lilly\",\n  \"lily\",\n  \"limb\",\n  \"limeade\",\n  \"limelight\",\n  \"limes\",\n  \"limit\",\n  \"limping\",\n  \"limpness\",\n  \"line\",\n  \"lingo\",\n  \"linguini\",\n  \"linguist\",\n  \"lining\",\n  \"linked\",\n  \"linoleum\",\n  \"linseed\",\n  \"lint\",\n  \"lion\",\n  \"lip\",\n  \"liquefy\",\n  \"liqueur\",\n  \"liquid\",\n  \"lisp\",\n  \"list\",\n  \"litigate\",\n  \"litigator\",\n  \"litmus\",\n  \"litter\",\n  \"little\",\n  \"livable\",\n  \"lived\",\n  \"lively\",\n  \"liver\",\n  \"livestock\",\n  \"lividly\",\n  \"living\",\n  \"lizard\",\n  \"lubricant\",\n  \"lubricate\",\n  \"lucid\",\n  \"luckily\",\n  \"luckiness\",\n  \"luckless\",\n  \"lucrative\",\n  \"ludicrous\",\n  \"lugged\",\n  \"lukewarm\",\n  \"lullaby\",\n  \"lumber\",\n  \"luminance\",\n  \"luminous\",\n  \"lumpiness\",\n  \"lumping\",\n  \"lumpish\",\n  \"lunacy\",\n  \"lunar\",\n  \"lunchbox\",\n  \"luncheon\",\n  \"lunchroom\",\n  \"lunchtime\",\n  \"lung\",\n  \"lurch\",\n  \"lure\",\n  \"luridness\",\n  \"lurk\",\n  \"lushly\",\n  \"lushness\",\n  \"luster\",\n  \"lustfully\",\n  \"lustily\",\n  \"lustiness\",\n  \"lustrous\",\n  \"lusty\",\n  \"luxurious\",\n  \"luxury\",\n  \"lying\",\n  \"lyrically\",\n  \"lyricism\",\n  \"lyricist\",\n  \"lyrics\",\n  \"macarena\",\n  \"macaroni\",\n  \"macaw\",\n  \"mace\",\n  \"machine\",\n  \"machinist\",\n  \"magazine\",\n  \"magenta\",\n  \"maggot\",\n  \"magical\",\n  \"magician\",\n  \"magma\",\n  \"magnesium\",\n  \"magnetic\",\n  \"magnetism\",\n  \"magnetize\",\n  \"magnifier\",\n  \"magnify\",\n  \"magnitude\",\n  \"magnolia\",\n  \"mahogany\",\n  \"maimed\",\n  \"majestic\",\n  \"majesty\",\n  \"majorette\",\n  \"majority\",\n  \"makeover\",\n  \"maker\",\n  \"makeshift\",\n  \"making\",\n  \"malformed\",\n  \"malt\",\n  \"mama\",\n  \"mammal\",\n  \"mammary\",\n  \"mammogram\",\n  \"manager\",\n  \"managing\",\n  \"manatee\",\n  \"mandarin\",\n  \"mandate\",\n  \"mandatory\",\n  \"mandolin\",\n  \"manger\",\n  \"mangle\",\n  \"mango\",\n  \"mangy\",\n  \"manhandle\",\n  \"manhole\",\n  \"manhood\",\n  \"manhunt\",\n  \"manicotti\",\n  \"manicure\",\n  \"manifesto\",\n  \"manila\",\n  \"mankind\",\n  \"manlike\",\n  \"manliness\",\n  \"manly\",\n  \"manmade\",\n  \"manned\",\n  \"mannish\",\n  \"manor\",\n  \"manpower\",\n  \"mantis\",\n  \"mantra\",\n  \"manual\",\n  \"many\",\n  \"map\",\n  \"marathon\",\n  \"marauding\",\n  \"marbled\",\n  \"marbles\",\n  \"marbling\",\n  \"march\",\n  \"mardi\",\n  \"margarine\",\n  \"margarita\",\n  \"margin\",\n  \"marigold\",\n  \"marina\",\n  \"marine\",\n  \"marital\",\n  \"maritime\",\n  \"marlin\",\n  \"marmalade\",\n  \"maroon\",\n  \"married\",\n  \"marrow\",\n  \"marry\",\n  \"marshland\",\n  \"marshy\",\n  \"marsupial\",\n  \"marvelous\",\n  \"marxism\",\n  \"mascot\",\n  \"masculine\",\n  \"mashed\",\n  \"mashing\",\n  \"massager\",\n  \"masses\",\n  \"massive\",\n  \"mastiff\",\n  \"matador\",\n  \"matchbook\",\n  \"matchbox\",\n  \"matcher\",\n  \"matching\",\n  \"matchless\",\n  \"material\",\n  \"maternal\",\n  \"maternity\",\n  \"math\",\n  \"mating\",\n  \"matriarch\",\n  \"matrimony\",\n  \"matrix\",\n  \"matron\",\n  \"matted\",\n  \"matter\",\n  \"maturely\",\n  \"maturing\",\n  \"maturity\",\n  \"mauve\",\n  \"maverick\",\n  \"maximize\",\n  \"maximum\",\n  \"maybe\",\n  \"mayday\",\n  \"mayflower\",\n  \"moaner\",\n  \"moaning\",\n  \"mobile\",\n  \"mobility\",\n  \"mobilize\",\n  \"mobster\",\n  \"mocha\",\n  \"mocker\",\n  \"mockup\",\n  \"modified\",\n  \"modify\",\n  \"modular\",\n  \"modulator\",\n  \"module\",\n  \"moisten\",\n  \"moistness\",\n  \"moisture\",\n  \"molar\",\n  \"molasses\",\n  \"mold\",\n  \"molecular\",\n  \"molecule\",\n  \"molehill\",\n  \"mollusk\",\n  \"mom\",\n  \"monastery\",\n  \"monday\",\n  \"monetary\",\n  \"monetize\",\n  \"moneybags\",\n  \"moneyless\",\n  \"moneywise\",\n  \"mongoose\",\n  \"mongrel\",\n  \"monitor\",\n  \"monkhood\",\n  \"monogamy\",\n  \"monogram\",\n  \"monologue\",\n  \"monopoly\",\n  \"monorail\",\n  \"monotone\",\n  \"monotype\",\n  \"monoxide\",\n  \"monsieur\",\n  \"monsoon\",\n  \"monstrous\",\n  \"monthly\",\n  \"monument\",\n  \"moocher\",\n  \"moodiness\",\n  \"moody\",\n  \"mooing\",\n  \"moonbeam\",\n  \"mooned\",\n  \"moonlight\",\n  \"moonlike\",\n  \"moonlit\",\n  \"moonrise\",\n  \"moonscape\",\n  \"moonshine\",\n  \"moonstone\",\n  \"moonwalk\",\n  \"mop\",\n  \"morale\",\n  \"morality\",\n  \"morally\",\n  \"morbidity\",\n  \"morbidly\",\n  \"morphine\",\n  \"morphing\",\n  \"morse\",\n  \"mortality\",\n  \"mortally\",\n  \"mortician\",\n  \"mortified\",\n  \"mortify\",\n  \"mortuary\",\n  \"mosaic\",\n  \"mossy\",\n  \"most\",\n  \"mothball\",\n  \"mothproof\",\n  \"motion\",\n  \"motivate\",\n  \"motivator\",\n  \"motive\",\n  \"motocross\",\n  \"motor\",\n  \"motto\",\n  \"mountable\",\n  \"mountain\",\n  \"mounted\",\n  \"mounting\",\n  \"mourner\",\n  \"mournful\",\n  \"mouse\",\n  \"mousiness\",\n  \"moustache\",\n  \"mousy\",\n  \"mouth\",\n  \"movable\",\n  \"move\",\n  \"movie\",\n  \"moving\",\n  \"mower\",\n  \"mowing\",\n  \"much\",\n  \"muck\",\n  \"mud\",\n  \"mug\",\n  \"mulberry\",\n  \"mulch\",\n  \"mule\",\n  \"mulled\",\n  \"mullets\",\n  \"multiple\",\n  \"multiply\",\n  \"multitask\",\n  \"multitude\",\n  \"mumble\",\n  \"mumbling\",\n  \"mumbo\",\n  \"mummified\",\n  \"mummify\",\n  \"mummy\",\n  \"mumps\",\n  \"munchkin\",\n  \"mundane\",\n  \"municipal\",\n  \"muppet\",\n  \"mural\",\n  \"murkiness\",\n  \"murky\",\n  \"murmuring\",\n  \"muscular\",\n  \"museum\",\n  \"mushily\",\n  \"mushiness\",\n  \"mushroom\",\n  \"mushy\",\n  \"music\",\n  \"musket\",\n  \"muskiness\",\n  \"musky\",\n  \"mustang\",\n  \"mustard\",\n  \"muster\",\n  \"mustiness\",\n  \"musty\",\n  \"mutable\",\n  \"mutate\",\n  \"mutation\",\n  \"mute\",\n  \"mutilated\",\n  \"mutilator\",\n  \"mutiny\",\n  \"mutt\",\n  \"mutual\",\n  \"muzzle\",\n  \"myself\",\n  \"myspace\",\n  \"mystified\",\n  \"mystify\",\n  \"myth\",\n  \"nacho\",\n  \"nag\",\n  \"nail\",\n  \"name\",\n  \"naming\",\n  \"nanny\",\n  \"nanometer\",\n  \"nape\",\n  \"napkin\",\n  \"napped\",\n  \"napping\",\n  \"nappy\",\n  \"narrow\",\n  \"nastily\",\n  \"nastiness\",\n  \"national\",\n  \"native\",\n  \"nativity\",\n  \"natural\",\n  \"nature\",\n  \"naturist\",\n  \"nautical\",\n  \"navigate\",\n  \"navigator\",\n  \"navy\",\n  \"nearby\",\n  \"nearest\",\n  \"nearly\",\n  \"nearness\",\n  \"neatly\",\n  \"neatness\",\n  \"nebula\",\n  \"nebulizer\",\n  \"nectar\",\n  \"negate\",\n  \"negation\",\n  \"negative\",\n  \"neglector\",\n  \"negligee\",\n  \"negligent\",\n  \"negotiate\",\n  \"nemeses\",\n  \"nemesis\",\n  \"neon\",\n  \"nephew\",\n  \"nerd\",\n  \"nervous\",\n  \"nervy\",\n  \"nest\",\n  \"net\",\n  \"neurology\",\n  \"neuron\",\n  \"neurosis\",\n  \"neurotic\",\n  \"neuter\",\n  \"neutron\",\n  \"never\",\n  \"next\",\n  \"nibble\",\n  \"nickname\",\n  \"nicotine\",\n  \"niece\",\n  \"nifty\",\n  \"nimble\",\n  \"nimbly\",\n  \"nineteen\",\n  \"ninetieth\",\n  \"ninja\",\n  \"nintendo\",\n  \"ninth\",\n  \"nuclear\",\n  \"nuclei\",\n  \"nucleus\",\n  \"nugget\",\n  \"nullify\",\n  \"number\",\n  \"numbing\",\n  \"numbly\",\n  \"numbness\",\n  \"numeral\",\n  \"numerate\",\n  \"numerator\",\n  \"numeric\",\n  \"numerous\",\n  \"nuptials\",\n  \"nursery\",\n  \"nursing\",\n  \"nurture\",\n  \"nutcase\",\n  \"nutlike\",\n  \"nutmeg\",\n  \"nutrient\",\n  \"nutshell\",\n  \"nuttiness\",\n  \"nutty\",\n  \"nuzzle\",\n  \"nylon\",\n  \"oaf\",\n  \"oak\",\n  \"oasis\",\n  \"oat\",\n  \"obedience\",\n  \"obedient\",\n  \"obituary\",\n  \"object\",\n  \"obligate\",\n  \"obliged\",\n  \"oblivion\",\n  \"oblivious\",\n  \"oblong\",\n  \"obnoxious\",\n  \"oboe\",\n  \"obscure\",\n  \"obscurity\",\n  \"observant\",\n  \"observer\",\n  \"observing\",\n  \"obsessed\",\n  \"obsession\",\n  \"obsessive\",\n  \"obsolete\",\n  \"obstacle\",\n  \"obstinate\",\n  \"obstruct\",\n  \"obtain\",\n  \"obtrusive\",\n  \"obtuse\",\n  \"obvious\",\n  \"occultist\",\n  \"occupancy\",\n  \"occupant\",\n  \"occupier\",\n  \"occupy\",\n  \"ocean\",\n  \"ocelot\",\n  \"octagon\",\n  \"octane\",\n  \"october\",\n  \"octopus\",\n  \"ogle\",\n  \"oil\",\n  \"oink\",\n  \"ointment\",\n  \"okay\",\n  \"old\",\n  \"olive\",\n  \"olympics\",\n  \"omega\",\n  \"omen\",\n  \"ominous\",\n  \"omission\",\n  \"omit\",\n  \"omnivore\",\n  \"onboard\",\n  \"oncoming\",\n  \"ongoing\",\n  \"onion\",\n  \"online\",\n  \"onlooker\",\n  \"only\",\n  \"onscreen\",\n  \"onset\",\n  \"onshore\",\n  \"onslaught\",\n  \"onstage\",\n  \"onto\",\n  \"onward\",\n  \"onyx\",\n  \"oops\",\n  \"ooze\",\n  \"oozy\",\n  \"opacity\",\n  \"opal\",\n  \"open\",\n  \"operable\",\n  \"operate\",\n  \"operating\",\n  \"operation\",\n  \"operative\",\n  \"operator\",\n  \"opium\",\n  \"opossum\",\n  \"opponent\",\n  \"oppose\",\n  \"opposing\",\n  \"opposite\",\n  \"oppressed\",\n  \"oppressor\",\n  \"opt\",\n  \"opulently\",\n  \"osmosis\",\n  \"other\",\n  \"otter\",\n  \"ouch\",\n  \"ought\",\n  \"ounce\",\n  \"outage\",\n  \"outback\",\n  \"outbid\",\n  \"outboard\",\n  \"outbound\",\n  \"outbreak\",\n  \"outburst\",\n  \"outcast\",\n  \"outclass\",\n  \"outcome\",\n  \"outdated\",\n  \"outdoors\",\n  \"outer\",\n  \"outfield\",\n  \"outfit\",\n  \"outflank\",\n  \"outgoing\",\n  \"outgrow\",\n  \"outhouse\",\n  \"outing\",\n  \"outlast\",\n  \"outlet\",\n  \"outline\",\n  \"outlook\",\n  \"outlying\",\n  \"outmatch\",\n  \"outmost\",\n  \"outnumber\",\n  \"outplayed\",\n  \"outpost\",\n  \"outpour\",\n  \"output\",\n  \"outrage\",\n  \"outrank\",\n  \"outreach\",\n  \"outright\",\n  \"outscore\",\n  \"outsell\",\n  \"outshine\",\n  \"outshoot\",\n  \"outsider\",\n  \"outskirts\",\n  \"outsmart\",\n  \"outsource\",\n  \"outspoken\",\n  \"outtakes\",\n  \"outthink\",\n  \"outward\",\n  \"outweigh\",\n  \"outwit\",\n  \"oval\",\n  \"ovary\",\n  \"oven\",\n  \"overact\",\n  \"overall\",\n  \"overarch\",\n  \"overbid\",\n  \"overbill\",\n  \"overbite\",\n  \"overblown\",\n  \"overboard\",\n  \"overbook\",\n  \"overbuilt\",\n  \"overcast\",\n  \"overcoat\",\n  \"overcome\",\n  \"overcook\",\n  \"overcrowd\",\n  \"overdraft\",\n  \"overdrawn\",\n  \"overdress\",\n  \"overdrive\",\n  \"overdue\",\n  \"overeager\",\n  \"overeater\",\n  \"overexert\",\n  \"overfed\",\n  \"overfeed\",\n  \"overfill\",\n  \"overflow\",\n  \"overfull\",\n  \"overgrown\",\n  \"overhand\",\n  \"overhang\",\n  \"overhaul\",\n  \"overhead\",\n  \"overhear\",\n  \"overheat\",\n  \"overhung\",\n  \"overjoyed\",\n  \"overkill\",\n  \"overlabor\",\n  \"overlaid\",\n  \"overlap\",\n  \"overlay\",\n  \"overload\",\n  \"overlook\",\n  \"overlord\",\n  \"overlying\",\n  \"overnight\",\n  \"overpass\",\n  \"overpay\",\n  \"overplant\",\n  \"overplay\",\n  \"overpower\",\n  \"overprice\",\n  \"overrate\",\n  \"overreach\",\n  \"overreact\",\n  \"override\",\n  \"overripe\",\n  \"overrule\",\n  \"overrun\",\n  \"overshoot\",\n  \"overshot\",\n  \"oversight\",\n  \"oversized\",\n  \"oversleep\",\n  \"oversold\",\n  \"overspend\",\n  \"overstate\",\n  \"overstay\",\n  \"overstep\",\n  \"overstock\",\n  \"overstuff\",\n  \"oversweet\",\n  \"overtake\",\n  \"overthrow\",\n  \"overtime\",\n  \"overtly\",\n  \"overtone\",\n  \"overture\",\n  \"overturn\",\n  \"overuse\",\n  \"overvalue\",\n  \"overview\",\n  \"overwrite\",\n  \"owl\",\n  \"oxford\",\n  \"oxidant\",\n  \"oxidation\",\n  \"oxidize\",\n  \"oxidizing\",\n  \"oxygen\",\n  \"oxymoron\",\n  \"oyster\",\n  \"ozone\",\n  \"paced\",\n  \"pacemaker\",\n  \"pacific\",\n  \"pacifier\",\n  \"pacifism\",\n  \"pacifist\",\n  \"pacify\",\n  \"padded\",\n  \"padding\",\n  \"paddle\",\n  \"paddling\",\n  \"padlock\",\n  \"pagan\",\n  \"pager\",\n  \"paging\",\n  \"pajamas\",\n  \"palace\",\n  \"palatable\",\n  \"palm\",\n  \"palpable\",\n  \"palpitate\",\n  \"paltry\",\n  \"pampered\",\n  \"pamperer\",\n  \"pampers\",\n  \"pamphlet\",\n  \"panama\",\n  \"pancake\",\n  \"pancreas\",\n  \"panda\",\n  \"pandemic\",\n  \"pang\",\n  \"panhandle\",\n  \"panic\",\n  \"panning\",\n  \"panorama\",\n  \"panoramic\",\n  \"panther\",\n  \"pantomime\",\n  \"pantry\",\n  \"pants\",\n  \"pantyhose\",\n  \"paparazzi\",\n  \"papaya\",\n  \"paper\",\n  \"paprika\",\n  \"papyrus\",\n  \"parabola\",\n  \"parachute\",\n  \"parade\",\n  \"paradox\",\n  \"paragraph\",\n  \"parakeet\",\n  \"paralegal\",\n  \"paralyses\",\n  \"paralysis\",\n  \"paralyze\",\n  \"paramedic\",\n  \"parameter\",\n  \"paramount\",\n  \"parasail\",\n  \"parasite\",\n  \"parasitic\",\n  \"parcel\",\n  \"parched\",\n  \"parchment\",\n  \"pardon\",\n  \"parish\",\n  \"parka\",\n  \"parking\",\n  \"parkway\",\n  \"parlor\",\n  \"parmesan\",\n  \"parole\",\n  \"parrot\",\n  \"parsley\",\n  \"parsnip\",\n  \"partake\",\n  \"parted\",\n  \"parting\",\n  \"partition\",\n  \"partly\",\n  \"partner\",\n  \"partridge\",\n  \"party\",\n  \"passable\",\n  \"passably\",\n  \"passage\",\n  \"passcode\",\n  \"passenger\",\n  \"passerby\",\n  \"passing\",\n  \"passion\",\n  \"passive\",\n  \"passivism\",\n  \"passover\",\n  \"passport\",\n  \"password\",\n  \"pasta\",\n  \"pasted\",\n  \"pastel\",\n  \"pastime\",\n  \"pastor\",\n  \"pastrami\",\n  \"pasture\",\n  \"pasty\",\n  \"patchwork\",\n  \"patchy\",\n  \"paternal\",\n  \"paternity\",\n  \"path\",\n  \"patience\",\n  \"patient\",\n  \"patio\",\n  \"patriarch\",\n  \"patriot\",\n  \"patrol\",\n  \"patronage\",\n  \"patronize\",\n  \"pauper\",\n  \"pavement\",\n  \"paver\",\n  \"pavestone\",\n  \"pavilion\",\n  \"paving\",\n  \"pawing\",\n  \"payable\",\n  \"payback\",\n  \"paycheck\",\n  \"payday\",\n  \"payee\",\n  \"payer\",\n  \"paying\",\n  \"payment\",\n  \"payphone\",\n  \"payroll\",\n  \"pebble\",\n  \"pebbly\",\n  \"pecan\",\n  \"pectin\",\n  \"peculiar\",\n  \"peddling\",\n  \"pediatric\",\n  \"pedicure\",\n  \"pedigree\",\n  \"pedometer\",\n  \"pegboard\",\n  \"pelican\",\n  \"pellet\",\n  \"pelt\",\n  \"pelvis\",\n  \"penalize\",\n  \"penalty\",\n  \"pencil\",\n  \"pendant\",\n  \"pending\",\n  \"penholder\",\n  \"penknife\",\n  \"pennant\",\n  \"penniless\",\n  \"penny\",\n  \"penpal\",\n  \"pension\",\n  \"pentagon\",\n  \"pentagram\",\n  \"pep\",\n  \"perceive\",\n  \"percent\",\n  \"perch\",\n  \"percolate\",\n  \"perennial\",\n  \"perfected\",\n  \"perfectly\",\n  \"perfume\",\n  \"periscope\",\n  \"perish\",\n  \"perjurer\",\n  \"perjury\",\n  \"perkiness\",\n  \"perky\",\n  \"perm\",\n  \"peroxide\",\n  \"perpetual\",\n  \"perplexed\",\n  \"persecute\",\n  \"persevere\",\n  \"persuaded\",\n  \"persuader\",\n  \"pesky\",\n  \"peso\",\n  \"pessimism\",\n  \"pessimist\",\n  \"pester\",\n  \"pesticide\",\n  \"petal\",\n  \"petite\",\n  \"petition\",\n  \"petri\",\n  \"petroleum\",\n  \"petted\",\n  \"petticoat\",\n  \"pettiness\",\n  \"petty\",\n  \"petunia\",\n  \"phantom\",\n  \"phobia\",\n  \"phoenix\",\n  \"phonebook\",\n  \"phoney\",\n  \"phonics\",\n  \"phoniness\",\n  \"phony\",\n  \"phosphate\",\n  \"photo\",\n  \"phrase\",\n  \"phrasing\",\n  \"placard\",\n  \"placate\",\n  \"placidly\",\n  \"plank\",\n  \"planner\",\n  \"plant\",\n  \"plasma\",\n  \"plaster\",\n  \"plastic\",\n  \"plated\",\n  \"platform\",\n  \"plating\",\n  \"platinum\",\n  \"platonic\",\n  \"platter\",\n  \"platypus\",\n  \"plausible\",\n  \"plausibly\",\n  \"playable\",\n  \"playback\",\n  \"player\",\n  \"playful\",\n  \"playgroup\",\n  \"playhouse\",\n  \"playing\",\n  \"playlist\",\n  \"playmaker\",\n  \"playmate\",\n  \"playoff\",\n  \"playpen\",\n  \"playroom\",\n  \"playset\",\n  \"plaything\",\n  \"playtime\",\n  \"plaza\",\n  \"pleading\",\n  \"pleat\",\n  \"pledge\",\n  \"plentiful\",\n  \"plenty\",\n  \"plethora\",\n  \"plexiglas\",\n  \"pliable\",\n  \"plod\",\n  \"plop\",\n  \"plot\",\n  \"plow\",\n  \"ploy\",\n  \"pluck\",\n  \"plug\",\n  \"plunder\",\n  \"plunging\",\n  \"plural\",\n  \"plus\",\n  \"plutonium\",\n  \"plywood\",\n  \"poach\",\n  \"pod\",\n  \"poem\",\n  \"poet\",\n  \"pogo\",\n  \"pointed\",\n  \"pointer\",\n  \"pointing\",\n  \"pointless\",\n  \"pointy\",\n  \"poise\",\n  \"poison\",\n  \"poker\",\n  \"poking\",\n  \"polar\",\n  \"police\",\n  \"policy\",\n  \"polio\",\n  \"polish\",\n  \"politely\",\n  \"polka\",\n  \"polo\",\n  \"polyester\",\n  \"polygon\",\n  \"polygraph\",\n  \"polymer\",\n  \"poncho\",\n  \"pond\",\n  \"pony\",\n  \"popcorn\",\n  \"pope\",\n  \"poplar\",\n  \"popper\",\n  \"poppy\",\n  \"popsicle\",\n  \"populace\",\n  \"popular\",\n  \"populate\",\n  \"porcupine\",\n  \"pork\",\n  \"porous\",\n  \"porridge\",\n  \"portable\",\n  \"portal\",\n  \"portfolio\",\n  \"porthole\",\n  \"portion\",\n  \"portly\",\n  \"portside\",\n  \"poser\",\n  \"posh\",\n  \"posing\",\n  \"possible\",\n  \"possibly\",\n  \"possum\",\n  \"postage\",\n  \"postal\",\n  \"postbox\",\n  \"postcard\",\n  \"posted\",\n  \"poster\",\n  \"posting\",\n  \"postnasal\",\n  \"posture\",\n  \"postwar\",\n  \"pouch\",\n  \"pounce\",\n  \"pouncing\",\n  \"pound\",\n  \"pouring\",\n  \"pout\",\n  \"powdered\",\n  \"powdering\",\n  \"powdery\",\n  \"power\",\n  \"powwow\",\n  \"pox\",\n  \"praising\",\n  \"prance\",\n  \"prancing\",\n  \"pranker\",\n  \"prankish\",\n  \"prankster\",\n  \"prayer\",\n  \"praying\",\n  \"preacher\",\n  \"preaching\",\n  \"preachy\",\n  \"preamble\",\n  \"precinct\",\n  \"precise\",\n  \"precision\",\n  \"precook\",\n  \"precut\",\n  \"predator\",\n  \"predefine\",\n  \"predict\",\n  \"preface\",\n  \"prefix\",\n  \"preflight\",\n  \"preformed\",\n  \"pregame\",\n  \"pregnancy\",\n  \"pregnant\",\n  \"preheated\",\n  \"prelaunch\",\n  \"prelaw\",\n  \"prelude\",\n  \"premiere\",\n  \"premises\",\n  \"premium\",\n  \"prenatal\",\n  \"preoccupy\",\n  \"preorder\",\n  \"prepaid\",\n  \"prepay\",\n  \"preplan\",\n  \"preppy\",\n  \"preschool\",\n  \"prescribe\",\n  \"preseason\",\n  \"preset\",\n  \"preshow\",\n  \"president\",\n  \"presoak\",\n  \"press\",\n  \"presume\",\n  \"presuming\",\n  \"preteen\",\n  \"pretended\",\n  \"pretender\",\n  \"pretense\",\n  \"pretext\",\n  \"pretty\",\n  \"pretzel\",\n  \"prevail\",\n  \"prevalent\",\n  \"prevent\",\n  \"preview\",\n  \"previous\",\n  \"prewar\",\n  \"prewashed\",\n  \"prideful\",\n  \"pried\",\n  \"primal\",\n  \"primarily\",\n  \"primary\",\n  \"primate\",\n  \"primer\",\n  \"primp\",\n  \"princess\",\n  \"print\",\n  \"prior\",\n  \"prism\",\n  \"prison\",\n  \"prissy\",\n  \"pristine\",\n  \"privacy\",\n  \"private\",\n  \"privatize\",\n  \"prize\",\n  \"proactive\",\n  \"probable\",\n  \"probably\",\n  \"probation\",\n  \"probe\",\n  \"probing\",\n  \"probiotic\",\n  \"problem\",\n  \"procedure\",\n  \"process\",\n  \"proclaim\",\n  \"procreate\",\n  \"procurer\",\n  \"prodigal\",\n  \"prodigy\",\n  \"produce\",\n  \"product\",\n  \"profane\",\n  \"profanity\",\n  \"professed\",\n  \"professor\",\n  \"profile\",\n  \"profound\",\n  \"profusely\",\n  \"progeny\",\n  \"prognosis\",\n  \"program\",\n  \"progress\",\n  \"projector\",\n  \"prologue\",\n  \"prolonged\",\n  \"promenade\",\n  \"prominent\",\n  \"promoter\",\n  \"promotion\",\n  \"prompter\",\n  \"promptly\",\n  \"prone\",\n  \"prong\",\n  \"pronounce\",\n  \"pronto\",\n  \"proofing\",\n  \"proofread\",\n  \"proofs\",\n  \"propeller\",\n  \"properly\",\n  \"property\",\n  \"proponent\",\n  \"proposal\",\n  \"propose\",\n  \"props\",\n  \"prorate\",\n  \"protector\",\n  \"protegee\",\n  \"proton\",\n  \"prototype\",\n  \"protozoan\",\n  \"protract\",\n  \"protrude\",\n  \"proud\",\n  \"provable\",\n  \"proved\",\n  \"proven\",\n  \"provided\",\n  \"provider\",\n  \"providing\",\n  \"province\",\n  \"proving\",\n  \"provoke\",\n  \"provoking\",\n  \"provolone\",\n  \"prowess\",\n  \"prowler\",\n  \"prowling\",\n  \"proximity\",\n  \"proxy\",\n  \"prozac\",\n  \"prude\",\n  \"prudishly\",\n  \"prune\",\n  \"pruning\",\n  \"pry\",\n  \"psychic\",\n  \"public\",\n  \"publisher\",\n  \"pucker\",\n  \"pueblo\",\n  \"pug\",\n  \"pull\",\n  \"pulmonary\",\n  \"pulp\",\n  \"pulsate\",\n  \"pulse\",\n  \"pulverize\",\n  \"puma\",\n  \"pumice\",\n  \"pummel\",\n  \"punch\",\n  \"punctual\",\n  \"punctuate\",\n  \"punctured\",\n  \"pungent\",\n  \"punisher\",\n  \"punk\",\n  \"pupil\",\n  \"puppet\",\n  \"puppy\",\n  \"purchase\",\n  \"pureblood\",\n  \"purebred\",\n  \"purely\",\n  \"pureness\",\n  \"purgatory\",\n  \"purge\",\n  \"purging\",\n  \"purifier\",\n  \"purify\",\n  \"purist\",\n  \"puritan\",\n  \"purity\",\n  \"purple\",\n  \"purplish\",\n  \"purposely\",\n  \"purr\",\n  \"purse\",\n  \"pursuable\",\n  \"pursuant\",\n  \"pursuit\",\n  \"purveyor\",\n  \"pushcart\",\n  \"pushchair\",\n  \"pusher\",\n  \"pushiness\",\n  \"pushing\",\n  \"pushover\",\n  \"pushpin\",\n  \"pushup\",\n  \"pushy\",\n  \"putdown\",\n  \"putt\",\n  \"puzzle\",\n  \"puzzling\",\n  \"pyramid\",\n  \"pyromania\",\n  \"python\",\n  \"quack\",\n  \"quadrant\",\n  \"quail\",\n  \"quaintly\",\n  \"quake\",\n  \"quaking\",\n  \"qualified\",\n  \"qualifier\",\n  \"qualify\",\n  \"quality\",\n  \"qualm\",\n  \"quantum\",\n  \"quarrel\",\n  \"quarry\",\n  \"quartered\",\n  \"quarterly\",\n  \"quarters\",\n  \"quartet\",\n  \"quench\",\n  \"query\",\n  \"quicken\",\n  \"quickly\",\n  \"quickness\",\n  \"quicksand\",\n  \"quickstep\",\n  \"quiet\",\n  \"quill\",\n  \"quilt\",\n  \"quintet\",\n  \"quintuple\",\n  \"quirk\",\n  \"quit\",\n  \"quiver\",\n  \"quizzical\",\n  \"quotable\",\n  \"quotation\",\n  \"quote\",\n  \"rabid\",\n  \"race\",\n  \"racing\",\n  \"racism\",\n  \"rack\",\n  \"racoon\",\n  \"radar\",\n  \"radial\",\n  \"radiance\",\n  \"radiantly\",\n  \"radiated\",\n  \"radiation\",\n  \"radiator\",\n  \"radio\",\n  \"radish\",\n  \"raffle\",\n  \"raft\",\n  \"rage\",\n  \"ragged\",\n  \"raging\",\n  \"ragweed\",\n  \"raider\",\n  \"railcar\",\n  \"railing\",\n  \"railroad\",\n  \"railway\",\n  \"raisin\",\n  \"rake\",\n  \"raking\",\n  \"rally\",\n  \"ramble\",\n  \"rambling\",\n  \"ramp\",\n  \"ramrod\",\n  \"ranch\",\n  \"rancidity\",\n  \"random\",\n  \"ranged\",\n  \"ranger\",\n  \"ranging\",\n  \"ranked\",\n  \"ranking\",\n  \"ransack\",\n  \"ranting\",\n  \"rants\",\n  \"rare\",\n  \"rarity\",\n  \"rascal\",\n  \"rash\",\n  \"rasping\",\n  \"ravage\",\n  \"raven\",\n  \"ravine\",\n  \"raving\",\n  \"ravioli\",\n  \"ravishing\",\n  \"reabsorb\",\n  \"reach\",\n  \"reacquire\",\n  \"reaction\",\n  \"reactive\",\n  \"reactor\",\n  \"reaffirm\",\n  \"ream\",\n  \"reanalyze\",\n  \"reappear\",\n  \"reapply\",\n  \"reappoint\",\n  \"reapprove\",\n  \"rearrange\",\n  \"rearview\",\n  \"reason\",\n  \"reassign\",\n  \"reassure\",\n  \"reattach\",\n  \"reawake\",\n  \"rebalance\",\n  \"rebate\",\n  \"rebel\",\n  \"rebirth\",\n  \"reboot\",\n  \"reborn\",\n  \"rebound\",\n  \"rebuff\",\n  \"rebuild\",\n  \"rebuilt\",\n  \"reburial\",\n  \"rebuttal\",\n  \"recall\",\n  \"recant\",\n  \"recapture\",\n  \"recast\",\n  \"recede\",\n  \"recent\",\n  \"recess\",\n  \"recharger\",\n  \"recipient\",\n  \"recital\",\n  \"recite\",\n  \"reckless\",\n  \"reclaim\",\n  \"recliner\",\n  \"reclining\",\n  \"recluse\",\n  \"reclusive\",\n  \"recognize\",\n  \"recoil\",\n  \"recollect\",\n  \"recolor\",\n  \"reconcile\",\n  \"reconfirm\",\n  \"reconvene\",\n  \"recopy\",\n  \"record\",\n  \"recount\",\n  \"recoup\",\n  \"recovery\",\n  \"recreate\",\n  \"rectal\",\n  \"rectangle\",\n  \"rectified\",\n  \"rectify\",\n  \"recycled\",\n  \"recycler\",\n  \"recycling\",\n  \"reemerge\",\n  \"reenact\",\n  \"reenter\",\n  \"reentry\",\n  \"reexamine\",\n  \"referable\",\n  \"referee\",\n  \"reference\",\n  \"refill\",\n  \"refinance\",\n  \"refined\",\n  \"refinery\",\n  \"refining\",\n  \"refinish\",\n  \"reflected\",\n  \"reflector\",\n  \"reflex\",\n  \"reflux\",\n  \"refocus\",\n  \"refold\",\n  \"reforest\",\n  \"reformat\",\n  \"reformed\",\n  \"reformer\",\n  \"reformist\",\n  \"refract\",\n  \"refrain\",\n  \"refreeze\",\n  \"refresh\",\n  \"refried\",\n  \"refueling\",\n  \"refund\",\n  \"refurbish\",\n  \"refurnish\",\n  \"refusal\",\n  \"refuse\",\n  \"refusing\",\n  \"refutable\",\n  \"refute\",\n  \"regain\",\n  \"regalia\",\n  \"regally\",\n  \"reggae\",\n  \"regime\",\n  \"region\",\n  \"register\",\n  \"registrar\",\n  \"registry\",\n  \"regress\",\n  \"regretful\",\n  \"regroup\",\n  \"regular\",\n  \"regulate\",\n  \"regulator\",\n  \"rehab\",\n  \"reheat\",\n  \"rehire\",\n  \"rehydrate\",\n  \"reimburse\",\n  \"reissue\",\n  \"reiterate\",\n  \"rejoice\",\n  \"rejoicing\",\n  \"rejoin\",\n  \"rekindle\",\n  \"relapse\",\n  \"relapsing\",\n  \"relatable\",\n  \"related\",\n  \"relation\",\n  \"relative\",\n  \"relax\",\n  \"relay\",\n  \"relearn\",\n  \"release\",\n  \"relenting\",\n  \"reliable\",\n  \"reliably\",\n  \"reliance\",\n  \"reliant\",\n  \"relic\",\n  \"relieve\",\n  \"relieving\",\n  \"relight\",\n  \"relish\",\n  \"relive\",\n  \"reload\",\n  \"relocate\",\n  \"relock\",\n  \"reluctant\",\n  \"rely\",\n  \"remake\",\n  \"remark\",\n  \"remarry\",\n  \"rematch\",\n  \"remedial\",\n  \"remedy\",\n  \"remember\",\n  \"reminder\",\n  \"remindful\",\n  \"remission\",\n  \"remix\",\n  \"remnant\",\n  \"remodeler\",\n  \"remold\",\n  \"remorse\",\n  \"remote\",\n  \"removable\",\n  \"removal\",\n  \"removed\",\n  \"remover\",\n  \"removing\",\n  \"rename\",\n  \"renderer\",\n  \"rendering\",\n  \"rendition\",\n  \"renegade\",\n  \"renewable\",\n  \"renewably\",\n  \"renewal\",\n  \"renewed\",\n  \"renounce\",\n  \"renovate\",\n  \"renovator\",\n  \"rentable\",\n  \"rental\",\n  \"rented\",\n  \"renter\",\n  \"reoccupy\",\n  \"reoccur\",\n  \"reopen\",\n  \"reorder\",\n  \"repackage\",\n  \"repacking\",\n  \"repaint\",\n  \"repair\",\n  \"repave\",\n  \"repaying\",\n  \"repayment\",\n  \"repeal\",\n  \"repeated\",\n  \"repeater\",\n  \"repent\",\n  \"rephrase\",\n  \"replace\",\n  \"replay\",\n  \"replica\",\n  \"reply\",\n  \"reporter\",\n  \"repose\",\n  \"repossess\",\n  \"repost\",\n  \"repressed\",\n  \"reprimand\",\n  \"reprint\",\n  \"reprise\",\n  \"reproach\",\n  \"reprocess\",\n  \"reproduce\",\n  \"reprogram\",\n  \"reps\",\n  \"reptile\",\n  \"reptilian\",\n  \"repugnant\",\n  \"repulsion\",\n  \"repulsive\",\n  \"repurpose\",\n  \"reputable\",\n  \"reputably\",\n  \"request\",\n  \"require\",\n  \"requisite\",\n  \"reroute\",\n  \"rerun\",\n  \"resale\",\n  \"resample\",\n  \"rescuer\",\n  \"reseal\",\n  \"research\",\n  \"reselect\",\n  \"reseller\",\n  \"resemble\",\n  \"resend\",\n  \"resent\",\n  \"reset\",\n  \"reshape\",\n  \"reshoot\",\n  \"reshuffle\",\n  \"residence\",\n  \"residency\",\n  \"resident\",\n  \"residual\",\n  \"residue\",\n  \"resigned\",\n  \"resilient\",\n  \"resistant\",\n  \"resisting\",\n  \"resize\",\n  \"resolute\",\n  \"resolved\",\n  \"resonant\",\n  \"resonate\",\n  \"resort\",\n  \"resource\",\n  \"respect\",\n  \"resubmit\",\n  \"result\",\n  \"resume\",\n  \"resupply\",\n  \"resurface\",\n  \"resurrect\",\n  \"retail\",\n  \"retainer\",\n  \"retaining\",\n  \"retake\",\n  \"retaliate\",\n  \"retention\",\n  \"rethink\",\n  \"retinal\",\n  \"retired\",\n  \"retiree\",\n  \"retiring\",\n  \"retold\",\n  \"retool\",\n  \"retorted\",\n  \"retouch\",\n  \"retrace\",\n  \"retract\",\n  \"retrain\",\n  \"retread\",\n  \"retreat\",\n  \"retrial\",\n  \"retrieval\",\n  \"retriever\",\n  \"retry\",\n  \"return\",\n  \"retying\",\n  \"retype\",\n  \"reunion\",\n  \"reunite\",\n  \"reusable\",\n  \"reuse\",\n  \"reveal\",\n  \"reveler\",\n  \"revenge\",\n  \"revenue\",\n  \"reverb\",\n  \"revered\",\n  \"reverence\",\n  \"reverend\",\n  \"reversal\",\n  \"reverse\",\n  \"reversing\",\n  \"reversion\",\n  \"revert\",\n  \"revisable\",\n  \"revise\",\n  \"revision\",\n  \"revisit\",\n  \"revivable\",\n  \"revival\",\n  \"reviver\",\n  \"reviving\",\n  \"revocable\",\n  \"revoke\",\n  \"revolt\",\n  \"revolver\",\n  \"revolving\",\n  \"reward\",\n  \"rewash\",\n  \"rewind\",\n  \"rewire\",\n  \"reword\",\n  \"rework\",\n  \"rewrap\",\n  \"rewrite\",\n  \"rhyme\",\n  \"ribbon\",\n  \"ribcage\",\n  \"rice\",\n  \"riches\",\n  \"richly\",\n  \"richness\",\n  \"rickety\",\n  \"ricotta\",\n  \"riddance\",\n  \"ridden\",\n  \"ride\",\n  \"riding\",\n  \"rifling\",\n  \"rift\",\n  \"rigging\",\n  \"rigid\",\n  \"rigor\",\n  \"rimless\",\n  \"rimmed\",\n  \"rind\",\n  \"rink\",\n  \"rinse\",\n  \"rinsing\",\n  \"riot\",\n  \"ripcord\",\n  \"ripeness\",\n  \"ripening\",\n  \"ripping\",\n  \"ripple\",\n  \"rippling\",\n  \"riptide\",\n  \"rise\",\n  \"rising\",\n  \"risk\",\n  \"risotto\",\n  \"ritalin\",\n  \"ritzy\",\n  \"rival\",\n  \"riverbank\",\n  \"riverbed\",\n  \"riverboat\",\n  \"riverside\",\n  \"riveter\",\n  \"riveting\",\n  \"roamer\",\n  \"roaming\",\n  \"roast\",\n  \"robbing\",\n  \"robe\",\n  \"robin\",\n  \"robotics\",\n  \"robust\",\n  \"rockband\",\n  \"rocker\",\n  \"rocket\",\n  \"rockfish\",\n  \"rockiness\",\n  \"rocking\",\n  \"rocklike\",\n  \"rockslide\",\n  \"rockstar\",\n  \"rocky\",\n  \"rogue\",\n  \"roman\",\n  \"romp\",\n  \"rope\",\n  \"roping\",\n  \"roster\",\n  \"rosy\",\n  \"rotten\",\n  \"rotting\",\n  \"rotunda\",\n  \"roulette\",\n  \"rounding\",\n  \"roundish\",\n  \"roundness\",\n  \"roundup\",\n  \"roundworm\",\n  \"routine\",\n  \"routing\",\n  \"rover\",\n  \"roving\",\n  \"royal\",\n  \"rubbed\",\n  \"rubber\",\n  \"rubbing\",\n  \"rubble\",\n  \"rubdown\",\n  \"ruby\",\n  \"ruckus\",\n  \"rudder\",\n  \"rug\",\n  \"ruined\",\n  \"rule\",\n  \"rumble\",\n  \"rumbling\",\n  \"rummage\",\n  \"rumor\",\n  \"runaround\",\n  \"rundown\",\n  \"runner\",\n  \"running\",\n  \"runny\",\n  \"runt\",\n  \"runway\",\n  \"rupture\",\n  \"rural\",\n  \"ruse\",\n  \"rush\",\n  \"rust\",\n  \"rut\",\n  \"sabbath\",\n  \"sabotage\",\n  \"sacrament\",\n  \"sacred\",\n  \"sacrifice\",\n  \"sadden\",\n  \"saddlebag\",\n  \"saddled\",\n  \"saddling\",\n  \"sadly\",\n  \"sadness\",\n  \"safari\",\n  \"safeguard\",\n  \"safehouse\",\n  \"safely\",\n  \"safeness\",\n  \"saffron\",\n  \"saga\",\n  \"sage\",\n  \"sagging\",\n  \"saggy\",\n  \"said\",\n  \"saint\",\n  \"sake\",\n  \"salad\",\n  \"salami\",\n  \"salaried\",\n  \"salary\",\n  \"saline\",\n  \"salon\",\n  \"saloon\",\n  \"salsa\",\n  \"salt\",\n  \"salutary\",\n  \"salute\",\n  \"salvage\",\n  \"salvaging\",\n  \"salvation\",\n  \"same\",\n  \"sample\",\n  \"sampling\",\n  \"sanction\",\n  \"sanctity\",\n  \"sanctuary\",\n  \"sandal\",\n  \"sandbag\",\n  \"sandbank\",\n  \"sandbar\",\n  \"sandblast\",\n  \"sandbox\",\n  \"sanded\",\n  \"sandfish\",\n  \"sanding\",\n  \"sandlot\",\n  \"sandpaper\",\n  \"sandpit\",\n  \"sandstone\",\n  \"sandstorm\",\n  \"sandworm\",\n  \"sandy\",\n  \"sanitary\",\n  \"sanitizer\",\n  \"sank\",\n  \"santa\",\n  \"sapling\",\n  \"sappiness\",\n  \"sappy\",\n  \"sarcasm\",\n  \"sarcastic\",\n  \"sardine\",\n  \"sash\",\n  \"sasquatch\",\n  \"sassy\",\n  \"satchel\",\n  \"satiable\",\n  \"satin\",\n  \"satirical\",\n  \"satisfied\",\n  \"satisfy\",\n  \"saturate\",\n  \"saturday\",\n  \"sauciness\",\n  \"saucy\",\n  \"sauna\",\n  \"savage\",\n  \"savanna\",\n  \"saved\",\n  \"savings\",\n  \"savior\",\n  \"savor\",\n  \"saxophone\",\n  \"say\",\n  \"scabbed\",\n  \"scabby\",\n  \"scalded\",\n  \"scalding\",\n  \"scale\",\n  \"scaling\",\n  \"scallion\",\n  \"scallop\",\n  \"scalping\",\n  \"scam\",\n  \"scandal\",\n  \"scanner\",\n  \"scanning\",\n  \"scant\",\n  \"scapegoat\",\n  \"scarce\",\n  \"scarcity\",\n  \"scarecrow\",\n  \"scared\",\n  \"scarf\",\n  \"scarily\",\n  \"scariness\",\n  \"scarring\",\n  \"scary\",\n  \"scavenger\",\n  \"scenic\",\n  \"schedule\",\n  \"schematic\",\n  \"scheme\",\n  \"scheming\",\n  \"schilling\",\n  \"schnapps\",\n  \"scholar\",\n  \"science\",\n  \"scientist\",\n  \"scion\",\n  \"scoff\",\n  \"scolding\",\n  \"scone\",\n  \"scoop\",\n  \"scooter\",\n  \"scope\",\n  \"scorch\",\n  \"scorebook\",\n  \"scorecard\",\n  \"scored\",\n  \"scoreless\",\n  \"scorer\",\n  \"scoring\",\n  \"scorn\",\n  \"scorpion\",\n  \"scotch\",\n  \"scoundrel\",\n  \"scoured\",\n  \"scouring\",\n  \"scouting\",\n  \"scouts\",\n  \"scowling\",\n  \"scrabble\",\n  \"scraggly\",\n  \"scrambled\",\n  \"scrambler\",\n  \"scrap\",\n  \"scratch\",\n  \"scrawny\",\n  \"screen\",\n  \"scribble\",\n  \"scribe\",\n  \"scribing\",\n  \"scrimmage\",\n  \"script\",\n  \"scroll\",\n  \"scrooge\",\n  \"scrounger\",\n  \"scrubbed\",\n  \"scrubber\",\n  \"scruffy\",\n  \"scrunch\",\n  \"scrutiny\",\n  \"scuba\",\n  \"scuff\",\n  \"sculptor\",\n  \"sculpture\",\n  \"scurvy\",\n  \"scuttle\",\n  \"secluded\",\n  \"secluding\",\n  \"seclusion\",\n  \"second\",\n  \"secrecy\",\n  \"secret\",\n  \"sectional\",\n  \"sector\",\n  \"secular\",\n  \"securely\",\n  \"security\",\n  \"sedan\",\n  \"sedate\",\n  \"sedation\",\n  \"sedative\",\n  \"sediment\",\n  \"seduce\",\n  \"seducing\",\n  \"segment\",\n  \"seismic\",\n  \"seizing\",\n  \"seldom\",\n  \"selected\",\n  \"selection\",\n  \"selective\",\n  \"selector\",\n  \"self\",\n  \"seltzer\",\n  \"semantic\",\n  \"semester\",\n  \"semicolon\",\n  \"semifinal\",\n  \"seminar\",\n  \"semisoft\",\n  \"semisweet\",\n  \"senate\",\n  \"senator\",\n  \"send\",\n  \"senior\",\n  \"senorita\",\n  \"sensation\",\n  \"sensitive\",\n  \"sensitize\",\n  \"sensually\",\n  \"sensuous\",\n  \"sepia\",\n  \"september\",\n  \"septic\",\n  \"septum\",\n  \"sequel\",\n  \"sequence\",\n  \"sequester\",\n  \"series\",\n  \"sermon\",\n  \"serotonin\",\n  \"serpent\",\n  \"serrated\",\n  \"serve\",\n  \"service\",\n  \"serving\",\n  \"sesame\",\n  \"sessions\",\n  \"setback\",\n  \"setting\",\n  \"settle\",\n  \"settling\",\n  \"setup\",\n  \"sevenfold\",\n  \"seventeen\",\n  \"seventh\",\n  \"seventy\",\n  \"severity\",\n  \"shabby\",\n  \"shack\",\n  \"shaded\",\n  \"shadily\",\n  \"shadiness\",\n  \"shading\",\n  \"shadow\",\n  \"shady\",\n  \"shaft\",\n  \"shakable\",\n  \"shakily\",\n  \"shakiness\",\n  \"shaking\",\n  \"shaky\",\n  \"shale\",\n  \"shallot\",\n  \"shallow\",\n  \"shame\",\n  \"shampoo\",\n  \"shamrock\",\n  \"shank\",\n  \"shanty\",\n  \"shape\",\n  \"shaping\",\n  \"share\",\n  \"sharpener\",\n  \"sharper\",\n  \"sharpie\",\n  \"sharply\",\n  \"sharpness\",\n  \"shawl\",\n  \"sheath\",\n  \"shed\",\n  \"sheep\",\n  \"sheet\",\n  \"shelf\",\n  \"shell\",\n  \"shelter\",\n  \"shelve\",\n  \"shelving\",\n  \"sherry\",\n  \"shield\",\n  \"shifter\",\n  \"shifting\",\n  \"shiftless\",\n  \"shifty\",\n  \"shimmer\",\n  \"shimmy\",\n  \"shindig\",\n  \"shine\",\n  \"shingle\",\n  \"shininess\",\n  \"shining\",\n  \"shiny\",\n  \"ship\",\n  \"shirt\",\n  \"shivering\",\n  \"shock\",\n  \"shone\",\n  \"shoplift\",\n  \"shopper\",\n  \"shopping\",\n  \"shoptalk\",\n  \"shore\",\n  \"shortage\",\n  \"shortcake\",\n  \"shortcut\",\n  \"shorten\",\n  \"shorter\",\n  \"shorthand\",\n  \"shortlist\",\n  \"shortly\",\n  \"shortness\",\n  \"shorts\",\n  \"shortwave\",\n  \"shorty\",\n  \"shout\",\n  \"shove\",\n  \"showbiz\",\n  \"showcase\",\n  \"showdown\",\n  \"shower\",\n  \"showgirl\",\n  \"showing\",\n  \"showman\",\n  \"shown\",\n  \"showoff\",\n  \"showpiece\",\n  \"showplace\",\n  \"showroom\",\n  \"showy\",\n  \"shrank\",\n  \"shrapnel\",\n  \"shredder\",\n  \"shredding\",\n  \"shrewdly\",\n  \"shriek\",\n  \"shrill\",\n  \"shrimp\",\n  \"shrine\",\n  \"shrink\",\n  \"shrivel\",\n  \"shrouded\",\n  \"shrubbery\",\n  \"shrubs\",\n  \"shrug\",\n  \"shrunk\",\n  \"shucking\",\n  \"shudder\",\n  \"shuffle\",\n  \"shuffling\",\n  \"shun\",\n  \"shush\",\n  \"shut\",\n  \"shy\",\n  \"siamese\",\n  \"siberian\",\n  \"sibling\",\n  \"siding\",\n  \"sierra\",\n  \"siesta\",\n  \"sift\",\n  \"sighing\",\n  \"silenced\",\n  \"silencer\",\n  \"silent\",\n  \"silica\",\n  \"silicon\",\n  \"silk\",\n  \"silliness\",\n  \"silly\",\n  \"silo\",\n  \"silt\",\n  \"silver\",\n  \"similarly\",\n  \"simile\",\n  \"simmering\",\n  \"simple\",\n  \"simplify\",\n  \"simply\",\n  \"sincere\",\n  \"sincerity\",\n  \"singer\",\n  \"singing\",\n  \"single\",\n  \"singular\",\n  \"sinister\",\n  \"sinless\",\n  \"sinner\",\n  \"sinuous\",\n  \"sip\",\n  \"siren\",\n  \"sister\",\n  \"sitcom\",\n  \"sitter\",\n  \"sitting\",\n  \"situated\",\n  \"situation\",\n  \"sixfold\",\n  \"sixteen\",\n  \"sixth\",\n  \"sixties\",\n  \"sixtieth\",\n  \"sixtyfold\",\n  \"sizable\",\n  \"sizably\",\n  \"size\",\n  \"sizing\",\n  \"sizzle\",\n  \"sizzling\",\n  \"skater\",\n  \"skating\",\n  \"skedaddle\",\n  \"skeletal\",\n  \"skeleton\",\n  \"skeptic\",\n  \"sketch\",\n  \"skewed\",\n  \"skewer\",\n  \"skid\",\n  \"skied\",\n  \"skier\",\n  \"skies\",\n  \"skiing\",\n  \"skilled\",\n  \"skillet\",\n  \"skillful\",\n  \"skimmed\",\n  \"skimmer\",\n  \"skimming\",\n  \"skimpily\",\n  \"skincare\",\n  \"skinhead\",\n  \"skinless\",\n  \"skinning\",\n  \"skinny\",\n  \"skintight\",\n  \"skipper\",\n  \"skipping\",\n  \"skirmish\",\n  \"skirt\",\n  \"skittle\",\n  \"skydiver\",\n  \"skylight\",\n  \"skyline\",\n  \"skype\",\n  \"skyrocket\",\n  \"skyward\",\n  \"slab\",\n  \"slacked\",\n  \"slacker\",\n  \"slacking\",\n  \"slackness\",\n  \"slacks\",\n  \"slain\",\n  \"slam\",\n  \"slander\",\n  \"slang\",\n  \"slapping\",\n  \"slapstick\",\n  \"slashed\",\n  \"slashing\",\n  \"slate\",\n  \"slather\",\n  \"slaw\",\n  \"sled\",\n  \"sleek\",\n  \"sleep\",\n  \"sleet\",\n  \"sleeve\",\n  \"slept\",\n  \"sliceable\",\n  \"sliced\",\n  \"slicer\",\n  \"slicing\",\n  \"slick\",\n  \"slider\",\n  \"slideshow\",\n  \"sliding\",\n  \"slighted\",\n  \"slighting\",\n  \"slightly\",\n  \"slimness\",\n  \"slimy\",\n  \"slinging\",\n  \"slingshot\",\n  \"slinky\",\n  \"slip\",\n  \"slit\",\n  \"sliver\",\n  \"slobbery\",\n  \"slogan\",\n  \"sloped\",\n  \"sloping\",\n  \"sloppily\",\n  \"sloppy\",\n  \"slot\",\n  \"slouching\",\n  \"slouchy\",\n  \"sludge\",\n  \"slug\",\n  \"slum\",\n  \"slurp\",\n  \"slush\",\n  \"sly\",\n  \"small\",\n  \"smartly\",\n  \"smartness\",\n  \"smasher\",\n  \"smashing\",\n  \"smashup\",\n  \"smell\",\n  \"smelting\",\n  \"smile\",\n  \"smilingly\",\n  \"smirk\",\n  \"smite\",\n  \"smith\",\n  \"smitten\",\n  \"smock\",\n  \"smog\",\n  \"smoked\",\n  \"smokeless\",\n  \"smokiness\",\n  \"smoking\",\n  \"smoky\",\n  \"smolder\",\n  \"smooth\",\n  \"smother\",\n  \"smudge\",\n  \"smudgy\",\n  \"smuggler\",\n  \"smuggling\",\n  \"smugly\",\n  \"smugness\",\n  \"snack\",\n  \"snagged\",\n  \"snaking\",\n  \"snap\",\n  \"snare\",\n  \"snarl\",\n  \"snazzy\",\n  \"sneak\",\n  \"sneer\",\n  \"sneeze\",\n  \"sneezing\",\n  \"snide\",\n  \"sniff\",\n  \"snippet\",\n  \"snipping\",\n  \"snitch\",\n  \"snooper\",\n  \"snooze\",\n  \"snore\",\n  \"snoring\",\n  \"snorkel\",\n  \"snort\",\n  \"snout\",\n  \"snowbird\",\n  \"snowboard\",\n  \"snowbound\",\n  \"snowcap\",\n  \"snowdrift\",\n  \"snowdrop\",\n  \"snowfall\",\n  \"snowfield\",\n  \"snowflake\",\n  \"snowiness\",\n  \"snowless\",\n  \"snowman\",\n  \"snowplow\",\n  \"snowshoe\",\n  \"snowstorm\",\n  \"snowsuit\",\n  \"snowy\",\n  \"snub\",\n  \"snuff\",\n  \"snuggle\",\n  \"snugly\",\n  \"snugness\",\n  \"speak\",\n  \"spearfish\",\n  \"spearhead\",\n  \"spearman\",\n  \"spearmint\",\n  \"species\",\n  \"specimen\",\n  \"specked\",\n  \"speckled\",\n  \"specks\",\n  \"spectacle\",\n  \"spectator\",\n  \"spectrum\",\n  \"speculate\",\n  \"speech\",\n  \"speed\",\n  \"spellbind\",\n  \"speller\",\n  \"spelling\",\n  \"spendable\",\n  \"spender\",\n  \"spending\",\n  \"spent\",\n  \"spew\",\n  \"sphere\",\n  \"spherical\",\n  \"sphinx\",\n  \"spider\",\n  \"spied\",\n  \"spiffy\",\n  \"spill\",\n  \"spilt\",\n  \"spinach\",\n  \"spinal\",\n  \"spindle\",\n  \"spinner\",\n  \"spinning\",\n  \"spinout\",\n  \"spinster\",\n  \"spiny\",\n  \"spiral\",\n  \"spirited\",\n  \"spiritism\",\n  \"spirits\",\n  \"spiritual\",\n  \"splashed\",\n  \"splashing\",\n  \"splashy\",\n  \"splatter\",\n  \"spleen\",\n  \"splendid\",\n  \"splendor\",\n  \"splice\",\n  \"splicing\",\n  \"splinter\",\n  \"splotchy\",\n  \"splurge\",\n  \"spoilage\",\n  \"spoiled\",\n  \"spoiler\",\n  \"spoiling\",\n  \"spoils\",\n  \"spoken\",\n  \"spokesman\",\n  \"sponge\",\n  \"spongy\",\n  \"sponsor\",\n  \"spoof\",\n  \"spookily\",\n  \"spooky\",\n  \"spool\",\n  \"spoon\",\n  \"spore\",\n  \"sporting\",\n  \"sports\",\n  \"sporty\",\n  \"spotless\",\n  \"spotlight\",\n  \"spotted\",\n  \"spotter\",\n  \"spotting\",\n  \"spotty\",\n  \"spousal\",\n  \"spouse\",\n  \"spout\",\n  \"sprain\",\n  \"sprang\",\n  \"sprawl\",\n  \"spray\",\n  \"spree\",\n  \"sprig\",\n  \"spring\",\n  \"sprinkled\",\n  \"sprinkler\",\n  \"sprint\",\n  \"sprite\",\n  \"sprout\",\n  \"spruce\",\n  \"sprung\",\n  \"spry\",\n  \"spud\",\n  \"spur\",\n  \"sputter\",\n  \"spyglass\",\n  \"squabble\",\n  \"squad\",\n  \"squall\",\n  \"squander\",\n  \"squash\",\n  \"squatted\",\n  \"squatter\",\n  \"squatting\",\n  \"squeak\",\n  \"squealer\",\n  \"squealing\",\n  \"squeamish\",\n  \"squeegee\",\n  \"squeeze\",\n  \"squeezing\",\n  \"squid\",\n  \"squiggle\",\n  \"squiggly\",\n  \"squint\",\n  \"squire\",\n  \"squirt\",\n  \"squishier\",\n  \"squishy\",\n  \"stability\",\n  \"stabilize\",\n  \"stable\",\n  \"stack\",\n  \"stadium\",\n  \"staff\",\n  \"stage\",\n  \"staging\",\n  \"stagnant\",\n  \"stagnate\",\n  \"stainable\",\n  \"stained\",\n  \"staining\",\n  \"stainless\",\n  \"stalemate\",\n  \"staleness\",\n  \"stalling\",\n  \"stallion\",\n  \"stamina\",\n  \"stammer\",\n  \"stamp\",\n  \"stand\",\n  \"stank\",\n  \"staple\",\n  \"stapling\",\n  \"starboard\",\n  \"starch\",\n  \"stardom\",\n  \"stardust\",\n  \"starfish\",\n  \"stargazer\",\n  \"staring\",\n  \"stark\",\n  \"starless\",\n  \"starlet\",\n  \"starlight\",\n  \"starlit\",\n  \"starring\",\n  \"starry\",\n  \"starship\",\n  \"starter\",\n  \"starting\",\n  \"startle\",\n  \"startling\",\n  \"startup\",\n  \"starved\",\n  \"starving\",\n  \"stash\",\n  \"state\",\n  \"static\",\n  \"statistic\",\n  \"statue\",\n  \"stature\",\n  \"status\",\n  \"statute\",\n  \"statutory\",\n  \"staunch\",\n  \"stays\",\n  \"steadfast\",\n  \"steadier\",\n  \"steadily\",\n  \"steadying\",\n  \"steam\",\n  \"steed\",\n  \"steep\",\n  \"steerable\",\n  \"steering\",\n  \"steersman\",\n  \"stegosaur\",\n  \"stellar\",\n  \"stem\",\n  \"stench\",\n  \"stencil\",\n  \"step\",\n  \"stereo\",\n  \"sterile\",\n  \"sterility\",\n  \"sterilize\",\n  \"sterling\",\n  \"sternness\",\n  \"sternum\",\n  \"stew\",\n  \"stick\",\n  \"stiffen\",\n  \"stiffly\",\n  \"stiffness\",\n  \"stifle\",\n  \"stifling\",\n  \"stillness\",\n  \"stilt\",\n  \"stimulant\",\n  \"stimulate\",\n  \"stimuli\",\n  \"stimulus\",\n  \"stinger\",\n  \"stingily\",\n  \"stinging\",\n  \"stingray\",\n  \"stingy\",\n  \"stinking\",\n  \"stinky\",\n  \"stipend\",\n  \"stipulate\",\n  \"stir\",\n  \"stitch\",\n  \"stock\",\n  \"stoic\",\n  \"stoke\",\n  \"stole\",\n  \"stomp\",\n  \"stonewall\",\n  \"stoneware\",\n  \"stonework\",\n  \"stoning\",\n  \"stony\",\n  \"stood\",\n  \"stooge\",\n  \"stool\",\n  \"stoop\",\n  \"stoplight\",\n  \"stoppable\",\n  \"stoppage\",\n  \"stopped\",\n  \"stopper\",\n  \"stopping\",\n  \"stopwatch\",\n  \"storable\",\n  \"storage\",\n  \"storeroom\",\n  \"storewide\",\n  \"storm\",\n  \"stout\",\n  \"stove\",\n  \"stowaway\",\n  \"stowing\",\n  \"straddle\",\n  \"straggler\",\n  \"strained\",\n  \"strainer\",\n  \"straining\",\n  \"strangely\",\n  \"stranger\",\n  \"strangle\",\n  \"strategic\",\n  \"strategy\",\n  \"stratus\",\n  \"straw\",\n  \"stray\",\n  \"streak\",\n  \"stream\",\n  \"street\",\n  \"strength\",\n  \"strenuous\",\n  \"strep\",\n  \"stress\",\n  \"stretch\",\n  \"strewn\",\n  \"stricken\",\n  \"strict\",\n  \"stride\",\n  \"strife\",\n  \"strike\",\n  \"striking\",\n  \"strive\",\n  \"striving\",\n  \"strobe\",\n  \"strode\",\n  \"stroller\",\n  \"strongbox\",\n  \"strongly\",\n  \"strongman\",\n  \"struck\",\n  \"structure\",\n  \"strudel\",\n  \"struggle\",\n  \"strum\",\n  \"strung\",\n  \"strut\",\n  \"stubbed\",\n  \"stubble\",\n  \"stubbly\",\n  \"stubborn\",\n  \"stucco\",\n  \"stuck\",\n  \"student\",\n  \"studied\",\n  \"studio\",\n  \"study\",\n  \"stuffed\",\n  \"stuffing\",\n  \"stuffy\",\n  \"stumble\",\n  \"stumbling\",\n  \"stump\",\n  \"stung\",\n  \"stunned\",\n  \"stunner\",\n  \"stunning\",\n  \"stunt\",\n  \"stupor\",\n  \"sturdily\",\n  \"sturdy\",\n  \"styling\",\n  \"stylishly\",\n  \"stylist\",\n  \"stylized\",\n  \"stylus\",\n  \"suave\",\n  \"subarctic\",\n  \"subatomic\",\n  \"subdivide\",\n  \"subdued\",\n  \"subduing\",\n  \"subfloor\",\n  \"subgroup\",\n  \"subheader\",\n  \"subject\",\n  \"sublease\",\n  \"sublet\",\n  \"sublevel\",\n  \"sublime\",\n  \"submarine\",\n  \"submerge\",\n  \"submersed\",\n  \"submitter\",\n  \"subpanel\",\n  \"subpar\",\n  \"subplot\",\n  \"subprime\",\n  \"subscribe\",\n  \"subscript\",\n  \"subsector\",\n  \"subside\",\n  \"subsiding\",\n  \"subsidize\",\n  \"subsidy\",\n  \"subsoil\",\n  \"subsonic\",\n  \"substance\",\n  \"subsystem\",\n  \"subtext\",\n  \"subtitle\",\n  \"subtly\",\n  \"subtotal\",\n  \"subtract\",\n  \"subtype\",\n  \"suburb\",\n  \"subway\",\n  \"subwoofer\",\n  \"subzero\",\n  \"succulent\",\n  \"such\",\n  \"suction\",\n  \"sudden\",\n  \"sudoku\",\n  \"suds\",\n  \"sufferer\",\n  \"suffering\",\n  \"suffice\",\n  \"suffix\",\n  \"suffocate\",\n  \"suffrage\",\n  \"sugar\",\n  \"suggest\",\n  \"suing\",\n  \"suitable\",\n  \"suitably\",\n  \"suitcase\",\n  \"suitor\",\n  \"sulfate\",\n  \"sulfide\",\n  \"sulfite\",\n  \"sulfur\",\n  \"sulk\",\n  \"sullen\",\n  \"sulphate\",\n  \"sulphuric\",\n  \"sultry\",\n  \"superbowl\",\n  \"superglue\",\n  \"superhero\",\n  \"superior\",\n  \"superjet\",\n  \"superman\",\n  \"supermom\",\n  \"supernova\",\n  \"supervise\",\n  \"supper\",\n  \"supplier\",\n  \"supply\",\n  \"support\",\n  \"supremacy\",\n  \"supreme\",\n  \"surcharge\",\n  \"surely\",\n  \"sureness\",\n  \"surface\",\n  \"surfacing\",\n  \"surfboard\",\n  \"surfer\",\n  \"surgery\",\n  \"surgical\",\n  \"surging\",\n  \"surname\",\n  \"surpass\",\n  \"surplus\",\n  \"surprise\",\n  \"surreal\",\n  \"surrender\",\n  \"surrogate\",\n  \"surround\",\n  \"survey\",\n  \"survival\",\n  \"survive\",\n  \"surviving\",\n  \"survivor\",\n  \"sushi\",\n  \"suspect\",\n  \"suspend\",\n  \"suspense\",\n  \"sustained\",\n  \"sustainer\",\n  \"swab\",\n  \"swaddling\",\n  \"swagger\",\n  \"swampland\",\n  \"swan\",\n  \"swapping\",\n  \"swarm\",\n  \"sway\",\n  \"swear\",\n  \"sweat\",\n  \"sweep\",\n  \"swell\",\n  \"swept\",\n  \"swerve\",\n  \"swifter\",\n  \"swiftly\",\n  \"swiftness\",\n  \"swimmable\",\n  \"swimmer\",\n  \"swimming\",\n  \"swimsuit\",\n  \"swimwear\",\n  \"swinger\",\n  \"swinging\",\n  \"swipe\",\n  \"swirl\",\n  \"switch\",\n  \"swivel\",\n  \"swizzle\",\n  \"swooned\",\n  \"swoop\",\n  \"swoosh\",\n  \"swore\",\n  \"sworn\",\n  \"swung\",\n  \"sycamore\",\n  \"sympathy\",\n  \"symphonic\",\n  \"symphony\",\n  \"symptom\",\n  \"synapse\",\n  \"syndrome\",\n  \"synergy\",\n  \"synopses\",\n  \"synopsis\",\n  \"synthesis\",\n  \"synthetic\",\n  \"syrup\",\n  \"system\",\n  \"t-shirt\",\n  \"tabasco\",\n  \"tabby\",\n  \"tableful\",\n  \"tables\",\n  \"tablet\",\n  \"tableware\",\n  \"tabloid\",\n  \"tackiness\",\n  \"tacking\",\n  \"tackle\",\n  \"tackling\",\n  \"tacky\",\n  \"taco\",\n  \"tactful\",\n  \"tactical\",\n  \"tactics\",\n  \"tactile\",\n  \"tactless\",\n  \"tadpole\",\n  \"taekwondo\",\n  \"tag\",\n  \"tainted\",\n  \"take\",\n  \"taking\",\n  \"talcum\",\n  \"talisman\",\n  \"tall\",\n  \"talon\",\n  \"tamale\",\n  \"tameness\",\n  \"tamer\",\n  \"tamper\",\n  \"tank\",\n  \"tanned\",\n  \"tannery\",\n  \"tanning\",\n  \"tantrum\",\n  \"tapeless\",\n  \"tapered\",\n  \"tapering\",\n  \"tapestry\",\n  \"tapioca\",\n  \"tapping\",\n  \"taps\",\n  \"tarantula\",\n  \"target\",\n  \"tarmac\",\n  \"tarnish\",\n  \"tarot\",\n  \"tartar\",\n  \"tartly\",\n  \"tartness\",\n  \"task\",\n  \"tassel\",\n  \"taste\",\n  \"tastiness\",\n  \"tasting\",\n  \"tasty\",\n  \"tattered\",\n  \"tattle\",\n  \"tattling\",\n  \"tattoo\",\n  \"taunt\",\n  \"tavern\",\n  \"thank\",\n  \"that\",\n  \"thaw\",\n  \"theater\",\n  \"theatrics\",\n  \"thee\",\n  \"theft\",\n  \"theme\",\n  \"theology\",\n  \"theorize\",\n  \"thermal\",\n  \"thermos\",\n  \"thesaurus\",\n  \"these\",\n  \"thesis\",\n  \"thespian\",\n  \"thicken\",\n  \"thicket\",\n  \"thickness\",\n  \"thieving\",\n  \"thievish\",\n  \"thigh\",\n  \"thimble\",\n  \"thing\",\n  \"think\",\n  \"thinly\",\n  \"thinner\",\n  \"thinness\",\n  \"thinning\",\n  \"thirstily\",\n  \"thirsting\",\n  \"thirsty\",\n  \"thirteen\",\n  \"thirty\",\n  \"thong\",\n  \"thorn\",\n  \"those\",\n  \"thousand\",\n  \"thrash\",\n  \"thread\",\n  \"threaten\",\n  \"threefold\",\n  \"thrift\",\n  \"thrill\",\n  \"thrive\",\n  \"thriving\",\n  \"throat\",\n  \"throbbing\",\n  \"throng\",\n  \"throttle\",\n  \"throwaway\",\n  \"throwback\",\n  \"thrower\",\n  \"throwing\",\n  \"thud\",\n  \"thumb\",\n  \"thumping\",\n  \"thursday\",\n  \"thus\",\n  \"thwarting\",\n  \"thyself\",\n  \"tiara\",\n  \"tibia\",\n  \"tidal\",\n  \"tidbit\",\n  \"tidiness\",\n  \"tidings\",\n  \"tidy\",\n  \"tiger\",\n  \"tighten\",\n  \"tightly\",\n  \"tightness\",\n  \"tightrope\",\n  \"tightwad\",\n  \"tigress\",\n  \"tile\",\n  \"tiling\",\n  \"till\",\n  \"tilt\",\n  \"timid\",\n  \"timing\",\n  \"timothy\",\n  \"tinderbox\",\n  \"tinfoil\",\n  \"tingle\",\n  \"tingling\",\n  \"tingly\",\n  \"tinker\",\n  \"tinkling\",\n  \"tinsel\",\n  \"tinsmith\",\n  \"tint\",\n  \"tinwork\",\n  \"tiny\",\n  \"tipoff\",\n  \"tipped\",\n  \"tipper\",\n  \"tipping\",\n  \"tiptoeing\",\n  \"tiptop\",\n  \"tiring\",\n  \"tissue\",\n  \"trace\",\n  \"tracing\",\n  \"track\",\n  \"traction\",\n  \"tractor\",\n  \"trade\",\n  \"trading\",\n  \"tradition\",\n  \"traffic\",\n  \"tragedy\",\n  \"trailing\",\n  \"trailside\",\n  \"train\",\n  \"traitor\",\n  \"trance\",\n  \"tranquil\",\n  \"transfer\",\n  \"transform\",\n  \"translate\",\n  \"transpire\",\n  \"transport\",\n  \"transpose\",\n  \"trapdoor\",\n  \"trapeze\",\n  \"trapezoid\",\n  \"trapped\",\n  \"trapper\",\n  \"trapping\",\n  \"traps\",\n  \"trash\",\n  \"travel\",\n  \"traverse\",\n  \"travesty\",\n  \"tray\",\n  \"treachery\",\n  \"treading\",\n  \"treadmill\",\n  \"treason\",\n  \"treat\",\n  \"treble\",\n  \"tree\",\n  \"trekker\",\n  \"tremble\",\n  \"trembling\",\n  \"tremor\",\n  \"trench\",\n  \"trend\",\n  \"trespass\",\n  \"triage\",\n  \"trial\",\n  \"triangle\",\n  \"tribesman\",\n  \"tribunal\",\n  \"tribune\",\n  \"tributary\",\n  \"tribute\",\n  \"triceps\",\n  \"trickery\",\n  \"trickily\",\n  \"tricking\",\n  \"trickle\",\n  \"trickster\",\n  \"tricky\",\n  \"tricolor\",\n  \"tricycle\",\n  \"trident\",\n  \"tried\",\n  \"trifle\",\n  \"trifocals\",\n  \"trillion\",\n  \"trilogy\",\n  \"trimester\",\n  \"trimmer\",\n  \"trimming\",\n  \"trimness\",\n  \"trinity\",\n  \"trio\",\n  \"tripod\",\n  \"tripping\",\n  \"triumph\",\n  \"trivial\",\n  \"trodden\",\n  \"trolling\",\n  \"trombone\",\n  \"trophy\",\n  \"tropical\",\n  \"tropics\",\n  \"trouble\",\n  \"troubling\",\n  \"trough\",\n  \"trousers\",\n  \"trout\",\n  \"trowel\",\n  \"truce\",\n  \"truck\",\n  \"truffle\",\n  \"trump\",\n  \"trunks\",\n  \"trustable\",\n  \"trustee\",\n  \"trustful\",\n  \"trusting\",\n  \"trustless\",\n  \"truth\",\n  \"try\",\n  \"tubby\",\n  \"tubeless\",\n  \"tubular\",\n  \"tucking\",\n  \"tuesday\",\n  \"tug\",\n  \"tuition\",\n  \"tulip\",\n  \"tumble\",\n  \"tumbling\",\n  \"tummy\",\n  \"turban\",\n  \"turbine\",\n  \"turbofan\",\n  \"turbojet\",\n  \"turbulent\",\n  \"turf\",\n  \"turkey\",\n  \"turmoil\",\n  \"turret\",\n  \"turtle\",\n  \"tusk\",\n  \"tutor\",\n  \"tutu\",\n  \"tux\",\n  \"tweak\",\n  \"tweed\",\n  \"tweet\",\n  \"tweezers\",\n  \"twelve\",\n  \"twentieth\",\n  \"twenty\",\n  \"twerp\",\n  \"twice\",\n  \"twiddle\",\n  \"twiddling\",\n  \"twig\",\n  \"twilight\",\n  \"twine\",\n  \"twins\",\n  \"twirl\",\n  \"twistable\",\n  \"twisted\",\n  \"twister\",\n  \"twisting\",\n  \"twisty\",\n  \"twitch\",\n  \"twitter\",\n  \"tycoon\",\n  \"tying\",\n  \"tyke\",\n  \"udder\",\n  \"ultimate\",\n  \"ultimatum\",\n  \"ultra\",\n  \"umbilical\",\n  \"umbrella\",\n  \"umpire\",\n  \"unabashed\",\n  \"unable\",\n  \"unadorned\",\n  \"unadvised\",\n  \"unafraid\",\n  \"unaired\",\n  \"unaligned\",\n  \"unaltered\",\n  \"unarmored\",\n  \"unashamed\",\n  \"unaudited\",\n  \"unawake\",\n  \"unaware\",\n  \"unbaked\",\n  \"unbalance\",\n  \"unbeaten\",\n  \"unbend\",\n  \"unbent\",\n  \"unbiased\",\n  \"unbitten\",\n  \"unblended\",\n  \"unblessed\",\n  \"unblock\",\n  \"unbolted\",\n  \"unbounded\",\n  \"unboxed\",\n  \"unbraided\",\n  \"unbridle\",\n  \"unbroken\",\n  \"unbuckled\",\n  \"unbundle\",\n  \"unburned\",\n  \"unbutton\",\n  \"uncanny\",\n  \"uncapped\",\n  \"uncaring\",\n  \"uncertain\",\n  \"unchain\",\n  \"unchanged\",\n  \"uncharted\",\n  \"uncheck\",\n  \"uncivil\",\n  \"unclad\",\n  \"unclaimed\",\n  \"unclamped\",\n  \"unclasp\",\n  \"uncle\",\n  \"unclip\",\n  \"uncloak\",\n  \"unclog\",\n  \"unclothed\",\n  \"uncoated\",\n  \"uncoiled\",\n  \"uncolored\",\n  \"uncombed\",\n  \"uncommon\",\n  \"uncooked\",\n  \"uncork\",\n  \"uncorrupt\",\n  \"uncounted\",\n  \"uncouple\",\n  \"uncouth\",\n  \"uncover\",\n  \"uncross\",\n  \"uncrown\",\n  \"uncrushed\",\n  \"uncured\",\n  \"uncurious\",\n  \"uncurled\",\n  \"uncut\",\n  \"undamaged\",\n  \"undated\",\n  \"undaunted\",\n  \"undead\",\n  \"undecided\",\n  \"undefined\",\n  \"underage\",\n  \"underarm\",\n  \"undercoat\",\n  \"undercook\",\n  \"undercut\",\n  \"underdog\",\n  \"underdone\",\n  \"underfed\",\n  \"underfeed\",\n  \"underfoot\",\n  \"undergo\",\n  \"undergrad\",\n  \"underhand\",\n  \"underline\",\n  \"underling\",\n  \"undermine\",\n  \"undermost\",\n  \"underpaid\",\n  \"underpass\",\n  \"underpay\",\n  \"underrate\",\n  \"undertake\",\n  \"undertone\",\n  \"undertook\",\n  \"undertow\",\n  \"underuse\",\n  \"underwear\",\n  \"underwent\",\n  \"underwire\",\n  \"undesired\",\n  \"undiluted\",\n  \"undivided\",\n  \"undocked\",\n  \"undoing\",\n  \"undone\",\n  \"undrafted\",\n  \"undress\",\n  \"undrilled\",\n  \"undusted\",\n  \"undying\",\n  \"unearned\",\n  \"unearth\",\n  \"unease\",\n  \"uneasily\",\n  \"uneasy\",\n  \"uneatable\",\n  \"uneaten\",\n  \"unedited\",\n  \"unelected\",\n  \"unending\",\n  \"unengaged\",\n  \"unenvied\",\n  \"unequal\",\n  \"unethical\",\n  \"uneven\",\n  \"unexpired\",\n  \"unexposed\",\n  \"unfailing\",\n  \"unfair\",\n  \"unfasten\",\n  \"unfazed\",\n  \"unfeeling\",\n  \"unfiled\",\n  \"unfilled\",\n  \"unfitted\",\n  \"unfitting\",\n  \"unfixable\",\n  \"unfixed\",\n  \"unflawed\",\n  \"unfocused\",\n  \"unfold\",\n  \"unfounded\",\n  \"unframed\",\n  \"unfreeze\",\n  \"unfrosted\",\n  \"unfrozen\",\n  \"unfunded\",\n  \"unglazed\",\n  \"ungloved\",\n  \"unglue\",\n  \"ungodly\",\n  \"ungraded\",\n  \"ungreased\",\n  \"unguarded\",\n  \"unguided\",\n  \"unhappily\",\n  \"unhappy\",\n  \"unharmed\",\n  \"unhealthy\",\n  \"unheard\",\n  \"unhearing\",\n  \"unheated\",\n  \"unhelpful\",\n  \"unhidden\",\n  \"unhinge\",\n  \"unhitched\",\n  \"unholy\",\n  \"unhook\",\n  \"unicorn\",\n  \"unicycle\",\n  \"unified\",\n  \"unifier\",\n  \"uniformed\",\n  \"uniformly\",\n  \"unify\",\n  \"unimpeded\",\n  \"uninjured\",\n  \"uninstall\",\n  \"uninsured\",\n  \"uninvited\",\n  \"union\",\n  \"uniquely\",\n  \"unisexual\",\n  \"unison\",\n  \"unissued\",\n  \"unit\",\n  \"universal\",\n  \"universe\",\n  \"unjustly\",\n  \"unkempt\",\n  \"unkind\",\n  \"unknotted\",\n  \"unknowing\",\n  \"unknown\",\n  \"unlaced\",\n  \"unlatch\",\n  \"unlawful\",\n  \"unleaded\",\n  \"unlearned\",\n  \"unleash\",\n  \"unless\",\n  \"unleveled\",\n  \"unlighted\",\n  \"unlikable\",\n  \"unlimited\",\n  \"unlined\",\n  \"unlinked\",\n  \"unlisted\",\n  \"unlit\",\n  \"unlivable\",\n  \"unloaded\",\n  \"unloader\",\n  \"unlocked\",\n  \"unlocking\",\n  \"unlovable\",\n  \"unloved\",\n  \"unlovely\",\n  \"unloving\",\n  \"unluckily\",\n  \"unlucky\",\n  \"unmade\",\n  \"unmanaged\",\n  \"unmanned\",\n  \"unmapped\",\n  \"unmarked\",\n  \"unmasked\",\n  \"unmasking\",\n  \"unmatched\",\n  \"unmindful\",\n  \"unmixable\",\n  \"unmixed\",\n  \"unmolded\",\n  \"unmoral\",\n  \"unmovable\",\n  \"unmoved\",\n  \"unmoving\",\n  \"unnamable\",\n  \"unnamed\",\n  \"unnatural\",\n  \"unneeded\",\n  \"unnerve\",\n  \"unnerving\",\n  \"unnoticed\",\n  \"unopened\",\n  \"unopposed\",\n  \"unpack\",\n  \"unpadded\",\n  \"unpaid\",\n  \"unpainted\",\n  \"unpaired\",\n  \"unpaved\",\n  \"unpeeled\",\n  \"unpicked\",\n  \"unpiloted\",\n  \"unpinned\",\n  \"unplanned\",\n  \"unplanted\",\n  \"unpleased\",\n  \"unpledged\",\n  \"unplowed\",\n  \"unplug\",\n  \"unpopular\",\n  \"unproven\",\n  \"unquote\",\n  \"unranked\",\n  \"unrated\",\n  \"unraveled\",\n  \"unreached\",\n  \"unread\",\n  \"unreal\",\n  \"unreeling\",\n  \"unrefined\",\n  \"unrelated\",\n  \"unrented\",\n  \"unrest\",\n  \"unretired\",\n  \"unrevised\",\n  \"unrigged\",\n  \"unripe\",\n  \"unrivaled\",\n  \"unroasted\",\n  \"unrobed\",\n  \"unroll\",\n  \"unruffled\",\n  \"unruly\",\n  \"unrushed\",\n  \"unsaddle\",\n  \"unsafe\",\n  \"unsaid\",\n  \"unsalted\",\n  \"unsaved\",\n  \"unsavory\",\n  \"unscathed\",\n  \"unscented\",\n  \"unscrew\",\n  \"unsealed\",\n  \"unseated\",\n  \"unsecured\",\n  \"unseeing\",\n  \"unseemly\",\n  \"unseen\",\n  \"unselect\",\n  \"unselfish\",\n  \"unsent\",\n  \"unsettled\",\n  \"unshackle\",\n  \"unshaken\",\n  \"unshaved\",\n  \"unshaven\",\n  \"unsheathe\",\n  \"unshipped\",\n  \"unsightly\",\n  \"unsigned\",\n  \"unskilled\",\n  \"unsliced\",\n  \"unsmooth\",\n  \"unsnap\",\n  \"unsocial\",\n  \"unsoiled\",\n  \"unsold\",\n  \"unsolved\",\n  \"unsorted\",\n  \"unspoiled\",\n  \"unspoken\",\n  \"unstable\",\n  \"unstaffed\",\n  \"unstamped\",\n  \"unsteady\",\n  \"unsterile\",\n  \"unstirred\",\n  \"unstitch\",\n  \"unstopped\",\n  \"unstuck\",\n  \"unstuffed\",\n  \"unstylish\",\n  \"unsubtle\",\n  \"unsubtly\",\n  \"unsuited\",\n  \"unsure\",\n  \"unsworn\",\n  \"untagged\",\n  \"untainted\",\n  \"untaken\",\n  \"untamed\",\n  \"untangled\",\n  \"untapped\",\n  \"untaxed\",\n  \"unthawed\",\n  \"unthread\",\n  \"untidy\",\n  \"untie\",\n  \"until\",\n  \"untimed\",\n  \"untimely\",\n  \"untitled\",\n  \"untoasted\",\n  \"untold\",\n  \"untouched\",\n  \"untracked\",\n  \"untrained\",\n  \"untreated\",\n  \"untried\",\n  \"untrimmed\",\n  \"untrue\",\n  \"untruth\",\n  \"unturned\",\n  \"untwist\",\n  \"untying\",\n  \"unusable\",\n  \"unused\",\n  \"unusual\",\n  \"unvalued\",\n  \"unvaried\",\n  \"unvarying\",\n  \"unveiled\",\n  \"unveiling\",\n  \"unvented\",\n  \"unviable\",\n  \"unvisited\",\n  \"unvocal\",\n  \"unwanted\",\n  \"unwarlike\",\n  \"unwary\",\n  \"unwashed\",\n  \"unwatched\",\n  \"unweave\",\n  \"unwed\",\n  \"unwelcome\",\n  \"unwell\",\n  \"unwieldy\",\n  \"unwilling\",\n  \"unwind\",\n  \"unwired\",\n  \"unwitting\",\n  \"unwomanly\",\n  \"unworldly\",\n  \"unworn\",\n  \"unworried\",\n  \"unworthy\",\n  \"unwound\",\n  \"unwoven\",\n  \"unwrapped\",\n  \"unwritten\",\n  \"unzip\",\n  \"upbeat\",\n  \"upchuck\",\n  \"upcoming\",\n  \"upcountry\",\n  \"update\",\n  \"upfront\",\n  \"upgrade\",\n  \"upheaval\",\n  \"upheld\",\n  \"uphill\",\n  \"uphold\",\n  \"uplifted\",\n  \"uplifting\",\n  \"upload\",\n  \"upon\",\n  \"upper\",\n  \"upright\",\n  \"uprising\",\n  \"upriver\",\n  \"uproar\",\n  \"uproot\",\n  \"upscale\",\n  \"upside\",\n  \"upstage\",\n  \"upstairs\",\n  \"upstart\",\n  \"upstate\",\n  \"upstream\",\n  \"upstroke\",\n  \"upswing\",\n  \"uptake\",\n  \"uptight\",\n  \"uptown\",\n  \"upturned\",\n  \"upward\",\n  \"upwind\",\n  \"uranium\",\n  \"urban\",\n  \"urchin\",\n  \"urethane\",\n  \"urgency\",\n  \"urgent\",\n  \"urging\",\n  \"urologist\",\n  \"urology\",\n  \"usable\",\n  \"usage\",\n  \"useable\",\n  \"used\",\n  \"uselessly\",\n  \"user\",\n  \"usher\",\n  \"usual\",\n  \"utensil\",\n  \"utility\",\n  \"utilize\",\n  \"utmost\",\n  \"utopia\",\n  \"utter\",\n  \"vacancy\",\n  \"vacant\",\n  \"vacate\",\n  \"vacation\",\n  \"vagabond\",\n  \"vagrancy\",\n  \"vagrantly\",\n  \"vaguely\",\n  \"vagueness\",\n  \"valiant\",\n  \"valid\",\n  \"valium\",\n  \"valley\",\n  \"valuables\",\n  \"value\",\n  \"vanilla\",\n  \"vanish\",\n  \"vanity\",\n  \"vanquish\",\n  \"vantage\",\n  \"vaporizer\",\n  \"variable\",\n  \"variably\",\n  \"varied\",\n  \"variety\",\n  \"various\",\n  \"varmint\",\n  \"varnish\",\n  \"varsity\",\n  \"varying\",\n  \"vascular\",\n  \"vaseline\",\n  \"vastly\",\n  \"vastness\",\n  \"veal\",\n  \"vegan\",\n  \"veggie\",\n  \"vehicular\",\n  \"velcro\",\n  \"velocity\",\n  \"velvet\",\n  \"vendetta\",\n  \"vending\",\n  \"vendor\",\n  \"veneering\",\n  \"vengeful\",\n  \"venomous\",\n  \"ventricle\",\n  \"venture\",\n  \"venue\",\n  \"venus\",\n  \"verbalize\",\n  \"verbally\",\n  \"verbose\",\n  \"verdict\",\n  \"verify\",\n  \"verse\",\n  \"version\",\n  \"versus\",\n  \"vertebrae\",\n  \"vertical\",\n  \"vertigo\",\n  \"very\",\n  \"vessel\",\n  \"vest\",\n  \"veteran\",\n  \"veto\",\n  \"vexingly\",\n  \"viability\",\n  \"viable\",\n  \"vibes\",\n  \"vice\",\n  \"vicinity\",\n  \"victory\",\n  \"video\",\n  \"viewable\",\n  \"viewer\",\n  \"viewing\",\n  \"viewless\",\n  \"viewpoint\",\n  \"vigorous\",\n  \"village\",\n  \"villain\",\n  \"vindicate\",\n  \"vineyard\",\n  \"vintage\",\n  \"violate\",\n  \"violation\",\n  \"violator\",\n  \"violet\",\n  \"violin\",\n  \"viper\",\n  \"viral\",\n  \"virtual\",\n  \"virtuous\",\n  \"virus\",\n  \"visa\",\n  \"viscosity\",\n  \"viscous\",\n  \"viselike\",\n  \"visible\",\n  \"visibly\",\n  \"vision\",\n  \"visiting\",\n  \"visitor\",\n  \"visor\",\n  \"vista\",\n  \"vitality\",\n  \"vitalize\",\n  \"vitally\",\n  \"vitamins\",\n  \"vivacious\",\n  \"vividly\",\n  \"vividness\",\n  \"vixen\",\n  \"vocalist\",\n  \"vocalize\",\n  \"vocally\",\n  \"vocation\",\n  \"voice\",\n  \"voicing\",\n  \"void\",\n  \"volatile\",\n  \"volley\",\n  \"voltage\",\n  \"volumes\",\n  \"voter\",\n  \"voting\",\n  \"voucher\",\n  \"vowed\",\n  \"vowel\",\n  \"voyage\",\n  \"wackiness\",\n  \"wad\",\n  \"wafer\",\n  \"waffle\",\n  \"waged\",\n  \"wager\",\n  \"wages\",\n  \"waggle\",\n  \"wagon\",\n  \"wake\",\n  \"waking\",\n  \"walk\",\n  \"walmart\",\n  \"walnut\",\n  \"walrus\",\n  \"waltz\",\n  \"wand\",\n  \"wannabe\",\n  \"wanted\",\n  \"wanting\",\n  \"wasabi\",\n  \"washable\",\n  \"washbasin\",\n  \"washboard\",\n  \"washbowl\",\n  \"washcloth\",\n  \"washday\",\n  \"washed\",\n  \"washer\",\n  \"washhouse\",\n  \"washing\",\n  \"washout\",\n  \"washroom\",\n  \"washstand\",\n  \"washtub\",\n  \"wasp\",\n  \"wasting\",\n  \"watch\",\n  \"water\",\n  \"waviness\",\n  \"waving\",\n  \"wavy\",\n  \"whacking\",\n  \"whacky\",\n  \"wham\",\n  \"wharf\",\n  \"wheat\",\n  \"whenever\",\n  \"whiff\",\n  \"whimsical\",\n  \"whinny\",\n  \"whiny\",\n  \"whisking\",\n  \"whoever\",\n  \"whole\",\n  \"whomever\",\n  \"whoopee\",\n  \"whooping\",\n  \"whoops\",\n  \"why\",\n  \"wick\",\n  \"widely\",\n  \"widen\",\n  \"widget\",\n  \"widow\",\n  \"width\",\n  \"wieldable\",\n  \"wielder\",\n  \"wife\",\n  \"wifi\",\n  \"wikipedia\",\n  \"wildcard\",\n  \"wildcat\",\n  \"wilder\",\n  \"wildfire\",\n  \"wildfowl\",\n  \"wildland\",\n  \"wildlife\",\n  \"wildly\",\n  \"wildness\",\n  \"willed\",\n  \"willfully\",\n  \"willing\",\n  \"willow\",\n  \"willpower\",\n  \"wilt\",\n  \"wimp\",\n  \"wince\",\n  \"wincing\",\n  \"wind\",\n  \"wing\",\n  \"winking\",\n  \"winner\",\n  \"winnings\",\n  \"winter\",\n  \"wipe\",\n  \"wired\",\n  \"wireless\",\n  \"wiring\",\n  \"wiry\",\n  \"wisdom\",\n  \"wise\",\n  \"wish\",\n  \"wisplike\",\n  \"wispy\",\n  \"wistful\",\n  \"wizard\",\n  \"wobble\",\n  \"wobbling\",\n  \"wobbly\",\n  \"wok\",\n  \"wolf\",\n  \"wolverine\",\n  \"womanhood\",\n  \"womankind\",\n  \"womanless\",\n  \"womanlike\",\n  \"womanly\",\n  \"womb\",\n  \"woof\",\n  \"wooing\",\n  \"wool\",\n  \"woozy\",\n  \"word\",\n  \"work\",\n  \"worried\",\n  \"worrier\",\n  \"worrisome\",\n  \"worry\",\n  \"worsening\",\n  \"worshiper\",\n  \"worst\",\n  \"wound\",\n  \"woven\",\n  \"wow\",\n  \"wrangle\",\n  \"wrath\",\n  \"wreath\",\n  \"wreckage\",\n  \"wrecker\",\n  \"wrecking\",\n  \"wrench\",\n  \"wriggle\",\n  \"wriggly\",\n  \"wrinkle\",\n  \"wrinkly\",\n  \"wrist\",\n  \"writing\",\n  \"written\",\n  \"wrongdoer\",\n  \"wronged\",\n  \"wrongful\",\n  \"wrongly\",\n  \"wrongness\",\n  \"wrought\",\n  \"xbox\",\n  \"xerox\",\n  \"yahoo\",\n  \"yam\",\n  \"yanking\",\n  \"yapping\",\n  \"yard\",\n  \"yarn\",\n  \"yeah\",\n  \"yearbook\",\n  \"yearling\",\n  \"yearly\",\n  \"yearning\",\n  \"yeast\",\n  \"yelling\",\n  \"yelp\",\n  \"yen\",\n  \"yesterday\",\n  \"yiddish\",\n  \"yield\",\n  \"yin\",\n  \"yippee\",\n  \"yo-yo\",\n  \"yodel\",\n  \"yoga\",\n  \"yogurt\",\n  \"yonder\",\n  \"yoyo\",\n  \"yummy\",\n  \"zap\",\n  \"zealous\",\n  \"zebra\",\n  \"zen\",\n  \"zeppelin\",\n  \"zero\",\n  \"zestfully\",\n  \"zesty\",\n  \"zigzagged\",\n  \"zipfile\",\n  \"zipping\",\n  \"zippy\",\n  \"zips\",\n  \"zit\",\n  \"zodiac\",\n  \"zombie\",\n  \"zone\",\n  \"zoning\",\n  \"zookeeper\",\n  \"zoologist\",\n  \"zoology\",\n  \"zoom\",\n];\n","import { CryptoService } from \"../../abstractions/crypto.service\";\nimport { EncryptedOrganizationKeyData } from \"../data/encrypted-organization-key.data\";\n\nimport { EncString } from \"./enc-string\";\nimport { SymmetricCryptoKey } from \"./symmetric-crypto-key\";\n\nexport abstract class BaseEncryptedOrganizationKey {\n  decrypt: (cryptoService: CryptoService) => Promise<SymmetricCryptoKey>;\n\n  static fromData(data: EncryptedOrganizationKeyData) {\n    switch (data.type) {\n      case \"organization\":\n        return new EncryptedOrganizationKey(data.key);\n\n      case \"provider\":\n        return new ProviderEncryptedOrganizationKey(data.key, data.providerId);\n\n      default:\n        return null;\n    }\n  }\n}\n\nexport class EncryptedOrganizationKey implements BaseEncryptedOrganizationKey {\n  constructor(private key: string) {}\n\n  async decrypt(cryptoService: CryptoService) {\n    const decValue = await cryptoService.rsaDecrypt(this.key);\n    return new SymmetricCryptoKey(decValue);\n  }\n\n  toData(): EncryptedOrganizationKeyData {\n    return {\n      type: \"organization\",\n      key: this.key,\n    };\n  }\n}\n\nexport class ProviderEncryptedOrganizationKey implements BaseEncryptedOrganizationKey {\n  constructor(private key: string, private providerId: string) {}\n\n  async decrypt(cryptoService: CryptoService) {\n    const providerKey = await cryptoService.getProviderKey(this.providerId);\n    const decValue = await cryptoService.decryptToBytes(new EncString(this.key), providerKey);\n    return new SymmetricCryptoKey(decValue);\n  }\n\n  toData(): EncryptedOrganizationKeyData {\n    return {\n      type: \"provider\",\n      key: this.key,\n      providerId: this.providerId,\n    };\n  }\n}\n","import * as bigInt from \"big-integer\";\n\nimport { CryptoService as CryptoServiceAbstraction } from \"../abstractions/crypto.service\";\nimport { CryptoFunctionService } from \"../abstractions/cryptoFunction.service\";\nimport { EncryptService } from \"../abstractions/encrypt.service\";\nimport { LogService } from \"../abstractions/log.service\";\nimport { PlatformUtilsService } from \"../abstractions/platformUtils.service\";\nimport { StateService } from \"../abstractions/state.service\";\nimport { EncryptionType } from \"../enums/encryptionType\";\nimport { HashPurpose } from \"../enums/hashPurpose\";\nimport {\n  DEFAULT_ARGON2_ITERATIONS,\n  DEFAULT_ARGON2_MEMORY,\n  DEFAULT_ARGON2_PARALLELISM,\n  KdfType,\n} from \"../enums/kdfType\";\nimport { KeySuffixOptions } from \"../enums/keySuffixOptions\";\nimport { sequentialize } from \"../misc/sequentialize\";\nimport { Utils } from \"../misc/utils\";\nimport { EFFLongWordList } from \"../misc/wordlist\";\nimport { EncryptedOrganizationKeyData } from \"../models/data/encrypted-organization-key.data\";\nimport { EncArrayBuffer } from \"../models/domain/enc-array-buffer\";\nimport { EncString } from \"../models/domain/enc-string\";\nimport { BaseEncryptedOrganizationKey } from \"../models/domain/encrypted-organization-key\";\nimport { KdfConfig } from \"../models/domain/kdf-config\";\nimport { SymmetricCryptoKey } from \"../models/domain/symmetric-crypto-key\";\nimport { ProfileOrganizationResponse } from \"../models/response/profile-organization.response\";\nimport { ProfileProviderOrganizationResponse } from \"../models/response/profile-provider-organization.response\";\nimport { ProfileProviderResponse } from \"../models/response/profile-provider.response\";\n\nexport class CryptoService implements CryptoServiceAbstraction {\n  constructor(\n    private cryptoFunctionService: CryptoFunctionService,\n    private encryptService: EncryptService,\n    protected platformUtilService: PlatformUtilsService,\n    protected logService: LogService,\n    protected stateService: StateService\n  ) {}\n\n  async setKey(key: SymmetricCryptoKey, userId?: string): Promise<any> {\n    await this.stateService.setCryptoMasterKey(key, { userId: userId });\n    await this.storeKey(key, userId);\n  }\n\n  async setKeyHash(keyHash: string): Promise<void> {\n    await this.stateService.setKeyHash(keyHash);\n  }\n\n  async setEncKey(encKey: string): Promise<void> {\n    if (encKey == null) {\n      return;\n    }\n\n    await this.stateService.setDecryptedCryptoSymmetricKey(null);\n    await this.stateService.setEncryptedCryptoSymmetricKey(encKey);\n  }\n\n  async setEncPrivateKey(encPrivateKey: string): Promise<void> {\n    if (encPrivateKey == null) {\n      return;\n    }\n\n    await this.stateService.setDecryptedPrivateKey(null);\n    await this.stateService.setEncryptedPrivateKey(encPrivateKey);\n  }\n\n  async setOrgKeys(\n    orgs: ProfileOrganizationResponse[] = [],\n    providerOrgs: ProfileProviderOrganizationResponse[] = []\n  ): Promise<void> {\n    const encOrgKeyData: { [orgId: string]: EncryptedOrganizationKeyData } = {};\n\n    orgs.forEach((org) => {\n      encOrgKeyData[org.id] = {\n        type: \"organization\",\n        key: org.key,\n      };\n    });\n\n    providerOrgs.forEach((org) => {\n      encOrgKeyData[org.id] = {\n        type: \"provider\",\n        providerId: org.providerId,\n        key: org.key,\n      };\n    });\n\n    await this.stateService.setDecryptedOrganizationKeys(null);\n    return await this.stateService.setEncryptedOrganizationKeys(encOrgKeyData);\n  }\n\n  async setProviderKeys(providers: ProfileProviderResponse[]): Promise<void> {\n    const providerKeys: any = {};\n    providers.forEach((provider) => {\n      providerKeys[provider.id] = provider.key;\n    });\n\n    await this.stateService.setDecryptedProviderKeys(null);\n    return await this.stateService.setEncryptedProviderKeys(providerKeys);\n  }\n\n  async getKey(keySuffix?: KeySuffixOptions, userId?: string): Promise<SymmetricCryptoKey> {\n    const inMemoryKey = await this.stateService.getCryptoMasterKey({ userId: userId });\n\n    if (inMemoryKey != null) {\n      return inMemoryKey;\n    }\n\n    keySuffix ||= KeySuffixOptions.Auto;\n    const symmetricKey = await this.getKeyFromStorage(keySuffix, userId);\n\n    if (symmetricKey != null) {\n      // TODO: Refactor here so get key doesn't also set key\n      this.setKey(symmetricKey, userId);\n    }\n\n    return symmetricKey;\n  }\n\n  async getKeyFromStorage(\n    keySuffix: KeySuffixOptions,\n    userId?: string\n  ): Promise<SymmetricCryptoKey> {\n    const key = await this.retrieveKeyFromStorage(keySuffix, userId);\n    if (key != null) {\n      const symmetricKey = new SymmetricCryptoKey(Utils.fromB64ToArray(key).buffer);\n\n      if (!(await this.validateKey(symmetricKey))) {\n        this.logService.warning(\"Wrong key, throwing away stored key\");\n        await this.clearSecretKeyStore(userId);\n        return null;\n      }\n\n      return symmetricKey;\n    }\n    return null;\n  }\n\n  async getKeyHash(): Promise<string> {\n    return await this.stateService.getKeyHash();\n  }\n\n  async compareAndUpdateKeyHash(masterPassword: string, key: SymmetricCryptoKey): Promise<boolean> {\n    const storedKeyHash = await this.getKeyHash();\n    if (masterPassword != null && storedKeyHash != null) {\n      const localKeyHash = await this.hashPassword(\n        masterPassword,\n        key,\n        HashPurpose.LocalAuthorization\n      );\n      if (localKeyHash != null && storedKeyHash === localKeyHash) {\n        return true;\n      }\n\n      // TODO: remove serverKeyHash check in 1-2 releases after everyone's keyHash has been updated\n      const serverKeyHash = await this.hashPassword(\n        masterPassword,\n        key,\n        HashPurpose.ServerAuthorization\n      );\n      if (serverKeyHash != null && storedKeyHash === serverKeyHash) {\n        await this.setKeyHash(localKeyHash);\n        return true;\n      }\n    }\n\n    return false;\n  }\n\n  @sequentialize(() => \"getEncKey\")\n  getEncKey(key: SymmetricCryptoKey = null): Promise<SymmetricCryptoKey> {\n    return this.getEncKeyHelper(key);\n  }\n\n  async getPublicKey(): Promise<ArrayBuffer> {\n    const inMemoryPublicKey = await this.stateService.getPublicKey();\n    if (inMemoryPublicKey != null) {\n      return inMemoryPublicKey;\n    }\n\n    const privateKey = await this.getPrivateKey();\n    if (privateKey == null) {\n      return null;\n    }\n\n    const publicKey = await this.cryptoFunctionService.rsaExtractPublicKey(privateKey);\n    await this.stateService.setPublicKey(publicKey);\n    return publicKey;\n  }\n\n  async getPrivateKey(): Promise<ArrayBuffer> {\n    const decryptedPrivateKey = await this.stateService.getDecryptedPrivateKey();\n    if (decryptedPrivateKey != null) {\n      return decryptedPrivateKey;\n    }\n\n    const encPrivateKey = await this.stateService.getEncryptedPrivateKey();\n    if (encPrivateKey == null) {\n      return null;\n    }\n\n    const privateKey = await this.decryptToBytes(new EncString(encPrivateKey), null);\n    await this.stateService.setDecryptedPrivateKey(privateKey);\n    return privateKey;\n  }\n\n  async getFingerprint(userId: string, publicKey?: ArrayBuffer): Promise<string[]> {\n    if (publicKey == null) {\n      publicKey = await this.getPublicKey();\n    }\n    if (publicKey === null) {\n      throw new Error(\"No public key available.\");\n    }\n    const keyFingerprint = await this.cryptoFunctionService.hash(publicKey, \"sha256\");\n    const userFingerprint = await this.cryptoFunctionService.hkdfExpand(\n      keyFingerprint,\n      userId,\n      32,\n      \"sha256\"\n    );\n    return this.hashPhrase(userFingerprint);\n  }\n\n  @sequentialize(() => \"getOrgKeys\")\n  async getOrgKeys(): Promise<Map<string, SymmetricCryptoKey>> {\n    const result: Map<string, SymmetricCryptoKey> = new Map<string, SymmetricCryptoKey>();\n    const decryptedOrganizationKeys = await this.stateService.getDecryptedOrganizationKeys();\n    if (decryptedOrganizationKeys != null && decryptedOrganizationKeys.size > 0) {\n      return decryptedOrganizationKeys;\n    }\n\n    const encOrgKeyData = await this.stateService.getEncryptedOrganizationKeys();\n    if (encOrgKeyData == null) {\n      return null;\n    }\n\n    let setKey = false;\n\n    for (const orgId of Object.keys(encOrgKeyData)) {\n      if (result.has(orgId)) {\n        continue;\n      }\n\n      const encOrgKey = BaseEncryptedOrganizationKey.fromData(encOrgKeyData[orgId]);\n      const decOrgKey = await encOrgKey.decrypt(this);\n      result.set(orgId, decOrgKey);\n\n      setKey = true;\n    }\n\n    if (setKey) {\n      await this.stateService.setDecryptedOrganizationKeys(result);\n    }\n\n    return result;\n  }\n\n  async getOrgKey(orgId: string): Promise<SymmetricCryptoKey> {\n    if (orgId == null) {\n      return null;\n    }\n\n    const orgKeys = await this.getOrgKeys();\n    if (orgKeys == null || !orgKeys.has(orgId)) {\n      return null;\n    }\n\n    return orgKeys.get(orgId);\n  }\n\n  @sequentialize(() => \"getProviderKeys\")\n  async getProviderKeys(): Promise<Map<string, SymmetricCryptoKey>> {\n    const providerKeys: Map<string, SymmetricCryptoKey> = new Map<string, SymmetricCryptoKey>();\n    const decryptedProviderKeys = await this.stateService.getDecryptedProviderKeys();\n    if (decryptedProviderKeys != null && decryptedProviderKeys.size > 0) {\n      return decryptedProviderKeys;\n    }\n\n    const encProviderKeys = await this.stateService.getEncryptedProviderKeys();\n    if (encProviderKeys == null) {\n      return null;\n    }\n\n    let setKey = false;\n\n    for (const orgId in encProviderKeys) {\n      // eslint-disable-next-line\n      if (!encProviderKeys.hasOwnProperty(orgId)) {\n        continue;\n      }\n\n      const decValue = await this.rsaDecrypt(encProviderKeys[orgId]);\n      providerKeys.set(orgId, new SymmetricCryptoKey(decValue));\n      setKey = true;\n    }\n\n    if (setKey) {\n      await this.stateService.setDecryptedProviderKeys(providerKeys);\n    }\n\n    return providerKeys;\n  }\n\n  async getProviderKey(providerId: string): Promise<SymmetricCryptoKey> {\n    if (providerId == null) {\n      return null;\n    }\n\n    const providerKeys = await this.getProviderKeys();\n    if (providerKeys == null || !providerKeys.has(providerId)) {\n      return null;\n    }\n\n    return providerKeys.get(providerId);\n  }\n\n  async hasKey(): Promise<boolean> {\n    return (\n      (await this.hasKeyInMemory()) ||\n      (await this.hasKeyStored(KeySuffixOptions.Auto)) ||\n      (await this.hasKeyStored(KeySuffixOptions.Biometric))\n    );\n  }\n\n  async hasKeyInMemory(userId?: string): Promise<boolean> {\n    return (await this.stateService.getCryptoMasterKey({ userId: userId })) != null;\n  }\n\n  async hasKeyStored(keySuffix: KeySuffixOptions, userId?: string): Promise<boolean> {\n    switch (keySuffix) {\n      case KeySuffixOptions.Auto:\n        return (await this.stateService.getCryptoMasterKeyAuto({ userId: userId })) != null;\n      case KeySuffixOptions.Biometric:\n        return (await this.stateService.hasCryptoMasterKeyBiometric({ userId: userId })) === true;\n      default:\n        return false;\n    }\n  }\n\n  async hasEncKey(): Promise<boolean> {\n    return (await this.stateService.getEncryptedCryptoSymmetricKey()) != null;\n  }\n\n  async clearKey(clearSecretStorage = true, userId?: string): Promise<any> {\n    await this.stateService.setCryptoMasterKey(null, { userId: userId });\n    if (clearSecretStorage) {\n      await this.clearSecretKeyStore(userId);\n    }\n  }\n\n  async clearStoredKey(keySuffix: KeySuffixOptions) {\n    keySuffix === KeySuffixOptions.Auto\n      ? await this.stateService.setCryptoMasterKeyAuto(null)\n      : await this.stateService.setCryptoMasterKeyBiometric(null);\n  }\n\n  async clearKeyHash(userId?: string): Promise<any> {\n    return await this.stateService.setKeyHash(null, { userId: userId });\n  }\n\n  async clearEncKey(memoryOnly?: boolean, userId?: string): Promise<void> {\n    await this.stateService.setDecryptedCryptoSymmetricKey(null, { userId: userId });\n    if (!memoryOnly) {\n      await this.stateService.setEncryptedCryptoSymmetricKey(null, { userId: userId });\n    }\n  }\n\n  async clearKeyPair(memoryOnly?: boolean, userId?: string): Promise<any> {\n    const keysToClear: Promise<void>[] = [\n      this.stateService.setDecryptedPrivateKey(null, { userId: userId }),\n      this.stateService.setPublicKey(null, { userId: userId }),\n    ];\n    if (!memoryOnly) {\n      keysToClear.push(this.stateService.setEncryptedPrivateKey(null, { userId: userId }));\n    }\n    return Promise.all(keysToClear);\n  }\n\n  async clearOrgKeys(memoryOnly?: boolean, userId?: string): Promise<void> {\n    await this.stateService.setDecryptedOrganizationKeys(null, { userId: userId });\n    if (!memoryOnly) {\n      await this.stateService.setEncryptedOrganizationKeys(null, { userId: userId });\n    }\n  }\n\n  async clearProviderKeys(memoryOnly?: boolean, userId?: string): Promise<void> {\n    await this.stateService.setDecryptedProviderKeys(null, { userId: userId });\n    if (!memoryOnly) {\n      await this.stateService.setEncryptedProviderKeys(null, { userId: userId });\n    }\n  }\n\n  async clearPinProtectedKey(userId?: string): Promise<any> {\n    return await this.stateService.setEncryptedPinProtected(null, { userId: userId });\n  }\n\n  async clearKeys(userId?: string): Promise<any> {\n    await this.clearKey(true, userId);\n    await this.clearKeyHash(userId);\n    await this.clearOrgKeys(false, userId);\n    await this.clearProviderKeys(false, userId);\n    await this.clearEncKey(false, userId);\n    await this.clearKeyPair(false, userId);\n    await this.clearPinProtectedKey(userId);\n  }\n\n  async toggleKey(): Promise<any> {\n    const key = await this.getKey();\n\n    await this.setKey(key);\n  }\n\n  async makeKey(\n    password: string,\n    salt: string,\n    kdf: KdfType,\n    kdfConfig: KdfConfig\n  ): Promise<SymmetricCryptoKey> {\n    let key: ArrayBuffer = null;\n    if (kdf == null || kdf === KdfType.PBKDF2_SHA256) {\n      if (kdfConfig.iterations == null) {\n        kdfConfig.iterations = 5000;\n      } else if (kdfConfig.iterations < 5000) {\n        throw new Error(\"PBKDF2 iteration minimum is 5000.\");\n      }\n      key = await this.cryptoFunctionService.pbkdf2(password, salt, \"sha256\", kdfConfig.iterations);\n    } else if (kdf == KdfType.Argon2id) {\n      if (kdfConfig.iterations == null) {\n        kdfConfig.iterations = DEFAULT_ARGON2_ITERATIONS;\n      } else if (kdfConfig.iterations < 2) {\n        throw new Error(\"Argon2 iteration minimum is 2.\");\n      }\n\n      if (kdfConfig.memory == null) {\n        kdfConfig.memory = DEFAULT_ARGON2_MEMORY;\n      } else if (kdfConfig.memory < 16) {\n        throw new Error(\"Argon2 memory minimum is 16 MB\");\n      } else if (kdfConfig.memory > 1024) {\n        throw new Error(\"Argon2 memory maximum is 1024 MB\");\n      }\n\n      if (kdfConfig.parallelism == null) {\n        kdfConfig.parallelism = DEFAULT_ARGON2_PARALLELISM;\n      } else if (kdfConfig.parallelism < 1) {\n        throw new Error(\"Argon2 parallelism minimum is 1.\");\n      }\n\n      const saltHash = await this.cryptoFunctionService.hash(salt, \"sha256\");\n      key = await this.cryptoFunctionService.argon2(\n        password,\n        saltHash,\n        kdfConfig.iterations,\n        kdfConfig.memory * 1024, // convert to KiB from MiB\n        kdfConfig.parallelism\n      );\n    } else {\n      throw new Error(\"Unknown Kdf.\");\n    }\n    return new SymmetricCryptoKey(key);\n  }\n\n  async makeKeyFromPin(\n    pin: string,\n    salt: string,\n    kdf: KdfType,\n    kdfConfig: KdfConfig,\n    protectedKeyCs: EncString = null\n  ): Promise<SymmetricCryptoKey> {\n    if (protectedKeyCs == null) {\n      const pinProtectedKey = await this.stateService.getEncryptedPinProtected();\n      if (pinProtectedKey == null) {\n        throw new Error(\"No PIN protected key found.\");\n      }\n      protectedKeyCs = new EncString(pinProtectedKey);\n    }\n    const pinKey = await this.makePinKey(pin, salt, kdf, kdfConfig);\n    const decKey = await this.decryptToBytes(protectedKeyCs, pinKey);\n    return new SymmetricCryptoKey(decKey);\n  }\n\n  async makeShareKey(): Promise<[EncString, SymmetricCryptoKey]> {\n    const shareKey = await this.cryptoFunctionService.randomBytes(64);\n    const publicKey = await this.getPublicKey();\n    const encShareKey = await this.rsaEncrypt(shareKey, publicKey);\n    return [encShareKey, new SymmetricCryptoKey(shareKey)];\n  }\n\n  async makeKeyPair(key?: SymmetricCryptoKey): Promise<[string, EncString]> {\n    const keyPair = await this.cryptoFunctionService.rsaGenerateKeyPair(2048);\n    const publicB64 = Utils.fromBufferToB64(keyPair[0]);\n    const privateEnc = await this.encrypt(keyPair[1], key);\n    return [publicB64, privateEnc];\n  }\n\n  async makePinKey(\n    pin: string,\n    salt: string,\n    kdf: KdfType,\n    kdfConfig: KdfConfig\n  ): Promise<SymmetricCryptoKey> {\n    const pinKey = await this.makeKey(pin, salt, kdf, kdfConfig);\n    return await this.stretchKey(pinKey);\n  }\n\n  async makeSendKey(keyMaterial: ArrayBuffer): Promise<SymmetricCryptoKey> {\n    const sendKey = await this.cryptoFunctionService.hkdf(\n      keyMaterial,\n      \"bitwarden-send\",\n      \"send\",\n      64,\n      \"sha256\"\n    );\n    return new SymmetricCryptoKey(sendKey);\n  }\n\n  async hashPassword(\n    password: string,\n    key: SymmetricCryptoKey,\n    hashPurpose?: HashPurpose\n  ): Promise<string> {\n    if (key == null) {\n      key = await this.getKey();\n    }\n    if (password == null || key == null) {\n      throw new Error(\"Invalid parameters.\");\n    }\n\n    const iterations = hashPurpose === HashPurpose.LocalAuthorization ? 2 : 1;\n    const hash = await this.cryptoFunctionService.pbkdf2(key.key, password, \"sha256\", iterations);\n    return Utils.fromBufferToB64(hash);\n  }\n\n  async makeEncKey(key: SymmetricCryptoKey): Promise<[SymmetricCryptoKey, EncString]> {\n    const theKey = await this.getKeyForUserEncryption(key);\n    const encKey = await this.cryptoFunctionService.randomBytes(64);\n    return this.buildEncKey(theKey, encKey);\n  }\n\n  async remakeEncKey(\n    key: SymmetricCryptoKey,\n    encKey?: SymmetricCryptoKey\n  ): Promise<[SymmetricCryptoKey, EncString]> {\n    if (encKey == null) {\n      encKey = await this.getEncKey();\n    }\n    return this.buildEncKey(key, encKey.key);\n  }\n\n  /**\n   * @deprecated July 25 2022: Get the key you need from CryptoService (getKeyForUserEncryption or getOrgKey)\n   * and then call encryptService.encrypt\n   */\n  async encrypt(plainValue: string | ArrayBuffer, key?: SymmetricCryptoKey): Promise<EncString> {\n    key = await this.getKeyForUserEncryption(key);\n    return await this.encryptService.encrypt(plainValue, key);\n  }\n\n  /**\n   * @deprecated July 25 2022: Get the key you need from CryptoService (getKeyForUserEncryption or getOrgKey)\n   * and then call encryptService.encryptToBytes\n   */\n  async encryptToBytes(plainValue: ArrayBuffer, key?: SymmetricCryptoKey): Promise<EncArrayBuffer> {\n    key = await this.getKeyForUserEncryption(key);\n    return this.encryptService.encryptToBytes(plainValue, key);\n  }\n\n  async rsaEncrypt(data: ArrayBuffer, publicKey?: ArrayBuffer): Promise<EncString> {\n    if (publicKey == null) {\n      publicKey = await this.getPublicKey();\n    }\n    if (publicKey == null) {\n      throw new Error(\"Public key unavailable.\");\n    }\n\n    const encBytes = await this.cryptoFunctionService.rsaEncrypt(data, publicKey, \"sha1\");\n    return new EncString(EncryptionType.Rsa2048_OaepSha1_B64, Utils.fromBufferToB64(encBytes));\n  }\n\n  async rsaDecrypt(encValue: string, privateKeyValue?: ArrayBuffer): Promise<ArrayBuffer> {\n    const headerPieces = encValue.split(\".\");\n    let encType: EncryptionType = null;\n    let encPieces: string[];\n\n    if (headerPieces.length === 1) {\n      encType = EncryptionType.Rsa2048_OaepSha256_B64;\n      encPieces = [headerPieces[0]];\n    } else if (headerPieces.length === 2) {\n      try {\n        encType = parseInt(headerPieces[0], null);\n        encPieces = headerPieces[1].split(\"|\");\n      } catch (e) {\n        this.logService.error(e);\n      }\n    }\n\n    switch (encType) {\n      case EncryptionType.Rsa2048_OaepSha256_B64:\n      case EncryptionType.Rsa2048_OaepSha1_B64:\n      case EncryptionType.Rsa2048_OaepSha256_HmacSha256_B64: // HmacSha256 types are deprecated\n      case EncryptionType.Rsa2048_OaepSha1_HmacSha256_B64:\n        break;\n      default:\n        throw new Error(\"encType unavailable.\");\n    }\n\n    if (encPieces == null || encPieces.length <= 0) {\n      throw new Error(\"encPieces unavailable.\");\n    }\n\n    const data = Utils.fromB64ToArray(encPieces[0]).buffer;\n    const privateKey = privateKeyValue ?? (await this.getPrivateKey());\n    if (privateKey == null) {\n      throw new Error(\"No private key.\");\n    }\n\n    let alg: \"sha1\" | \"sha256\" = \"sha1\";\n    switch (encType) {\n      case EncryptionType.Rsa2048_OaepSha256_B64:\n      case EncryptionType.Rsa2048_OaepSha256_HmacSha256_B64:\n        alg = \"sha256\";\n        break;\n      case EncryptionType.Rsa2048_OaepSha1_B64:\n      case EncryptionType.Rsa2048_OaepSha1_HmacSha256_B64:\n        break;\n      default:\n        throw new Error(\"encType unavailable.\");\n    }\n\n    return this.cryptoFunctionService.rsaDecrypt(data, privateKey, alg);\n  }\n\n  /**\n   * @deprecated July 25 2022: Get the key you need from CryptoService (getKeyForUserEncryption or getOrgKey)\n   * and then call encryptService.decryptToBytes\n   */\n  async decryptToBytes(encString: EncString, key?: SymmetricCryptoKey): Promise<ArrayBuffer> {\n    const keyForEnc = await this.getKeyForUserEncryption(key);\n    return this.encryptService.decryptToBytes(encString, keyForEnc);\n  }\n\n  /**\n   * @deprecated July 25 2022: Get the key you need from CryptoService (getKeyForUserEncryption or getOrgKey)\n   * and then call encryptService.decryptToUtf8\n   */\n  async decryptToUtf8(encString: EncString, key?: SymmetricCryptoKey): Promise<string> {\n    key = await this.getKeyForUserEncryption(key);\n    return await this.encryptService.decryptToUtf8(encString, key);\n  }\n\n  /**\n   * @deprecated July 25 2022: Get the key you need from CryptoService (getKeyForUserEncryption or getOrgKey)\n   * and then call encryptService.decryptToBytes\n   */\n  async decryptFromBytes(encBuffer: EncArrayBuffer, key: SymmetricCryptoKey): Promise<ArrayBuffer> {\n    if (encBuffer == null) {\n      throw new Error(\"No buffer provided for decryption.\");\n    }\n\n    key = await this.getKeyForUserEncryption(key);\n\n    return this.encryptService.decryptToBytes(encBuffer, key);\n  }\n\n  // EFForg/OpenWireless\n  // ref https://github.com/EFForg/OpenWireless/blob/master/app/js/diceware.js\n  async randomNumber(min: number, max: number): Promise<number> {\n    let rval = 0;\n    const range = max - min + 1;\n    const bitsNeeded = Math.ceil(Math.log2(range));\n    if (bitsNeeded > 53) {\n      throw new Error(\"We cannot generate numbers larger than 53 bits.\");\n    }\n\n    const bytesNeeded = Math.ceil(bitsNeeded / 8);\n    const mask = Math.pow(2, bitsNeeded) - 1;\n    // 7776 -> (2^13 = 8192) -1 == 8191 or 0x00001111 11111111\n\n    // Fill a byte array with N random numbers\n    const byteArray = new Uint8Array(await this.cryptoFunctionService.randomBytes(bytesNeeded));\n\n    let p = (bytesNeeded - 1) * 8;\n    for (let i = 0; i < bytesNeeded; i++) {\n      rval += byteArray[i] * Math.pow(2, p);\n      p -= 8;\n    }\n\n    // Use & to apply the mask and reduce the number of recursive lookups\n    rval = rval & mask;\n\n    if (rval >= range) {\n      // Integer out of acceptable range\n      return this.randomNumber(min, max);\n    }\n\n    // Return an integer that falls within the range\n    return min + rval;\n  }\n\n  async validateKey(key: SymmetricCryptoKey) {\n    try {\n      const encPrivateKey = await this.stateService.getEncryptedPrivateKey();\n      const encKey = await this.getEncKeyHelper(key);\n      if (encPrivateKey == null || encKey == null) {\n        return false;\n      }\n\n      const privateKey = await this.decryptToBytes(new EncString(encPrivateKey), encKey);\n      await this.cryptoFunctionService.rsaExtractPublicKey(privateKey);\n    } catch (e) {\n      return false;\n    }\n\n    return true;\n  }\n\n  // ---HELPERS---\n\n  protected async storeKey(key: SymmetricCryptoKey, userId?: string) {\n    if (await this.shouldStoreKey(KeySuffixOptions.Auto, userId)) {\n      await this.stateService.setCryptoMasterKeyAuto(key.keyB64, { userId: userId });\n    } else if (await this.shouldStoreKey(KeySuffixOptions.Biometric, userId)) {\n      await this.stateService.setCryptoMasterKeyBiometric(key.keyB64, { userId: userId });\n    } else {\n      await this.stateService.setCryptoMasterKeyAuto(null, { userId: userId });\n      await this.stateService.setCryptoMasterKeyBiometric(null, { userId: userId });\n    }\n  }\n\n  protected async shouldStoreKey(keySuffix: KeySuffixOptions, userId?: string) {\n    let shouldStoreKey = false;\n    if (keySuffix === KeySuffixOptions.Auto) {\n      const vaultTimeout = await this.stateService.getVaultTimeout({ userId: userId });\n      shouldStoreKey = vaultTimeout == null;\n    } else if (keySuffix === KeySuffixOptions.Biometric) {\n      const biometricUnlock = await this.stateService.getBiometricUnlock({ userId: userId });\n      shouldStoreKey = biometricUnlock && this.platformUtilService.supportsSecureStorage();\n    }\n    return shouldStoreKey;\n  }\n\n  protected async retrieveKeyFromStorage(keySuffix: KeySuffixOptions, userId?: string) {\n    return keySuffix === KeySuffixOptions.Auto\n      ? await this.stateService.getCryptoMasterKeyAuto({ userId: userId })\n      : await this.stateService.getCryptoMasterKeyBiometric({ userId: userId });\n  }\n\n  async getKeyForUserEncryption(key?: SymmetricCryptoKey): Promise<SymmetricCryptoKey> {\n    if (key != null) {\n      return key;\n    }\n\n    const encKey = await this.getEncKey();\n    if (encKey != null) {\n      return encKey;\n    }\n\n    // Legacy support: encryption used to be done with the user key (derived from master password).\n    // Users who have not migrated will have a null encKey and must use the user key instead.\n    return await this.getKey();\n  }\n\n  private async stretchKey(key: SymmetricCryptoKey): Promise<SymmetricCryptoKey> {\n    const newKey = new Uint8Array(64);\n    const encKey = await this.cryptoFunctionService.hkdfExpand(key.key, \"enc\", 32, \"sha256\");\n    const macKey = await this.cryptoFunctionService.hkdfExpand(key.key, \"mac\", 32, \"sha256\");\n    newKey.set(new Uint8Array(encKey));\n    newKey.set(new Uint8Array(macKey), 32);\n    return new SymmetricCryptoKey(newKey.buffer);\n  }\n\n  private async hashPhrase(hash: ArrayBuffer, minimumEntropy = 64) {\n    const entropyPerWord = Math.log(EFFLongWordList.length) / Math.log(2);\n    let numWords = Math.ceil(minimumEntropy / entropyPerWord);\n\n    const hashArr = Array.from(new Uint8Array(hash));\n    const entropyAvailable = hashArr.length * 4;\n    if (numWords * entropyPerWord > entropyAvailable) {\n      throw new Error(\"Output entropy of hash function is too small\");\n    }\n\n    const phrase: string[] = [];\n    let hashNumber = bigInt.fromArray(hashArr, 256);\n    while (numWords--) {\n      const remainder = hashNumber.mod(EFFLongWordList.length);\n      hashNumber = hashNumber.divide(EFFLongWordList.length);\n      phrase.push(EFFLongWordList[remainder as any]);\n    }\n    return phrase;\n  }\n\n  private async buildEncKey(\n    key: SymmetricCryptoKey,\n    encKey: ArrayBuffer\n  ): Promise<[SymmetricCryptoKey, EncString]> {\n    let encKeyEnc: EncString = null;\n    if (key.key.byteLength === 32) {\n      const newKey = await this.stretchKey(key);\n      encKeyEnc = await this.encrypt(encKey, newKey);\n    } else if (key.key.byteLength === 64) {\n      encKeyEnc = await this.encrypt(encKey, key);\n    } else {\n      throw new Error(\"Invalid key size.\");\n    }\n    return [new SymmetricCryptoKey(encKey), encKeyEnc];\n  }\n\n  private async clearSecretKeyStore(userId?: string): Promise<void> {\n    await this.stateService.setCryptoMasterKeyAuto(null, { userId: userId });\n    await this.stateService.setCryptoMasterKeyBiometric(null, { userId: userId });\n  }\n\n  private async getEncKeyHelper(key: SymmetricCryptoKey = null): Promise<SymmetricCryptoKey> {\n    const inMemoryKey = await this.stateService.getDecryptedCryptoSymmetricKey();\n    if (inMemoryKey != null) {\n      return inMemoryKey;\n    }\n\n    const encKey = await this.stateService.getEncryptedCryptoSymmetricKey();\n    if (encKey == null) {\n      return null;\n    }\n\n    if (key == null) {\n      key = await this.getKey();\n    }\n    if (key == null) {\n      return null;\n    }\n\n    let decEncKey: ArrayBuffer;\n    const encKeyCipher = new EncString(encKey);\n    if (encKeyCipher.encryptionType === EncryptionType.AesCbc256_B64) {\n      decEncKey = await this.decryptToBytes(encKeyCipher, key);\n    } else if (encKeyCipher.encryptionType === EncryptionType.AesCbc256_HmacSha256_B64) {\n      const newKey = await this.stretchKey(key);\n      decEncKey = await this.decryptToBytes(encKeyCipher, newKey);\n    } else {\n      throw new Error(\"Unsupported encKey type.\");\n    }\n    if (decEncKey == null) {\n      return null;\n    }\n    const symmetricCryptoKey = new SymmetricCryptoKey(decEncKey);\n    await this.stateService.setDecryptedCryptoSymmetricKey(symmetricCryptoKey);\n    return symmetricCryptoKey;\n  }\n}\n","import { SymmetricCryptoKey } from \"./symmetric-crypto-key\";\n\nexport class EncryptedObject {\n  iv: ArrayBuffer;\n  data: ArrayBuffer;\n  mac: ArrayBuffer;\n  key: SymmetricCryptoKey;\n}\n","import { CryptoFunctionService } from \"../../abstractions/cryptoFunction.service\";\nimport { EncryptService } from \"../../abstractions/encrypt.service\";\nimport { LogService } from \"../../abstractions/log.service\";\nimport { EncryptionType } from \"../../enums/encryptionType\";\nimport { IEncrypted } from \"../../interfaces/IEncrypted\";\nimport { Decryptable } from \"../../interfaces/decryptable.interface\";\nimport { InitializerMetadata } from \"../../interfaces/initializer-metadata.interface\";\nimport { Utils } from \"../../misc/utils\";\nimport { EncArrayBuffer } from \"../../models/domain/enc-array-buffer\";\nimport { EncString } from \"../../models/domain/enc-string\";\nimport { EncryptedObject } from \"../../models/domain/encrypted-object\";\nimport { SymmetricCryptoKey } from \"../../models/domain/symmetric-crypto-key\";\n\nexport class EncryptServiceImplementation implements EncryptService {\n  constructor(\n    protected cryptoFunctionService: CryptoFunctionService,\n    protected logService: LogService,\n    protected logMacFailures: boolean\n  ) {}\n\n  async encrypt(plainValue: string | ArrayBuffer, key: SymmetricCryptoKey): Promise<EncString> {\n    if (key == null) {\n      throw new Error(\"No encryption key provided.\");\n    }\n\n    if (plainValue == null) {\n      return Promise.resolve(null);\n    }\n\n    let plainBuf: ArrayBuffer;\n    if (typeof plainValue === \"string\") {\n      plainBuf = Utils.fromUtf8ToArray(plainValue).buffer;\n    } else {\n      plainBuf = plainValue;\n    }\n\n    const encObj = await this.aesEncrypt(plainBuf, key);\n    const iv = Utils.fromBufferToB64(encObj.iv);\n    const data = Utils.fromBufferToB64(encObj.data);\n    const mac = encObj.mac != null ? Utils.fromBufferToB64(encObj.mac) : null;\n    return new EncString(encObj.key.encType, data, iv, mac);\n  }\n\n  async encryptToBytes(plainValue: ArrayBuffer, key: SymmetricCryptoKey): Promise<EncArrayBuffer> {\n    if (key == null) {\n      throw new Error(\"No encryption key provided.\");\n    }\n\n    const encValue = await this.aesEncrypt(plainValue, key);\n    let macLen = 0;\n    if (encValue.mac != null) {\n      macLen = encValue.mac.byteLength;\n    }\n\n    const encBytes = new Uint8Array(1 + encValue.iv.byteLength + macLen + encValue.data.byteLength);\n    encBytes.set([encValue.key.encType]);\n    encBytes.set(new Uint8Array(encValue.iv), 1);\n    if (encValue.mac != null) {\n      encBytes.set(new Uint8Array(encValue.mac), 1 + encValue.iv.byteLength);\n    }\n\n    encBytes.set(new Uint8Array(encValue.data), 1 + encValue.iv.byteLength + macLen);\n    return new EncArrayBuffer(encBytes.buffer);\n  }\n\n  async decryptToUtf8(encString: EncString, key: SymmetricCryptoKey): Promise<string> {\n    if (key == null) {\n      throw new Error(\"No key provided for decryption.\");\n    }\n\n    key = this.resolveLegacyKey(key, encString);\n\n    if (key.macKey != null && encString?.mac == null) {\n      this.logService.error(\"mac required.\");\n      return null;\n    }\n\n    if (key.encType !== encString.encryptionType) {\n      this.logService.error(\"encType unavailable.\");\n      return null;\n    }\n\n    const fastParams = this.cryptoFunctionService.aesDecryptFastParameters(\n      encString.data,\n      encString.iv,\n      encString.mac,\n      key\n    );\n    if (fastParams.macKey != null && fastParams.mac != null) {\n      const computedMac = await this.cryptoFunctionService.hmacFast(\n        fastParams.macData,\n        fastParams.macKey,\n        \"sha256\"\n      );\n      const macsEqual = await this.cryptoFunctionService.compareFast(fastParams.mac, computedMac);\n      if (!macsEqual) {\n        this.logMacFailed(\"mac failed.\");\n        return null;\n      }\n    }\n\n    return await this.cryptoFunctionService.aesDecryptFast(fastParams);\n  }\n\n  async decryptToBytes(encThing: IEncrypted, key: SymmetricCryptoKey): Promise<ArrayBuffer> {\n    if (key == null) {\n      throw new Error(\"No encryption key provided.\");\n    }\n\n    if (encThing == null) {\n      throw new Error(\"Nothing provided for decryption.\");\n    }\n\n    key = this.resolveLegacyKey(key, encThing);\n\n    if (key.macKey != null && encThing.macBytes == null) {\n      return null;\n    }\n\n    if (key.encType !== encThing.encryptionType) {\n      return null;\n    }\n\n    if (key.macKey != null && encThing.macBytes != null) {\n      const macData = new Uint8Array(encThing.ivBytes.byteLength + encThing.dataBytes.byteLength);\n      macData.set(new Uint8Array(encThing.ivBytes), 0);\n      macData.set(new Uint8Array(encThing.dataBytes), encThing.ivBytes.byteLength);\n      const computedMac = await this.cryptoFunctionService.hmac(\n        macData.buffer,\n        key.macKey,\n        \"sha256\"\n      );\n      if (computedMac === null) {\n        return null;\n      }\n\n      const macsMatch = await this.cryptoFunctionService.compare(encThing.macBytes, computedMac);\n      if (!macsMatch) {\n        this.logMacFailed(\"mac failed.\");\n        return null;\n      }\n    }\n\n    const result = await this.cryptoFunctionService.aesDecrypt(\n      encThing.dataBytes,\n      encThing.ivBytes,\n      key.encKey\n    );\n\n    return result ?? null;\n  }\n\n  async decryptItems<T extends InitializerMetadata>(\n    items: Decryptable<T>[],\n    key: SymmetricCryptoKey\n  ): Promise<T[]> {\n    if (items == null || items.length < 1) {\n      return [];\n    }\n\n    return await Promise.all(items.map((item) => item.decrypt(key)));\n  }\n\n  private async aesEncrypt(data: ArrayBuffer, key: SymmetricCryptoKey): Promise<EncryptedObject> {\n    const obj = new EncryptedObject();\n    obj.key = key;\n    obj.iv = await this.cryptoFunctionService.randomBytes(16);\n    obj.data = await this.cryptoFunctionService.aesEncrypt(data, obj.iv, obj.key.encKey);\n\n    if (obj.key.macKey != null) {\n      const macData = new Uint8Array(obj.iv.byteLength + obj.data.byteLength);\n      macData.set(new Uint8Array(obj.iv), 0);\n      macData.set(new Uint8Array(obj.data), obj.iv.byteLength);\n      obj.mac = await this.cryptoFunctionService.hmac(macData.buffer, obj.key.macKey, \"sha256\");\n    }\n\n    return obj;\n  }\n\n  private logMacFailed(msg: string) {\n    if (this.logMacFailures) {\n      this.logService.error(msg);\n    }\n  }\n\n  /**\n   * Transform into new key for the old encrypt-then-mac scheme if required, otherwise return the current key unchanged\n   * @param encThing The encrypted object (e.g. encString or encArrayBuffer) that you want to decrypt\n   */\n  resolveLegacyKey(key: SymmetricCryptoKey, encThing: IEncrypted): SymmetricCryptoKey {\n    if (\n      encThing.encryptionType === EncryptionType.AesCbc128_HmacSha256_B64 &&\n      key.encType === EncryptionType.AesCbc256_B64\n    ) {\n      return new SymmetricCryptoKey(key.key, EncryptionType.AesCbc128_HmacSha256_B64);\n    }\n\n    return key;\n  }\n}\n","import { AttachmentResponse } from \"../response/attachment.response\";\n\nexport class AttachmentData {\n  id: string;\n  url: string;\n  fileName: string;\n  key: string;\n  size: string;\n  sizeName: string;\n\n  constructor(response?: AttachmentResponse) {\n    if (response == null) {\n      return;\n    }\n    this.id = response.id;\n    this.url = response.url;\n    this.fileName = response.fileName;\n    this.key = response.key;\n    this.size = response.size;\n    this.sizeName = response.sizeName;\n  }\n}\n","import { CardApi } from \"../../../models/api/card.api\";\n\nexport class CardData {\n  cardholderName: string;\n  brand: string;\n  number: string;\n  expMonth: string;\n  expYear: string;\n  code: string;\n\n  constructor(data?: CardApi) {\n    if (data == null) {\n      return;\n    }\n\n    this.cardholderName = data.cardholderName;\n    this.brand = data.brand;\n    this.number = data.number;\n    this.expMonth = data.expMonth;\n    this.expYear = data.expYear;\n    this.code = data.code;\n  }\n}\n","import { FieldType } from \"../../../enums/fieldType\";\nimport { LinkedIdType } from \"../../../enums/linkedIdType\";\nimport { FieldApi } from \"../../../models/api/field.api\";\n\nexport class FieldData {\n  type: FieldType;\n  name: string;\n  value: string;\n  linkedId: LinkedIdType;\n\n  constructor(response?: FieldApi) {\n    if (response == null) {\n      return;\n    }\n    this.type = response.type;\n    this.name = response.name;\n    this.value = response.value;\n    this.linkedId = response.linkedId;\n  }\n}\n","import { IdentityApi } from \"../../../models/api/identity.api\";\n\nexport class IdentityData {\n  title: string;\n  firstName: string;\n  middleName: string;\n  lastName: string;\n  address1: string;\n  address2: string;\n  address3: string;\n  city: string;\n  state: string;\n  postalCode: string;\n  country: string;\n  company: string;\n  email: string;\n  phone: string;\n  ssn: string;\n  username: string;\n  passportNumber: string;\n  licenseNumber: string;\n\n  constructor(data?: IdentityApi) {\n    if (data == null) {\n      return;\n    }\n\n    this.title = data.title;\n    this.firstName = data.firstName;\n    this.middleName = data.middleName;\n    this.lastName = data.lastName;\n    this.address1 = data.address1;\n    this.address2 = data.address2;\n    this.address3 = data.address3;\n    this.city = data.city;\n    this.state = data.state;\n    this.postalCode = data.postalCode;\n    this.country = data.country;\n    this.company = data.company;\n    this.email = data.email;\n    this.phone = data.phone;\n    this.ssn = data.ssn;\n    this.username = data.username;\n    this.passportNumber = data.passportNumber;\n    this.licenseNumber = data.licenseNumber;\n  }\n}\n","import { UriMatchType } from \"../../../enums/uriMatchType\";\nimport { LoginUriApi } from \"../../../models/api/login-uri.api\";\n\nexport class LoginUriData {\n  uri: string;\n  match: UriMatchType = null;\n\n  constructor(data?: LoginUriApi) {\n    if (data == null) {\n      return;\n    }\n    this.uri = data.uri;\n    this.match = data.match;\n  }\n}\n","import { LoginApi } from \"../../../models/api/login.api\";\n\nimport { LoginUriData } from \"./login-uri.data\";\n\nexport class LoginData {\n  uris: LoginUriData[];\n  username: string;\n  password: string;\n  passwordRevisionDate: string;\n  totp: string;\n  autofillOnPageLoad: boolean;\n\n  constructor(data?: LoginApi) {\n    if (data == null) {\n      return;\n    }\n\n    this.username = data.username;\n    this.password = data.password;\n    this.passwordRevisionDate = data.passwordRevisionDate;\n    this.totp = data.totp;\n    this.autofillOnPageLoad = data.autofillOnPageLoad;\n\n    if (data.uris) {\n      this.uris = data.uris.map((u) => new LoginUriData(u));\n    }\n  }\n}\n","import { PasswordHistoryResponse } from \"../response/password-history.response\";\n\nexport class PasswordHistoryData {\n  password: string;\n  lastUsedDate: string;\n\n  constructor(response?: PasswordHistoryResponse) {\n    if (response == null) {\n      return;\n    }\n\n    this.password = response.password;\n    this.lastUsedDate = response.lastUsedDate;\n  }\n}\n","import { SecureNoteType } from \"../../../enums/secureNoteType\";\nimport { SecureNoteApi } from \"../../../models/api/secure-note.api\";\n\nexport class SecureNoteData {\n  type: SecureNoteType;\n\n  constructor(data?: SecureNoteApi) {\n    if (data == null) {\n      return;\n    }\n\n    this.type = data.type;\n  }\n}\n","import { CipherRepromptType } from \"../../enums/cipher-reprompt-type\";\nimport { CipherType } from \"../../enums/cipher-type\";\nimport { CipherResponse } from \"../response/cipher.response\";\n\nimport { AttachmentData } from \"./attachment.data\";\nimport { CardData } from \"./card.data\";\nimport { FieldData } from \"./field.data\";\nimport { IdentityData } from \"./identity.data\";\nimport { LoginData } from \"./login.data\";\nimport { PasswordHistoryData } from \"./password-history.data\";\nimport { SecureNoteData } from \"./secure-note.data\";\n\nexport class CipherData {\n  id: string;\n  organizationId: string;\n  folderId: string;\n  edit: boolean;\n  viewPassword: boolean;\n  organizationUseTotp: boolean;\n  favorite: boolean;\n  revisionDate: string;\n  type: CipherType;\n  name: string;\n  notes: string;\n  login?: LoginData;\n  secureNote?: SecureNoteData;\n  card?: CardData;\n  identity?: IdentityData;\n  fields?: FieldData[];\n  attachments?: AttachmentData[];\n  passwordHistory?: PasswordHistoryData[];\n  collectionIds?: string[];\n  creationDate: string;\n  deletedDate: string;\n  reprompt: CipherRepromptType;\n\n  constructor(response?: CipherResponse, collectionIds?: string[]) {\n    if (response == null) {\n      return;\n    }\n\n    this.id = response.id;\n    this.organizationId = response.organizationId;\n    this.folderId = response.folderId;\n    this.edit = response.edit;\n    this.viewPassword = response.viewPassword;\n    this.organizationUseTotp = response.organizationUseTotp;\n    this.favorite = response.favorite;\n    this.revisionDate = response.revisionDate;\n    this.type = response.type;\n    this.name = response.name;\n    this.notes = response.notes;\n    this.collectionIds = collectionIds != null ? collectionIds : response.collectionIds;\n    this.creationDate = response.creationDate;\n    this.deletedDate = response.deletedDate;\n    this.reprompt = response.reprompt;\n\n    switch (this.type) {\n      case CipherType.Login:\n        this.login = new LoginData(response.login);\n        break;\n      case CipherType.SecureNote:\n        this.secureNote = new SecureNoteData(response.secureNote);\n        break;\n      case CipherType.Card:\n        this.card = new CardData(response.card);\n        break;\n      case CipherType.Identity:\n        this.identity = new IdentityData(response.identity);\n        break;\n      default:\n        break;\n    }\n\n    if (response.fields != null) {\n      this.fields = response.fields.map((f) => new FieldData(f));\n    }\n    if (response.attachments != null) {\n      this.attachments = response.attachments.map((a) => new AttachmentData(a));\n    }\n    if (response.passwordHistory != null) {\n      this.passwordHistory = response.passwordHistory.map((ph) => new PasswordHistoryData(ph));\n    }\n  }\n}\n","import { Jsonify } from \"type-fest\";\n\nimport { Utils } from \"../../../misc/utils\";\nimport Domain from \"../../../models/domain/domain-base\";\nimport { EncString } from \"../../../models/domain/enc-string\";\nimport { SymmetricCryptoKey } from \"../../../models/domain/symmetric-crypto-key\";\nimport { AttachmentData } from \"../data/attachment.data\";\nimport { AttachmentView } from \"../view/attachment.view\";\n\nexport class Attachment extends Domain {\n  id: string;\n  url: string;\n  size: string;\n  sizeName: string; // Readable size, ex: \"4.2 KB\" or \"1.43 GB\"\n  key: EncString;\n  fileName: EncString;\n\n  constructor(obj?: AttachmentData) {\n    super();\n    if (obj == null) {\n      return;\n    }\n\n    this.size = obj.size;\n    this.buildDomainModel(\n      this,\n      obj,\n      {\n        id: null,\n        url: null,\n        sizeName: null,\n        fileName: null,\n        key: null,\n      },\n      [\"id\", \"url\", \"sizeName\"]\n    );\n  }\n\n  async decrypt(orgId: string, encKey?: SymmetricCryptoKey): Promise<AttachmentView> {\n    const view = await this.decryptObj(\n      new AttachmentView(this),\n      {\n        fileName: null,\n      },\n      orgId,\n      encKey\n    );\n\n    if (this.key != null) {\n      view.key = await this.decryptAttachmentKey(orgId, encKey);\n    }\n\n    return view;\n  }\n\n  private async decryptAttachmentKey(orgId: string, encKey?: SymmetricCryptoKey) {\n    try {\n      if (encKey == null) {\n        encKey = await this.getKeyForDecryption(orgId);\n      }\n\n      const encryptService = Utils.getContainerService().getEncryptService();\n      const decValue = await encryptService.decryptToBytes(this.key, encKey);\n      return new SymmetricCryptoKey(decValue);\n    } catch (e) {\n      // TODO: error?\n    }\n  }\n\n  private async getKeyForDecryption(orgId: string) {\n    const cryptoService = Utils.getContainerService().getCryptoService();\n    return orgId != null\n      ? await cryptoService.getOrgKey(orgId)\n      : await cryptoService.getKeyForUserEncryption();\n  }\n\n  toAttachmentData(): AttachmentData {\n    const a = new AttachmentData();\n    a.size = this.size;\n    this.buildDataModel(\n      this,\n      a,\n      {\n        id: null,\n        url: null,\n        sizeName: null,\n        fileName: null,\n        key: null,\n      },\n      [\"id\", \"url\", \"sizeName\"]\n    );\n    return a;\n  }\n\n  static fromJSON(obj: Partial<Jsonify<Attachment>>): Attachment {\n    if (obj == null) {\n      return null;\n    }\n\n    const key = EncString.fromJSON(obj.key);\n    const fileName = EncString.fromJSON(obj.fileName);\n\n    return Object.assign(new Attachment(), obj, {\n      key,\n      fileName,\n    });\n  }\n}\n","import { Jsonify } from \"type-fest\";\n\nimport Domain from \"../../../models/domain/domain-base\";\nimport { EncString } from \"../../../models/domain/enc-string\";\nimport { SymmetricCryptoKey } from \"../../../models/domain/symmetric-crypto-key\";\nimport { CardData } from \"../data/card.data\";\nimport { CardView } from \"../view/card.view\";\n\nexport class Card extends Domain {\n  cardholderName: EncString;\n  brand: EncString;\n  number: EncString;\n  expMonth: EncString;\n  expYear: EncString;\n  code: EncString;\n\n  constructor(obj?: CardData) {\n    super();\n    if (obj == null) {\n      return;\n    }\n\n    this.buildDomainModel(\n      this,\n      obj,\n      {\n        cardholderName: null,\n        brand: null,\n        number: null,\n        expMonth: null,\n        expYear: null,\n        code: null,\n      },\n      []\n    );\n  }\n\n  decrypt(orgId: string, encKey?: SymmetricCryptoKey): Promise<CardView> {\n    return this.decryptObj(\n      new CardView(),\n      {\n        cardholderName: null,\n        brand: null,\n        number: null,\n        expMonth: null,\n        expYear: null,\n        code: null,\n      },\n      orgId,\n      encKey\n    );\n  }\n\n  toCardData(): CardData {\n    const c = new CardData();\n    this.buildDataModel(this, c, {\n      cardholderName: null,\n      brand: null,\n      number: null,\n      expMonth: null,\n      expYear: null,\n      code: null,\n    });\n    return c;\n  }\n\n  static fromJSON(obj: Partial<Jsonify<Card>>): Card {\n    if (obj == null) {\n      return null;\n    }\n\n    const cardholderName = EncString.fromJSON(obj.cardholderName);\n    const brand = EncString.fromJSON(obj.brand);\n    const number = EncString.fromJSON(obj.number);\n    const expMonth = EncString.fromJSON(obj.expMonth);\n    const expYear = EncString.fromJSON(obj.expYear);\n    const code = EncString.fromJSON(obj.code);\n    return Object.assign(new Card(), obj, {\n      cardholderName,\n      brand,\n      number,\n      expMonth,\n      expYear,\n      code,\n    });\n  }\n}\n","import { Jsonify } from \"type-fest\";\n\nimport { FieldType } from \"../../../enums/fieldType\";\nimport { LinkedIdType } from \"../../../enums/linkedIdType\";\nimport Domain from \"../../../models/domain/domain-base\";\nimport { EncString } from \"../../../models/domain/enc-string\";\nimport { SymmetricCryptoKey } from \"../../../models/domain/symmetric-crypto-key\";\nimport { FieldData } from \"../data/field.data\";\nimport { FieldView } from \"../view/field.view\";\n\nexport class Field extends Domain {\n  name: EncString;\n  value: EncString;\n  type: FieldType;\n  linkedId: LinkedIdType;\n\n  constructor(obj?: FieldData) {\n    super();\n    if (obj == null) {\n      return;\n    }\n\n    this.type = obj.type;\n    this.linkedId = obj.linkedId;\n    this.buildDomainModel(\n      this,\n      obj,\n      {\n        name: null,\n        value: null,\n      },\n      []\n    );\n  }\n\n  decrypt(orgId: string, encKey?: SymmetricCryptoKey): Promise<FieldView> {\n    return this.decryptObj(\n      new FieldView(this),\n      {\n        name: null,\n        value: null,\n      },\n      orgId,\n      encKey\n    );\n  }\n\n  toFieldData(): FieldData {\n    const f = new FieldData();\n    this.buildDataModel(\n      this,\n      f,\n      {\n        name: null,\n        value: null,\n        type: null,\n        linkedId: null,\n      },\n      [\"type\", \"linkedId\"]\n    );\n    return f;\n  }\n\n  static fromJSON(obj: Partial<Jsonify<Field>>): Field {\n    if (obj == null) {\n      return null;\n    }\n\n    const name = EncString.fromJSON(obj.name);\n    const value = EncString.fromJSON(obj.value);\n\n    return Object.assign(new Field(), obj, {\n      name,\n      value,\n    });\n  }\n}\n","import { Jsonify } from \"type-fest\";\n\nimport Domain from \"../../../models/domain/domain-base\";\nimport { EncString } from \"../../../models/domain/enc-string\";\nimport { SymmetricCryptoKey } from \"../../../models/domain/symmetric-crypto-key\";\nimport { IdentityData } from \"../data/identity.data\";\nimport { IdentityView } from \"../view/identity.view\";\n\nexport class Identity extends Domain {\n  title: EncString;\n  firstName: EncString;\n  middleName: EncString;\n  lastName: EncString;\n  address1: EncString;\n  address2: EncString;\n  address3: EncString;\n  city: EncString;\n  state: EncString;\n  postalCode: EncString;\n  country: EncString;\n  company: EncString;\n  email: EncString;\n  phone: EncString;\n  ssn: EncString;\n  username: EncString;\n  passportNumber: EncString;\n  licenseNumber: EncString;\n\n  constructor(obj?: IdentityData) {\n    super();\n    if (obj == null) {\n      return;\n    }\n\n    this.buildDomainModel(\n      this,\n      obj,\n      {\n        title: null,\n        firstName: null,\n        middleName: null,\n        lastName: null,\n        address1: null,\n        address2: null,\n        address3: null,\n        city: null,\n        state: null,\n        postalCode: null,\n        country: null,\n        company: null,\n        email: null,\n        phone: null,\n        ssn: null,\n        username: null,\n        passportNumber: null,\n        licenseNumber: null,\n      },\n      []\n    );\n  }\n\n  decrypt(orgId: string, encKey?: SymmetricCryptoKey): Promise<IdentityView> {\n    return this.decryptObj(\n      new IdentityView(),\n      {\n        title: null,\n        firstName: null,\n        middleName: null,\n        lastName: null,\n        address1: null,\n        address2: null,\n        address3: null,\n        city: null,\n        state: null,\n        postalCode: null,\n        country: null,\n        company: null,\n        email: null,\n        phone: null,\n        ssn: null,\n        username: null,\n        passportNumber: null,\n        licenseNumber: null,\n      },\n      orgId,\n      encKey\n    );\n  }\n\n  toIdentityData(): IdentityData {\n    const i = new IdentityData();\n    this.buildDataModel(this, i, {\n      title: null,\n      firstName: null,\n      middleName: null,\n      lastName: null,\n      address1: null,\n      address2: null,\n      address3: null,\n      city: null,\n      state: null,\n      postalCode: null,\n      country: null,\n      company: null,\n      email: null,\n      phone: null,\n      ssn: null,\n      username: null,\n      passportNumber: null,\n      licenseNumber: null,\n    });\n    return i;\n  }\n\n  static fromJSON(obj: Jsonify<Identity>): Identity {\n    if (obj == null) {\n      return null;\n    }\n\n    const title = EncString.fromJSON(obj.title);\n    const firstName = EncString.fromJSON(obj.firstName);\n    const middleName = EncString.fromJSON(obj.middleName);\n    const lastName = EncString.fromJSON(obj.lastName);\n    const address1 = EncString.fromJSON(obj.address1);\n    const address2 = EncString.fromJSON(obj.address2);\n    const address3 = EncString.fromJSON(obj.address3);\n    const city = EncString.fromJSON(obj.city);\n    const state = EncString.fromJSON(obj.state);\n    const postalCode = EncString.fromJSON(obj.postalCode);\n    const country = EncString.fromJSON(obj.country);\n    const company = EncString.fromJSON(obj.company);\n    const email = EncString.fromJSON(obj.email);\n    const phone = EncString.fromJSON(obj.phone);\n    const ssn = EncString.fromJSON(obj.ssn);\n    const username = EncString.fromJSON(obj.username);\n    const passportNumber = EncString.fromJSON(obj.passportNumber);\n    const licenseNumber = EncString.fromJSON(obj.licenseNumber);\n\n    return Object.assign(new Identity(), obj, {\n      title,\n      firstName,\n      middleName,\n      lastName,\n      address1,\n      address2,\n      address3,\n      city,\n      state,\n      postalCode,\n      country,\n      company,\n      email,\n      phone,\n      ssn,\n      username,\n      passportNumber,\n      licenseNumber,\n    });\n  }\n}\n","import { Jsonify } from \"type-fest\";\n\nimport { UriMatchType } from \"../../../enums/uriMatchType\";\nimport Domain from \"../../../models/domain/domain-base\";\nimport { EncString } from \"../../../models/domain/enc-string\";\nimport { SymmetricCryptoKey } from \"../../../models/domain/symmetric-crypto-key\";\nimport { LoginUriData } from \"../data/login-uri.data\";\nimport { LoginUriView } from \"../view/login-uri.view\";\n\nexport class LoginUri extends Domain {\n  uri: EncString;\n  match: UriMatchType;\n\n  constructor(obj?: LoginUriData) {\n    super();\n    if (obj == null) {\n      return;\n    }\n\n    this.match = obj.match;\n    this.buildDomainModel(\n      this,\n      obj,\n      {\n        uri: null,\n      },\n      []\n    );\n  }\n\n  decrypt(orgId: string, encKey?: SymmetricCryptoKey): Promise<LoginUriView> {\n    return this.decryptObj(\n      new LoginUriView(this),\n      {\n        uri: null,\n      },\n      orgId,\n      encKey\n    );\n  }\n\n  toLoginUriData(): LoginUriData {\n    const u = new LoginUriData();\n    this.buildDataModel(\n      this,\n      u,\n      {\n        uri: null,\n        match: null,\n      },\n      [\"match\"]\n    );\n    return u;\n  }\n\n  static fromJSON(obj: Jsonify<LoginUri>): LoginUri {\n    if (obj == null) {\n      return null;\n    }\n\n    const uri = EncString.fromJSON(obj.uri);\n    return Object.assign(new LoginUri(), obj, {\n      uri,\n    });\n  }\n}\n","import { Jsonify } from \"type-fest\";\n\nimport Domain from \"../../../models/domain/domain-base\";\nimport { EncString } from \"../../../models/domain/enc-string\";\nimport { SymmetricCryptoKey } from \"../../../models/domain/symmetric-crypto-key\";\nimport { LoginData } from \"../data/login.data\";\nimport { LoginView } from \"../view/login.view\";\n\nimport { LoginUri } from \"./login-uri\";\n\nexport class Login extends Domain {\n  uris: LoginUri[];\n  username: EncString;\n  password: EncString;\n  passwordRevisionDate?: Date;\n  totp: EncString;\n  autofillOnPageLoad: boolean;\n\n  constructor(obj?: LoginData) {\n    super();\n    if (obj == null) {\n      return;\n    }\n\n    this.passwordRevisionDate =\n      obj.passwordRevisionDate != null ? new Date(obj.passwordRevisionDate) : null;\n    this.autofillOnPageLoad = obj.autofillOnPageLoad;\n    this.buildDomainModel(\n      this,\n      obj,\n      {\n        username: null,\n        password: null,\n        totp: null,\n      },\n      []\n    );\n\n    if (obj.uris) {\n      this.uris = [];\n      obj.uris.forEach((u) => {\n        this.uris.push(new LoginUri(u));\n      });\n    }\n  }\n\n  async decrypt(orgId: string, encKey?: SymmetricCryptoKey): Promise<LoginView> {\n    const view = await this.decryptObj(\n      new LoginView(this),\n      {\n        username: null,\n        password: null,\n        totp: null,\n      },\n      orgId,\n      encKey\n    );\n\n    if (this.uris != null) {\n      view.uris = [];\n      for (let i = 0; i < this.uris.length; i++) {\n        const uri = await this.uris[i].decrypt(orgId, encKey);\n        view.uris.push(uri);\n      }\n    }\n\n    return view;\n  }\n\n  toLoginData(): LoginData {\n    const l = new LoginData();\n    l.passwordRevisionDate =\n      this.passwordRevisionDate != null ? this.passwordRevisionDate.toISOString() : null;\n    l.autofillOnPageLoad = this.autofillOnPageLoad;\n    this.buildDataModel(this, l, {\n      username: null,\n      password: null,\n      totp: null,\n    });\n\n    if (this.uris != null && this.uris.length > 0) {\n      l.uris = [];\n      this.uris.forEach((u) => {\n        l.uris.push(u.toLoginUriData());\n      });\n    }\n\n    return l;\n  }\n\n  static fromJSON(obj: Partial<Jsonify<Login>>): Login {\n    if (obj == null) {\n      return null;\n    }\n\n    const username = EncString.fromJSON(obj.username);\n    const password = EncString.fromJSON(obj.password);\n    const totp = EncString.fromJSON(obj.totp);\n    const passwordRevisionDate =\n      obj.passwordRevisionDate == null ? null : new Date(obj.passwordRevisionDate);\n    const uris = obj.uris?.map((uri: any) => LoginUri.fromJSON(uri));\n\n    return Object.assign(new Login(), obj, {\n      username,\n      password,\n      totp,\n      passwordRevisionDate: passwordRevisionDate,\n      uris: uris,\n    });\n  }\n}\n","import { Jsonify } from \"type-fest\";\n\nimport Domain from \"../../../models/domain/domain-base\";\nimport { EncString } from \"../../../models/domain/enc-string\";\nimport { SymmetricCryptoKey } from \"../../../models/domain/symmetric-crypto-key\";\nimport { PasswordHistoryData } from \"../data/password-history.data\";\nimport { PasswordHistoryView } from \"../view/password-history.view\";\n\nexport class Password extends Domain {\n  password: EncString;\n  lastUsedDate: Date;\n\n  constructor(obj?: PasswordHistoryData) {\n    super();\n    if (obj == null) {\n      return;\n    }\n\n    this.buildDomainModel(this, obj, {\n      password: null,\n    });\n    this.lastUsedDate = new Date(obj.lastUsedDate);\n  }\n\n  decrypt(orgId: string, encKey?: SymmetricCryptoKey): Promise<PasswordHistoryView> {\n    return this.decryptObj(\n      new PasswordHistoryView(this),\n      {\n        password: null,\n      },\n      orgId,\n      encKey\n    );\n  }\n\n  toPasswordHistoryData(): PasswordHistoryData {\n    const ph = new PasswordHistoryData();\n    ph.lastUsedDate = this.lastUsedDate.toISOString();\n    this.buildDataModel(this, ph, {\n      password: null,\n    });\n    return ph;\n  }\n\n  static fromJSON(obj: Partial<Jsonify<Password>>): Password {\n    if (obj == null) {\n      return null;\n    }\n\n    const password = EncString.fromJSON(obj.password);\n    const lastUsedDate = obj.lastUsedDate == null ? null : new Date(obj.lastUsedDate);\n\n    return Object.assign(new Password(), obj, {\n      password,\n      lastUsedDate,\n    });\n  }\n}\n","import { Jsonify } from \"type-fest\";\n\nimport { SecureNoteType } from \"../../../enums/secureNoteType\";\nimport Domain from \"../../../models/domain/domain-base\";\nimport { SymmetricCryptoKey } from \"../../../models/domain/symmetric-crypto-key\";\nimport { SecureNoteData } from \"../data/secure-note.data\";\nimport { SecureNoteView } from \"../view/secure-note.view\";\n\nexport class SecureNote extends Domain {\n  type: SecureNoteType;\n\n  constructor(obj?: SecureNoteData) {\n    super();\n    if (obj == null) {\n      return;\n    }\n\n    this.type = obj.type;\n  }\n\n  decrypt(orgId: string, encKey?: SymmetricCryptoKey): Promise<SecureNoteView> {\n    return Promise.resolve(new SecureNoteView(this));\n  }\n\n  toSecureNoteData(): SecureNoteData {\n    const n = new SecureNoteData();\n    n.type = this.type;\n    return n;\n  }\n\n  static fromJSON(obj: Jsonify<SecureNote>): SecureNote {\n    if (obj == null) {\n      return null;\n    }\n\n    return Object.assign(new SecureNote(), obj);\n  }\n}\n","import { Jsonify } from \"type-fest\";\n\nimport { Decryptable } from \"../../../interfaces/decryptable.interface\";\nimport Domain from \"../../../models/domain/domain-base\";\nimport { EncString } from \"../../../models/domain/enc-string\";\nimport { SymmetricCryptoKey } from \"../../../models/domain/symmetric-crypto-key\";\nimport { InitializerKey } from \"../../../services/cryptography/initializer-key\";\nimport { CipherRepromptType } from \"../../enums/cipher-reprompt-type\";\nimport { CipherType } from \"../../enums/cipher-type\";\nimport { CipherData } from \"../data/cipher.data\";\nimport { LocalData } from \"../data/local.data\";\nimport { CipherView } from \"../view/cipher.view\";\n\nimport { Attachment } from \"./attachment\";\nimport { Card } from \"./card\";\nimport { Field } from \"./field\";\nimport { Identity } from \"./identity\";\nimport { Login } from \"./login\";\nimport { Password } from \"./password\";\nimport { SecureNote } from \"./secure-note\";\n\nexport class Cipher extends Domain implements Decryptable<CipherView> {\n  readonly initializerKey = InitializerKey.Cipher;\n\n  id: string;\n  organizationId: string;\n  folderId: string;\n  name: EncString;\n  notes: EncString;\n  type: CipherType;\n  favorite: boolean;\n  organizationUseTotp: boolean;\n  edit: boolean;\n  viewPassword: boolean;\n  revisionDate: Date;\n  localData: LocalData;\n  login: Login;\n  identity: Identity;\n  card: Card;\n  secureNote: SecureNote;\n  attachments: Attachment[];\n  fields: Field[];\n  passwordHistory: Password[];\n  collectionIds: string[];\n  creationDate: Date;\n  deletedDate: Date;\n  reprompt: CipherRepromptType;\n\n  constructor(obj?: CipherData, localData: LocalData = null) {\n    super();\n    if (obj == null) {\n      return;\n    }\n\n    this.buildDomainModel(\n      this,\n      obj,\n      {\n        id: null,\n        organizationId: null,\n        folderId: null,\n        name: null,\n        notes: null,\n      },\n      [\"id\", \"organizationId\", \"folderId\"]\n    );\n\n    this.type = obj.type;\n    this.favorite = obj.favorite;\n    this.organizationUseTotp = obj.organizationUseTotp;\n    this.edit = obj.edit;\n    if (obj.viewPassword != null) {\n      this.viewPassword = obj.viewPassword;\n    } else {\n      this.viewPassword = true; // Default for already synced Ciphers without viewPassword\n    }\n    this.revisionDate = obj.revisionDate != null ? new Date(obj.revisionDate) : null;\n    this.collectionIds = obj.collectionIds;\n    this.localData = localData;\n    this.creationDate = obj.creationDate != null ? new Date(obj.creationDate) : null;\n    this.deletedDate = obj.deletedDate != null ? new Date(obj.deletedDate) : null;\n    this.reprompt = obj.reprompt;\n\n    switch (this.type) {\n      case CipherType.Login:\n        this.login = new Login(obj.login);\n        break;\n      case CipherType.SecureNote:\n        this.secureNote = new SecureNote(obj.secureNote);\n        break;\n      case CipherType.Card:\n        this.card = new Card(obj.card);\n        break;\n      case CipherType.Identity:\n        this.identity = new Identity(obj.identity);\n        break;\n      default:\n        break;\n    }\n\n    if (obj.attachments != null) {\n      this.attachments = obj.attachments.map((a) => new Attachment(a));\n    } else {\n      this.attachments = null;\n    }\n\n    if (obj.fields != null) {\n      this.fields = obj.fields.map((f) => new Field(f));\n    } else {\n      this.fields = null;\n    }\n\n    if (obj.passwordHistory != null) {\n      this.passwordHistory = obj.passwordHistory.map((ph) => new Password(ph));\n    } else {\n      this.passwordHistory = null;\n    }\n  }\n\n  async decrypt(encKey?: SymmetricCryptoKey): Promise<CipherView> {\n    const model = new CipherView(this);\n\n    await this.decryptObj(\n      model,\n      {\n        name: null,\n        notes: null,\n      },\n      this.organizationId,\n      encKey\n    );\n\n    switch (this.type) {\n      case CipherType.Login:\n        model.login = await this.login.decrypt(this.organizationId, encKey);\n        break;\n      case CipherType.SecureNote:\n        model.secureNote = await this.secureNote.decrypt(this.organizationId, encKey);\n        break;\n      case CipherType.Card:\n        model.card = await this.card.decrypt(this.organizationId, encKey);\n        break;\n      case CipherType.Identity:\n        model.identity = await this.identity.decrypt(this.organizationId, encKey);\n        break;\n      default:\n        break;\n    }\n\n    const orgId = this.organizationId;\n\n    if (this.attachments != null && this.attachments.length > 0) {\n      const attachments: any[] = [];\n      await this.attachments.reduce((promise, attachment) => {\n        return promise\n          .then(() => {\n            return attachment.decrypt(orgId, encKey);\n          })\n          .then((decAttachment) => {\n            attachments.push(decAttachment);\n          });\n      }, Promise.resolve());\n      model.attachments = attachments;\n    }\n\n    if (this.fields != null && this.fields.length > 0) {\n      const fields: any[] = [];\n      await this.fields.reduce((promise, field) => {\n        return promise\n          .then(() => {\n            return field.decrypt(orgId, encKey);\n          })\n          .then((decField) => {\n            fields.push(decField);\n          });\n      }, Promise.resolve());\n      model.fields = fields;\n    }\n\n    if (this.passwordHistory != null && this.passwordHistory.length > 0) {\n      const passwordHistory: any[] = [];\n      await this.passwordHistory.reduce((promise, ph) => {\n        return promise\n          .then(() => {\n            return ph.decrypt(orgId, encKey);\n          })\n          .then((decPh) => {\n            passwordHistory.push(decPh);\n          });\n      }, Promise.resolve());\n      model.passwordHistory = passwordHistory;\n    }\n\n    return model;\n  }\n\n  toCipherData(): CipherData {\n    const c = new CipherData();\n    c.id = this.id;\n    c.organizationId = this.organizationId;\n    c.folderId = this.folderId;\n    c.edit = this.edit;\n    c.viewPassword = this.viewPassword;\n    c.organizationUseTotp = this.organizationUseTotp;\n    c.favorite = this.favorite;\n    c.revisionDate = this.revisionDate != null ? this.revisionDate.toISOString() : null;\n    c.type = this.type;\n    c.collectionIds = this.collectionIds;\n    c.creationDate = this.creationDate != null ? this.creationDate.toISOString() : null;\n    c.deletedDate = this.deletedDate != null ? this.deletedDate.toISOString() : null;\n    c.reprompt = this.reprompt;\n\n    this.buildDataModel(this, c, {\n      name: null,\n      notes: null,\n    });\n\n    switch (c.type) {\n      case CipherType.Login:\n        c.login = this.login.toLoginData();\n        break;\n      case CipherType.SecureNote:\n        c.secureNote = this.secureNote.toSecureNoteData();\n        break;\n      case CipherType.Card:\n        c.card = this.card.toCardData();\n        break;\n      case CipherType.Identity:\n        c.identity = this.identity.toIdentityData();\n        break;\n      default:\n        break;\n    }\n\n    if (this.fields != null) {\n      c.fields = this.fields.map((f) => f.toFieldData());\n    }\n    if (this.attachments != null) {\n      c.attachments = this.attachments.map((a) => a.toAttachmentData());\n    }\n    if (this.passwordHistory != null) {\n      c.passwordHistory = this.passwordHistory.map((ph) => ph.toPasswordHistoryData());\n    }\n    return c;\n  }\n\n  static fromJSON(obj: Jsonify<Cipher>) {\n    if (obj == null) {\n      return null;\n    }\n\n    const domain = new Cipher();\n    const name = EncString.fromJSON(obj.name);\n    const notes = EncString.fromJSON(obj.notes);\n    const revisionDate = obj.revisionDate == null ? null : new Date(obj.revisionDate);\n    const deletedDate = obj.deletedDate == null ? null : new Date(obj.deletedDate);\n    const attachments = obj.attachments?.map((a: any) => Attachment.fromJSON(a));\n    const fields = obj.fields?.map((f: any) => Field.fromJSON(f));\n    const passwordHistory = obj.passwordHistory?.map((ph: any) => Password.fromJSON(ph));\n\n    Object.assign(domain, obj, {\n      name,\n      notes,\n      revisionDate,\n      deletedDate,\n      attachments,\n      fields,\n      passwordHistory,\n    });\n\n    switch (obj.type) {\n      case CipherType.Card:\n        domain.card = Card.fromJSON(obj.card);\n        break;\n      case CipherType.Identity:\n        domain.identity = Identity.fromJSON(obj.identity);\n        break;\n      case CipherType.Login:\n        domain.login = Login.fromJSON(obj.login);\n        break;\n      case CipherType.SecureNote:\n        domain.secureNote = SecureNote.fromJSON(obj.secureNote);\n        break;\n      default:\n        break;\n    }\n\n    return domain;\n  }\n}\n","import { Jsonify } from \"type-fest\";\n\nimport { InitializerMetadata } from \"../../interfaces/initializer-metadata.interface\";\nimport { Cipher } from \"../../vault/models/domain/cipher\";\nimport { CipherView } from \"../../vault/models/view/cipher.view\";\n\nimport { InitializerKey } from \"./initializer-key\";\n\n/**\n * Internal reference of classes so we can reconstruct objects properly.\n * Each entry should be keyed using the Decryptable.initializerKey property\n */\nconst classInitializers: Record<InitializerKey, (obj: any) => any> = {\n  [InitializerKey.Cipher]: Cipher.fromJSON,\n  [InitializerKey.CipherView]: CipherView.fromJSON,\n};\n\nexport function getClassInitializer<T extends InitializerMetadata>(\n  className: InitializerKey\n): (obj: Jsonify<T>) => T {\n  return classInitializers[className];\n}\n","import { defaultIfEmpty, filter, firstValueFrom, fromEvent, map, Subject, takeUntil } from \"rxjs\";\nimport { Jsonify } from \"type-fest\";\n\nimport { Decryptable } from \"../../interfaces/decryptable.interface\";\nimport { InitializerMetadata } from \"../../interfaces/initializer-metadata.interface\";\nimport { Utils } from \"../../misc/utils\";\nimport { SymmetricCryptoKey } from \"../../models/domain/symmetric-crypto-key\";\n\nimport { EncryptServiceImplementation } from \"./encrypt.service.implementation\";\nimport { getClassInitializer } from \"./get-class-initializer\";\n\n// TTL (time to live) is not strictly required but avoids tying up memory resources if inactive\nconst workerTTL = 3 * 60000; // 3 minutes\n\nexport class MultithreadEncryptServiceImplementation extends EncryptServiceImplementation {\n  private worker: Worker;\n  private timeout: any;\n\n  private clear$ = new Subject<void>();\n\n  /**\n   * Sends items to a web worker to decrypt them.\n   * This utilises multithreading to decrypt items faster without interrupting other operations (e.g. updating UI).\n   */\n  async decryptItems<T extends InitializerMetadata>(\n    items: Decryptable<T>[],\n    key: SymmetricCryptoKey\n  ): Promise<T[]> {\n    if (items == null || items.length < 1) {\n      return [];\n    }\n\n    this.logService.info(\"Starting decryption using multithreading\");\n\n    this.worker ??= new Worker(\n      new URL(\n        /* webpackChunkName: 'encrypt-worker' */\n        \"@bitwarden/common/services/cryptography/encrypt.worker.ts\",\n        import.meta.url\n      )\n    );\n\n    this.restartTimeout();\n\n    const request = {\n      id: Utils.newGuid(),\n      items: items,\n      key: key,\n    };\n\n    this.worker.postMessage(JSON.stringify(request));\n\n    return await firstValueFrom(\n      fromEvent(this.worker, \"message\").pipe(\n        filter((response: MessageEvent) => response.data?.id === request.id),\n        map((response) => JSON.parse(response.data.items)),\n        map((items) =>\n          items.map((jsonItem: Jsonify<T>) => {\n            const initializer = getClassInitializer<T>(jsonItem.initializerKey);\n            return initializer(jsonItem);\n          })\n        ),\n        takeUntil(this.clear$),\n        defaultIfEmpty([])\n      )\n    );\n  }\n\n  private clear() {\n    this.clear$.next();\n    this.worker?.terminate();\n    this.worker = null;\n    this.clearTimeout();\n  }\n\n  private restartTimeout() {\n    this.clearTimeout();\n    this.timeout = setTimeout(() => this.clear(), workerTTL);\n  }\n\n  private clearTimeout() {\n    if (this.timeout != null) {\n      clearTimeout(this.timeout);\n    }\n  }\n}\n","import { EventType } from \"../../enums/eventType\";\n\nexport class EventData {\n  type: EventType;\n  cipherId: string;\n  date: string;\n  organizationId: string;\n}\n","import { EventCollectionService as EventCollectionServiceAbstraction } from \"../../abstractions/event/event-collection.service\";\nimport { EventUploadService } from \"../../abstractions/event/event-upload.service\";\nimport { OrganizationService } from \"../../abstractions/organization/organization.service.abstraction\";\nimport { StateService } from \"../../abstractions/state.service\";\nimport { EventType } from \"../../enums/eventType\";\nimport { EventData } from \"../../models/data/event.data\";\nimport { CipherService } from \"../../vault/abstractions/cipher.service\";\n\nexport class EventCollectionService implements EventCollectionServiceAbstraction {\n  constructor(\n    private cipherService: CipherService,\n    private stateService: StateService,\n    private organizationService: OrganizationService,\n    private eventUploadService: EventUploadService\n  ) {}\n\n  async collect(\n    eventType: EventType,\n    cipherId: string = null,\n    uploadImmediately = false,\n    organizationId: string = null\n  ): Promise<any> {\n    const authed = await this.stateService.getIsAuthenticated();\n    if (!authed) {\n      return;\n    }\n    const organizations = await this.organizationService.getAll();\n    if (organizations == null) {\n      return;\n    }\n    const orgIds = new Set<string>(organizations.filter((o) => o.useEvents).map((o) => o.id));\n    if (orgIds.size === 0) {\n      return;\n    }\n    if (cipherId != null) {\n      const cipher = await this.cipherService.get(cipherId);\n      if (cipher == null || cipher.organizationId == null || !orgIds.has(cipher.organizationId)) {\n        return;\n      }\n    }\n    if (organizationId != null) {\n      if (!orgIds.has(organizationId)) {\n        return;\n      }\n    }\n    let eventCollection = await this.stateService.getEventCollection();\n    if (eventCollection == null) {\n      eventCollection = [];\n    }\n    const event = new EventData();\n    event.type = eventType;\n    event.cipherId = cipherId;\n    event.date = new Date().toISOString();\n    event.organizationId = organizationId;\n    eventCollection.push(event);\n    await this.stateService.setEventCollection(eventCollection);\n    if (uploadImmediately) {\n      await this.eventUploadService.uploadEvents();\n    }\n  }\n}\n","import { EventType } from \"../../enums/eventType\";\n\nexport class EventRequest {\n  type: EventType;\n  cipherId: string;\n  date: string;\n  organizationId: string;\n}\n","import { ApiService } from \"../../abstractions/api.service\";\nimport { EventUploadService as EventUploadServiceAbstraction } from \"../../abstractions/event/event-upload.service\";\nimport { LogService } from \"../../abstractions/log.service\";\nimport { StateService } from \"../../abstractions/state.service\";\nimport { EventRequest } from \"../../models/request/event.request\";\n\nexport class EventUploadService implements EventUploadServiceAbstraction {\n  private inited = false;\n  constructor(\n    private apiService: ApiService,\n    private stateService: StateService,\n    private logService: LogService\n  ) {}\n\n  init(checkOnInterval: boolean) {\n    if (this.inited) {\n      return;\n    }\n\n    this.inited = true;\n    if (checkOnInterval) {\n      this.uploadEvents();\n      setInterval(() => this.uploadEvents(), 60 * 1000); // check every 60 seconds\n    }\n  }\n\n  async uploadEvents(userId?: string): Promise<void> {\n    const authed = await this.stateService.getIsAuthenticated({ userId: userId });\n    if (!authed) {\n      return;\n    }\n    const eventCollection = await this.stateService.getEventCollection({ userId: userId });\n    if (eventCollection == null || eventCollection.length === 0) {\n      return;\n    }\n    const request = eventCollection.map((e) => {\n      const req = new EventRequest();\n      req.type = e.type;\n      req.cipherId = e.cipherId;\n      req.date = e.date;\n      req.organizationId = e.organizationId;\n      return req;\n    });\n    try {\n      await this.apiService.postEventsCollect(request);\n      this.clearEvents(userId);\n    } catch (e) {\n      this.logService.error(e);\n    }\n  }\n\n  private async clearEvents(userId?: string): Promise<any> {\n    await this.stateService.setEventCollection(null, { userId: userId });\n  }\n}\n","import { Card as CardDomain } from \"../../vault/models/domain/card\";\nimport { CardView } from \"../../vault/models/view/card.view\";\nimport { EncString } from \"../domain/enc-string\";\n\nexport class CardExport {\n  static template(): CardExport {\n    const req = new CardExport();\n    req.cardholderName = \"John Doe\";\n    req.brand = \"visa\";\n    req.number = \"4242424242424242\";\n    req.expMonth = \"04\";\n    req.expYear = \"2023\";\n    req.code = \"123\";\n    return req;\n  }\n\n  static toView(req: CardExport, view = new CardView()) {\n    view.cardholderName = req.cardholderName;\n    view.brand = req.brand;\n    view.number = req.number;\n    view.expMonth = req.expMonth;\n    view.expYear = req.expYear;\n    view.code = req.code;\n    return view;\n  }\n\n  static toDomain(req: CardExport, domain = new CardDomain()) {\n    domain.cardholderName = req.cardholderName != null ? new EncString(req.cardholderName) : null;\n    domain.brand = req.brand != null ? new EncString(req.brand) : null;\n    domain.number = req.number != null ? new EncString(req.number) : null;\n    domain.expMonth = req.expMonth != null ? new EncString(req.expMonth) : null;\n    domain.expYear = req.expYear != null ? new EncString(req.expYear) : null;\n    domain.code = req.code != null ? new EncString(req.code) : null;\n    return domain;\n  }\n\n  cardholderName: string;\n  brand: string;\n  number: string;\n  expMonth: string;\n  expYear: string;\n  code: string;\n\n  constructor(o?: CardView | CardDomain) {\n    if (o == null) {\n      return;\n    }\n\n    if (o instanceof CardView) {\n      this.cardholderName = o.cardholderName;\n      this.brand = o.brand;\n      this.number = o.number;\n      this.expMonth = o.expMonth;\n      this.expYear = o.expYear;\n      this.code = o.code;\n    } else {\n      this.cardholderName = o.cardholderName?.encryptedString;\n      this.brand = o.brand?.encryptedString;\n      this.number = o.number?.encryptedString;\n      this.expMonth = o.expMonth?.encryptedString;\n      this.expYear = o.expYear?.encryptedString;\n      this.code = o.code?.encryptedString;\n    }\n  }\n}\n","import { FieldType } from \"../../enums/fieldType\";\nimport { LinkedIdType } from \"../../enums/linkedIdType\";\nimport { Field as FieldDomain } from \"../../vault/models/domain/field\";\nimport { FieldView } from \"../../vault/models/view/field.view\";\nimport { EncString } from \"../domain/enc-string\";\n\nexport class FieldExport {\n  static template(): FieldExport {\n    const req = new FieldExport();\n    req.name = \"Field name\";\n    req.value = \"Some value\";\n    req.type = FieldType.Text;\n    return req;\n  }\n\n  static toView(req: FieldExport, view = new FieldView()) {\n    view.type = req.type;\n    view.value = req.value;\n    view.name = req.name;\n    view.linkedId = req.linkedId;\n    return view;\n  }\n\n  static toDomain(req: FieldExport, domain = new FieldDomain()) {\n    domain.type = req.type;\n    domain.value = req.value != null ? new EncString(req.value) : null;\n    domain.name = req.name != null ? new EncString(req.name) : null;\n    domain.linkedId = req.linkedId;\n    return domain;\n  }\n\n  name: string;\n  value: string;\n  type: FieldType;\n  linkedId: LinkedIdType;\n\n  constructor(o?: FieldView | FieldDomain) {\n    if (o == null) {\n      return;\n    }\n\n    if (o instanceof FieldView) {\n      this.name = o.name;\n      this.value = o.value;\n    } else {\n      this.name = o.name?.encryptedString;\n      this.value = o.value?.encryptedString;\n    }\n    this.type = o.type;\n    this.linkedId = o.linkedId;\n  }\n}\n","import { Identity as IdentityDomain } from \"../../vault/models/domain/identity\";\nimport { IdentityView } from \"../../vault/models/view/identity.view\";\nimport { EncString } from \"../domain/enc-string\";\n\nexport class IdentityExport {\n  static template(): IdentityExport {\n    const req = new IdentityExport();\n    req.title = \"Mr\";\n    req.firstName = \"John\";\n    req.middleName = \"William\";\n    req.lastName = \"Doe\";\n    req.address1 = \"123 Any St\";\n    req.address2 = \"Apt #123\";\n    req.address3 = null;\n    req.city = \"New York\";\n    req.state = \"NY\";\n    req.postalCode = \"10001\";\n    req.country = \"US\";\n    req.company = \"Acme Inc.\";\n    req.email = \"john@company.com\";\n    req.phone = \"5555551234\";\n    req.ssn = \"000-123-4567\";\n    req.username = \"jdoe\";\n    req.passportNumber = \"US-123456789\";\n    req.licenseNumber = \"D123-12-123-12333\";\n    return req;\n  }\n\n  static toView(req: IdentityExport, view = new IdentityView()) {\n    view.title = req.title;\n    view.firstName = req.firstName;\n    view.middleName = req.middleName;\n    view.lastName = req.lastName;\n    view.address1 = req.address1;\n    view.address2 = req.address2;\n    view.address3 = req.address3;\n    view.city = req.city;\n    view.state = req.state;\n    view.postalCode = req.postalCode;\n    view.country = req.country;\n    view.company = req.company;\n    view.email = req.email;\n    view.phone = req.phone;\n    view.ssn = req.ssn;\n    view.username = req.username;\n    view.passportNumber = req.passportNumber;\n    view.licenseNumber = req.licenseNumber;\n    return view;\n  }\n\n  static toDomain(req: IdentityExport, domain = new IdentityDomain()) {\n    domain.title = req.title != null ? new EncString(req.title) : null;\n    domain.firstName = req.firstName != null ? new EncString(req.firstName) : null;\n    domain.middleName = req.middleName != null ? new EncString(req.middleName) : null;\n    domain.lastName = req.lastName != null ? new EncString(req.lastName) : null;\n    domain.address1 = req.address1 != null ? new EncString(req.address1) : null;\n    domain.address2 = req.address2 != null ? new EncString(req.address2) : null;\n    domain.address3 = req.address3 != null ? new EncString(req.address3) : null;\n    domain.city = req.city != null ? new EncString(req.city) : null;\n    domain.state = req.state != null ? new EncString(req.state) : null;\n    domain.postalCode = req.postalCode != null ? new EncString(req.postalCode) : null;\n    domain.country = req.country != null ? new EncString(req.country) : null;\n    domain.company = req.company != null ? new EncString(req.company) : null;\n    domain.email = req.email != null ? new EncString(req.email) : null;\n    domain.phone = req.phone != null ? new EncString(req.phone) : null;\n    domain.ssn = req.ssn != null ? new EncString(req.ssn) : null;\n    domain.username = req.username != null ? new EncString(req.username) : null;\n    domain.passportNumber = req.passportNumber != null ? new EncString(req.passportNumber) : null;\n    domain.licenseNumber = req.licenseNumber != null ? new EncString(req.licenseNumber) : null;\n    return domain;\n  }\n\n  title: string;\n  firstName: string;\n  middleName: string;\n  lastName: string;\n  address1: string;\n  address2: string;\n  address3: string;\n  city: string;\n  state: string;\n  postalCode: string;\n  country: string;\n  company: string;\n  email: string;\n  phone: string;\n  ssn: string;\n  username: string;\n  passportNumber: string;\n  licenseNumber: string;\n\n  constructor(o?: IdentityView | IdentityDomain) {\n    if (o == null) {\n      return;\n    }\n\n    if (o instanceof IdentityView) {\n      this.title = o.title;\n      this.firstName = o.firstName;\n      this.middleName = o.middleName;\n      this.lastName = o.lastName;\n      this.address1 = o.address1;\n      this.address2 = o.address2;\n      this.address3 = o.address3;\n      this.city = o.city;\n      this.state = o.state;\n      this.postalCode = o.postalCode;\n      this.country = o.country;\n      this.company = o.company;\n      this.email = o.email;\n      this.phone = o.phone;\n      this.ssn = o.ssn;\n      this.username = o.username;\n      this.passportNumber = o.passportNumber;\n      this.licenseNumber = o.licenseNumber;\n    } else {\n      this.title = o.title?.encryptedString;\n      this.firstName = o.firstName?.encryptedString;\n      this.middleName = o.middleName?.encryptedString;\n      this.lastName = o.lastName?.encryptedString;\n      this.address1 = o.address1?.encryptedString;\n      this.address2 = o.address2?.encryptedString;\n      this.address3 = o.address3?.encryptedString;\n      this.city = o.city?.encryptedString;\n      this.state = o.state?.encryptedString;\n      this.postalCode = o.postalCode?.encryptedString;\n      this.country = o.country?.encryptedString;\n      this.company = o.company?.encryptedString;\n      this.email = o.email?.encryptedString;\n      this.phone = o.phone?.encryptedString;\n      this.ssn = o.ssn?.encryptedString;\n      this.username = o.username?.encryptedString;\n      this.passportNumber = o.passportNumber?.encryptedString;\n      this.licenseNumber = o.licenseNumber?.encryptedString;\n    }\n  }\n}\n","import { UriMatchType } from \"../../enums/uriMatchType\";\nimport { LoginUri as LoginUriDomain } from \"../../vault/models/domain/login-uri\";\nimport { LoginUriView } from \"../../vault/models/view/login-uri.view\";\nimport { EncString } from \"../domain/enc-string\";\n\nexport class LoginUriExport {\n  static template(): LoginUriExport {\n    const req = new LoginUriExport();\n    req.uri = \"https://google.com\";\n    req.match = null;\n    return req;\n  }\n\n  static toView(req: LoginUriExport, view = new LoginUriView()) {\n    view.uri = req.uri;\n    view.match = req.match;\n    return view;\n  }\n\n  static toDomain(req: LoginUriExport, domain = new LoginUriDomain()) {\n    domain.uri = req.uri != null ? new EncString(req.uri) : null;\n    domain.match = req.match;\n    return domain;\n  }\n\n  uri: string;\n  match: UriMatchType = null;\n\n  constructor(o?: LoginUriView | LoginUriDomain) {\n    if (o == null) {\n      return;\n    }\n\n    if (o instanceof LoginUriView) {\n      this.uri = o.uri;\n    } else {\n      this.uri = o.uri?.encryptedString;\n    }\n    this.match = o.match;\n  }\n}\n","import { Login as LoginDomain } from \"../../vault/models/domain/login\";\nimport { LoginView } from \"../../vault/models/view/login.view\";\nimport { EncString } from \"../domain/enc-string\";\n\nimport { LoginUriExport } from \"./login-uri.export\";\n\nexport class LoginExport {\n  static template(): LoginExport {\n    const req = new LoginExport();\n    req.uris = [];\n    req.username = \"jdoe\";\n    req.password = \"myp@ssword123\";\n    req.totp = \"JBSWY3DPEHPK3PXP\";\n    return req;\n  }\n\n  static toView(req: LoginExport, view = new LoginView()) {\n    if (req.uris != null) {\n      view.uris = req.uris.map((u) => LoginUriExport.toView(u));\n    }\n    view.username = req.username;\n    view.password = req.password;\n    view.totp = req.totp;\n    return view;\n  }\n\n  static toDomain(req: LoginExport, domain = new LoginDomain()) {\n    if (req.uris != null) {\n      domain.uris = req.uris.map((u) => LoginUriExport.toDomain(u));\n    }\n    domain.username = req.username != null ? new EncString(req.username) : null;\n    domain.password = req.password != null ? new EncString(req.password) : null;\n    domain.totp = req.totp != null ? new EncString(req.totp) : null;\n    return domain;\n  }\n\n  uris: LoginUriExport[];\n  username: string;\n  password: string;\n  totp: string;\n\n  constructor(o?: LoginView | LoginDomain) {\n    if (o == null) {\n      return;\n    }\n\n    if (o.uris != null) {\n      if (o instanceof LoginView) {\n        this.uris = o.uris.map((u) => new LoginUriExport(u));\n      } else {\n        this.uris = o.uris.map((u) => new LoginUriExport(u));\n      }\n    }\n\n    if (o instanceof LoginView) {\n      this.username = o.username;\n      this.password = o.password;\n      this.totp = o.totp;\n    } else {\n      this.username = o.username?.encryptedString;\n      this.password = o.password?.encryptedString;\n      this.totp = o.totp?.encryptedString;\n    }\n  }\n}\n","import { SecureNoteType } from \"../../enums/secureNoteType\";\nimport { SecureNote as SecureNoteDomain } from \"../../vault/models/domain/secure-note\";\nimport { SecureNoteView } from \"../../vault/models/view/secure-note.view\";\n\nexport class SecureNoteExport {\n  static template(): SecureNoteExport {\n    const req = new SecureNoteExport();\n    req.type = SecureNoteType.Generic;\n    return req;\n  }\n\n  static toView(req: SecureNoteExport, view = new SecureNoteView()) {\n    view.type = req.type;\n    return view;\n  }\n\n  static toDomain(req: SecureNoteExport, view = new SecureNoteDomain()) {\n    view.type = req.type;\n    return view;\n  }\n\n  type: SecureNoteType;\n\n  constructor(o?: SecureNoteView | SecureNoteDomain) {\n    if (o == null) {\n      return;\n    }\n\n    this.type = o.type;\n  }\n}\n","import { CipherRepromptType } from \"../../vault/enums/cipher-reprompt-type\";\nimport { CipherType } from \"../../vault/enums/cipher-type\";\nimport { Cipher as CipherDomain } from \"../../vault/models/domain/cipher\";\nimport { CipherView } from \"../../vault/models/view/cipher.view\";\nimport { EncString } from \"../domain/enc-string\";\n\nimport { CardExport } from \"./card.export\";\nimport { FieldExport } from \"./field.export\";\nimport { IdentityExport } from \"./identity.export\";\nimport { LoginExport } from \"./login.export\";\nimport { SecureNoteExport } from \"./secure-note.export\";\n\nexport class CipherExport {\n  static template(): CipherExport {\n    const req = new CipherExport();\n    req.organizationId = null;\n    req.collectionIds = null;\n    req.folderId = null;\n    req.type = CipherType.Login;\n    req.name = \"Item name\";\n    req.notes = \"Some notes about this item.\";\n    req.favorite = false;\n    req.fields = [];\n    req.login = null;\n    req.secureNote = null;\n    req.card = null;\n    req.identity = null;\n    req.reprompt = CipherRepromptType.None;\n    return req;\n  }\n\n  static toView(req: CipherExport, view = new CipherView()) {\n    view.type = req.type;\n    view.folderId = req.folderId;\n    if (view.organizationId == null) {\n      view.organizationId = req.organizationId;\n    }\n    if (view.collectionIds || req.collectionIds) {\n      const set = new Set((view.collectionIds ?? []).concat(req.collectionIds ?? []));\n      view.collectionIds = Array.from(set.values());\n    }\n    view.name = req.name;\n    view.notes = req.notes;\n    view.favorite = req.favorite;\n    view.reprompt = req.reprompt ?? CipherRepromptType.None;\n\n    if (req.fields != null) {\n      view.fields = req.fields.map((f) => FieldExport.toView(f));\n    }\n\n    switch (req.type) {\n      case CipherType.Login:\n        view.login = LoginExport.toView(req.login);\n        break;\n      case CipherType.SecureNote:\n        view.secureNote = SecureNoteExport.toView(req.secureNote);\n        break;\n      case CipherType.Card:\n        view.card = CardExport.toView(req.card);\n        break;\n      case CipherType.Identity:\n        view.identity = IdentityExport.toView(req.identity);\n        break;\n    }\n\n    return view;\n  }\n\n  static toDomain(req: CipherExport, domain = new CipherDomain()) {\n    domain.type = req.type;\n    domain.folderId = req.folderId;\n    if (domain.organizationId == null) {\n      domain.organizationId = req.organizationId;\n    }\n    domain.name = req.name != null ? new EncString(req.name) : null;\n    domain.notes = req.notes != null ? new EncString(req.notes) : null;\n    domain.favorite = req.favorite;\n    domain.reprompt = req.reprompt ?? CipherRepromptType.None;\n\n    if (req.fields != null) {\n      domain.fields = req.fields.map((f) => FieldExport.toDomain(f));\n    }\n\n    switch (req.type) {\n      case CipherType.Login:\n        domain.login = LoginExport.toDomain(req.login);\n        break;\n      case CipherType.SecureNote:\n        domain.secureNote = SecureNoteExport.toDomain(req.secureNote);\n        break;\n      case CipherType.Card:\n        domain.card = CardExport.toDomain(req.card);\n        break;\n      case CipherType.Identity:\n        domain.identity = IdentityExport.toDomain(req.identity);\n        break;\n    }\n\n    return domain;\n  }\n\n  type: CipherType;\n  folderId: string;\n  organizationId: string;\n  collectionIds: string[];\n  name: string;\n  notes: string;\n  favorite: boolean;\n  fields: FieldExport[];\n  login: LoginExport;\n  secureNote: SecureNoteExport;\n  card: CardExport;\n  identity: IdentityExport;\n  reprompt: CipherRepromptType;\n\n  // Use build method instead of ctor so that we can control order of JSON stringify for pretty print\n  build(o: CipherView | CipherDomain) {\n    this.organizationId = o.organizationId;\n    this.folderId = o.folderId;\n    this.type = o.type;\n    this.reprompt = o.reprompt;\n\n    if (o instanceof CipherView) {\n      this.name = o.name;\n      this.notes = o.notes;\n    } else {\n      this.name = o.name?.encryptedString;\n      this.notes = o.notes?.encryptedString;\n    }\n\n    this.favorite = o.favorite;\n\n    if (o.fields != null) {\n      if (o instanceof CipherView) {\n        this.fields = o.fields.map((f) => new FieldExport(f));\n      } else {\n        this.fields = o.fields.map((f) => new FieldExport(f));\n      }\n    }\n\n    switch (o.type) {\n      case CipherType.Login:\n        this.login = new LoginExport(o.login);\n        break;\n      case CipherType.SecureNote:\n        this.secureNote = new SecureNoteExport(o.secureNote);\n        break;\n      case CipherType.Card:\n        this.card = new CardExport(o.card);\n        break;\n      case CipherType.Identity:\n        this.identity = new IdentityExport(o.identity);\n        break;\n    }\n  }\n}\n","import { Cipher as CipherDomain } from \"../../vault/models/domain/cipher\";\nimport { CipherView } from \"../../vault/models/view/cipher.view\";\n\nimport { CipherExport } from \"./cipher.export\";\n\nexport class CipherWithIdExport extends CipherExport {\n  id: string;\n  collectionIds: string[];\n\n  // Use build method instead of ctor so that we can control order of JSON stringify for pretty print\n  build(o: CipherView | CipherDomain) {\n    this.id = o.id;\n    super.build(o);\n    this.collectionIds = o.collectionIds;\n  }\n}\n","import { Collection as CollectionDomain } from \"../domain/collection\";\nimport { EncString } from \"../domain/enc-string\";\nimport { CollectionView } from \"../view/collection.view\";\n\nexport class CollectionExport {\n  static template(): CollectionExport {\n    const req = new CollectionExport();\n    req.organizationId = \"00000000-0000-0000-0000-000000000000\";\n    req.name = \"Collection name\";\n    req.externalId = null;\n    return req;\n  }\n\n  static toView(req: CollectionExport, view = new CollectionView()) {\n    view.name = req.name;\n    view.externalId = req.externalId;\n    if (view.organizationId == null) {\n      view.organizationId = req.organizationId;\n    }\n    return view;\n  }\n\n  static toDomain(req: CollectionExport, domain = new CollectionDomain()) {\n    domain.name = req.name != null ? new EncString(req.name) : null;\n    domain.externalId = req.externalId;\n    if (domain.organizationId == null) {\n      domain.organizationId = req.organizationId;\n    }\n    return domain;\n  }\n\n  organizationId: string;\n  name: string;\n  externalId: string;\n\n  // Use build method instead of ctor so that we can control order of JSON stringify for pretty print\n  build(o: CollectionView | CollectionDomain) {\n    this.organizationId = o.organizationId;\n    if (o instanceof CollectionView) {\n      this.name = o.name;\n    } else {\n      this.name = o.name?.encryptedString;\n    }\n    this.externalId = o.externalId;\n  }\n}\n","import { Collection as CollectionDomain } from \"../domain/collection\";\nimport { CollectionView } from \"../view/collection.view\";\n\nimport { CollectionExport } from \"./collection.export\";\n\nexport class CollectionWithIdExport extends CollectionExport {\n  id: string;\n\n  // Use build method instead of ctor so that we can control order of JSON stringify for pretty print\n  build(o: CollectionView | CollectionDomain) {\n    this.id = o.id;\n    super.build(o);\n  }\n}\n","import { EventType } from \"../../enums/eventType\";\nimport { EventView } from \"../view/event.view\";\n\nexport class EventExport {\n  message: string;\n  appIcon: string;\n  appName: string;\n  userId: string;\n  userName: string;\n  userEmail: string;\n  date: string;\n  ip: string;\n  type: string;\n  installationId: string;\n\n  constructor(event: EventView) {\n    this.message = event.humanReadableMessage;\n    this.appIcon = event.appIcon;\n    this.appName = event.appName;\n    this.userId = event.userId;\n    this.userName = event.userName;\n    this.userEmail = event.userEmail;\n    this.date = event.date;\n    this.ip = event.ip;\n    this.type = EventType[event.type];\n    this.installationId = event.installationId;\n  }\n}\n","import { Jsonify } from \"type-fest\";\n\nimport Domain from \"../../../models/domain/domain-base\";\nimport { EncString } from \"../../../models/domain/enc-string\";\nimport { FolderData } from \"../data/folder.data\";\nimport { FolderView } from \"../view/folder.view\";\n\nexport class Folder extends Domain {\n  id: string;\n  name: EncString;\n  revisionDate: Date;\n\n  constructor(obj?: FolderData) {\n    super();\n    if (obj == null) {\n      return;\n    }\n\n    this.buildDomainModel(\n      this,\n      obj,\n      {\n        id: null,\n        name: null,\n      },\n      [\"id\"]\n    );\n\n    this.revisionDate = obj.revisionDate != null ? new Date(obj.revisionDate) : null;\n  }\n\n  decrypt(): Promise<FolderView> {\n    return this.decryptObj(\n      new FolderView(this),\n      {\n        name: null,\n      },\n      null\n    );\n  }\n\n  static fromJSON(obj: Jsonify<Folder>) {\n    const revisionDate = obj.revisionDate == null ? null : new Date(obj.revisionDate);\n    return Object.assign(new Folder(), obj, { name: EncString.fromJSON(obj.name), revisionDate });\n  }\n}\n","import { Folder as FolderDomain } from \"../../vault/models/domain/folder\";\nimport { FolderView } from \"../../vault/models/view/folder.view\";\nimport { EncString } from \"../domain/enc-string\";\n\nexport class FolderExport {\n  static template(): FolderExport {\n    const req = new FolderExport();\n    req.name = \"Folder name\";\n    return req;\n  }\n\n  static toView(req: FolderExport, view = new FolderView()) {\n    view.name = req.name;\n    return view;\n  }\n\n  static toDomain(req: FolderExport, domain = new FolderDomain()) {\n    domain.name = req.name != null ? new EncString(req.name) : null;\n    return domain;\n  }\n\n  name: string;\n\n  // Use build method instead of ctor so that we can control order of JSON stringify for pretty print\n  build(o: FolderView | FolderDomain) {\n    if (o instanceof FolderView) {\n      this.name = o.name;\n    } else {\n      this.name = o.name?.encryptedString;\n    }\n  }\n}\n","import { Folder as FolderDomain } from \"../../vault/models/domain/folder\";\nimport { FolderView } from \"../../vault/models/view/folder.view\";\n\nimport { FolderExport } from \"./folder.export\";\n\nexport class FolderWithIdExport extends FolderExport {\n  id: string;\n\n  // Use build method instead of ctor so that we can control order of JSON stringify for pretty print\n  build(o: FolderView | FolderDomain) {\n    this.id = o.id;\n    super.build(o);\n  }\n}\n","export enum FileUploadType {\n  Direct = 0,\n  Azure = 1,\n}\n","import * as papa from \"papaparse\";\n\nimport { ApiService } from \"../abstractions/api.service\";\nimport { CryptoService } from \"../abstractions/crypto.service\";\nimport { CryptoFunctionService } from \"../abstractions/cryptoFunction.service\";\nimport {\n  ExportFormat,\n  ExportService as ExportServiceAbstraction,\n} from \"../abstractions/export.service\";\nimport { DEFAULT_PBKDF2_ITERATIONS, KdfType } from \"../enums/kdfType\";\nimport { Utils } from \"../misc/utils\";\nimport { CollectionData } from \"../models/data/collection.data\";\nimport { Collection } from \"../models/domain/collection\";\nimport { KdfConfig } from \"../models/domain/kdf-config\";\nimport { CipherWithIdExport as CipherExport } from \"../models/export/cipher-with-ids.export\";\nimport { CollectionWithIdExport as CollectionExport } from \"../models/export/collection-with-id.export\";\nimport { EventExport } from \"../models/export/event.export\";\nimport { FolderWithIdExport as FolderExport } from \"../models/export/folder-with-id.export\";\nimport { CollectionDetailsResponse } from \"../models/response/collection.response\";\nimport { CollectionView } from \"../models/view/collection.view\";\nimport { EventView } from \"../models/view/event.view\";\nimport { CipherService } from \"../vault/abstractions/cipher.service\";\nimport { FolderService } from \"../vault/abstractions/folder/folder.service.abstraction\";\nimport { CipherType } from \"../vault/enums/cipher-type\";\nimport { CipherData } from \"../vault/models/data/cipher.data\";\nimport { Cipher } from \"../vault/models/domain/cipher\";\nimport { Folder } from \"../vault/models/domain/folder\";\nimport { CipherView } from \"../vault/models/view/cipher.view\";\nimport { FolderView } from \"../vault/models/view/folder.view\";\n\nexport class ExportService implements ExportServiceAbstraction {\n  constructor(\n    private folderService: FolderService,\n    private cipherService: CipherService,\n    private apiService: ApiService,\n    private cryptoService: CryptoService,\n    private cryptoFunctionService: CryptoFunctionService\n  ) {}\n\n  async getExport(format: ExportFormat = \"csv\", organizationId?: string): Promise<string> {\n    if (organizationId) {\n      return await this.getOrganizationExport(organizationId, format);\n    }\n\n    if (format === \"encrypted_json\") {\n      return this.getEncryptedExport();\n    } else {\n      return this.getDecryptedExport(format);\n    }\n  }\n\n  async getPasswordProtectedExport(password: string, organizationId?: string): Promise<string> {\n    const clearText = organizationId\n      ? await this.getOrganizationExport(organizationId, \"json\")\n      : await this.getExport(\"json\");\n\n    const salt = Utils.fromBufferToB64(await this.cryptoFunctionService.randomBytes(16));\n    const kdfConfig = new KdfConfig(DEFAULT_PBKDF2_ITERATIONS);\n    const key = await this.cryptoService.makePinKey(\n      password,\n      salt,\n      KdfType.PBKDF2_SHA256,\n      kdfConfig\n    );\n\n    const encKeyValidation = await this.cryptoService.encrypt(Utils.newGuid(), key);\n    const encText = await this.cryptoService.encrypt(clearText, key);\n\n    const jsonDoc: any = {\n      encrypted: true,\n      passwordProtected: true,\n      salt: salt,\n      kdfIterations: kdfConfig.iterations,\n      kdfType: KdfType.PBKDF2_SHA256,\n      encKeyValidation_DO_NOT_EDIT: encKeyValidation.encryptedString,\n      data: encText.encryptedString,\n    };\n\n    return JSON.stringify(jsonDoc, null, \"  \");\n  }\n\n  async getOrganizationExport(\n    organizationId: string,\n    format: ExportFormat = \"csv\"\n  ): Promise<string> {\n    if (format === \"encrypted_json\") {\n      return this.getOrganizationEncryptedExport(organizationId);\n    } else {\n      return this.getOrganizationDecryptedExport(organizationId, format);\n    }\n  }\n\n  async getEventExport(events: EventView[]): Promise<string> {\n    return papa.unparse(events.map((e) => new EventExport(e)));\n  }\n\n  getFileName(prefix: string = null, extension = \"csv\"): string {\n    const now = new Date();\n    const dateString =\n      now.getFullYear() +\n      \"\" +\n      this.padNumber(now.getMonth() + 1, 2) +\n      \"\" +\n      this.padNumber(now.getDate(), 2) +\n      this.padNumber(now.getHours(), 2) +\n      \"\" +\n      this.padNumber(now.getMinutes(), 2) +\n      this.padNumber(now.getSeconds(), 2);\n\n    return \"bitwarden\" + (prefix ? \"_\" + prefix : \"\") + \"_export_\" + dateString + \".\" + extension;\n  }\n\n  private async getDecryptedExport(format: \"json\" | \"csv\"): Promise<string> {\n    let decFolders: FolderView[] = [];\n    let decCiphers: CipherView[] = [];\n    const promises = [];\n\n    promises.push(\n      this.folderService.getAllDecryptedFromState().then((folders) => {\n        decFolders = folders;\n      })\n    );\n\n    promises.push(\n      this.cipherService.getAllDecrypted().then((ciphers) => {\n        decCiphers = ciphers.filter((f) => f.deletedDate == null);\n      })\n    );\n\n    await Promise.all(promises);\n\n    if (format === \"csv\") {\n      const foldersMap = new Map<string, FolderView>();\n      decFolders.forEach((f) => {\n        if (f.id != null) {\n          foldersMap.set(f.id, f);\n        }\n      });\n\n      const exportCiphers: any[] = [];\n      decCiphers.forEach((c) => {\n        // only export logins and secure notes\n        if (c.type !== CipherType.Login && c.type !== CipherType.SecureNote) {\n          return;\n        }\n        if (c.organizationId != null) {\n          return;\n        }\n\n        const cipher: any = {};\n        cipher.folder =\n          c.folderId != null && foldersMap.has(c.folderId) ? foldersMap.get(c.folderId).name : null;\n        cipher.favorite = c.favorite ? 1 : null;\n        this.buildCommonCipher(cipher, c);\n        exportCiphers.push(cipher);\n      });\n\n      return papa.unparse(exportCiphers);\n    } else {\n      const jsonDoc: any = {\n        encrypted: false,\n        folders: [],\n        items: [],\n      };\n\n      decFolders.forEach((f) => {\n        if (f.id == null) {\n          return;\n        }\n        const folder = new FolderExport();\n        folder.build(f);\n        jsonDoc.folders.push(folder);\n      });\n\n      decCiphers.forEach((c) => {\n        if (c.organizationId != null) {\n          return;\n        }\n        const cipher = new CipherExport();\n        cipher.build(c);\n        cipher.collectionIds = null;\n        jsonDoc.items.push(cipher);\n      });\n\n      return JSON.stringify(jsonDoc, null, \"  \");\n    }\n  }\n\n  private async getEncryptedExport(): Promise<string> {\n    let folders: Folder[] = [];\n    let ciphers: Cipher[] = [];\n    const promises = [];\n\n    promises.push(\n      this.folderService.getAllFromState().then((f) => {\n        folders = f;\n      })\n    );\n\n    promises.push(\n      this.cipherService.getAll().then((c) => {\n        ciphers = c.filter((f) => f.deletedDate == null);\n      })\n    );\n\n    await Promise.all(promises);\n\n    const encKeyValidation = await this.cryptoService.encrypt(Utils.newGuid());\n\n    const jsonDoc: any = {\n      encrypted: true,\n      encKeyValidation_DO_NOT_EDIT: encKeyValidation.encryptedString,\n      folders: [],\n      items: [],\n    };\n\n    folders.forEach((f) => {\n      if (f.id == null) {\n        return;\n      }\n      const folder = new FolderExport();\n      folder.build(f);\n      jsonDoc.folders.push(folder);\n    });\n\n    ciphers.forEach((c) => {\n      if (c.organizationId != null) {\n        return;\n      }\n      const cipher = new CipherExport();\n      cipher.build(c);\n      cipher.collectionIds = null;\n      jsonDoc.items.push(cipher);\n    });\n\n    return JSON.stringify(jsonDoc, null, \"  \");\n  }\n\n  private async getOrganizationDecryptedExport(\n    organizationId: string,\n    format: \"json\" | \"csv\"\n  ): Promise<string> {\n    const decCollections: CollectionView[] = [];\n    const decCiphers: CipherView[] = [];\n    const promises = [];\n\n    promises.push(\n      this.apiService.getOrganizationExport(organizationId).then((exportData) => {\n        const exportPromises: any = [];\n        if (exportData != null) {\n          if (exportData.collections != null && exportData.collections.length > 0) {\n            exportData.collections.forEach((c) => {\n              const collection = new Collection(new CollectionData(c as CollectionDetailsResponse));\n              exportPromises.push(\n                collection.decrypt().then((decCol) => {\n                  decCollections.push(decCol);\n                })\n              );\n            });\n          }\n          if (exportData.ciphers != null && exportData.ciphers.length > 0) {\n            exportData.ciphers\n              .filter((c) => c.deletedDate === null)\n              .forEach((c) => {\n                const cipher = new Cipher(new CipherData(c));\n                exportPromises.push(\n                  cipher.decrypt().then((decCipher) => {\n                    decCiphers.push(decCipher);\n                  })\n                );\n              });\n          }\n        }\n        return Promise.all(exportPromises);\n      })\n    );\n\n    await Promise.all(promises);\n\n    if (format === \"csv\") {\n      const collectionsMap = new Map<string, CollectionView>();\n      decCollections.forEach((c) => {\n        collectionsMap.set(c.id, c);\n      });\n\n      const exportCiphers: any[] = [];\n      decCiphers.forEach((c) => {\n        // only export logins and secure notes\n        if (c.type !== CipherType.Login && c.type !== CipherType.SecureNote) {\n          return;\n        }\n\n        const cipher: any = {};\n        cipher.collections = [];\n        if (c.collectionIds != null) {\n          cipher.collections = c.collectionIds\n            .filter((id) => collectionsMap.has(id))\n            .map((id) => collectionsMap.get(id).name);\n        }\n        this.buildCommonCipher(cipher, c);\n        exportCiphers.push(cipher);\n      });\n\n      return papa.unparse(exportCiphers);\n    } else {\n      const jsonDoc: any = {\n        encrypted: false,\n        collections: [],\n        items: [],\n      };\n\n      decCollections.forEach((c) => {\n        const collection = new CollectionExport();\n        collection.build(c);\n        jsonDoc.collections.push(collection);\n      });\n\n      decCiphers.forEach((c) => {\n        const cipher = new CipherExport();\n        cipher.build(c);\n        jsonDoc.items.push(cipher);\n      });\n      return JSON.stringify(jsonDoc, null, \"  \");\n    }\n  }\n\n  private async getOrganizationEncryptedExport(organizationId: string): Promise<string> {\n    const collections: Collection[] = [];\n    const ciphers: Cipher[] = [];\n    const promises = [];\n\n    promises.push(\n      this.apiService.getCollections(organizationId).then((c) => {\n        const collectionPromises: any = [];\n        if (c != null && c.data != null && c.data.length > 0) {\n          c.data.forEach((r) => {\n            const collection = new Collection(new CollectionData(r as CollectionDetailsResponse));\n            collections.push(collection);\n          });\n        }\n        return Promise.all(collectionPromises);\n      })\n    );\n\n    promises.push(\n      this.apiService.getCiphersOrganization(organizationId).then((c) => {\n        const cipherPromises: any = [];\n        if (c != null && c.data != null && c.data.length > 0) {\n          c.data\n            .filter((item) => item.deletedDate === null)\n            .forEach((item) => {\n              const cipher = new Cipher(new CipherData(item));\n              ciphers.push(cipher);\n            });\n        }\n        return Promise.all(cipherPromises);\n      })\n    );\n\n    await Promise.all(promises);\n\n    const orgKey = await this.cryptoService.getOrgKey(organizationId);\n    const encKeyValidation = await this.cryptoService.encrypt(Utils.newGuid(), orgKey);\n\n    const jsonDoc: any = {\n      encrypted: true,\n      encKeyValidation_DO_NOT_EDIT: encKeyValidation.encryptedString,\n      collections: [],\n      items: [],\n    };\n\n    collections.forEach((c) => {\n      const collection = new CollectionExport();\n      collection.build(c);\n      jsonDoc.collections.push(collection);\n    });\n\n    ciphers.forEach((c) => {\n      const cipher = new CipherExport();\n      cipher.build(c);\n      jsonDoc.items.push(cipher);\n    });\n    return JSON.stringify(jsonDoc, null, \"  \");\n  }\n\n  private padNumber(num: number, width: number, padCharacter = \"0\"): string {\n    const numString = num.toString();\n    return numString.length >= width\n      ? numString\n      : new Array(width - numString.length + 1).join(padCharacter) + numString;\n  }\n\n  private buildCommonCipher(cipher: any, c: CipherView) {\n    cipher.type = null;\n    cipher.name = c.name;\n    cipher.notes = c.notes;\n    cipher.fields = null;\n    cipher.reprompt = c.reprompt;\n    // Login props\n    cipher.login_uri = null;\n    cipher.login_username = null;\n    cipher.login_password = null;\n    cipher.login_totp = null;\n\n    if (c.fields) {\n      c.fields.forEach((f: any) => {\n        if (!cipher.fields) {\n          cipher.fields = \"\";\n        } else {\n          cipher.fields += \"\\n\";\n        }\n\n        cipher.fields += (f.name || \"\") + \": \" + f.value;\n      });\n    }\n\n    switch (c.type) {\n      case CipherType.Login:\n        cipher.type = \"login\";\n        cipher.login_username = c.login.username;\n        cipher.login_password = c.login.password;\n        cipher.login_totp = c.login.totp;\n\n        if (c.login.uris) {\n          cipher.login_uri = [];\n          c.login.uris.forEach((u) => {\n            cipher.login_uri.push(u.uri);\n          });\n        }\n        break;\n      case CipherType.SecureNote:\n        cipher.type = \"note\";\n        break;\n      default:\n        return;\n    }\n\n    return cipher;\n  }\n}\n","import { LogService } from \"../abstractions/log.service\";\nimport { Utils } from \"../misc/utils\";\nimport { EncArrayBuffer } from \"../models/domain/enc-array-buffer\";\n\nconst MAX_SINGLE_BLOB_UPLOAD_SIZE = 256 * 1024 * 1024; // 256 MiB\nconst MAX_BLOCKS_PER_BLOB = 50000;\n\nexport class AzureFileUploadService {\n  constructor(private logService: LogService) {}\n\n  async upload(url: string, data: EncArrayBuffer, renewalCallback: () => Promise<string>) {\n    if (data.buffer.byteLength <= MAX_SINGLE_BLOB_UPLOAD_SIZE) {\n      return await this.azureUploadBlob(url, data);\n    } else {\n      return await this.azureUploadBlocks(url, data, renewalCallback);\n    }\n  }\n  private async azureUploadBlob(url: string, data: EncArrayBuffer) {\n    const urlObject = Utils.getUrl(url);\n    const headers = new Headers({\n      \"x-ms-date\": new Date().toUTCString(),\n      \"x-ms-version\": urlObject.searchParams.get(\"sv\"),\n      \"Content-Length\": data.buffer.byteLength.toString(),\n      \"x-ms-blob-type\": \"BlockBlob\",\n    });\n\n    const request = new Request(url, {\n      body: data.buffer,\n      cache: \"no-store\",\n      method: \"PUT\",\n      headers: headers,\n    });\n\n    const blobResponse = await fetch(request);\n\n    if (blobResponse.status !== 201) {\n      throw new Error(`Failed to create Azure blob: ${blobResponse.status}`);\n    }\n  }\n  private async azureUploadBlocks(\n    url: string,\n    data: EncArrayBuffer,\n    renewalCallback: () => Promise<string>\n  ) {\n    const baseUrl = Utils.getUrl(url);\n    const blockSize = this.getMaxBlockSize(baseUrl.searchParams.get(\"sv\"));\n    let blockIndex = 0;\n    const numBlocks = Math.ceil(data.buffer.byteLength / blockSize);\n    const blocksStaged: string[] = [];\n\n    if (numBlocks > MAX_BLOCKS_PER_BLOB) {\n      throw new Error(\n        `Cannot upload file, exceeds maximum size of ${blockSize * MAX_BLOCKS_PER_BLOB}`\n      );\n    }\n\n    // eslint-disable-next-line\n    try {\n      while (blockIndex < numBlocks) {\n        url = await this.renewUrlIfNecessary(url, renewalCallback);\n        const blockUrl = Utils.getUrl(url);\n        const blockId = this.encodedBlockId(blockIndex);\n        blockUrl.searchParams.append(\"comp\", \"block\");\n        blockUrl.searchParams.append(\"blockid\", blockId);\n        const start = blockIndex * blockSize;\n        const blockData = data.buffer.slice(start, start + blockSize);\n        const blockHeaders = new Headers({\n          \"x-ms-date\": new Date().toUTCString(),\n          \"x-ms-version\": blockUrl.searchParams.get(\"sv\"),\n          \"Content-Length\": blockData.byteLength.toString(),\n        });\n\n        const blockRequest = new Request(blockUrl.toString(), {\n          body: blockData,\n          cache: \"no-store\",\n          method: \"PUT\",\n          headers: blockHeaders,\n        });\n\n        const blockResponse = await fetch(blockRequest);\n\n        if (blockResponse.status !== 201) {\n          const message = `Unsuccessful block PUT. Received status ${blockResponse.status}`;\n          this.logService.error(message + \"\\n\" + (await blockResponse.json()));\n          throw new Error(message);\n        }\n\n        blocksStaged.push(blockId);\n        blockIndex++;\n      }\n\n      url = await this.renewUrlIfNecessary(url, renewalCallback);\n      const blockListUrl = Utils.getUrl(url);\n      const blockListXml = this.blockListXml(blocksStaged);\n      blockListUrl.searchParams.append(\"comp\", \"blocklist\");\n      const headers = new Headers({\n        \"x-ms-date\": new Date().toUTCString(),\n        \"x-ms-version\": blockListUrl.searchParams.get(\"sv\"),\n        \"Content-Length\": blockListXml.length.toString(),\n      });\n\n      const request = new Request(blockListUrl.toString(), {\n        body: blockListXml,\n        cache: \"no-store\",\n        method: \"PUT\",\n        headers: headers,\n      });\n\n      const response = await fetch(request);\n\n      if (response.status !== 201) {\n        const message = `Unsuccessful block list PUT. Received status ${response.status}`;\n        this.logService.error(message + \"\\n\" + (await response.json()));\n        throw new Error(message);\n      }\n    } catch (e) {\n      throw e;\n    }\n  }\n\n  private async renewUrlIfNecessary(\n    url: string,\n    renewalCallback: () => Promise<string>\n  ): Promise<string> {\n    const urlObject = Utils.getUrl(url);\n    const expiry = new Date(urlObject.searchParams.get(\"se\") ?? \"\");\n\n    if (isNaN(expiry.getTime())) {\n      expiry.setTime(Date.now() + 3600000);\n    }\n\n    if (expiry.getTime() < Date.now() + 1000) {\n      return await renewalCallback();\n    }\n    return url;\n  }\n\n  private encodedBlockId(blockIndex: number) {\n    // Encoded blockId max size is 64, so pre-encoding max size is 48\n    const utfBlockId = (\n      \"000000000000000000000000000000000000000000000000\" + blockIndex.toString()\n    ).slice(-48);\n    return Utils.fromUtf8ToB64(utfBlockId);\n  }\n\n  private blockListXml(blockIdList: string[]) {\n    let xml = '<?xml version=\"1.0\" encoding=\"utf-8\"?><BlockList>';\n    blockIdList.forEach((blockId) => {\n      xml += `<Latest>${blockId}</Latest>`;\n    });\n    xml += \"</BlockList>\";\n    return xml;\n  }\n\n  private getMaxBlockSize(version: string) {\n    if (Version.compare(version, \"2019-12-12\") >= 0) {\n      return 4000 * 1024 * 1024; // 4000 MiB\n    } else if (Version.compare(version, \"2016-05-31\") >= 0) {\n      return 100 * 1024 * 1024; // 100 MiB\n    } else {\n      return 4 * 1024 * 1024; // 4 MiB\n    }\n  }\n}\n\nclass Version {\n  /**\n   * Compares two Azure Versions against each other\n   * @param a Version to compare\n   * @param b Version to compare\n   * @returns a number less than zero if b is newer than a, 0 if equal,\n   * and greater than zero if a is newer than b\n   */\n  static compare(a: Required<Version> | string, b: Required<Version> | string) {\n    if (typeof a === \"string\") {\n      a = new Version(a);\n    }\n\n    if (typeof b === \"string\") {\n      b = new Version(b);\n    }\n\n    return a.year !== b.year\n      ? a.year - b.year\n      : a.month !== b.month\n      ? a.month - b.month\n      : a.day !== b.day\n      ? a.day - b.day\n      : 0;\n  }\n  year = 0;\n  month = 0;\n  day = 0;\n\n  constructor(version: string) {\n    try {\n      const parts = version.split(\"-\").map((v) => Number.parseInt(v, 10));\n      this.year = parts[0];\n      this.month = parts[1];\n      this.day = parts[2];\n    } catch {\n      // Ignore error\n    }\n  }\n  /**\n   * Compares two Azure Versions against each other\n   * @param compareTo Version to compare against\n   * @returns a number less than zero if compareTo is newer, 0 if equal,\n   * and greater than zero if this is greater than compareTo\n   */\n  compare(compareTo: Required<Version> | string) {\n    return Version.compare(this, compareTo);\n  }\n}\n","import { Utils } from \"../misc/utils\";\nimport { EncArrayBuffer } from \"../models/domain/enc-array-buffer\";\n\nexport class BitwardenFileUploadService {\n  async upload(\n    encryptedFileName: string,\n    encryptedFileData: EncArrayBuffer,\n    apiCall: (fd: FormData) => Promise<any>\n  ) {\n    const fd = new FormData();\n    try {\n      const blob = new Blob([encryptedFileData.buffer], { type: \"application/octet-stream\" });\n      fd.append(\"data\", blob, encryptedFileName);\n    } catch (e) {\n      if (Utils.isNode && !Utils.isBrowser) {\n        fd.append(\n          \"data\",\n          Buffer.from(encryptedFileData.buffer) as any,\n          {\n            filepath: encryptedFileName,\n            contentType: \"application/octet-stream\",\n          } as any\n        );\n      } else {\n        throw e;\n      }\n    }\n\n    await apiCall(fd);\n  }\n}\n","import { ApiService } from \"../abstractions/api.service\";\nimport { FileUploadService as FileUploadServiceAbstraction } from \"../abstractions/fileUpload.service\";\nimport { LogService } from \"../abstractions/log.service\";\nimport { FileUploadType } from \"../enums/fileUploadType\";\nimport { EncArrayBuffer } from \"../models/domain/enc-array-buffer\";\nimport { EncString } from \"../models/domain/enc-string\";\nimport { SendFileUploadDataResponse } from \"../models/response/send-file-upload-data.response\";\nimport { AttachmentUploadDataResponse } from \"../vault/models/response/attachment-upload-data.response\";\n\nimport { AzureFileUploadService } from \"./azureFileUpload.service\";\nimport { BitwardenFileUploadService } from \"./bitwardenFileUpload.service\";\n\nexport class FileUploadService implements FileUploadServiceAbstraction {\n  private azureFileUploadService: AzureFileUploadService;\n  private bitwardenFileUploadService: BitwardenFileUploadService;\n\n  constructor(private logService: LogService, private apiService: ApiService) {\n    this.azureFileUploadService = new AzureFileUploadService(logService);\n    this.bitwardenFileUploadService = new BitwardenFileUploadService();\n  }\n\n  async uploadSendFile(\n    uploadData: SendFileUploadDataResponse,\n    fileName: EncString,\n    encryptedFileData: EncArrayBuffer\n  ) {\n    try {\n      switch (uploadData.fileUploadType) {\n        case FileUploadType.Direct:\n          await this.bitwardenFileUploadService.upload(\n            fileName.encryptedString,\n            encryptedFileData,\n            (fd) =>\n              this.apiService.postSendFile(\n                uploadData.sendResponse.id,\n                uploadData.sendResponse.file.id,\n                fd\n              )\n          );\n          break;\n        case FileUploadType.Azure: {\n          const renewalCallback = async () => {\n            const renewalResponse = await this.apiService.renewSendFileUploadUrl(\n              uploadData.sendResponse.id,\n              uploadData.sendResponse.file.id\n            );\n            return renewalResponse.url;\n          };\n          await this.azureFileUploadService.upload(\n            uploadData.url,\n            encryptedFileData,\n            renewalCallback\n          );\n          break;\n        }\n        default:\n          throw new Error(\"Unknown file upload type\");\n      }\n    } catch (e) {\n      await this.apiService.deleteSend(uploadData.sendResponse.id);\n      throw e;\n    }\n  }\n\n  async uploadCipherAttachment(\n    admin: boolean,\n    uploadData: AttachmentUploadDataResponse,\n    encryptedFileName: EncString,\n    encryptedFileData: EncArrayBuffer\n  ) {\n    const response = admin ? uploadData.cipherMiniResponse : uploadData.cipherResponse;\n    try {\n      switch (uploadData.fileUploadType) {\n        case FileUploadType.Direct:\n          await this.bitwardenFileUploadService.upload(\n            encryptedFileName.encryptedString,\n            encryptedFileData,\n            (fd) => this.apiService.postAttachmentFile(response.id, uploadData.attachmentId, fd)\n          );\n          break;\n        case FileUploadType.Azure: {\n          const renewalCallback = async () => {\n            const renewalResponse = await this.apiService.renewAttachmentUploadUrl(\n              response.id,\n              uploadData.attachmentId\n            );\n            return renewalResponse.url;\n          };\n          await this.azureFileUploadService.upload(\n            uploadData.url,\n            encryptedFileData,\n            renewalCallback\n          );\n          break;\n        }\n        default:\n          throw new Error(\"Unknown file upload type.\");\n      }\n    } catch (e) {\n      if (admin) {\n        await this.apiService.deleteCipherAttachmentAdmin(response.id, uploadData.attachmentId);\n      } else {\n        await this.apiService.deleteCipherAttachment(response.id, uploadData.attachmentId);\n      }\n      throw e;\n    }\n  }\n}\n","import { KdfType } from \"../../../enums/kdfType\";\nimport { KdfConfig } from \"../../domain/kdf-config\";\nimport { KeysRequest } from \"../keys.request\";\n\nexport class SetKeyConnectorKeyRequest {\n  key: string;\n  keys: KeysRequest;\n  kdf: KdfType;\n  kdfIterations: number;\n  kdfMemory?: number;\n  kdfParallelism?: number;\n  orgIdentifier: string;\n\n  constructor(\n    key: string,\n    kdf: KdfType,\n    kdfConfig: KdfConfig,\n    orgIdentifier: string,\n    keys: KeysRequest\n  ) {\n    this.key = key;\n    this.kdf = kdf;\n    this.kdfIterations = kdfConfig.iterations;\n    this.kdfMemory = kdfConfig.memory;\n    this.kdfParallelism = kdfConfig.parallelism;\n    this.orgIdentifier = orgIdentifier;\n    this.keys = keys;\n  }\n}\n","export class KeyConnectorUserKeyRequest {\n  key: string;\n\n  constructor(key: string) {\n    this.key = key;\n  }\n}\n","import { ApiService } from \"../abstractions/api.service\";\nimport { CryptoService } from \"../abstractions/crypto.service\";\nimport { CryptoFunctionService } from \"../abstractions/cryptoFunction.service\";\nimport { KeyConnectorService as KeyConnectorServiceAbstraction } from \"../abstractions/keyConnector.service\";\nimport { LogService } from \"../abstractions/log.service\";\nimport { OrganizationService } from \"../abstractions/organization/organization.service.abstraction\";\nimport { StateService } from \"../abstractions/state.service\";\nimport { TokenService } from \"../abstractions/token.service\";\nimport { OrganizationUserType } from \"../enums/organizationUserType\";\nimport { Utils } from \"../misc/utils\";\nimport { KdfConfig } from \"../models/domain/kdf-config\";\nimport { SymmetricCryptoKey } from \"../models/domain/symmetric-crypto-key\";\nimport { SetKeyConnectorKeyRequest } from \"../models/request/account/set-key-connector-key.request\";\nimport { KeyConnectorUserKeyRequest } from \"../models/request/key-connector-user-key.request\";\nimport { KeysRequest } from \"../models/request/keys.request\";\nimport { IdentityTokenResponse } from \"../models/response/identity-token.response\";\n\nexport class KeyConnectorService implements KeyConnectorServiceAbstraction {\n  constructor(\n    private stateService: StateService,\n    private cryptoService: CryptoService,\n    private apiService: ApiService,\n    private tokenService: TokenService,\n    private logService: LogService,\n    private organizationService: OrganizationService,\n    private cryptoFunctionService: CryptoFunctionService,\n    private logoutCallback: (expired: boolean, userId?: string) => void\n  ) {}\n\n  setUsesKeyConnector(usesKeyConnector: boolean) {\n    return this.stateService.setUsesKeyConnector(usesKeyConnector);\n  }\n\n  async getUsesKeyConnector(): Promise<boolean> {\n    return await this.stateService.getUsesKeyConnector();\n  }\n\n  async userNeedsMigration() {\n    const loggedInUsingSso = await this.tokenService.getIsExternal();\n    const requiredByOrganization = (await this.getManagingOrganization()) != null;\n    const userIsNotUsingKeyConnector = !(await this.getUsesKeyConnector());\n\n    return loggedInUsingSso && requiredByOrganization && userIsNotUsingKeyConnector;\n  }\n\n  async migrateUser() {\n    const organization = await this.getManagingOrganization();\n    const key = await this.cryptoService.getKey();\n    const keyConnectorRequest = new KeyConnectorUserKeyRequest(key.encKeyB64);\n\n    try {\n      await this.apiService.postUserKeyToKeyConnector(\n        organization.keyConnectorUrl,\n        keyConnectorRequest\n      );\n    } catch (e) {\n      this.handleKeyConnectorError(e);\n    }\n\n    await this.apiService.postConvertToKeyConnector();\n  }\n\n  async getAndSetKey(url: string) {\n    try {\n      const userKeyResponse = await this.apiService.getUserKeyFromKeyConnector(url);\n      const keyArr = Utils.fromB64ToArray(userKeyResponse.key);\n      const k = new SymmetricCryptoKey(keyArr);\n      await this.cryptoService.setKey(k);\n    } catch (e) {\n      this.handleKeyConnectorError(e);\n    }\n  }\n\n  async getManagingOrganization() {\n    const orgs = await this.organizationService.getAll();\n    return orgs.find(\n      (o) =>\n        o.keyConnectorEnabled &&\n        o.type !== OrganizationUserType.Admin &&\n        o.type !== OrganizationUserType.Owner &&\n        !o.isProviderUser\n    );\n  }\n\n  async convertNewSsoUserToKeyConnector(tokenResponse: IdentityTokenResponse, orgId: string) {\n    const { kdf, kdfIterations, kdfMemory, kdfParallelism, keyConnectorUrl } = tokenResponse;\n    const password = await this.cryptoFunctionService.randomBytes(64);\n    const kdfConfig = new KdfConfig(kdfIterations, kdfMemory, kdfParallelism);\n\n    const k = await this.cryptoService.makeKey(\n      Utils.fromBufferToB64(password),\n      await this.tokenService.getEmail(),\n      kdf,\n      kdfConfig\n    );\n    const keyConnectorRequest = new KeyConnectorUserKeyRequest(k.encKeyB64);\n    await this.cryptoService.setKey(k);\n\n    const encKey = await this.cryptoService.makeEncKey(k);\n    await this.cryptoService.setEncKey(encKey[1].encryptedString);\n\n    const [pubKey, privKey] = await this.cryptoService.makeKeyPair();\n\n    try {\n      await this.apiService.postUserKeyToKeyConnector(keyConnectorUrl, keyConnectorRequest);\n    } catch (e) {\n      this.handleKeyConnectorError(e);\n    }\n\n    const keys = new KeysRequest(pubKey, privKey.encryptedString);\n    const setPasswordRequest = new SetKeyConnectorKeyRequest(\n      encKey[1].encryptedString,\n      kdf,\n      kdfConfig,\n      orgId,\n      keys\n    );\n    await this.apiService.postSetKeyConnectorKey(setPasswordRequest);\n  }\n\n  async setConvertAccountRequired(status: boolean) {\n    await this.stateService.setConvertAccountToKeyConnector(status);\n  }\n\n  async getConvertAccountRequired(): Promise<boolean> {\n    return await this.stateService.getConvertAccountToKeyConnector();\n  }\n\n  async removeConvertAccountRequired() {\n    await this.stateService.setConvertAccountToKeyConnector(null);\n  }\n\n  async clear() {\n    await this.removeConvertAccountRequired();\n  }\n\n  private handleKeyConnectorError(e: any) {\n    this.logService.error(e);\n    if (this.logoutCallback != null) {\n      this.logoutCallback(false);\n    }\n    throw new Error(\"Key Connector error\");\n  }\n}\n","import { LoginService as LoginServiceAbstraction } from \"../abstractions/login.service\";\nimport { StateService } from \"../abstractions/state.service\";\n\nexport class LoginService implements LoginServiceAbstraction {\n  private _email: string;\n  private _rememberEmail: boolean;\n\n  constructor(private stateService: StateService) {}\n\n  getEmail() {\n    return this._email;\n  }\n\n  getRememberEmail() {\n    return this._rememberEmail;\n  }\n\n  setEmail(value: string) {\n    this._email = value;\n  }\n\n  setRememberEmail(value: boolean) {\n    this._rememberEmail = value;\n  }\n\n  clearValues() {\n    this._email = null;\n    this._rememberEmail = null;\n  }\n\n  async saveEmailSettings() {\n    await this.stateService.setRememberedEmail(this._rememberEmail ? this._email : null);\n    this.clearValues();\n  }\n}\n","import * as signalR from \"@microsoft/signalr\";\nimport * as signalRMsgPack from \"@microsoft/signalr-protocol-msgpack\";\n\nimport { ApiService } from \"../abstractions/api.service\";\nimport { AppIdService } from \"../abstractions/appId.service\";\nimport { AuthService } from \"../abstractions/auth.service\";\nimport { EnvironmentService } from \"../abstractions/environment.service\";\nimport { LogService } from \"../abstractions/log.service\";\nimport { MessagingService } from \"../abstractions/messaging.service\";\nimport { NotificationsService as NotificationsServiceAbstraction } from \"../abstractions/notifications.service\";\nimport { StateService } from \"../abstractions/state.service\";\nimport { AuthenticationStatus } from \"../enums/authenticationStatus\";\nimport { NotificationType } from \"../enums/notificationType\";\nimport {\n  NotificationResponse,\n  SyncCipherNotification,\n  SyncFolderNotification,\n  SyncSendNotification,\n} from \"../models/response/notification.response\";\nimport { SyncService } from \"../vault/abstractions/sync/sync.service.abstraction\";\n\nexport class NotificationsService implements NotificationsServiceAbstraction {\n  private signalrConnection: signalR.HubConnection;\n  private url: string;\n  private connected = false;\n  private inited = false;\n  private inactive = false;\n  private reconnectTimer: any = null;\n\n  constructor(\n    private syncService: SyncService,\n    private appIdService: AppIdService,\n    private apiService: ApiService,\n    private environmentService: EnvironmentService,\n    private logoutCallback: (expired: boolean) => Promise<void>,\n    private logService: LogService,\n    private stateService: StateService,\n    private authService: AuthService,\n    private messagingService: MessagingService\n  ) {\n    this.environmentService.urls.subscribe(() => {\n      if (!this.inited) {\n        return;\n      }\n\n      this.init();\n    });\n  }\n\n  async init(): Promise<void> {\n    this.inited = false;\n    this.url = this.environmentService.getNotificationsUrl();\n\n    // Set notifications server URL to `https://-` to effectively disable communication\n    // with the notifications server from the client app\n    if (this.url === \"https://-\") {\n      return;\n    }\n\n    if (this.signalrConnection != null) {\n      this.signalrConnection.off(\"ReceiveMessage\");\n      this.signalrConnection.off(\"Heartbeat\");\n      await this.signalrConnection.stop();\n      this.connected = false;\n      this.signalrConnection = null;\n    }\n\n    this.signalrConnection = new signalR.HubConnectionBuilder()\n      .withUrl(this.url + \"/hub\", {\n        accessTokenFactory: () => this.apiService.getActiveBearerToken(),\n        skipNegotiation: true,\n        transport: signalR.HttpTransportType.WebSockets,\n      })\n      .withHubProtocol(new signalRMsgPack.MessagePackHubProtocol() as signalR.IHubProtocol)\n      // .configureLogging(signalR.LogLevel.Trace)\n      .build();\n\n    this.signalrConnection.on(\"ReceiveMessage\", (data: any) =>\n      this.processNotification(new NotificationResponse(data))\n    );\n    // eslint-disable-next-line\n    this.signalrConnection.on(\"Heartbeat\", (data: any) => {\n      /*console.log('Heartbeat!');*/\n    });\n    this.signalrConnection.onclose(() => {\n      this.connected = false;\n      this.reconnect(true);\n    });\n    this.inited = true;\n    if (await this.isAuthedAndUnlocked()) {\n      await this.reconnect(false);\n    }\n  }\n\n  async updateConnection(sync = false): Promise<void> {\n    if (!this.inited) {\n      return;\n    }\n    try {\n      if (await this.isAuthedAndUnlocked()) {\n        await this.reconnect(sync);\n      } else {\n        await this.signalrConnection.stop();\n      }\n    } catch (e) {\n      this.logService.error(e.toString());\n    }\n  }\n\n  async reconnectFromActivity(): Promise<void> {\n    this.inactive = false;\n    if (this.inited && !this.connected) {\n      await this.reconnect(true);\n    }\n  }\n\n  async disconnectFromInactivity(): Promise<void> {\n    this.inactive = true;\n    if (this.inited && this.connected) {\n      await this.signalrConnection.stop();\n    }\n  }\n\n  private async processNotification(notification: NotificationResponse) {\n    const appId = await this.appIdService.getAppId();\n    if (notification == null || notification.contextId === appId) {\n      return;\n    }\n\n    const isAuthenticated = await this.stateService.getIsAuthenticated();\n    const payloadUserId = notification.payload.userId || notification.payload.UserId;\n    const myUserId = await this.stateService.getUserId();\n    if (isAuthenticated && payloadUserId != null && payloadUserId !== myUserId) {\n      return;\n    }\n\n    switch (notification.type) {\n      case NotificationType.SyncCipherCreate:\n      case NotificationType.SyncCipherUpdate:\n        await this.syncService.syncUpsertCipher(\n          notification.payload as SyncCipherNotification,\n          notification.type === NotificationType.SyncCipherUpdate\n        );\n        break;\n      case NotificationType.SyncCipherDelete:\n      case NotificationType.SyncLoginDelete:\n        await this.syncService.syncDeleteCipher(notification.payload as SyncCipherNotification);\n        break;\n      case NotificationType.SyncFolderCreate:\n      case NotificationType.SyncFolderUpdate:\n        await this.syncService.syncUpsertFolder(\n          notification.payload as SyncFolderNotification,\n          notification.type === NotificationType.SyncFolderUpdate\n        );\n        break;\n      case NotificationType.SyncFolderDelete:\n        await this.syncService.syncDeleteFolder(notification.payload as SyncFolderNotification);\n        break;\n      case NotificationType.SyncVault:\n      case NotificationType.SyncCiphers:\n      case NotificationType.SyncSettings:\n        if (isAuthenticated) {\n          await this.syncService.fullSync(false);\n        }\n        break;\n      case NotificationType.SyncOrgKeys:\n        if (isAuthenticated) {\n          await this.syncService.fullSync(true);\n          // Stop so a reconnect can be made\n          await this.signalrConnection.stop();\n        }\n        break;\n      case NotificationType.LogOut:\n        if (isAuthenticated) {\n          this.logoutCallback(true);\n        }\n        break;\n      case NotificationType.SyncSendCreate:\n      case NotificationType.SyncSendUpdate:\n        await this.syncService.syncUpsertSend(\n          notification.payload as SyncSendNotification,\n          notification.type === NotificationType.SyncSendUpdate\n        );\n        break;\n      case NotificationType.SyncSendDelete:\n        await this.syncService.syncDeleteSend(notification.payload as SyncSendNotification);\n        break;\n      case NotificationType.AuthRequest:\n        if (await this.stateService.getApproveLoginRequests()) {\n          this.messagingService.send(\"openLoginApproval\", {\n            notificationId: notification.payload.id,\n          });\n        }\n        break;\n      default:\n        break;\n    }\n  }\n\n  private async reconnect(sync: boolean) {\n    if (this.reconnectTimer != null) {\n      clearTimeout(this.reconnectTimer);\n      this.reconnectTimer = null;\n    }\n    if (this.connected || !this.inited || this.inactive) {\n      return;\n    }\n    const authedAndUnlocked = await this.isAuthedAndUnlocked();\n    if (!authedAndUnlocked) {\n      return;\n    }\n\n    try {\n      await this.signalrConnection.start();\n      this.connected = true;\n      if (sync) {\n        await this.syncService.fullSync(false);\n      }\n    } catch (e) {\n      this.logService.error(e);\n    }\n\n    if (!this.connected) {\n      this.reconnectTimer = setTimeout(() => this.reconnect(sync), this.random(120000, 300000));\n    }\n  }\n\n  private async isAuthedAndUnlocked() {\n    const authStatus = await this.authService.getAuthStatus();\n    return authStatus >= AuthenticationStatus.Unlocked;\n  }\n\n  private random(min: number, max: number) {\n    min = Math.ceil(min);\n    max = Math.floor(max);\n    return Math.floor(Math.random() * (max - min + 1)) + min;\n  }\n}\n","import { KdfType } from \"../../../enums/kdfType\";\nimport { OrganizationUserStatusType } from \"../../../enums/organizationUserStatusType\";\nimport { OrganizationUserType } from \"../../../enums/organizationUserType\";\nimport { PermissionsApi } from \"../../../models/api/permissions.api\";\nimport { BaseResponse } from \"../../../models/response/base.response\";\nimport { SelectionReadOnlyResponse } from \"../../../models/response/selection-read-only.response\";\n\nexport class OrganizationUserResponse extends BaseResponse {\n  id: string;\n  userId: string;\n  type: OrganizationUserType;\n  status: OrganizationUserStatusType;\n  externalId: string;\n  accessAll: boolean;\n  accessSecretsManager: boolean;\n  permissions: PermissionsApi;\n  resetPasswordEnrolled: boolean;\n  collections: SelectionReadOnlyResponse[] = [];\n  groups: string[] = [];\n\n  constructor(response: any) {\n    super(response);\n    this.id = this.getResponseProperty(\"Id\");\n    this.userId = this.getResponseProperty(\"UserId\");\n    this.type = this.getResponseProperty(\"Type\");\n    this.status = this.getResponseProperty(\"Status\");\n    this.permissions = new PermissionsApi(this.getResponseProperty(\"Permissions\"));\n    this.externalId = this.getResponseProperty(\"ExternalId\");\n    this.accessAll = this.getResponseProperty(\"AccessAll\");\n    this.accessSecretsManager = this.getResponseProperty(\"AccessSecretsManager\");\n    this.resetPasswordEnrolled = this.getResponseProperty(\"ResetPasswordEnrolled\");\n\n    const collections = this.getResponseProperty(\"Collections\");\n    if (collections != null) {\n      this.collections = collections.map((c: any) => new SelectionReadOnlyResponse(c));\n    }\n    const groups = this.getResponseProperty(\"Groups\");\n    if (groups != null) {\n      this.groups = groups;\n    }\n  }\n}\n\nexport class OrganizationUserUserDetailsResponse extends OrganizationUserResponse {\n  name: string;\n  email: string;\n  twoFactorEnabled: boolean;\n  usesKeyConnector: boolean;\n\n  constructor(response: any) {\n    super(response);\n    this.name = this.getResponseProperty(\"Name\");\n    this.email = this.getResponseProperty(\"Email\");\n    this.twoFactorEnabled = this.getResponseProperty(\"TwoFactorEnabled\");\n    this.usesKeyConnector = this.getResponseProperty(\"UsesKeyConnector\") ?? false;\n  }\n}\n\nexport class OrganizationUserDetailsResponse extends OrganizationUserResponse {\n  constructor(response: any) {\n    super(response);\n  }\n}\n\nexport class OrganizationUserResetPasswordDetailsReponse extends BaseResponse {\n  kdf: KdfType;\n  kdfIterations: number;\n  kdfMemory?: number;\n  kdfParallelism?: number;\n  resetPasswordKey: string;\n  encryptedPrivateKey: string;\n\n  constructor(response: any) {\n    super(response);\n    this.kdf = this.getResponseProperty(\"Kdf\");\n    this.kdfIterations = this.getResponseProperty(\"KdfIterations\");\n    this.kdfMemory = this.getResponseProperty(\"KdfMemory\");\n    this.kdfParallelism = this.getResponseProperty(\"KdfParallelism\");\n    this.resetPasswordKey = this.getResponseProperty(\"ResetPasswordKey\");\n    this.encryptedPrivateKey = this.getResponseProperty(\"EncryptedPrivateKey\");\n  }\n}\n","import { BaseResponse } from \"../../../models/response/base.response\";\n\nexport class OrganizationUserBulkResponse extends BaseResponse {\n  id: string;\n  error: string;\n\n  constructor(response: any) {\n    super(response);\n    this.id = this.getResponseProperty(\"Id\");\n    this.error = this.getResponseProperty(\"Error\");\n  }\n}\n","export class OrganizationUserBulkRequest {\n  ids: string[];\n\n  constructor(ids: string[]) {\n    this.ids = ids == null ? [] : ids;\n  }\n}\n","export enum SsoType {\n  None = 0,\n  OpenIdConnect = 1,\n  Saml2 = 2,\n}\n\nexport enum OpenIdConnectRedirectBehavior {\n  RedirectGet = 0,\n  FormPost = 1,\n}\n\nexport enum Saml2BindingType {\n  HttpRedirect = 1,\n  HttpPost = 2,\n}\n\nexport enum Saml2NameIdFormat {\n  NotConfigured = 0,\n  Unspecified = 1,\n  EmailAddress = 2,\n  X509SubjectName = 3,\n  WindowsDomainQualifiedName = 4,\n  KerberosPrincipalName = 5,\n  EntityIdentifier = 6,\n  Persistent = 7,\n  Transient = 8,\n}\n\nexport enum Saml2SigningBehavior {\n  IfIdpWantAuthnRequestsSigned = 0,\n  Always = 1,\n  Never = 3,\n}\n","import { OrganizationApiKeyType } from \"../../enums/organizationApiKeyType\";\n\nimport { BaseResponse } from \"./base.response\";\n\nexport class OrganizationApiKeyInformationResponse extends BaseResponse {\n  keyType: OrganizationApiKeyType;\n\n  constructor(response: any) {\n    super(response);\n    this.keyType = this.getResponseProperty(\"KeyType\");\n  }\n}\n","import { BaseResponse } from \"./base.response\";\n\nexport class OrganizationAutoEnrollStatusResponse extends BaseResponse {\n  id: string;\n  resetPasswordEnabled: boolean;\n\n  constructor(response: any) {\n    super(response);\n    this.id = this.getResponseProperty(\"Id\");\n    this.resetPasswordEnabled = this.getResponseProperty(\"ResetPasswordEnabled\");\n  }\n}\n","import { BaseResponse } from \"./base.response\";\n\nexport class KeysResponse extends BaseResponse {\n  privateKey: string;\n  publicKey: string;\n\n  constructor(response: any) {\n    super(response);\n    this.privateKey = this.getResponseProperty(\"PrivateKey\");\n    this.publicKey = this.getResponseProperty(\"PublicKey\");\n  }\n}\n","import { KeysResponse } from \"./keys.response\";\n\nexport class OrganizationKeysResponse extends KeysResponse {\n  constructor(response: any) {\n    super(response);\n  }\n}\n","import { PlanType } from \"../../enums/planType\";\n\nimport { BaseResponse } from \"./base.response\";\nimport { PlanResponse } from \"./plan.response\";\n\nexport class OrganizationResponse extends BaseResponse {\n  id: string;\n  identifier: string;\n  name: string;\n  businessName: string;\n  businessAddress1: string;\n  businessAddress2: string;\n  businessAddress3: string;\n  businessCountry: string;\n  businessTaxNumber: string;\n  billingEmail: string;\n  plan: PlanResponse;\n  planType: PlanType;\n  seats: number;\n  maxAutoscaleSeats: number;\n  maxCollections: number;\n  maxStorageGb: number;\n  useGroups: boolean;\n  useDirectory: boolean;\n  useEvents: boolean;\n  useTotp: boolean;\n  use2fa: boolean;\n  useApi: boolean;\n  useResetPassword: boolean;\n  hasPublicAndPrivateKeys: boolean;\n\n  constructor(response: any) {\n    super(response);\n    this.id = this.getResponseProperty(\"Id\");\n    this.identifier = this.getResponseProperty(\"Identifier\");\n    this.name = this.getResponseProperty(\"Name\");\n    this.businessName = this.getResponseProperty(\"BusinessName\");\n    this.businessAddress1 = this.getResponseProperty(\"BusinessAddress1\");\n    this.businessAddress2 = this.getResponseProperty(\"BusinessAddress2\");\n    this.businessAddress3 = this.getResponseProperty(\"BusinessAddress3\");\n    this.businessCountry = this.getResponseProperty(\"BusinessCountry\");\n    this.businessTaxNumber = this.getResponseProperty(\"BusinessTaxNumber\");\n    this.billingEmail = this.getResponseProperty(\"BillingEmail\");\n    const plan = this.getResponseProperty(\"Plan\");\n    this.plan = plan == null ? null : new PlanResponse(plan);\n    this.planType = this.getResponseProperty(\"PlanType\");\n    this.seats = this.getResponseProperty(\"Seats\");\n    this.maxAutoscaleSeats = this.getResponseProperty(\"MaxAutoscaleSeats\");\n    this.maxCollections = this.getResponseProperty(\"MaxCollections\");\n    this.maxStorageGb = this.getResponseProperty(\"MaxStorageGb\");\n    this.useGroups = this.getResponseProperty(\"UseGroups\");\n    this.useDirectory = this.getResponseProperty(\"UseDirectory\");\n    this.useEvents = this.getResponseProperty(\"UseEvents\");\n    this.useTotp = this.getResponseProperty(\"UseTotp\");\n    this.use2fa = this.getResponseProperty(\"Use2fa\");\n    this.useApi = this.getResponseProperty(\"UseApi\");\n    this.useResetPassword = this.getResponseProperty(\"UseResetPassword\");\n    this.hasPublicAndPrivateKeys = this.getResponseProperty(\"HasPublicAndPrivateKeys\");\n  }\n}\n","import { OrganizationResponse } from \"./organization.response\";\nimport {\n  BillingSubscriptionResponse,\n  BillingSubscriptionUpcomingInvoiceResponse,\n} from \"./subscription.response\";\n\nexport class OrganizationSubscriptionResponse extends OrganizationResponse {\n  storageName: string;\n  storageGb: number;\n  subscription: BillingSubscriptionResponse;\n  upcomingInvoice: BillingSubscriptionUpcomingInvoiceResponse;\n  expiration: string;\n\n  constructor(response: any) {\n    super(response);\n    this.storageName = this.getResponseProperty(\"StorageName\");\n    this.storageGb = this.getResponseProperty(\"StorageGb\");\n    const subscription = this.getResponseProperty(\"Subscription\");\n    this.subscription = subscription == null ? null : new BillingSubscriptionResponse(subscription);\n    const upcomingInvoice = this.getResponseProperty(\"UpcomingInvoice\");\n    this.upcomingInvoice =\n      upcomingInvoice == null\n        ? null\n        : new BillingSubscriptionUpcomingInvoiceResponse(upcomingInvoice);\n    this.expiration = this.getResponseProperty(\"Expiration\");\n  }\n}\n","import {\n  OpenIdConnectRedirectBehavior,\n  Saml2BindingType,\n  Saml2NameIdFormat,\n  Saml2SigningBehavior,\n  SsoType,\n} from \"../../enums/ssoEnums\";\nimport { BaseResponse } from \"../response/base.response\";\nimport { SsoConfigView } from \"../view/sso-config.view\";\n\nexport class SsoConfigApi extends BaseResponse {\n  static fromView(view: SsoConfigView, api = new SsoConfigApi()) {\n    api.configType = view.configType;\n\n    api.keyConnectorEnabled = view.keyConnectorEnabled;\n    api.keyConnectorUrl = view.keyConnectorUrl;\n\n    if (api.configType === SsoType.OpenIdConnect) {\n      api.authority = view.openId.authority;\n      api.clientId = view.openId.clientId;\n      api.clientSecret = view.openId.clientSecret;\n      api.metadataAddress = view.openId.metadataAddress;\n      api.redirectBehavior = view.openId.redirectBehavior;\n      api.getClaimsFromUserInfoEndpoint = view.openId.getClaimsFromUserInfoEndpoint;\n      api.additionalScopes = view.openId.additionalScopes;\n      api.additionalUserIdClaimTypes = view.openId.additionalUserIdClaimTypes;\n      api.additionalEmailClaimTypes = view.openId.additionalEmailClaimTypes;\n      api.additionalNameClaimTypes = view.openId.additionalNameClaimTypes;\n      api.acrValues = view.openId.acrValues;\n      api.expectedReturnAcrValue = view.openId.expectedReturnAcrValue;\n    } else if (api.configType === SsoType.Saml2) {\n      api.spNameIdFormat = view.saml.spNameIdFormat;\n      api.spOutboundSigningAlgorithm = view.saml.spOutboundSigningAlgorithm;\n      api.spSigningBehavior = view.saml.spSigningBehavior;\n      api.spMinIncomingSigningAlgorithm = view.saml.spMinIncomingSigningAlgorithm;\n      api.spWantAssertionsSigned = view.saml.spWantAssertionsSigned;\n      api.spValidateCertificates = view.saml.spValidateCertificates;\n\n      api.idpEntityId = view.saml.idpEntityId;\n      api.idpBindingType = view.saml.idpBindingType;\n      api.idpSingleSignOnServiceUrl = view.saml.idpSingleSignOnServiceUrl;\n      api.idpSingleLogoutServiceUrl = view.saml.idpSingleLogoutServiceUrl;\n      api.idpX509PublicCert = view.saml.idpX509PublicCert;\n      api.idpOutboundSigningAlgorithm = view.saml.idpOutboundSigningAlgorithm;\n      api.idpAllowUnsolicitedAuthnResponse = view.saml.idpAllowUnsolicitedAuthnResponse;\n      api.idpWantAuthnRequestsSigned = view.saml.idpWantAuthnRequestsSigned;\n\n      // Value is inverted in the api model (disable instead of allow)\n      api.idpDisableOutboundLogoutRequests = !view.saml.idpAllowOutboundLogoutRequests;\n    }\n\n    return api;\n  }\n  configType: SsoType;\n\n  keyConnectorEnabled: boolean;\n  keyConnectorUrl: string;\n\n  // OpenId\n  authority: string;\n  clientId: string;\n  clientSecret: string;\n  metadataAddress: string;\n  redirectBehavior: OpenIdConnectRedirectBehavior;\n  getClaimsFromUserInfoEndpoint: boolean;\n  additionalScopes: string;\n  additionalUserIdClaimTypes: string;\n  additionalEmailClaimTypes: string;\n  additionalNameClaimTypes: string;\n  acrValues: string;\n  expectedReturnAcrValue: string;\n\n  // SAML\n  spNameIdFormat: Saml2NameIdFormat;\n  spOutboundSigningAlgorithm: string;\n  spSigningBehavior: Saml2SigningBehavior;\n  spMinIncomingSigningAlgorithm: string;\n  spWantAssertionsSigned: boolean;\n  spValidateCertificates: boolean;\n\n  idpEntityId: string;\n  idpBindingType: Saml2BindingType;\n  idpSingleSignOnServiceUrl: string;\n  idpSingleLogoutServiceUrl: string;\n  idpX509PublicCert: string;\n  idpOutboundSigningAlgorithm: string;\n  idpAllowUnsolicitedAuthnResponse: boolean;\n  idpDisableOutboundLogoutRequests: boolean;\n  idpWantAuthnRequestsSigned: boolean;\n\n  constructor(data: any = null) {\n    super(data);\n    if (data == null) {\n      return;\n    }\n\n    this.configType = this.getResponseProperty(\"ConfigType\");\n\n    this.keyConnectorEnabled = this.getResponseProperty(\"KeyConnectorEnabled\");\n    this.keyConnectorUrl = this.getResponseProperty(\"KeyConnectorUrl\");\n\n    this.authority = this.getResponseProperty(\"Authority\");\n    this.clientId = this.getResponseProperty(\"ClientId\");\n    this.clientSecret = this.getResponseProperty(\"ClientSecret\");\n    this.metadataAddress = this.getResponseProperty(\"MetadataAddress\");\n    this.redirectBehavior = this.getResponseProperty(\"RedirectBehavior\");\n    this.getClaimsFromUserInfoEndpoint = this.getResponseProperty(\"GetClaimsFromUserInfoEndpoint\");\n    this.additionalScopes = this.getResponseProperty(\"AdditionalScopes\");\n    this.additionalUserIdClaimTypes = this.getResponseProperty(\"AdditionalUserIdClaimTypes\");\n    this.additionalEmailClaimTypes = this.getResponseProperty(\"AdditionalEmailClaimTypes\");\n    this.additionalNameClaimTypes = this.getResponseProperty(\"AdditionalNameClaimTypes\");\n    this.acrValues = this.getResponseProperty(\"AcrValues\");\n    this.expectedReturnAcrValue = this.getResponseProperty(\"ExpectedReturnAcrValue\");\n\n    this.spNameIdFormat = this.getResponseProperty(\"SpNameIdFormat\");\n    this.spOutboundSigningAlgorithm = this.getResponseProperty(\"SpOutboundSigningAlgorithm\");\n    this.spSigningBehavior = this.getResponseProperty(\"SpSigningBehavior\");\n    this.spMinIncomingSigningAlgorithm = this.getResponseProperty(\"SpMinIncomingSigningAlgorithm\");\n    this.spWantAssertionsSigned = this.getResponseProperty(\"SpWantAssertionsSigned\");\n    this.spValidateCertificates = this.getResponseProperty(\"SpValidateCertificates\");\n\n    this.idpEntityId = this.getResponseProperty(\"IdpEntityId\");\n    this.idpBindingType = this.getResponseProperty(\"IdpBindingType\");\n    this.idpSingleSignOnServiceUrl = this.getResponseProperty(\"IdpSingleSignOnServiceUrl\");\n    this.idpSingleLogoutServiceUrl = this.getResponseProperty(\"IdpSingleLogoutServiceUrl\");\n    this.idpX509PublicCert = this.getResponseProperty(\"IdpX509PublicCert\");\n    this.idpOutboundSigningAlgorithm = this.getResponseProperty(\"IdpOutboundSigningAlgorithm\");\n    this.idpAllowUnsolicitedAuthnResponse = this.getResponseProperty(\n      \"IdpAllowUnsolicitedAuthnResponse\"\n    );\n    this.idpDisableOutboundLogoutRequests = this.getResponseProperty(\n      \"IdpDisableOutboundLogoutRequests\"\n    );\n    this.idpWantAuthnRequestsSigned = this.getResponseProperty(\"IdpWantAuthnRequestsSigned\");\n  }\n}\n","import { SsoConfigApi } from \"../../api/sso-config.api\";\nimport { BaseResponse } from \"../base.response\";\n\nexport class OrganizationSsoResponse extends BaseResponse {\n  enabled: boolean;\n  identifier: string;\n  data: SsoConfigApi;\n  urls: SsoUrls;\n\n  constructor(response: any) {\n    super(response);\n    this.enabled = this.getResponseProperty(\"Enabled\");\n    this.identifier = this.getResponseProperty(\"Identifier\");\n    this.data =\n      this.getResponseProperty(\"Data\") != null\n        ? new SsoConfigApi(this.getResponseProperty(\"Data\"))\n        : null;\n    this.urls = new SsoUrls(this.getResponseProperty(\"Urls\"));\n  }\n}\n\nclass SsoUrls extends BaseResponse {\n  callbackPath: string;\n  signedOutCallbackPath: string;\n  spEntityId: string;\n  spMetadataUrl: string;\n  spAcsUrl: string;\n\n  constructor(response: any) {\n    super(response);\n    this.callbackPath = this.getResponseProperty(\"CallbackPath\");\n    this.signedOutCallbackPath = this.getResponseProperty(\"SignedOutCallbackPath\");\n    this.spEntityId = this.getResponseProperty(\"SpEntityId\");\n    this.spMetadataUrl = this.getResponseProperty(\"SpMetadataUrl\");\n    this.spAcsUrl = this.getResponseProperty(\"SpAcsUrl\");\n  }\n}\n","import { Jsonify } from \"type-fest\";\n\nimport { OrganizationUserStatusType } from \"../../enums/organizationUserStatusType\";\nimport { OrganizationUserType } from \"../../enums/organizationUserType\";\nimport { ProductType } from \"../../enums/productType\";\nimport { PermissionsApi } from \"../api/permissions.api\";\nimport { OrganizationData } from \"../data/organization.data\";\n\nexport class Organization {\n  id: string;\n  name: string;\n  status: OrganizationUserStatusType;\n  type: OrganizationUserType;\n  enabled: boolean;\n  usePolicies: boolean;\n  useGroups: boolean;\n  useDirectory: boolean;\n  useEvents: boolean;\n  useTotp: boolean;\n  use2fa: boolean;\n  useApi: boolean;\n  useSso: boolean;\n  useKeyConnector: boolean;\n  useScim: boolean;\n  useCustomPermissions: boolean;\n  useResetPassword: boolean;\n  useSecretsManager: boolean;\n  selfHost: boolean;\n  usersGetPremium: boolean;\n  seats: number;\n  maxCollections: number;\n  maxStorageGb?: number;\n  ssoBound: boolean;\n  identifier: string;\n  permissions: PermissionsApi;\n  resetPasswordEnrolled: boolean;\n  userId: string;\n  hasPublicAndPrivateKeys: boolean;\n  providerId: string;\n  providerName: string;\n  isProviderUser: boolean;\n  familySponsorshipFriendlyName: string;\n  familySponsorshipAvailable: boolean;\n  planProductType: ProductType;\n  keyConnectorEnabled: boolean;\n  keyConnectorUrl: string;\n  familySponsorshipLastSyncDate?: Date;\n  familySponsorshipValidUntil?: Date;\n  familySponsorshipToDelete?: boolean;\n  accessSecretsManager: boolean;\n\n  constructor(obj?: OrganizationData) {\n    if (obj == null) {\n      return;\n    }\n\n    this.id = obj.id;\n    this.name = obj.name;\n    this.status = obj.status;\n    this.type = obj.type;\n    this.enabled = obj.enabled;\n    this.usePolicies = obj.usePolicies;\n    this.useGroups = obj.useGroups;\n    this.useDirectory = obj.useDirectory;\n    this.useEvents = obj.useEvents;\n    this.useTotp = obj.useTotp;\n    this.use2fa = obj.use2fa;\n    this.useApi = obj.useApi;\n    this.useSso = obj.useSso;\n    this.useKeyConnector = obj.useKeyConnector;\n    this.useScim = obj.useScim;\n    this.useCustomPermissions = obj.useCustomPermissions;\n    this.useResetPassword = obj.useResetPassword;\n    this.useSecretsManager = obj.useSecretsManager;\n    this.selfHost = obj.selfHost;\n    this.usersGetPremium = obj.usersGetPremium;\n    this.seats = obj.seats;\n    this.maxCollections = obj.maxCollections;\n    this.maxStorageGb = obj.maxStorageGb;\n    this.ssoBound = obj.ssoBound;\n    this.identifier = obj.identifier;\n    this.permissions = obj.permissions;\n    this.resetPasswordEnrolled = obj.resetPasswordEnrolled;\n    this.userId = obj.userId;\n    this.hasPublicAndPrivateKeys = obj.hasPublicAndPrivateKeys;\n    this.providerId = obj.providerId;\n    this.providerName = obj.providerName;\n    this.isProviderUser = obj.isProviderUser;\n    this.familySponsorshipFriendlyName = obj.familySponsorshipFriendlyName;\n    this.familySponsorshipAvailable = obj.familySponsorshipAvailable;\n    this.planProductType = obj.planProductType;\n    this.keyConnectorEnabled = obj.keyConnectorEnabled;\n    this.keyConnectorUrl = obj.keyConnectorUrl;\n    this.familySponsorshipLastSyncDate = obj.familySponsorshipLastSyncDate;\n    this.familySponsorshipValidUntil = obj.familySponsorshipValidUntil;\n    this.familySponsorshipToDelete = obj.familySponsorshipToDelete;\n    this.accessSecretsManager = obj.accessSecretsManager;\n  }\n\n  get canAccess() {\n    if (this.type === OrganizationUserType.Owner) {\n      return true;\n    }\n    return this.enabled && this.status === OrganizationUserStatusType.Confirmed;\n  }\n\n  get isManager() {\n    return (\n      this.type === OrganizationUserType.Manager ||\n      this.type === OrganizationUserType.Owner ||\n      this.type === OrganizationUserType.Admin\n    );\n  }\n\n  get isAdmin() {\n    return this.type === OrganizationUserType.Owner || this.type === OrganizationUserType.Admin;\n  }\n\n  get isOwner() {\n    return this.type === OrganizationUserType.Owner || this.isProviderUser;\n  }\n\n  get canAccessEventLogs() {\n    return (this.isAdmin || this.permissions.accessEventLogs) && this.useEvents;\n  }\n\n  get canAccessImportExport() {\n    return this.isAdmin || this.permissions.accessImportExport;\n  }\n\n  get canAccessReports() {\n    return this.isAdmin || this.permissions.accessReports;\n  }\n\n  get canCreateNewCollections() {\n    return this.isManager || this.permissions.createNewCollections;\n  }\n\n  get canEditAnyCollection() {\n    return this.isAdmin || this.permissions.editAnyCollection;\n  }\n\n  get canUseAdminCollections() {\n    return this.canEditAnyCollection;\n  }\n\n  get canDeleteAnyCollection() {\n    return this.isAdmin || this.permissions.deleteAnyCollection;\n  }\n\n  get canViewAllCollections() {\n    return this.canCreateNewCollections || this.canEditAnyCollection || this.canDeleteAnyCollection;\n  }\n\n  get canEditAssignedCollections() {\n    return this.isManager || this.permissions.editAssignedCollections;\n  }\n\n  get canDeleteAssignedCollections() {\n    return this.isManager || this.permissions.deleteAssignedCollections;\n  }\n\n  get canViewAssignedCollections() {\n    return this.canDeleteAssignedCollections || this.canEditAssignedCollections;\n  }\n\n  get canManageGroups() {\n    return (this.isAdmin || this.permissions.manageGroups) && this.useGroups;\n  }\n\n  get canManageSso() {\n    return (this.isAdmin || this.permissions.manageSso) && this.useSso;\n  }\n\n  get canManageScim() {\n    return (this.isAdmin || this.permissions.manageScim) && this.useScim;\n  }\n\n  get canManagePolicies() {\n    return (this.isAdmin || this.permissions.managePolicies) && this.usePolicies;\n  }\n\n  get canManageUsers() {\n    return this.isAdmin || this.permissions.manageUsers;\n  }\n\n  get canManageUsersPassword() {\n    return this.isAdmin || this.permissions.manageResetPassword;\n  }\n\n  get isExemptFromPolicies() {\n    return this.canManagePolicies;\n  }\n\n  get canManageBilling() {\n    return this.isOwner && (this.isProviderUser || !this.hasProvider);\n  }\n\n  get hasProvider() {\n    return this.providerId != null || this.providerName != null;\n  }\n\n  get canAccessSecretsManager() {\n    return this.useSecretsManager && this.accessSecretsManager;\n  }\n\n  static fromJSON(json: Jsonify<Organization>) {\n    if (json == null) {\n      return null;\n    }\n\n    return Object.assign(new Organization(), json, {\n      familySponsorshipLastSyncDate: new Date(json.familySponsorshipLastSyncDate),\n      familySponsorshipValidUntil: new Date(json.familySponsorshipValidUntil),\n    });\n  }\n}\n","import { BehaviorSubject, concatMap } from \"rxjs\";\n\nimport { InternalOrganizationService as InternalOrganizationServiceAbstraction } from \"../../abstractions/organization/organization.service.abstraction\";\nimport { StateService } from \"../../abstractions/state.service\";\nimport { OrganizationData } from \"../../models/data/organization.data\";\nimport { Organization } from \"../../models/domain/organization\";\n\nexport class OrganizationService implements InternalOrganizationServiceAbstraction {\n  protected _organizations = new BehaviorSubject<Organization[]>([]);\n\n  organizations$ = this._organizations.asObservable();\n\n  constructor(private stateService: StateService) {\n    this.stateService.activeAccountUnlocked$\n      .pipe(\n        concatMap(async (unlocked) => {\n          if (!unlocked) {\n            this._organizations.next([]);\n            return;\n          }\n\n          const data = await this.stateService.getOrganizations();\n          this.updateObservables(data);\n        })\n      )\n      .subscribe();\n  }\n\n  async getAll(userId?: string): Promise<Organization[]> {\n    const organizationsMap = await this.stateService.getOrganizations({ userId: userId });\n    return Object.values(organizationsMap || {}).map((o) => new Organization(o));\n  }\n\n  async canManageSponsorships(): Promise<boolean> {\n    const organizations = this._organizations.getValue();\n    return organizations.some(\n      (o) => o.familySponsorshipAvailable || o.familySponsorshipFriendlyName !== null\n    );\n  }\n\n  hasOrganizations(): boolean {\n    const organizations = this._organizations.getValue();\n    return organizations.length > 0;\n  }\n\n  async upsert(organization: OrganizationData): Promise<void> {\n    let organizations = await this.stateService.getOrganizations();\n    if (organizations == null) {\n      organizations = {};\n    }\n\n    organizations[organization.id] = organization;\n\n    await this.replace(organizations);\n  }\n\n  async delete(id: string): Promise<void> {\n    const organizations = await this.stateService.getOrganizations();\n    if (organizations == null) {\n      return;\n    }\n\n    if (organizations[id] == null) {\n      return;\n    }\n\n    delete organizations[id];\n    await this.replace(organizations);\n  }\n\n  get(id: string): Organization {\n    const organizations = this._organizations.getValue();\n\n    return organizations.find((organization) => organization.id === id);\n  }\n\n  /**\n   * @deprecated For the CLI only\n   * @param id id of the organization\n   */\n  async getFromState(id: string): Promise<Organization> {\n    const organizationsMap = await this.stateService.getOrganizations();\n    const organization = organizationsMap[id];\n    if (organization == null) {\n      return null;\n    }\n\n    return new Organization(organization);\n  }\n\n  getByIdentifier(identifier: string): Organization {\n    const organizations = this._organizations.getValue();\n\n    return organizations.find((organization) => organization.identifier === identifier);\n  }\n\n  async replace(organizations: { [id: string]: OrganizationData }) {\n    await this.stateService.setOrganizations(organizations);\n    this.updateObservables(organizations);\n  }\n\n  private updateObservables(organizationsMap: { [id: string]: OrganizationData }) {\n    const organizations = Object.values(organizationsMap || {}).map((o) => new Organization(o));\n    this._organizations.next(organizations);\n  }\n}\n","export class GeneratedPasswordHistory {\n  password: string;\n  date: number;\n\n  constructor(password: string, date: number) {\n    this.password = password;\n    this.date = date;\n  }\n}\n","import Domain from \"./domain-base\";\n\nexport class PasswordGeneratorPolicyOptions extends Domain {\n  defaultType = \"\";\n  minLength = 0;\n  useUppercase = false;\n  useLowercase = false;\n  useNumbers = false;\n  numberCount = 0;\n  useSpecial = false;\n  specialCount = 0;\n  minNumberWords = 0;\n  capitalize = false;\n  includeNumber = false;\n\n  inEffect() {\n    return (\n      this.defaultType !== \"\" ||\n      this.minLength > 0 ||\n      this.numberCount > 0 ||\n      this.specialCount > 0 ||\n      this.useUppercase ||\n      this.useLowercase ||\n      this.useNumbers ||\n      this.useSpecial ||\n      this.minNumberWords > 0 ||\n      this.capitalize ||\n      this.includeNumber\n    );\n  }\n}\n","import * as zxcvbn from \"zxcvbn\";\n\nimport { CryptoService } from \"../abstractions/crypto.service\";\nimport { PasswordGenerationService as PasswordGenerationServiceAbstraction } from \"../abstractions/passwordGeneration.service\";\nimport { PolicyService } from \"../abstractions/policy/policy.service.abstraction\";\nimport { StateService } from \"../abstractions/state.service\";\nimport { PolicyType } from \"../enums/policyType\";\nimport { EFFLongWordList } from \"../misc/wordlist\";\nimport { EncString } from \"../models/domain/enc-string\";\nimport { GeneratedPasswordHistory } from \"../models/domain/generated-password-history\";\nimport { PasswordGeneratorOptions } from \"../models/domain/password-generator-options\";\nimport { PasswordGeneratorPolicyOptions } from \"../models/domain/password-generator-policy-options\";\n\nconst DefaultOptions: PasswordGeneratorOptions = {\n  length: 14,\n  ambiguous: false,\n  number: true,\n  minNumber: 1,\n  uppercase: true,\n  minUppercase: 0,\n  lowercase: true,\n  minLowercase: 0,\n  special: false,\n  minSpecial: 1,\n  type: \"password\",\n  numWords: 3,\n  wordSeparator: \"-\",\n  capitalize: false,\n  includeNumber: false,\n};\n\nconst MaxPasswordsInHistory = 100;\n\nexport class PasswordGenerationService implements PasswordGenerationServiceAbstraction {\n  constructor(\n    private cryptoService: CryptoService,\n    private policyService: PolicyService,\n    private stateService: StateService\n  ) {}\n\n  async generatePassword(options: PasswordGeneratorOptions): Promise<string> {\n    // overload defaults with given options\n    const o = Object.assign({}, DefaultOptions, options);\n\n    if (o.type === \"passphrase\") {\n      return this.generatePassphrase(options);\n    }\n\n    // sanitize\n    this.sanitizePasswordLength(o, true);\n\n    const minLength: number = o.minUppercase + o.minLowercase + o.minNumber + o.minSpecial;\n    if (o.length < minLength) {\n      o.length = minLength;\n    }\n\n    const positions: string[] = [];\n    if (o.lowercase && o.minLowercase > 0) {\n      for (let i = 0; i < o.minLowercase; i++) {\n        positions.push(\"l\");\n      }\n    }\n    if (o.uppercase && o.minUppercase > 0) {\n      for (let i = 0; i < o.minUppercase; i++) {\n        positions.push(\"u\");\n      }\n    }\n    if (o.number && o.minNumber > 0) {\n      for (let i = 0; i < o.minNumber; i++) {\n        positions.push(\"n\");\n      }\n    }\n    if (o.special && o.minSpecial > 0) {\n      for (let i = 0; i < o.minSpecial; i++) {\n        positions.push(\"s\");\n      }\n    }\n    while (positions.length < o.length) {\n      positions.push(\"a\");\n    }\n\n    // shuffle\n    await this.shuffleArray(positions);\n\n    // build out the char sets\n    let allCharSet = \"\";\n\n    let lowercaseCharSet = \"abcdefghijkmnopqrstuvwxyz\";\n    if (o.ambiguous) {\n      lowercaseCharSet += \"l\";\n    }\n    if (o.lowercase) {\n      allCharSet += lowercaseCharSet;\n    }\n\n    let uppercaseCharSet = \"ABCDEFGHJKLMNPQRSTUVWXYZ\";\n    if (o.ambiguous) {\n      uppercaseCharSet += \"IO\";\n    }\n    if (o.uppercase) {\n      allCharSet += uppercaseCharSet;\n    }\n\n    let numberCharSet = \"23456789\";\n    if (o.ambiguous) {\n      numberCharSet += \"01\";\n    }\n    if (o.number) {\n      allCharSet += numberCharSet;\n    }\n\n    const specialCharSet = \"!@#$%^&*\";\n    if (o.special) {\n      allCharSet += specialCharSet;\n    }\n\n    let password = \"\";\n    for (let i = 0; i < o.length; i++) {\n      let positionChars: string;\n      switch (positions[i]) {\n        case \"l\":\n          positionChars = lowercaseCharSet;\n          break;\n        case \"u\":\n          positionChars = uppercaseCharSet;\n          break;\n        case \"n\":\n          positionChars = numberCharSet;\n          break;\n        case \"s\":\n          positionChars = specialCharSet;\n          break;\n        case \"a\":\n          positionChars = allCharSet;\n          break;\n        default:\n          break;\n      }\n\n      const randomCharIndex = await this.cryptoService.randomNumber(0, positionChars.length - 1);\n      password += positionChars.charAt(randomCharIndex);\n    }\n\n    return password;\n  }\n\n  async generatePassphrase(options: PasswordGeneratorOptions): Promise<string> {\n    const o = Object.assign({}, DefaultOptions, options);\n\n    if (o.numWords == null || o.numWords <= 2) {\n      o.numWords = DefaultOptions.numWords;\n    }\n    if (o.wordSeparator == null || o.wordSeparator.length === 0 || o.wordSeparator.length > 1) {\n      o.wordSeparator = \" \";\n    }\n    if (o.capitalize == null) {\n      o.capitalize = false;\n    }\n    if (o.includeNumber == null) {\n      o.includeNumber = false;\n    }\n\n    const listLength = EFFLongWordList.length - 1;\n    const wordList = new Array(o.numWords);\n    for (let i = 0; i < o.numWords; i++) {\n      const wordIndex = await this.cryptoService.randomNumber(0, listLength);\n      if (o.capitalize) {\n        wordList[i] = this.capitalize(EFFLongWordList[wordIndex]);\n      } else {\n        wordList[i] = EFFLongWordList[wordIndex];\n      }\n    }\n\n    if (o.includeNumber) {\n      await this.appendRandomNumberToRandomWord(wordList);\n    }\n    return wordList.join(o.wordSeparator);\n  }\n\n  async getOptions(): Promise<[PasswordGeneratorOptions, PasswordGeneratorPolicyOptions]> {\n    let options = await this.stateService.getPasswordGenerationOptions();\n    if (options == null) {\n      options = Object.assign({}, DefaultOptions);\n    } else {\n      options = Object.assign({}, DefaultOptions, options);\n    }\n    await this.stateService.setPasswordGenerationOptions(options);\n    const enforcedOptions = await this.enforcePasswordGeneratorPoliciesOnOptions(options);\n    options = enforcedOptions[0];\n    return [options, enforcedOptions[1]];\n  }\n\n  async enforcePasswordGeneratorPoliciesOnOptions(\n    options: PasswordGeneratorOptions\n  ): Promise<[PasswordGeneratorOptions, PasswordGeneratorPolicyOptions]> {\n    let enforcedPolicyOptions = await this.getPasswordGeneratorPolicyOptions();\n    if (enforcedPolicyOptions != null) {\n      if (options.length < enforcedPolicyOptions.minLength) {\n        options.length = enforcedPolicyOptions.minLength;\n      }\n\n      if (enforcedPolicyOptions.useUppercase) {\n        options.uppercase = true;\n      }\n\n      if (enforcedPolicyOptions.useLowercase) {\n        options.lowercase = true;\n      }\n\n      if (enforcedPolicyOptions.useNumbers) {\n        options.number = true;\n      }\n\n      if (options.minNumber < enforcedPolicyOptions.numberCount) {\n        options.minNumber = enforcedPolicyOptions.numberCount;\n      }\n\n      if (enforcedPolicyOptions.useSpecial) {\n        options.special = true;\n      }\n\n      if (options.minSpecial < enforcedPolicyOptions.specialCount) {\n        options.minSpecial = enforcedPolicyOptions.specialCount;\n      }\n\n      // Must normalize these fields because the receiving call expects all options to pass the current rules\n      if (options.minSpecial + options.minNumber > options.length) {\n        options.minSpecial = options.length - options.minNumber;\n      }\n\n      if (options.numWords < enforcedPolicyOptions.minNumberWords) {\n        options.numWords = enforcedPolicyOptions.minNumberWords;\n      }\n\n      if (enforcedPolicyOptions.capitalize) {\n        options.capitalize = true;\n      }\n\n      if (enforcedPolicyOptions.includeNumber) {\n        options.includeNumber = true;\n      }\n\n      // Force default type if password/passphrase selected via policy\n      if (\n        enforcedPolicyOptions.defaultType === \"password\" ||\n        enforcedPolicyOptions.defaultType === \"passphrase\"\n      ) {\n        options.type = enforcedPolicyOptions.defaultType;\n      }\n    } else {\n      // UI layer expects an instantiated object to prevent more explicit null checks\n      enforcedPolicyOptions = new PasswordGeneratorPolicyOptions();\n    }\n    return [options, enforcedPolicyOptions];\n  }\n\n  async getPasswordGeneratorPolicyOptions(): Promise<PasswordGeneratorPolicyOptions> {\n    const policies = await this.policyService?.getAll(PolicyType.PasswordGenerator);\n    let enforcedOptions: PasswordGeneratorPolicyOptions = null;\n\n    if (policies == null || policies.length === 0) {\n      return enforcedOptions;\n    }\n\n    policies.forEach((currentPolicy) => {\n      if (!currentPolicy.enabled || currentPolicy.data == null) {\n        return;\n      }\n\n      if (enforcedOptions == null) {\n        enforcedOptions = new PasswordGeneratorPolicyOptions();\n      }\n\n      // Password wins in multi-org collisions\n      if (currentPolicy.data.defaultType != null && enforcedOptions.defaultType !== \"password\") {\n        enforcedOptions.defaultType = currentPolicy.data.defaultType;\n      }\n\n      if (\n        currentPolicy.data.minLength != null &&\n        currentPolicy.data.minLength > enforcedOptions.minLength\n      ) {\n        enforcedOptions.minLength = currentPolicy.data.minLength;\n      }\n\n      if (currentPolicy.data.useUpper) {\n        enforcedOptions.useUppercase = true;\n      }\n\n      if (currentPolicy.data.useLower) {\n        enforcedOptions.useLowercase = true;\n      }\n\n      if (currentPolicy.data.useNumbers) {\n        enforcedOptions.useNumbers = true;\n      }\n\n      if (\n        currentPolicy.data.minNumbers != null &&\n        currentPolicy.data.minNumbers > enforcedOptions.numberCount\n      ) {\n        enforcedOptions.numberCount = currentPolicy.data.minNumbers;\n      }\n\n      if (currentPolicy.data.useSpecial) {\n        enforcedOptions.useSpecial = true;\n      }\n\n      if (\n        currentPolicy.data.minSpecial != null &&\n        currentPolicy.data.minSpecial > enforcedOptions.specialCount\n      ) {\n        enforcedOptions.specialCount = currentPolicy.data.minSpecial;\n      }\n\n      if (\n        currentPolicy.data.minNumberWords != null &&\n        currentPolicy.data.minNumberWords > enforcedOptions.minNumberWords\n      ) {\n        enforcedOptions.minNumberWords = currentPolicy.data.minNumberWords;\n      }\n\n      if (currentPolicy.data.capitalize) {\n        enforcedOptions.capitalize = true;\n      }\n\n      if (currentPolicy.data.includeNumber) {\n        enforcedOptions.includeNumber = true;\n      }\n    });\n\n    return enforcedOptions;\n  }\n\n  async saveOptions(options: PasswordGeneratorOptions) {\n    await this.stateService.setPasswordGenerationOptions(options);\n  }\n\n  async getHistory(): Promise<GeneratedPasswordHistory[]> {\n    const hasKey = await this.cryptoService.hasKey();\n    if (!hasKey) {\n      return new Array<GeneratedPasswordHistory>();\n    }\n\n    if ((await this.stateService.getDecryptedPasswordGenerationHistory()) == null) {\n      const encrypted = await this.stateService.getEncryptedPasswordGenerationHistory();\n      const decrypted = await this.decryptHistory(encrypted);\n      await this.stateService.setDecryptedPasswordGenerationHistory(decrypted);\n    }\n\n    const passwordGenerationHistory =\n      await this.stateService.getDecryptedPasswordGenerationHistory();\n    return passwordGenerationHistory != null\n      ? passwordGenerationHistory\n      : new Array<GeneratedPasswordHistory>();\n  }\n\n  async addHistory(password: string): Promise<void> {\n    // Cannot add new history if no key is available\n    const hasKey = await this.cryptoService.hasKey();\n    if (!hasKey) {\n      return;\n    }\n\n    const currentHistory = await this.getHistory();\n\n    // Prevent duplicates\n    if (this.matchesPrevious(password, currentHistory)) {\n      return;\n    }\n\n    currentHistory.unshift(new GeneratedPasswordHistory(password, Date.now()));\n\n    // Remove old items.\n    if (currentHistory.length > MaxPasswordsInHistory) {\n      currentHistory.pop();\n    }\n\n    const newHistory = await this.encryptHistory(currentHistory);\n    await this.stateService.setDecryptedPasswordGenerationHistory(currentHistory);\n    return await this.stateService.setEncryptedPasswordGenerationHistory(newHistory);\n  }\n\n  async clear(userId?: string): Promise<void> {\n    await this.stateService.setEncryptedPasswordGenerationHistory(null, { userId: userId });\n    await this.stateService.setDecryptedPasswordGenerationHistory(null, { userId: userId });\n  }\n\n  passwordStrength(password: string, userInputs: string[] = null): zxcvbn.ZXCVBNResult {\n    if (password == null || password.length === 0) {\n      return null;\n    }\n    let globalUserInputs = [\"bitwarden\", \"bit\", \"warden\"];\n    if (userInputs != null && userInputs.length > 0) {\n      globalUserInputs = globalUserInputs.concat(userInputs);\n    }\n    // Use a hash set to get rid of any duplicate user inputs\n    const finalUserInputs = Array.from(new Set(globalUserInputs));\n    const result = zxcvbn(password, finalUserInputs);\n    return result;\n  }\n\n  normalizeOptions(\n    options: PasswordGeneratorOptions,\n    enforcedPolicyOptions: PasswordGeneratorPolicyOptions\n  ) {\n    options.minLowercase = 0;\n    options.minUppercase = 0;\n\n    if (!options.length || options.length < 5) {\n      options.length = 5;\n    } else if (options.length > 128) {\n      options.length = 128;\n    }\n\n    if (options.length < enforcedPolicyOptions.minLength) {\n      options.length = enforcedPolicyOptions.minLength;\n    }\n\n    if (!options.minNumber) {\n      options.minNumber = 0;\n    } else if (options.minNumber > options.length) {\n      options.minNumber = options.length;\n    } else if (options.minNumber > 9) {\n      options.minNumber = 9;\n    }\n\n    if (options.minNumber < enforcedPolicyOptions.numberCount) {\n      options.minNumber = enforcedPolicyOptions.numberCount;\n    }\n\n    if (!options.minSpecial) {\n      options.minSpecial = 0;\n    } else if (options.minSpecial > options.length) {\n      options.minSpecial = options.length;\n    } else if (options.minSpecial > 9) {\n      options.minSpecial = 9;\n    }\n\n    if (options.minSpecial < enforcedPolicyOptions.specialCount) {\n      options.minSpecial = enforcedPolicyOptions.specialCount;\n    }\n\n    if (options.minSpecial + options.minNumber > options.length) {\n      options.minSpecial = options.length - options.minNumber;\n    }\n\n    if (options.numWords == null || options.length < 3) {\n      options.numWords = 3;\n    } else if (options.numWords > 20) {\n      options.numWords = 20;\n    }\n\n    if (options.numWords < enforcedPolicyOptions.minNumberWords) {\n      options.numWords = enforcedPolicyOptions.minNumberWords;\n    }\n\n    if (options.wordSeparator != null && options.wordSeparator.length > 1) {\n      options.wordSeparator = options.wordSeparator[0];\n    }\n\n    this.sanitizePasswordLength(options, false);\n  }\n\n  private capitalize(str: string) {\n    return str.charAt(0).toUpperCase() + str.slice(1);\n  }\n\n  private async appendRandomNumberToRandomWord(wordList: string[]) {\n    if (wordList == null || wordList.length <= 0) {\n      return;\n    }\n    const index = await this.cryptoService.randomNumber(0, wordList.length - 1);\n    const num = await this.cryptoService.randomNumber(0, 9);\n    wordList[index] = wordList[index] + num;\n  }\n\n  private async encryptHistory(\n    history: GeneratedPasswordHistory[]\n  ): Promise<GeneratedPasswordHistory[]> {\n    if (history == null || history.length === 0) {\n      return Promise.resolve([]);\n    }\n\n    const promises = history.map(async (item) => {\n      const encrypted = await this.cryptoService.encrypt(item.password);\n      return new GeneratedPasswordHistory(encrypted.encryptedString, item.date);\n    });\n\n    return await Promise.all(promises);\n  }\n\n  private async decryptHistory(\n    history: GeneratedPasswordHistory[]\n  ): Promise<GeneratedPasswordHistory[]> {\n    if (history == null || history.length === 0) {\n      return Promise.resolve([]);\n    }\n\n    const promises = history.map(async (item) => {\n      const decrypted = await this.cryptoService.decryptToUtf8(new EncString(item.password));\n      return new GeneratedPasswordHistory(decrypted, item.date);\n    });\n\n    return await Promise.all(promises);\n  }\n\n  private matchesPrevious(password: string, history: GeneratedPasswordHistory[]): boolean {\n    if (history == null || history.length === 0) {\n      return false;\n    }\n\n    return history[history.length - 1].password === password;\n  }\n\n  // ref: https://stackoverflow.com/a/12646864/1090359\n  private async shuffleArray(array: string[]) {\n    for (let i = array.length - 1; i > 0; i--) {\n      const j = await this.cryptoService.randomNumber(0, i);\n      [array[i], array[j]] = [array[j], array[i]];\n    }\n  }\n\n  private sanitizePasswordLength(options: any, forGeneration: boolean) {\n    let minUppercaseCalc = 0;\n    let minLowercaseCalc = 0;\n    let minNumberCalc: number = options.minNumber;\n    let minSpecialCalc: number = options.minSpecial;\n\n    if (options.uppercase && options.minUppercase <= 0) {\n      minUppercaseCalc = 1;\n    } else if (!options.uppercase) {\n      minUppercaseCalc = 0;\n    }\n\n    if (options.lowercase && options.minLowercase <= 0) {\n      minLowercaseCalc = 1;\n    } else if (!options.lowercase) {\n      minLowercaseCalc = 0;\n    }\n\n    if (options.number && options.minNumber <= 0) {\n      minNumberCalc = 1;\n    } else if (!options.number) {\n      minNumberCalc = 0;\n    }\n\n    if (options.special && options.minSpecial <= 0) {\n      minSpecialCalc = 1;\n    } else if (!options.special) {\n      minSpecialCalc = 0;\n    }\n\n    // This should never happen but is a final safety net\n    if (!options.length || options.length < 1) {\n      options.length = 10;\n    }\n\n    const minLength: number = minUppercaseCalc + minLowercaseCalc + minNumberCalc + minSpecialCalc;\n    // Normalize and Generation both require this modification\n    if (options.length < minLength) {\n      options.length = minLength;\n    }\n\n    // Apply other changes if the options object passed in is for generation\n    if (forGeneration) {\n      options.minUppercase = minUppercaseCalc;\n      options.minLowercase = minLowercaseCalc;\n      options.minNumber = minNumberCalc;\n      options.minSpecial = minSpecialCalc;\n    }\n  }\n}\n","import { PolicyType } from \"../../enums/policyType\";\nimport { PolicyResponse } from \"../response/policy.response\";\n\nexport class PolicyData {\n  id: string;\n  organizationId: string;\n  type: PolicyType;\n  data: any;\n  enabled: boolean;\n\n  constructor(response: PolicyResponse) {\n    this.id = response.id;\n    this.organizationId = response.organizationId;\n    this.type = response.type;\n    this.data = response.data;\n    this.enabled = response.enabled;\n  }\n}\n","import { firstValueFrom } from \"rxjs\";\n\nimport { ApiService } from \"../../abstractions/api.service\";\nimport { PolicyApiServiceAbstraction } from \"../../abstractions/policy/policy-api.service.abstraction\";\nimport { InternalPolicyService } from \"../../abstractions/policy/policy.service.abstraction\";\nimport { StateService } from \"../../abstractions/state.service\";\nimport { PolicyType } from \"../../enums/policyType\";\nimport { Utils } from \"../../misc/utils\";\nimport { PolicyData } from \"../../models/data/policy.data\";\nimport { MasterPasswordPolicyOptions } from \"../../models/domain/master-password-policy-options\";\nimport { PolicyRequest } from \"../../models/request/policy.request\";\nimport { ListResponse } from \"../../models/response/list.response\";\nimport { PolicyResponse } from \"../../models/response/policy.response\";\n\nexport class PolicyApiService implements PolicyApiServiceAbstraction {\n  constructor(\n    private policyService: InternalPolicyService,\n    private apiService: ApiService,\n    private stateService: StateService\n  ) {}\n\n  async getPolicy(organizationId: string, type: PolicyType): Promise<PolicyResponse> {\n    const r = await this.apiService.send(\n      \"GET\",\n      \"/organizations/\" + organizationId + \"/policies/\" + type,\n      null,\n      true,\n      true\n    );\n    return new PolicyResponse(r);\n  }\n\n  async getPolicies(organizationId: string): Promise<ListResponse<PolicyResponse>> {\n    const r = await this.apiService.send(\n      \"GET\",\n      \"/organizations/\" + organizationId + \"/policies\",\n      null,\n      true,\n      true\n    );\n    return new ListResponse(r, PolicyResponse);\n  }\n\n  async getPoliciesByToken(\n    organizationId: string,\n    token: string,\n    email: string,\n    organizationUserId: string\n  ): Promise<ListResponse<PolicyResponse>> {\n    const r = await this.apiService.send(\n      \"GET\",\n      \"/organizations/\" +\n        organizationId +\n        \"/policies/token?\" +\n        \"token=\" +\n        encodeURIComponent(token) +\n        \"&email=\" +\n        Utils.encodeRFC3986URIComponent(email) +\n        \"&organizationUserId=\" +\n        organizationUserId,\n      null,\n      false,\n      true\n    );\n    return new ListResponse(r, PolicyResponse);\n  }\n\n  async getPoliciesByInvitedUser(\n    organizationId: string,\n    userId: string\n  ): Promise<ListResponse<PolicyResponse>> {\n    const r = await this.apiService.send(\n      \"GET\",\n      \"/organizations/\" + organizationId + \"/policies/invited-user?\" + \"userId=\" + userId,\n      null,\n      false,\n      true\n    );\n    return new ListResponse(r, PolicyResponse);\n  }\n\n  async getMasterPasswordPoliciesForInvitedUsers(\n    orgId: string\n  ): Promise<MasterPasswordPolicyOptions> {\n    const userId = await this.stateService.getUserId();\n    const response = await this.getPoliciesByInvitedUser(orgId, userId);\n    const policies = await this.policyService.mapPoliciesFromToken(response);\n    return await firstValueFrom(this.policyService.masterPasswordPolicyOptions$(policies));\n  }\n\n  async putPolicy(organizationId: string, type: PolicyType, request: PolicyRequest): Promise<any> {\n    const r = await this.apiService.send(\n      \"PUT\",\n      \"/organizations/\" + organizationId + \"/policies/\" + type,\n      request,\n      true,\n      true\n    );\n    const response = new PolicyResponse(r);\n    const data = new PolicyData(response);\n    await this.policyService.upsert(data);\n  }\n}\n","import { PolicyType } from \"../../enums/policyType\";\nimport { PolicyData } from \"../data/policy.data\";\n\nimport Domain from \"./domain-base\";\n\nexport class Policy extends Domain {\n  id: string;\n  organizationId: string;\n  type: PolicyType;\n  data: any;\n  enabled: boolean;\n\n  constructor(obj?: PolicyData) {\n    super();\n    if (obj == null) {\n      return;\n    }\n\n    this.id = obj.id;\n    this.organizationId = obj.organizationId;\n    this.type = obj.type;\n    this.data = obj.data;\n    this.enabled = obj.enabled;\n  }\n}\n","import Domain from \"./domain-base\";\n\nexport class ResetPasswordPolicyOptions extends Domain {\n  autoEnrollEnabled = false;\n}\n","export enum ProviderUserStatusType {\n  Invited = 0,\n  Accepted = 1,\n  Confirmed = 2,\n  Revoked = -1, // Not used, compile-time support only\n}\n","export enum ProviderUserType {\n  ProviderAdmin = 0,\n  ServiceUser = 1,\n}\n","import { of, concatMap, BehaviorSubject, Observable, map } from \"rxjs\";\n\nimport { OrganizationService } from \"../../abstractions/organization/organization.service.abstraction\";\nimport { InternalPolicyService as InternalPolicyServiceAbstraction } from \"../../abstractions/policy/policy.service.abstraction\";\nimport { StateService } from \"../../abstractions/state.service\";\nimport { OrganizationUserStatusType } from \"../../enums/organizationUserStatusType\";\nimport { OrganizationUserType } from \"../../enums/organizationUserType\";\nimport { PolicyType } from \"../../enums/policyType\";\nimport { Utils } from \"../../misc/utils\";\nimport { PolicyData } from \"../../models/data/policy.data\";\nimport { MasterPasswordPolicyOptions } from \"../../models/domain/master-password-policy-options\";\nimport { Organization } from \"../../models/domain/organization\";\nimport { Policy } from \"../../models/domain/policy\";\nimport { ResetPasswordPolicyOptions } from \"../../models/domain/reset-password-policy-options\";\nimport { ListResponse } from \"../../models/response/list.response\";\nimport { PolicyResponse } from \"../../models/response/policy.response\";\n\nexport class PolicyService implements InternalPolicyServiceAbstraction {\n  protected _policies: BehaviorSubject<Policy[]> = new BehaviorSubject([]);\n\n  policies$ = this._policies.asObservable();\n\n  constructor(\n    private stateService: StateService,\n    private organizationService: OrganizationService\n  ) {\n    this.stateService.activeAccountUnlocked$\n      .pipe(\n        concatMap(async (unlocked) => {\n          if (Utils.global.bitwardenContainerService == null) {\n            return;\n          }\n\n          if (!unlocked) {\n            this._policies.next([]);\n            return;\n          }\n\n          const data = await this.stateService.getEncryptedPolicies();\n\n          await this.updateObservables(data);\n        })\n      )\n      .subscribe();\n  }\n\n  /**\n   * @deprecated Do not call this, use the policies$ observable collection\n   */\n  async getAll(type?: PolicyType, userId?: string): Promise<Policy[]> {\n    let response: Policy[] = [];\n    const decryptedPolicies = await this.stateService.getDecryptedPolicies({ userId: userId });\n    if (decryptedPolicies != null) {\n      response = decryptedPolicies;\n    } else {\n      const diskPolicies = await this.stateService.getEncryptedPolicies({ userId: userId });\n      for (const id in diskPolicies) {\n        if (Object.prototype.hasOwnProperty.call(diskPolicies, id)) {\n          response.push(new Policy(diskPolicies[id]));\n        }\n      }\n      await this.stateService.setDecryptedPolicies(response, { userId: userId });\n    }\n    if (type != null) {\n      return response.filter((policy) => policy.type === type);\n    } else {\n      return response;\n    }\n  }\n\n  masterPasswordPolicyOptions$(policies?: Policy[]): Observable<MasterPasswordPolicyOptions> {\n    const observable = policies ? of(policies) : this.policies$;\n    return observable.pipe(\n      map((obsPolicies) => {\n        let enforcedOptions: MasterPasswordPolicyOptions = null;\n        const filteredPolicies = obsPolicies.filter((p) => p.type === PolicyType.MasterPassword);\n\n        if (filteredPolicies == null || filteredPolicies.length === 0) {\n          return enforcedOptions;\n        }\n\n        filteredPolicies.forEach((currentPolicy) => {\n          if (!currentPolicy.enabled || currentPolicy.data == null) {\n            return;\n          }\n\n          if (enforcedOptions == null) {\n            enforcedOptions = new MasterPasswordPolicyOptions();\n          }\n\n          if (\n            currentPolicy.data.minComplexity != null &&\n            currentPolicy.data.minComplexity > enforcedOptions.minComplexity\n          ) {\n            enforcedOptions.minComplexity = currentPolicy.data.minComplexity;\n          }\n\n          if (\n            currentPolicy.data.minLength != null &&\n            currentPolicy.data.minLength > enforcedOptions.minLength\n          ) {\n            enforcedOptions.minLength = currentPolicy.data.minLength;\n          }\n\n          if (currentPolicy.data.requireUpper) {\n            enforcedOptions.requireUpper = true;\n          }\n\n          if (currentPolicy.data.requireLower) {\n            enforcedOptions.requireLower = true;\n          }\n\n          if (currentPolicy.data.requireNumbers) {\n            enforcedOptions.requireNumbers = true;\n          }\n\n          if (currentPolicy.data.requireSpecial) {\n            enforcedOptions.requireSpecial = true;\n          }\n        });\n\n        return enforcedOptions;\n      })\n    );\n  }\n\n  policyAppliesToActiveUser$(policyType: PolicyType, policyFilter?: (policy: Policy) => boolean) {\n    return this.policies$.pipe(\n      concatMap(async (policies) => {\n        const userId = await this.stateService.getUserId();\n        return await this.checkPoliciesThatApplyToUser(policies, policyType, policyFilter, userId);\n      })\n    );\n  }\n\n  evaluateMasterPassword(\n    passwordStrength: number,\n    newPassword: string,\n    enforcedPolicyOptions: MasterPasswordPolicyOptions\n  ): boolean {\n    if (enforcedPolicyOptions == null) {\n      return true;\n    }\n\n    if (\n      enforcedPolicyOptions.minComplexity > 0 &&\n      enforcedPolicyOptions.minComplexity > passwordStrength\n    ) {\n      return false;\n    }\n\n    if (\n      enforcedPolicyOptions.minLength > 0 &&\n      enforcedPolicyOptions.minLength > newPassword.length\n    ) {\n      return false;\n    }\n\n    if (enforcedPolicyOptions.requireUpper && newPassword.toLocaleLowerCase() === newPassword) {\n      return false;\n    }\n\n    if (enforcedPolicyOptions.requireLower && newPassword.toLocaleUpperCase() === newPassword) {\n      return false;\n    }\n\n    if (enforcedPolicyOptions.requireNumbers && !/[0-9]/.test(newPassword)) {\n      return false;\n    }\n\n    // eslint-disable-next-line\n    if (enforcedPolicyOptions.requireSpecial && !/[!@#$%\\^&*]/g.test(newPassword)) {\n      return false;\n    }\n\n    return true;\n  }\n\n  getResetPasswordPolicyOptions(\n    policies: Policy[],\n    orgId: string\n  ): [ResetPasswordPolicyOptions, boolean] {\n    const resetPasswordPolicyOptions = new ResetPasswordPolicyOptions();\n\n    if (policies == null || orgId == null) {\n      return [resetPasswordPolicyOptions, false];\n    }\n\n    const policy = policies.find(\n      (p) => p.organizationId === orgId && p.type === PolicyType.ResetPassword && p.enabled\n    );\n    resetPasswordPolicyOptions.autoEnrollEnabled = policy?.data?.autoEnrollEnabled ?? false;\n\n    return [resetPasswordPolicyOptions, policy?.enabled ?? false];\n  }\n\n  mapPoliciesFromToken(policiesResponse: ListResponse<PolicyResponse>): Policy[] {\n    if (policiesResponse == null || policiesResponse.data == null) {\n      return null;\n    }\n\n    const policiesData = policiesResponse.data.map((p) => new PolicyData(p));\n    return policiesData.map((p) => new Policy(p));\n  }\n\n  async policyAppliesToUser(\n    policyType: PolicyType,\n    policyFilter?: (policy: Policy) => boolean,\n    userId?: string\n  ) {\n    const policies = await this.getAll(policyType, userId);\n\n    return this.checkPoliciesThatApplyToUser(policies, policyType, policyFilter, userId);\n  }\n\n  async upsert(policy: PolicyData): Promise<any> {\n    let policies = await this.stateService.getEncryptedPolicies();\n    if (policies == null) {\n      policies = {};\n    }\n\n    policies[policy.id] = policy;\n\n    await this.updateObservables(policies);\n    await this.stateService.setDecryptedPolicies(null);\n    await this.stateService.setEncryptedPolicies(policies);\n  }\n\n  async replace(policies: { [id: string]: PolicyData }): Promise<void> {\n    await this.updateObservables(policies);\n    await this.stateService.setDecryptedPolicies(null);\n    await this.stateService.setEncryptedPolicies(policies);\n  }\n\n  async clear(userId?: string): Promise<void> {\n    if (userId == null || userId == (await this.stateService.getUserId())) {\n      this._policies.next([]);\n    }\n    await this.stateService.setDecryptedPolicies(null, { userId: userId });\n    await this.stateService.setEncryptedPolicies(null, { userId: userId });\n  }\n\n  private isExcemptFromPolicies(organization: Organization, policyType: PolicyType) {\n    if (policyType === PolicyType.MaximumVaultTimeout) {\n      return organization.type === OrganizationUserType.Owner;\n    }\n\n    return organization.isExemptFromPolicies;\n  }\n\n  private async updateObservables(policiesMap: { [id: string]: PolicyData }) {\n    const policies = Object.values(policiesMap || {}).map((f) => new Policy(f));\n\n    this._policies.next(policies);\n  }\n\n  private async checkPoliciesThatApplyToUser(\n    policies: Policy[],\n    policyType: PolicyType,\n    policyFilter?: (policy: Policy) => boolean,\n    userId?: string\n  ) {\n    const organizations = await this.organizationService.getAll(userId);\n    const filteredPolicies = policies.filter(\n      (p) => p.type === policyType && p.enabled && (policyFilter == null || policyFilter(p))\n    );\n    const policySet = new Set(filteredPolicies.map((p) => p.organizationId));\n\n    return organizations.some(\n      (o) =>\n        o.status >= OrganizationUserStatusType.Accepted &&\n        o.usePolicies &&\n        policySet.has(o.id) &&\n        !this.isExcemptFromPolicies(o, policyType)\n    );\n  }\n}\n","import { ProviderUserStatusType } from \"../../enums/providerUserStatusType\";\nimport { ProviderUserType } from \"../../enums/providerUserType\";\nimport { ProviderData } from \"../data/provider.data\";\n\nexport class Provider {\n  id: string;\n  name: string;\n  status: ProviderUserStatusType;\n  type: ProviderUserType;\n  enabled: boolean;\n  userId: string;\n  useEvents: boolean;\n\n  constructor(obj?: ProviderData) {\n    if (obj == null) {\n      return;\n    }\n\n    this.id = obj.id;\n    this.name = obj.name;\n    this.status = obj.status;\n    this.type = obj.type;\n    this.enabled = obj.enabled;\n    this.userId = obj.userId;\n    this.useEvents = obj.useEvents;\n  }\n\n  get canAccess() {\n    if (this.isProviderAdmin) {\n      return true;\n    }\n    return this.enabled && this.status === ProviderUserStatusType.Confirmed;\n  }\n\n  get canCreateOrganizations() {\n    return this.enabled && this.isProviderAdmin;\n  }\n\n  get canManageUsers() {\n    return this.isProviderAdmin;\n  }\n\n  get canAccessEventLogs() {\n    return this.isProviderAdmin;\n  }\n\n  get isProviderAdmin() {\n    return this.type === ProviderUserType.ProviderAdmin;\n  }\n}\n","import { ProviderService as ProviderServiceAbstraction } from \"../abstractions/provider.service\";\nimport { StateService } from \"../abstractions/state.service\";\nimport { ProviderData } from \"../models/data/provider.data\";\nimport { Provider } from \"../models/domain/provider\";\n\nexport class ProviderService implements ProviderServiceAbstraction {\n  constructor(private stateService: StateService) {}\n\n  async get(id: string): Promise<Provider> {\n    const providers = await this.stateService.getProviders();\n    // eslint-disable-next-line\n    if (providers == null || !providers.hasOwnProperty(id)) {\n      return null;\n    }\n\n    return new Provider(providers[id]);\n  }\n\n  async getAll(): Promise<Provider[]> {\n    const providers = await this.stateService.getProviders();\n    const response: Provider[] = [];\n    for (const id in providers) {\n      // eslint-disable-next-line\n      if (providers.hasOwnProperty(id)) {\n        response.push(new Provider(providers[id]));\n      }\n    }\n    return response;\n  }\n\n  async save(providers: { [id: string]: ProviderData }) {\n    await this.stateService.setProviders(providers);\n  }\n}\n","import * as lunr from \"lunr\";\n\nimport { I18nService } from \"../abstractions/i18n.service\";\nimport { LogService } from \"../abstractions/log.service\";\nimport { SearchService as SearchServiceAbstraction } from \"../abstractions/search.service\";\nimport { FieldType } from \"../enums/fieldType\";\nimport { UriMatchType } from \"../enums/uriMatchType\";\nimport { SendView } from \"../models/view/send.view\";\nimport { CipherService } from \"../vault/abstractions/cipher.service\";\nimport { CipherType } from \"../vault/enums/cipher-type\";\nimport { CipherView } from \"../vault/models/view/cipher.view\";\n\nexport class SearchService implements SearchServiceAbstraction {\n  private static registeredPipeline = false;\n\n  indexedEntityId?: string = null;\n  private indexing = false;\n  private index: lunr.Index = null;\n  private readonly immediateSearchLocales: string[] = [\"zh-CN\", \"zh-TW\", \"ja\", \"ko\", \"vi\"];\n  private readonly defaultSearchableMinLength: number = 2;\n  private searchableMinLength: number = this.defaultSearchableMinLength;\n\n  constructor(\n    private cipherService: CipherService,\n    private logService: LogService,\n    private i18nService: I18nService\n  ) {\n    this.i18nService.locale$.subscribe((locale) => {\n      if (this.immediateSearchLocales.indexOf(locale) !== -1) {\n        this.searchableMinLength = 1;\n      } else {\n        this.searchableMinLength = this.defaultSearchableMinLength;\n      }\n    });\n\n    // Currently have to ensure this is only done a single time. Lunr allows you to register a function\n    // multiple times but they will add a warning message to the console. The way they do that breaks when ran on a service worker.\n    if (!SearchService.registeredPipeline) {\n      SearchService.registeredPipeline = true;\n      //register lunr pipeline function\n      lunr.Pipeline.registerFunction(this.normalizeAccentsPipelineFunction, \"normalizeAccents\");\n    }\n  }\n\n  clearIndex(): void {\n    this.indexedEntityId = null;\n    this.index = null;\n  }\n\n  isSearchable(query: string): boolean {\n    query = SearchService.normalizeSearchQuery(query);\n    const notSearchable =\n      query == null ||\n      (this.index == null && query.length < this.searchableMinLength) ||\n      (this.index != null && query.length < this.searchableMinLength && query.indexOf(\">\") !== 0);\n    return !notSearchable;\n  }\n\n  async indexCiphers(indexedEntityId?: string, ciphers?: CipherView[]): Promise<void> {\n    if (this.indexing) {\n      return;\n    }\n\n    this.indexing = true;\n    this.indexedEntityId = indexedEntityId;\n    this.index = null;\n    const builder = new lunr.Builder();\n    builder.pipeline.add(this.normalizeAccentsPipelineFunction);\n    builder.ref(\"id\");\n    builder.field(\"shortid\", { boost: 100, extractor: (c: CipherView) => c.id.substr(0, 8) });\n    builder.field(\"name\", {\n      boost: 10,\n    });\n    builder.field(\"subtitle\", {\n      boost: 5,\n      extractor: (c: CipherView) => {\n        if (c.subTitle != null && c.type === CipherType.Card) {\n          return c.subTitle.replace(/\\*/g, \"\");\n        }\n        return c.subTitle;\n      },\n    });\n    builder.field(\"notes\");\n    builder.field(\"login.username\", {\n      extractor: (c: CipherView) =>\n        c.type === CipherType.Login && c.login != null ? c.login.username : null,\n    });\n    builder.field(\"login.uris\", { boost: 2, extractor: (c: CipherView) => this.uriExtractor(c) });\n    builder.field(\"fields\", { extractor: (c: CipherView) => this.fieldExtractor(c, false) });\n    builder.field(\"fields_joined\", { extractor: (c: CipherView) => this.fieldExtractor(c, true) });\n    builder.field(\"attachments\", {\n      extractor: (c: CipherView) => this.attachmentExtractor(c, false),\n    });\n    builder.field(\"attachments_joined\", {\n      extractor: (c: CipherView) => this.attachmentExtractor(c, true),\n    });\n    builder.field(\"organizationid\", { extractor: (c: CipherView) => c.organizationId });\n    ciphers = ciphers || (await this.cipherService.getAllDecrypted());\n    ciphers.forEach((c) => builder.add(c));\n    this.index = builder.build();\n\n    this.indexing = false;\n\n    this.logService.info(\"Finished search indexing\");\n  }\n\n  async searchCiphers(\n    query: string,\n    filter: ((cipher: CipherView) => boolean) | ((cipher: CipherView) => boolean)[] = null,\n    ciphers: CipherView[] = null\n  ): Promise<CipherView[]> {\n    const results: CipherView[] = [];\n    if (query != null) {\n      query = SearchService.normalizeSearchQuery(query.trim().toLowerCase());\n    }\n    if (query === \"\") {\n      query = null;\n    }\n\n    if (ciphers == null) {\n      ciphers = await this.cipherService.getAllDecrypted();\n    }\n\n    if (filter != null && Array.isArray(filter) && filter.length > 0) {\n      ciphers = ciphers.filter((c) => filter.every((f) => f == null || f(c)));\n    } else if (filter != null) {\n      ciphers = ciphers.filter(filter as (cipher: CipherView) => boolean);\n    }\n\n    if (!this.isSearchable(query)) {\n      return ciphers;\n    }\n\n    if (this.indexing) {\n      await new Promise((r) => setTimeout(r, 250));\n      if (this.indexing) {\n        await new Promise((r) => setTimeout(r, 500));\n      }\n    }\n\n    const index = this.getIndexForSearch();\n    if (index == null) {\n      // Fall back to basic search if index is not available\n      return this.searchCiphersBasic(ciphers, query);\n    }\n\n    const ciphersMap = new Map<string, CipherView>();\n    ciphers.forEach((c) => ciphersMap.set(c.id, c));\n\n    let searchResults: lunr.Index.Result[] = null;\n    const isQueryString = query != null && query.length > 1 && query.indexOf(\">\") === 0;\n    if (isQueryString) {\n      try {\n        searchResults = index.search(query.substr(1).trim());\n      } catch (e) {\n        this.logService.error(e);\n      }\n    } else {\n      const soWild = lunr.Query.wildcard.LEADING | lunr.Query.wildcard.TRAILING;\n      searchResults = index.query((q) => {\n        lunr.tokenizer(query).forEach((token) => {\n          const t = token.toString();\n          q.term(t, { fields: [\"name\"], wildcard: soWild });\n          q.term(t, { fields: [\"subtitle\"], wildcard: soWild });\n          q.term(t, { fields: [\"login.uris\"], wildcard: soWild });\n          q.term(t, {});\n        });\n      });\n    }\n\n    if (searchResults != null) {\n      searchResults.forEach((r) => {\n        if (ciphersMap.has(r.ref)) {\n          results.push(ciphersMap.get(r.ref));\n        }\n      });\n    }\n    return results;\n  }\n\n  searchCiphersBasic(ciphers: CipherView[], query: string, deleted = false) {\n    query = SearchService.normalizeSearchQuery(query.trim().toLowerCase());\n    return ciphers.filter((c) => {\n      if (deleted !== c.isDeleted) {\n        return false;\n      }\n      if (c.name != null && c.name.toLowerCase().indexOf(query) > -1) {\n        return true;\n      }\n      if (query.length >= 8 && c.id.startsWith(query)) {\n        return true;\n      }\n      if (c.subTitle != null && c.subTitle.toLowerCase().indexOf(query) > -1) {\n        return true;\n      }\n      if (\n        c.login &&\n        c.login.hasUris &&\n        c.login.uris.some((loginUri) => loginUri?.uri?.toLowerCase().indexOf(query) > -1)\n      ) {\n        return true;\n      }\n      return false;\n    });\n  }\n\n  searchSends(sends: SendView[], query: string) {\n    query = SearchService.normalizeSearchQuery(query.trim().toLocaleLowerCase());\n    if (query === null) {\n      return sends;\n    }\n    const sendsMatched: SendView[] = [];\n    const lowPriorityMatched: SendView[] = [];\n    sends.forEach((s) => {\n      if (s.name != null && s.name.toLowerCase().indexOf(query) > -1) {\n        sendsMatched.push(s);\n      } else if (\n        query.length >= 8 &&\n        (s.id.startsWith(query) ||\n          s.accessId.toLocaleLowerCase().startsWith(query) ||\n          (s.file?.id != null && s.file.id.startsWith(query)))\n      ) {\n        lowPriorityMatched.push(s);\n      } else if (s.notes != null && s.notes.toLowerCase().indexOf(query) > -1) {\n        lowPriorityMatched.push(s);\n      } else if (s.text?.text != null && s.text.text.toLowerCase().indexOf(query) > -1) {\n        lowPriorityMatched.push(s);\n      } else if (s.file?.fileName != null && s.file.fileName.toLowerCase().indexOf(query) > -1) {\n        lowPriorityMatched.push(s);\n      }\n    });\n    return sendsMatched.concat(lowPriorityMatched);\n  }\n\n  getIndexForSearch(): lunr.Index {\n    return this.index;\n  }\n\n  private fieldExtractor(c: CipherView, joined: boolean) {\n    if (!c.hasFields) {\n      return null;\n    }\n    let fields: string[] = [];\n    c.fields.forEach((f) => {\n      if (f.name != null) {\n        fields.push(f.name);\n      }\n      if (f.type === FieldType.Text && f.value != null) {\n        fields.push(f.value);\n      }\n    });\n    fields = fields.filter((f) => f.trim() !== \"\");\n    if (fields.length === 0) {\n      return null;\n    }\n    return joined ? fields.join(\" \") : fields;\n  }\n\n  private attachmentExtractor(c: CipherView, joined: boolean) {\n    if (!c.hasAttachments) {\n      return null;\n    }\n    let attachments: string[] = [];\n    c.attachments.forEach((a) => {\n      if (a != null && a.fileName != null) {\n        if (joined && a.fileName.indexOf(\".\") > -1) {\n          attachments.push(a.fileName.substr(0, a.fileName.lastIndexOf(\".\")));\n        } else {\n          attachments.push(a.fileName);\n        }\n      }\n    });\n    attachments = attachments.filter((f) => f.trim() !== \"\");\n    if (attachments.length === 0) {\n      return null;\n    }\n    return joined ? attachments.join(\" \") : attachments;\n  }\n\n  private uriExtractor(c: CipherView) {\n    if (c.type !== CipherType.Login || c.login == null || !c.login.hasUris) {\n      return null;\n    }\n    const uris: string[] = [];\n    c.login.uris.forEach((u) => {\n      if (u.uri == null || u.uri === \"\") {\n        return;\n      }\n      if (u.hostname != null) {\n        uris.push(u.hostname);\n        return;\n      }\n      let uri = u.uri;\n      if (u.match !== UriMatchType.RegularExpression) {\n        const protocolIndex = uri.indexOf(\"://\");\n        if (protocolIndex > -1) {\n          uri = uri.substr(protocolIndex + 3);\n        }\n        const queryIndex = uri.search(/\\?|&|#/);\n        if (queryIndex > -1) {\n          uri = uri.substring(0, queryIndex);\n        }\n      }\n      uris.push(uri);\n    });\n    return uris.length > 0 ? uris : null;\n  }\n\n  private normalizeAccentsPipelineFunction(token: lunr.Token): any {\n    const searchableFields = [\"name\", \"login.username\", \"subtitle\", \"notes\"];\n    const fields = (token as any).metadata[\"fields\"];\n    const checkFields = fields.every((i: any) => searchableFields.includes(i));\n\n    if (checkFields) {\n      return SearchService.normalizeSearchQuery(token.toString());\n    }\n\n    return token;\n  }\n\n  // Remove accents/diacritics characters from text. This regex is equivalent to the Diacritic unicode property escape, i.e. it will match all diacritic characters.\n  static normalizeSearchQuery(query: string): string {\n    return query?.normalize(\"NFD\").replace(/[\\u0300-\\u036f]/g, \"\");\n  }\n}\n","import { SendFileApi } from \"../api/send-file.api\";\n\nexport class SendFileData {\n  id: string;\n  fileName: string;\n  size: string;\n  sizeName: string;\n\n  constructor(data?: SendFileApi) {\n    if (data == null) {\n      return;\n    }\n\n    this.id = data.id;\n    this.fileName = data.fileName;\n    this.size = data.size;\n    this.sizeName = data.sizeName;\n  }\n}\n","import { SendTextApi } from \"../api/send-text.api\";\n\nexport class SendTextData {\n  text: string;\n  hidden: boolean;\n\n  constructor(data?: SendTextApi) {\n    if (data == null) {\n      return;\n    }\n\n    this.text = data.text;\n    this.hidden = data.hidden;\n  }\n}\n","import { SendType } from \"../../enums/sendType\";\nimport { SendResponse } from \"../response/send.response\";\n\nimport { SendFileData } from \"./send-file.data\";\nimport { SendTextData } from \"./send-text.data\";\n\nexport class SendData {\n  id: string;\n  accessId: string;\n  type: SendType;\n  name: string;\n  notes: string;\n  file: SendFileData;\n  text: SendTextData;\n  key: string;\n  maxAccessCount?: number;\n  accessCount: number;\n  revisionDate: string;\n  expirationDate: string;\n  deletionDate: string;\n  password: string;\n  disabled: boolean;\n  hideEmail: boolean;\n\n  constructor(response?: SendResponse) {\n    if (response == null) {\n      return;\n    }\n\n    this.id = response.id;\n    this.accessId = response.accessId;\n    this.type = response.type;\n    this.name = response.name;\n    this.notes = response.notes;\n    this.key = response.key;\n    this.maxAccessCount = response.maxAccessCount;\n    this.accessCount = response.accessCount;\n    this.revisionDate = response.revisionDate;\n    this.expirationDate = response.expirationDate;\n    this.deletionDate = response.deletionDate;\n    this.password = response.password;\n    this.disabled = response.disable;\n    this.hideEmail = response.hideEmail;\n\n    switch (this.type) {\n      case SendType.Text:\n        this.text = new SendTextData(response.text);\n        break;\n      case SendType.File:\n        this.file = new SendFileData(response.file);\n        break;\n      default:\n        break;\n    }\n  }\n}\n","import { SendFileData } from \"../data/send-file.data\";\nimport { SendFileView } from \"../view/send-file.view\";\n\nimport Domain from \"./domain-base\";\nimport { EncString } from \"./enc-string\";\nimport { SymmetricCryptoKey } from \"./symmetric-crypto-key\";\n\nexport class SendFile extends Domain {\n  id: string;\n  size: string;\n  sizeName: string;\n  fileName: EncString;\n\n  constructor(obj?: SendFileData) {\n    super();\n    if (obj == null) {\n      return;\n    }\n\n    this.size = obj.size;\n    this.buildDomainModel(\n      this,\n      obj,\n      {\n        id: null,\n        sizeName: null,\n        fileName: null,\n      },\n      [\"id\", \"sizeName\"]\n    );\n  }\n\n  async decrypt(key: SymmetricCryptoKey): Promise<SendFileView> {\n    const view = await this.decryptObj(\n      new SendFileView(this),\n      {\n        fileName: null,\n      },\n      null,\n      key\n    );\n    return view;\n  }\n}\n","import { SendTextData } from \"../data/send-text.data\";\nimport { SendTextView } from \"../view/send-text.view\";\n\nimport Domain from \"./domain-base\";\nimport { EncString } from \"./enc-string\";\nimport { SymmetricCryptoKey } from \"./symmetric-crypto-key\";\n\nexport class SendText extends Domain {\n  text: EncString;\n  hidden: boolean;\n\n  constructor(obj?: SendTextData) {\n    super();\n    if (obj == null) {\n      return;\n    }\n\n    this.hidden = obj.hidden;\n    this.buildDomainModel(\n      this,\n      obj,\n      {\n        text: null,\n      },\n      []\n    );\n  }\n\n  decrypt(key: SymmetricCryptoKey): Promise<SendTextView> {\n    return this.decryptObj(\n      new SendTextView(this),\n      {\n        text: null,\n      },\n      null,\n      key\n    );\n  }\n}\n","import { SendType } from \"../../enums/sendType\";\nimport { Utils } from \"../../misc/utils\";\nimport { SendData } from \"../data/send.data\";\nimport { SendView } from \"../view/send.view\";\n\nimport Domain from \"./domain-base\";\nimport { EncString } from \"./enc-string\";\nimport { SendFile } from \"./send-file\";\nimport { SendText } from \"./send-text\";\n\nexport class Send extends Domain {\n  id: string;\n  accessId: string;\n  type: SendType;\n  name: EncString;\n  notes: EncString;\n  file: SendFile;\n  text: SendText;\n  key: EncString;\n  maxAccessCount?: number;\n  accessCount: number;\n  revisionDate: Date;\n  expirationDate: Date;\n  deletionDate: Date;\n  password: string;\n  disabled: boolean;\n  hideEmail: boolean;\n\n  constructor(obj?: SendData) {\n    super();\n    if (obj == null) {\n      return;\n    }\n\n    this.buildDomainModel(\n      this,\n      obj,\n      {\n        id: null,\n        accessId: null,\n        name: null,\n        notes: null,\n        key: null,\n      },\n      [\"id\", \"accessId\"]\n    );\n\n    this.type = obj.type;\n    this.maxAccessCount = obj.maxAccessCount;\n    this.accessCount = obj.accessCount;\n    this.password = obj.password;\n    this.disabled = obj.disabled;\n    this.revisionDate = obj.revisionDate != null ? new Date(obj.revisionDate) : null;\n    this.deletionDate = obj.deletionDate != null ? new Date(obj.deletionDate) : null;\n    this.expirationDate = obj.expirationDate != null ? new Date(obj.expirationDate) : null;\n    this.hideEmail = obj.hideEmail;\n\n    switch (this.type) {\n      case SendType.Text:\n        this.text = new SendText(obj.text);\n        break;\n      case SendType.File:\n        this.file = new SendFile(obj.file);\n        break;\n      default:\n        break;\n    }\n  }\n\n  async decrypt(): Promise<SendView> {\n    const model = new SendView(this);\n\n    const cryptoService = Utils.getContainerService().getCryptoService();\n\n    try {\n      model.key = await cryptoService.decryptToBytes(this.key, null);\n      model.cryptoKey = await cryptoService.makeSendKey(model.key);\n    } catch (e) {\n      // TODO: error?\n    }\n\n    await this.decryptObj(\n      model,\n      {\n        name: null,\n        notes: null,\n      },\n      null,\n      model.cryptoKey\n    );\n\n    switch (this.type) {\n      case SendType.File:\n        model.file = await this.file.decrypt(model.cryptoKey);\n        break;\n      case SendType.Text:\n        model.text = await this.text.decrypt(model.cryptoKey);\n        break;\n      default:\n        break;\n    }\n\n    return model;\n  }\n}\n","import { SendType } from \"../../enums/sendType\";\nimport { SendFileApi } from \"../api/send-file.api\";\nimport { SendTextApi } from \"../api/send-text.api\";\nimport { Send } from \"../domain/send\";\n\nexport class SendRequest {\n  type: SendType;\n  fileLength?: number;\n  name: string;\n  notes: string;\n  key: string;\n  maxAccessCount?: number;\n  expirationDate: string;\n  deletionDate: string;\n  text: SendTextApi;\n  file: SendFileApi;\n  password: string;\n  disabled: boolean;\n  hideEmail: boolean;\n\n  constructor(send: Send, fileLength?: number) {\n    this.type = send.type;\n    this.fileLength = fileLength;\n    this.name = send.name ? send.name.encryptedString : null;\n    this.notes = send.notes ? send.notes.encryptedString : null;\n    this.maxAccessCount = send.maxAccessCount;\n    this.expirationDate = send.expirationDate != null ? send.expirationDate.toISOString() : null;\n    this.deletionDate = send.deletionDate != null ? send.deletionDate.toISOString() : null;\n    this.key = send.key != null ? send.key.encryptedString : null;\n    this.password = send.password;\n    this.disabled = send.disabled;\n    this.hideEmail = send.hideEmail;\n\n    switch (this.type) {\n      case SendType.Text:\n        this.text = new SendTextApi();\n        this.text.text = send.text.text != null ? send.text.text.encryptedString : null;\n        this.text.hidden = send.text.hidden;\n        break;\n      case SendType.File:\n        this.file = new SendFileApi();\n        this.file.fileName = send.file.fileName != null ? send.file.fileName.encryptedString : null;\n        break;\n      default:\n        break;\n    }\n  }\n}\n","import { ApiService } from \"../abstractions/api.service\";\nimport { CryptoService } from \"../abstractions/crypto.service\";\nimport { CryptoFunctionService } from \"../abstractions/cryptoFunction.service\";\nimport { FileUploadService } from \"../abstractions/fileUpload.service\";\nimport { I18nService } from \"../abstractions/i18n.service\";\nimport { SendService as SendServiceAbstraction } from \"../abstractions/send.service\";\nimport { StateService } from \"../abstractions/state.service\";\nimport { SEND_KDF_ITERATIONS } from \"../enums/kdfType\";\nimport { SendType } from \"../enums/sendType\";\nimport { Utils } from \"../misc/utils\";\nimport { SendData } from \"../models/data/send.data\";\nimport { EncArrayBuffer } from \"../models/domain/enc-array-buffer\";\nimport { EncString } from \"../models/domain/enc-string\";\nimport { Send } from \"../models/domain/send\";\nimport { SendFile } from \"../models/domain/send-file\";\nimport { SendText } from \"../models/domain/send-text\";\nimport { SymmetricCryptoKey } from \"../models/domain/symmetric-crypto-key\";\nimport { SendRequest } from \"../models/request/send.request\";\nimport { ErrorResponse } from \"../models/response/error.response\";\nimport { SendResponse } from \"../models/response/send.response\";\nimport { SendView } from \"../models/view/send.view\";\n\nexport class SendService implements SendServiceAbstraction {\n  constructor(\n    private cryptoService: CryptoService,\n    private apiService: ApiService,\n    private fileUploadService: FileUploadService,\n    private i18nService: I18nService,\n    private cryptoFunctionService: CryptoFunctionService,\n    private stateService: StateService\n  ) {}\n\n  async clearCache(): Promise<void> {\n    await this.stateService.setDecryptedSends(null);\n  }\n\n  async encrypt(\n    model: SendView,\n    file: File | ArrayBuffer,\n    password: string,\n    key?: SymmetricCryptoKey\n  ): Promise<[Send, EncArrayBuffer]> {\n    let fileData: EncArrayBuffer = null;\n    const send = new Send();\n    send.id = model.id;\n    send.type = model.type;\n    send.disabled = model.disabled;\n    send.hideEmail = model.hideEmail;\n    send.maxAccessCount = model.maxAccessCount;\n    if (model.key == null) {\n      model.key = await this.cryptoFunctionService.randomBytes(16);\n      model.cryptoKey = await this.cryptoService.makeSendKey(model.key);\n    }\n    if (password != null) {\n      const passwordHash = await this.cryptoFunctionService.pbkdf2(\n        password,\n        model.key,\n        \"sha256\",\n        SEND_KDF_ITERATIONS\n      );\n      send.password = Utils.fromBufferToB64(passwordHash);\n    }\n    send.key = await this.cryptoService.encrypt(model.key, key);\n    send.name = await this.cryptoService.encrypt(model.name, model.cryptoKey);\n    send.notes = await this.cryptoService.encrypt(model.notes, model.cryptoKey);\n    if (send.type === SendType.Text) {\n      send.text = new SendText();\n      send.text.text = await this.cryptoService.encrypt(model.text.text, model.cryptoKey);\n      send.text.hidden = model.text.hidden;\n    } else if (send.type === SendType.File) {\n      send.file = new SendFile();\n      if (file != null) {\n        if (file instanceof ArrayBuffer) {\n          const [name, data] = await this.encryptFileData(\n            model.file.fileName,\n            file,\n            model.cryptoKey\n          );\n          send.file.fileName = name;\n          fileData = data;\n        } else {\n          fileData = await this.parseFile(send, file, model.cryptoKey);\n        }\n      }\n    }\n\n    return [send, fileData];\n  }\n\n  async get(id: string): Promise<Send> {\n    const sends = await this.stateService.getEncryptedSends();\n    // eslint-disable-next-line\n    if (sends == null || !sends.hasOwnProperty(id)) {\n      return null;\n    }\n\n    return new Send(sends[id]);\n  }\n\n  async getAll(): Promise<Send[]> {\n    const sends = await this.stateService.getEncryptedSends();\n    const response: Send[] = [];\n    for (const id in sends) {\n      // eslint-disable-next-line\n      if (sends.hasOwnProperty(id)) {\n        response.push(new Send(sends[id]));\n      }\n    }\n    return response;\n  }\n\n  async getAllDecrypted(): Promise<SendView[]> {\n    let decSends = await this.stateService.getDecryptedSends();\n    if (decSends != null) {\n      return decSends;\n    }\n\n    decSends = [];\n    const hasKey = await this.cryptoService.hasKey();\n    if (!hasKey) {\n      throw new Error(\"No key.\");\n    }\n\n    const promises: Promise<any>[] = [];\n    const sends = await this.getAll();\n    sends.forEach((send) => {\n      promises.push(send.decrypt().then((f) => decSends.push(f)));\n    });\n\n    await Promise.all(promises);\n    decSends.sort(Utils.getSortFunction(this.i18nService, \"name\"));\n\n    await this.stateService.setDecryptedSends(decSends);\n    return decSends;\n  }\n\n  async saveWithServer(sendData: [Send, EncArrayBuffer]): Promise<any> {\n    const request = new SendRequest(sendData[0], sendData[1]?.buffer.byteLength);\n    let response: SendResponse;\n    if (sendData[0].id == null) {\n      if (sendData[0].type === SendType.Text) {\n        response = await this.apiService.postSend(request);\n      } else {\n        try {\n          const uploadDataResponse = await this.apiService.postFileTypeSend(request);\n          response = uploadDataResponse.sendResponse;\n\n          await this.fileUploadService.uploadSendFile(\n            uploadDataResponse,\n            sendData[0].file.fileName,\n            sendData[1]\n          );\n        } catch (e) {\n          if (e instanceof ErrorResponse && (e as ErrorResponse).statusCode === 404) {\n            response = await this.legacyServerSendFileUpload(sendData, request);\n          } else if (e instanceof ErrorResponse) {\n            throw new Error((e as ErrorResponse).getSingleMessage());\n          } else {\n            throw e;\n          }\n        }\n      }\n      sendData[0].id = response.id;\n      sendData[0].accessId = response.accessId;\n    } else {\n      response = await this.apiService.putSend(sendData[0].id, request);\n    }\n\n    const data = new SendData(response);\n    await this.upsert(data);\n  }\n\n  /**\n   * @deprecated Mar 25 2021: This method has been deprecated in favor of direct uploads.\n   * This method still exists for backward compatibility with old server versions.\n   */\n  async legacyServerSendFileUpload(\n    sendData: [Send, EncArrayBuffer],\n    request: SendRequest\n  ): Promise<SendResponse> {\n    const fd = new FormData();\n    try {\n      const blob = new Blob([sendData[1].buffer], { type: \"application/octet-stream\" });\n      fd.append(\"model\", JSON.stringify(request));\n      fd.append(\"data\", blob, sendData[0].file.fileName.encryptedString);\n    } catch (e) {\n      if (Utils.isNode && !Utils.isBrowser) {\n        fd.append(\"model\", JSON.stringify(request));\n        fd.append(\n          \"data\",\n          Buffer.from(sendData[1].buffer) as any,\n          {\n            filepath: sendData[0].file.fileName.encryptedString,\n            contentType: \"application/octet-stream\",\n          } as any\n        );\n      } else {\n        throw e;\n      }\n    }\n    return await this.apiService.postSendFileLegacy(fd);\n  }\n\n  async upsert(send: SendData | SendData[]): Promise<any> {\n    let sends = await this.stateService.getEncryptedSends();\n    if (sends == null) {\n      sends = {};\n    }\n\n    if (send instanceof SendData) {\n      const s = send as SendData;\n      sends[s.id] = s;\n    } else {\n      (send as SendData[]).forEach((s) => {\n        sends[s.id] = s;\n      });\n    }\n\n    await this.replace(sends);\n  }\n\n  async replace(sends: { [id: string]: SendData }): Promise<any> {\n    await this.stateService.setDecryptedSends(null);\n    await this.stateService.setEncryptedSends(sends);\n  }\n\n  async clear(): Promise<any> {\n    await this.stateService.setDecryptedSends(null);\n    await this.stateService.setEncryptedSends(null);\n  }\n\n  async delete(id: string | string[]): Promise<any> {\n    const sends = await this.stateService.getEncryptedSends();\n    if (sends == null) {\n      return;\n    }\n\n    if (typeof id === \"string\") {\n      if (sends[id] == null) {\n        return;\n      }\n      delete sends[id];\n    } else {\n      (id as string[]).forEach((i) => {\n        delete sends[i];\n      });\n    }\n\n    await this.replace(sends);\n  }\n\n  async deleteWithServer(id: string): Promise<any> {\n    await this.apiService.deleteSend(id);\n    await this.delete(id);\n  }\n\n  async removePasswordWithServer(id: string): Promise<any> {\n    const response = await this.apiService.putSendRemovePassword(id);\n    const data = new SendData(response);\n    await this.upsert(data);\n  }\n\n  private parseFile(send: Send, file: File, key: SymmetricCryptoKey): Promise<EncArrayBuffer> {\n    return new Promise((resolve, reject) => {\n      const reader = new FileReader();\n      reader.readAsArrayBuffer(file);\n      reader.onload = async (evt) => {\n        try {\n          const [name, data] = await this.encryptFileData(\n            file.name,\n            evt.target.result as ArrayBuffer,\n            key\n          );\n          send.file.fileName = name;\n          resolve(data);\n        } catch (e) {\n          reject(e);\n        }\n      };\n      reader.onerror = () => {\n        reject(\"Error reading file.\");\n      };\n    });\n  }\n\n  private async encryptFileData(\n    fileName: string,\n    data: ArrayBuffer,\n    key: SymmetricCryptoKey\n  ): Promise<[EncString, EncArrayBuffer]> {\n    const encFileName = await this.cryptoService.encrypt(fileName, key);\n    const encFileData = await this.cryptoService.encryptToBytes(data, key);\n    return [encFileName, encFileData];\n  }\n}\n","export enum StorageLocation {\n  Both = \"both\",\n  Disk = \"disk\",\n  Memory = \"memory\",\n}\n","import { BehaviorSubject, concatMap } from \"rxjs\";\n\nimport { SettingsService as SettingsServiceAbstraction } from \"../abstractions/settings.service\";\nimport { StateService } from \"../abstractions/state.service\";\nimport { Utils } from \"../misc/utils\";\nimport { AccountSettingsSettings } from \"../models/domain/account\";\n\nexport class SettingsService implements SettingsServiceAbstraction {\n  protected _settings: BehaviorSubject<AccountSettingsSettings> = new BehaviorSubject({});\n\n  settings$ = this._settings.asObservable();\n\n  constructor(private stateService: StateService) {\n    this.stateService.activeAccountUnlocked$\n      .pipe(\n        concatMap(async (unlocked) => {\n          if (Utils.global.bitwardenContainerService == null) {\n            return;\n          }\n\n          if (!unlocked) {\n            this._settings.next({});\n            return;\n          }\n\n          const data = await this.stateService.getSettings();\n\n          this._settings.next(data);\n        })\n      )\n      .subscribe();\n  }\n\n  async setEquivalentDomains(equivalentDomains: string[][]): Promise<void> {\n    const settings = this._settings.getValue() ?? {};\n\n    settings.equivalentDomains = equivalentDomains;\n\n    this._settings.next(settings);\n    await this.stateService.setSettings(settings);\n  }\n\n  async clear(userId?: string): Promise<void> {\n    if (userId == null || userId == (await this.stateService.getUserId())) {\n      this._settings.next({});\n    }\n\n    await this.stateService.setSettings(null, { userId: userId });\n  }\n}\n","import { ProviderUserStatusType } from \"../../enums/providerUserStatusType\";\nimport { ProviderUserType } from \"../../enums/providerUserType\";\nimport { ProfileProviderResponse } from \"../response/profile-provider.response\";\n\nexport class ProviderData {\n  id: string;\n  name: string;\n  status: ProviderUserStatusType;\n  type: ProviderUserType;\n  enabled: boolean;\n  userId: string;\n  useEvents: boolean;\n\n  constructor(response: ProfileProviderResponse) {\n    this.id = response.id;\n    this.name = response.name;\n    this.status = response.status;\n    this.type = response.type;\n    this.enabled = response.enabled;\n    this.userId = response.userId;\n    this.useEvents = response.useEvents;\n  }\n}\n","import { Jsonify } from \"type-fest\";\n\nimport { Account } from \"./account\";\nimport { GlobalState } from \"./global-state\";\n\nexport class State<\n  TGlobalState extends GlobalState = GlobalState,\n  TAccount extends Account = Account\n> {\n  accounts: { [userId: string]: TAccount } = {};\n  globals: TGlobalState;\n  activeUserId: string;\n  authenticatedAccounts: string[] = [];\n  accountActivity: { [userId: string]: number } = {};\n\n  constructor(globals: TGlobalState) {\n    this.globals = globals;\n  }\n\n  // TODO, make Jsonify<State,TGlobalState,TAccount> work. It currently doesn't because Globals doesn't implement Jsonify.\n  static fromJSON<TGlobalState extends GlobalState, TAccount extends Account>(\n    obj: any,\n    accountDeserializer: (json: Jsonify<TAccount>) => TAccount\n  ): State<TGlobalState, TAccount> {\n    if (obj == null) {\n      return null;\n    }\n\n    return Object.assign(new State(null), obj, {\n      accounts: State.buildAccountMapFromJSON(obj?.accounts, accountDeserializer),\n    });\n  }\n\n  private static buildAccountMapFromJSON<TAccount extends Account>(\n    jsonAccounts: { [userId: string]: Jsonify<TAccount> },\n    accountDeserializer: (json: Jsonify<TAccount>) => TAccount\n  ) {\n    if (!jsonAccounts) {\n      return {};\n    }\n    const accounts: { [userId: string]: TAccount } = {};\n    for (const userId in jsonAccounts) {\n      accounts[userId] = accountDeserializer(jsonAccounts[userId]);\n    }\n    return accounts;\n  }\n}\n","import { FolderResponse } from \"../response/folder.response\";\n\nexport class FolderData {\n  id: string;\n  name: string;\n  revisionDate: string;\n\n  constructor(response: FolderResponse) {\n    this.name = response.name;\n    this.id = response.id;\n    this.revisionDate = response.revisionDate;\n  }\n}\n","import { BehaviorSubject, concatMap } from \"rxjs\";\nimport { Jsonify } from \"type-fest\";\n\nimport { LogService } from \"../abstractions/log.service\";\nimport { StateService as StateServiceAbstraction } from \"../abstractions/state.service\";\nimport { StateMigrationService } from \"../abstractions/stateMigration.service\";\nimport {\n  AbstractMemoryStorageService,\n  AbstractStorageService,\n} from \"../abstractions/storage.service\";\nimport { HtmlStorageLocation } from \"../enums/htmlStorageLocation\";\nimport { KdfType } from \"../enums/kdfType\";\nimport { StorageLocation } from \"../enums/storageLocation\";\nimport { ThemeType } from \"../enums/themeType\";\nimport { UriMatchType } from \"../enums/uriMatchType\";\nimport { StateFactory } from \"../factories/stateFactory\";\nimport { Utils } from \"../misc/utils\";\nimport { CollectionData } from \"../models/data/collection.data\";\nimport { EncryptedOrganizationKeyData } from \"../models/data/encrypted-organization-key.data\";\nimport { EventData } from \"../models/data/event.data\";\nimport { OrganizationData } from \"../models/data/organization.data\";\nimport { PolicyData } from \"../models/data/policy.data\";\nimport { ProviderData } from \"../models/data/provider.data\";\nimport { SendData } from \"../models/data/send.data\";\nimport { ServerConfigData } from \"../models/data/server-config.data\";\nimport {\n  Account,\n  AccountData,\n  AccountSettings,\n  AccountSettingsSettings,\n} from \"../models/domain/account\";\nimport { EncString } from \"../models/domain/enc-string\";\nimport { EnvironmentUrls } from \"../models/domain/environment-urls\";\nimport { GeneratedPasswordHistory } from \"../models/domain/generated-password-history\";\nimport { GlobalState } from \"../models/domain/global-state\";\nimport { KdfConfig } from \"../models/domain/kdf-config\";\nimport { Policy } from \"../models/domain/policy\";\nimport { State } from \"../models/domain/state\";\nimport { StorageOptions } from \"../models/domain/storage-options\";\nimport { SymmetricCryptoKey } from \"../models/domain/symmetric-crypto-key\";\nimport { WindowState } from \"../models/domain/window-state\";\nimport { CollectionView } from \"../models/view/collection.view\";\nimport { SendView } from \"../models/view/send.view\";\nimport { CipherData } from \"../vault/models/data/cipher.data\";\nimport { FolderData } from \"../vault/models/data/folder.data\";\nimport { LocalData } from \"../vault/models/data/local.data\";\nimport { CipherView } from \"../vault/models/view/cipher.view\";\n\nconst keys = {\n  state: \"state\",\n  global: \"global\",\n  authenticatedAccounts: \"authenticatedAccounts\",\n  activeUserId: \"activeUserId\",\n  tempAccountSettings: \"tempAccountSettings\", // used to hold account specific settings (i.e clear clipboard) between initial migration and first account authentication\n  accountActivity: \"accountActivity\",\n};\n\nconst partialKeys = {\n  autoKey: \"_masterkey_auto\",\n  biometricKey: \"_masterkey_biometric\",\n  masterKey: \"_masterkey\",\n};\n\nconst DDG_SHARED_KEY = \"DuckDuckGoSharedKey\";\n\nexport class StateService<\n  TGlobalState extends GlobalState = GlobalState,\n  TAccount extends Account = Account\n> implements StateServiceAbstraction<TAccount>\n{\n  protected accountsSubject = new BehaviorSubject<{ [userId: string]: TAccount }>({});\n  accounts$ = this.accountsSubject.asObservable();\n\n  protected activeAccountSubject = new BehaviorSubject<string | null>(null);\n  activeAccount$ = this.activeAccountSubject.asObservable();\n\n  protected activeAccountUnlockedSubject = new BehaviorSubject<boolean>(false);\n  activeAccountUnlocked$ = this.activeAccountUnlockedSubject.asObservable();\n\n  private hasBeenInited = false;\n  private isRecoveredSession = false;\n\n  protected accountDiskCache = new BehaviorSubject<Record<string, TAccount>>({});\n\n  // default account serializer, must be overridden by child class\n  protected accountDeserializer = Account.fromJSON as (json: Jsonify<TAccount>) => TAccount;\n\n  constructor(\n    protected storageService: AbstractStorageService,\n    protected secureStorageService: AbstractStorageService,\n    protected memoryStorageService: AbstractMemoryStorageService,\n    protected logService: LogService,\n    protected stateMigrationService: StateMigrationService,\n    protected stateFactory: StateFactory<TGlobalState, TAccount>,\n    protected useAccountCache: boolean = true\n  ) {\n    // If the account gets changed, verify the new account is unlocked\n    this.activeAccountSubject\n      .pipe(\n        concatMap(async (userId) => {\n          if (userId == null && this.activeAccountUnlockedSubject.getValue() == false) {\n            return;\n          } else if (userId == null) {\n            this.activeAccountUnlockedSubject.next(false);\n          }\n\n          // FIXME: This should be refactored into AuthService or a similar service,\n          //  as checking for the existance of the crypto key is a low level\n          //  implementation detail.\n          this.activeAccountUnlockedSubject.next((await this.getCryptoMasterKey()) != null);\n        })\n      )\n      .subscribe();\n  }\n\n  async init(): Promise<void> {\n    if (this.hasBeenInited) {\n      return;\n    }\n\n    if (await this.stateMigrationService.needsMigration()) {\n      await this.stateMigrationService.migrate();\n    }\n\n    await this.state().then(async (state) => {\n      if (state == null) {\n        await this.setState(new State<TGlobalState, TAccount>(this.createGlobals()));\n      } else {\n        this.isRecoveredSession = true;\n      }\n    });\n    await this.initAccountState();\n    this.hasBeenInited = true;\n  }\n\n  async initAccountState() {\n    if (this.isRecoveredSession) {\n      return;\n    }\n\n    await this.updateState(async (state) => {\n      state.authenticatedAccounts =\n        (await this.storageService.get<string[]>(keys.authenticatedAccounts)) ?? [];\n      for (const i in state.authenticatedAccounts) {\n        if (i != null) {\n          await this.syncAccountFromDisk(state.authenticatedAccounts[i]);\n        }\n      }\n      const storedActiveUser = await this.storageService.get<string>(keys.activeUserId);\n      if (storedActiveUser != null) {\n        state.activeUserId = storedActiveUser;\n      }\n      await this.pushAccounts();\n      this.activeAccountSubject.next(state.activeUserId);\n\n      return state;\n    });\n  }\n\n  async syncAccountFromDisk(userId: string) {\n    if (userId == null) {\n      return;\n    }\n    await this.updateState(async (state) => {\n      if (state.accounts == null) {\n        state.accounts = {};\n      }\n      state.accounts[userId] = this.createAccount();\n      const diskAccount = await this.getAccountFromDisk({ userId: userId });\n      state.accounts[userId].profile = diskAccount.profile;\n      return state;\n    });\n  }\n\n  async addAccount(account: TAccount) {\n    account = await this.setAccountEnvironmentUrls(account);\n    await this.updateState(async (state) => {\n      state.authenticatedAccounts.push(account.profile.userId);\n      await this.storageService.save(keys.authenticatedAccounts, state.authenticatedAccounts);\n      state.accounts[account.profile.userId] = account;\n      return state;\n    });\n    await this.scaffoldNewAccountStorage(account);\n    await this.setLastActive(new Date().getTime(), { userId: account.profile.userId });\n    await this.setActiveUser(account.profile.userId);\n    this.activeAccountSubject.next(account.profile.userId);\n  }\n\n  async setActiveUser(userId: string): Promise<void> {\n    this.clearDecryptedDataForActiveUser();\n    await this.updateState(async (state) => {\n      state.activeUserId = userId;\n      await this.storageService.save(keys.activeUserId, userId);\n      this.activeAccountSubject.next(state.activeUserId);\n      return state;\n    });\n\n    await this.pushAccounts();\n  }\n\n  async clean(options?: StorageOptions): Promise<void> {\n    options = this.reconcileOptions(options, await this.defaultInMemoryOptions());\n    await this.deAuthenticateAccount(options.userId);\n    if (options.userId === (await this.state())?.activeUserId) {\n      await this.dynamicallySetActiveUser();\n    }\n\n    await this.removeAccountFromDisk(options?.userId);\n    this.removeAccountFromMemory(options?.userId);\n    await this.pushAccounts();\n  }\n\n  async getAccessToken(options?: StorageOptions): Promise<string> {\n    options = await this.getTimeoutBasedStorageOptions(options);\n    return (await this.getAccount(options))?.tokens?.accessToken;\n  }\n\n  async setAccessToken(value: string, options?: StorageOptions): Promise<void> {\n    options = await this.getTimeoutBasedStorageOptions(options);\n    const account = await this.getAccount(options);\n    account.tokens.accessToken = value;\n    await this.saveAccount(account, options);\n  }\n\n  async getAddEditCipherInfo(options?: StorageOptions): Promise<any> {\n    return (\n      await this.getAccount(this.reconcileOptions(options, await this.defaultInMemoryOptions()))\n    )?.data?.addEditCipherInfo;\n  }\n\n  async setAddEditCipherInfo(value: any, options?: StorageOptions): Promise<void> {\n    const account = await this.getAccount(\n      this.reconcileOptions(options, await this.defaultInMemoryOptions())\n    );\n    account.data.addEditCipherInfo = value;\n    await this.saveAccount(\n      account,\n      this.reconcileOptions(options, await this.defaultInMemoryOptions())\n    );\n  }\n\n  async getAlwaysShowDock(options?: StorageOptions): Promise<boolean> {\n    return (\n      (await this.getGlobals(this.reconcileOptions(options, await this.defaultOnDiskOptions())))\n        ?.alwaysShowDock ?? false\n    );\n  }\n\n  async setAlwaysShowDock(value: boolean, options?: StorageOptions): Promise<void> {\n    const globals = await this.getGlobals(\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n    globals.alwaysShowDock = value;\n    await this.saveGlobals(\n      globals,\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n  }\n\n  async getApiKeyClientId(options?: StorageOptions): Promise<string> {\n    options = await this.getTimeoutBasedStorageOptions(options);\n    return (await this.getAccount(options))?.profile?.apiKeyClientId;\n  }\n\n  async setApiKeyClientId(value: string, options?: StorageOptions): Promise<void> {\n    options = await this.getTimeoutBasedStorageOptions(options);\n    const account = await this.getAccount(options);\n    account.profile.apiKeyClientId = value;\n    await this.saveAccount(account, options);\n  }\n\n  async getApiKeyClientSecret(options?: StorageOptions): Promise<string> {\n    options = await this.getTimeoutBasedStorageOptions(options);\n    return (await this.getAccount(options))?.keys?.apiKeyClientSecret;\n  }\n\n  async setApiKeyClientSecret(value: string, options?: StorageOptions): Promise<void> {\n    options = await this.getTimeoutBasedStorageOptions(options);\n    const account = await this.getAccount(options);\n    account.keys.apiKeyClientSecret = value;\n    await this.saveAccount(account, options);\n  }\n\n  async getAutoConfirmFingerPrints(options?: StorageOptions): Promise<boolean> {\n    return (\n      (await this.getAccount(this.reconcileOptions(options, await this.defaultOnDiskOptions())))\n        ?.settings?.autoConfirmFingerPrints ?? false\n    );\n  }\n\n  async setAutoConfirmFingerprints(value: boolean, options?: StorageOptions): Promise<void> {\n    const account = await this.getAccount(\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n    account.settings.autoConfirmFingerPrints = value;\n    await this.saveAccount(\n      account,\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n  }\n\n  async getAutoFillOnPageLoadDefault(options?: StorageOptions): Promise<boolean> {\n    return (\n      (await this.getAccount(this.reconcileOptions(options, await this.defaultOnDiskOptions())))\n        ?.settings?.autoFillOnPageLoadDefault ?? true\n    );\n  }\n\n  async setAutoFillOnPageLoadDefault(value: boolean, options?: StorageOptions): Promise<void> {\n    const account = await this.getAccount(\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n    account.settings.autoFillOnPageLoadDefault = value;\n    await this.saveAccount(\n      account,\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n  }\n\n  async getBiometricAwaitingAcceptance(options?: StorageOptions): Promise<boolean> {\n    return (\n      (await this.getGlobals(this.reconcileOptions(options, await this.defaultOnDiskOptions())))\n        ?.biometricAwaitingAcceptance ?? false\n    );\n  }\n\n  async setBiometricAwaitingAcceptance(value: boolean, options?: StorageOptions): Promise<void> {\n    const globals = await this.getGlobals(\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n    globals.biometricAwaitingAcceptance = value;\n    await this.saveGlobals(\n      globals,\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n  }\n\n  async getBiometricFingerprintValidated(options?: StorageOptions): Promise<boolean> {\n    return (\n      (await this.getGlobals(this.reconcileOptions(options, await this.defaultOnDiskOptions())))\n        ?.biometricFingerprintValidated ?? false\n    );\n  }\n\n  async setBiometricFingerprintValidated(value: boolean, options?: StorageOptions): Promise<void> {\n    const globals = await this.getGlobals(\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n    globals.biometricFingerprintValidated = value;\n    await this.saveGlobals(\n      globals,\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n  }\n\n  async getBiometricText(options?: StorageOptions): Promise<string> {\n    return (\n      await this.getGlobals(this.reconcileOptions(options, await this.defaultOnDiskOptions()))\n    )?.biometricText;\n  }\n\n  async setBiometricText(value: string, options?: StorageOptions): Promise<void> {\n    const globals = await this.getGlobals(\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n    globals.biometricText = value;\n    await this.saveGlobals(\n      globals,\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n  }\n\n  async getBiometricUnlock(options?: StorageOptions): Promise<boolean> {\n    return (\n      (await this.getAccount(this.reconcileOptions(options, await this.defaultOnDiskOptions())))\n        ?.settings?.biometricUnlock ?? false\n    );\n  }\n\n  async setBiometricUnlock(value: boolean, options?: StorageOptions): Promise<void> {\n    const account = await this.getAccount(\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n    account.settings.biometricUnlock = value;\n    await this.saveAccount(\n      account,\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n  }\n\n  async getCanAccessPremium(options?: StorageOptions): Promise<boolean> {\n    if (!(await this.getIsAuthenticated(options))) {\n      return false;\n    }\n\n    return (\n      (await this.getHasPremiumPersonally(options)) ||\n      (await this.getHasPremiumFromOrganization(options))\n    );\n  }\n\n  async getHasPremiumPersonally(options?: StorageOptions): Promise<boolean> {\n    const account = await this.getAccount(\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n    return account?.profile?.hasPremiumPersonally;\n  }\n\n  async setHasPremiumPersonally(value: boolean, options?: StorageOptions): Promise<void> {\n    const account = await this.getAccount(\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n    account.profile.hasPremiumPersonally = value;\n    await this.saveAccount(\n      account,\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n  }\n\n  async getHasPremiumFromOrganization(options?: StorageOptions): Promise<boolean> {\n    const account = await this.getAccount(\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n\n    if (account.profile?.hasPremiumFromOrganization) {\n      return true;\n    }\n\n    // TODO: older server versions won't send the hasPremiumFromOrganization flag, so we're keeping the old logic\n    // for backwards compatibility. It can be removed after everyone has upgraded.\n    const organizations = await this.getOrganizations(options);\n    if (organizations == null) {\n      return false;\n    }\n\n    for (const id of Object.keys(organizations)) {\n      const o = organizations[id];\n      if (o.enabled && o.usersGetPremium && !o.isProviderUser) {\n        return true;\n      }\n    }\n\n    return false;\n  }\n\n  async setHasPremiumFromOrganization(value: boolean, options?: StorageOptions): Promise<void> {\n    const account = await this.getAccount(\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n    account.profile.hasPremiumFromOrganization = value;\n    await this.saveAccount(\n      account,\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n  }\n\n  async getClearClipboard(options?: StorageOptions): Promise<number> {\n    return (\n      (\n        await this.getAccount(\n          this.reconcileOptions(options, await this.defaultOnDiskLocalOptions())\n        )\n      )?.settings?.clearClipboard ?? null\n    );\n  }\n\n  async setClearClipboard(value: number, options?: StorageOptions): Promise<void> {\n    const account = await this.getAccount(\n      this.reconcileOptions(options, await this.defaultOnDiskLocalOptions())\n    );\n    account.settings.clearClipboard = value;\n    await this.saveAccount(\n      account,\n      this.reconcileOptions(options, await this.defaultOnDiskLocalOptions())\n    );\n  }\n\n  async getCollapsedGroupings(options?: StorageOptions): Promise<string[]> {\n    return (\n      await this.getAccount(this.reconcileOptions(options, await this.defaultOnDiskLocalOptions()))\n    )?.settings?.collapsedGroupings;\n  }\n\n  async setCollapsedGroupings(value: string[], options?: StorageOptions): Promise<void> {\n    const account = await this.getAccount(\n      this.reconcileOptions(options, await this.defaultOnDiskLocalOptions())\n    );\n    account.settings.collapsedGroupings = value;\n    await this.saveAccount(\n      account,\n      this.reconcileOptions(options, await this.defaultOnDiskLocalOptions())\n    );\n  }\n\n  async getConvertAccountToKeyConnector(options?: StorageOptions): Promise<boolean> {\n    return (\n      await this.getAccount(this.reconcileOptions(options, await this.defaultOnDiskOptions()))\n    )?.profile?.convertAccountToKeyConnector;\n  }\n\n  async setConvertAccountToKeyConnector(value: boolean, options?: StorageOptions): Promise<void> {\n    const account = await this.getAccount(\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n    account.profile.convertAccountToKeyConnector = value;\n    await this.saveAccount(\n      account,\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n  }\n\n  async getCryptoMasterKey(options?: StorageOptions): Promise<SymmetricCryptoKey> {\n    const account = await this.getAccount(\n      this.reconcileOptions(options, await this.defaultInMemoryOptions())\n    );\n    return account?.keys?.cryptoMasterKey;\n  }\n\n  async setCryptoMasterKey(value: SymmetricCryptoKey, options?: StorageOptions): Promise<void> {\n    const account = await this.getAccount(\n      this.reconcileOptions(options, await this.defaultInMemoryOptions())\n    );\n    account.keys.cryptoMasterKey = value;\n    await this.saveAccount(\n      account,\n      this.reconcileOptions(options, await this.defaultInMemoryOptions())\n    );\n\n    if (options.userId == this.activeAccountSubject.getValue()) {\n      const nextValue = value != null;\n\n      // Avoid emitting if we are already unlocked\n      if (this.activeAccountUnlockedSubject.getValue() != nextValue) {\n        this.activeAccountUnlockedSubject.next(nextValue);\n      }\n    }\n  }\n\n  async getCryptoMasterKeyAuto(options?: StorageOptions): Promise<string> {\n    options = this.reconcileOptions(\n      this.reconcileOptions(options, { keySuffix: \"auto\" }),\n      await this.defaultSecureStorageOptions()\n    );\n    if (options?.userId == null) {\n      return null;\n    }\n    return await this.secureStorageService.get<string>(\n      `${options.userId}${partialKeys.autoKey}`,\n      options\n    );\n  }\n\n  async setCryptoMasterKeyAuto(value: string, options?: StorageOptions): Promise<void> {\n    options = this.reconcileOptions(\n      this.reconcileOptions(options, { keySuffix: \"auto\" }),\n      await this.defaultSecureStorageOptions()\n    );\n    if (options?.userId == null) {\n      return;\n    }\n    await this.saveSecureStorageKey(partialKeys.autoKey, value, options);\n  }\n\n  async getCryptoMasterKeyB64(options?: StorageOptions): Promise<string> {\n    options = this.reconcileOptions(options, await this.defaultSecureStorageOptions());\n    if (options?.userId == null) {\n      return null;\n    }\n    return await this.secureStorageService.get<string>(\n      `${options?.userId}${partialKeys.masterKey}`,\n      options\n    );\n  }\n\n  async setCryptoMasterKeyB64(value: string, options?: StorageOptions): Promise<void> {\n    options = this.reconcileOptions(options, await this.defaultSecureStorageOptions());\n    if (options?.userId == null) {\n      return;\n    }\n    await this.saveSecureStorageKey(partialKeys.masterKey, value, options);\n  }\n\n  async getCryptoMasterKeyBiometric(options?: StorageOptions): Promise<string> {\n    options = this.reconcileOptions(\n      this.reconcileOptions(options, { keySuffix: \"biometric\" }),\n      await this.defaultSecureStorageOptions()\n    );\n    if (options?.userId == null) {\n      return null;\n    }\n    return await this.secureStorageService.get<string>(\n      `${options.userId}${partialKeys.biometricKey}`,\n      options\n    );\n  }\n\n  async hasCryptoMasterKeyBiometric(options?: StorageOptions): Promise<boolean> {\n    options = this.reconcileOptions(\n      this.reconcileOptions(options, { keySuffix: \"biometric\" }),\n      await this.defaultSecureStorageOptions()\n    );\n    if (options?.userId == null) {\n      return false;\n    }\n    return await this.secureStorageService.has(\n      `${options.userId}${partialKeys.biometricKey}`,\n      options\n    );\n  }\n\n  async setCryptoMasterKeyBiometric(value: string, options?: StorageOptions): Promise<void> {\n    options = this.reconcileOptions(\n      this.reconcileOptions(options, { keySuffix: \"biometric\" }),\n      await this.defaultSecureStorageOptions()\n    );\n    if (options?.userId == null) {\n      return;\n    }\n    await this.saveSecureStorageKey(partialKeys.biometricKey, value, options);\n  }\n\n  @withPrototypeForArrayMembers(CipherView, CipherView.fromJSON)\n  async getDecryptedCiphers(options?: StorageOptions): Promise<CipherView[]> {\n    return (\n      await this.getAccount(this.reconcileOptions(options, await this.defaultInMemoryOptions()))\n    )?.data?.ciphers?.decrypted;\n  }\n\n  async setDecryptedCiphers(value: CipherView[], options?: StorageOptions): Promise<void> {\n    const account = await this.getAccount(\n      this.reconcileOptions(options, await this.defaultInMemoryOptions())\n    );\n    account.data.ciphers.decrypted = value;\n    await this.saveAccount(\n      account,\n      this.reconcileOptions(options, await this.defaultInMemoryOptions())\n    );\n  }\n\n  @withPrototypeForArrayMembers(CollectionView)\n  async getDecryptedCollections(options?: StorageOptions): Promise<CollectionView[]> {\n    return (\n      await this.getAccount(this.reconcileOptions(options, await this.defaultInMemoryOptions()))\n    )?.data?.collections?.decrypted;\n  }\n\n  async setDecryptedCollections(value: CollectionView[], options?: StorageOptions): Promise<void> {\n    const account = await this.getAccount(\n      this.reconcileOptions(options, await this.defaultInMemoryOptions())\n    );\n    account.data.collections.decrypted = value;\n    await this.saveAccount(\n      account,\n      this.reconcileOptions(options, await this.defaultInMemoryOptions())\n    );\n  }\n\n  async getDecryptedCryptoSymmetricKey(options?: StorageOptions): Promise<SymmetricCryptoKey> {\n    const account = await this.getAccount(\n      this.reconcileOptions(options, await this.defaultInMemoryOptions())\n    );\n    return account?.keys?.cryptoSymmetricKey?.decrypted;\n  }\n\n  async setDecryptedCryptoSymmetricKey(\n    value: SymmetricCryptoKey,\n    options?: StorageOptions\n  ): Promise<void> {\n    const account = await this.getAccount(\n      this.reconcileOptions(options, await this.defaultInMemoryOptions())\n    );\n    account.keys.cryptoSymmetricKey.decrypted = value;\n    await this.saveAccount(\n      account,\n      this.reconcileOptions(options, await this.defaultInMemoryOptions())\n    );\n  }\n\n  async getDecryptedOrganizationKeys(\n    options?: StorageOptions\n  ): Promise<Map<string, SymmetricCryptoKey>> {\n    const account = await this.getAccount(\n      this.reconcileOptions(options, await this.defaultInMemoryOptions())\n    );\n    return Utils.recordToMap(account?.keys?.organizationKeys?.decrypted);\n  }\n\n  async setDecryptedOrganizationKeys(\n    value: Map<string, SymmetricCryptoKey>,\n    options?: StorageOptions\n  ): Promise<void> {\n    const account = await this.getAccount(\n      this.reconcileOptions(options, await this.defaultInMemoryOptions())\n    );\n    account.keys.organizationKeys.decrypted = Utils.mapToRecord(value);\n    await this.saveAccount(\n      account,\n      this.reconcileOptions(options, await this.defaultInMemoryOptions())\n    );\n  }\n\n  @withPrototypeForArrayMembers(GeneratedPasswordHistory)\n  async getDecryptedPasswordGenerationHistory(\n    options?: StorageOptions\n  ): Promise<GeneratedPasswordHistory[]> {\n    return (\n      await this.getAccount(this.reconcileOptions(options, await this.defaultInMemoryOptions()))\n    )?.data?.passwordGenerationHistory?.decrypted;\n  }\n\n  async setDecryptedPasswordGenerationHistory(\n    value: GeneratedPasswordHistory[],\n    options?: StorageOptions\n  ): Promise<void> {\n    const account = await this.getAccount(\n      this.reconcileOptions(options, await this.defaultInMemoryOptions())\n    );\n    account.data.passwordGenerationHistory.decrypted = value;\n    await this.saveAccount(\n      account,\n      this.reconcileOptions(options, await this.defaultInMemoryOptions())\n    );\n  }\n\n  async getDecryptedPinProtected(options?: StorageOptions): Promise<EncString> {\n    return (\n      await this.getAccount(this.reconcileOptions(options, await this.defaultInMemoryOptions()))\n    )?.settings?.pinProtected?.decrypted;\n  }\n\n  async setDecryptedPinProtected(value: EncString, options?: StorageOptions): Promise<void> {\n    const account = await this.getAccount(\n      this.reconcileOptions(options, await this.defaultInMemoryOptions())\n    );\n    account.settings.pinProtected.decrypted = value;\n    await this.saveAccount(\n      account,\n      this.reconcileOptions(options, await this.defaultInMemoryOptions())\n    );\n  }\n\n  @withPrototypeForArrayMembers(Policy)\n  async getDecryptedPolicies(options?: StorageOptions): Promise<Policy[]> {\n    return (\n      await this.getAccount(this.reconcileOptions(options, await this.defaultInMemoryOptions()))\n    )?.data?.policies?.decrypted;\n  }\n\n  async setDecryptedPolicies(value: Policy[], options?: StorageOptions): Promise<void> {\n    const account = await this.getAccount(\n      this.reconcileOptions(options, await this.defaultInMemoryOptions())\n    );\n    account.data.policies.decrypted = value;\n    await this.saveAccount(\n      account,\n      this.reconcileOptions(options, await this.defaultInMemoryOptions())\n    );\n  }\n\n  async getDecryptedPrivateKey(options?: StorageOptions): Promise<ArrayBuffer> {\n    return (\n      await this.getAccount(this.reconcileOptions(options, await this.defaultInMemoryOptions()))\n    )?.keys?.privateKey.decrypted;\n  }\n\n  async setDecryptedPrivateKey(value: ArrayBuffer, options?: StorageOptions): Promise<void> {\n    const account = await this.getAccount(\n      this.reconcileOptions(options, await this.defaultInMemoryOptions())\n    );\n    account.keys.privateKey.decrypted = value;\n    await this.saveAccount(\n      account,\n      this.reconcileOptions(options, await this.defaultInMemoryOptions())\n    );\n  }\n\n  async getDecryptedProviderKeys(\n    options?: StorageOptions\n  ): Promise<Map<string, SymmetricCryptoKey>> {\n    const account = await this.getAccount(\n      this.reconcileOptions(options, await this.defaultInMemoryOptions())\n    );\n    return Utils.recordToMap(account?.keys?.providerKeys?.decrypted);\n  }\n\n  async setDecryptedProviderKeys(\n    value: Map<string, SymmetricCryptoKey>,\n    options?: StorageOptions\n  ): Promise<void> {\n    const account = await this.getAccount(\n      this.reconcileOptions(options, await this.defaultInMemoryOptions())\n    );\n    account.keys.providerKeys.decrypted = Utils.mapToRecord(value);\n    await this.saveAccount(\n      account,\n      this.reconcileOptions(options, await this.defaultInMemoryOptions())\n    );\n  }\n\n  @withPrototypeForArrayMembers(SendView)\n  async getDecryptedSends(options?: StorageOptions): Promise<SendView[]> {\n    return (\n      await this.getAccount(this.reconcileOptions(options, await this.defaultInMemoryOptions()))\n    )?.data?.sends?.decrypted;\n  }\n\n  async setDecryptedSends(value: SendView[], options?: StorageOptions): Promise<void> {\n    const account = await this.getAccount(\n      this.reconcileOptions(options, await this.defaultInMemoryOptions())\n    );\n    account.data.sends.decrypted = value;\n    await this.saveAccount(\n      account,\n      this.reconcileOptions(options, await this.defaultInMemoryOptions())\n    );\n  }\n\n  async getDefaultUriMatch(options?: StorageOptions): Promise<UriMatchType> {\n    return (\n      await this.getAccount(this.reconcileOptions(options, await this.defaultOnDiskOptions()))\n    )?.settings?.defaultUriMatch;\n  }\n\n  async setDefaultUriMatch(value: UriMatchType, options?: StorageOptions): Promise<void> {\n    const account = await this.getAccount(\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n    account.settings.defaultUriMatch = value;\n    await this.saveAccount(\n      account,\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n  }\n\n  async getDisableAddLoginNotification(options?: StorageOptions): Promise<boolean> {\n    return (\n      (await this.getAccount(this.reconcileOptions(options, await this.defaultOnDiskOptions())))\n        ?.settings?.disableAddLoginNotification ?? false\n    );\n  }\n\n  async setDisableAddLoginNotification(value: boolean, options?: StorageOptions): Promise<void> {\n    const account = await this.getAccount(\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n    account.settings.disableAddLoginNotification = value;\n    await this.saveAccount(\n      account,\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n  }\n\n  async getDisableAutoBiometricsPrompt(options?: StorageOptions): Promise<boolean> {\n    return (\n      (await this.getAccount(this.reconcileOptions(options, await this.defaultOnDiskOptions())))\n        ?.settings?.disableAutoBiometricsPrompt ?? false\n    );\n  }\n\n  async setDisableAutoBiometricsPrompt(value: boolean, options?: StorageOptions): Promise<void> {\n    const account = await this.getAccount(\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n    account.settings.disableAutoBiometricsPrompt = value;\n    await this.saveAccount(\n      account,\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n  }\n\n  async getDisableAutoTotpCopy(options?: StorageOptions): Promise<boolean> {\n    return (\n      (await this.getAccount(this.reconcileOptions(options, await this.defaultOnDiskOptions())))\n        ?.settings?.disableAutoTotpCopy ?? false\n    );\n  }\n\n  async setDisableAutoTotpCopy(value: boolean, options?: StorageOptions): Promise<void> {\n    const account = await this.getAccount(\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n    account.settings.disableAutoTotpCopy = value;\n    await this.saveAccount(\n      account,\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n  }\n\n  async getDisableBadgeCounter(options?: StorageOptions): Promise<boolean> {\n    return (\n      (await this.getAccount(this.reconcileOptions(options, await this.defaultOnDiskOptions())))\n        ?.settings?.disableBadgeCounter ?? false\n    );\n  }\n\n  async setDisableBadgeCounter(value: boolean, options?: StorageOptions): Promise<void> {\n    const account = await this.getAccount(\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n    account.settings.disableBadgeCounter = value;\n    await this.saveAccount(\n      account,\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n  }\n\n  async getDisableChangedPasswordNotification(options?: StorageOptions): Promise<boolean> {\n    return (\n      (await this.getAccount(this.reconcileOptions(options, await this.defaultOnDiskOptions())))\n        ?.settings?.disableChangedPasswordNotification ?? false\n    );\n  }\n\n  async setDisableChangedPasswordNotification(\n    value: boolean,\n    options?: StorageOptions\n  ): Promise<void> {\n    const account = await this.getAccount(\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n    account.settings.disableChangedPasswordNotification = value;\n    await this.saveAccount(\n      account,\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n  }\n\n  async getDisableContextMenuItem(options?: StorageOptions): Promise<boolean> {\n    return (\n      (await this.getAccount(this.reconcileOptions(options, await this.defaultOnDiskOptions())))\n        ?.settings?.disableContextMenuItem ?? false\n    );\n  }\n\n  async setDisableContextMenuItem(value: boolean, options?: StorageOptions): Promise<void> {\n    const account = await this.getAccount(\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n    account.settings.disableContextMenuItem = value;\n    await this.saveAccount(\n      account,\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n  }\n\n  async getDisableFavicon(options?: StorageOptions): Promise<boolean> {\n    return (\n      (\n        await this.getGlobals(\n          this.reconcileOptions(options, await this.defaultOnDiskLocalOptions())\n        )\n      )?.disableFavicon ?? false\n    );\n  }\n\n  async setDisableFavicon(value: boolean, options?: StorageOptions): Promise<void> {\n    const globals = await this.getGlobals(\n      this.reconcileOptions(options, await this.defaultOnDiskLocalOptions())\n    );\n    globals.disableFavicon = value;\n    await this.saveGlobals(\n      globals,\n      this.reconcileOptions(options, await this.defaultOnDiskLocalOptions())\n    );\n  }\n\n  async getDisableGa(options?: StorageOptions): Promise<boolean> {\n    return (\n      (await this.getAccount(this.reconcileOptions(options, await this.defaultOnDiskOptions())))\n        ?.settings?.disableGa ?? false\n    );\n  }\n\n  async setDisableGa(value: boolean, options?: StorageOptions): Promise<void> {\n    const account = await this.getAccount(\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n    account.settings.disableGa = value;\n    await this.saveAccount(\n      account,\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n  }\n\n  async getDontShowCardsCurrentTab(options?: StorageOptions): Promise<boolean> {\n    return (\n      (await this.getAccount(this.reconcileOptions(options, await this.defaultOnDiskOptions())))\n        ?.settings?.dontShowCardsCurrentTab ?? false\n    );\n  }\n\n  async setDontShowCardsCurrentTab(value: boolean, options?: StorageOptions): Promise<void> {\n    const account = await this.getAccount(\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n    account.settings.dontShowCardsCurrentTab = value;\n    await this.saveAccount(\n      account,\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n  }\n\n  async getDontShowIdentitiesCurrentTab(options?: StorageOptions): Promise<boolean> {\n    return (\n      (await this.getAccount(this.reconcileOptions(options, await this.defaultOnDiskOptions())))\n        ?.settings?.dontShowIdentitiesCurrentTab ?? false\n    );\n  }\n\n  async setDontShowIdentitiesCurrentTab(value: boolean, options?: StorageOptions): Promise<void> {\n    const account = await this.getAccount(\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n    account.settings.dontShowIdentitiesCurrentTab = value;\n    await this.saveAccount(\n      account,\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n  }\n\n  async getDuckDuckGoSharedKey(options?: StorageOptions): Promise<string> {\n    options = this.reconcileOptions(options, await this.defaultSecureStorageOptions());\n    if (options?.userId == null) {\n      return null;\n    }\n    return await this.secureStorageService.get<string>(DDG_SHARED_KEY, options);\n  }\n\n  async setDuckDuckGoSharedKey(value: string, options?: StorageOptions): Promise<void> {\n    options = this.reconcileOptions(options, await this.defaultSecureStorageOptions());\n    if (options?.userId == null) {\n      return;\n    }\n    value == null\n      ? await this.secureStorageService.remove(DDG_SHARED_KEY, options)\n      : await this.secureStorageService.save(DDG_SHARED_KEY, value, options);\n  }\n\n  async getEmail(options?: StorageOptions): Promise<string> {\n    return (\n      await this.getAccount(this.reconcileOptions(options, await this.defaultInMemoryOptions()))\n    )?.profile?.email;\n  }\n\n  async setEmail(value: string, options?: StorageOptions): Promise<void> {\n    const account = await this.getAccount(\n      this.reconcileOptions(options, await this.defaultInMemoryOptions())\n    );\n    account.profile.email = value;\n    await this.saveAccount(\n      account,\n      this.reconcileOptions(options, await this.defaultInMemoryOptions())\n    );\n  }\n\n  async getEmailVerified(options?: StorageOptions): Promise<boolean> {\n    return (\n      (await this.getAccount(this.reconcileOptions(options, await this.defaultOnDiskOptions())))\n        ?.profile.emailVerified ?? false\n    );\n  }\n\n  async setEmailVerified(value: boolean, options?: StorageOptions): Promise<void> {\n    const account = await this.getAccount(\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n    account.profile.emailVerified = value;\n    await this.saveAccount(\n      account,\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n  }\n\n  async getEnableAlwaysOnTop(options?: StorageOptions): Promise<boolean> {\n    const accountPreference = (\n      await this.getAccount(this.reconcileOptions(options, await this.defaultOnDiskOptions()))\n    )?.settings?.enableAlwaysOnTop;\n    const globalPreference = (\n      await this.getGlobals(this.reconcileOptions(options, await this.defaultOnDiskOptions()))\n    )?.enableAlwaysOnTop;\n    return accountPreference ?? globalPreference ?? false;\n  }\n\n  async setEnableAlwaysOnTop(value: boolean, options?: StorageOptions): Promise<void> {\n    const account = await this.getAccount(\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n    account.settings.enableAlwaysOnTop = value;\n    await this.saveAccount(\n      account,\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n\n    const globals = await this.getGlobals(\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n    globals.enableAlwaysOnTop = value;\n    await this.saveGlobals(\n      globals,\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n  }\n\n  async getEnableAutoFillOnPageLoad(options?: StorageOptions): Promise<boolean> {\n    return (\n      (await this.getAccount(this.reconcileOptions(options, await this.defaultOnDiskOptions())))\n        ?.settings?.enableAutoFillOnPageLoad ?? false\n    );\n  }\n\n  async setEnableAutoFillOnPageLoad(value: boolean, options?: StorageOptions): Promise<void> {\n    const account = await this.getAccount(\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n    account.settings.enableAutoFillOnPageLoad = value;\n    await this.saveAccount(\n      account,\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n  }\n\n  async getEnableBiometric(options?: StorageOptions): Promise<boolean> {\n    return (\n      (await this.getGlobals(this.reconcileOptions(options, await this.defaultOnDiskOptions())))\n        ?.enableBiometrics ?? false\n    );\n  }\n\n  async setEnableBiometric(value: boolean, options?: StorageOptions): Promise<void> {\n    const globals = await this.getGlobals(\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n    globals.enableBiometrics = value;\n    await this.saveGlobals(\n      globals,\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n  }\n\n  async getEnableBrowserIntegration(options?: StorageOptions): Promise<boolean> {\n    return (\n      (await this.getGlobals(this.reconcileOptions(options, await this.defaultOnDiskOptions())))\n        ?.enableBrowserIntegration ?? false\n    );\n  }\n\n  async setEnableBrowserIntegration(value: boolean, options?: StorageOptions): Promise<void> {\n    const globals = await this.getGlobals(\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n    globals.enableBrowserIntegration = value;\n    await this.saveGlobals(\n      globals,\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n  }\n\n  async getEnableBrowserIntegrationFingerprint(options?: StorageOptions): Promise<boolean> {\n    return (\n      (await this.getGlobals(this.reconcileOptions(options, await this.defaultOnDiskOptions())))\n        ?.enableBrowserIntegrationFingerprint ?? false\n    );\n  }\n\n  async setEnableBrowserIntegrationFingerprint(\n    value: boolean,\n    options?: StorageOptions\n  ): Promise<void> {\n    const globals = await this.getGlobals(\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n    globals.enableBrowserIntegrationFingerprint = value;\n    await this.saveGlobals(\n      globals,\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n  }\n\n  async getEnableCloseToTray(options?: StorageOptions): Promise<boolean> {\n    return (\n      (await this.getGlobals(this.reconcileOptions(options, await this.defaultOnDiskOptions())))\n        ?.enableCloseToTray ?? false\n    );\n  }\n\n  async setEnableCloseToTray(value: boolean, options?: StorageOptions): Promise<void> {\n    const globals = await this.getGlobals(\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n    globals.enableCloseToTray = value;\n    await this.saveGlobals(\n      globals,\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n  }\n\n  async getEnableDuckDuckGoBrowserIntegration(options?: StorageOptions): Promise<boolean> {\n    return (\n      (await this.getGlobals(this.reconcileOptions(options, await this.defaultOnDiskOptions())))\n        ?.enableDuckDuckGoBrowserIntegration ?? false\n    );\n  }\n\n  async setEnableDuckDuckGoBrowserIntegration(\n    value: boolean,\n    options?: StorageOptions\n  ): Promise<void> {\n    const globals = await this.getGlobals(\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n    globals.enableDuckDuckGoBrowserIntegration = value;\n    await this.saveGlobals(\n      globals,\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n  }\n\n  async getEnableFullWidth(options?: StorageOptions): Promise<boolean> {\n    return (\n      (\n        await this.getAccount(\n          this.reconcileOptions(options, await this.defaultOnDiskLocalOptions())\n        )\n      )?.settings?.enableFullWidth ?? false\n    );\n  }\n\n  async setEnableFullWidth(value: boolean, options?: StorageOptions): Promise<void> {\n    const account = await this.getAccount(\n      this.reconcileOptions(options, await this.defaultOnDiskLocalOptions())\n    );\n    account.settings.enableFullWidth = value;\n    await this.saveAccount(\n      account,\n      this.reconcileOptions(options, await this.defaultOnDiskLocalOptions())\n    );\n  }\n\n  async getEnableMinimizeToTray(options?: StorageOptions): Promise<boolean> {\n    return (\n      (await this.getGlobals(this.reconcileOptions(options, await this.defaultOnDiskOptions())))\n        ?.enableMinimizeToTray ?? false\n    );\n  }\n\n  async setEnableMinimizeToTray(value: boolean, options?: StorageOptions): Promise<void> {\n    const globals = await this.getGlobals(\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n    globals.enableMinimizeToTray = value;\n    await this.saveGlobals(\n      globals,\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n  }\n\n  async getEnableStartToTray(options?: StorageOptions): Promise<boolean> {\n    return (\n      (await this.getGlobals(this.reconcileOptions(options, await this.defaultOnDiskOptions())))\n        ?.enableStartToTray ?? false\n    );\n  }\n\n  async setEnableStartToTray(value: boolean, options?: StorageOptions): Promise<void> {\n    const globals = await this.getGlobals(\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n    globals.enableStartToTray = value;\n    await this.saveGlobals(\n      globals,\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n  }\n\n  async getEnableTray(options?: StorageOptions): Promise<boolean> {\n    return (\n      (await this.getGlobals(this.reconcileOptions(options, await this.defaultOnDiskOptions())))\n        ?.enableTray ?? false\n    );\n  }\n\n  async setEnableTray(value: boolean, options?: StorageOptions): Promise<void> {\n    const globals = await this.getGlobals(\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n    globals.enableTray = value;\n    await this.saveGlobals(\n      globals,\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n  }\n\n  @withPrototypeForObjectValues(CipherData)\n  async getEncryptedCiphers(options?: StorageOptions): Promise<{ [id: string]: CipherData }> {\n    return (\n      await this.getAccount(this.reconcileOptions(options, await this.defaultOnDiskMemoryOptions()))\n    )?.data?.ciphers?.encrypted;\n  }\n\n  async setEncryptedCiphers(\n    value: { [id: string]: CipherData },\n    options?: StorageOptions\n  ): Promise<void> {\n    const account = await this.getAccount(\n      this.reconcileOptions(options, await this.defaultOnDiskMemoryOptions())\n    );\n    account.data.ciphers.encrypted = value;\n    await this.saveAccount(\n      account,\n      this.reconcileOptions(options, await this.defaultOnDiskMemoryOptions())\n    );\n  }\n\n  @withPrototypeForObjectValues(CollectionData)\n  async getEncryptedCollections(\n    options?: StorageOptions\n  ): Promise<{ [id: string]: CollectionData }> {\n    return (\n      await this.getAccount(this.reconcileOptions(options, await this.defaultOnDiskMemoryOptions()))\n    )?.data?.collections?.encrypted;\n  }\n\n  async setEncryptedCollections(\n    value: { [id: string]: CollectionData },\n    options?: StorageOptions\n  ): Promise<void> {\n    const account = await this.getAccount(\n      this.reconcileOptions(options, await this.defaultOnDiskMemoryOptions())\n    );\n    account.data.collections.encrypted = value;\n    await this.saveAccount(\n      account,\n      this.reconcileOptions(options, await this.defaultOnDiskMemoryOptions())\n    );\n  }\n\n  async getEncryptedCryptoSymmetricKey(options?: StorageOptions): Promise<string> {\n    return (\n      await this.getAccount(this.reconcileOptions(options, await this.defaultOnDiskOptions()))\n    )?.keys.cryptoSymmetricKey.encrypted;\n  }\n\n  async setEncryptedCryptoSymmetricKey(value: string, options?: StorageOptions): Promise<void> {\n    const account = await this.getAccount(\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n    account.keys.cryptoSymmetricKey.encrypted = value;\n    await this.saveAccount(\n      account,\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n  }\n\n  @withPrototypeForObjectValues(FolderData)\n  async getEncryptedFolders(options?: StorageOptions): Promise<{ [id: string]: FolderData }> {\n    return (\n      await this.getAccount(this.reconcileOptions(options, await this.defaultOnDiskMemoryOptions()))\n    )?.data?.folders?.encrypted;\n  }\n\n  async setEncryptedFolders(\n    value: { [id: string]: FolderData },\n    options?: StorageOptions\n  ): Promise<void> {\n    const account = await this.getAccount(\n      this.reconcileOptions(options, await this.defaultOnDiskMemoryOptions())\n    );\n    account.data.folders.encrypted = value;\n    await this.saveAccount(\n      account,\n      this.reconcileOptions(options, await this.defaultOnDiskMemoryOptions())\n    );\n  }\n\n  async getEncryptedOrganizationKeys(\n    options?: StorageOptions\n  ): Promise<{ [orgId: string]: EncryptedOrganizationKeyData }> {\n    return (\n      await this.getAccount(this.reconcileOptions(options, await this.defaultOnDiskOptions()))\n    )?.keys?.organizationKeys.encrypted;\n  }\n\n  async setEncryptedOrganizationKeys(\n    value: { [orgId: string]: EncryptedOrganizationKeyData },\n    options?: StorageOptions\n  ): Promise<void> {\n    const account = await this.getAccount(\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n    account.keys.organizationKeys.encrypted = value;\n    await this.saveAccount(\n      account,\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n  }\n\n  @withPrototypeForArrayMembers(GeneratedPasswordHistory)\n  async getEncryptedPasswordGenerationHistory(\n    options?: StorageOptions\n  ): Promise<GeneratedPasswordHistory[]> {\n    return (\n      await this.getAccount(this.reconcileOptions(options, await this.defaultOnDiskOptions()))\n    )?.data?.passwordGenerationHistory?.encrypted;\n  }\n\n  async setEncryptedPasswordGenerationHistory(\n    value: GeneratedPasswordHistory[],\n    options?: StorageOptions\n  ): Promise<void> {\n    const account = await this.getAccount(\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n    account.data.passwordGenerationHistory.encrypted = value;\n    await this.saveAccount(\n      account,\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n  }\n\n  async getEncryptedPinProtected(options?: StorageOptions): Promise<string> {\n    return (\n      await this.getAccount(this.reconcileOptions(options, await this.defaultOnDiskOptions()))\n    )?.settings?.pinProtected?.encrypted;\n  }\n\n  async setEncryptedPinProtected(value: string, options?: StorageOptions): Promise<void> {\n    const account = await this.getAccount(\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n    account.settings.pinProtected.encrypted = value;\n    await this.saveAccount(\n      account,\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n  }\n\n  @withPrototypeForObjectValues(PolicyData)\n  async getEncryptedPolicies(options?: StorageOptions): Promise<{ [id: string]: PolicyData }> {\n    return (\n      await this.getAccount(this.reconcileOptions(options, await this.defaultOnDiskOptions()))\n    )?.data?.policies?.encrypted;\n  }\n\n  async setEncryptedPolicies(\n    value: { [id: string]: PolicyData },\n    options?: StorageOptions\n  ): Promise<void> {\n    const account = await this.getAccount(\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n    account.data.policies.encrypted = value;\n    await this.saveAccount(\n      account,\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n  }\n\n  async getEncryptedPrivateKey(options?: StorageOptions): Promise<string> {\n    const account = await this.getAccount(\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n    return account?.keys?.privateKey?.encrypted;\n  }\n\n  async setEncryptedPrivateKey(value: string, options?: StorageOptions): Promise<void> {\n    const account = await this.getAccount(\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n    account.keys.privateKey.encrypted = value;\n    await this.saveAccount(\n      account,\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n  }\n\n  async getEncryptedProviderKeys(options?: StorageOptions): Promise<any> {\n    return (\n      await this.getAccount(this.reconcileOptions(options, await this.defaultOnDiskOptions()))\n    )?.keys?.providerKeys?.encrypted;\n  }\n\n  async setEncryptedProviderKeys(value: any, options?: StorageOptions): Promise<void> {\n    const account = await this.getAccount(\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n    account.keys.providerKeys.encrypted = value;\n    await this.saveAccount(\n      account,\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n  }\n\n  @withPrototypeForObjectValues(SendData)\n  async getEncryptedSends(options?: StorageOptions): Promise<{ [id: string]: SendData }> {\n    return (\n      await this.getAccount(this.reconcileOptions(options, await this.defaultOnDiskMemoryOptions()))\n    )?.data?.sends.encrypted;\n  }\n\n  async setEncryptedSends(\n    value: { [id: string]: SendData },\n    options?: StorageOptions\n  ): Promise<void> {\n    const account = await this.getAccount(\n      this.reconcileOptions(options, await this.defaultOnDiskMemoryOptions())\n    );\n    account.data.sends.encrypted = value;\n    await this.saveAccount(\n      account,\n      this.reconcileOptions(options, await this.defaultOnDiskMemoryOptions())\n    );\n  }\n\n  async getEntityId(options?: StorageOptions): Promise<string> {\n    return (\n      await this.getAccount(this.reconcileOptions(options, await this.defaultOnDiskLocalOptions()))\n    )?.profile?.entityId;\n  }\n\n  async setEntityId(value: string, options?: StorageOptions): Promise<void> {\n    const account = await this.getAccount(\n      this.reconcileOptions(options, await this.defaultOnDiskLocalOptions())\n    );\n    account.profile.entityId = value;\n    await this.saveAccount(\n      account,\n      this.reconcileOptions(options, await this.defaultOnDiskLocalOptions())\n    );\n  }\n\n  async getEntityType(options?: StorageOptions): Promise<any> {\n    return (\n      await this.getAccount(this.reconcileOptions(options, await this.defaultOnDiskLocalOptions()))\n    )?.profile?.entityType;\n  }\n\n  async setEntityType(value: string, options?: StorageOptions): Promise<void> {\n    const account = await this.getAccount(\n      this.reconcileOptions(options, await this.defaultOnDiskLocalOptions())\n    );\n    account.profile.entityType = value;\n    await this.saveAccount(\n      account,\n      this.reconcileOptions(options, await this.defaultOnDiskLocalOptions())\n    );\n  }\n\n  async getEnvironmentUrls(options?: StorageOptions): Promise<EnvironmentUrls> {\n    if ((await this.state())?.activeUserId == null) {\n      return await this.getGlobalEnvironmentUrls(options);\n    }\n    options = this.reconcileOptions(options, await this.defaultOnDiskOptions());\n    return (await this.getAccount(options))?.settings?.environmentUrls ?? new EnvironmentUrls();\n  }\n\n  async setEnvironmentUrls(value: EnvironmentUrls, options?: StorageOptions): Promise<void> {\n    // Global values are set on each change and the current global settings are passed to any newly authed accounts.\n    // This is to allow setting environement values before an account is active, while still allowing individual accounts to have their own environments.\n    const globals = await this.getGlobals(\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n    globals.environmentUrls = value;\n    await this.saveGlobals(\n      globals,\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n  }\n\n  async getEquivalentDomains(options?: StorageOptions): Promise<any> {\n    return (\n      await this.getAccount(this.reconcileOptions(options, await this.defaultOnDiskOptions()))\n    )?.settings?.equivalentDomains;\n  }\n\n  async setEquivalentDomains(value: string, options?: StorageOptions): Promise<void> {\n    const account = await this.getAccount(\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n    account.settings.equivalentDomains = value;\n    await this.saveAccount(\n      account,\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n  }\n\n  @withPrototypeForArrayMembers(EventData)\n  async getEventCollection(options?: StorageOptions): Promise<EventData[]> {\n    return (\n      await this.getAccount(this.reconcileOptions(options, await this.defaultOnDiskOptions()))\n    )?.data?.eventCollection;\n  }\n\n  async setEventCollection(value: EventData[], options?: StorageOptions): Promise<void> {\n    const account = await this.getAccount(\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n    account.data.eventCollection = value;\n    await this.saveAccount(\n      account,\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n  }\n\n  async getEverBeenUnlocked(options?: StorageOptions): Promise<boolean> {\n    return (\n      (await this.getAccount(this.reconcileOptions(options, await this.defaultInMemoryOptions())))\n        ?.profile?.everBeenUnlocked ?? false\n    );\n  }\n\n  async setEverBeenUnlocked(value: boolean, options?: StorageOptions): Promise<void> {\n    const account = await this.getAccount(\n      this.reconcileOptions(options, await this.defaultInMemoryOptions())\n    );\n    account.profile.everBeenUnlocked = value;\n    await this.saveAccount(\n      account,\n      this.reconcileOptions(options, await this.defaultInMemoryOptions())\n    );\n  }\n\n  async getForcePasswordReset(options?: StorageOptions): Promise<boolean> {\n    return (\n      (await this.getAccount(this.reconcileOptions(options, await this.defaultInMemoryOptions())))\n        ?.profile?.forcePasswordReset ?? false\n    );\n  }\n\n  async setForcePasswordReset(value: boolean, options?: StorageOptions): Promise<void> {\n    const account = await this.getAccount(\n      this.reconcileOptions(options, await this.defaultInMemoryOptions())\n    );\n    account.profile.forcePasswordReset = value;\n    await this.saveAccount(\n      account,\n      this.reconcileOptions(options, await this.defaultInMemoryOptions())\n    );\n  }\n\n  async getInstalledVersion(options?: StorageOptions): Promise<string> {\n    return (\n      await this.getGlobals(this.reconcileOptions(options, await this.defaultOnDiskOptions()))\n    )?.installedVersion;\n  }\n\n  async setInstalledVersion(value: string, options?: StorageOptions): Promise<void> {\n    const globals = await this.getGlobals(\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n    globals.installedVersion = value;\n    await this.saveGlobals(\n      globals,\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n  }\n\n  async getIsAuthenticated(options?: StorageOptions): Promise<boolean> {\n    return (await this.getAccessToken(options)) != null && (await this.getUserId(options)) != null;\n  }\n\n  async getKdfConfig(options?: StorageOptions): Promise<KdfConfig> {\n    const iterations = (\n      await this.getAccount(this.reconcileOptions(options, await this.defaultOnDiskOptions()))\n    )?.profile?.kdfIterations;\n    const memory = (\n      await this.getAccount(this.reconcileOptions(options, await this.defaultOnDiskOptions()))\n    )?.profile?.kdfMemory;\n    const parallelism = (\n      await this.getAccount(this.reconcileOptions(options, await this.defaultOnDiskOptions()))\n    )?.profile?.kdfParallelism;\n    return new KdfConfig(iterations, memory, parallelism);\n  }\n\n  async setKdfConfig(config: KdfConfig, options?: StorageOptions): Promise<void> {\n    const account = await this.getAccount(\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n    account.profile.kdfIterations = config.iterations;\n    account.profile.kdfMemory = config.memory;\n    account.profile.kdfParallelism = config.parallelism;\n    await this.saveAccount(\n      account,\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n  }\n\n  async getKdfType(options?: StorageOptions): Promise<KdfType> {\n    return (\n      await this.getAccount(this.reconcileOptions(options, await this.defaultOnDiskOptions()))\n    )?.profile?.kdfType;\n  }\n\n  async setKdfType(value: KdfType, options?: StorageOptions): Promise<void> {\n    const account = await this.getAccount(\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n    account.profile.kdfType = value;\n    await this.saveAccount(\n      account,\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n  }\n\n  async getKeyHash(options?: StorageOptions): Promise<string> {\n    return (\n      await this.getAccount(this.reconcileOptions(options, await this.defaultOnDiskOptions()))\n    )?.profile?.keyHash;\n  }\n\n  async setKeyHash(value: string, options?: StorageOptions): Promise<void> {\n    const account = await this.getAccount(\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n    account.profile.keyHash = value;\n    await this.saveAccount(\n      account,\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n  }\n\n  async getLastActive(options?: StorageOptions): Promise<number> {\n    options = this.reconcileOptions(options, await this.defaultOnDiskOptions());\n\n    const accountActivity = await this.storageService.get<{ [userId: string]: number }>(\n      keys.accountActivity,\n      options\n    );\n\n    if (accountActivity == null || Object.keys(accountActivity).length < 1) {\n      return null;\n    }\n\n    return accountActivity[options.userId];\n  }\n\n  async setLastActive(value: number, options?: StorageOptions): Promise<void> {\n    options = this.reconcileOptions(options, await this.defaultOnDiskOptions());\n    if (options.userId == null) {\n      return;\n    }\n    const accountActivity =\n      (await this.storageService.get<{ [userId: string]: number }>(\n        keys.accountActivity,\n        options\n      )) ?? {};\n    accountActivity[options.userId] = value;\n    await this.storageService.save(keys.accountActivity, accountActivity, options);\n  }\n\n  async getLastSync(options?: StorageOptions): Promise<string> {\n    return (\n      await this.getAccount(this.reconcileOptions(options, await this.defaultOnDiskMemoryOptions()))\n    )?.profile?.lastSync;\n  }\n\n  async setLastSync(value: string, options?: StorageOptions): Promise<void> {\n    const account = await this.getAccount(\n      this.reconcileOptions(options, await this.defaultOnDiskMemoryOptions())\n    );\n    account.profile.lastSync = value;\n    await this.saveAccount(\n      account,\n      this.reconcileOptions(options, await this.defaultOnDiskMemoryOptions())\n    );\n  }\n\n  async getLocalData(options?: StorageOptions): Promise<{ [cipherId: string]: LocalData }> {\n    return (\n      await this.getAccount(this.reconcileOptions(options, await this.defaultOnDiskLocalOptions()))\n    )?.data?.localData;\n  }\n\n  async setLocalData(\n    value: { [cipherId: string]: LocalData },\n    options?: StorageOptions\n  ): Promise<void> {\n    const account = await this.getAccount(\n      this.reconcileOptions(options, await this.defaultOnDiskLocalOptions())\n    );\n    account.data.localData = value;\n    await this.saveAccount(\n      account,\n      this.reconcileOptions(options, await this.defaultOnDiskLocalOptions())\n    );\n  }\n\n  async getLocale(options?: StorageOptions): Promise<string> {\n    return (\n      await this.getGlobals(this.reconcileOptions(options, await this.defaultOnDiskLocalOptions()))\n    )?.locale;\n  }\n\n  async setLocale(value: string, options?: StorageOptions): Promise<void> {\n    const globals = await this.getGlobals(\n      this.reconcileOptions(options, await this.defaultOnDiskLocalOptions())\n    );\n    globals.locale = value;\n    await this.saveGlobals(\n      globals,\n      this.reconcileOptions(options, await this.defaultOnDiskLocalOptions())\n    );\n  }\n\n  async getMainWindowSize(options?: StorageOptions): Promise<number> {\n    return (\n      await this.getGlobals(this.reconcileOptions(options, await this.defaultInMemoryOptions()))\n    )?.mainWindowSize;\n  }\n\n  async setMainWindowSize(value: number, options?: StorageOptions): Promise<void> {\n    const globals = await this.getGlobals(\n      this.reconcileOptions(options, await this.defaultInMemoryOptions())\n    );\n    globals.mainWindowSize = value;\n    await this.saveGlobals(\n      globals,\n      this.reconcileOptions(options, await this.defaultInMemoryOptions())\n    );\n  }\n\n  async getMinimizeOnCopyToClipboard(options?: StorageOptions): Promise<boolean> {\n    return (\n      (await this.getAccount(this.reconcileOptions(options, await this.defaultOnDiskOptions())))\n        ?.settings?.minimizeOnCopyToClipboard ?? false\n    );\n  }\n\n  async setMinimizeOnCopyToClipboard(value: boolean, options?: StorageOptions): Promise<void> {\n    const account = await this.getAccount(\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n    account.settings.minimizeOnCopyToClipboard = value;\n    await this.saveAccount(\n      account,\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n  }\n\n  async getNeverDomains(options?: StorageOptions): Promise<{ [id: string]: any }> {\n    return (\n      await this.getAccount(this.reconcileOptions(options, await this.defaultOnDiskOptions()))\n    )?.settings?.neverDomains;\n  }\n\n  async setNeverDomains(value: { [id: string]: any }, options?: StorageOptions): Promise<void> {\n    const account = await this.getAccount(\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n    account.settings.neverDomains = value;\n    await this.saveAccount(\n      account,\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n  }\n\n  async getNoAutoPromptBiometrics(options?: StorageOptions): Promise<boolean> {\n    return (\n      (await this.getGlobals(this.reconcileOptions(options, await this.defaultOnDiskOptions())))\n        ?.noAutoPromptBiometrics ?? false\n    );\n  }\n\n  async setNoAutoPromptBiometrics(value: boolean, options?: StorageOptions): Promise<void> {\n    const globals = await this.getGlobals(\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n    globals.noAutoPromptBiometrics = value;\n    await this.saveGlobals(\n      globals,\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n  }\n\n  async getNoAutoPromptBiometricsText(options?: StorageOptions): Promise<string> {\n    return (\n      await this.getGlobals(this.reconcileOptions(options, await this.defaultOnDiskOptions()))\n    )?.noAutoPromptBiometricsText;\n  }\n\n  async setNoAutoPromptBiometricsText(value: string, options?: StorageOptions): Promise<void> {\n    const globals = await this.getGlobals(\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n    globals.noAutoPromptBiometricsText = value;\n    await this.saveGlobals(\n      globals,\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n  }\n\n  async getOpenAtLogin(options?: StorageOptions): Promise<boolean> {\n    return (\n      (await this.getGlobals(this.reconcileOptions(options, await this.defaultOnDiskOptions())))\n        ?.openAtLogin ?? false\n    );\n  }\n\n  async setOpenAtLogin(value: boolean, options?: StorageOptions): Promise<void> {\n    const globals = await this.getGlobals(\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n    globals.openAtLogin = value;\n    await this.saveGlobals(\n      globals,\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n  }\n\n  async getOrganizationInvitation(options?: StorageOptions): Promise<any> {\n    return (\n      await this.getGlobals(this.reconcileOptions(options, await this.defaultInMemoryOptions()))\n    )?.organizationInvitation;\n  }\n\n  async setOrganizationInvitation(value: any, options?: StorageOptions): Promise<void> {\n    const globals = await this.getGlobals(\n      this.reconcileOptions(options, await this.defaultInMemoryOptions())\n    );\n    globals.organizationInvitation = value;\n    await this.saveGlobals(\n      globals,\n      this.reconcileOptions(options, await this.defaultInMemoryOptions())\n    );\n  }\n\n  /**\n   * @deprecated Do not call this directly, use OrganizationService\n   */\n  async getOrganizations(options?: StorageOptions): Promise<{ [id: string]: OrganizationData }> {\n    return (\n      await this.getAccount(this.reconcileOptions(options, await this.defaultOnDiskOptions()))\n    )?.data?.organizations;\n  }\n\n  /**\n   * @deprecated Do not call this directly, use OrganizationService\n   */\n  async setOrganizations(\n    value: { [id: string]: OrganizationData },\n    options?: StorageOptions\n  ): Promise<void> {\n    const account = await this.getAccount(\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n    account.data.organizations = value;\n    await this.saveAccount(\n      account,\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n  }\n\n  async getPasswordGenerationOptions(options?: StorageOptions): Promise<any> {\n    return (\n      await this.getAccount(this.reconcileOptions(options, await this.defaultOnDiskLocalOptions()))\n    )?.settings?.passwordGenerationOptions;\n  }\n\n  async setPasswordGenerationOptions(value: any, options?: StorageOptions): Promise<void> {\n    const account = await this.getAccount(\n      this.reconcileOptions(options, await this.defaultOnDiskLocalOptions())\n    );\n    account.settings.passwordGenerationOptions = value;\n    await this.saveAccount(\n      account,\n      this.reconcileOptions(options, await this.defaultOnDiskLocalOptions())\n    );\n  }\n\n  async getUsernameGenerationOptions(options?: StorageOptions): Promise<any> {\n    return (\n      await this.getAccount(this.reconcileOptions(options, await this.defaultOnDiskLocalOptions()))\n    )?.settings?.usernameGenerationOptions;\n  }\n\n  async setUsernameGenerationOptions(value: any, options?: StorageOptions): Promise<void> {\n    const account = await this.getAccount(\n      this.reconcileOptions(options, await this.defaultOnDiskLocalOptions())\n    );\n    account.settings.usernameGenerationOptions = value;\n    await this.saveAccount(\n      account,\n      this.reconcileOptions(options, await this.defaultOnDiskLocalOptions())\n    );\n  }\n\n  async getGeneratorOptions(options?: StorageOptions): Promise<any> {\n    return (\n      await this.getAccount(this.reconcileOptions(options, await this.defaultOnDiskLocalOptions()))\n    )?.settings?.generatorOptions;\n  }\n\n  async setGeneratorOptions(value: any, options?: StorageOptions): Promise<void> {\n    const account = await this.getAccount(\n      this.reconcileOptions(options, await this.defaultOnDiskLocalOptions())\n    );\n    account.settings.generatorOptions = value;\n    await this.saveAccount(\n      account,\n      this.reconcileOptions(options, await this.defaultOnDiskLocalOptions())\n    );\n  }\n\n  async getProtectedPin(options?: StorageOptions): Promise<string> {\n    return (\n      await this.getAccount(this.reconcileOptions(options, await this.defaultOnDiskOptions()))\n    )?.settings?.protectedPin;\n  }\n\n  async setProtectedPin(value: string, options?: StorageOptions): Promise<void> {\n    const account = await this.getAccount(\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n    account.settings.protectedPin = value;\n    await this.saveAccount(\n      account,\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n  }\n\n  @withPrototypeForObjectValues(ProviderData)\n  async getProviders(options?: StorageOptions): Promise<{ [id: string]: ProviderData }> {\n    return (\n      await this.getAccount(this.reconcileOptions(options, await this.defaultOnDiskOptions()))\n    )?.data?.providers;\n  }\n\n  async setProviders(\n    value: { [id: string]: ProviderData },\n    options?: StorageOptions\n  ): Promise<void> {\n    const account = await this.getAccount(\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n    account.data.providers = value;\n    await this.saveAccount(\n      account,\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n  }\n\n  async getPublicKey(options?: StorageOptions): Promise<ArrayBuffer> {\n    const keys = (\n      await this.getAccount(this.reconcileOptions(options, await this.defaultInMemoryOptions()))\n    )?.keys;\n    return keys?.publicKey;\n  }\n\n  async setPublicKey(value: ArrayBuffer, options?: StorageOptions): Promise<void> {\n    const account = await this.getAccount(\n      this.reconcileOptions(options, await this.defaultInMemoryOptions())\n    );\n    account.keys.publicKey = value;\n    await this.saveAccount(\n      account,\n      this.reconcileOptions(options, await this.defaultInMemoryOptions())\n    );\n  }\n\n  async getRefreshToken(options?: StorageOptions): Promise<string> {\n    options = await this.getTimeoutBasedStorageOptions(options);\n    return (await this.getAccount(options))?.tokens?.refreshToken;\n  }\n\n  async setRefreshToken(value: string, options?: StorageOptions): Promise<void> {\n    options = await this.getTimeoutBasedStorageOptions(options);\n    const account = await this.getAccount(options);\n    account.tokens.refreshToken = value;\n    await this.saveAccount(account, options);\n  }\n\n  async getRememberedEmail(options?: StorageOptions): Promise<string> {\n    return (\n      await this.getGlobals(this.reconcileOptions(options, await this.defaultOnDiskLocalOptions()))\n    )?.rememberedEmail;\n  }\n\n  async setRememberedEmail(value: string, options?: StorageOptions): Promise<void> {\n    const globals = await this.getGlobals(\n      this.reconcileOptions(options, await this.defaultOnDiskLocalOptions())\n    );\n    globals.rememberedEmail = value;\n    await this.saveGlobals(\n      globals,\n      this.reconcileOptions(options, await this.defaultOnDiskLocalOptions())\n    );\n  }\n\n  async getSecurityStamp(options?: StorageOptions): Promise<string> {\n    return (\n      await this.getAccount(this.reconcileOptions(options, await this.defaultInMemoryOptions()))\n    )?.tokens?.securityStamp;\n  }\n\n  async setSecurityStamp(value: string, options?: StorageOptions): Promise<void> {\n    const account = await this.getAccount(\n      this.reconcileOptions(options, await this.defaultInMemoryOptions())\n    );\n    account.tokens.securityStamp = value;\n    await this.saveAccount(\n      account,\n      this.reconcileOptions(options, await this.defaultInMemoryOptions())\n    );\n  }\n\n  async getSettings(options?: StorageOptions): Promise<AccountSettingsSettings> {\n    return (\n      await this.getAccount(this.reconcileOptions(options, await this.defaultOnDiskMemoryOptions()))\n    )?.settings?.settings;\n  }\n\n  async setSettings(value: AccountSettingsSettings, options?: StorageOptions): Promise<void> {\n    const account = await this.getAccount(\n      this.reconcileOptions(options, await this.defaultOnDiskMemoryOptions())\n    );\n    account.settings.settings = value;\n    await this.saveAccount(\n      account,\n      this.reconcileOptions(options, await this.defaultOnDiskMemoryOptions())\n    );\n  }\n\n  async getSsoCodeVerifier(options?: StorageOptions): Promise<string> {\n    return (\n      await this.getGlobals(this.reconcileOptions(options, await this.defaultOnDiskOptions()))\n    )?.ssoCodeVerifier;\n  }\n\n  async setSsoCodeVerifier(value: string, options?: StorageOptions): Promise<void> {\n    const globals = await this.getGlobals(\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n    globals.ssoCodeVerifier = value;\n    await this.saveGlobals(\n      globals,\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n  }\n\n  async getSsoOrgIdentifier(options?: StorageOptions): Promise<string> {\n    return (\n      await this.getGlobals(this.reconcileOptions(options, await this.defaultOnDiskLocalOptions()))\n    )?.ssoOrganizationIdentifier;\n  }\n\n  async setSsoOrganizationIdentifier(value: string, options?: StorageOptions): Promise<void> {\n    const globals = await this.getGlobals(\n      this.reconcileOptions(options, await this.defaultOnDiskLocalOptions())\n    );\n    globals.ssoOrganizationIdentifier = value;\n    await this.saveGlobals(\n      globals,\n      this.reconcileOptions(options, await this.defaultOnDiskLocalOptions())\n    );\n  }\n\n  async getSsoState(options?: StorageOptions): Promise<string> {\n    return (\n      await this.getGlobals(this.reconcileOptions(options, await this.defaultOnDiskOptions()))\n    )?.ssoState;\n  }\n\n  async setSsoState(value: string, options?: StorageOptions): Promise<void> {\n    const globals = await this.getGlobals(\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n    globals.ssoState = value;\n    await this.saveGlobals(\n      globals,\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n  }\n\n  async getTheme(options?: StorageOptions): Promise<ThemeType> {\n    return (\n      await this.getGlobals(this.reconcileOptions(options, await this.defaultOnDiskLocalOptions()))\n    )?.theme;\n  }\n\n  async setTheme(value: ThemeType, options?: StorageOptions): Promise<void> {\n    const globals = await this.getGlobals(\n      this.reconcileOptions(options, await this.defaultOnDiskLocalOptions())\n    );\n    globals.theme = value;\n    await this.saveGlobals(\n      globals,\n      this.reconcileOptions(options, await this.defaultOnDiskLocalOptions())\n    );\n  }\n\n  async getTwoFactorToken(options?: StorageOptions): Promise<string> {\n    return (\n      await this.getGlobals(this.reconcileOptions(options, await this.defaultOnDiskLocalOptions()))\n    )?.twoFactorToken;\n  }\n\n  async setTwoFactorToken(value: string, options?: StorageOptions): Promise<void> {\n    const globals = await this.getGlobals(\n      this.reconcileOptions(options, await this.defaultOnDiskLocalOptions())\n    );\n    globals.twoFactorToken = value;\n    await this.saveGlobals(\n      globals,\n      this.reconcileOptions(options, await this.defaultOnDiskLocalOptions())\n    );\n  }\n\n  async getUserId(options?: StorageOptions): Promise<string> {\n    return (\n      await this.getAccount(this.reconcileOptions(options, await this.defaultOnDiskOptions()))\n    )?.profile?.userId;\n  }\n\n  async getUsesKeyConnector(options?: StorageOptions): Promise<boolean> {\n    return (\n      await this.getAccount(this.reconcileOptions(options, await this.defaultOnDiskOptions()))\n    )?.profile?.usesKeyConnector;\n  }\n\n  async setUsesKeyConnector(value: boolean, options?: StorageOptions): Promise<void> {\n    const account = await this.getAccount(\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n    account.profile.usesKeyConnector = value;\n    await this.saveAccount(\n      account,\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n  }\n\n  async getVaultTimeout(options?: StorageOptions): Promise<number> {\n    const accountVaultTimeout = (\n      await this.getAccount(this.reconcileOptions(options, await this.defaultOnDiskLocalOptions()))\n    )?.settings?.vaultTimeout;\n    return accountVaultTimeout;\n  }\n\n  async setVaultTimeout(value: number, options?: StorageOptions): Promise<void> {\n    const account = await this.getAccount(\n      this.reconcileOptions(options, await this.defaultOnDiskLocalOptions())\n    );\n    account.settings.vaultTimeout = value;\n    await this.saveAccount(\n      account,\n      this.reconcileOptions(options, await this.defaultOnDiskLocalOptions())\n    );\n  }\n\n  async getVaultTimeoutAction(options?: StorageOptions): Promise<string> {\n    const accountVaultTimeoutAction = (\n      await this.getAccount(this.reconcileOptions(options, await this.defaultOnDiskLocalOptions()))\n    )?.settings?.vaultTimeoutAction;\n    const globalVaultTimeoutAction = (\n      await this.getGlobals(this.reconcileOptions(options, await this.defaultOnDiskLocalOptions()))\n    )?.vaultTimeoutAction;\n    return accountVaultTimeoutAction ?? globalVaultTimeoutAction;\n  }\n\n  async setVaultTimeoutAction(value: string, options?: StorageOptions): Promise<void> {\n    const account = await this.getAccount(\n      this.reconcileOptions(options, await this.defaultOnDiskLocalOptions())\n    );\n    account.settings.vaultTimeoutAction = value;\n    await this.saveAccount(\n      account,\n      this.reconcileOptions(options, await this.defaultOnDiskLocalOptions())\n    );\n  }\n\n  async getApproveLoginRequests(options?: StorageOptions): Promise<boolean> {\n    const approveLoginRequests = (\n      await this.getAccount(this.reconcileOptions(options, await this.defaultOnDiskLocalOptions()))\n    )?.settings?.approveLoginRequests;\n    return approveLoginRequests;\n  }\n\n  async setApproveLoginRequests(value: boolean, options?: StorageOptions): Promise<void> {\n    const account = await this.getAccount(\n      this.reconcileOptions(options, await this.defaultOnDiskLocalOptions())\n    );\n    account.settings.approveLoginRequests = value;\n    await this.saveAccount(\n      account,\n      this.reconcileOptions(options, await this.defaultOnDiskLocalOptions())\n    );\n  }\n\n  async getStateVersion(): Promise<number> {\n    return (await this.getGlobals(await this.defaultOnDiskLocalOptions())).stateVersion ?? 1;\n  }\n\n  async setStateVersion(value: number): Promise<void> {\n    const globals = await this.getGlobals(await this.defaultOnDiskOptions());\n    globals.stateVersion = value;\n    await this.saveGlobals(globals, await this.defaultOnDiskOptions());\n  }\n\n  async getWindow(): Promise<WindowState> {\n    const globals = await this.getGlobals(await this.defaultOnDiskOptions());\n    return globals?.window != null && Object.keys(globals.window).length > 0\n      ? globals.window\n      : new WindowState();\n  }\n\n  async setWindow(value: WindowState, options?: StorageOptions): Promise<void> {\n    const globals = await this.getGlobals(\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n    globals.window = value;\n    return await this.saveGlobals(\n      globals,\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n  }\n\n  async setServerConfig(value: ServerConfigData, options?: StorageOptions): Promise<void> {\n    const account = await this.getAccount(\n      this.reconcileOptions(options, await this.defaultOnDiskLocalOptions())\n    );\n    account.settings.serverConfig = value;\n    return await this.saveAccount(\n      account,\n      this.reconcileOptions(options, await this.defaultOnDiskLocalOptions())\n    );\n  }\n\n  async getServerConfig(options: StorageOptions): Promise<ServerConfigData> {\n    return (\n      await this.getAccount(this.reconcileOptions(options, await this.defaultOnDiskLocalOptions()))\n    )?.settings?.serverConfig;\n  }\n\n  async getAvatarColor(options?: StorageOptions): Promise<string | null | undefined> {\n    return (\n      await this.getAccount(this.reconcileOptions(options, await this.defaultOnDiskLocalOptions()))\n    )?.settings?.avatarColor;\n  }\n\n  async setAvatarColor(value: string, options?: StorageOptions): Promise<void> {\n    const account = await this.getAccount(\n      this.reconcileOptions(options, await this.defaultOnDiskLocalOptions())\n    );\n    account.settings.avatarColor = value;\n    return await this.saveAccount(\n      account,\n      this.reconcileOptions(options, await this.defaultOnDiskLocalOptions())\n    );\n  }\n\n  protected async getGlobals(options: StorageOptions): Promise<TGlobalState> {\n    let globals: TGlobalState;\n    if (this.useMemory(options.storageLocation)) {\n      globals = await this.getGlobalsFromMemory();\n    }\n\n    if (this.useDisk && globals == null) {\n      globals = await this.getGlobalsFromDisk(options);\n    }\n\n    return globals ?? this.createGlobals();\n  }\n\n  protected async saveGlobals(globals: TGlobalState, options: StorageOptions) {\n    return this.useMemory(options.storageLocation)\n      ? this.saveGlobalsToMemory(globals)\n      : await this.saveGlobalsToDisk(globals, options);\n  }\n\n  protected async getGlobalsFromMemory(): Promise<TGlobalState> {\n    return (await this.state()).globals;\n  }\n\n  protected async getGlobalsFromDisk(options: StorageOptions): Promise<TGlobalState> {\n    return await this.storageService.get<TGlobalState>(keys.global, options);\n  }\n\n  protected async saveGlobalsToMemory(globals: TGlobalState): Promise<void> {\n    await this.updateState(async (state) => {\n      state.globals = globals;\n      return state;\n    });\n  }\n\n  protected async saveGlobalsToDisk(globals: TGlobalState, options: StorageOptions): Promise<void> {\n    if (options.useSecureStorage) {\n      await this.secureStorageService.save(keys.global, globals, options);\n    } else {\n      await this.storageService.save(keys.global, globals, options);\n    }\n  }\n\n  protected async getAccount(options: StorageOptions): Promise<TAccount> {\n    try {\n      let account: TAccount;\n      if (this.useMemory(options.storageLocation)) {\n        account = await this.getAccountFromMemory(options);\n      }\n\n      if (this.useDisk(options.storageLocation) && account == null) {\n        account = await this.getAccountFromDisk(options);\n      }\n\n      return account;\n    } catch (e) {\n      this.logService.error(e);\n    }\n  }\n\n  protected async getAccountFromMemory(options: StorageOptions): Promise<TAccount> {\n    return await this.state().then(async (state) => {\n      if (state.accounts == null) {\n        return null;\n      }\n      return state.accounts[await this.getUserIdFromMemory(options)];\n    });\n  }\n\n  protected async getUserIdFromMemory(options: StorageOptions): Promise<string> {\n    return await this.state().then((state) => {\n      return options?.userId != null\n        ? state.accounts[options.userId]?.profile?.userId\n        : state.activeUserId;\n    });\n  }\n\n  protected async getAccountFromDisk(options: StorageOptions): Promise<TAccount> {\n    if (options?.userId == null && (await this.state())?.activeUserId == null) {\n      return null;\n    }\n\n    if (this.useAccountCache) {\n      const cachedAccount = this.accountDiskCache.value[options.userId];\n      if (cachedAccount != null) {\n        return cachedAccount;\n      }\n    }\n\n    const account = options?.useSecureStorage\n      ? (await this.secureStorageService.get<TAccount>(options.userId, options)) ??\n        (await this.storageService.get<TAccount>(\n          options.userId,\n          this.reconcileOptions(options, { htmlStorageLocation: HtmlStorageLocation.Local })\n        ))\n      : await this.storageService.get<TAccount>(options.userId, options);\n\n    this.setDiskCache(options.userId, account);\n    return account;\n  }\n\n  protected useMemory(storageLocation: StorageLocation) {\n    return storageLocation === StorageLocation.Memory || storageLocation === StorageLocation.Both;\n  }\n\n  protected useDisk(storageLocation: StorageLocation) {\n    return storageLocation === StorageLocation.Disk || storageLocation === StorageLocation.Both;\n  }\n\n  protected async saveAccount(\n    account: TAccount,\n    options: StorageOptions = {\n      storageLocation: StorageLocation.Both,\n      useSecureStorage: false,\n    }\n  ) {\n    return this.useMemory(options.storageLocation)\n      ? await this.saveAccountToMemory(account)\n      : await this.saveAccountToDisk(account, options);\n  }\n\n  protected async saveAccountToDisk(account: TAccount, options: StorageOptions): Promise<void> {\n    const storageLocation = options.useSecureStorage\n      ? this.secureStorageService\n      : this.storageService;\n\n    await storageLocation.save(`${options.userId}`, account, options);\n\n    this.deleteDiskCache(options.userId);\n  }\n\n  protected async saveAccountToMemory(account: TAccount): Promise<void> {\n    if (this.getAccountFromMemory({ userId: account.profile.userId }) !== null) {\n      await this.updateState((state) => {\n        return new Promise((resolve) => {\n          state.accounts[account.profile.userId] = account;\n          resolve(state);\n        });\n      });\n    }\n    await this.pushAccounts();\n  }\n\n  protected async scaffoldNewAccountStorage(account: TAccount): Promise<void> {\n    // We don't want to manipulate the referenced in memory account\n    const deepClone = JSON.parse(JSON.stringify(account));\n    await this.scaffoldNewAccountLocalStorage(deepClone);\n    await this.scaffoldNewAccountSessionStorage(deepClone);\n    await this.scaffoldNewAccountMemoryStorage(deepClone);\n  }\n\n  // TODO: There is a tech debt item for splitting up these methods - only Web uses multiple storage locations in its storageService.\n  // For now these methods exist with some redundancy to facilitate this special web requirement.\n  protected async scaffoldNewAccountLocalStorage(account: TAccount): Promise<void> {\n    const storedAccount = await this.getAccount(\n      this.reconcileOptions(\n        { userId: account.profile.userId },\n        await this.defaultOnDiskLocalOptions()\n      )\n    );\n    // EnvironmentUrls are set before authenticating and should override whatever is stored from any previous session\n    const environmentUrls = account.settings.environmentUrls;\n    if (storedAccount?.settings != null) {\n      account.settings = storedAccount.settings;\n    } else if (await this.storageService.has(keys.tempAccountSettings)) {\n      account.settings = await this.storageService.get<AccountSettings>(keys.tempAccountSettings);\n      await this.storageService.remove(keys.tempAccountSettings);\n    }\n    account.settings.environmentUrls = environmentUrls;\n    if (account.settings.vaultTimeoutAction === \"logOut\" && account.settings.vaultTimeout != null) {\n      account.tokens.accessToken = null;\n      account.tokens.refreshToken = null;\n      account.profile.apiKeyClientId = null;\n      account.keys.apiKeyClientSecret = null;\n    }\n    await this.saveAccount(\n      account,\n      this.reconcileOptions(\n        { userId: account.profile.userId },\n        await this.defaultOnDiskLocalOptions()\n      )\n    );\n  }\n\n  protected async scaffoldNewAccountMemoryStorage(account: TAccount): Promise<void> {\n    const storedAccount = await this.getAccount(\n      this.reconcileOptions(\n        { userId: account.profile.userId },\n        await this.defaultOnDiskMemoryOptions()\n      )\n    );\n    if (storedAccount?.settings != null) {\n      storedAccount.settings.environmentUrls = account.settings.environmentUrls;\n      account.settings = storedAccount.settings;\n    }\n    await this.storageService.save(\n      account.profile.userId,\n      account,\n      await this.defaultOnDiskMemoryOptions()\n    );\n    await this.saveAccount(\n      account,\n      this.reconcileOptions(\n        { userId: account.profile.userId },\n        await this.defaultOnDiskMemoryOptions()\n      )\n    );\n  }\n\n  protected async scaffoldNewAccountSessionStorage(account: TAccount): Promise<void> {\n    const storedAccount = await this.getAccount(\n      this.reconcileOptions({ userId: account.profile.userId }, await this.defaultOnDiskOptions())\n    );\n    if (storedAccount?.settings != null) {\n      storedAccount.settings.environmentUrls = account.settings.environmentUrls;\n      account.settings = storedAccount.settings;\n    }\n    await this.storageService.save(\n      account.profile.userId,\n      account,\n      await this.defaultOnDiskMemoryOptions()\n    );\n    await this.saveAccount(\n      account,\n      this.reconcileOptions({ userId: account.profile.userId }, await this.defaultOnDiskOptions())\n    );\n  }\n  //\n\n  protected async pushAccounts(): Promise<void> {\n    await this.pruneInMemoryAccounts();\n    await this.state().then((state) => {\n      if (state.accounts == null || Object.keys(state.accounts).length < 1) {\n        this.accountsSubject.next({});\n        return;\n      }\n\n      this.accountsSubject.next(state.accounts);\n    });\n  }\n\n  protected reconcileOptions(\n    requestedOptions: StorageOptions,\n    defaultOptions: StorageOptions\n  ): StorageOptions {\n    if (requestedOptions == null) {\n      return defaultOptions;\n    }\n    requestedOptions.userId = requestedOptions?.userId ?? defaultOptions.userId;\n    requestedOptions.storageLocation =\n      requestedOptions?.storageLocation ?? defaultOptions.storageLocation;\n    requestedOptions.useSecureStorage =\n      requestedOptions?.useSecureStorage ?? defaultOptions.useSecureStorage;\n    requestedOptions.htmlStorageLocation =\n      requestedOptions?.htmlStorageLocation ?? defaultOptions.htmlStorageLocation;\n    requestedOptions.keySuffix = requestedOptions?.keySuffix ?? defaultOptions.keySuffix;\n    return requestedOptions;\n  }\n\n  protected async defaultInMemoryOptions(): Promise<StorageOptions> {\n    return {\n      storageLocation: StorageLocation.Memory,\n      userId: (await this.state()).activeUserId,\n    };\n  }\n\n  protected async defaultOnDiskOptions(): Promise<StorageOptions> {\n    return {\n      storageLocation: StorageLocation.Disk,\n      htmlStorageLocation: HtmlStorageLocation.Session,\n      userId: (await this.state())?.activeUserId ?? (await this.getActiveUserIdFromStorage()),\n      useSecureStorage: false,\n    };\n  }\n\n  protected async defaultOnDiskLocalOptions(): Promise<StorageOptions> {\n    return {\n      storageLocation: StorageLocation.Disk,\n      htmlStorageLocation: HtmlStorageLocation.Local,\n      userId: (await this.state())?.activeUserId ?? (await this.getActiveUserIdFromStorage()),\n      useSecureStorage: false,\n    };\n  }\n\n  protected async defaultOnDiskMemoryOptions(): Promise<StorageOptions> {\n    return {\n      storageLocation: StorageLocation.Disk,\n      htmlStorageLocation: HtmlStorageLocation.Memory,\n      userId: (await this.state())?.activeUserId ?? (await this.getUserId()),\n      useSecureStorage: false,\n    };\n  }\n\n  protected async defaultSecureStorageOptions(): Promise<StorageOptions> {\n    return {\n      storageLocation: StorageLocation.Disk,\n      useSecureStorage: true,\n      userId: (await this.state())?.activeUserId ?? (await this.getActiveUserIdFromStorage()),\n    };\n  }\n\n  protected async getActiveUserIdFromStorage(): Promise<string> {\n    return await this.storageService.get<string>(keys.activeUserId);\n  }\n\n  protected async removeAccountFromLocalStorage(userId: string = null): Promise<void> {\n    userId = userId ?? (await this.state())?.activeUserId;\n    const storedAccount = await this.getAccount(\n      this.reconcileOptions({ userId: userId }, await this.defaultOnDiskLocalOptions())\n    );\n    await this.saveAccount(\n      this.resetAccount(storedAccount),\n      this.reconcileOptions({ userId: userId }, await this.defaultOnDiskLocalOptions())\n    );\n  }\n\n  protected async removeAccountFromSessionStorage(userId: string = null): Promise<void> {\n    userId = userId ?? (await this.state())?.activeUserId;\n    const storedAccount = await this.getAccount(\n      this.reconcileOptions({ userId: userId }, await this.defaultOnDiskOptions())\n    );\n    await this.saveAccount(\n      this.resetAccount(storedAccount),\n      this.reconcileOptions({ userId: userId }, await this.defaultOnDiskOptions())\n    );\n  }\n\n  protected async removeAccountFromSecureStorage(userId: string = null): Promise<void> {\n    userId = userId ?? (await this.state())?.activeUserId;\n    await this.setCryptoMasterKeyAuto(null, { userId: userId });\n    await this.setCryptoMasterKeyBiometric(null, { userId: userId });\n    await this.setCryptoMasterKeyB64(null, { userId: userId });\n  }\n\n  protected async removeAccountFromMemory(userId: string = null): Promise<void> {\n    await this.updateState(async (state) => {\n      userId = userId ?? state.activeUserId;\n      delete state.accounts[userId];\n\n      this.deleteDiskCache(userId);\n\n      return state;\n    });\n  }\n\n  protected async pruneInMemoryAccounts() {\n    // We preserve settings for logged out accounts, but we don't want to consider them when thinking about active account state\n    for (const userId in (await this.state())?.accounts) {\n      if (!(await this.getIsAuthenticated({ userId: userId }))) {\n        await this.removeAccountFromMemory(userId);\n      }\n    }\n  }\n\n  // settings persist even on reset, and are not effected by this method\n  protected resetAccount(account: TAccount) {\n    const persistentAccountInformation = { settings: account.settings };\n    return Object.assign(this.createAccount(), persistentAccountInformation);\n  }\n\n  protected async setAccountEnvironmentUrls(account: TAccount): Promise<TAccount> {\n    account.settings.environmentUrls = await this.getGlobalEnvironmentUrls();\n    return account;\n  }\n\n  protected async getGlobalEnvironmentUrls(options?: StorageOptions): Promise<EnvironmentUrls> {\n    options = this.reconcileOptions(options, await this.defaultOnDiskOptions());\n    return (await this.getGlobals(options)).environmentUrls ?? new EnvironmentUrls();\n  }\n\n  protected async clearDecryptedDataForActiveUser(): Promise<void> {\n    await this.updateState(async (state) => {\n      const userId = state?.activeUserId;\n      if (userId != null && state?.accounts[userId]?.data != null) {\n        state.accounts[userId].data = new AccountData();\n      }\n\n      return state;\n    });\n  }\n\n  protected createAccount(init: Partial<TAccount> = null): TAccount {\n    return this.stateFactory.createAccount(init);\n  }\n\n  protected createGlobals(init: Partial<TGlobalState> = null): TGlobalState {\n    return this.stateFactory.createGlobal(init);\n  }\n\n  protected async deAuthenticateAccount(userId: string): Promise<void> {\n    await this.setAccessToken(null, { userId: userId });\n    await this.setLastActive(null, { userId: userId });\n    await this.updateState(async (state) => {\n      state.authenticatedAccounts = state.authenticatedAccounts.filter((id) => id !== userId);\n\n      await this.storageService.save(keys.authenticatedAccounts, state.authenticatedAccounts);\n\n      return state;\n    });\n  }\n\n  protected async removeAccountFromDisk(userId: string) {\n    await this.removeAccountFromSessionStorage(userId);\n    await this.removeAccountFromLocalStorage(userId);\n    await this.removeAccountFromSecureStorage(userId);\n  }\n\n  protected async dynamicallySetActiveUser() {\n    const accounts = (await this.state())?.accounts;\n    if (accounts == null || Object.keys(accounts).length < 1) {\n      await this.setActiveUser(null);\n      return;\n    }\n    for (const userId in accounts) {\n      if (userId == null) {\n        continue;\n      }\n      if (await this.getIsAuthenticated({ userId: userId })) {\n        await this.setActiveUser(userId);\n        break;\n      }\n      await this.setActiveUser(null);\n    }\n  }\n\n  private async getTimeoutBasedStorageOptions(options?: StorageOptions): Promise<StorageOptions> {\n    const timeoutAction = await this.getVaultTimeoutAction({ userId: options?.userId });\n    const timeout = await this.getVaultTimeout({ userId: options?.userId });\n    const defaultOptions =\n      timeoutAction === \"logOut\" && timeout != null\n        ? await this.defaultInMemoryOptions()\n        : await this.defaultOnDiskOptions();\n    return this.reconcileOptions(options, defaultOptions);\n  }\n\n  private async saveSecureStorageKey(key: string, value: string, options?: StorageOptions) {\n    return value == null\n      ? await this.secureStorageService.remove(`${options.userId}${key}`, options)\n      : await this.secureStorageService.save(`${options.userId}${key}`, value, options);\n  }\n\n  protected async state(): Promise<State<TGlobalState, TAccount>> {\n    const state = await this.memoryStorageService.get<State<TGlobalState, TAccount>>(keys.state, {\n      deserializer: (s) => State.fromJSON(s, this.accountDeserializer),\n    });\n    return state;\n  }\n\n  private async setState(state: State<TGlobalState, TAccount>): Promise<void> {\n    await this.memoryStorageService.save(keys.state, state);\n  }\n\n  protected async updateState(\n    stateUpdater: (state: State<TGlobalState, TAccount>) => Promise<State<TGlobalState, TAccount>>\n  ) {\n    await this.state().then(async (state) => {\n      const updatedState = await stateUpdater(state);\n      if (updatedState == null) {\n        throw new Error(\"Attempted to update state to null value\");\n      }\n\n      await this.setState(updatedState);\n    });\n  }\n\n  private setDiskCache(key: string, value: TAccount, options?: StorageOptions) {\n    if (this.useAccountCache) {\n      this.accountDiskCache.value[key] = value;\n      this.accountDiskCache.next(this.accountDiskCache.value);\n    }\n  }\n\n  private deleteDiskCache(key: string) {\n    if (this.useAccountCache) {\n      delete this.accountDiskCache.value[key];\n      this.accountDiskCache.next(this.accountDiskCache.value);\n    }\n  }\n}\n\nfunction withPrototypeForArrayMembers<T>(\n  memberConstructor: new (...args: any[]) => T,\n  memberConverter: (input: any) => T = (i) => i\n): (\n  target: any,\n  propertyKey: string | symbol,\n  descriptor: PropertyDescriptor\n) => { value: (...args: any[]) => Promise<T[]> } {\n  return (target: any, propertyKey: string | symbol, descriptor: PropertyDescriptor) => {\n    const originalMethod = descriptor.value;\n\n    return {\n      value: function (...args: any[]) {\n        const originalResult: Promise<any[]> = originalMethod.apply(this, args);\n\n        if (!(originalResult instanceof Promise)) {\n          throw new Error(\n            `Error applying prototype to stored value -- result is not a promise for method ${String(\n              propertyKey\n            )}`\n          );\n        }\n\n        return originalResult.then((result) => {\n          if (result == null) {\n            return null;\n          } else if (!(result instanceof Array)) {\n            throw new Error(\n              `Attempted to retrieve non array type from state as an array for method ${String(\n                propertyKey\n              )}`\n            );\n          } else {\n            return result.map((r) => {\n              return r == null ||\n                r.constructor.name === memberConstructor.prototype.constructor.name\n                ? r\n                : memberConverter(\n                    Object.create(memberConstructor.prototype, Object.getOwnPropertyDescriptors(r))\n                  );\n            });\n          }\n        });\n      },\n    };\n  };\n}\n\nfunction withPrototypeForObjectValues<T>(\n  valuesConstructor: new (...args: any[]) => T,\n  valuesConverter: (input: any) => T = (i) => i\n): (\n  target: any,\n  propertyKey: string | symbol,\n  descriptor: PropertyDescriptor\n) => { value: (...args: any[]) => Promise<{ [key: string]: T }> } {\n  return (target: any, propertyKey: string | symbol, descriptor: PropertyDescriptor) => {\n    const originalMethod = descriptor.value;\n\n    return {\n      value: function (...args: any[]) {\n        const originalResult: Promise<{ [key: string]: T }> = originalMethod.apply(this, args);\n\n        if (!(originalResult instanceof Promise)) {\n          throw new Error(\n            `Error applying prototype to stored value -- result is not a promise for method ${String(\n              propertyKey\n            )}`\n          );\n        }\n\n        return originalResult.then((result) => {\n          if (result == null) {\n            return null;\n          } else {\n            for (const [key, val] of Object.entries(result)) {\n              result[key] =\n                val == null || val.constructor.name === valuesConstructor.prototype.constructor.name\n                  ? valuesConverter(val)\n                  : valuesConverter(\n                      Object.create(\n                        valuesConstructor.prototype,\n                        Object.getOwnPropertyDescriptors(val)\n                      )\n                    );\n            }\n\n            return result as { [key: string]: T };\n          }\n        });\n      },\n    };\n  };\n}\n","import { StateService } from \"../abstractions/state.service\";\nimport { TokenService as TokenServiceAbstraction } from \"../abstractions/token.service\";\nimport { Utils } from \"../misc/utils\";\nimport { IdentityTokenResponse } from \"../models/response/identity-token.response\";\n\nexport class TokenService implements TokenServiceAbstraction {\n  static decodeToken(token: string): Promise<any> {\n    if (token == null) {\n      throw new Error(\"Token not provided.\");\n    }\n\n    const parts = token.split(\".\");\n    if (parts.length !== 3) {\n      throw new Error(\"JWT must have 3 parts\");\n    }\n\n    const decoded = Utils.fromUrlB64ToUtf8(parts[1]);\n    if (decoded == null) {\n      throw new Error(\"Cannot decode the token\");\n    }\n\n    const decodedToken = JSON.parse(decoded);\n    return decodedToken;\n  }\n\n  constructor(private stateService: StateService) {}\n\n  async setTokens(\n    accessToken: string,\n    refreshToken: string,\n    clientIdClientSecret: [string, string]\n  ): Promise<any> {\n    await this.setToken(accessToken);\n    await this.setRefreshToken(refreshToken);\n    if (clientIdClientSecret != null) {\n      await this.setClientId(clientIdClientSecret[0]);\n      await this.setClientSecret(clientIdClientSecret[1]);\n    }\n  }\n\n  async setClientId(clientId: string): Promise<any> {\n    return await this.stateService.setApiKeyClientId(clientId);\n  }\n\n  async getClientId(): Promise<string> {\n    return await this.stateService.getApiKeyClientId();\n  }\n\n  async setClientSecret(clientSecret: string): Promise<any> {\n    return await this.stateService.setApiKeyClientSecret(clientSecret);\n  }\n\n  async getClientSecret(): Promise<string> {\n    return await this.stateService.getApiKeyClientSecret();\n  }\n\n  async setToken(token: string): Promise<void> {\n    await this.stateService.setAccessToken(token);\n  }\n\n  async getToken(): Promise<string> {\n    return await this.stateService.getAccessToken();\n  }\n\n  async setRefreshToken(refreshToken: string): Promise<any> {\n    return await this.stateService.setRefreshToken(refreshToken);\n  }\n\n  async getRefreshToken(): Promise<string> {\n    return await this.stateService.getRefreshToken();\n  }\n\n  async setTwoFactorToken(tokenResponse: IdentityTokenResponse): Promise<any> {\n    return await this.stateService.setTwoFactorToken(tokenResponse.twoFactorToken);\n  }\n\n  async getTwoFactorToken(): Promise<string> {\n    return await this.stateService.getTwoFactorToken();\n  }\n\n  async clearTwoFactorToken(): Promise<any> {\n    return await this.stateService.setTwoFactorToken(null);\n  }\n\n  async clearToken(userId?: string): Promise<any> {\n    await this.stateService.setAccessToken(null, { userId: userId });\n    await this.stateService.setRefreshToken(null, { userId: userId });\n    await this.stateService.setApiKeyClientId(null, { userId: userId });\n    await this.stateService.setApiKeyClientSecret(null, { userId: userId });\n  }\n\n  // jwthelper methods\n  // ref https://github.com/auth0/angular-jwt/blob/master/src/angularJwt/services/jwt.js\n\n  async decodeToken(token?: string): Promise<any> {\n    token = token ?? (await this.stateService.getAccessToken());\n\n    if (token == null) {\n      throw new Error(\"Token not found.\");\n    }\n\n    return TokenService.decodeToken(token);\n  }\n\n  async getTokenExpirationDate(): Promise<Date> {\n    const decoded = await this.decodeToken();\n    if (typeof decoded.exp === \"undefined\") {\n      return null;\n    }\n\n    const d = new Date(0); // The 0 here is the key, which sets the date to the epoch\n    d.setUTCSeconds(decoded.exp);\n    return d;\n  }\n\n  async tokenSecondsRemaining(offsetSeconds = 0): Promise<number> {\n    const d = await this.getTokenExpirationDate();\n    if (d == null) {\n      return 0;\n    }\n\n    const msRemaining = d.valueOf() - (new Date().valueOf() + offsetSeconds * 1000);\n    return Math.round(msRemaining / 1000);\n  }\n\n  async tokenNeedsRefresh(minutes = 5): Promise<boolean> {\n    const sRemaining = await this.tokenSecondsRemaining();\n    return sRemaining < 60 * minutes;\n  }\n\n  async getUserId(): Promise<string> {\n    const decoded = await this.decodeToken();\n    if (typeof decoded.sub === \"undefined\") {\n      throw new Error(\"No user id found\");\n    }\n\n    return decoded.sub as string;\n  }\n\n  async getEmail(): Promise<string> {\n    const decoded = await this.decodeToken();\n    if (typeof decoded.email === \"undefined\") {\n      throw new Error(\"No email found\");\n    }\n\n    return decoded.email as string;\n  }\n\n  async getEmailVerified(): Promise<boolean> {\n    const decoded = await this.decodeToken();\n    if (typeof decoded.email_verified === \"undefined\") {\n      throw new Error(\"No email verification found\");\n    }\n\n    return decoded.email_verified as boolean;\n  }\n\n  async getName(): Promise<string> {\n    const decoded = await this.decodeToken();\n    if (typeof decoded.name === \"undefined\") {\n      return null;\n    }\n\n    return decoded.name as string;\n  }\n\n  async getIssuer(): Promise<string> {\n    const decoded = await this.decodeToken();\n    if (typeof decoded.iss === \"undefined\") {\n      throw new Error(\"No issuer found\");\n    }\n\n    return decoded.iss as string;\n  }\n\n  async getIsExternal(): Promise<boolean> {\n    const decoded = await this.decodeToken();\n\n    return Array.isArray(decoded.amr) && decoded.amr.includes(\"external\");\n  }\n}\n","import { AbstractStorageService } from \"../abstractions/storage.service\";\nimport { HtmlStorageLocation } from \"../enums/htmlStorageLocation\";\nimport { KdfType } from \"../enums/kdfType\";\nimport { StateVersion } from \"../enums/stateVersion\";\nimport { ThemeType } from \"../enums/themeType\";\nimport { StateFactory } from \"../factories/stateFactory\";\nimport { CollectionData } from \"../models/data/collection.data\";\nimport { EventData } from \"../models/data/event.data\";\nimport { OrganizationData } from \"../models/data/organization.data\";\nimport { PolicyData } from \"../models/data/policy.data\";\nimport { ProviderData } from \"../models/data/provider.data\";\nimport { SendData } from \"../models/data/send.data\";\nimport {\n  Account,\n  AccountSettings,\n  AccountSettingsSettings,\n  EncryptionPair,\n} from \"../models/domain/account\";\nimport { EncString } from \"../models/domain/enc-string\";\nimport { EnvironmentUrls } from \"../models/domain/environment-urls\";\nimport { GeneratedPasswordHistory } from \"../models/domain/generated-password-history\";\nimport { GlobalState } from \"../models/domain/global-state\";\nimport { StorageOptions } from \"../models/domain/storage-options\";\nimport { CipherData } from \"../vault/models/data/cipher.data\";\nimport { FolderData } from \"../vault/models/data/folder.data\";\n\nimport { TokenService } from \"./token.service\";\n\n// Originally (before January 2022) storage was handled as a flat key/value pair store.\n// With the move to a typed object for state storage these keys should no longer be in use anywhere outside of this migration.\nconst v1Keys: { [key: string]: string } = {\n  accessToken: \"accessToken\",\n  alwaysShowDock: \"alwaysShowDock\",\n  autoConfirmFingerprints: \"autoConfirmFingerprints\",\n  autoFillOnPageLoadDefault: \"autoFillOnPageLoadDefault\",\n  biometricAwaitingAcceptance: \"biometricAwaitingAcceptance\",\n  biometricFingerprintValidated: \"biometricFingerprintValidated\",\n  biometricText: \"biometricText\",\n  biometricUnlock: \"biometric\",\n  clearClipboard: \"clearClipboardKey\",\n  clientId: \"apikey_clientId\",\n  clientSecret: \"apikey_clientSecret\",\n  collapsedGroupings: \"collapsedGroupings\",\n  convertAccountToKeyConnector: \"convertAccountToKeyConnector\",\n  defaultUriMatch: \"defaultUriMatch\",\n  disableAddLoginNotification: \"disableAddLoginNotification\",\n  disableAutoBiometricsPrompt: \"noAutoPromptBiometrics\",\n  disableAutoTotpCopy: \"disableAutoTotpCopy\",\n  disableBadgeCounter: \"disableBadgeCounter\",\n  disableChangedPasswordNotification: \"disableChangedPasswordNotification\",\n  disableContextMenuItem: \"disableContextMenuItem\",\n  disableFavicon: \"disableFavicon\",\n  disableGa: \"disableGa\",\n  dontShowCardsCurrentTab: \"dontShowCardsCurrentTab\",\n  dontShowIdentitiesCurrentTab: \"dontShowIdentitiesCurrentTab\",\n  emailVerified: \"emailVerified\",\n  enableAlwaysOnTop: \"enableAlwaysOnTopKey\",\n  enableAutoFillOnPageLoad: \"enableAutoFillOnPageLoad\",\n  enableBiometric: \"enabledBiometric\",\n  enableBrowserIntegration: \"enableBrowserIntegration\",\n  enableBrowserIntegrationFingerprint: \"enableBrowserIntegrationFingerprint\",\n  enableCloseToTray: \"enableCloseToTray\",\n  enableFullWidth: \"enableFullWidth\",\n  enableMinimizeToTray: \"enableMinimizeToTray\",\n  enableStartToTray: \"enableStartToTrayKey\",\n  enableTray: \"enableTray\",\n  encKey: \"encKey\", // Generated Symmetric Key\n  encOrgKeys: \"encOrgKeys\",\n  encPrivate: \"encPrivateKey\",\n  encProviderKeys: \"encProviderKeys\",\n  entityId: \"entityId\",\n  entityType: \"entityType\",\n  environmentUrls: \"environmentUrls\",\n  equivalentDomains: \"equivalentDomains\",\n  eventCollection: \"eventCollection\",\n  forcePasswordReset: \"forcePasswordReset\",\n  history: \"generatedPasswordHistory\",\n  installedVersion: \"installedVersion\",\n  kdf: \"kdf\",\n  kdfIterations: \"kdfIterations\",\n  key: \"key\", // Master Key\n  keyHash: \"keyHash\",\n  lastActive: \"lastActive\",\n  localData: \"sitesLocalData\",\n  locale: \"locale\",\n  mainWindowSize: \"mainWindowSize\",\n  minimizeOnCopyToClipboard: \"minimizeOnCopyToClipboardKey\",\n  neverDomains: \"neverDomains\",\n  noAutoPromptBiometricsText: \"noAutoPromptBiometricsText\",\n  openAtLogin: \"openAtLogin\",\n  passwordGenerationOptions: \"passwordGenerationOptions\",\n  pinProtected: \"pinProtectedKey\",\n  protectedPin: \"protectedPin\",\n  refreshToken: \"refreshToken\",\n  ssoCodeVerifier: \"ssoCodeVerifier\",\n  ssoIdentifier: \"ssoOrgIdentifier\",\n  ssoState: \"ssoState\",\n  stamp: \"securityStamp\",\n  theme: \"theme\",\n  userEmail: \"userEmail\",\n  userId: \"userId\",\n  usesConnector: \"usesKeyConnector\",\n  vaultTimeoutAction: \"vaultTimeoutAction\",\n  vaultTimeout: \"lockOption\",\n  rememberedEmail: \"rememberedEmail\",\n};\n\nconst v1KeyPrefixes: { [key: string]: string } = {\n  ciphers: \"ciphers_\",\n  collections: \"collections_\",\n  folders: \"folders_\",\n  lastSync: \"lastSync_\",\n  policies: \"policies_\",\n  twoFactorToken: \"twoFactorToken_\",\n  organizations: \"organizations_\",\n  providers: \"providers_\",\n  sends: \"sends_\",\n  settings: \"settings_\",\n};\n\nconst keys = {\n  global: \"global\",\n  authenticatedAccounts: \"authenticatedAccounts\",\n  activeUserId: \"activeUserId\",\n  tempAccountSettings: \"tempAccountSettings\", // used to hold account specific settings (i.e clear clipboard) between initial migration and first account authentication\n  accountActivity: \"accountActivity\",\n};\n\nconst partialKeys = {\n  autoKey: \"_masterkey_auto\",\n  biometricKey: \"_masterkey_biometric\",\n  masterKey: \"_masterkey\",\n};\n\nexport class StateMigrationService<\n  TGlobalState extends GlobalState = GlobalState,\n  TAccount extends Account = Account\n> {\n  constructor(\n    protected storageService: AbstractStorageService,\n    protected secureStorageService: AbstractStorageService,\n    protected stateFactory: StateFactory<TGlobalState, TAccount>\n  ) {}\n\n  async needsMigration(): Promise<boolean> {\n    const currentStateVersion = await this.getCurrentStateVersion();\n    return currentStateVersion == null || currentStateVersion < StateVersion.Latest;\n  }\n\n  async migrate(): Promise<void> {\n    let currentStateVersion = await this.getCurrentStateVersion();\n    while (currentStateVersion < StateVersion.Latest) {\n      switch (currentStateVersion) {\n        case StateVersion.One:\n          await this.migrateStateFrom1To2();\n          break;\n        case StateVersion.Two:\n          await this.migrateStateFrom2To3();\n          break;\n        case StateVersion.Three:\n          await this.migrateStateFrom3To4();\n          break;\n        case StateVersion.Four: {\n          const authenticatedAccounts = await this.getAuthenticatedAccounts();\n          for (const account of authenticatedAccounts) {\n            const migratedAccount = await this.migrateAccountFrom4To5(account);\n            await this.set(account.profile.userId, migratedAccount);\n          }\n          await this.setCurrentStateVersion(StateVersion.Five);\n          break;\n        }\n        case StateVersion.Five: {\n          const authenticatedAccounts = await this.getAuthenticatedAccounts();\n          for (const account of authenticatedAccounts) {\n            const migratedAccount = await this.migrateAccountFrom5To6(account);\n            await this.set(account.profile.userId, migratedAccount);\n          }\n          await this.setCurrentStateVersion(StateVersion.Six);\n          break;\n        }\n      }\n\n      currentStateVersion += 1;\n    }\n  }\n\n  protected async migrateStateFrom1To2(): Promise<void> {\n    const clearV1Keys = async (clearingUserId?: string) => {\n      for (const key in v1Keys) {\n        if (key == null) {\n          continue;\n        }\n        await this.set(v1Keys[key], null);\n      }\n      if (clearingUserId != null) {\n        for (const keyPrefix in v1KeyPrefixes) {\n          if (keyPrefix == null) {\n            continue;\n          }\n          await this.set(v1KeyPrefixes[keyPrefix] + userId, null);\n        }\n      }\n    };\n\n    // Some processes, like biometrics, may have already defined a value before migrations are run.\n    // We don't want to null out those values if they don't exist in the old storage scheme (like for new installs)\n    // So, the OOO for migration is that we:\n    // 1. Check for an existing storage value from the old storage structure OR\n    // 2. Check for a value already set by processes that run before migration OR\n    // 3. Assign the default value\n    const globals =\n      (await this.get<GlobalState>(keys.global)) ?? this.stateFactory.createGlobal(null);\n    globals.stateVersion = StateVersion.Two;\n    globals.environmentUrls =\n      (await this.get<EnvironmentUrls>(v1Keys.environmentUrls)) ?? globals.environmentUrls;\n    globals.locale = (await this.get<string>(v1Keys.locale)) ?? globals.locale;\n    globals.noAutoPromptBiometrics =\n      (await this.get<boolean>(v1Keys.disableAutoBiometricsPrompt)) ??\n      globals.noAutoPromptBiometrics;\n    globals.noAutoPromptBiometricsText =\n      (await this.get<string>(v1Keys.noAutoPromptBiometricsText)) ??\n      globals.noAutoPromptBiometricsText;\n    globals.ssoCodeVerifier =\n      (await this.get<string>(v1Keys.ssoCodeVerifier)) ?? globals.ssoCodeVerifier;\n    globals.ssoOrganizationIdentifier =\n      (await this.get<string>(v1Keys.ssoIdentifier)) ?? globals.ssoOrganizationIdentifier;\n    globals.ssoState = (await this.get<any>(v1Keys.ssoState)) ?? globals.ssoState;\n    globals.rememberedEmail =\n      (await this.get<string>(v1Keys.rememberedEmail)) ?? globals.rememberedEmail;\n    globals.theme = (await this.get<ThemeType>(v1Keys.theme)) ?? globals.theme;\n    globals.vaultTimeout = (await this.get<number>(v1Keys.vaultTimeout)) ?? globals.vaultTimeout;\n    globals.vaultTimeoutAction =\n      (await this.get<string>(v1Keys.vaultTimeoutAction)) ?? globals.vaultTimeoutAction;\n    globals.window = (await this.get<any>(v1Keys.mainWindowSize)) ?? globals.window;\n    globals.enableTray = (await this.get<boolean>(v1Keys.enableTray)) ?? globals.enableTray;\n    globals.enableMinimizeToTray =\n      (await this.get<boolean>(v1Keys.enableMinimizeToTray)) ?? globals.enableMinimizeToTray;\n    globals.enableCloseToTray =\n      (await this.get<boolean>(v1Keys.enableCloseToTray)) ?? globals.enableCloseToTray;\n    globals.enableStartToTray =\n      (await this.get<boolean>(v1Keys.enableStartToTray)) ?? globals.enableStartToTray;\n    globals.openAtLogin = (await this.get<boolean>(v1Keys.openAtLogin)) ?? globals.openAtLogin;\n    globals.alwaysShowDock =\n      (await this.get<boolean>(v1Keys.alwaysShowDock)) ?? globals.alwaysShowDock;\n    globals.enableBrowserIntegration =\n      (await this.get<boolean>(v1Keys.enableBrowserIntegration)) ??\n      globals.enableBrowserIntegration;\n    globals.enableBrowserIntegrationFingerprint =\n      (await this.get<boolean>(v1Keys.enableBrowserIntegrationFingerprint)) ??\n      globals.enableBrowserIntegrationFingerprint;\n\n    const userId =\n      (await this.get<string>(v1Keys.userId)) ?? (await this.get<string>(v1Keys.entityId));\n\n    const defaultAccount = this.stateFactory.createAccount(null);\n    const accountSettings: AccountSettings = {\n      autoConfirmFingerPrints:\n        (await this.get<boolean>(v1Keys.autoConfirmFingerprints)) ??\n        defaultAccount.settings.autoConfirmFingerPrints,\n      autoFillOnPageLoadDefault:\n        (await this.get<boolean>(v1Keys.autoFillOnPageLoadDefault)) ??\n        defaultAccount.settings.autoFillOnPageLoadDefault,\n      biometricUnlock:\n        (await this.get<boolean>(v1Keys.biometricUnlock)) ??\n        defaultAccount.settings.biometricUnlock,\n      clearClipboard:\n        (await this.get<number>(v1Keys.clearClipboard)) ?? defaultAccount.settings.clearClipboard,\n      defaultUriMatch:\n        (await this.get<any>(v1Keys.defaultUriMatch)) ?? defaultAccount.settings.defaultUriMatch,\n      disableAddLoginNotification:\n        (await this.get<boolean>(v1Keys.disableAddLoginNotification)) ??\n        defaultAccount.settings.disableAddLoginNotification,\n      disableAutoBiometricsPrompt:\n        (await this.get<boolean>(v1Keys.disableAutoBiometricsPrompt)) ??\n        defaultAccount.settings.disableAutoBiometricsPrompt,\n      disableAutoTotpCopy:\n        (await this.get<boolean>(v1Keys.disableAutoTotpCopy)) ??\n        defaultAccount.settings.disableAutoTotpCopy,\n      disableBadgeCounter:\n        (await this.get<boolean>(v1Keys.disableBadgeCounter)) ??\n        defaultAccount.settings.disableBadgeCounter,\n      disableChangedPasswordNotification:\n        (await this.get<boolean>(v1Keys.disableChangedPasswordNotification)) ??\n        defaultAccount.settings.disableChangedPasswordNotification,\n      disableContextMenuItem:\n        (await this.get<boolean>(v1Keys.disableContextMenuItem)) ??\n        defaultAccount.settings.disableContextMenuItem,\n      disableGa: (await this.get<boolean>(v1Keys.disableGa)) ?? defaultAccount.settings.disableGa,\n      dontShowCardsCurrentTab:\n        (await this.get<boolean>(v1Keys.dontShowCardsCurrentTab)) ??\n        defaultAccount.settings.dontShowCardsCurrentTab,\n      dontShowIdentitiesCurrentTab:\n        (await this.get<boolean>(v1Keys.dontShowIdentitiesCurrentTab)) ??\n        defaultAccount.settings.dontShowIdentitiesCurrentTab,\n      enableAlwaysOnTop:\n        (await this.get<boolean>(v1Keys.enableAlwaysOnTop)) ??\n        defaultAccount.settings.enableAlwaysOnTop,\n      enableAutoFillOnPageLoad:\n        (await this.get<boolean>(v1Keys.enableAutoFillOnPageLoad)) ??\n        defaultAccount.settings.enableAutoFillOnPageLoad,\n      enableBiometric:\n        (await this.get<boolean>(v1Keys.enableBiometric)) ??\n        defaultAccount.settings.enableBiometric,\n      enableFullWidth:\n        (await this.get<boolean>(v1Keys.enableFullWidth)) ??\n        defaultAccount.settings.enableFullWidth,\n      environmentUrls: globals.environmentUrls ?? defaultAccount.settings.environmentUrls,\n      equivalentDomains:\n        (await this.get<any>(v1Keys.equivalentDomains)) ??\n        defaultAccount.settings.equivalentDomains,\n      minimizeOnCopyToClipboard:\n        (await this.get<boolean>(v1Keys.minimizeOnCopyToClipboard)) ??\n        defaultAccount.settings.minimizeOnCopyToClipboard,\n      neverDomains:\n        (await this.get<any>(v1Keys.neverDomains)) ?? defaultAccount.settings.neverDomains,\n      passwordGenerationOptions:\n        (await this.get<any>(v1Keys.passwordGenerationOptions)) ??\n        defaultAccount.settings.passwordGenerationOptions,\n      pinProtected: Object.assign(new EncryptionPair<string, EncString>(), {\n        decrypted: null,\n        encrypted: await this.get<string>(v1Keys.pinProtected),\n      }),\n      protectedPin: await this.get<string>(v1Keys.protectedPin),\n      settings:\n        userId == null\n          ? null\n          : await this.get<AccountSettingsSettings>(v1KeyPrefixes.settings + userId),\n      vaultTimeout:\n        (await this.get<number>(v1Keys.vaultTimeout)) ?? defaultAccount.settings.vaultTimeout,\n      vaultTimeoutAction:\n        (await this.get<string>(v1Keys.vaultTimeoutAction)) ??\n        defaultAccount.settings.vaultTimeoutAction,\n    };\n\n    // (userId == null) = no logged in user (so no known userId) and we need to temporarily store account specific settings in state to migrate on first auth\n    // (userId != null) = we have a currently authed user (so known userId) with encrypted data and other key settings we can move, no need to temporarily store account settings\n    if (userId == null) {\n      await this.set(keys.tempAccountSettings, accountSettings);\n      await this.set(keys.global, globals);\n      await this.set(keys.authenticatedAccounts, []);\n      await this.set(keys.activeUserId, null);\n      await clearV1Keys();\n      return;\n    }\n\n    globals.twoFactorToken = await this.get<string>(v1KeyPrefixes.twoFactorToken + userId);\n    await this.set(keys.global, globals);\n    await this.set(userId, {\n      data: {\n        addEditCipherInfo: null,\n        ciphers: {\n          decrypted: null,\n          encrypted: await this.get<{ [id: string]: CipherData }>(v1KeyPrefixes.ciphers + userId),\n        },\n        collapsedGroupings: null,\n        collections: {\n          decrypted: null,\n          encrypted: await this.get<{ [id: string]: CollectionData }>(\n            v1KeyPrefixes.collections + userId\n          ),\n        },\n        eventCollection: await this.get<EventData[]>(v1Keys.eventCollection),\n        folders: {\n          decrypted: null,\n          encrypted: await this.get<{ [id: string]: FolderData }>(v1KeyPrefixes.folders + userId),\n        },\n        localData: null,\n        organizations: await this.get<{ [id: string]: OrganizationData }>(\n          v1KeyPrefixes.organizations + userId\n        ),\n        passwordGenerationHistory: {\n          decrypted: null,\n          encrypted: await this.get<GeneratedPasswordHistory[]>(v1Keys.history),\n        },\n        policies: {\n          decrypted: null,\n          encrypted: await this.get<{ [id: string]: PolicyData }>(v1KeyPrefixes.policies + userId),\n        },\n        providers: await this.get<{ [id: string]: ProviderData }>(v1KeyPrefixes.providers + userId),\n        sends: {\n          decrypted: null,\n          encrypted: await this.get<{ [id: string]: SendData }>(v1KeyPrefixes.sends + userId),\n        },\n      },\n      keys: {\n        apiKeyClientSecret: await this.get<string>(v1Keys.clientSecret),\n        cryptoMasterKey: null,\n        cryptoMasterKeyAuto: null,\n        cryptoMasterKeyB64: null,\n        cryptoMasterKeyBiometric: null,\n        cryptoSymmetricKey: {\n          encrypted: await this.get<string>(v1Keys.encKey),\n          decrypted: null,\n        },\n        legacyEtmKey: null,\n        organizationKeys: {\n          decrypted: null,\n          encrypted: await this.get<any>(v1Keys.encOrgKeys),\n        },\n        privateKey: {\n          decrypted: null,\n          encrypted: await this.get<string>(v1Keys.encPrivate),\n        },\n        providerKeys: {\n          decrypted: null,\n          encrypted: await this.get<any>(v1Keys.encProviderKeys),\n        },\n        publicKey: null,\n      },\n      profile: {\n        apiKeyClientId: await this.get<string>(v1Keys.clientId),\n        authenticationStatus: null,\n        convertAccountToKeyConnector: await this.get<boolean>(v1Keys.convertAccountToKeyConnector),\n        email: await this.get<string>(v1Keys.userEmail),\n        emailVerified: await this.get<boolean>(v1Keys.emailVerified),\n        entityId: null,\n        entityType: null,\n        everBeenUnlocked: null,\n        forcePasswordReset: null,\n        hasPremiumPersonally: null,\n        kdfIterations: await this.get<number>(v1Keys.kdfIterations),\n        kdfType: await this.get<KdfType>(v1Keys.kdf),\n        keyHash: await this.get<string>(v1Keys.keyHash),\n        lastSync: null,\n        userId: userId,\n        usesKeyConnector: null,\n      },\n      settings: accountSettings,\n      tokens: {\n        accessToken: await this.get<string>(v1Keys.accessToken),\n        decodedToken: null,\n        refreshToken: await this.get<string>(v1Keys.refreshToken),\n        securityStamp: null,\n      },\n    });\n\n    await this.set(keys.authenticatedAccounts, [userId]);\n    await this.set(keys.activeUserId, userId);\n\n    const accountActivity: { [userId: string]: number } = {\n      [userId]: await this.get<number>(v1Keys.lastActive),\n    };\n    accountActivity[userId] = await this.get<number>(v1Keys.lastActive);\n    await this.set(keys.accountActivity, accountActivity);\n\n    await clearV1Keys(userId);\n\n    if (await this.secureStorageService.has(v1Keys.key, { keySuffix: \"biometric\" })) {\n      await this.secureStorageService.save(\n        `${userId}${partialKeys.biometricKey}`,\n        await this.secureStorageService.get(v1Keys.key, { keySuffix: \"biometric\" }),\n        { keySuffix: \"biometric\" }\n      );\n      await this.secureStorageService.remove(v1Keys.key, { keySuffix: \"biometric\" });\n    }\n\n    if (await this.secureStorageService.has(v1Keys.key, { keySuffix: \"auto\" })) {\n      await this.secureStorageService.save(\n        `${userId}${partialKeys.autoKey}`,\n        await this.secureStorageService.get(v1Keys.key, { keySuffix: \"auto\" }),\n        { keySuffix: \"auto\" }\n      );\n      await this.secureStorageService.remove(v1Keys.key, { keySuffix: \"auto\" });\n    }\n\n    if (await this.secureStorageService.has(v1Keys.key)) {\n      await this.secureStorageService.save(\n        `${userId}${partialKeys.masterKey}`,\n        await this.secureStorageService.get(v1Keys.key)\n      );\n      await this.secureStorageService.remove(v1Keys.key);\n    }\n  }\n\n  protected async migrateStateFrom2To3(): Promise<void> {\n    const authenticatedUserIds = await this.get<string[]>(keys.authenticatedAccounts);\n    await Promise.all(\n      authenticatedUserIds.map(async (userId) => {\n        const account = await this.get<TAccount>(userId);\n        if (\n          account?.profile?.hasPremiumPersonally === null &&\n          account.tokens?.accessToken != null\n        ) {\n          const decodedToken = await TokenService.decodeToken(account.tokens.accessToken);\n          account.profile.hasPremiumPersonally = decodedToken.premium;\n          await this.set(userId, account);\n        }\n      })\n    );\n\n    const globals = await this.getGlobals();\n    globals.stateVersion = StateVersion.Three;\n    await this.set(keys.global, globals);\n  }\n\n  protected async migrateStateFrom3To4(): Promise<void> {\n    const authenticatedUserIds = await this.get<string[]>(keys.authenticatedAccounts);\n    await Promise.all(\n      authenticatedUserIds.map(async (userId) => {\n        const account = await this.get<TAccount>(userId);\n        if (account?.profile?.everBeenUnlocked != null) {\n          delete account.profile.everBeenUnlocked;\n          return this.set(userId, account);\n        }\n      })\n    );\n\n    const globals = await this.getGlobals();\n    globals.stateVersion = StateVersion.Four;\n    await this.set(keys.global, globals);\n  }\n\n  protected async migrateAccountFrom4To5(account: TAccount): Promise<TAccount> {\n    const encryptedOrgKeys = account.keys?.organizationKeys?.encrypted;\n    if (encryptedOrgKeys != null) {\n      for (const [orgId, encKey] of Object.entries(encryptedOrgKeys)) {\n        encryptedOrgKeys[orgId] = {\n          type: \"organization\",\n          key: encKey as unknown as string, // Account v4 does not reflect the current account model so we have to cast\n        };\n      }\n    }\n\n    return account;\n  }\n\n  protected async migrateAccountFrom5To6(account: TAccount): Promise<TAccount> {\n    delete (account as any).keys?.legacyEtmKey;\n    return account;\n  }\n\n  protected get options(): StorageOptions {\n    return { htmlStorageLocation: HtmlStorageLocation.Local };\n  }\n\n  protected get<T>(key: string): Promise<T> {\n    return this.storageService.get<T>(key, this.options);\n  }\n\n  protected set(key: string, value: any): Promise<any> {\n    if (value == null) {\n      return this.storageService.remove(key, this.options);\n    }\n    return this.storageService.save(key, value, this.options);\n  }\n\n  protected async getGlobals(): Promise<TGlobalState> {\n    return await this.get<TGlobalState>(keys.global);\n  }\n\n  protected async getCurrentStateVersion(): Promise<StateVersion> {\n    return (await this.getGlobals())?.stateVersion ?? StateVersion.One;\n  }\n\n  protected async setCurrentStateVersion(newVersion: StateVersion): Promise<void> {\n    const globals = await this.getGlobals();\n    globals.stateVersion = newVersion;\n    await this.set(keys.global, globals);\n  }\n\n  protected async getAuthenticatedAccounts(): Promise<TAccount[]> {\n    const authenticatedUserIds = await this.get<string[]>(keys.authenticatedAccounts);\n    return Promise.all(authenticatedUserIds.map((id) => this.get<TAccount>(id)));\n  }\n}\n","import { CryptoFunctionService } from \"../abstractions/cryptoFunction.service\";\nimport { LogService } from \"../abstractions/log.service\";\nimport { TotpService as TotpServiceAbstraction } from \"../abstractions/totp.service\";\nimport { Utils } from \"../misc/utils\";\n\nconst B32Chars = \"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567\";\nconst SteamChars = \"23456789BCDFGHJKMNPQRTVWXY\";\n\nexport class TotpService implements TotpServiceAbstraction {\n  constructor(\n    private cryptoFunctionService: CryptoFunctionService,\n    private logService: LogService\n  ) {}\n\n  async getCode(key: string): Promise<string> {\n    if (key == null) {\n      return null;\n    }\n    let period = 30;\n    let alg: \"sha1\" | \"sha256\" | \"sha512\" = \"sha1\";\n    let digits = 6;\n    let keyB32 = key;\n    const isOtpAuth = key.toLowerCase().indexOf(\"otpauth://\") === 0;\n    const isSteamAuth = !isOtpAuth && key.toLowerCase().indexOf(\"steam://\") === 0;\n    if (isOtpAuth) {\n      const params = Utils.getQueryParams(key);\n      if (params.has(\"digits\") && params.get(\"digits\") != null) {\n        try {\n          const digitParams = parseInt(params.get(\"digits\").trim(), null);\n          if (digitParams > 10) {\n            digits = 10;\n          } else if (digitParams > 0) {\n            digits = digitParams;\n          }\n        } catch {\n          this.logService.error(\"Invalid digits param.\");\n        }\n      }\n      if (params.has(\"period\") && params.get(\"period\") != null) {\n        try {\n          const periodParam = parseInt(params.get(\"period\").trim(), null);\n          if (periodParam > 0) {\n            period = periodParam;\n          }\n        } catch {\n          this.logService.error(\"Invalid period param.\");\n        }\n      }\n      if (params.has(\"secret\") && params.get(\"secret\") != null) {\n        keyB32 = params.get(\"secret\");\n      }\n      if (params.has(\"algorithm\") && params.get(\"algorithm\") != null) {\n        const algParam = params.get(\"algorithm\").toLowerCase();\n        if (algParam === \"sha1\" || algParam === \"sha256\" || algParam === \"sha512\") {\n          alg = algParam;\n        }\n      }\n    } else if (isSteamAuth) {\n      keyB32 = key.substr(\"steam://\".length);\n      digits = 5;\n    }\n\n    const epoch = Math.round(new Date().getTime() / 1000.0);\n    const timeHex = this.leftPad(this.decToHex(Math.floor(epoch / period)), 16, \"0\");\n    const timeBytes = Utils.fromHexToArray(timeHex);\n    const keyBytes = this.b32ToBytes(keyB32);\n\n    if (!keyBytes.length || !timeBytes.length) {\n      return null;\n    }\n\n    const hash = await this.sign(keyBytes, timeBytes, alg);\n    if (hash.length === 0) {\n      return null;\n    }\n\n    const offset = hash[hash.length - 1] & 0xf;\n    const binary =\n      ((hash[offset] & 0x7f) << 24) |\n      ((hash[offset + 1] & 0xff) << 16) |\n      ((hash[offset + 2] & 0xff) << 8) |\n      (hash[offset + 3] & 0xff);\n\n    let otp = \"\";\n    if (isSteamAuth) {\n      let fullCode = binary & 0x7fffffff;\n      for (let i = 0; i < digits; i++) {\n        otp += SteamChars[fullCode % SteamChars.length];\n        fullCode = Math.trunc(fullCode / SteamChars.length);\n      }\n    } else {\n      otp = (binary % Math.pow(10, digits)).toString();\n      otp = this.leftPad(otp, digits, \"0\");\n    }\n\n    return otp;\n  }\n\n  getTimeInterval(key: string): number {\n    let period = 30;\n    if (key != null && key.toLowerCase().indexOf(\"otpauth://\") === 0) {\n      const params = Utils.getQueryParams(key);\n      if (params.has(\"period\") && params.get(\"period\") != null) {\n        try {\n          period = parseInt(params.get(\"period\").trim(), null);\n        } catch {\n          this.logService.error(\"Invalid period param.\");\n        }\n      }\n    }\n    return period;\n  }\n\n  // Helpers\n\n  private leftPad(s: string, l: number, p: string): string {\n    if (l + 1 >= s.length) {\n      s = Array(l + 1 - s.length).join(p) + s;\n    }\n    return s;\n  }\n\n  private decToHex(d: number): string {\n    return (d < 15.5 ? \"0\" : \"\") + Math.round(d).toString(16);\n  }\n\n  private b32ToHex(s: string): string {\n    s = s.toUpperCase();\n    let cleanedInput = \"\";\n\n    for (let i = 0; i < s.length; i++) {\n      if (B32Chars.indexOf(s[i]) < 0) {\n        continue;\n      }\n\n      cleanedInput += s[i];\n    }\n    s = cleanedInput;\n\n    let bits = \"\";\n    let hex = \"\";\n    for (let i = 0; i < s.length; i++) {\n      const byteIndex = B32Chars.indexOf(s.charAt(i));\n      if (byteIndex < 0) {\n        continue;\n      }\n      bits += this.leftPad(byteIndex.toString(2), 5, \"0\");\n    }\n    for (let i = 0; i + 4 <= bits.length; i += 4) {\n      const chunk = bits.substr(i, 4);\n      hex = hex + parseInt(chunk, 2).toString(16);\n    }\n    return hex;\n  }\n\n  private b32ToBytes(s: string): Uint8Array {\n    return Utils.fromHexToArray(this.b32ToHex(s));\n  }\n\n  private async sign(\n    keyBytes: Uint8Array,\n    timeBytes: Uint8Array,\n    alg: \"sha1\" | \"sha256\" | \"sha512\"\n  ) {\n    const signature = await this.cryptoFunctionService.hmac(timeBytes.buffer, keyBytes.buffer, alg);\n    return new Uint8Array(signature);\n  }\n}\n","import { ApiService } from \"../../abstractions/api.service\";\nimport { UserVerificationApiServiceAbstraction } from \"../../abstractions/userVerification/userVerification-api.service.abstraction\";\nimport { VerifyOTPRequest } from \"../../models/request/account/verify-otp.request\";\n\nexport class UserVerificationApiService implements UserVerificationApiServiceAbstraction {\n  constructor(private apiService: ApiService) {}\n\n  postAccountVerifyOTP(request: VerifyOTPRequest): Promise<void> {\n    return this.apiService.send(\"POST\", \"/accounts/verify-otp\", request, true, false);\n  }\n  async postAccountRequestOTP(): Promise<void> {\n    return this.apiService.send(\"POST\", \"/accounts/request-otp\", null, true, false);\n  }\n}\n","export class VerifyOTPRequest {\n  OTP: string;\n\n  constructor(OTP: string) {\n    this.OTP = OTP;\n  }\n}\n","import { CryptoService } from \"../../abstractions/crypto.service\";\nimport { I18nService } from \"../../abstractions/i18n.service\";\nimport { UserVerificationApiServiceAbstraction } from \"../../abstractions/userVerification/userVerification-api.service.abstraction\";\nimport { UserVerificationService as UserVerificationServiceAbstraction } from \"../../abstractions/userVerification/userVerification.service.abstraction\";\nimport { VerificationType } from \"../../enums/verificationType\";\nimport { VerifyOTPRequest } from \"../../models/request/account/verify-otp.request\";\nimport { SecretVerificationRequest } from \"../../models/request/secret-verification.request\";\nimport { Verification } from \"../../types/verification\";\n\n/**\n * Used for general-purpose user verification throughout the app.\n * Use it to verify the input collected by UserVerificationComponent.\n */\nexport class UserVerificationService implements UserVerificationServiceAbstraction {\n  constructor(\n    private cryptoService: CryptoService,\n    private i18nService: I18nService,\n    private userVerificationApiService: UserVerificationApiServiceAbstraction\n  ) {}\n\n  /**\n   * Create a new request model to be used for server-side verification\n   * @param verification User-supplied verification data (Master Password or OTP)\n   * @param requestClass The request model to create\n   * @param alreadyHashed Whether the master password is already hashed\n   */\n  async buildRequest<T extends SecretVerificationRequest>(\n    verification: Verification,\n    requestClass?: new () => T,\n    alreadyHashed?: boolean\n  ) {\n    this.validateInput(verification);\n\n    const request =\n      requestClass != null ? new requestClass() : (new SecretVerificationRequest() as T);\n\n    if (verification.type === VerificationType.OTP) {\n      request.otp = verification.secret;\n    } else {\n      request.masterPasswordHash = alreadyHashed\n        ? verification.secret\n        : await this.cryptoService.hashPassword(verification.secret, null);\n    }\n\n    return request;\n  }\n\n  /**\n   * Used to verify the Master Password client-side, or send the OTP to the server for verification (with no other data)\n   * Generally used for client-side verification only.\n   * @param verification User-supplied verification data (Master Password or OTP)\n   */\n  async verifyUser(verification: Verification): Promise<boolean> {\n    this.validateInput(verification);\n\n    if (verification.type === VerificationType.OTP) {\n      const request = new VerifyOTPRequest(verification.secret);\n      try {\n        await this.userVerificationApiService.postAccountVerifyOTP(request);\n      } catch (e) {\n        throw new Error(this.i18nService.t(\"invalidVerificationCode\"));\n      }\n    } else {\n      const passwordValid = await this.cryptoService.compareAndUpdateKeyHash(\n        verification.secret,\n        null\n      );\n      if (!passwordValid) {\n        throw new Error(this.i18nService.t(\"invalidMasterPassword\"));\n      }\n    }\n    return true;\n  }\n\n  async requestOTP() {\n    await this.userVerificationApiService.postAccountRequestOTP();\n  }\n\n  private validateInput(verification: Verification) {\n    if (verification?.secret == null || verification.secret === \"\") {\n      if (verification.type === VerificationType.OTP) {\n        throw new Error(this.i18nService.t(\"verificationCodeRequired\"));\n      } else {\n        throw new Error(this.i18nService.t(\"masterPasswordRequired\"));\n      }\n    }\n  }\n}\n","import { ApiService } from \"../abstractions/api.service\";\n\nimport { Forwarder } from \"./forwarder\";\nimport { ForwarderOptions } from \"./forwarder-options\";\n\nexport class AnonAddyForwarder implements Forwarder {\n  async generate(apiService: ApiService, options: ForwarderOptions): Promise<string> {\n    if (options.apiKey == null || options.apiKey === \"\") {\n      throw \"Invalid AnonAddy API token.\";\n    }\n    if (options.anonaddy?.domain == null || options.anonaddy.domain === \"\") {\n      throw \"Invalid AnonAddy domain.\";\n    }\n    const requestInit: RequestInit = {\n      redirect: \"manual\",\n      cache: \"no-store\",\n      method: \"POST\",\n      headers: new Headers({\n        Authorization: \"Bearer \" + options.apiKey,\n        \"Content-Type\": \"application/json\",\n      }),\n    };\n    const url = \"https://app.anonaddy.com/api/v1/aliases\";\n    requestInit.body = JSON.stringify({\n      domain: options.anonaddy.domain,\n      description:\n        (options.website != null ? \"Website: \" + options.website + \". \" : \"\") +\n        \"Generated by Bitwarden.\",\n    });\n    const request = new Request(url, requestInit);\n    const response = await apiService.nativeFetch(request);\n    if (response.status === 200 || response.status === 201) {\n      const json = await response.json();\n      return json?.data?.email;\n    }\n    if (response.status === 401) {\n      throw \"Invalid AnonAddy API token.\";\n    }\n    throw \"Unknown AnonAddy error occurred.\";\n  }\n}\n","import { ApiService } from \"../abstractions/api.service\";\n\nimport { Forwarder } from \"./forwarder\";\nimport { ForwarderOptions } from \"./forwarder-options\";\n\nexport class DuckDuckGoForwarder implements Forwarder {\n  async generate(apiService: ApiService, options: ForwarderOptions): Promise<string> {\n    if (options.apiKey == null || options.apiKey === \"\") {\n      throw \"Invalid DuckDuckGo API token.\";\n    }\n    const requestInit: RequestInit = {\n      redirect: \"manual\",\n      cache: \"no-store\",\n      method: \"POST\",\n      headers: new Headers({\n        Authorization: \"Bearer \" + options.apiKey,\n        \"Content-Type\": \"application/json\",\n      }),\n    };\n    const url = \"https://quack.duckduckgo.com/api/email/addresses\";\n    const request = new Request(url, requestInit);\n    const response = await apiService.nativeFetch(request);\n    if (response.status === 200 || response.status === 201) {\n      const json = await response.json();\n      if (json.address) {\n        return `${json.address}@duck.com`;\n      }\n    } else if (response.status === 401) {\n      throw \"Invalid DuckDuckGo API token.\";\n    }\n    throw \"Unknown DuckDuckGo error occurred.\";\n  }\n}\n","import { ApiService } from \"../abstractions/api.service\";\n\nimport { Forwarder } from \"./forwarder\";\nimport { ForwarderOptions } from \"./forwarder-options\";\n\nexport class FastmailForwarder implements Forwarder {\n  async generate(apiService: ApiService, options: ForwarderOptions): Promise<string> {\n    if (options.apiKey == null || options.apiKey === \"\") {\n      throw \"Invalid Fastmail API token.\";\n    }\n\n    const accountId = await this.getAccountId(apiService, options);\n    if (accountId == null || accountId === \"\") {\n      throw \"Unable to obtain Fastmail masked email account ID.\";\n    }\n\n    const requestInit: RequestInit = {\n      redirect: \"manual\",\n      cache: \"no-store\",\n      method: \"POST\",\n      headers: new Headers({\n        Authorization: \"Bearer \" + options.apiKey,\n        \"Content-Type\": \"application/json\",\n      }),\n    };\n    const url = \"https://api.fastmail.com/jmap/api/\";\n    requestInit.body = JSON.stringify({\n      using: [\"https://www.fastmail.com/dev/maskedemail\", \"urn:ietf:params:jmap:core\"],\n      methodCalls: [\n        [\n          \"MaskedEmail/set\",\n          {\n            accountId: accountId,\n            create: {\n              \"new-masked-email\": {\n                state: \"enabled\",\n                description: \"\",\n                url: options.website,\n                emailPrefix: options.fastmail.prefix,\n              },\n            },\n          },\n          \"0\",\n        ],\n      ],\n    });\n    const request = new Request(url, requestInit);\n    const response = await apiService.nativeFetch(request);\n    if (response.status === 200) {\n      const json = await response.json();\n      if (\n        json.methodResponses != null &&\n        json.methodResponses.length > 0 &&\n        json.methodResponses[0].length > 0\n      ) {\n        if (json.methodResponses[0][0] === \"MaskedEmail/set\") {\n          if (json.methodResponses[0][1]?.created?.[\"new-masked-email\"] != null) {\n            return json.methodResponses[0][1]?.created?.[\"new-masked-email\"]?.email;\n          }\n          if (json.methodResponses[0][1]?.notCreated?.[\"new-masked-email\"] != null) {\n            throw (\n              \"Fastmail error: \" +\n              json.methodResponses[0][1]?.notCreated?.[\"new-masked-email\"]?.description\n            );\n          }\n        } else if (json.methodResponses[0][0] === \"error\") {\n          throw \"Fastmail error: \" + json.methodResponses[0][1]?.description;\n        }\n      }\n    }\n    if (response.status === 401 || response.status === 403) {\n      throw \"Invalid Fastmail API token.\";\n    }\n    throw \"Unknown Fastmail error occurred.\";\n  }\n\n  private async getAccountId(apiService: ApiService, options: ForwarderOptions): Promise<string> {\n    const requestInit: RequestInit = {\n      cache: \"no-store\",\n      method: \"GET\",\n      headers: new Headers({\n        Authorization: \"Bearer \" + options.apiKey,\n      }),\n    };\n    const url = \"https://api.fastmail.com/.well-known/jmap\";\n    const request = new Request(url, requestInit);\n    const response = await apiService.nativeFetch(request);\n    if (response.status === 200) {\n      const json = await response.json();\n      if (json.primaryAccounts != null) {\n        return json.primaryAccounts[\"https://www.fastmail.com/dev/maskedemail\"];\n      }\n    }\n    return null;\n  }\n}\n","import { ApiService } from \"../abstractions/api.service\";\n\nimport { Forwarder } from \"./forwarder\";\nimport { ForwarderOptions } from \"./forwarder-options\";\n\nexport class FirefoxRelayForwarder implements Forwarder {\n  async generate(apiService: ApiService, options: ForwarderOptions): Promise<string> {\n    if (options.apiKey == null || options.apiKey === \"\") {\n      throw \"Invalid Firefox Relay API token.\";\n    }\n    const requestInit: RequestInit = {\n      redirect: \"manual\",\n      cache: \"no-store\",\n      method: \"POST\",\n      headers: new Headers({\n        Authorization: \"Token \" + options.apiKey,\n        \"Content-Type\": \"application/json\",\n      }),\n    };\n    const url = \"https://relay.firefox.com/api/v1/relayaddresses/\";\n    requestInit.body = JSON.stringify({\n      enabled: true,\n      generated_for: options.website,\n      description:\n        (options.website != null ? options.website + \" - \" : \"\") + \"Generated by Bitwarden.\",\n    });\n    const request = new Request(url, requestInit);\n    const response = await apiService.nativeFetch(request);\n    if (response.status === 200 || response.status === 201) {\n      const json = await response.json();\n      return json?.full_address;\n    }\n    if (response.status === 401) {\n      throw \"Invalid Firefox Relay API token.\";\n    }\n    throw \"Unknown Firefox Relay error occurred.\";\n  }\n}\n","export class ForwarderOptions {\n  apiKey: string;\n  website: string;\n  fastmail = new FastmailForwarderOptions();\n  anonaddy = new AnonAddyForwarderOptions();\n}\n\nexport class FastmailForwarderOptions {\n  prefix: string;\n}\n\nexport class AnonAddyForwarderOptions {\n  domain: string;\n}\n","import { ApiService } from \"../abstractions/api.service\";\n\nimport { Forwarder } from \"./forwarder\";\nimport { ForwarderOptions } from \"./forwarder-options\";\n\nexport class SimpleLoginForwarder implements Forwarder {\n  async generate(apiService: ApiService, options: ForwarderOptions): Promise<string> {\n    if (options.apiKey == null || options.apiKey === \"\") {\n      throw \"Invalid SimpleLogin API key.\";\n    }\n    const requestInit: RequestInit = {\n      redirect: \"manual\",\n      cache: \"no-store\",\n      method: \"POST\",\n      headers: new Headers({\n        Authentication: options.apiKey,\n        \"Content-Type\": \"application/json\",\n      }),\n    };\n    let url = \"https://app.simplelogin.io/api/alias/random/new\";\n    if (options.website != null) {\n      url += \"?hostname=\" + options.website;\n    }\n    requestInit.body = JSON.stringify({\n      note:\n        (options.website != null ? \"Website: \" + options.website + \". \" : \"\") +\n        \"Generated by Bitwarden.\",\n    });\n    const request = new Request(url, requestInit);\n    const response = await apiService.nativeFetch(request);\n    if (response.status === 200 || response.status === 201) {\n      const json = await response.json();\n      return json.alias;\n    }\n    if (response.status === 401) {\n      throw \"Invalid SimpleLogin API key.\";\n    }\n    try {\n      const json = await response.json();\n      if (json?.error != null) {\n        throw \"SimpleLogin error:\" + json.error;\n      }\n    } catch {\n      // Do nothing...\n    }\n    throw \"Unknown SimpleLogin error occurred.\";\n  }\n}\n","import { ApiService } from \"../abstractions/api.service\";\nimport { CryptoService } from \"../abstractions/crypto.service\";\nimport { StateService } from \"../abstractions/state.service\";\nimport { UsernameGenerationService as BaseUsernameGenerationService } from \"../abstractions/usernameGeneration.service\";\nimport { AnonAddyForwarder } from \"../email-forwarders/anon-addy-forwarder\";\nimport { DuckDuckGoForwarder } from \"../email-forwarders/duck-duck-go-forwarder\";\nimport { FastmailForwarder } from \"../email-forwarders/fastmail-forwarder\";\nimport { FirefoxRelayForwarder } from \"../email-forwarders/firefox-relay-forwarder\";\nimport { Forwarder } from \"../email-forwarders/forwarder\";\nimport { ForwarderOptions } from \"../email-forwarders/forwarder-options\";\nimport { SimpleLoginForwarder } from \"../email-forwarders/simple-login-forwarder\";\nimport { EFFLongWordList } from \"../misc/wordlist\";\n\nconst DefaultOptions = {\n  type: \"word\",\n  wordCapitalize: true,\n  wordIncludeNumber: true,\n  subaddressType: \"random\",\n  catchallType: \"random\",\n  forwardedService: \"\",\n  forwardedAnonAddyDomain: \"anonaddy.me\",\n};\n\nexport class UsernameGenerationService implements BaseUsernameGenerationService {\n  constructor(\n    private cryptoService: CryptoService,\n    private stateService: StateService,\n    private apiService: ApiService\n  ) {}\n\n  generateUsername(options: any): Promise<string> {\n    if (options.type === \"catchall\") {\n      return this.generateCatchall(options);\n    } else if (options.type === \"subaddress\") {\n      return this.generateSubaddress(options);\n    } else if (options.type === \"forwarded\") {\n      return this.generateForwarded(options);\n    } else {\n      return this.generateWord(options);\n    }\n  }\n\n  async generateWord(options: any): Promise<string> {\n    const o = Object.assign({}, DefaultOptions, options);\n\n    if (o.wordCapitalize == null) {\n      o.wordCapitalize = true;\n    }\n    if (o.wordIncludeNumber == null) {\n      o.wordIncludeNumber = true;\n    }\n\n    const wordIndex = await this.cryptoService.randomNumber(0, EFFLongWordList.length - 1);\n    let word = EFFLongWordList[wordIndex];\n    if (o.wordCapitalize) {\n      word = word.charAt(0).toUpperCase() + word.slice(1);\n    }\n    if (o.wordIncludeNumber) {\n      const num = await this.cryptoService.randomNumber(1, 9999);\n      word = word + this.zeroPad(num.toString(), 4);\n    }\n    return word;\n  }\n\n  async generateSubaddress(options: any): Promise<string> {\n    const o = Object.assign({}, DefaultOptions, options);\n\n    const subaddressEmail = o.subaddressEmail;\n    if (subaddressEmail == null || subaddressEmail.length < 3) {\n      return o.subaddressEmail;\n    }\n    const atIndex = subaddressEmail.indexOf(\"@\");\n    if (atIndex < 1 || atIndex >= subaddressEmail.length - 1) {\n      return subaddressEmail;\n    }\n    if (o.subaddressType == null) {\n      o.subaddressType = \"random\";\n    }\n\n    const emailBeginning = subaddressEmail.substr(0, atIndex);\n    const emailEnding = subaddressEmail.substr(atIndex + 1, subaddressEmail.length);\n\n    let subaddressString = \"\";\n    if (o.subaddressType === \"random\") {\n      subaddressString = await this.randomString(8);\n    } else if (o.subaddressType === \"website-name\") {\n      subaddressString = o.website;\n    }\n    return emailBeginning + \"+\" + subaddressString + \"@\" + emailEnding;\n  }\n\n  async generateCatchall(options: any): Promise<string> {\n    const o = Object.assign({}, DefaultOptions, options);\n\n    if (o.catchallDomain == null || o.catchallDomain === \"\") {\n      return null;\n    }\n    if (o.catchallType == null) {\n      o.catchallType = \"random\";\n    }\n\n    let startString = \"\";\n    if (o.catchallType === \"random\") {\n      startString = await this.randomString(8);\n    } else if (o.catchallType === \"website-name\") {\n      startString = o.website;\n    }\n    return startString + \"@\" + o.catchallDomain;\n  }\n\n  async generateForwarded(options: any): Promise<string> {\n    const o = Object.assign({}, DefaultOptions, options);\n\n    if (o.forwardedService == null) {\n      return null;\n    }\n\n    let forwarder: Forwarder = null;\n    const forwarderOptions = new ForwarderOptions();\n    forwarderOptions.website = o.website;\n    if (o.forwardedService === \"simplelogin\") {\n      forwarder = new SimpleLoginForwarder();\n      forwarderOptions.apiKey = o.forwardedSimpleLoginApiKey;\n    } else if (o.forwardedService === \"anonaddy\") {\n      forwarder = new AnonAddyForwarder();\n      forwarderOptions.apiKey = o.forwardedAnonAddyApiToken;\n      forwarderOptions.anonaddy.domain = o.forwardedAnonAddyDomain;\n    } else if (o.forwardedService === \"firefoxrelay\") {\n      forwarder = new FirefoxRelayForwarder();\n      forwarderOptions.apiKey = o.forwardedFirefoxApiToken;\n    } else if (o.forwardedService === \"fastmail\") {\n      forwarder = new FastmailForwarder();\n      forwarderOptions.apiKey = o.forwardedFastmailApiToken;\n    } else if (o.forwardedService === \"duckduckgo\") {\n      forwarder = new DuckDuckGoForwarder();\n      forwarderOptions.apiKey = o.forwardedDuckDuckGoToken;\n    }\n\n    if (forwarder == null) {\n      return null;\n    }\n\n    return forwarder.generate(this.apiService, forwarderOptions);\n  }\n\n  async getOptions(): Promise<any> {\n    let options = await this.stateService.getUsernameGenerationOptions();\n    if (options == null) {\n      options = Object.assign({}, DefaultOptions);\n    } else {\n      options = Object.assign({}, DefaultOptions, options);\n    }\n    await this.stateService.setUsernameGenerationOptions(options);\n    return options;\n  }\n\n  async saveOptions(options: any) {\n    await this.stateService.setUsernameGenerationOptions(options);\n  }\n\n  private async randomString(length: number) {\n    let str = \"\";\n    const charSet = \"abcdefghijklmnopqrstuvwxyz1234567890\";\n    for (let i = 0; i < length; i++) {\n      const randomCharIndex = await this.cryptoService.randomNumber(0, charSet.length - 1);\n      str += charSet.charAt(randomCharIndex);\n    }\n    return str;\n  }\n\n  // ref: https://stackoverflow.com/a/10073788\n  private zeroPad(number: string, width: number) {\n    return number.length >= width\n      ? number\n      : new Array(width - number.length + 1).join(\"0\") + number;\n  }\n}\n","import { firstValueFrom } from \"rxjs\";\n\nimport { AuthService } from \"../../abstractions/auth.service\";\nimport { CollectionService } from \"../../abstractions/collection.service\";\nimport { CryptoService } from \"../../abstractions/crypto.service\";\nimport { KeyConnectorService } from \"../../abstractions/keyConnector.service\";\nimport { MessagingService } from \"../../abstractions/messaging.service\";\nimport { PlatformUtilsService } from \"../../abstractions/platformUtils.service\";\nimport { SearchService } from \"../../abstractions/search.service\";\nimport { StateService } from \"../../abstractions/state.service\";\nimport { VaultTimeoutService as VaultTimeoutServiceAbstraction } from \"../../abstractions/vaultTimeout/vaultTimeout.service\";\nimport { VaultTimeoutSettingsService } from \"../../abstractions/vaultTimeout/vaultTimeoutSettings.service\";\nimport { AuthenticationStatus } from \"../../enums/authenticationStatus\";\nimport { CipherService } from \"../../vault/abstractions/cipher.service\";\nimport { FolderService } from \"../../vault/abstractions/folder/folder.service.abstraction\";\n\nexport class VaultTimeoutService implements VaultTimeoutServiceAbstraction {\n  private inited = false;\n\n  constructor(\n    private cipherService: CipherService,\n    private folderService: FolderService,\n    private collectionService: CollectionService,\n    private cryptoService: CryptoService,\n    protected platformUtilsService: PlatformUtilsService,\n    private messagingService: MessagingService,\n    private searchService: SearchService,\n    private keyConnectorService: KeyConnectorService,\n    private stateService: StateService,\n    private authService: AuthService,\n    private vaultTimeoutSettingsService: VaultTimeoutSettingsService,\n    private lockedCallback: (userId?: string) => Promise<void> = null,\n    private loggedOutCallback: (expired: boolean, userId?: string) => Promise<void> = null\n  ) {}\n\n  init(checkOnInterval: boolean) {\n    if (this.inited) {\n      return;\n    }\n\n    this.inited = true;\n    if (checkOnInterval) {\n      this.startCheck();\n    }\n  }\n\n  startCheck() {\n    this.checkVaultTimeout();\n    setInterval(() => this.checkVaultTimeout(), 10 * 1000); // check every 10 seconds\n  }\n\n  async checkVaultTimeout(): Promise<void> {\n    if (await this.platformUtilsService.isViewOpen()) {\n      return;\n    }\n\n    const accounts = await firstValueFrom(this.stateService.accounts$);\n    for (const userId in accounts) {\n      if (userId != null && (await this.shouldLock(userId))) {\n        await this.executeTimeoutAction(userId);\n      }\n    }\n  }\n\n  async lock(userId?: string): Promise<void> {\n    const authed = await this.stateService.getIsAuthenticated({ userId: userId });\n    if (!authed) {\n      return;\n    }\n\n    if (await this.keyConnectorService.getUsesKeyConnector()) {\n      const pinSet = await this.vaultTimeoutSettingsService.isPinLockSet();\n      const pinLock =\n        (pinSet[0] && (await this.stateService.getDecryptedPinProtected()) != null) || pinSet[1];\n\n      if (!pinLock && !(await this.vaultTimeoutSettingsService.isBiometricLockSet())) {\n        await this.logOut(userId);\n      }\n    }\n\n    if (userId == null || userId === (await this.stateService.getUserId())) {\n      this.searchService.clearIndex();\n      await this.folderService.clearCache();\n    }\n\n    await this.stateService.setEverBeenUnlocked(true, { userId: userId });\n    await this.stateService.setCryptoMasterKeyAuto(null, { userId: userId });\n\n    await this.cryptoService.clearKey(false, userId);\n    await this.cryptoService.clearOrgKeys(true, userId);\n    await this.cryptoService.clearKeyPair(true, userId);\n    await this.cryptoService.clearEncKey(true, userId);\n\n    await this.cipherService.clearCache(userId);\n    await this.collectionService.clearCache(userId);\n\n    this.messagingService.send(\"locked\", { userId: userId });\n\n    if (this.lockedCallback != null) {\n      await this.lockedCallback(userId);\n    }\n  }\n\n  async logOut(userId?: string): Promise<void> {\n    if (this.loggedOutCallback != null) {\n      await this.loggedOutCallback(false, userId);\n    }\n  }\n\n  private async shouldLock(userId: string): Promise<boolean> {\n    const authStatus = await this.authService.getAuthStatus(userId);\n    if (\n      authStatus === AuthenticationStatus.Locked ||\n      authStatus === AuthenticationStatus.LoggedOut\n    ) {\n      return false;\n    }\n\n    const vaultTimeout = await this.vaultTimeoutSettingsService.getVaultTimeout(userId);\n    if (vaultTimeout == null || vaultTimeout < 0) {\n      return false;\n    }\n\n    const lastActive = await this.stateService.getLastActive({ userId: userId });\n    if (lastActive == null) {\n      return false;\n    }\n\n    const vaultTimeoutSeconds = vaultTimeout * 60;\n    const diffSeconds = (new Date().getTime() - lastActive) / 1000;\n    return diffSeconds >= vaultTimeoutSeconds;\n  }\n\n  private async executeTimeoutAction(userId: string): Promise<void> {\n    const timeoutAction = await this.stateService.getVaultTimeoutAction({ userId: userId });\n    timeoutAction === \"logOut\" ? await this.logOut(userId) : await this.lock(userId);\n  }\n}\n","import { CryptoService } from \"../../abstractions/crypto.service\";\nimport { PolicyService } from \"../../abstractions/policy/policy.service.abstraction\";\nimport { StateService } from \"../../abstractions/state.service\";\nimport { TokenService } from \"../../abstractions/token.service\";\nimport { VaultTimeoutSettingsService as VaultTimeoutSettingsServiceAbstraction } from \"../../abstractions/vaultTimeout/vaultTimeoutSettings.service\";\nimport { PolicyType } from \"../../enums/policyType\";\n\nexport class VaultTimeoutSettingsService implements VaultTimeoutSettingsServiceAbstraction {\n  constructor(\n    private cryptoService: CryptoService,\n    private tokenService: TokenService,\n    private policyService: PolicyService,\n    private stateService: StateService\n  ) {}\n\n  async setVaultTimeoutOptions(timeout: number, action: string): Promise<void> {\n    await this.stateService.setVaultTimeout(timeout);\n\n    // We swap these tokens from being on disk for lock actions, and in memory for logout actions\n    // Get them here to set them to their new location after changing the timeout action and clearing if needed\n    const token = await this.tokenService.getToken();\n    const refreshToken = await this.tokenService.getRefreshToken();\n    const clientId = await this.tokenService.getClientId();\n    const clientSecret = await this.tokenService.getClientSecret();\n\n    const currentAction = await this.stateService.getVaultTimeoutAction();\n    if ((timeout != null || timeout === 0) && action === \"logOut\" && action !== currentAction) {\n      // if we have a vault timeout and the action is log out, reset tokens\n      await this.tokenService.clearToken();\n    }\n\n    await this.stateService.setVaultTimeoutAction(action);\n\n    await this.tokenService.setToken(token);\n    await this.tokenService.setRefreshToken(refreshToken);\n    await this.tokenService.setClientId(clientId);\n    await this.tokenService.setClientSecret(clientSecret);\n\n    await this.cryptoService.toggleKey();\n  }\n\n  async isPinLockSet(): Promise<[boolean, boolean]> {\n    const protectedPin = await this.stateService.getProtectedPin();\n    const pinProtectedKey = await this.stateService.getEncryptedPinProtected();\n    return [protectedPin != null, pinProtectedKey != null];\n  }\n\n  async isBiometricLockSet(): Promise<boolean> {\n    return await this.stateService.getBiometricUnlock();\n  }\n\n  async getVaultTimeout(userId?: string): Promise<number> {\n    const vaultTimeout = await this.stateService.getVaultTimeout({ userId: userId });\n\n    if (\n      await this.policyService.policyAppliesToUser(PolicyType.MaximumVaultTimeout, null, userId)\n    ) {\n      const policy = await this.policyService.getAll(PolicyType.MaximumVaultTimeout, userId);\n      // Remove negative values, and ensure it's smaller than maximum allowed value according to policy\n      let timeout = Math.min(vaultTimeout, policy[0].data.minutes);\n\n      if (vaultTimeout == null || timeout < 0) {\n        timeout = policy[0].data.minutes;\n      }\n\n      // We really shouldn't need to set the value here, but multiple services relies on this value being correct.\n      if (vaultTimeout !== timeout) {\n        await this.stateService.setVaultTimeout(timeout, { userId: userId });\n      }\n\n      return timeout;\n    }\n\n    return vaultTimeout;\n  }\n\n  async clear(userId?: string): Promise<void> {\n    await this.stateService.setEverBeenUnlocked(false, { userId: userId });\n    await this.stateService.setDecryptedPinProtected(null, { userId: userId });\n    await this.stateService.setProtectedPin(null, { userId: userId });\n  }\n}\n","export class DecryptParameters<T> {\n  encKey: T;\n  data: T;\n  iv: T;\n  macKey: T;\n  mac: T;\n  macData: T;\n}\n","import * as argon2 from \"argon2-browser\";\nimport * as forge from \"node-forge\";\n\nimport { CryptoFunctionService } from \"../abstractions/cryptoFunction.service\";\nimport { Utils } from \"../misc/utils\";\nimport { DecryptParameters } from \"../models/domain/decrypt-parameters\";\nimport { SymmetricCryptoKey } from \"../models/domain/symmetric-crypto-key\";\n\nexport class WebCryptoFunctionService implements CryptoFunctionService {\n  private crypto: Crypto;\n  private subtle: SubtleCrypto;\n  private wasmSupported: boolean;\n\n  constructor(win: Window | typeof global) {\n    this.crypto = typeof win.crypto !== \"undefined\" ? win.crypto : null;\n    this.subtle =\n      !!this.crypto && typeof win.crypto.subtle !== \"undefined\" ? win.crypto.subtle : null;\n    this.wasmSupported = this.checkIfWasmSupported();\n  }\n\n  async pbkdf2(\n    password: string | ArrayBuffer,\n    salt: string | ArrayBuffer,\n    algorithm: \"sha256\" | \"sha512\",\n    iterations: number\n  ): Promise<ArrayBuffer> {\n    const wcLen = algorithm === \"sha256\" ? 256 : 512;\n    const passwordBuf = this.toBuf(password);\n    const saltBuf = this.toBuf(salt);\n\n    const pbkdf2Params: Pbkdf2Params = {\n      name: \"PBKDF2\",\n      salt: saltBuf,\n      iterations: iterations,\n      hash: { name: this.toWebCryptoAlgorithm(algorithm) },\n    };\n\n    const impKey = await this.subtle.importKey(\n      \"raw\",\n      passwordBuf,\n      { name: \"PBKDF2\" } as any,\n      false,\n      [\"deriveBits\"]\n    );\n    return await this.subtle.deriveBits(pbkdf2Params, impKey, wcLen);\n  }\n\n  async argon2(\n    password: string | ArrayBuffer,\n    salt: string | ArrayBuffer,\n    iterations: number,\n    memory: number,\n    parallelism: number\n  ): Promise<ArrayBuffer> {\n    if (!this.wasmSupported) {\n      throw \"Webassembly support is required for the Argon2 KDF feature.\";\n    }\n\n    const passwordArr = new Uint8Array(this.toBuf(password));\n    const saltArr = new Uint8Array(this.toBuf(salt));\n\n    const result = await argon2.hash({\n      pass: passwordArr,\n      salt: saltArr,\n      time: iterations,\n      mem: memory,\n      parallelism: parallelism,\n      hashLen: 32,\n      type: argon2.ArgonType.Argon2id,\n    });\n    return result.hash;\n  }\n\n  async hkdf(\n    ikm: ArrayBuffer,\n    salt: string | ArrayBuffer,\n    info: string | ArrayBuffer,\n    outputByteSize: number,\n    algorithm: \"sha256\" | \"sha512\"\n  ): Promise<ArrayBuffer> {\n    const saltBuf = this.toBuf(salt);\n    const infoBuf = this.toBuf(info);\n\n    const hkdfParams: HkdfParams = {\n      name: \"HKDF\",\n      salt: saltBuf,\n      info: infoBuf,\n      hash: { name: this.toWebCryptoAlgorithm(algorithm) },\n    };\n\n    const impKey = await this.subtle.importKey(\"raw\", ikm, { name: \"HKDF\" } as any, false, [\n      \"deriveBits\",\n    ]);\n    return await this.subtle.deriveBits(hkdfParams as any, impKey, outputByteSize * 8);\n  }\n\n  // ref: https://tools.ietf.org/html/rfc5869\n  async hkdfExpand(\n    prk: ArrayBuffer,\n    info: string | ArrayBuffer,\n    outputByteSize: number,\n    algorithm: \"sha256\" | \"sha512\"\n  ): Promise<ArrayBuffer> {\n    const hashLen = algorithm === \"sha256\" ? 32 : 64;\n    if (outputByteSize > 255 * hashLen) {\n      throw new Error(\"outputByteSize is too large.\");\n    }\n    const prkArr = new Uint8Array(prk);\n    if (prkArr.length < hashLen) {\n      throw new Error(\"prk is too small.\");\n    }\n    const infoBuf = this.toBuf(info);\n    const infoArr = new Uint8Array(infoBuf);\n    let runningOkmLength = 0;\n    let previousT = new Uint8Array(0);\n    const n = Math.ceil(outputByteSize / hashLen);\n    const okm = new Uint8Array(n * hashLen);\n    for (let i = 0; i < n; i++) {\n      const t = new Uint8Array(previousT.length + infoArr.length + 1);\n      t.set(previousT);\n      t.set(infoArr, previousT.length);\n      t.set([i + 1], t.length - 1);\n      previousT = new Uint8Array(await this.hmac(t.buffer, prk, algorithm));\n      okm.set(previousT, runningOkmLength);\n      runningOkmLength += previousT.length;\n      if (runningOkmLength >= outputByteSize) {\n        break;\n      }\n    }\n    return okm.slice(0, outputByteSize).buffer;\n  }\n\n  async hash(\n    value: string | ArrayBuffer,\n    algorithm: \"sha1\" | \"sha256\" | \"sha512\" | \"md5\"\n  ): Promise<ArrayBuffer> {\n    if (algorithm === \"md5\") {\n      const md = algorithm === \"md5\" ? forge.md.md5.create() : forge.md.sha1.create();\n      const valueBytes = this.toByteString(value);\n      md.update(valueBytes, \"raw\");\n      return Utils.fromByteStringToArray(md.digest().data).buffer;\n    }\n\n    const valueBuf = this.toBuf(value);\n    return await this.subtle.digest({ name: this.toWebCryptoAlgorithm(algorithm) }, valueBuf);\n  }\n\n  async hmac(\n    value: ArrayBuffer,\n    key: ArrayBuffer,\n    algorithm: \"sha1\" | \"sha256\" | \"sha512\"\n  ): Promise<ArrayBuffer> {\n    const signingAlgorithm = {\n      name: \"HMAC\",\n      hash: { name: this.toWebCryptoAlgorithm(algorithm) },\n    };\n\n    const impKey = await this.subtle.importKey(\"raw\", key, signingAlgorithm, false, [\"sign\"]);\n    return await this.subtle.sign(signingAlgorithm, impKey, value);\n  }\n\n  // Safely compare two values in a way that protects against timing attacks (Double HMAC Verification).\n  // ref: https://www.nccgroup.trust/us/about-us/newsroom-and-events/blog/2011/february/double-hmac-verification/\n  // ref: https://paragonie.com/blog/2015/11/preventing-timing-attacks-on-string-comparison-with-double-hmac-strategy\n  async compare(a: ArrayBuffer, b: ArrayBuffer): Promise<boolean> {\n    const macKey = await this.randomBytes(32);\n    const signingAlgorithm = {\n      name: \"HMAC\",\n      hash: { name: \"SHA-256\" },\n    };\n    const impKey = await this.subtle.importKey(\"raw\", macKey, signingAlgorithm, false, [\"sign\"]);\n    const mac1 = await this.subtle.sign(signingAlgorithm, impKey, a);\n    const mac2 = await this.subtle.sign(signingAlgorithm, impKey, b);\n\n    if (mac1.byteLength !== mac2.byteLength) {\n      return false;\n    }\n\n    const arr1 = new Uint8Array(mac1);\n    const arr2 = new Uint8Array(mac2);\n    for (let i = 0; i < arr2.length; i++) {\n      if (arr1[i] !== arr2[i]) {\n        return false;\n      }\n    }\n\n    return true;\n  }\n\n  hmacFast(value: string, key: string, algorithm: \"sha1\" | \"sha256\" | \"sha512\"): Promise<string> {\n    const hmac = forge.hmac.create();\n    hmac.start(algorithm, key);\n    hmac.update(value);\n    const bytes = hmac.digest().getBytes();\n    return Promise.resolve(bytes);\n  }\n\n  async compareFast(a: string, b: string): Promise<boolean> {\n    const rand = await this.randomBytes(32);\n    const bytes = new Uint32Array(rand);\n    const buffer = forge.util.createBuffer();\n    for (let i = 0; i < bytes.length; i++) {\n      buffer.putInt32(bytes[i]);\n    }\n    const macKey = buffer.getBytes();\n\n    const hmac = forge.hmac.create();\n    hmac.start(\"sha256\", macKey);\n    hmac.update(a);\n    const mac1 = hmac.digest().getBytes();\n\n    hmac.start(null, null);\n    hmac.update(b);\n    const mac2 = hmac.digest().getBytes();\n\n    const equals = mac1 === mac2;\n    return equals;\n  }\n\n  async aesEncrypt(data: ArrayBuffer, iv: ArrayBuffer, key: ArrayBuffer): Promise<ArrayBuffer> {\n    const impKey = await this.subtle.importKey(\"raw\", key, { name: \"AES-CBC\" } as any, false, [\n      \"encrypt\",\n    ]);\n    return await this.subtle.encrypt({ name: \"AES-CBC\", iv: iv }, impKey, data);\n  }\n\n  aesDecryptFastParameters(\n    data: string,\n    iv: string,\n    mac: string,\n    key: SymmetricCryptoKey\n  ): DecryptParameters<string> {\n    const p = new DecryptParameters<string>();\n    if (key.meta != null) {\n      p.encKey = key.meta.encKeyByteString;\n      p.macKey = key.meta.macKeyByteString;\n    }\n\n    if (p.encKey == null) {\n      p.encKey = forge.util.decode64(key.encKeyB64);\n    }\n    p.data = forge.util.decode64(data);\n    p.iv = forge.util.decode64(iv);\n    p.macData = p.iv + p.data;\n    if (p.macKey == null && key.macKeyB64 != null) {\n      p.macKey = forge.util.decode64(key.macKeyB64);\n    }\n    if (mac != null) {\n      p.mac = forge.util.decode64(mac);\n    }\n\n    // cache byte string keys for later\n    if (key.meta == null) {\n      key.meta = {};\n    }\n    if (key.meta.encKeyByteString == null) {\n      key.meta.encKeyByteString = p.encKey;\n    }\n    if (p.macKey != null && key.meta.macKeyByteString == null) {\n      key.meta.macKeyByteString = p.macKey;\n    }\n\n    return p;\n  }\n\n  aesDecryptFast(parameters: DecryptParameters<string>): Promise<string> {\n    const dataBuffer = forge.util.createBuffer(parameters.data);\n    const decipher = forge.cipher.createDecipher(\"AES-CBC\", parameters.encKey);\n    decipher.start({ iv: parameters.iv });\n    decipher.update(dataBuffer);\n    decipher.finish();\n    const val = decipher.output.toString();\n    return Promise.resolve(val);\n  }\n\n  async aesDecrypt(data: ArrayBuffer, iv: ArrayBuffer, key: ArrayBuffer): Promise<ArrayBuffer> {\n    const impKey = await this.subtle.importKey(\"raw\", key, { name: \"AES-CBC\" } as any, false, [\n      \"decrypt\",\n    ]);\n    return await this.subtle.decrypt({ name: \"AES-CBC\", iv: iv }, impKey, data);\n  }\n\n  async rsaEncrypt(\n    data: ArrayBuffer,\n    publicKey: ArrayBuffer,\n    algorithm: \"sha1\" | \"sha256\"\n  ): Promise<ArrayBuffer> {\n    // Note: Edge browser requires that we specify name and hash for both key import and decrypt.\n    // We cannot use the proper types here.\n    const rsaParams = {\n      name: \"RSA-OAEP\",\n      hash: { name: this.toWebCryptoAlgorithm(algorithm) },\n    };\n    const impKey = await this.subtle.importKey(\"spki\", publicKey, rsaParams, false, [\"encrypt\"]);\n    return await this.subtle.encrypt(rsaParams, impKey, data);\n  }\n\n  async rsaDecrypt(\n    data: ArrayBuffer,\n    privateKey: ArrayBuffer,\n    algorithm: \"sha1\" | \"sha256\"\n  ): Promise<ArrayBuffer> {\n    // Note: Edge browser requires that we specify name and hash for both key import and decrypt.\n    // We cannot use the proper types here.\n    const rsaParams = {\n      name: \"RSA-OAEP\",\n      hash: { name: this.toWebCryptoAlgorithm(algorithm) },\n    };\n    const impKey = await this.subtle.importKey(\"pkcs8\", privateKey, rsaParams, false, [\"decrypt\"]);\n    return await this.subtle.decrypt(rsaParams, impKey, data);\n  }\n\n  async rsaExtractPublicKey(privateKey: ArrayBuffer): Promise<ArrayBuffer> {\n    const rsaParams = {\n      name: \"RSA-OAEP\",\n      // Have to specify some algorithm\n      hash: { name: this.toWebCryptoAlgorithm(\"sha1\") },\n    };\n    const impPrivateKey = await this.subtle.importKey(\"pkcs8\", privateKey, rsaParams, true, [\n      \"decrypt\",\n    ]);\n    const jwkPrivateKey = await this.subtle.exportKey(\"jwk\", impPrivateKey);\n    const jwkPublicKeyParams = {\n      kty: \"RSA\",\n      e: jwkPrivateKey.e,\n      n: jwkPrivateKey.n,\n      alg: \"RSA-OAEP\",\n      ext: true,\n    };\n    const impPublicKey = await this.subtle.importKey(\"jwk\", jwkPublicKeyParams, rsaParams, true, [\n      \"encrypt\",\n    ]);\n    return await this.subtle.exportKey(\"spki\", impPublicKey);\n  }\n\n  async rsaGenerateKeyPair(length: 1024 | 2048 | 4096): Promise<[ArrayBuffer, ArrayBuffer]> {\n    const rsaParams = {\n      name: \"RSA-OAEP\",\n      modulusLength: length,\n      publicExponent: new Uint8Array([0x01, 0x00, 0x01]), // 65537\n      // Have to specify some algorithm\n      hash: { name: this.toWebCryptoAlgorithm(\"sha1\") },\n    };\n    const keyPair = (await this.subtle.generateKey(rsaParams, true, [\n      \"encrypt\",\n      \"decrypt\",\n    ])) as CryptoKeyPair;\n    const publicKey = await this.subtle.exportKey(\"spki\", keyPair.publicKey);\n    const privateKey = await this.subtle.exportKey(\"pkcs8\", keyPair.privateKey);\n    return [publicKey, privateKey];\n  }\n\n  randomBytes(length: number): Promise<ArrayBuffer> {\n    const arr = new Uint8Array(length);\n    this.crypto.getRandomValues(arr);\n    return Promise.resolve(arr.buffer);\n  }\n\n  private toBuf(value: string | ArrayBuffer): ArrayBuffer {\n    let buf: ArrayBuffer;\n    if (typeof value === \"string\") {\n      buf = Utils.fromUtf8ToArray(value).buffer;\n    } else {\n      buf = value;\n    }\n    return buf;\n  }\n\n  private toByteString(value: string | ArrayBuffer): string {\n    let bytes: string;\n    if (typeof value === \"string\") {\n      bytes = forge.util.encodeUtf8(value);\n    } else {\n      bytes = Utils.fromBufferToByteString(value);\n    }\n    return bytes;\n  }\n\n  private toWebCryptoAlgorithm(algorithm: \"sha1\" | \"sha256\" | \"sha512\" | \"md5\"): string {\n    if (algorithm === \"md5\") {\n      throw new Error(\"MD5 is not supported in WebCrypto.\");\n    }\n    return algorithm === \"sha1\" ? \"SHA-1\" : algorithm === \"sha256\" ? \"SHA-256\" : \"SHA-512\";\n  }\n\n  // ref: https://stackoverflow.com/a/47880734/1090359\n  private checkIfWasmSupported(): boolean {\n    try {\n      if (typeof WebAssembly === \"object\" && typeof WebAssembly.instantiate === \"function\") {\n        const module = new WebAssembly.Module(\n          Uint8Array.of(0x0, 0x61, 0x73, 0x6d, 0x01, 0x00, 0x00, 0x00)\n        );\n        if (module instanceof WebAssembly.Module) {\n          return new WebAssembly.Instance(module) instanceof WebAssembly.Instance;\n        }\n      }\n    } catch {\n      return false;\n    }\n    return false;\n  }\n}\n","import { Observable } from \"rxjs\";\n\nimport { SyncEventArgs } from \"../../types/sync-event-args\";\n\nexport abstract class SyncNotifierService {\n  sync$: Observable<SyncEventArgs>;\n  next: (event: SyncEventArgs) => void;\n}\n","import { CipherView } from \"../view/cipher.view\";\n\nconst CacheTTL = 3000;\n\nexport class SortedCiphersCache {\n  private readonly sortedCiphersByUrl: Map<string, Ciphers> = new Map<string, Ciphers>();\n  private readonly timeouts: Map<string, any> = new Map<string, any>();\n\n  constructor(private readonly comparator: (a: CipherView, b: CipherView) => number) {}\n\n  isCached(url: string) {\n    return this.sortedCiphersByUrl.has(url);\n  }\n\n  addCiphers(url: string, ciphers: CipherView[]) {\n    ciphers.sort(this.comparator);\n    this.sortedCiphersByUrl.set(url, new Ciphers(ciphers));\n    this.resetTimer(url);\n  }\n\n  getLastUsed(url: string) {\n    this.resetTimer(url);\n    return this.isCached(url) ? this.sortedCiphersByUrl.get(url).getLastUsed() : null;\n  }\n\n  getLastLaunched(url: string) {\n    return this.isCached(url) ? this.sortedCiphersByUrl.get(url).getLastLaunched() : null;\n  }\n\n  getNext(url: string) {\n    this.resetTimer(url);\n    return this.isCached(url) ? this.sortedCiphersByUrl.get(url).getNext() : null;\n  }\n\n  updateLastUsedIndex(url: string) {\n    if (this.isCached(url)) {\n      this.sortedCiphersByUrl.get(url).updateLastUsedIndex();\n    }\n  }\n\n  clear() {\n    this.sortedCiphersByUrl.clear();\n    this.timeouts.clear();\n  }\n\n  private resetTimer(url: string) {\n    clearTimeout(this.timeouts.get(url));\n    this.timeouts.set(\n      url,\n      setTimeout(() => {\n        this.sortedCiphersByUrl.delete(url);\n        this.timeouts.delete(url);\n      }, CacheTTL)\n    );\n  }\n}\n\nclass Ciphers {\n  lastUsedIndex = -1;\n\n  constructor(private readonly ciphers: CipherView[]) {}\n\n  getLastUsed() {\n    this.lastUsedIndex = Math.max(this.lastUsedIndex, 0);\n    return this.ciphers[this.lastUsedIndex];\n  }\n\n  getLastLaunched() {\n    const usedCiphers = this.ciphers.filter((cipher) => cipher.localData?.lastLaunched);\n    const sortedCiphers = usedCiphers.sort(\n      (x, y) => y.localData.lastLaunched.valueOf() - x.localData.lastLaunched.valueOf()\n    );\n    return sortedCiphers[0];\n  }\n\n  getNextIndex() {\n    return (this.lastUsedIndex + 1) % this.ciphers.length;\n  }\n\n  getNext() {\n    return this.ciphers[this.getNextIndex()];\n  }\n\n  updateLastUsedIndex() {\n    this.lastUsedIndex = this.getNextIndex();\n  }\n}\n","export class CipherBulkDeleteRequest {\n  ids: string[];\n  organizationId: string;\n\n  constructor(ids: string[], organizationId?: string) {\n    this.ids = ids == null ? [] : ids;\n    this.organizationId = organizationId;\n  }\n}\n","export class CipherBulkMoveRequest {\n  ids: string[];\n  folderId: string;\n\n  constructor(ids: string[], folderId: string) {\n    this.ids = ids == null ? [] : ids;\n    this.folderId = folderId;\n  }\n}\n","export class CipherBulkRestoreRequest {\n  ids: string[];\n\n  constructor(ids: string[]) {\n    this.ids = ids == null ? [] : ids;\n  }\n}\n","export class AttachmentRequest {\n  fileName: string;\n  key: string;\n  fileSize: number;\n  adminRequest: boolean;\n}\n","import { CardApi } from \"../../../models/api/card.api\";\nimport { FieldApi } from \"../../../models/api/field.api\";\nimport { IdentityApi } from \"../../../models/api/identity.api\";\nimport { LoginUriApi } from \"../../../models/api/login-uri.api\";\nimport { LoginApi } from \"../../../models/api/login.api\";\nimport { SecureNoteApi } from \"../../../models/api/secure-note.api\";\nimport { CipherRepromptType } from \"../../enums/cipher-reprompt-type\";\nimport { CipherType } from \"../../enums/cipher-type\";\nimport { Cipher } from \"../domain/cipher\";\n\nimport { AttachmentRequest } from \"./attachment.request\";\nimport { PasswordHistoryRequest } from \"./password-history.request\";\n\nexport class CipherRequest {\n  type: CipherType;\n  folderId: string;\n  organizationId: string;\n  name: string;\n  notes: string;\n  favorite: boolean;\n  login: LoginApi;\n  secureNote: SecureNoteApi;\n  card: CardApi;\n  identity: IdentityApi;\n  fields: FieldApi[];\n  passwordHistory: PasswordHistoryRequest[];\n  // Deprecated, remove at some point and rename attachments2 to attachments\n  attachments: { [id: string]: string };\n  attachments2: { [id: string]: AttachmentRequest };\n  lastKnownRevisionDate: Date;\n  reprompt: CipherRepromptType;\n\n  constructor(cipher: Cipher) {\n    this.type = cipher.type;\n    this.folderId = cipher.folderId;\n    this.organizationId = cipher.organizationId;\n    this.name = cipher.name ? cipher.name.encryptedString : null;\n    this.notes = cipher.notes ? cipher.notes.encryptedString : null;\n    this.favorite = cipher.favorite;\n    this.lastKnownRevisionDate = cipher.revisionDate;\n    this.reprompt = cipher.reprompt;\n\n    switch (this.type) {\n      case CipherType.Login:\n        this.login = new LoginApi();\n        this.login.uris = null;\n        this.login.username = cipher.login.username ? cipher.login.username.encryptedString : null;\n        this.login.password = cipher.login.password ? cipher.login.password.encryptedString : null;\n        this.login.passwordRevisionDate =\n          cipher.login.passwordRevisionDate != null\n            ? cipher.login.passwordRevisionDate.toISOString()\n            : null;\n        this.login.totp = cipher.login.totp ? cipher.login.totp.encryptedString : null;\n        this.login.autofillOnPageLoad = cipher.login.autofillOnPageLoad;\n\n        if (cipher.login.uris != null) {\n          this.login.uris = cipher.login.uris.map((u) => {\n            const uri = new LoginUriApi();\n            uri.uri = u.uri != null ? u.uri.encryptedString : null;\n            uri.match = u.match != null ? u.match : null;\n            return uri;\n          });\n        }\n        break;\n      case CipherType.SecureNote:\n        this.secureNote = new SecureNoteApi();\n        this.secureNote.type = cipher.secureNote.type;\n        break;\n      case CipherType.Card:\n        this.card = new CardApi();\n        this.card.cardholderName =\n          cipher.card.cardholderName != null ? cipher.card.cardholderName.encryptedString : null;\n        this.card.brand = cipher.card.brand != null ? cipher.card.brand.encryptedString : null;\n        this.card.number = cipher.card.number != null ? cipher.card.number.encryptedString : null;\n        this.card.expMonth =\n          cipher.card.expMonth != null ? cipher.card.expMonth.encryptedString : null;\n        this.card.expYear =\n          cipher.card.expYear != null ? cipher.card.expYear.encryptedString : null;\n        this.card.code = cipher.card.code != null ? cipher.card.code.encryptedString : null;\n        break;\n      case CipherType.Identity:\n        this.identity = new IdentityApi();\n        this.identity.title =\n          cipher.identity.title != null ? cipher.identity.title.encryptedString : null;\n        this.identity.firstName =\n          cipher.identity.firstName != null ? cipher.identity.firstName.encryptedString : null;\n        this.identity.middleName =\n          cipher.identity.middleName != null ? cipher.identity.middleName.encryptedString : null;\n        this.identity.lastName =\n          cipher.identity.lastName != null ? cipher.identity.lastName.encryptedString : null;\n        this.identity.address1 =\n          cipher.identity.address1 != null ? cipher.identity.address1.encryptedString : null;\n        this.identity.address2 =\n          cipher.identity.address2 != null ? cipher.identity.address2.encryptedString : null;\n        this.identity.address3 =\n          cipher.identity.address3 != null ? cipher.identity.address3.encryptedString : null;\n        this.identity.city =\n          cipher.identity.city != null ? cipher.identity.city.encryptedString : null;\n        this.identity.state =\n          cipher.identity.state != null ? cipher.identity.state.encryptedString : null;\n        this.identity.postalCode =\n          cipher.identity.postalCode != null ? cipher.identity.postalCode.encryptedString : null;\n        this.identity.country =\n          cipher.identity.country != null ? cipher.identity.country.encryptedString : null;\n        this.identity.company =\n          cipher.identity.company != null ? cipher.identity.company.encryptedString : null;\n        this.identity.email =\n          cipher.identity.email != null ? cipher.identity.email.encryptedString : null;\n        this.identity.phone =\n          cipher.identity.phone != null ? cipher.identity.phone.encryptedString : null;\n        this.identity.ssn =\n          cipher.identity.ssn != null ? cipher.identity.ssn.encryptedString : null;\n        this.identity.username =\n          cipher.identity.username != null ? cipher.identity.username.encryptedString : null;\n        this.identity.passportNumber =\n          cipher.identity.passportNumber != null\n            ? cipher.identity.passportNumber.encryptedString\n            : null;\n        this.identity.licenseNumber =\n          cipher.identity.licenseNumber != null\n            ? cipher.identity.licenseNumber.encryptedString\n            : null;\n        break;\n      default:\n        break;\n    }\n\n    if (cipher.fields != null) {\n      this.fields = cipher.fields.map((f) => {\n        const field = new FieldApi();\n        field.type = f.type;\n        field.name = f.name ? f.name.encryptedString : null;\n        field.value = f.value ? f.value.encryptedString : null;\n        field.linkedId = f.linkedId;\n        return field;\n      });\n    }\n\n    if (cipher.passwordHistory != null) {\n      this.passwordHistory = [];\n      cipher.passwordHistory.forEach((ph) => {\n        this.passwordHistory.push({\n          lastUsedDate: ph.lastUsedDate,\n          password: ph.password ? ph.password.encryptedString : null,\n        });\n      });\n    }\n\n    if (cipher.attachments != null) {\n      this.attachments = {};\n      this.attachments2 = {};\n      cipher.attachments.forEach((attachment) => {\n        const fileName = attachment.fileName ? attachment.fileName.encryptedString : null;\n        this.attachments[attachment.id] = fileName;\n        const attachmentRequest = new AttachmentRequest();\n        attachmentRequest.fileName = fileName;\n        if (attachment.key != null) {\n          attachmentRequest.key = attachment.key.encryptedString;\n        }\n        this.attachments2[attachment.id] = attachmentRequest;\n      });\n    }\n  }\n}\n","import { Cipher } from \"../domain/cipher\";\n\nimport { CipherRequest } from \"./cipher.request\";\n\nexport class CipherWithIdRequest extends CipherRequest {\n  id: string;\n\n  constructor(cipher: Cipher) {\n    super(cipher);\n    this.id = cipher.id;\n  }\n}\n","import { Cipher } from \"../domain/cipher\";\n\nimport { CipherWithIdRequest } from \"./cipher-with-id.request\";\n\nexport class CipherBulkShareRequest {\n  ciphers: CipherWithIdRequest[];\n  collectionIds: string[];\n\n  constructor(ciphers: Cipher[], collectionIds: string[]) {\n    if (ciphers != null) {\n      this.ciphers = [];\n      ciphers.forEach((c) => {\n        this.ciphers.push(new CipherWithIdRequest(c));\n      });\n    }\n    this.collectionIds = collectionIds;\n  }\n}\n","export class CipherCollectionsRequest {\n  collectionIds: string[];\n\n  constructor(collectionIds: string[]) {\n    this.collectionIds = collectionIds == null ? [] : collectionIds;\n  }\n}\n","import { Cipher } from \"../domain/cipher\";\n\nimport { CipherRequest } from \"./cipher.request\";\n\nexport class CipherCreateRequest {\n  cipher: CipherRequest;\n  collectionIds: string[];\n\n  constructor(cipher: Cipher) {\n    this.cipher = new CipherRequest(cipher);\n    this.collectionIds = cipher.collectionIds;\n  }\n}\n","import { Cipher } from \"../domain/cipher\";\n\nexport class CipherPartialRequest {\n  folderId: string;\n  favorite: boolean;\n\n  constructor(cipher: Cipher) {\n    this.folderId = cipher.folderId;\n    this.favorite = cipher.favorite;\n  }\n}\n","import { Cipher } from \"../domain/cipher\";\n\nimport { CipherRequest } from \"./cipher.request\";\n\nexport class CipherShareRequest {\n  cipher: CipherRequest;\n  collectionIds: string[];\n\n  constructor(cipher: Cipher) {\n    this.cipher = new CipherRequest(cipher);\n    this.collectionIds = cipher.collectionIds;\n  }\n}\n","import { firstValueFrom } from \"rxjs\";\n\nimport { ApiService } from \"../../abstractions/api.service\";\nimport { CryptoService } from \"../../abstractions/crypto.service\";\nimport { EncryptService } from \"../../abstractions/encrypt.service\";\nimport { FileUploadService } from \"../../abstractions/fileUpload.service\";\nimport { I18nService } from \"../../abstractions/i18n.service\";\nimport { LogService } from \"../../abstractions/log.service\";\nimport { SearchService } from \"../../abstractions/search.service\";\nimport { SettingsService } from \"../../abstractions/settings.service\";\nimport { StateService } from \"../../abstractions/state.service\";\nimport { FieldType } from \"../../enums/fieldType\";\nimport { UriMatchType } from \"../../enums/uriMatchType\";\nimport { sequentialize } from \"../../misc/sequentialize\";\nimport { Utils } from \"../../misc/utils\";\nimport { AccountSettingsSettings } from \"../../models/domain/account\";\nimport Domain from \"../../models/domain/domain-base\";\nimport { EncArrayBuffer } from \"../../models/domain/enc-array-buffer\";\nimport { EncString } from \"../../models/domain/enc-string\";\nimport { SymmetricCryptoKey } from \"../../models/domain/symmetric-crypto-key\";\nimport { ErrorResponse } from \"../../models/response/error.response\";\nimport { View } from \"../../models/view/view\";\nimport { CipherService as CipherServiceAbstraction } from \"../abstractions/cipher.service\";\nimport { CipherType } from \"../enums/cipher-type\";\nimport { CipherData } from \"../models/data/cipher.data\";\nimport { Attachment } from \"../models/domain/attachment\";\nimport { Card } from \"../models/domain/card\";\nimport { Cipher } from \"../models/domain/cipher\";\nimport { Field } from \"../models/domain/field\";\nimport { Identity } from \"../models/domain/identity\";\nimport { Login } from \"../models/domain/login\";\nimport { LoginUri } from \"../models/domain/login-uri\";\nimport { Password } from \"../models/domain/password\";\nimport { SecureNote } from \"../models/domain/secure-note\";\nimport { SortedCiphersCache } from \"../models/domain/sorted-ciphers-cache\";\nimport { AttachmentRequest } from \"../models/request/attachment.request\";\nimport { CipherBulkDeleteRequest } from \"../models/request/cipher-bulk-delete.request\";\nimport { CipherBulkMoveRequest } from \"../models/request/cipher-bulk-move.request\";\nimport { CipherBulkRestoreRequest } from \"../models/request/cipher-bulk-restore.request\";\nimport { CipherBulkShareRequest } from \"../models/request/cipher-bulk-share.request\";\nimport { CipherCollectionsRequest } from \"../models/request/cipher-collections.request\";\nimport { CipherCreateRequest } from \"../models/request/cipher-create.request\";\nimport { CipherPartialRequest } from \"../models/request/cipher-partial.request\";\nimport { CipherShareRequest } from \"../models/request/cipher-share.request\";\nimport { CipherRequest } from \"../models/request/cipher.request\";\nimport { CipherResponse } from \"../models/response/cipher.response\";\nimport { AttachmentView } from \"../models/view/attachment.view\";\nimport { CipherView } from \"../models/view/cipher.view\";\nimport { FieldView } from \"../models/view/field.view\";\nimport { PasswordHistoryView } from \"../models/view/password-history.view\";\n\nconst DomainMatchBlacklist = new Map<string, Set<string>>([\n  [\"google.com\", new Set([\"script.google.com\"])],\n]);\n\nexport class CipherService implements CipherServiceAbstraction {\n  private sortedCiphersCache: SortedCiphersCache = new SortedCiphersCache(\n    this.sortCiphersByLastUsed\n  );\n\n  constructor(\n    private cryptoService: CryptoService,\n    private settingsService: SettingsService,\n    private apiService: ApiService,\n    private fileUploadService: FileUploadService,\n    private i18nService: I18nService,\n    private searchService: () => SearchService,\n    private logService: LogService,\n    private stateService: StateService,\n    private encryptService: EncryptService\n  ) {}\n\n  async getDecryptedCipherCache(): Promise<CipherView[]> {\n    const decryptedCiphers = await this.stateService.getDecryptedCiphers();\n    return decryptedCiphers;\n  }\n\n  async setDecryptedCipherCache(value: CipherView[]) {\n    await this.stateService.setDecryptedCiphers(value);\n    if (this.searchService != null) {\n      if (value == null) {\n        this.searchService().clearIndex();\n      } else {\n        this.searchService().indexCiphers();\n      }\n    }\n  }\n\n  async clearCache(userId?: string): Promise<void> {\n    await this.clearDecryptedCiphersState(userId);\n  }\n\n  async encrypt(\n    model: CipherView,\n    key?: SymmetricCryptoKey,\n    originalCipher: Cipher = null\n  ): Promise<Cipher> {\n    // Adjust password history\n    if (model.id != null) {\n      if (originalCipher == null) {\n        originalCipher = await this.get(model.id);\n      }\n      if (originalCipher != null) {\n        const existingCipher = await originalCipher.decrypt();\n        model.passwordHistory = existingCipher.passwordHistory || [];\n        if (model.type === CipherType.Login && existingCipher.type === CipherType.Login) {\n          if (\n            existingCipher.login.password != null &&\n            existingCipher.login.password !== \"\" &&\n            existingCipher.login.password !== model.login.password\n          ) {\n            const ph = new PasswordHistoryView();\n            ph.password = existingCipher.login.password;\n            ph.lastUsedDate = model.login.passwordRevisionDate = new Date();\n            model.passwordHistory.splice(0, 0, ph);\n          } else {\n            model.login.passwordRevisionDate = existingCipher.login.passwordRevisionDate;\n          }\n        }\n        if (existingCipher.hasFields) {\n          const existingHiddenFields = existingCipher.fields.filter(\n            (f) =>\n              f.type === FieldType.Hidden &&\n              f.name != null &&\n              f.name !== \"\" &&\n              f.value != null &&\n              f.value !== \"\"\n          );\n          const hiddenFields =\n            model.fields == null\n              ? []\n              : model.fields.filter(\n                  (f) => f.type === FieldType.Hidden && f.name != null && f.name !== \"\"\n                );\n          existingHiddenFields.forEach((ef) => {\n            const matchedField = hiddenFields.find((f) => f.name === ef.name);\n            if (matchedField == null || matchedField.value !== ef.value) {\n              const ph = new PasswordHistoryView();\n              ph.password = ef.name + \": \" + ef.value;\n              ph.lastUsedDate = new Date();\n              model.passwordHistory.splice(0, 0, ph);\n            }\n          });\n        }\n      }\n      if (model.passwordHistory != null && model.passwordHistory.length === 0) {\n        model.passwordHistory = null;\n      } else if (model.passwordHistory != null && model.passwordHistory.length > 5) {\n        // only save last 5 history\n        model.passwordHistory = model.passwordHistory.slice(0, 5);\n      }\n    }\n\n    const cipher = new Cipher();\n    cipher.id = model.id;\n    cipher.folderId = model.folderId;\n    cipher.favorite = model.favorite;\n    cipher.organizationId = model.organizationId;\n    cipher.type = model.type;\n    cipher.collectionIds = model.collectionIds;\n    cipher.revisionDate = model.revisionDate;\n    cipher.reprompt = model.reprompt;\n    cipher.edit = model.edit;\n\n    if (key == null && cipher.organizationId != null) {\n      key = await this.cryptoService.getOrgKey(cipher.organizationId);\n      if (key == null) {\n        throw new Error(\"Cannot encrypt cipher for organization. No key.\");\n      }\n    }\n    await Promise.all([\n      this.encryptObjProperty(\n        model,\n        cipher,\n        {\n          name: null,\n          notes: null,\n        },\n        key\n      ),\n      this.encryptCipherData(cipher, model, key),\n      this.encryptFields(model.fields, key).then((fields) => {\n        cipher.fields = fields;\n      }),\n      this.encryptPasswordHistories(model.passwordHistory, key).then((ph) => {\n        cipher.passwordHistory = ph;\n      }),\n      this.encryptAttachments(model.attachments, key).then((attachments) => {\n        cipher.attachments = attachments;\n      }),\n    ]);\n\n    return cipher;\n  }\n\n  async encryptAttachments(\n    attachmentsModel: AttachmentView[],\n    key: SymmetricCryptoKey\n  ): Promise<Attachment[]> {\n    if (attachmentsModel == null || attachmentsModel.length === 0) {\n      return null;\n    }\n\n    const promises: Promise<any>[] = [];\n    const encAttachments: Attachment[] = [];\n    attachmentsModel.forEach(async (model) => {\n      const attachment = new Attachment();\n      attachment.id = model.id;\n      attachment.size = model.size;\n      attachment.sizeName = model.sizeName;\n      attachment.url = model.url;\n      const promise = this.encryptObjProperty(\n        model,\n        attachment,\n        {\n          fileName: null,\n        },\n        key\n      ).then(async () => {\n        if (model.key != null) {\n          attachment.key = await this.cryptoService.encrypt(model.key.key, key);\n        }\n        encAttachments.push(attachment);\n      });\n      promises.push(promise);\n    });\n\n    await Promise.all(promises);\n    return encAttachments;\n  }\n\n  async encryptFields(fieldsModel: FieldView[], key: SymmetricCryptoKey): Promise<Field[]> {\n    if (!fieldsModel || !fieldsModel.length) {\n      return null;\n    }\n\n    const self = this;\n    const encFields: Field[] = [];\n    await fieldsModel.reduce(async (promise, field) => {\n      await promise;\n      const encField = await self.encryptField(field, key);\n      encFields.push(encField);\n    }, Promise.resolve());\n\n    return encFields;\n  }\n\n  async encryptField(fieldModel: FieldView, key: SymmetricCryptoKey): Promise<Field> {\n    const field = new Field();\n    field.type = fieldModel.type;\n    field.linkedId = fieldModel.linkedId;\n    // normalize boolean type field values\n    if (fieldModel.type === FieldType.Boolean && fieldModel.value !== \"true\") {\n      fieldModel.value = \"false\";\n    }\n\n    await this.encryptObjProperty(\n      fieldModel,\n      field,\n      {\n        name: null,\n        value: null,\n      },\n      key\n    );\n\n    return field;\n  }\n\n  async encryptPasswordHistories(\n    phModels: PasswordHistoryView[],\n    key: SymmetricCryptoKey\n  ): Promise<Password[]> {\n    if (!phModels || !phModels.length) {\n      return null;\n    }\n\n    const self = this;\n    const encPhs: Password[] = [];\n    await phModels.reduce(async (promise, ph) => {\n      await promise;\n      const encPh = await self.encryptPasswordHistory(ph, key);\n      encPhs.push(encPh);\n    }, Promise.resolve());\n\n    return encPhs;\n  }\n\n  async encryptPasswordHistory(\n    phModel: PasswordHistoryView,\n    key: SymmetricCryptoKey\n  ): Promise<Password> {\n    const ph = new Password();\n    ph.lastUsedDate = phModel.lastUsedDate;\n\n    await this.encryptObjProperty(\n      phModel,\n      ph,\n      {\n        password: null,\n      },\n      key\n    );\n\n    return ph;\n  }\n\n  async get(id: string): Promise<Cipher> {\n    const ciphers = await this.stateService.getEncryptedCiphers();\n    // eslint-disable-next-line\n    if (ciphers == null || !ciphers.hasOwnProperty(id)) {\n      return null;\n    }\n\n    const localData = await this.stateService.getLocalData();\n    return new Cipher(ciphers[id], localData ? localData[id] : null);\n  }\n\n  async getAll(): Promise<Cipher[]> {\n    const localData = await this.stateService.getLocalData();\n    const ciphers = await this.stateService.getEncryptedCiphers();\n    const response: Cipher[] = [];\n    for (const id in ciphers) {\n      // eslint-disable-next-line\n      if (ciphers.hasOwnProperty(id)) {\n        response.push(new Cipher(ciphers[id], localData ? localData[id] : null));\n      }\n    }\n    return response;\n  }\n\n  @sequentialize(() => \"getAllDecrypted\")\n  async getAllDecrypted(): Promise<CipherView[]> {\n    if ((await this.getDecryptedCipherCache()) != null) {\n      await this.reindexCiphers();\n      return await this.getDecryptedCipherCache();\n    }\n\n    const hasKey = await this.cryptoService.hasKey();\n    if (!hasKey) {\n      throw new Error(\"No key.\");\n    }\n\n    const ciphers = await this.getAll();\n    const orgKeys = await this.cryptoService.getOrgKeys();\n    const userKey = await this.cryptoService.getKeyForUserEncryption();\n\n    // Group ciphers by orgId or under 'null' for the user's ciphers\n    const grouped = ciphers.reduce((agg, c) => {\n      agg[c.organizationId] ??= [];\n      agg[c.organizationId].push(c);\n      return agg;\n    }, {} as Record<string, Cipher[]>);\n\n    const decCiphers = (\n      await Promise.all(\n        Object.entries(grouped).map(([orgId, groupedCiphers]) =>\n          this.encryptService.decryptItems(groupedCiphers, orgKeys.get(orgId) ?? userKey)\n        )\n      )\n    )\n      .flat()\n      .sort(this.getLocaleSortingFunction());\n\n    await this.setDecryptedCipherCache(decCiphers);\n    return decCiphers;\n  }\n\n  private async reindexCiphers() {\n    const userId = await this.stateService.getUserId();\n    const reindexRequired =\n      this.searchService != null && (this.searchService().indexedEntityId ?? userId) !== userId;\n    if (reindexRequired) {\n      await this.searchService().indexCiphers(userId, await this.getDecryptedCipherCache());\n    }\n  }\n\n  async getAllDecryptedForGrouping(groupingId: string, folder = true): Promise<CipherView[]> {\n    const ciphers = await this.getAllDecrypted();\n\n    return ciphers.filter((cipher) => {\n      if (cipher.isDeleted) {\n        return false;\n      }\n      if (folder && cipher.folderId === groupingId) {\n        return true;\n      } else if (\n        !folder &&\n        cipher.collectionIds != null &&\n        cipher.collectionIds.indexOf(groupingId) > -1\n      ) {\n        return true;\n      }\n\n      return false;\n    });\n  }\n\n  async getAllDecryptedForUrl(\n    url: string,\n    includeOtherTypes?: CipherType[],\n    defaultMatch: UriMatchType = null\n  ): Promise<CipherView[]> {\n    if (url == null && includeOtherTypes == null) {\n      return Promise.resolve([]);\n    }\n\n    const domain = Utils.getDomain(url);\n    const eqDomainsPromise =\n      domain == null\n        ? Promise.resolve([])\n        : firstValueFrom(this.settingsService.settings$).then(\n            (settings: AccountSettingsSettings) => {\n              let matches: any[] = [];\n              settings?.equivalentDomains?.forEach((eqDomain: any) => {\n                if (eqDomain.length && eqDomain.indexOf(domain) >= 0) {\n                  matches = matches.concat(eqDomain);\n                }\n              });\n\n              if (!matches.length) {\n                matches.push(domain);\n              }\n\n              return matches;\n            }\n          );\n\n    const result = await Promise.all([eqDomainsPromise, this.getAllDecrypted()]);\n    const matchingDomains = result[0];\n    const ciphers = result[1];\n\n    if (defaultMatch == null) {\n      defaultMatch = await this.stateService.getDefaultUriMatch();\n      if (defaultMatch == null) {\n        defaultMatch = UriMatchType.Domain;\n      }\n    }\n\n    return ciphers.filter((cipher) => {\n      if (cipher.deletedDate != null) {\n        return false;\n      }\n      if (includeOtherTypes != null && includeOtherTypes.indexOf(cipher.type) > -1) {\n        return true;\n      }\n\n      if (url != null && cipher.type === CipherType.Login && cipher.login.uris != null) {\n        for (let i = 0; i < cipher.login.uris.length; i++) {\n          const u = cipher.login.uris[i];\n          if (u.uri == null) {\n            continue;\n          }\n\n          const match = u.match == null ? defaultMatch : u.match;\n          switch (match) {\n            case UriMatchType.Domain:\n              if (domain != null && u.domain != null && matchingDomains.indexOf(u.domain) > -1) {\n                if (DomainMatchBlacklist.has(u.domain)) {\n                  const domainUrlHost = Utils.getHost(url);\n                  if (!DomainMatchBlacklist.get(u.domain).has(domainUrlHost)) {\n                    return true;\n                  }\n                } else {\n                  return true;\n                }\n              }\n              break;\n            case UriMatchType.Host: {\n              const urlHost = Utils.getHost(url);\n              if (urlHost != null && urlHost === Utils.getHost(u.uri)) {\n                return true;\n              }\n              break;\n            }\n            case UriMatchType.Exact:\n              if (url === u.uri) {\n                return true;\n              }\n              break;\n            case UriMatchType.StartsWith:\n              if (url.startsWith(u.uri)) {\n                return true;\n              }\n              break;\n            case UriMatchType.RegularExpression:\n              try {\n                const regex = new RegExp(u.uri, \"i\");\n                if (regex.test(url)) {\n                  return true;\n                }\n              } catch (e) {\n                this.logService.error(e);\n              }\n              break;\n            case UriMatchType.Never:\n            default:\n              break;\n          }\n        }\n      }\n\n      return false;\n    });\n  }\n\n  async getAllFromApiForOrganization(organizationId: string): Promise<CipherView[]> {\n    const response = await this.apiService.getCiphersOrganization(organizationId);\n    if (response?.data == null || response.data.length < 1) {\n      return [];\n    }\n\n    const ciphers = response.data.map((cr) => new Cipher(new CipherData(cr)));\n    const key = await this.cryptoService.getOrgKey(organizationId);\n    const decCiphers = await this.encryptService.decryptItems(ciphers, key);\n\n    decCiphers.sort(this.getLocaleSortingFunction());\n    return decCiphers;\n  }\n\n  async getLastUsedForUrl(url: string, autofillOnPageLoad = false): Promise<CipherView> {\n    return this.getCipherForUrl(url, true, false, autofillOnPageLoad);\n  }\n\n  async getLastLaunchedForUrl(url: string, autofillOnPageLoad = false): Promise<CipherView> {\n    return this.getCipherForUrl(url, false, true, autofillOnPageLoad);\n  }\n\n  async getNextCipherForUrl(url: string): Promise<CipherView> {\n    return this.getCipherForUrl(url, false, false, false);\n  }\n\n  updateLastUsedIndexForUrl(url: string) {\n    this.sortedCiphersCache.updateLastUsedIndex(url);\n  }\n\n  async updateLastUsedDate(id: string): Promise<void> {\n    let ciphersLocalData = await this.stateService.getLocalData();\n    if (!ciphersLocalData) {\n      ciphersLocalData = {};\n    }\n\n    if (ciphersLocalData[id]) {\n      ciphersLocalData[id].lastUsedDate = new Date().getTime();\n    } else {\n      ciphersLocalData[id] = {\n        lastUsedDate: new Date().getTime(),\n      };\n    }\n\n    await this.stateService.setLocalData(ciphersLocalData);\n\n    const decryptedCipherCache = await this.stateService.getDecryptedCiphers();\n    if (!decryptedCipherCache) {\n      return;\n    }\n\n    for (let i = 0; i < decryptedCipherCache.length; i++) {\n      const cached = decryptedCipherCache[i];\n      if (cached.id === id) {\n        cached.localData = ciphersLocalData[id];\n        break;\n      }\n    }\n    await this.stateService.setDecryptedCiphers(decryptedCipherCache);\n  }\n\n  async updateLastLaunchedDate(id: string): Promise<void> {\n    let ciphersLocalData = await this.stateService.getLocalData();\n    if (!ciphersLocalData) {\n      ciphersLocalData = {};\n    }\n\n    if (ciphersLocalData[id]) {\n      ciphersLocalData[id].lastLaunched = new Date().getTime();\n    } else {\n      ciphersLocalData[id] = {\n        lastUsedDate: new Date().getTime(),\n      };\n    }\n\n    await this.stateService.setLocalData(ciphersLocalData);\n\n    const decryptedCipherCache = await this.stateService.getDecryptedCiphers();\n    if (!decryptedCipherCache) {\n      return;\n    }\n\n    for (let i = 0; i < decryptedCipherCache.length; i++) {\n      const cached = decryptedCipherCache[i];\n      if (cached.id === id) {\n        cached.localData = ciphersLocalData[id];\n        break;\n      }\n    }\n    await this.stateService.setDecryptedCiphers(decryptedCipherCache);\n  }\n\n  async saveNeverDomain(domain: string): Promise<void> {\n    if (domain == null) {\n      return;\n    }\n\n    let domains = await this.stateService.getNeverDomains();\n    if (!domains) {\n      domains = {};\n    }\n    domains[domain] = null;\n    await this.stateService.setNeverDomains(domains);\n  }\n\n  async createWithServer(cipher: Cipher): Promise<any> {\n    let response: CipherResponse;\n    if (cipher.collectionIds != null) {\n      const request = new CipherCreateRequest(cipher);\n      response = await this.apiService.postCipherCreate(request);\n    } else {\n      const request = new CipherRequest(cipher);\n      response = await this.apiService.postCipher(request);\n    }\n    cipher.id = response.id;\n\n    const data = new CipherData(response, cipher.collectionIds);\n    await this.upsert(data);\n  }\n\n  async updateWithServer(cipher: Cipher): Promise<any> {\n    let response: CipherResponse;\n    if (cipher.edit) {\n      const request = new CipherRequest(cipher);\n      response = await this.apiService.putCipher(cipher.id, request);\n    } else {\n      const request = new CipherPartialRequest(cipher);\n      response = await this.apiService.putPartialCipher(cipher.id, request);\n    }\n\n    const data = new CipherData(response, cipher.collectionIds);\n    await this.upsert(data);\n  }\n\n  async shareWithServer(\n    cipher: CipherView,\n    organizationId: string,\n    collectionIds: string[]\n  ): Promise<any> {\n    const attachmentPromises: Promise<any>[] = [];\n    if (cipher.attachments != null) {\n      cipher.attachments.forEach((attachment) => {\n        if (attachment.key == null) {\n          attachmentPromises.push(\n            this.shareAttachmentWithServer(attachment, cipher.id, organizationId)\n          );\n        }\n      });\n    }\n    await Promise.all(attachmentPromises);\n\n    cipher.organizationId = organizationId;\n    cipher.collectionIds = collectionIds;\n    const encCipher = await this.encrypt(cipher);\n    const request = new CipherShareRequest(encCipher);\n    const response = await this.apiService.putShareCipher(cipher.id, request);\n    const data = new CipherData(response, collectionIds);\n    await this.upsert(data);\n  }\n\n  async shareManyWithServer(\n    ciphers: CipherView[],\n    organizationId: string,\n    collectionIds: string[]\n  ): Promise<any> {\n    const promises: Promise<any>[] = [];\n    const encCiphers: Cipher[] = [];\n    for (const cipher of ciphers) {\n      cipher.organizationId = organizationId;\n      cipher.collectionIds = collectionIds;\n      promises.push(\n        this.encrypt(cipher).then((c) => {\n          encCiphers.push(c);\n        })\n      );\n    }\n    await Promise.all(promises);\n    const request = new CipherBulkShareRequest(encCiphers, collectionIds);\n    try {\n      await this.apiService.putShareCiphers(request);\n    } catch (e) {\n      for (const cipher of ciphers) {\n        cipher.organizationId = null;\n        cipher.collectionIds = null;\n      }\n      throw e;\n    }\n    await this.upsert(encCiphers.map((c) => c.toCipherData()));\n  }\n\n  saveAttachmentWithServer(cipher: Cipher, unencryptedFile: any, admin = false): Promise<Cipher> {\n    return new Promise((resolve, reject) => {\n      const reader = new FileReader();\n      reader.readAsArrayBuffer(unencryptedFile);\n      reader.onload = async (evt: any) => {\n        try {\n          const cData = await this.saveAttachmentRawWithServer(\n            cipher,\n            unencryptedFile.name,\n            evt.target.result,\n            admin\n          );\n          resolve(cData);\n        } catch (e) {\n          reject(e);\n        }\n      };\n      reader.onerror = () => {\n        reject(\"Error reading file.\");\n      };\n    });\n  }\n\n  async saveAttachmentRawWithServer(\n    cipher: Cipher,\n    filename: string,\n    data: ArrayBuffer,\n    admin = false\n  ): Promise<Cipher> {\n    const key = await this.cryptoService.getOrgKey(cipher.organizationId);\n    const encFileName = await this.cryptoService.encrypt(filename, key);\n\n    const dataEncKey = await this.cryptoService.makeEncKey(key);\n    const encData = await this.cryptoService.encryptToBytes(data, dataEncKey[0]);\n\n    const request: AttachmentRequest = {\n      key: dataEncKey[1].encryptedString,\n      fileName: encFileName.encryptedString,\n      fileSize: encData.buffer.byteLength,\n      adminRequest: admin,\n    };\n\n    let response: CipherResponse;\n    try {\n      const uploadDataResponse = await this.apiService.postCipherAttachment(cipher.id, request);\n      response = admin ? uploadDataResponse.cipherMiniResponse : uploadDataResponse.cipherResponse;\n      await this.fileUploadService.uploadCipherAttachment(\n        admin,\n        uploadDataResponse,\n        encFileName,\n        encData\n      );\n    } catch (e) {\n      if (\n        (e instanceof ErrorResponse && (e as ErrorResponse).statusCode === 404) ||\n        (e as ErrorResponse).statusCode === 405\n      ) {\n        response = await this.legacyServerAttachmentFileUpload(\n          admin,\n          cipher.id,\n          encFileName,\n          encData,\n          dataEncKey[1]\n        );\n      } else if (e instanceof ErrorResponse) {\n        throw new Error((e as ErrorResponse).getSingleMessage());\n      } else {\n        throw e;\n      }\n    }\n\n    const cData = new CipherData(response, cipher.collectionIds);\n    if (!admin) {\n      await this.upsert(cData);\n    }\n    return new Cipher(cData);\n  }\n\n  /**\n   * @deprecated Mar 25 2021: This method has been deprecated in favor of direct uploads.\n   * This method still exists for backward compatibility with old server versions.\n   */\n  async legacyServerAttachmentFileUpload(\n    admin: boolean,\n    cipherId: string,\n    encFileName: EncString,\n    encData: EncArrayBuffer,\n    key: EncString\n  ) {\n    const fd = new FormData();\n    try {\n      const blob = new Blob([encData.buffer], { type: \"application/octet-stream\" });\n      fd.append(\"key\", key.encryptedString);\n      fd.append(\"data\", blob, encFileName.encryptedString);\n    } catch (e) {\n      if (Utils.isNode && !Utils.isBrowser) {\n        fd.append(\"key\", key.encryptedString);\n        fd.append(\n          \"data\",\n          Buffer.from(encData.buffer) as any,\n          {\n            filepath: encFileName.encryptedString,\n            contentType: \"application/octet-stream\",\n          } as any\n        );\n      } else {\n        throw e;\n      }\n    }\n\n    let response: CipherResponse;\n    try {\n      if (admin) {\n        response = await this.apiService.postCipherAttachmentAdminLegacy(cipherId, fd);\n      } else {\n        response = await this.apiService.postCipherAttachmentLegacy(cipherId, fd);\n      }\n    } catch (e) {\n      throw new Error((e as ErrorResponse).getSingleMessage());\n    }\n\n    return response;\n  }\n\n  async saveCollectionsWithServer(cipher: Cipher): Promise<any> {\n    const request = new CipherCollectionsRequest(cipher.collectionIds);\n    await this.apiService.putCipherCollections(cipher.id, request);\n    const data = cipher.toCipherData();\n    await this.upsert(data);\n  }\n\n  async upsert(cipher: CipherData | CipherData[]): Promise<any> {\n    let ciphers = await this.stateService.getEncryptedCiphers();\n    if (ciphers == null) {\n      ciphers = {};\n    }\n\n    if (cipher instanceof CipherData) {\n      const c = cipher as CipherData;\n      ciphers[c.id] = c;\n    } else {\n      (cipher as CipherData[]).forEach((c) => {\n        ciphers[c.id] = c;\n      });\n    }\n\n    await this.replace(ciphers);\n  }\n\n  async replace(ciphers: { [id: string]: CipherData }): Promise<any> {\n    await this.clearDecryptedCiphersState();\n    await this.stateService.setEncryptedCiphers(ciphers);\n  }\n\n  async clear(userId?: string): Promise<any> {\n    await this.clearEncryptedCiphersState(userId);\n    await this.clearCache(userId);\n  }\n\n  async moveManyWithServer(ids: string[], folderId: string): Promise<any> {\n    await this.apiService.putMoveCiphers(new CipherBulkMoveRequest(ids, folderId));\n\n    let ciphers = await this.stateService.getEncryptedCiphers();\n    if (ciphers == null) {\n      ciphers = {};\n    }\n\n    ids.forEach((id) => {\n      // eslint-disable-next-line\n      if (ciphers.hasOwnProperty(id)) {\n        ciphers[id].folderId = folderId;\n      }\n    });\n\n    await this.clearCache();\n    await this.stateService.setEncryptedCiphers(ciphers);\n  }\n\n  async delete(id: string | string[]): Promise<any> {\n    const ciphers = await this.stateService.getEncryptedCiphers();\n    if (ciphers == null) {\n      return;\n    }\n\n    if (typeof id === \"string\") {\n      if (ciphers[id] == null) {\n        return;\n      }\n      delete ciphers[id];\n    } else {\n      (id as string[]).forEach((i) => {\n        delete ciphers[i];\n      });\n    }\n\n    await this.clearCache();\n    await this.stateService.setEncryptedCiphers(ciphers);\n  }\n\n  async deleteWithServer(id: string): Promise<any> {\n    await this.apiService.deleteCipher(id);\n    await this.delete(id);\n  }\n\n  async deleteManyWithServer(ids: string[]): Promise<any> {\n    await this.apiService.deleteManyCiphers(new CipherBulkDeleteRequest(ids));\n    await this.delete(ids);\n  }\n\n  async deleteAttachment(id: string, attachmentId: string): Promise<void> {\n    const ciphers = await this.stateService.getEncryptedCiphers();\n\n    // eslint-disable-next-line\n    if (ciphers == null || !ciphers.hasOwnProperty(id) || ciphers[id].attachments == null) {\n      return;\n    }\n\n    for (let i = 0; i < ciphers[id].attachments.length; i++) {\n      if (ciphers[id].attachments[i].id === attachmentId) {\n        ciphers[id].attachments.splice(i, 1);\n      }\n    }\n\n    await this.clearCache();\n    await this.stateService.setEncryptedCiphers(ciphers);\n  }\n\n  async deleteAttachmentWithServer(id: string, attachmentId: string): Promise<void> {\n    try {\n      await this.apiService.deleteCipherAttachment(id, attachmentId);\n    } catch (e) {\n      return Promise.reject((e as ErrorResponse).getSingleMessage());\n    }\n    await this.deleteAttachment(id, attachmentId);\n  }\n\n  sortCiphersByLastUsed(a: CipherView, b: CipherView): number {\n    const aLastUsed =\n      a.localData && a.localData.lastUsedDate ? (a.localData.lastUsedDate as number) : null;\n    const bLastUsed =\n      b.localData && b.localData.lastUsedDate ? (b.localData.lastUsedDate as number) : null;\n\n    const bothNotNull = aLastUsed != null && bLastUsed != null;\n    if (bothNotNull && aLastUsed < bLastUsed) {\n      return 1;\n    }\n    if (aLastUsed != null && bLastUsed == null) {\n      return -1;\n    }\n\n    if (bothNotNull && aLastUsed > bLastUsed) {\n      return -1;\n    }\n    if (bLastUsed != null && aLastUsed == null) {\n      return 1;\n    }\n\n    return 0;\n  }\n\n  sortCiphersByLastUsedThenName(a: CipherView, b: CipherView): number {\n    const result = this.sortCiphersByLastUsed(a, b);\n    if (result !== 0) {\n      return result;\n    }\n\n    return this.getLocaleSortingFunction()(a, b);\n  }\n\n  getLocaleSortingFunction(): (a: CipherView, b: CipherView) => number {\n    return (a, b) => {\n      let aName = a.name;\n      let bName = b.name;\n\n      if (aName == null && bName != null) {\n        return -1;\n      }\n      if (aName != null && bName == null) {\n        return 1;\n      }\n      if (aName == null && bName == null) {\n        return 0;\n      }\n\n      const result = this.i18nService.collator\n        ? this.i18nService.collator.compare(aName, bName)\n        : aName.localeCompare(bName);\n\n      if (result !== 0 || a.type !== CipherType.Login || b.type !== CipherType.Login) {\n        return result;\n      }\n\n      if (a.login.username != null) {\n        aName += a.login.username;\n      }\n\n      if (b.login.username != null) {\n        bName += b.login.username;\n      }\n\n      return this.i18nService.collator\n        ? this.i18nService.collator.compare(aName, bName)\n        : aName.localeCompare(bName);\n    };\n  }\n\n  async softDelete(id: string | string[]): Promise<any> {\n    const ciphers = await this.stateService.getEncryptedCiphers();\n    if (ciphers == null) {\n      return;\n    }\n\n    const setDeletedDate = (cipherId: string) => {\n      if (ciphers[cipherId] == null) {\n        return;\n      }\n      ciphers[cipherId].deletedDate = new Date().toISOString();\n    };\n\n    if (typeof id === \"string\") {\n      setDeletedDate(id);\n    } else {\n      (id as string[]).forEach(setDeletedDate);\n    }\n\n    await this.clearCache();\n    await this.stateService.setEncryptedCiphers(ciphers);\n  }\n\n  async softDeleteWithServer(id: string): Promise<any> {\n    await this.apiService.putDeleteCipher(id);\n    await this.softDelete(id);\n  }\n\n  async softDeleteManyWithServer(ids: string[]): Promise<any> {\n    await this.apiService.putDeleteManyCiphers(new CipherBulkDeleteRequest(ids));\n    await this.softDelete(ids);\n  }\n\n  async restore(\n    cipher: { id: string; revisionDate: string } | { id: string; revisionDate: string }[]\n  ) {\n    const ciphers = await this.stateService.getEncryptedCiphers();\n    if (ciphers == null) {\n      return;\n    }\n\n    const clearDeletedDate = (c: { id: string; revisionDate: string }) => {\n      if (ciphers[c.id] == null) {\n        return;\n      }\n      ciphers[c.id].deletedDate = null;\n      ciphers[c.id].revisionDate = c.revisionDate;\n    };\n\n    if (cipher.constructor.name === Array.name) {\n      (cipher as { id: string; revisionDate: string }[]).forEach(clearDeletedDate);\n    } else {\n      clearDeletedDate(cipher as { id: string; revisionDate: string });\n    }\n\n    await this.clearCache();\n    await this.stateService.setEncryptedCiphers(ciphers);\n  }\n\n  async restoreWithServer(id: string): Promise<any> {\n    const response = await this.apiService.putRestoreCipher(id);\n    await this.restore({ id: id, revisionDate: response.revisionDate });\n  }\n\n  async restoreManyWithServer(ids: string[]): Promise<any> {\n    const response = await this.apiService.putRestoreManyCiphers(new CipherBulkRestoreRequest(ids));\n    const restores: { id: string; revisionDate: string }[] = [];\n    for (const cipher of response.data) {\n      restores.push({ id: cipher.id, revisionDate: cipher.revisionDate });\n    }\n    await this.restore(restores);\n  }\n\n  // Helpers\n\n  private async shareAttachmentWithServer(\n    attachmentView: AttachmentView,\n    cipherId: string,\n    organizationId: string\n  ): Promise<any> {\n    const attachmentResponse = await this.apiService.nativeFetch(\n      new Request(attachmentView.url, { cache: \"no-store\" })\n    );\n    if (attachmentResponse.status !== 200) {\n      throw Error(\"Failed to download attachment: \" + attachmentResponse.status.toString());\n    }\n\n    const encBuf = await EncArrayBuffer.fromResponse(attachmentResponse);\n    const decBuf = await this.cryptoService.decryptFromBytes(encBuf, null);\n    const key = await this.cryptoService.getOrgKey(organizationId);\n    const encFileName = await this.cryptoService.encrypt(attachmentView.fileName, key);\n\n    const dataEncKey = await this.cryptoService.makeEncKey(key);\n    const encData = await this.cryptoService.encryptToBytes(decBuf, dataEncKey[0]);\n\n    const fd = new FormData();\n    try {\n      const blob = new Blob([encData.buffer], { type: \"application/octet-stream\" });\n      fd.append(\"key\", dataEncKey[1].encryptedString);\n      fd.append(\"data\", blob, encFileName.encryptedString);\n    } catch (e) {\n      if (Utils.isNode && !Utils.isBrowser) {\n        fd.append(\"key\", dataEncKey[1].encryptedString);\n        fd.append(\n          \"data\",\n          Buffer.from(encData.buffer) as any,\n          {\n            filepath: encFileName.encryptedString,\n            contentType: \"application/octet-stream\",\n          } as any\n        );\n      } else {\n        throw e;\n      }\n    }\n\n    try {\n      await this.apiService.postShareCipherAttachment(\n        cipherId,\n        attachmentView.id,\n        fd,\n        organizationId\n      );\n    } catch (e) {\n      throw new Error((e as ErrorResponse).getSingleMessage());\n    }\n  }\n\n  private async encryptObjProperty<V extends View, D extends Domain>(\n    model: V,\n    obj: D,\n    map: any,\n    key: SymmetricCryptoKey\n  ): Promise<void> {\n    const promises = [];\n    const self = this;\n\n    for (const prop in map) {\n      // eslint-disable-next-line\n      if (!map.hasOwnProperty(prop)) {\n        continue;\n      }\n\n      (function (theProp, theObj) {\n        const p = Promise.resolve()\n          .then(() => {\n            const modelProp = (model as any)[map[theProp] || theProp];\n            if (modelProp && modelProp !== \"\") {\n              return self.cryptoService.encrypt(modelProp, key);\n            }\n            return null;\n          })\n          .then((val: EncString) => {\n            (theObj as any)[theProp] = val;\n          });\n        promises.push(p);\n      })(prop, obj);\n    }\n\n    await Promise.all(promises);\n  }\n\n  private async encryptCipherData(cipher: Cipher, model: CipherView, key: SymmetricCryptoKey) {\n    switch (cipher.type) {\n      case CipherType.Login:\n        cipher.login = new Login();\n        cipher.login.passwordRevisionDate = model.login.passwordRevisionDate;\n        cipher.login.autofillOnPageLoad = model.login.autofillOnPageLoad;\n        await this.encryptObjProperty(\n          model.login,\n          cipher.login,\n          {\n            username: null,\n            password: null,\n            totp: null,\n          },\n          key\n        );\n\n        if (model.login.uris != null) {\n          cipher.login.uris = [];\n          for (let i = 0; i < model.login.uris.length; i++) {\n            const loginUri = new LoginUri();\n            loginUri.match = model.login.uris[i].match;\n            await this.encryptObjProperty(\n              model.login.uris[i],\n              loginUri,\n              {\n                uri: null,\n              },\n              key\n            );\n            cipher.login.uris.push(loginUri);\n          }\n        }\n        return;\n      case CipherType.SecureNote:\n        cipher.secureNote = new SecureNote();\n        cipher.secureNote.type = model.secureNote.type;\n        return;\n      case CipherType.Card:\n        cipher.card = new Card();\n        await this.encryptObjProperty(\n          model.card,\n          cipher.card,\n          {\n            cardholderName: null,\n            brand: null,\n            number: null,\n            expMonth: null,\n            expYear: null,\n            code: null,\n          },\n          key\n        );\n        return;\n      case CipherType.Identity:\n        cipher.identity = new Identity();\n        await this.encryptObjProperty(\n          model.identity,\n          cipher.identity,\n          {\n            title: null,\n            firstName: null,\n            middleName: null,\n            lastName: null,\n            address1: null,\n            address2: null,\n            address3: null,\n            city: null,\n            state: null,\n            postalCode: null,\n            country: null,\n            company: null,\n            email: null,\n            phone: null,\n            ssn: null,\n            username: null,\n            passportNumber: null,\n            licenseNumber: null,\n          },\n          key\n        );\n        return;\n      default:\n        throw new Error(\"Unknown cipher type.\");\n    }\n  }\n\n  private async getCipherForUrl(\n    url: string,\n    lastUsed: boolean,\n    lastLaunched: boolean,\n    autofillOnPageLoad: boolean\n  ): Promise<CipherView> {\n    const cacheKey = autofillOnPageLoad ? \"autofillOnPageLoad-\" + url : url;\n\n    if (!this.sortedCiphersCache.isCached(cacheKey)) {\n      let ciphers = await this.getAllDecryptedForUrl(url);\n      if (!ciphers) {\n        return null;\n      }\n\n      if (autofillOnPageLoad) {\n        const autofillOnPageLoadDefault = await this.stateService.getAutoFillOnPageLoadDefault();\n        ciphers = ciphers.filter(\n          (cipher) =>\n            cipher.login.autofillOnPageLoad ||\n            (cipher.login.autofillOnPageLoad == null && autofillOnPageLoadDefault !== false)\n        );\n        if (ciphers.length === 0) {\n          return null;\n        }\n      }\n\n      this.sortedCiphersCache.addCiphers(cacheKey, ciphers);\n    }\n\n    if (lastLaunched) {\n      return this.sortedCiphersCache.getLastLaunched(cacheKey);\n    } else if (lastUsed) {\n      return this.sortedCiphersCache.getLastUsed(cacheKey);\n    } else {\n      return this.sortedCiphersCache.getNext(cacheKey);\n    }\n  }\n\n  private async clearEncryptedCiphersState(userId?: string) {\n    await this.stateService.setEncryptedCiphers(null, { userId: userId });\n  }\n\n  private async clearDecryptedCiphersState(userId?: string) {\n    await this.stateService.setDecryptedCiphers(null, { userId: userId });\n    this.clearSortedCiphers();\n  }\n\n  private clearSortedCiphers() {\n    this.sortedCiphersCache.clear();\n  }\n}\n","import { Folder } from \"../domain/folder\";\n\nexport class FolderRequest {\n  name: string;\n\n  constructor(folder: Folder) {\n    this.name = folder.name ? folder.name.encryptedString : null;\n  }\n}\n","import { ApiService } from \"../../../abstractions/api.service\";\nimport { FolderApiServiceAbstraction } from \"../../../vault/abstractions/folder/folder-api.service.abstraction\";\nimport { InternalFolderService } from \"../../../vault/abstractions/folder/folder.service.abstraction\";\nimport { FolderData } from \"../../../vault/models/data/folder.data\";\nimport { Folder } from \"../../../vault/models/domain/folder\";\nimport { FolderRequest } from \"../../../vault/models/request/folder.request\";\nimport { FolderResponse } from \"../../../vault/models/response/folder.response\";\n\nexport class FolderApiService implements FolderApiServiceAbstraction {\n  constructor(private folderService: InternalFolderService, private apiService: ApiService) {}\n\n  async save(folder: Folder): Promise<any> {\n    const request = new FolderRequest(folder);\n\n    let response: FolderResponse;\n    if (folder.id == null) {\n      response = await this.postFolder(request);\n      folder.id = response.id;\n    } else {\n      response = await this.putFolder(folder.id, request);\n    }\n\n    const data = new FolderData(response);\n    await this.folderService.upsert(data);\n  }\n\n  async delete(id: string): Promise<any> {\n    await this.deleteFolder(id);\n    await this.folderService.delete(id);\n  }\n\n  async get(id: string): Promise<FolderResponse> {\n    const r = await this.apiService.send(\"GET\", \"/folders/\" + id, null, true, true);\n    return new FolderResponse(r);\n  }\n\n  private async postFolder(request: FolderRequest): Promise<FolderResponse> {\n    const r = await this.apiService.send(\"POST\", \"/folders\", request, true, true);\n    return new FolderResponse(r);\n  }\n\n  async putFolder(id: string, request: FolderRequest): Promise<FolderResponse> {\n    const r = await this.apiService.send(\"PUT\", \"/folders/\" + id, request, true, true);\n    return new FolderResponse(r);\n  }\n\n  private deleteFolder(id: string): Promise<any> {\n    return this.apiService.send(\"DELETE\", \"/folders/\" + id, null, true, false);\n  }\n}\n","import { BehaviorSubject, concatMap } from \"rxjs\";\n\nimport { CryptoService } from \"../../../abstractions/crypto.service\";\nimport { I18nService } from \"../../../abstractions/i18n.service\";\nimport { StateService } from \"../../../abstractions/state.service\";\nimport { Utils } from \"../../../misc/utils\";\nimport { SymmetricCryptoKey } from \"../../../models/domain/symmetric-crypto-key\";\nimport { CipherService } from \"../../../vault/abstractions/cipher.service\";\nimport { InternalFolderService as InternalFolderServiceAbstraction } from \"../../../vault/abstractions/folder/folder.service.abstraction\";\nimport { CipherData } from \"../../../vault/models/data/cipher.data\";\nimport { FolderData } from \"../../../vault/models/data/folder.data\";\nimport { Folder } from \"../../../vault/models/domain/folder\";\nimport { FolderView } from \"../../../vault/models/view/folder.view\";\n\nexport class FolderService implements InternalFolderServiceAbstraction {\n  protected _folders: BehaviorSubject<Folder[]> = new BehaviorSubject([]);\n  protected _folderViews: BehaviorSubject<FolderView[]> = new BehaviorSubject([]);\n\n  folders$ = this._folders.asObservable();\n  folderViews$ = this._folderViews.asObservable();\n\n  constructor(\n    private cryptoService: CryptoService,\n    private i18nService: I18nService,\n    private cipherService: CipherService,\n    private stateService: StateService\n  ) {\n    this.stateService.activeAccountUnlocked$\n      .pipe(\n        concatMap(async (unlocked) => {\n          if (Utils.global.bitwardenContainerService == null) {\n            return;\n          }\n\n          if (!unlocked) {\n            this._folders.next([]);\n            this._folderViews.next([]);\n            return;\n          }\n\n          const data = await this.stateService.getEncryptedFolders();\n\n          await this.updateObservables(data);\n        })\n      )\n      .subscribe();\n  }\n\n  async clearCache(): Promise<void> {\n    this._folderViews.next([]);\n  }\n\n  // TODO: This should be moved to EncryptService or something\n  async encrypt(model: FolderView, key?: SymmetricCryptoKey): Promise<Folder> {\n    const folder = new Folder();\n    folder.id = model.id;\n    folder.name = await this.cryptoService.encrypt(model.name, key);\n    return folder;\n  }\n\n  async get(id: string): Promise<Folder> {\n    const folders = this._folders.getValue();\n\n    return folders.find((folder) => folder.id === id);\n  }\n\n  async getAllFromState(): Promise<Folder[]> {\n    const folders = await this.stateService.getEncryptedFolders();\n    const response: Folder[] = [];\n    for (const id in folders) {\n      // eslint-disable-next-line\n      if (folders.hasOwnProperty(id)) {\n        response.push(new Folder(folders[id]));\n      }\n    }\n    return response;\n  }\n\n  /**\n   * @deprecated For the CLI only\n   * @param id id of the folder\n   */\n  async getFromState(id: string): Promise<Folder> {\n    const foldersMap = await this.stateService.getEncryptedFolders();\n    const folder = foldersMap[id];\n    if (folder == null) {\n      return null;\n    }\n\n    return new Folder(folder);\n  }\n\n  /**\n   * @deprecated Only use in CLI!\n   */\n  async getAllDecryptedFromState(): Promise<FolderView[]> {\n    const data = await this.stateService.getEncryptedFolders();\n    const folders = Object.values(data || {}).map((f) => new Folder(f));\n\n    return this.decryptFolders(folders);\n  }\n\n  async upsert(folder: FolderData | FolderData[]): Promise<void> {\n    let folders = await this.stateService.getEncryptedFolders();\n    if (folders == null) {\n      folders = {};\n    }\n\n    if (folder instanceof FolderData) {\n      const f = folder as FolderData;\n      folders[f.id] = f;\n    } else {\n      (folder as FolderData[]).forEach((f) => {\n        folders[f.id] = f;\n      });\n    }\n\n    await this.updateObservables(folders);\n    await this.stateService.setEncryptedFolders(folders);\n  }\n\n  async replace(folders: { [id: string]: FolderData }): Promise<void> {\n    await this.updateObservables(folders);\n    await this.stateService.setEncryptedFolders(folders);\n  }\n\n  async clear(userId?: string): Promise<any> {\n    if (userId == null || userId == (await this.stateService.getUserId())) {\n      this._folders.next([]);\n      this._folderViews.next([]);\n    }\n    await this.stateService.setEncryptedFolders(null, { userId: userId });\n  }\n\n  async delete(id: string | string[]): Promise<any> {\n    const folders = await this.stateService.getEncryptedFolders();\n    if (folders == null) {\n      return;\n    }\n\n    if (typeof id === \"string\") {\n      if (folders[id] == null) {\n        return;\n      }\n      delete folders[id];\n    } else {\n      (id as string[]).forEach((i) => {\n        delete folders[i];\n      });\n    }\n\n    await this.updateObservables(folders);\n    await this.stateService.setEncryptedFolders(folders);\n\n    // Items in a deleted folder are re-assigned to \"No Folder\"\n    const ciphers = await this.stateService.getEncryptedCiphers();\n    if (ciphers != null) {\n      const updates: CipherData[] = [];\n      for (const cId in ciphers) {\n        if (ciphers[cId].folderId === id) {\n          ciphers[cId].folderId = null;\n          updates.push(ciphers[cId]);\n        }\n      }\n      if (updates.length > 0) {\n        this.cipherService.upsert(updates);\n      }\n    }\n  }\n\n  private async updateObservables(foldersMap: { [id: string]: FolderData }) {\n    const folders = Object.values(foldersMap || {}).map((f) => new Folder(f));\n\n    this._folders.next(folders);\n\n    if (await this.cryptoService.hasKey()) {\n      this._folderViews.next(await this.decryptFolders(folders));\n    }\n  }\n\n  private async decryptFolders(folders: Folder[]) {\n    const decryptFolderPromises = folders.map((f) => f.decrypt());\n    const decryptedFolders = await Promise.all(decryptFolderPromises);\n\n    decryptedFolders.sort(Utils.getSortFunction(this.i18nService, \"name\"));\n\n    const noneFolder = new FolderView();\n    noneFolder.name = this.i18nService.t(\"noneFolder\");\n    decryptedFolders.push(noneFolder);\n\n    return decryptedFolders;\n  }\n}\n","import { Subject } from \"rxjs\";\n\nimport { SyncNotifierService as SyncNotifierServiceAbstraction } from \"../../abstractions/sync/sync-notifier.service.abstraction\";\nimport { SyncEventArgs } from \"../../types/sync-event-args\";\n\n/**\n * This class should most likely have 0 dependencies because it will hopefully\n * be rolled into SyncService once upon a time.\n */\nexport class SyncNotifierService implements SyncNotifierServiceAbstraction {\n  private _sync = new Subject<SyncEventArgs>();\n\n  sync$ = this._sync.asObservable();\n\n  next(event: SyncEventArgs): void {\n    this._sync.next(event);\n  }\n}\n","import { OrganizationUserStatusType } from \"../../enums/organizationUserStatusType\";\nimport { OrganizationUserType } from \"../../enums/organizationUserType\";\nimport { ProductType } from \"../../enums/productType\";\nimport { PermissionsApi } from \"../api/permissions.api\";\nimport { ProfileOrganizationResponse } from \"../response/profile-organization.response\";\n\nexport class OrganizationData {\n  id: string;\n  name: string;\n  status: OrganizationUserStatusType;\n  type: OrganizationUserType;\n  enabled: boolean;\n  usePolicies: boolean;\n  useGroups: boolean;\n  useDirectory: boolean;\n  useEvents: boolean;\n  useTotp: boolean;\n  use2fa: boolean;\n  useApi: boolean;\n  useSso: boolean;\n  useKeyConnector: boolean;\n  useScim: boolean;\n  useCustomPermissions: boolean;\n  useResetPassword: boolean;\n  useSecretsManager: boolean;\n  selfHost: boolean;\n  usersGetPremium: boolean;\n  seats: number;\n  maxCollections: number;\n  maxStorageGb?: number;\n  ssoBound: boolean;\n  identifier: string;\n  permissions: PermissionsApi;\n  resetPasswordEnrolled: boolean;\n  userId: string;\n  hasPublicAndPrivateKeys: boolean;\n  providerId: string;\n  providerName: string;\n  isProviderUser: boolean;\n  familySponsorshipFriendlyName: string;\n  familySponsorshipAvailable: boolean;\n  planProductType: ProductType;\n  keyConnectorEnabled: boolean;\n  keyConnectorUrl: string;\n  familySponsorshipLastSyncDate?: Date;\n  familySponsorshipValidUntil?: Date;\n  familySponsorshipToDelete?: boolean;\n  accessSecretsManager: boolean;\n\n  constructor(response: ProfileOrganizationResponse) {\n    this.id = response.id;\n    this.name = response.name;\n    this.status = response.status;\n    this.type = response.type;\n    this.enabled = response.enabled;\n    this.usePolicies = response.usePolicies;\n    this.useGroups = response.useGroups;\n    this.useDirectory = response.useDirectory;\n    this.useEvents = response.useEvents;\n    this.useTotp = response.useTotp;\n    this.use2fa = response.use2fa;\n    this.useApi = response.useApi;\n    this.useSso = response.useSso;\n    this.useKeyConnector = response.useKeyConnector;\n    this.useScim = response.useScim;\n    this.useCustomPermissions = response.useCustomPermissions;\n    this.useResetPassword = response.useResetPassword;\n    this.useSecretsManager = response.useSecretsManager;\n    this.selfHost = response.selfHost;\n    this.usersGetPremium = response.usersGetPremium;\n    this.seats = response.seats;\n    this.maxCollections = response.maxCollections;\n    this.maxStorageGb = response.maxStorageGb;\n    this.ssoBound = response.ssoBound;\n    this.identifier = response.identifier;\n    this.permissions = response.permissions;\n    this.resetPasswordEnrolled = response.resetPasswordEnrolled;\n    this.userId = response.userId;\n    this.hasPublicAndPrivateKeys = response.hasPublicAndPrivateKeys;\n    this.providerId = response.providerId;\n    this.providerName = response.providerName;\n    this.familySponsorshipFriendlyName = response.familySponsorshipFriendlyName;\n    this.familySponsorshipAvailable = response.familySponsorshipAvailable;\n    this.planProductType = response.planProductType;\n    this.keyConnectorEnabled = response.keyConnectorEnabled;\n    this.keyConnectorUrl = response.keyConnectorUrl;\n    this.familySponsorshipLastSyncDate = response.familySponsorshipLastSyncDate;\n    this.familySponsorshipValidUntil = response.familySponsorshipValidUntil;\n    this.familySponsorshipToDelete = response.familySponsorshipToDelete;\n    this.accessSecretsManager = response.accessSecretsManager;\n  }\n}\n","import { ApiService } from \"../../../abstractions/api.service\";\nimport { CollectionService } from \"../../../abstractions/collection.service\";\nimport { CryptoService } from \"../../../abstractions/crypto.service\";\nimport { KeyConnectorService } from \"../../../abstractions/keyConnector.service\";\nimport { LogService } from \"../../../abstractions/log.service\";\nimport { MessagingService } from \"../../../abstractions/messaging.service\";\nimport { InternalOrganizationService } from \"../../../abstractions/organization/organization.service.abstraction\";\nimport { InternalPolicyService } from \"../../../abstractions/policy/policy.service.abstraction\";\nimport { ProviderService } from \"../../../abstractions/provider.service\";\nimport { SendService } from \"../../../abstractions/send.service\";\nimport { SettingsService } from \"../../../abstractions/settings.service\";\nimport { StateService } from \"../../../abstractions/state.service\";\nimport { sequentialize } from \"../../../misc/sequentialize\";\nimport { CollectionData } from \"../../../models/data/collection.data\";\nimport { OrganizationData } from \"../../../models/data/organization.data\";\nimport { PolicyData } from \"../../../models/data/policy.data\";\nimport { ProviderData } from \"../../../models/data/provider.data\";\nimport { SendData } from \"../../../models/data/send.data\";\nimport { CollectionDetailsResponse } from \"../../../models/response/collection.response\";\nimport { DomainsResponse } from \"../../../models/response/domains.response\";\nimport {\n  SyncCipherNotification,\n  SyncFolderNotification,\n  SyncSendNotification,\n} from \"../../../models/response/notification.response\";\nimport { PolicyResponse } from \"../../../models/response/policy.response\";\nimport { ProfileResponse } from \"../../../models/response/profile.response\";\nimport { SendResponse } from \"../../../models/response/send.response\";\nimport { CipherService } from \"../../../vault/abstractions/cipher.service\";\nimport { FolderApiServiceAbstraction } from \"../../../vault/abstractions/folder/folder-api.service.abstraction\";\nimport { InternalFolderService } from \"../../../vault/abstractions/folder/folder.service.abstraction\";\nimport { SyncService as SyncServiceAbstraction } from \"../../../vault/abstractions/sync/sync.service.abstraction\";\nimport { CipherData } from \"../../../vault/models/data/cipher.data\";\nimport { FolderData } from \"../../../vault/models/data/folder.data\";\nimport { CipherResponse } from \"../../../vault/models/response/cipher.response\";\nimport { FolderResponse } from \"../../../vault/models/response/folder.response\";\n\nexport class SyncService implements SyncServiceAbstraction {\n  syncInProgress = false;\n\n  constructor(\n    private apiService: ApiService,\n    private settingsService: SettingsService,\n    private folderService: InternalFolderService,\n    private cipherService: CipherService,\n    private cryptoService: CryptoService,\n    private collectionService: CollectionService,\n    private messagingService: MessagingService,\n    private policyService: InternalPolicyService,\n    private sendService: SendService,\n    private logService: LogService,\n    private keyConnectorService: KeyConnectorService,\n    private stateService: StateService,\n    private providerService: ProviderService,\n    private folderApiService: FolderApiServiceAbstraction,\n    private organizationService: InternalOrganizationService,\n    private logoutCallback: (expired: boolean) => Promise<void>\n  ) {}\n\n  async getLastSync(): Promise<Date> {\n    if ((await this.stateService.getUserId()) == null) {\n      return null;\n    }\n\n    const lastSync = await this.stateService.getLastSync();\n    if (lastSync) {\n      return new Date(lastSync);\n    }\n\n    return null;\n  }\n\n  async setLastSync(date: Date, userId?: string): Promise<any> {\n    await this.stateService.setLastSync(date.toJSON(), { userId: userId });\n  }\n\n  @sequentialize(() => \"fullSync\")\n  async fullSync(forceSync: boolean, allowThrowOnError = false): Promise<boolean> {\n    this.syncStarted();\n    const isAuthenticated = await this.stateService.getIsAuthenticated();\n    if (!isAuthenticated) {\n      return this.syncCompleted(false);\n    }\n\n    const now = new Date();\n    let needsSync = false;\n    try {\n      needsSync = await this.needsSyncing(forceSync);\n    } catch (e) {\n      if (allowThrowOnError) {\n        throw e;\n      }\n    }\n\n    if (!needsSync) {\n      await this.setLastSync(now);\n      return this.syncCompleted(false);\n    }\n\n    try {\n      await this.apiService.refreshIdentityToken();\n      const response = await this.apiService.getSync();\n\n      await this.syncProfile(response.profile);\n      await this.syncFolders(response.folders);\n      await this.syncCollections(response.collections);\n      await this.syncCiphers(response.ciphers);\n      await this.syncSends(response.sends);\n      await this.syncSettings(response.domains);\n      await this.syncPolicies(response.policies);\n\n      await this.setLastSync(now);\n      return this.syncCompleted(true);\n    } catch (e) {\n      if (allowThrowOnError) {\n        throw e;\n      } else {\n        return this.syncCompleted(false);\n      }\n    }\n  }\n\n  async syncUpsertFolder(notification: SyncFolderNotification, isEdit: boolean): Promise<boolean> {\n    this.syncStarted();\n    if (await this.stateService.getIsAuthenticated()) {\n      try {\n        const localFolder = await this.folderService.get(notification.id);\n        if (\n          (!isEdit && localFolder == null) ||\n          (isEdit && localFolder != null && localFolder.revisionDate < notification.revisionDate)\n        ) {\n          const remoteFolder = await this.folderApiService.get(notification.id);\n          if (remoteFolder != null) {\n            await this.folderService.upsert(new FolderData(remoteFolder));\n            this.messagingService.send(\"syncedUpsertedFolder\", { folderId: notification.id });\n            return this.syncCompleted(true);\n          }\n        }\n      } catch (e) {\n        this.logService.error(e);\n      }\n    }\n    return this.syncCompleted(false);\n  }\n\n  async syncDeleteFolder(notification: SyncFolderNotification): Promise<boolean> {\n    this.syncStarted();\n    if (await this.stateService.getIsAuthenticated()) {\n      await this.folderService.delete(notification.id);\n      this.messagingService.send(\"syncedDeletedFolder\", { folderId: notification.id });\n      this.syncCompleted(true);\n      return true;\n    }\n    return this.syncCompleted(false);\n  }\n\n  async syncUpsertCipher(notification: SyncCipherNotification, isEdit: boolean): Promise<boolean> {\n    this.syncStarted();\n    if (await this.stateService.getIsAuthenticated()) {\n      try {\n        let shouldUpdate = true;\n        const localCipher = await this.cipherService.get(notification.id);\n        if (localCipher != null && localCipher.revisionDate >= notification.revisionDate) {\n          shouldUpdate = false;\n        }\n\n        let checkCollections = false;\n        if (shouldUpdate) {\n          if (isEdit) {\n            shouldUpdate = localCipher != null;\n            checkCollections = true;\n          } else {\n            if (notification.collectionIds == null || notification.organizationId == null) {\n              shouldUpdate = localCipher == null;\n            } else {\n              shouldUpdate = false;\n              checkCollections = true;\n            }\n          }\n        }\n\n        if (\n          !shouldUpdate &&\n          checkCollections &&\n          notification.organizationId != null &&\n          notification.collectionIds != null &&\n          notification.collectionIds.length > 0\n        ) {\n          const collections = await this.collectionService.getAll();\n          if (collections != null) {\n            for (let i = 0; i < collections.length; i++) {\n              if (notification.collectionIds.indexOf(collections[i].id) > -1) {\n                shouldUpdate = true;\n                break;\n              }\n            }\n          }\n        }\n\n        if (shouldUpdate) {\n          const remoteCipher = await this.apiService.getFullCipherDetails(notification.id);\n          if (remoteCipher != null) {\n            await this.cipherService.upsert(new CipherData(remoteCipher));\n            this.messagingService.send(\"syncedUpsertedCipher\", { cipherId: notification.id });\n            return this.syncCompleted(true);\n          }\n        }\n      } catch (e) {\n        if (e != null && e.statusCode === 404 && isEdit) {\n          await this.cipherService.delete(notification.id);\n          this.messagingService.send(\"syncedDeletedCipher\", { cipherId: notification.id });\n          return this.syncCompleted(true);\n        }\n      }\n    }\n    return this.syncCompleted(false);\n  }\n\n  async syncDeleteCipher(notification: SyncCipherNotification): Promise<boolean> {\n    this.syncStarted();\n    if (await this.stateService.getIsAuthenticated()) {\n      await this.cipherService.delete(notification.id);\n      this.messagingService.send(\"syncedDeletedCipher\", { cipherId: notification.id });\n      return this.syncCompleted(true);\n    }\n    return this.syncCompleted(false);\n  }\n\n  async syncUpsertSend(notification: SyncSendNotification, isEdit: boolean): Promise<boolean> {\n    this.syncStarted();\n    if (await this.stateService.getIsAuthenticated()) {\n      try {\n        const localSend = await this.sendService.get(notification.id);\n        if (\n          (!isEdit && localSend == null) ||\n          (isEdit && localSend != null && localSend.revisionDate < notification.revisionDate)\n        ) {\n          const remoteSend = await this.apiService.getSend(notification.id);\n          if (remoteSend != null) {\n            await this.sendService.upsert(new SendData(remoteSend));\n            this.messagingService.send(\"syncedUpsertedSend\", { sendId: notification.id });\n            return this.syncCompleted(true);\n          }\n        }\n      } catch (e) {\n        this.logService.error(e);\n      }\n    }\n    return this.syncCompleted(false);\n  }\n\n  async syncDeleteSend(notification: SyncSendNotification): Promise<boolean> {\n    this.syncStarted();\n    if (await this.stateService.getIsAuthenticated()) {\n      await this.sendService.delete(notification.id);\n      this.messagingService.send(\"syncedDeletedSend\", { sendId: notification.id });\n      this.syncCompleted(true);\n      return true;\n    }\n    return this.syncCompleted(false);\n  }\n\n  // Helpers\n\n  private syncStarted() {\n    this.syncInProgress = true;\n    this.messagingService.send(\"syncStarted\");\n  }\n\n  private syncCompleted(successfully: boolean): boolean {\n    this.syncInProgress = false;\n    this.messagingService.send(\"syncCompleted\", { successfully: successfully });\n    return successfully;\n  }\n\n  private async needsSyncing(forceSync: boolean) {\n    if (forceSync) {\n      return true;\n    }\n\n    const lastSync = await this.getLastSync();\n    if (lastSync == null || lastSync.getTime() === 0) {\n      return true;\n    }\n\n    const response = await this.apiService.getAccountRevisionDate();\n    if (new Date(response) <= lastSync) {\n      return false;\n    }\n    return true;\n  }\n\n  private async syncProfile(response: ProfileResponse) {\n    const stamp = await this.stateService.getSecurityStamp();\n    if (stamp != null && stamp !== response.securityStamp) {\n      if (this.logoutCallback != null) {\n        await this.logoutCallback(true);\n      }\n\n      throw new Error(\"Stamp has changed\");\n    }\n\n    await this.cryptoService.setEncKey(response.key);\n    await this.cryptoService.setEncPrivateKey(response.privateKey);\n    await this.cryptoService.setProviderKeys(response.providers);\n    await this.cryptoService.setOrgKeys(response.organizations, response.providerOrganizations);\n    await this.stateService.setAvatarColor(response.avatarColor);\n    await this.stateService.setSecurityStamp(response.securityStamp);\n    await this.stateService.setEmailVerified(response.emailVerified);\n    await this.stateService.setHasPremiumPersonally(response.premiumPersonally);\n    await this.stateService.setHasPremiumFromOrganization(response.premiumFromOrganization);\n    await this.stateService.setForcePasswordReset(response.forcePasswordReset);\n    await this.keyConnectorService.setUsesKeyConnector(response.usesKeyConnector);\n\n    const organizations: { [id: string]: OrganizationData } = {};\n    response.organizations.forEach((o) => {\n      organizations[o.id] = new OrganizationData(o);\n    });\n\n    const providers: { [id: string]: ProviderData } = {};\n    response.providers.forEach((p) => {\n      providers[p.id] = new ProviderData(p);\n    });\n\n    response.providerOrganizations.forEach((o) => {\n      if (organizations[o.id] == null) {\n        organizations[o.id] = new OrganizationData(o);\n        organizations[o.id].isProviderUser = true;\n      }\n    });\n\n    await this.organizationService.replace(organizations);\n    await this.providerService.save(providers);\n\n    if (await this.keyConnectorService.userNeedsMigration()) {\n      await this.keyConnectorService.setConvertAccountRequired(true);\n      this.messagingService.send(\"convertAccountToKeyConnector\");\n    } else {\n      this.keyConnectorService.removeConvertAccountRequired();\n    }\n  }\n\n  private async syncFolders(response: FolderResponse[]) {\n    const folders: { [id: string]: FolderData } = {};\n    response.forEach((f) => {\n      folders[f.id] = new FolderData(f);\n    });\n    return await this.folderService.replace(folders);\n  }\n\n  private async syncCollections(response: CollectionDetailsResponse[]) {\n    const collections: { [id: string]: CollectionData } = {};\n    response.forEach((c) => {\n      collections[c.id] = new CollectionData(c);\n    });\n    return await this.collectionService.replace(collections);\n  }\n\n  private async syncCiphers(response: CipherResponse[]) {\n    const ciphers: { [id: string]: CipherData } = {};\n    response.forEach((c) => {\n      ciphers[c.id] = new CipherData(c);\n    });\n    return await this.cipherService.replace(ciphers);\n  }\n\n  private async syncSends(response: SendResponse[]) {\n    const sends: { [id: string]: SendData } = {};\n    response.forEach((s) => {\n      sends[s.id] = new SendData(s);\n    });\n    return await this.sendService.replace(sends);\n  }\n\n  private async syncSettings(response: DomainsResponse) {\n    let eqDomains: string[][] = [];\n    if (response != null && response.equivalentDomains != null) {\n      eqDomains = eqDomains.concat(response.equivalentDomains);\n    }\n\n    if (response != null && response.globalEquivalentDomains != null) {\n      response.globalEquivalentDomains.forEach((global) => {\n        if (global.domains.length > 0) {\n          eqDomains.push(global.domains);\n        }\n      });\n    }\n\n    return this.settingsService.setEquivalentDomains(eqDomains);\n  }\n\n  private async syncPolicies(response: PolicyResponse[]) {\n    const policies: { [id: string]: PolicyData } = {};\n    if (response != null) {\n      response.forEach((p) => {\n        policies[p.id] = new PolicyData(p);\n      });\n    }\n    return await this.policyService.replace(policies);\n  }\n}\n","import { Directive } from \"@angular/core\";\n\nimport { CryptoService } from \"@bitwarden/common/abstractions/crypto.service\";\nimport { I18nService } from \"@bitwarden/common/abstractions/i18n.service\";\nimport { PlatformUtilsService } from \"@bitwarden/common/abstractions/platformUtils.service\";\n\nimport { ModalRef } from \"../../components/modal/modal.ref\";\n\n/**\n * Used to verify the user's Master Password for the \"Master Password Re-prompt\" feature only.\n * See UserVerificationComponent for any other situation where you need to verify the user's identity.\n */\n@Directive()\nexport class PasswordRepromptComponent {\n  showPassword = false;\n  masterPassword = \"\";\n\n  constructor(\n    private modalRef: ModalRef,\n    private cryptoService: CryptoService,\n    private platformUtilsService: PlatformUtilsService,\n    private i18nService: I18nService\n  ) {}\n\n  togglePassword() {\n    this.showPassword = !this.showPassword;\n  }\n\n  async submit() {\n    if (!(await this.cryptoService.compareAndUpdateKeyHash(this.masterPassword, null))) {\n      this.platformUtilsService.showToast(\n        \"error\",\n        this.i18nService.t(\"errorOccurred\"),\n        this.i18nService.t(\"invalidMasterPassword\")\n      );\n      return;\n    }\n\n    this.modalRef.close(true);\n  }\n}\n","import { Injectable } from \"@angular/core\";\n\nimport { KeyConnectorService } from \"@bitwarden/common/abstractions/keyConnector.service\";\nimport { PasswordRepromptService as PasswordRepromptServiceAbstraction } from \"@bitwarden/common/vault/abstractions/password-reprompt.service\";\n\nimport { ModalService } from \"../../services/modal.service\";\nimport { PasswordRepromptComponent } from \"../components/password-reprompt.component\";\n\n/**\n * Used to verify the user's Master Password for the \"Master Password Re-prompt\" feature only.\n * See UserVerificationService for any other situation where you need to verify the user's identity.\n */\n@Injectable()\nexport class PasswordRepromptService implements PasswordRepromptServiceAbstraction {\n  protected component = PasswordRepromptComponent;\n\n  constructor(\n    private modalService: ModalService,\n    private keyConnectorService: KeyConnectorService\n  ) {}\n\n  protectedFields() {\n    return [\"TOTP\", \"Password\", \"H_Field\", \"Card Number\", \"Security Code\"];\n  }\n\n  async showPasswordPrompt() {\n    if (!(await this.enabled())) {\n      return true;\n    }\n\n    const ref = this.modalService.open(this.component, { allowMultipleModals: true });\n\n    if (ref == null) {\n      return false;\n    }\n\n    const result = await ref.onClosedPromise();\n    return result === true;\n  }\n\n  async enabled() {\n    return !(await this.keyConnectorService.getUsesKeyConnector());\n  }\n}\n","import { Injectable } from \"@angular/core\";\n\nimport { BroadcasterService as BaseBroadcasterService } from \"@bitwarden/common/services/broadcaster.service\";\n\n@Injectable()\nexport class BroadcasterService extends BaseBroadcasterService {}\n","import {\n  BroadcasterService as BroadcasterServiceAbstraction,\n  MessageBase,\n} from \"../abstractions/broadcaster.service\";\n\nexport class BroadcasterService implements BroadcasterServiceAbstraction {\n  subscribers: Map<string, (message: MessageBase) => void> = new Map<\n    string,\n    (message: MessageBase) => void\n  >();\n\n  send(message: MessageBase, id?: string) {\n    if (id != null) {\n      if (this.subscribers.has(id)) {\n        this.subscribers.get(id)(message);\n      }\n      return;\n    }\n\n    this.subscribers.forEach((value) => {\n      value(message);\n    });\n  }\n\n  subscribe(id: string, messageCallback: (message: MessageBase) => void) {\n    this.subscribers.set(id, messageCallback);\n  }\n\n  unsubscribe(id: string) {\n    if (this.subscribers.has(id)) {\n      this.subscribers.delete(id);\n    }\n  }\n}\n","import { ThemeType } from \"@bitwarden/common/enums/themeType\";\n\nimport { Theme } from \"./theme\";\n\nexport class ThemeBuilder implements Theme {\n  get effectiveTheme(): ThemeType {\n    return this.configuredTheme != ThemeType.System ? this.configuredTheme : this.systemTheme;\n  }\n\n  constructor(readonly configuredTheme: ThemeType, readonly systemTheme: ThemeType) {}\n\n  updateSystemTheme(systemTheme: ThemeType): ThemeBuilder {\n    return new ThemeBuilder(this.configuredTheme, systemTheme);\n  }\n\n  updateConfiguredTheme(configuredTheme: ThemeType): ThemeBuilder {\n    return new ThemeBuilder(configuredTheme, this.systemTheme);\n  }\n}\n","import { DOCUMENT } from \"@angular/common\";\nimport { Inject, Injectable } from \"@angular/core\";\nimport { BehaviorSubject, filter, fromEvent, Observable } from \"rxjs\";\n\nimport { StateService } from \"@bitwarden/common/abstractions/state.service\";\nimport { ThemeType } from \"@bitwarden/common/enums/themeType\";\n\nimport { WINDOW } from \"../injection-tokens\";\n\nimport { Theme } from \"./theme\";\nimport { ThemeBuilder } from \"./themeBuilder\";\nimport { AbstractThemingService } from \"./theming.service.abstraction\";\n\n@Injectable()\nexport class ThemingService implements AbstractThemingService {\n  private _theme = new BehaviorSubject<ThemeBuilder | null>(null);\n  theme$: Observable<Theme> = this._theme.pipe(filter((x) => x !== null));\n\n  constructor(\n    private stateService: StateService,\n    @Inject(WINDOW) private window: Window,\n    @Inject(DOCUMENT) private document: Document\n  ) {\n    this.monitorThemeChanges();\n  }\n\n  async monitorThemeChanges(): Promise<void> {\n    this._theme.next(\n      new ThemeBuilder(await this.stateService.getTheme(), await this.getSystemTheme())\n    );\n    this.monitorConfiguredThemeChanges();\n    this.monitorSystemThemeChanges();\n  }\n\n  updateSystemTheme(systemTheme: ThemeType): void {\n    this._theme.next(this._theme.getValue().updateSystemTheme(systemTheme));\n  }\n\n  async updateConfiguredTheme(theme: ThemeType): Promise<void> {\n    await this.stateService.setTheme(theme);\n    this._theme.next(this._theme.getValue().updateConfiguredTheme(theme));\n  }\n\n  protected monitorConfiguredThemeChanges(): void {\n    this.theme$.subscribe((theme: Theme) => {\n      this.document.documentElement.classList.remove(\n        \"theme_\" + ThemeType.Light,\n        \"theme_\" + ThemeType.Dark,\n        \"theme_\" + ThemeType.Nord,\n        \"theme_\" + ThemeType.SolarizedDark\n      );\n      this.document.documentElement.classList.add(\"theme_\" + theme.effectiveTheme);\n    });\n  }\n\n  // We use a media match query for monitoring the system theme on web and browser, but this doesn't work for electron apps on Linux.\n  // In desktop we override these methods to track systemTheme with the electron renderer instead, which works for all OSs.\n  protected async getSystemTheme(): Promise<ThemeType> {\n    return this.window.matchMedia(\"(prefers-color-scheme: dark)\").matches\n      ? ThemeType.Dark\n      : ThemeType.Light;\n  }\n\n  protected monitorSystemThemeChanges(): void {\n    fromEvent<MediaQueryListEvent>(\n      this.window.matchMedia(\"(prefers-color-scheme: dark)\"),\n      \"change\"\n    ).subscribe((event) => {\n      this.updateSystemTheme(event.matches ? ThemeType.Dark : ThemeType.Light);\n    });\n  }\n}\n","import { Injector, LOCALE_ID, NgModule } from \"@angular/core\";\n\nimport { AccountApiService as AccountApiServiceAbstraction } from \"@bitwarden/common/abstractions/account/account-api.service\";\nimport {\n  AccountService as AccountServiceAbstraction,\n  InternalAccountService,\n} from \"@bitwarden/common/abstractions/account/account.service\";\nimport { AvatarUpdateService as AccountUpdateServiceAbstraction } from \"@bitwarden/common/abstractions/account/avatar-update.service\";\nimport { AnonymousHubService as AnonymousHubServiceAbstraction } from \"@bitwarden/common/abstractions/anonymousHub.service\";\nimport { ApiService as ApiServiceAbstraction } from \"@bitwarden/common/abstractions/api.service\";\nimport { AppIdService as AppIdServiceAbstraction } from \"@bitwarden/common/abstractions/appId.service\";\nimport { AuditService as AuditServiceAbstraction } from \"@bitwarden/common/abstractions/audit.service\";\nimport { AuthService as AuthServiceAbstraction } from \"@bitwarden/common/abstractions/auth.service\";\nimport { BroadcasterService as BroadcasterServiceAbstraction } from \"@bitwarden/common/abstractions/broadcaster.service\";\nimport { CollectionService as CollectionServiceAbstraction } from \"@bitwarden/common/abstractions/collection.service\";\nimport { ConfigApiServiceAbstraction } from \"@bitwarden/common/abstractions/config/config-api.service.abstraction\";\nimport { ConfigServiceAbstraction } from \"@bitwarden/common/abstractions/config/config.service.abstraction\";\nimport { CryptoService as CryptoServiceAbstraction } from \"@bitwarden/common/abstractions/crypto.service\";\nimport { CryptoFunctionService as CryptoFunctionServiceAbstraction } from \"@bitwarden/common/abstractions/cryptoFunction.service\";\nimport { EncryptService } from \"@bitwarden/common/abstractions/encrypt.service\";\nimport { EnvironmentService as EnvironmentServiceAbstraction } from \"@bitwarden/common/abstractions/environment.service\";\nimport { EventCollectionService as EventCollectionServiceAbstraction } from \"@bitwarden/common/abstractions/event/event-collection.service\";\nimport { EventUploadService as EventUploadServiceAbstraction } from \"@bitwarden/common/abstractions/event/event-upload.service\";\nimport { ExportService as ExportServiceAbstraction } from \"@bitwarden/common/abstractions/export.service\";\nimport { FileUploadService as FileUploadServiceAbstraction } from \"@bitwarden/common/abstractions/fileUpload.service\";\nimport { FormValidationErrorsService as FormValidationErrorsServiceAbstraction } from \"@bitwarden/common/abstractions/formValidationErrors.service\";\nimport { I18nService as I18nServiceAbstraction } from \"@bitwarden/common/abstractions/i18n.service\";\nimport { KeyConnectorService as KeyConnectorServiceAbstraction } from \"@bitwarden/common/abstractions/keyConnector.service\";\nimport { LogService } from \"@bitwarden/common/abstractions/log.service\";\nimport { LoginService as LoginServiceAbstraction } from \"@bitwarden/common/abstractions/login.service\";\nimport { MessagingService as MessagingServiceAbstraction } from \"@bitwarden/common/abstractions/messaging.service\";\nimport { NotificationsService as NotificationsServiceAbstraction } from \"@bitwarden/common/abstractions/notifications.service\";\nimport { OrganizationUserService } from \"@bitwarden/common/abstractions/organization-user/organization-user.service\";\nimport { OrganizationApiServiceAbstraction } from \"@bitwarden/common/abstractions/organization/organization-api.service.abstraction\";\nimport {\n  InternalOrganizationService,\n  OrganizationService as OrganizationServiceAbstraction,\n} from \"@bitwarden/common/abstractions/organization/organization.service.abstraction\";\nimport { PasswordGenerationService as PasswordGenerationServiceAbstraction } from \"@bitwarden/common/abstractions/passwordGeneration.service\";\nimport { PlatformUtilsService as PlatformUtilsServiceAbstraction } from \"@bitwarden/common/abstractions/platformUtils.service\";\nimport { PolicyApiServiceAbstraction } from \"@bitwarden/common/abstractions/policy/policy-api.service.abstraction\";\nimport {\n  InternalPolicyService,\n  PolicyService as PolicyServiceAbstraction,\n} from \"@bitwarden/common/abstractions/policy/policy.service.abstraction\";\nimport { ProviderService as ProviderServiceAbstraction } from \"@bitwarden/common/abstractions/provider.service\";\nimport { SearchService as SearchServiceAbstraction } from \"@bitwarden/common/abstractions/search.service\";\nimport { SendService as SendServiceAbstraction } from \"@bitwarden/common/abstractions/send.service\";\nimport { SettingsService as SettingsServiceAbstraction } from \"@bitwarden/common/abstractions/settings.service\";\nimport { StateService as StateServiceAbstraction } from \"@bitwarden/common/abstractions/state.service\";\nimport { StateMigrationService as StateMigrationServiceAbstraction } from \"@bitwarden/common/abstractions/stateMigration.service\";\nimport { AbstractStorageService } from \"@bitwarden/common/abstractions/storage.service\";\nimport { TokenService as TokenServiceAbstraction } from \"@bitwarden/common/abstractions/token.service\";\nimport { TotpService as TotpServiceAbstraction } from \"@bitwarden/common/abstractions/totp.service\";\nimport { TwoFactorService as TwoFactorServiceAbstraction } from \"@bitwarden/common/abstractions/twoFactor.service\";\nimport { UserVerificationApiServiceAbstraction } from \"@bitwarden/common/abstractions/userVerification/userVerification-api.service.abstraction\";\nimport { UserVerificationService as UserVerificationServiceAbstraction } from \"@bitwarden/common/abstractions/userVerification/userVerification.service.abstraction\";\nimport { UsernameGenerationService as UsernameGenerationServiceAbstraction } from \"@bitwarden/common/abstractions/usernameGeneration.service\";\nimport { ValidationService as ValidationServiceAbstraction } from \"@bitwarden/common/abstractions/validation.service\";\nimport { VaultTimeoutService as VaultTimeoutServiceAbstraction } from \"@bitwarden/common/abstractions/vaultTimeout/vaultTimeout.service\";\nimport { VaultTimeoutSettingsService as VaultTimeoutSettingsServiceAbstraction } from \"@bitwarden/common/abstractions/vaultTimeout/vaultTimeoutSettings.service\";\nimport { StateFactory } from \"@bitwarden/common/factories/stateFactory\";\nimport { flagEnabled } from \"@bitwarden/common/misc/flags\";\nimport { Account } from \"@bitwarden/common/models/domain/account\";\nimport { GlobalState } from \"@bitwarden/common/models/domain/global-state\";\nimport { AccountApiServiceImplementation } from \"@bitwarden/common/services/account/account-api.service\";\nimport { AccountServiceImplementation } from \"@bitwarden/common/services/account/account.service\";\nimport { AvatarUpdateService } from \"@bitwarden/common/services/account/avatar-update.service\";\nimport { AnonymousHubService } from \"@bitwarden/common/services/anonymousHub.service\";\nimport { ApiService } from \"@bitwarden/common/services/api.service\";\nimport { AppIdService } from \"@bitwarden/common/services/appId.service\";\nimport { AuditService } from \"@bitwarden/common/services/audit.service\";\nimport { AuthService } from \"@bitwarden/common/services/auth.service\";\nimport { CollectionService } from \"@bitwarden/common/services/collection.service\";\nimport { ConfigApiService } from \"@bitwarden/common/services/config/config-api.service\";\nimport { ConfigService } from \"@bitwarden/common/services/config/config.service\";\nimport { ConsoleLogService } from \"@bitwarden/common/services/consoleLog.service\";\nimport { CryptoService } from \"@bitwarden/common/services/crypto.service\";\nimport { EncryptServiceImplementation } from \"@bitwarden/common/services/cryptography/encrypt.service.implementation\";\nimport { MultithreadEncryptServiceImplementation } from \"@bitwarden/common/services/cryptography/multithread-encrypt.service.implementation\";\nimport { EnvironmentService } from \"@bitwarden/common/services/environment.service\";\nimport { EventCollectionService } from \"@bitwarden/common/services/event/event-collection.service\";\nimport { EventUploadService } from \"@bitwarden/common/services/event/event-upload.service\";\nimport { ExportService } from \"@bitwarden/common/services/export.service\";\nimport { FileUploadService } from \"@bitwarden/common/services/fileUpload.service\";\nimport { FormValidationErrorsService } from \"@bitwarden/common/services/formValidationErrors.service\";\nimport { KeyConnectorService } from \"@bitwarden/common/services/keyConnector.service\";\nimport { LoginService } from \"@bitwarden/common/services/login.service\";\nimport { NotificationsService } from \"@bitwarden/common/services/notifications.service\";\nimport { OrganizationUserServiceImplementation } from \"@bitwarden/common/services/organization-user/organization-user.service.implementation\";\nimport { OrganizationApiService } from \"@bitwarden/common/services/organization/organization-api.service\";\nimport { OrganizationService } from \"@bitwarden/common/services/organization/organization.service\";\nimport { PasswordGenerationService } from \"@bitwarden/common/services/passwordGeneration.service\";\nimport { PolicyApiService } from \"@bitwarden/common/services/policy/policy-api.service\";\nimport { PolicyService } from \"@bitwarden/common/services/policy/policy.service\";\nimport { ProviderService } from \"@bitwarden/common/services/provider.service\";\nimport { SearchService } from \"@bitwarden/common/services/search.service\";\nimport { SendService } from \"@bitwarden/common/services/send.service\";\nimport { SettingsService } from \"@bitwarden/common/services/settings.service\";\nimport { StateService } from \"@bitwarden/common/services/state.service\";\nimport { StateMigrationService } from \"@bitwarden/common/services/stateMigration.service\";\nimport { TokenService } from \"@bitwarden/common/services/token.service\";\nimport { TotpService } from \"@bitwarden/common/services/totp.service\";\nimport { TwoFactorService } from \"@bitwarden/common/services/twoFactor.service\";\nimport { UserVerificationApiService } from \"@bitwarden/common/services/userVerification/userVerification-api.service\";\nimport { UserVerificationService } from \"@bitwarden/common/services/userVerification/userVerification.service\";\nimport { UsernameGenerationService } from \"@bitwarden/common/services/usernameGeneration.service\";\nimport { ValidationService } from \"@bitwarden/common/services/validation.service\";\nimport { VaultTimeoutService } from \"@bitwarden/common/services/vaultTimeout/vaultTimeout.service\";\nimport { VaultTimeoutSettingsService } from \"@bitwarden/common/services/vaultTimeout/vaultTimeoutSettings.service\";\nimport { WebCryptoFunctionService } from \"@bitwarden/common/services/webCryptoFunction.service\";\nimport { CipherService as CipherServiceAbstraction } from \"@bitwarden/common/vault/abstractions/cipher.service\";\nimport { FolderApiServiceAbstraction } from \"@bitwarden/common/vault/abstractions/folder/folder-api.service.abstraction\";\nimport {\n  FolderService as FolderServiceAbstraction,\n  InternalFolderService,\n} from \"@bitwarden/common/vault/abstractions/folder/folder.service.abstraction\";\nimport { PasswordRepromptService as PasswordRepromptServiceAbstraction } from \"@bitwarden/common/vault/abstractions/password-reprompt.service\";\nimport { SyncNotifierService as SyncNotifierServiceAbstraction } from \"@bitwarden/common/vault/abstractions/sync/sync-notifier.service.abstraction\";\nimport { SyncService as SyncServiceAbstraction } from \"@bitwarden/common/vault/abstractions/sync/sync.service.abstraction\";\nimport { CipherService } from \"@bitwarden/common/vault/services/cipher.service\";\nimport { FolderApiService } from \"@bitwarden/common/vault/services/folder/folder-api.service\";\nimport { FolderService } from \"@bitwarden/common/vault/services/folder/folder.service\";\nimport { SyncNotifierService } from \"@bitwarden/common/vault/services/sync/sync-notifier.service\";\nimport { SyncService } from \"@bitwarden/common/vault/services/sync/sync.service\";\n\nimport { AuthGuard } from \"../guards/auth.guard\";\nimport { LockGuard } from \"../guards/lock.guard\";\nimport { UnauthGuard } from \"../guards/unauth.guard\";\nimport { PasswordRepromptService } from \"../vault/services/password-reprompt.service\";\n\nimport { BroadcasterService } from \"./broadcaster.service\";\nimport {\n  LOCALES_DIRECTORY,\n  LOCKED_CALLBACK,\n  LOG_MAC_FAILURES,\n  LOGOUT_CALLBACK,\n  MEMORY_STORAGE,\n  SECURE_STORAGE,\n  STATE_FACTORY,\n  STATE_SERVICE_USE_CACHE,\n  SYSTEM_LANGUAGE,\n  WINDOW,\n} from \"./injection-tokens\";\nimport { ModalService } from \"./modal.service\";\nimport { ThemingService } from \"./theming/theming.service\";\nimport { AbstractThemingService } from \"./theming/theming.service.abstraction\";\n\n@NgModule({\n  declarations: [],\n  providers: [\n    AuthGuard,\n    UnauthGuard,\n    LockGuard,\n    ModalService,\n    { provide: WINDOW, useValue: window },\n    {\n      provide: LOCALE_ID,\n      useFactory: (i18nService: I18nServiceAbstraction) => i18nService.translationLocale,\n      deps: [I18nServiceAbstraction],\n    },\n    {\n      provide: LOCALES_DIRECTORY,\n      useValue: \"./locales\",\n    },\n    {\n      provide: SYSTEM_LANGUAGE,\n      useFactory: (window: Window) => window.navigator.language,\n      deps: [WINDOW],\n    },\n    {\n      provide: STATE_FACTORY,\n      useValue: new StateFactory(GlobalState, Account),\n    },\n    {\n      provide: STATE_SERVICE_USE_CACHE,\n      useValue: true,\n    },\n    {\n      provide: LOGOUT_CALLBACK,\n      useFactory:\n        (messagingService: MessagingServiceAbstraction) => (expired: boolean, userId?: string) =>\n          messagingService.send(\"logout\", { expired: expired, userId: userId }),\n      deps: [MessagingServiceAbstraction],\n    },\n    {\n      provide: LOCKED_CALLBACK,\n      useValue: null,\n    },\n    {\n      provide: LOG_MAC_FAILURES,\n      useValue: true,\n    },\n    {\n      provide: AppIdServiceAbstraction,\n      useClass: AppIdService,\n      deps: [AbstractStorageService],\n    },\n    {\n      provide: AuditServiceAbstraction,\n      useClass: AuditService,\n      deps: [CryptoFunctionServiceAbstraction, ApiServiceAbstraction],\n    },\n    {\n      provide: AuthServiceAbstraction,\n      useClass: AuthService,\n      deps: [\n        CryptoServiceAbstraction,\n        ApiServiceAbstraction,\n        TokenServiceAbstraction,\n        AppIdServiceAbstraction,\n        PlatformUtilsServiceAbstraction,\n        MessagingServiceAbstraction,\n        LogService,\n        KeyConnectorServiceAbstraction,\n        EnvironmentServiceAbstraction,\n        StateServiceAbstraction,\n        TwoFactorServiceAbstraction,\n        I18nServiceAbstraction,\n      ],\n    },\n    {\n      provide: CipherServiceAbstraction,\n      useFactory: (\n        cryptoService: CryptoServiceAbstraction,\n        settingsService: SettingsServiceAbstraction,\n        apiService: ApiServiceAbstraction,\n        fileUploadService: FileUploadServiceAbstraction,\n        i18nService: I18nServiceAbstraction,\n        injector: Injector,\n        logService: LogService,\n        stateService: StateServiceAbstraction,\n        encryptService: EncryptService\n      ) =>\n        new CipherService(\n          cryptoService,\n          settingsService,\n          apiService,\n          fileUploadService,\n          i18nService,\n          () => injector.get(SearchServiceAbstraction),\n          logService,\n          stateService,\n          encryptService\n        ),\n      deps: [\n        CryptoServiceAbstraction,\n        SettingsServiceAbstraction,\n        ApiServiceAbstraction,\n        FileUploadServiceAbstraction,\n        I18nServiceAbstraction,\n        Injector, // TODO: Get rid of this circular dependency!\n        LogService,\n        StateServiceAbstraction,\n        EncryptService,\n      ],\n    },\n    {\n      provide: FolderServiceAbstraction,\n      useClass: FolderService,\n      deps: [\n        CryptoServiceAbstraction,\n        I18nServiceAbstraction,\n        CipherServiceAbstraction,\n        StateServiceAbstraction,\n      ],\n    },\n    {\n      provide: InternalFolderService,\n      useExisting: FolderServiceAbstraction,\n    },\n    {\n      provide: FolderApiServiceAbstraction,\n      useClass: FolderApiService,\n      deps: [FolderServiceAbstraction, ApiServiceAbstraction],\n    },\n    {\n      provide: AccountApiServiceAbstraction,\n      useClass: AccountApiServiceImplementation,\n      deps: [\n        ApiServiceAbstraction,\n        UserVerificationServiceAbstraction,\n        LogService,\n        InternalAccountService,\n      ],\n    },\n    {\n      provide: AccountServiceAbstraction,\n      useClass: AccountServiceImplementation,\n      deps: [MessagingServiceAbstraction, LogService],\n    },\n    {\n      provide: InternalAccountService,\n      useExisting: AccountServiceAbstraction,\n    },\n    {\n      provide: AccountUpdateServiceAbstraction,\n      useClass: AvatarUpdateService,\n      deps: [ApiServiceAbstraction, StateServiceAbstraction],\n    },\n    { provide: LogService, useFactory: () => new ConsoleLogService(false) },\n    {\n      provide: CollectionServiceAbstraction,\n      useClass: CollectionService,\n      deps: [CryptoServiceAbstraction, I18nServiceAbstraction, StateServiceAbstraction],\n    },\n    {\n      provide: EnvironmentServiceAbstraction,\n      useClass: EnvironmentService,\n      deps: [StateServiceAbstraction],\n    },\n    {\n      provide: TotpServiceAbstraction,\n      useClass: TotpService,\n      deps: [CryptoFunctionServiceAbstraction, LogService, StateServiceAbstraction],\n    },\n    { provide: TokenServiceAbstraction, useClass: TokenService, deps: [StateServiceAbstraction] },\n    {\n      provide: CryptoServiceAbstraction,\n      useClass: CryptoService,\n      deps: [\n        CryptoFunctionServiceAbstraction,\n        EncryptService,\n        PlatformUtilsServiceAbstraction,\n        LogService,\n        StateServiceAbstraction,\n      ],\n    },\n    {\n      provide: PasswordGenerationServiceAbstraction,\n      useClass: PasswordGenerationService,\n      deps: [CryptoServiceAbstraction, PolicyServiceAbstraction, StateServiceAbstraction],\n    },\n    {\n      provide: UsernameGenerationServiceAbstraction,\n      useClass: UsernameGenerationService,\n      deps: [CryptoServiceAbstraction, StateServiceAbstraction, ApiServiceAbstraction],\n    },\n    {\n      provide: ApiServiceAbstraction,\n      useClass: ApiService,\n      deps: [\n        TokenServiceAbstraction,\n        PlatformUtilsServiceAbstraction,\n        EnvironmentServiceAbstraction,\n        AppIdServiceAbstraction,\n        LOGOUT_CALLBACK,\n      ],\n    },\n    {\n      provide: FileUploadServiceAbstraction,\n      useClass: FileUploadService,\n      deps: [LogService, ApiServiceAbstraction],\n    },\n    {\n      provide: SyncServiceAbstraction,\n      useClass: SyncService,\n      deps: [\n        ApiServiceAbstraction,\n        SettingsServiceAbstraction,\n        FolderServiceAbstraction,\n        CipherServiceAbstraction,\n        CryptoServiceAbstraction,\n        CollectionServiceAbstraction,\n        MessagingServiceAbstraction,\n        PolicyServiceAbstraction,\n        SendServiceAbstraction,\n        LogService,\n        KeyConnectorServiceAbstraction,\n        StateServiceAbstraction,\n        ProviderServiceAbstraction,\n        FolderApiServiceAbstraction,\n        OrganizationServiceAbstraction,\n        LOGOUT_CALLBACK,\n      ],\n    },\n    { provide: BroadcasterServiceAbstraction, useClass: BroadcasterService },\n    {\n      provide: SettingsServiceAbstraction,\n      useClass: SettingsService,\n      deps: [StateServiceAbstraction],\n    },\n    {\n      provide: VaultTimeoutSettingsServiceAbstraction,\n      useClass: VaultTimeoutSettingsService,\n      deps: [\n        CryptoServiceAbstraction,\n        TokenServiceAbstraction,\n        PolicyServiceAbstraction,\n        StateServiceAbstraction,\n      ],\n    },\n    {\n      provide: VaultTimeoutServiceAbstraction,\n      useClass: VaultTimeoutService,\n      deps: [\n        CipherServiceAbstraction,\n        FolderServiceAbstraction,\n        CollectionServiceAbstraction,\n        CryptoServiceAbstraction,\n        PlatformUtilsServiceAbstraction,\n        MessagingServiceAbstraction,\n        SearchServiceAbstraction,\n        KeyConnectorServiceAbstraction,\n        StateServiceAbstraction,\n        AuthServiceAbstraction,\n        VaultTimeoutSettingsServiceAbstraction,\n        LOCKED_CALLBACK,\n        LOGOUT_CALLBACK,\n      ],\n    },\n    {\n      provide: StateServiceAbstraction,\n      useClass: StateService,\n      deps: [\n        AbstractStorageService,\n        SECURE_STORAGE,\n        MEMORY_STORAGE,\n        LogService,\n        StateMigrationServiceAbstraction,\n        STATE_FACTORY,\n        STATE_SERVICE_USE_CACHE,\n      ],\n    },\n    {\n      provide: StateMigrationServiceAbstraction,\n      useClass: StateMigrationService,\n      deps: [AbstractStorageService, SECURE_STORAGE, STATE_FACTORY],\n    },\n    {\n      provide: ExportServiceAbstraction,\n      useClass: ExportService,\n      deps: [\n        FolderServiceAbstraction,\n        CipherServiceAbstraction,\n        ApiServiceAbstraction,\n        CryptoServiceAbstraction,\n        CryptoFunctionServiceAbstraction,\n      ],\n    },\n    {\n      provide: SearchServiceAbstraction,\n      useClass: SearchService,\n      deps: [CipherServiceAbstraction, LogService, I18nServiceAbstraction],\n    },\n    {\n      provide: NotificationsServiceAbstraction,\n      useClass: NotificationsService,\n      deps: [\n        SyncServiceAbstraction,\n        AppIdServiceAbstraction,\n        ApiServiceAbstraction,\n        EnvironmentServiceAbstraction,\n        LOGOUT_CALLBACK,\n        LogService,\n        StateServiceAbstraction,\n        AuthServiceAbstraction,\n        MessagingServiceAbstraction,\n      ],\n    },\n    {\n      provide: CryptoFunctionServiceAbstraction,\n      useClass: WebCryptoFunctionService,\n      deps: [WINDOW],\n    },\n    {\n      provide: EncryptService,\n      useFactory: encryptServiceFactory,\n      deps: [CryptoFunctionServiceAbstraction, LogService, LOG_MAC_FAILURES],\n    },\n    {\n      provide: EventUploadServiceAbstraction,\n      useClass: EventUploadService,\n      deps: [ApiServiceAbstraction, StateServiceAbstraction, LogService],\n    },\n    {\n      provide: EventCollectionServiceAbstraction,\n      useClass: EventCollectionService,\n      deps: [\n        CipherServiceAbstraction,\n        StateServiceAbstraction,\n        OrganizationServiceAbstraction,\n        EventUploadServiceAbstraction,\n      ],\n    },\n    {\n      provide: PolicyServiceAbstraction,\n      useClass: PolicyService,\n      deps: [StateServiceAbstraction, OrganizationServiceAbstraction],\n    },\n    {\n      provide: InternalPolicyService,\n      useExisting: PolicyServiceAbstraction,\n    },\n    {\n      provide: PolicyApiServiceAbstraction,\n      useClass: PolicyApiService,\n      deps: [PolicyServiceAbstraction, ApiServiceAbstraction, StateServiceAbstraction],\n    },\n    {\n      provide: SendServiceAbstraction,\n      useClass: SendService,\n      deps: [\n        CryptoServiceAbstraction,\n        ApiServiceAbstraction,\n        FileUploadServiceAbstraction,\n        I18nServiceAbstraction,\n        CryptoFunctionServiceAbstraction,\n        StateServiceAbstraction,\n      ],\n    },\n    {\n      provide: KeyConnectorServiceAbstraction,\n      useClass: KeyConnectorService,\n      deps: [\n        StateServiceAbstraction,\n        CryptoServiceAbstraction,\n        ApiServiceAbstraction,\n        TokenServiceAbstraction,\n        LogService,\n        OrganizationServiceAbstraction,\n        CryptoFunctionServiceAbstraction,\n        SyncNotifierServiceAbstraction,\n        MessagingServiceAbstraction,\n        LOGOUT_CALLBACK,\n      ],\n    },\n    {\n      provide: UserVerificationServiceAbstraction,\n      useClass: UserVerificationService,\n      deps: [\n        CryptoServiceAbstraction,\n        I18nServiceAbstraction,\n        UserVerificationApiServiceAbstraction,\n      ],\n    },\n    { provide: PasswordRepromptServiceAbstraction, useClass: PasswordRepromptService },\n    {\n      provide: OrganizationServiceAbstraction,\n      useClass: OrganizationService,\n      deps: [StateServiceAbstraction],\n    },\n    {\n      provide: InternalOrganizationService,\n      useExisting: OrganizationServiceAbstraction,\n    },\n    {\n      provide: OrganizationUserService,\n      useClass: OrganizationUserServiceImplementation,\n      deps: [ApiServiceAbstraction],\n    },\n    {\n      provide: ProviderServiceAbstraction,\n      useClass: ProviderService,\n      deps: [StateServiceAbstraction],\n    },\n    {\n      provide: TwoFactorServiceAbstraction,\n      useClass: TwoFactorService,\n      deps: [I18nServiceAbstraction, PlatformUtilsServiceAbstraction],\n    },\n    {\n      provide: AbstractThemingService,\n      useClass: ThemingService,\n    },\n    {\n      provide: FormValidationErrorsServiceAbstraction,\n      useClass: FormValidationErrorsService,\n    },\n    {\n      provide: UserVerificationApiServiceAbstraction,\n      useClass: UserVerificationApiService,\n      deps: [ApiServiceAbstraction],\n    },\n    {\n      provide: OrganizationApiServiceAbstraction,\n      useClass: OrganizationApiService,\n      // This is a slightly odd dependency tree for a specialized api service\n      // it depends on SyncService so that new data can be retrieved through the sync\n      // rather than updating the OrganizationService directly. Instead OrganizationService\n      // subscribes to sync notifications and will update itself based on that.\n      deps: [ApiServiceAbstraction, SyncServiceAbstraction],\n    },\n    {\n      provide: SyncNotifierServiceAbstraction,\n      useClass: SyncNotifierService,\n    },\n    {\n      provide: ConfigServiceAbstraction,\n      useClass: ConfigService,\n      deps: [StateServiceAbstraction, ConfigApiServiceAbstraction],\n    },\n    {\n      provide: ConfigApiServiceAbstraction,\n      useClass: ConfigApiService,\n      deps: [ApiServiceAbstraction],\n    },\n    {\n      provide: AnonymousHubServiceAbstraction,\n      useClass: AnonymousHubService,\n      deps: [EnvironmentServiceAbstraction, AuthServiceAbstraction, LogService],\n    },\n    {\n      provide: ValidationServiceAbstraction,\n      useClass: ValidationService,\n      deps: [I18nServiceAbstraction, PlatformUtilsServiceAbstraction],\n    },\n    {\n      provide: LoginServiceAbstraction,\n      useClass: LoginService,\n      deps: [StateServiceAbstraction],\n    },\n  ],\n})\nexport class JslibServicesModule {}\n\nfunction encryptServiceFactory(\n  cryptoFunctionservice: CryptoFunctionServiceAbstraction,\n  logService: LogService,\n  logMacFailures: boolean\n): EncryptService {\n  return flagEnabled(\"multithreadDecryption\")\n    ? new MultithreadEncryptServiceImplementation(cryptoFunctionservice, logService, logMacFailures)\n    : new EncryptServiceImplementation(cryptoFunctionservice, logService, logMacFailures);\n}\n","import { Verification } from \"../../types/verification\";\n\nexport abstract class AccountApiService {\n  abstract deleteAccount(verification: Verification): Promise<void>;\n}\n","import { AccountApiService } from \"../../abstractions/account/account-api.service\";\nimport { InternalAccountService } from \"../../abstractions/account/account.service\";\nimport { ApiService } from \"../../abstractions/api.service\";\nimport { LogService } from \"../../abstractions/log.service\";\nimport { UserVerificationService } from \"../../abstractions/userVerification/userVerification.service.abstraction\";\nimport { Verification } from \"../../types/verification\";\n\nexport class AccountApiServiceImplementation implements AccountApiService {\n  constructor(\n    private apiService: ApiService,\n    private userVerificationService: UserVerificationService,\n    private logService: LogService,\n    private accountService: InternalAccountService\n  ) {}\n\n  async deleteAccount(verification: Verification): Promise<void> {\n    try {\n      const verificationRequest = await this.userVerificationService.buildRequest(verification);\n      await this.apiService.send(\"DELETE\", \"/accounts\", verificationRequest, true, false);\n      this.accountService.delete();\n    } catch (e) {\n      this.logService.error(e);\n      throw e;\n    }\n  }\n}\n","import { InternalAccountService } from \"../../abstractions/account/account.service\";\nimport { LogService } from \"../../abstractions/log.service\";\nimport { MessagingService } from \"../../abstractions/messaging.service\";\n\nexport class AccountServiceImplementation implements InternalAccountService {\n  constructor(private messagingService: MessagingService, private logService: LogService) {}\n\n  async delete(): Promise<void> {\n    try {\n      this.messagingService.send(\"logout\");\n    } catch (e) {\n      this.logService.error(e);\n      throw e;\n    }\n  }\n}\n","import { Observable } from \"rxjs\";\n\nimport { ProfileResponse } from \"../../models/response/profile.response\";\nexport abstract class AvatarUpdateService {\n  avatarUpdate$ = new Observable<string | null>();\n  abstract pushUpdate(color: string): Promise<ProfileResponse | void>;\n  abstract loadColorFromState(): Promise<string | null>;\n}\n","import { ApiService } from \"../../abstractions/api.service\";\nimport { OrganizationUserService } from \"../../abstractions/organization-user/organization-user.service\";\nimport {\n  OrganizationUserAcceptRequest,\n  OrganizationUserBulkConfirmRequest,\n  OrganizationUserConfirmRequest,\n  OrganizationUserInviteRequest,\n  OrganizationUserResetPasswordEnrollmentRequest,\n  OrganizationUserResetPasswordRequest,\n  OrganizationUserUpdateGroupsRequest,\n  OrganizationUserUpdateRequest,\n} from \"../../abstractions/organization-user/requests\";\nimport {\n  OrganizationUserBulkPublicKeyResponse,\n  OrganizationUserBulkResponse,\n  OrganizationUserDetailsResponse,\n  OrganizationUserResetPasswordDetailsReponse,\n  OrganizationUserUserDetailsResponse,\n} from \"../../abstractions/organization-user/responses\";\nimport { ListResponse } from \"../../models/response/list.response\";\n\nimport { OrganizationUserBulkRequest } from \"./requests\";\n\nexport class OrganizationUserServiceImplementation implements OrganizationUserService {\n  constructor(private apiService: ApiService) {}\n\n  async getOrganizationUser(\n    organizationId: string,\n    id: string,\n    options?: {\n      includeGroups?: boolean;\n    }\n  ): Promise<OrganizationUserDetailsResponse> {\n    const params = new URLSearchParams();\n\n    if (options?.includeGroups) {\n      params.set(\"includeGroups\", \"true\");\n    }\n\n    const r = await this.apiService.send(\n      \"GET\",\n      `/organizations/${organizationId}/users/${id}?${params.toString()}`,\n      null,\n      true,\n      true\n    );\n    return new OrganizationUserDetailsResponse(r);\n  }\n\n  async getOrganizationUserGroups(organizationId: string, id: string): Promise<string[]> {\n    const r = await this.apiService.send(\n      \"GET\",\n      \"/organizations/\" + organizationId + \"/users/\" + id + \"/groups\",\n      null,\n      true,\n      true\n    );\n    return r;\n  }\n\n  async getAllUsers(\n    organizationId: string,\n    options?: {\n      includeCollections?: boolean;\n      includeGroups?: boolean;\n    }\n  ): Promise<ListResponse<OrganizationUserUserDetailsResponse>> {\n    const params = new URLSearchParams();\n\n    if (options?.includeCollections) {\n      params.set(\"includeCollections\", \"true\");\n    }\n    if (options?.includeGroups) {\n      params.set(\"includeGroups\", \"true\");\n    }\n\n    const r = await this.apiService.send(\n      \"GET\",\n      `/organizations/${organizationId}/users?${params.toString()}`,\n      null,\n      true,\n      true\n    );\n    return new ListResponse(r, OrganizationUserUserDetailsResponse);\n  }\n\n  async getOrganizationUserResetPasswordDetails(\n    organizationId: string,\n    id: string\n  ): Promise<OrganizationUserResetPasswordDetailsReponse> {\n    const r = await this.apiService.send(\n      \"GET\",\n      \"/organizations/\" + organizationId + \"/users/\" + id + \"/reset-password-details\",\n      null,\n      true,\n      true\n    );\n    return new OrganizationUserResetPasswordDetailsReponse(r);\n  }\n\n  postOrganizationUserInvite(\n    organizationId: string,\n    request: OrganizationUserInviteRequest\n  ): Promise<void> {\n    return this.apiService.send(\n      \"POST\",\n      \"/organizations/\" + organizationId + \"/users/invite\",\n      request,\n      true,\n      false\n    );\n  }\n\n  postOrganizationUserReinvite(organizationId: string, id: string): Promise<any> {\n    return this.apiService.send(\n      \"POST\",\n      \"/organizations/\" + organizationId + \"/users/\" + id + \"/reinvite\",\n      null,\n      true,\n      false\n    );\n  }\n\n  async postManyOrganizationUserReinvite(\n    organizationId: string,\n    ids: string[]\n  ): Promise<ListResponse<OrganizationUserBulkResponse>> {\n    const r = await this.apiService.send(\n      \"POST\",\n      \"/organizations/\" + organizationId + \"/users/reinvite\",\n      new OrganizationUserBulkRequest(ids),\n      true,\n      true\n    );\n    return new ListResponse(r, OrganizationUserBulkResponse);\n  }\n\n  postOrganizationUserAccept(\n    organizationId: string,\n    id: string,\n    request: OrganizationUserAcceptRequest\n  ): Promise<void> {\n    return this.apiService.send(\n      \"POST\",\n      \"/organizations/\" + organizationId + \"/users/\" + id + \"/accept\",\n      request,\n      true,\n      false\n    );\n  }\n\n  postOrganizationUserConfirm(\n    organizationId: string,\n    id: string,\n    request: OrganizationUserConfirmRequest\n  ): Promise<void> {\n    return this.apiService.send(\n      \"POST\",\n      \"/organizations/\" + organizationId + \"/users/\" + id + \"/confirm\",\n      request,\n      true,\n      false\n    );\n  }\n\n  async postOrganizationUsersPublicKey(\n    organizationId: string,\n    ids: string[]\n  ): Promise<ListResponse<OrganizationUserBulkPublicKeyResponse>> {\n    const r = await this.apiService.send(\n      \"POST\",\n      \"/organizations/\" + organizationId + \"/users/public-keys\",\n      new OrganizationUserBulkRequest(ids),\n      true,\n      true\n    );\n    return new ListResponse(r, OrganizationUserBulkPublicKeyResponse);\n  }\n\n  async postOrganizationUserBulkConfirm(\n    organizationId: string,\n    request: OrganizationUserBulkConfirmRequest\n  ): Promise<ListResponse<OrganizationUserBulkResponse>> {\n    const r = await this.apiService.send(\n      \"POST\",\n      \"/organizations/\" + organizationId + \"/users/confirm\",\n      request,\n      true,\n      true\n    );\n    return new ListResponse(r, OrganizationUserBulkResponse);\n  }\n\n  putOrganizationUser(\n    organizationId: string,\n    id: string,\n    request: OrganizationUserUpdateRequest\n  ): Promise<void> {\n    return this.apiService.send(\n      \"PUT\",\n      \"/organizations/\" + organizationId + \"/users/\" + id,\n      request,\n      true,\n      false\n    );\n  }\n\n  putOrganizationUserGroups(\n    organizationId: string,\n    id: string,\n    request: OrganizationUserUpdateGroupsRequest\n  ): Promise<void> {\n    return this.apiService.send(\n      \"PUT\",\n      \"/organizations/\" + organizationId + \"/users/\" + id + \"/groups\",\n      request,\n      true,\n      false\n    );\n  }\n\n  putOrganizationUserResetPasswordEnrollment(\n    organizationId: string,\n    userId: string,\n    request: OrganizationUserResetPasswordEnrollmentRequest\n  ): Promise<void> {\n    return this.apiService.send(\n      \"PUT\",\n      \"/organizations/\" + organizationId + \"/users/\" + userId + \"/reset-password-enrollment\",\n      request,\n      true,\n      false\n    );\n  }\n\n  putOrganizationUserResetPassword(\n    organizationId: string,\n    id: string,\n    request: OrganizationUserResetPasswordRequest\n  ): Promise<void> {\n    return this.apiService.send(\n      \"PUT\",\n      \"/organizations/\" + organizationId + \"/users/\" + id + \"/reset-password\",\n      request,\n      true,\n      false\n    );\n  }\n\n  deleteOrganizationUser(organizationId: string, id: string): Promise<any> {\n    return this.apiService.send(\n      \"DELETE\",\n      \"/organizations/\" + organizationId + \"/users/\" + id,\n      null,\n      true,\n      false\n    );\n  }\n\n  async deleteManyOrganizationUsers(\n    organizationId: string,\n    ids: string[]\n  ): Promise<ListResponse<OrganizationUserBulkResponse>> {\n    const r = await this.apiService.send(\n      \"DELETE\",\n      \"/organizations/\" + organizationId + \"/users\",\n      new OrganizationUserBulkRequest(ids),\n      true,\n      true\n    );\n    return new ListResponse(r, OrganizationUserBulkResponse);\n  }\n\n  revokeOrganizationUser(organizationId: string, id: string): Promise<void> {\n    return this.apiService.send(\n      \"PUT\",\n      \"/organizations/\" + organizationId + \"/users/\" + id + \"/revoke\",\n      null,\n      true,\n      false\n    );\n  }\n\n  async revokeManyOrganizationUsers(\n    organizationId: string,\n    ids: string[]\n  ): Promise<ListResponse<OrganizationUserBulkResponse>> {\n    const r = await this.apiService.send(\n      \"PUT\",\n      \"/organizations/\" + organizationId + \"/users/revoke\",\n      new OrganizationUserBulkRequest(ids),\n      true,\n      true\n    );\n    return new ListResponse(r, OrganizationUserBulkResponse);\n  }\n\n  restoreOrganizationUser(organizationId: string, id: string): Promise<void> {\n    return this.apiService.send(\n      \"PUT\",\n      \"/organizations/\" + organizationId + \"/users/\" + id + \"/restore\",\n      null,\n      true,\n      false\n    );\n  }\n\n  async restoreManyOrganizationUsers(\n    organizationId: string,\n    ids: string[]\n  ): Promise<ListResponse<OrganizationUserBulkResponse>> {\n    const r = await this.apiService.send(\n      \"PUT\",\n      \"/organizations/\" + organizationId + \"/users/restore\",\n      new OrganizationUserBulkRequest(ids),\n      true,\n      true\n    );\n    return new ListResponse(r, OrganizationUserBulkResponse);\n  }\n}\n","import { UntypedFormGroup, ValidationErrors } from \"@angular/forms\";\n\nimport {\n  FormGroupControls,\n  FormValidationErrorsService as FormValidationErrorsAbstraction,\n  AllValidationErrors,\n} from \"../abstractions/formValidationErrors.service\";\n\nexport class FormValidationErrorsService implements FormValidationErrorsAbstraction {\n  getFormValidationErrors(controls: FormGroupControls): AllValidationErrors[] {\n    let errors: AllValidationErrors[] = [];\n    Object.keys(controls).forEach((key) => {\n      const control = controls[key];\n      if (control instanceof UntypedFormGroup) {\n        errors = errors.concat(this.getFormValidationErrors(control.controls));\n      }\n\n      const controlErrors: ValidationErrors = controls[key].errors;\n      if (controlErrors !== null) {\n        Object.keys(controlErrors).forEach((keyError) => {\n          errors.push({\n            controlName: key,\n            errorName: keyError,\n          });\n        });\n      }\n    });\n\n    return errors;\n  }\n}\n","import { ApiService } from \"../../abstractions/api.service\";\nimport { OrganizationApiServiceAbstraction } from \"../../abstractions/organization/organization-api.service.abstraction\";\nimport { OrganizationApiKeyType } from \"../../enums/organizationApiKeyType\";\nimport { ImportDirectoryRequest } from \"../../models/request/import-directory.request\";\nimport { OrganizationApiKeyRequest } from \"../../models/request/organization-api-key.request\";\nimport { OrganizationCreateRequest } from \"../../models/request/organization-create.request\";\nimport { OrganizationKeysRequest } from \"../../models/request/organization-keys.request\";\nimport { OrganizationSubscriptionUpdateRequest } from \"../../models/request/organization-subscription-update.request\";\nimport { OrganizationTaxInfoUpdateRequest } from \"../../models/request/organization-tax-info-update.request\";\nimport { OrganizationUpdateRequest } from \"../../models/request/organization-update.request\";\nimport { OrganizationUpgradeRequest } from \"../../models/request/organization-upgrade.request\";\nimport { OrganizationSsoRequest } from \"../../models/request/organization/organization-sso.request\";\nimport { PaymentRequest } from \"../../models/request/payment.request\";\nimport { SeatRequest } from \"../../models/request/seat.request\";\nimport { SecretVerificationRequest } from \"../../models/request/secret-verification.request\";\nimport { StorageRequest } from \"../../models/request/storage.request\";\nimport { VerifyBankRequest } from \"../../models/request/verify-bank.request\";\nimport { ApiKeyResponse } from \"../../models/response/api-key.response\";\nimport { BillingResponse } from \"../../models/response/billing.response\";\nimport { ListResponse } from \"../../models/response/list.response\";\nimport { OrganizationApiKeyInformationResponse } from \"../../models/response/organization-api-key-information.response\";\nimport { OrganizationAutoEnrollStatusResponse } from \"../../models/response/organization-auto-enroll-status.response\";\nimport { OrganizationKeysResponse } from \"../../models/response/organization-keys.response\";\nimport { OrganizationSubscriptionResponse } from \"../../models/response/organization-subscription.response\";\nimport { OrganizationResponse } from \"../../models/response/organization.response\";\nimport { OrganizationSsoResponse } from \"../../models/response/organization/organization-sso.response\";\nimport { PaymentResponse } from \"../../models/response/payment.response\";\nimport { TaxInfoResponse } from \"../../models/response/tax-info.response\";\nimport { SyncService } from \"../../vault/abstractions/sync/sync.service.abstraction\";\n\nexport class OrganizationApiService implements OrganizationApiServiceAbstraction {\n  constructor(private apiService: ApiService, private syncService: SyncService) {}\n\n  async get(id: string): Promise<OrganizationResponse> {\n    const r = await this.apiService.send(\"GET\", \"/organizations/\" + id, null, true, true);\n    return new OrganizationResponse(r);\n  }\n\n  async getBilling(id: string): Promise<BillingResponse> {\n    const r = await this.apiService.send(\n      \"GET\",\n      \"/organizations/\" + id + \"/billing\",\n      null,\n      true,\n      true\n    );\n    return new BillingResponse(r);\n  }\n\n  async getSubscription(id: string): Promise<OrganizationSubscriptionResponse> {\n    const r = await this.apiService.send(\n      \"GET\",\n      \"/organizations/\" + id + \"/subscription\",\n      null,\n      true,\n      true\n    );\n    return new OrganizationSubscriptionResponse(r);\n  }\n\n  async getLicense(id: string, installationId: string): Promise<unknown> {\n    return this.apiService.send(\n      \"GET\",\n      \"/organizations/\" + id + \"/license?installationId=\" + installationId,\n      null,\n      true,\n      true\n    );\n  }\n\n  async getAutoEnrollStatus(identifier: string): Promise<OrganizationAutoEnrollStatusResponse> {\n    const r = await this.apiService.send(\n      \"GET\",\n      \"/organizations/\" + identifier + \"/auto-enroll-status\",\n      null,\n      true,\n      true\n    );\n    return new OrganizationAutoEnrollStatusResponse(r);\n  }\n\n  async create(request: OrganizationCreateRequest): Promise<OrganizationResponse> {\n    const r = await this.apiService.send(\"POST\", \"/organizations\", request, true, true);\n    // Forcing a sync will notify organization service that they need to repull\n    await this.syncService.fullSync(true);\n    return new OrganizationResponse(r);\n  }\n\n  async createLicense(data: FormData): Promise<OrganizationResponse> {\n    const r = await this.apiService.send(\n      \"POST\",\n      \"/organizations/licenses/self-hosted\",\n      data,\n      true,\n      true\n    );\n    return new OrganizationResponse(r);\n  }\n\n  async save(id: string, request: OrganizationUpdateRequest): Promise<OrganizationResponse> {\n    const r = await this.apiService.send(\"PUT\", \"/organizations/\" + id, request, true, true);\n    const data = new OrganizationResponse(r);\n    await this.syncService.fullSync(true);\n    return data;\n  }\n\n  async updatePayment(id: string, request: PaymentRequest): Promise<void> {\n    return this.apiService.send(\"POST\", \"/organizations/\" + id + \"/payment\", request, true, false);\n  }\n\n  async upgrade(id: string, request: OrganizationUpgradeRequest): Promise<PaymentResponse> {\n    const r = await this.apiService.send(\n      \"POST\",\n      \"/organizations/\" + id + \"/upgrade\",\n      request,\n      true,\n      true\n    );\n    return new PaymentResponse(r);\n  }\n\n  async updateSubscription(\n    id: string,\n    request: OrganizationSubscriptionUpdateRequest\n  ): Promise<void> {\n    return this.apiService.send(\n      \"POST\",\n      \"/organizations/\" + id + \"/subscription\",\n      request,\n      true,\n      false\n    );\n  }\n\n  async updateSeats(id: string, request: SeatRequest): Promise<PaymentResponse> {\n    const r = await this.apiService.send(\n      \"POST\",\n      \"/organizations/\" + id + \"/seat\",\n      request,\n      true,\n      true\n    );\n    return new PaymentResponse(r);\n  }\n\n  async updateStorage(id: string, request: StorageRequest): Promise<PaymentResponse> {\n    const r = await this.apiService.send(\n      \"POST\",\n      \"/organizations/\" + id + \"/storage\",\n      request,\n      true,\n      true\n    );\n    return new PaymentResponse(r);\n  }\n\n  async verifyBank(id: string, request: VerifyBankRequest): Promise<void> {\n    await this.apiService.send(\n      \"POST\",\n      \"/organizations/\" + id + \"/verify-bank\",\n      request,\n      true,\n      false\n    );\n  }\n\n  async cancel(id: string): Promise<void> {\n    return this.apiService.send(\"POST\", \"/organizations/\" + id + \"/cancel\", null, true, false);\n  }\n\n  async reinstate(id: string): Promise<void> {\n    return this.apiService.send(\"POST\", \"/organizations/\" + id + \"/reinstate\", null, true, false);\n  }\n\n  async leave(id: string): Promise<void> {\n    await this.apiService.send(\"POST\", \"/organizations/\" + id + \"/leave\", null, true, false);\n    await this.syncService.fullSync(true);\n  }\n\n  async delete(id: string, request: SecretVerificationRequest): Promise<void> {\n    await this.apiService.send(\"DELETE\", \"/organizations/\" + id, request, true, false);\n    await this.syncService.fullSync(true);\n  }\n\n  async updateLicense(id: string, data: FormData): Promise<void> {\n    await this.apiService.send(\n      \"POST\",\n      \"/organizations/licenses/self-hosted/\" + id,\n      data,\n      true,\n      false\n    );\n  }\n\n  async importDirectory(organizationId: string, request: ImportDirectoryRequest): Promise<void> {\n    return this.apiService.send(\n      \"POST\",\n      \"/organizations/\" + organizationId + \"/import\",\n      request,\n      true,\n      false\n    );\n  }\n\n  async getOrCreateApiKey(id: string, request: OrganizationApiKeyRequest): Promise<ApiKeyResponse> {\n    const r = await this.apiService.send(\n      \"POST\",\n      \"/organizations/\" + id + \"/api-key\",\n      request,\n      true,\n      true\n    );\n    return new ApiKeyResponse(r);\n  }\n\n  async getApiKeyInformation(\n    id: string,\n    organizationApiKeyType: OrganizationApiKeyType = null\n  ): Promise<ListResponse<OrganizationApiKeyInformationResponse>> {\n    const uri =\n      organizationApiKeyType === null\n        ? \"/organizations/\" + id + \"/api-key-information\"\n        : \"/organizations/\" + id + \"/api-key-information/\" + organizationApiKeyType;\n    const r = await this.apiService.send(\"GET\", uri, null, true, true);\n    return new ListResponse(r, OrganizationApiKeyInformationResponse);\n  }\n\n  async rotateApiKey(id: string, request: OrganizationApiKeyRequest): Promise<ApiKeyResponse> {\n    const r = await this.apiService.send(\n      \"POST\",\n      \"/organizations/\" + id + \"/rotate-api-key\",\n      request,\n      true,\n      true\n    );\n    return new ApiKeyResponse(r);\n  }\n\n  async getTaxInfo(id: string): Promise<TaxInfoResponse> {\n    const r = await this.apiService.send(\"GET\", \"/organizations/\" + id + \"/tax\", null, true, true);\n    return new TaxInfoResponse(r);\n  }\n\n  async updateTaxInfo(id: string, request: OrganizationTaxInfoUpdateRequest): Promise<void> {\n    // Can't broadcast anything because the response doesn't have content\n    return this.apiService.send(\"PUT\", \"/organizations/\" + id + \"/tax\", request, true, false);\n  }\n\n  async getKeys(id: string): Promise<OrganizationKeysResponse> {\n    const r = await this.apiService.send(\"GET\", \"/organizations/\" + id + \"/keys\", null, true, true);\n    return new OrganizationKeysResponse(r);\n  }\n\n  async updateKeys(\n    id: string,\n    request: OrganizationKeysRequest\n  ): Promise<OrganizationKeysResponse> {\n    const r = await this.apiService.send(\n      \"POST\",\n      \"/organizations/\" + id + \"/keys\",\n      request,\n      true,\n      true\n    );\n    // Not broadcasting anything because data on this response doesn't correspond to `Organization`\n    return new OrganizationKeysResponse(r);\n  }\n\n  async getSso(id: string): Promise<OrganizationSsoResponse> {\n    const r = await this.apiService.send(\"GET\", \"/organizations/\" + id + \"/sso\", null, true, true);\n    return new OrganizationSsoResponse(r);\n  }\n\n  async updateSso(id: string, request: OrganizationSsoRequest): Promise<OrganizationSsoResponse> {\n    const r = await this.apiService.send(\n      \"POST\",\n      \"/organizations/\" + id + \"/sso\",\n      request,\n      true,\n      true\n    );\n    // Not broadcasting anything because data on this response doesn't correspond to `Organization`\n    return new OrganizationSsoResponse(r);\n  }\n\n  async selfHostedSyncLicense(id: string) {\n    await this.apiService.send(\n      \"POST\",\n      \"/organizations/licenses/self-hosted/\" + id + \"/sync/\",\n      null,\n      true,\n      false\n    );\n  }\n}\n","import { ApiService } from \"../../abstractions/api.service\";\nimport { ConfigApiServiceAbstraction as ConfigApiServiceAbstraction } from \"../../abstractions/config/config-api.service.abstraction\";\nimport { ServerConfigResponse } from \"../../models/response/server-config.response\";\n\nexport class ConfigApiService implements ConfigApiServiceAbstraction {\n  constructor(private apiService: ApiService) {}\n\n  async get(): Promise<ServerConfigResponse> {\n    const r = await this.apiService.send(\"GET\", \"/config\", null, true, true);\n    return new ServerConfigResponse(r);\n  }\n}\n","import { I18nService } from \"../abstractions/i18n.service\";\nimport { PlatformUtilsService } from \"../abstractions/platformUtils.service\";\nimport { ValidationService as ValidationServiceAbstraction } from \"../abstractions/validation.service\";\nimport { ErrorResponse } from \"../models/response/error.response\";\n\nexport class ValidationService implements ValidationServiceAbstraction {\n  constructor(\n    private i18nService: I18nService,\n    private platformUtilsService: PlatformUtilsService\n  ) {}\n\n  showError(data: any): string[] {\n    const defaultErrorMessage = this.i18nService.t(\"unexpectedError\");\n    let errors: string[] = [];\n\n    if (data != null && typeof data === \"string\") {\n      errors.push(data);\n    } else if (data == null || typeof data !== \"object\") {\n      errors.push(defaultErrorMessage);\n    } else if (data.validationErrors != null) {\n      errors = errors.concat((data as ErrorResponse).getAllMessages());\n    } else {\n      errors.push(data.message ? data.message : defaultErrorMessage);\n    }\n\n    if (errors.length === 1) {\n      this.platformUtilsService.showToast(\"error\", this.i18nService.t(\"errorOccurred\"), errors[0]);\n    } else if (errors.length > 1) {\n      this.platformUtilsService.showToast(\"error\", this.i18nService.t(\"errorOccurred\"), errors, {\n        timeout: 5000 * errors.length,\n      });\n    }\n\n    return errors;\n  }\n}\n","import { CryptoService } from \"../abstractions/crypto.service\";\nimport { EncryptService } from \"../abstractions/encrypt.service\";\n\nexport class ContainerService {\n  constructor(private cryptoService: CryptoService, private encryptService: EncryptService) {}\n\n  attachToGlobal(global: any) {\n    if (!global.bitwardenContainerService) {\n      global.bitwardenContainerService = this;\n    }\n  }\n\n  /**\n   * @throws Will throw if CryptoService was not instantiated and provided to the ContainerService constructor\n   */\n  getCryptoService(): CryptoService {\n    if (this.cryptoService == null) {\n      throw new Error(\"ContainerService.cryptoService not initialized.\");\n    }\n    return this.cryptoService;\n  }\n\n  /**\n   * @throws Will throw if EncryptService was not instantiated and provided to the ContainerService constructor\n   */\n  getEncryptService(): EncryptService {\n    if (this.encryptService == null) {\n      throw new Error(\"ContainerService.encryptService not initialized.\");\n    }\n    return this.encryptService;\n  }\n}\n","import { AbstractMemoryStorageService } from \"../abstractions/storage.service\";\n\nexport class MemoryStorageService extends AbstractMemoryStorageService {\n  private store = new Map<string, any>();\n\n  get<T>(key: string): Promise<T> {\n    if (this.store.has(key)) {\n      const obj = this.store.get(key);\n      return Promise.resolve(obj as T);\n    }\n    return Promise.resolve(null);\n  }\n\n  async has(key: string): Promise<boolean> {\n    return (await this.get(key)) != null;\n  }\n\n  save(key: string, obj: any): Promise<any> {\n    if (obj == null) {\n      return this.remove(key);\n    }\n    this.store.set(key, obj);\n    return Promise.resolve();\n  }\n\n  remove(key: string): Promise<any> {\n    this.store.delete(key);\n    return Promise.resolve();\n  }\n\n  getBypassCache<T>(key: string): Promise<T> {\n    return this.get<T>(key);\n  }\n}\n","import { firstValueFrom } from \"rxjs\";\n\nimport { AuthService } from \"../abstractions/auth.service\";\nimport { MessagingService } from \"../abstractions/messaging.service\";\nimport { PlatformUtilsService } from \"../abstractions/platformUtils.service\";\nimport { StateService } from \"../abstractions/state.service\";\nimport { SystemService as SystemServiceAbstraction } from \"../abstractions/system.service\";\nimport { AuthenticationStatus } from \"../enums/authenticationStatus\";\nimport { Utils } from \"../misc/utils\";\n\nexport class SystemService implements SystemServiceAbstraction {\n  private reloadInterval: any = null;\n  private clearClipboardTimeout: any = null;\n  private clearClipboardTimeoutFunction: () => Promise<any> = null;\n\n  constructor(\n    private messagingService: MessagingService,\n    private platformUtilsService: PlatformUtilsService,\n    private reloadCallback: () => Promise<void> = null,\n    private stateService: StateService\n  ) {}\n\n  async startProcessReload(authService: AuthService): Promise<void> {\n    const accounts = await firstValueFrom(this.stateService.accounts$);\n    if (accounts != null) {\n      const keys = Object.keys(accounts);\n      if (keys.length > 0) {\n        for (const userId of keys) {\n          if ((await authService.getAuthStatus(userId)) === AuthenticationStatus.Unlocked) {\n            return;\n          }\n        }\n      }\n    }\n\n    // A reloadInterval has already been set and is executing\n    if (this.reloadInterval != null) {\n      return;\n    }\n\n    // User has set a PIN, with ask for master password on restart, to protect their vault\n    const decryptedPinProtected = await this.stateService.getDecryptedPinProtected();\n    if (decryptedPinProtected != null) {\n      return;\n    }\n\n    this.cancelProcessReload();\n    this.reloadInterval = setInterval(async () => await this.executeProcessReload(), 10000);\n  }\n\n  private async inactiveMoreThanSeconds(seconds: number): Promise<boolean> {\n    const lastActive = await this.stateService.getLastActive();\n    if (lastActive != null) {\n      const diffMs = new Date().getTime() - lastActive;\n      return diffMs >= seconds * 1000;\n    }\n    return true;\n  }\n\n  private async executeProcessReload() {\n    const accounts = await firstValueFrom(this.stateService.accounts$);\n    const doRefresh =\n      accounts == null ||\n      Object.keys(accounts).length == 0 ||\n      (await this.inactiveMoreThanSeconds(5));\n\n    const biometricLockedFingerprintValidated =\n      await this.stateService.getBiometricFingerprintValidated();\n    if (doRefresh && !biometricLockedFingerprintValidated) {\n      clearInterval(this.reloadInterval);\n      this.reloadInterval = null;\n      this.messagingService.send(\"reloadProcess\");\n      if (this.reloadCallback != null) {\n        await this.reloadCallback();\n      }\n    }\n  }\n\n  cancelProcessReload(): void {\n    if (this.reloadInterval != null) {\n      clearInterval(this.reloadInterval);\n      this.reloadInterval = null;\n    }\n  }\n\n  async clearClipboard(clipboardValue: string, timeoutMs: number = null): Promise<void> {\n    if (this.clearClipboardTimeout != null) {\n      clearTimeout(this.clearClipboardTimeout);\n      this.clearClipboardTimeout = null;\n    }\n    if (Utils.isNullOrWhitespace(clipboardValue)) {\n      return;\n    }\n    await this.stateService.getClearClipboard().then((clearSeconds) => {\n      if (clearSeconds == null) {\n        return;\n      }\n      if (timeoutMs == null) {\n        timeoutMs = clearSeconds * 1000;\n      }\n      this.clearClipboardTimeoutFunction = async () => {\n        const clipboardValueNow = await this.platformUtilsService.readFromClipboard();\n        if (clipboardValue === clipboardValueNow) {\n          this.platformUtilsService.copyToClipboard(\"\", { clearing: true });\n        }\n      };\n      this.clearClipboardTimeout = setTimeout(async () => {\n        await this.clearPendingClipboard();\n      }, timeoutMs);\n    });\n  }\n\n  async clearPendingClipboard() {\n    if (this.clearClipboardTimeoutFunction != null) {\n      await this.clearClipboardTimeoutFunction();\n      this.clearClipboardTimeoutFunction = null;\n    }\n  }\n}\n","export enum NotificationQueueMessageType {\n  AddLogin = 0,\n  ChangePassword = 1,\n}\n","import LockedVaultPendingNotificationsItem from \"../../background/models/lockedVaultPendingNotificationsItem\";\nimport { BrowserApi } from \"../../browser/browserApi\";\nimport { ContextMenuClickedHandler } from \"../browser/context-menu-clicked-handler\";\n\nexport default class ContextMenusBackground {\n  private contextMenus: typeof chrome.contextMenus;\n\n  constructor(private contextMenuClickedHandler: ContextMenuClickedHandler) {\n    this.contextMenus = chrome.contextMenus;\n  }\n\n  init() {\n    if (!this.contextMenus) {\n      return;\n    }\n\n    this.contextMenus.onClicked.addListener((info, tab) =>\n      this.contextMenuClickedHandler.run(info, tab)\n    );\n\n    BrowserApi.messageListener(\n      \"contextmenus.background\",\n      async (\n        msg: { command: string; data: LockedVaultPendingNotificationsItem },\n        sender: chrome.runtime.MessageSender,\n        sendResponse: any\n      ) => {\n        if (msg.command === \"unlockCompleted\" && msg.data.target === \"contextmenus.background\") {\n          await this.contextMenuClickedHandler.cipherAction(\n            msg.data.commandToRetry.msg.data,\n            msg.data.commandToRetry.sender.tab\n          );\n        }\n      }\n    );\n  }\n}\n","import { firstValueFrom } from \"rxjs\";\n\nimport { AuthService } from \"@bitwarden/common/abstractions/auth.service\";\nimport { PolicyService } from \"@bitwarden/common/abstractions/policy/policy.service.abstraction\";\nimport { AuthenticationStatus } from \"@bitwarden/common/enums/authenticationStatus\";\nimport { PolicyType } from \"@bitwarden/common/enums/policyType\";\nimport { ThemeType } from \"@bitwarden/common/enums/themeType\";\nimport { Utils } from \"@bitwarden/common/misc/utils\";\nimport { CipherService } from \"@bitwarden/common/vault/abstractions/cipher.service\";\nimport { FolderService } from \"@bitwarden/common/vault/abstractions/folder/folder.service.abstraction\";\nimport { CipherType } from \"@bitwarden/common/vault/enums/cipher-type\";\nimport { CipherView } from \"@bitwarden/common/vault/models/view/cipher.view\";\nimport { LoginUriView } from \"@bitwarden/common/vault/models/view/login-uri.view\";\nimport { LoginView } from \"@bitwarden/common/vault/models/view/login.view\";\n\nimport AddChangePasswordQueueMessage from \"../../background/models/addChangePasswordQueueMessage\";\nimport AddLoginQueueMessage from \"../../background/models/addLoginQueueMessage\";\nimport AddLoginRuntimeMessage from \"../../background/models/addLoginRuntimeMessage\";\nimport ChangePasswordRuntimeMessage from \"../../background/models/changePasswordRuntimeMessage\";\nimport LockedVaultPendingNotificationsItem from \"../../background/models/lockedVaultPendingNotificationsItem\";\nimport { NotificationQueueMessageType } from \"../../background/models/notificationQueueMessageType\";\nimport { BrowserApi } from \"../../browser/browserApi\";\nimport { BrowserStateService } from \"../../services/abstractions/browser-state.service\";\nimport { AutofillService } from \"../services/abstractions/autofill.service\";\n\nexport default class NotificationBackground {\n  private notificationQueue: (AddLoginQueueMessage | AddChangePasswordQueueMessage)[] = [];\n\n  constructor(\n    private autofillService: AutofillService,\n    private cipherService: CipherService,\n    private authService: AuthService,\n    private policyService: PolicyService,\n    private folderService: FolderService,\n    private stateService: BrowserStateService\n  ) {}\n\n  async init() {\n    if (chrome.runtime == null) {\n      return;\n    }\n\n    BrowserApi.messageListener(\n      \"notification.background\",\n      async (msg: any, sender: chrome.runtime.MessageSender) => {\n        await this.processMessage(msg, sender);\n      }\n    );\n\n    this.cleanupNotificationQueue();\n  }\n\n  async processMessage(msg: any, sender: chrome.runtime.MessageSender) {\n    switch (msg.command) {\n      case \"unlockCompleted\":\n        if (msg.data.target !== \"notification.background\") {\n          return;\n        }\n        await this.processMessage(msg.data.commandToRetry.msg, msg.data.commandToRetry.sender);\n        break;\n      case \"bgGetDataForTab\":\n        await this.getDataForTab(sender.tab, msg.responseCommand);\n        break;\n      case \"bgCloseNotificationBar\":\n        await BrowserApi.tabSendMessageData(sender.tab, \"closeNotificationBar\");\n        break;\n      case \"bgAdjustNotificationBar\":\n        await BrowserApi.tabSendMessageData(sender.tab, \"adjustNotificationBar\", msg.data);\n        break;\n      case \"bgAddLogin\":\n        await this.addLogin(msg.login, sender.tab);\n        break;\n      case \"bgChangedPassword\":\n        await this.changedPassword(msg.data, sender.tab);\n        break;\n      case \"bgAddClose\":\n      case \"bgChangeClose\":\n        this.removeTabFromNotificationQueue(sender.tab);\n        break;\n      case \"bgAddSave\":\n      case \"bgChangeSave\":\n        if ((await this.authService.getAuthStatus()) < AuthenticationStatus.Unlocked) {\n          const retryMessage: LockedVaultPendingNotificationsItem = {\n            commandToRetry: {\n              msg: msg,\n              sender: sender,\n            },\n            target: \"notification.background\",\n          };\n          await BrowserApi.tabSendMessageData(\n            sender.tab,\n            \"addToLockedVaultPendingNotifications\",\n            retryMessage\n          );\n          await BrowserApi.tabSendMessageData(sender.tab, \"promptForLogin\");\n          return;\n        }\n        await this.saveOrUpdateCredentials(sender.tab, msg.folder);\n        break;\n      case \"bgNeverSave\":\n        await this.saveNever(sender.tab);\n        break;\n      case \"collectPageDetailsResponse\":\n        switch (msg.sender) {\n          case \"notificationBar\": {\n            const forms = this.autofillService.getFormsWithPasswordFields(msg.details);\n            await BrowserApi.tabSendMessageData(msg.tab, \"notificationBarPageDetails\", {\n              details: msg.details,\n              forms: forms,\n            });\n            break;\n          }\n          default:\n            break;\n        }\n        break;\n      default:\n        break;\n    }\n  }\n\n  async checkNotificationQueue(tab: chrome.tabs.Tab = null): Promise<void> {\n    if (this.notificationQueue.length === 0) {\n      return;\n    }\n\n    if (tab != null) {\n      await this.doNotificationQueueCheck(tab);\n      return;\n    }\n\n    const currentTab = await BrowserApi.getTabFromCurrentWindow();\n    if (currentTab != null) {\n      await this.doNotificationQueueCheck(currentTab);\n    }\n  }\n\n  private cleanupNotificationQueue() {\n    for (let i = this.notificationQueue.length - 1; i >= 0; i--) {\n      if (this.notificationQueue[i].expires < new Date()) {\n        this.notificationQueue.splice(i, 1);\n      }\n    }\n    setTimeout(() => this.cleanupNotificationQueue(), 2 * 60 * 1000); // check every 2 minutes\n  }\n\n  private async doNotificationQueueCheck(tab: chrome.tabs.Tab): Promise<void> {\n    if (tab == null) {\n      return;\n    }\n\n    const tabDomain = Utils.getDomain(tab.url);\n    if (tabDomain == null) {\n      return;\n    }\n\n    for (let i = 0; i < this.notificationQueue.length; i++) {\n      if (\n        this.notificationQueue[i].tabId !== tab.id ||\n        this.notificationQueue[i].domain !== tabDomain\n      ) {\n        continue;\n      }\n\n      if (this.notificationQueue[i].type === NotificationQueueMessageType.AddLogin) {\n        BrowserApi.tabSendMessageData(tab, \"openNotificationBar\", {\n          type: \"add\",\n          typeData: {\n            isVaultLocked: this.notificationQueue[i].wasVaultLocked,\n            theme: await this.getCurrentTheme(),\n          },\n        });\n      } else if (this.notificationQueue[i].type === NotificationQueueMessageType.ChangePassword) {\n        BrowserApi.tabSendMessageData(tab, \"openNotificationBar\", {\n          type: \"change\",\n          typeData: {\n            isVaultLocked: this.notificationQueue[i].wasVaultLocked,\n            theme: await this.getCurrentTheme(),\n          },\n        });\n      }\n      break;\n    }\n  }\n\n  private async getCurrentTheme() {\n    const theme = await this.stateService.getTheme();\n\n    if (theme !== ThemeType.System) {\n      return theme;\n    }\n\n    return window.matchMedia(\"(prefers-color-scheme: dark)\").matches\n      ? ThemeType.Dark\n      : ThemeType.Light;\n  }\n\n  private removeTabFromNotificationQueue(tab: chrome.tabs.Tab) {\n    for (let i = this.notificationQueue.length - 1; i >= 0; i--) {\n      if (this.notificationQueue[i].tabId === tab.id) {\n        this.notificationQueue.splice(i, 1);\n      }\n    }\n  }\n\n  private async addLogin(loginInfo: AddLoginRuntimeMessage, tab: chrome.tabs.Tab) {\n    const authStatus = await this.authService.getAuthStatus();\n    if (authStatus === AuthenticationStatus.LoggedOut) {\n      return;\n    }\n\n    const loginDomain = Utils.getDomain(loginInfo.url);\n    if (loginDomain == null) {\n      return;\n    }\n\n    let normalizedUsername = loginInfo.username;\n    if (normalizedUsername != null) {\n      normalizedUsername = normalizedUsername.toLowerCase();\n    }\n\n    const disabledAddLogin = await this.stateService.getDisableAddLoginNotification();\n    if (authStatus === AuthenticationStatus.Locked) {\n      if (disabledAddLogin) {\n        return;\n      }\n\n      if (!(await this.allowPersonalOwnership())) {\n        return;\n      }\n\n      this.pushAddLoginToQueue(loginDomain, loginInfo, tab, true);\n      return;\n    }\n\n    const ciphers = await this.cipherService.getAllDecryptedForUrl(loginInfo.url);\n    const usernameMatches = ciphers.filter(\n      (c) => c.login.username != null && c.login.username.toLowerCase() === normalizedUsername\n    );\n    if (usernameMatches.length === 0) {\n      if (disabledAddLogin) {\n        return;\n      }\n\n      if (!(await this.allowPersonalOwnership())) {\n        return;\n      }\n\n      this.pushAddLoginToQueue(loginDomain, loginInfo, tab);\n    } else if (\n      usernameMatches.length === 1 &&\n      usernameMatches[0].login.password !== loginInfo.password\n    ) {\n      const disabledChangePassword =\n        await this.stateService.getDisableChangedPasswordNotification();\n      if (disabledChangePassword) {\n        return;\n      }\n      this.pushChangePasswordToQueue(usernameMatches[0].id, loginDomain, loginInfo.password, tab);\n    }\n  }\n\n  private async pushAddLoginToQueue(\n    loginDomain: string,\n    loginInfo: AddLoginRuntimeMessage,\n    tab: chrome.tabs.Tab,\n    isVaultLocked = false\n  ) {\n    // remove any old messages for this tab\n    this.removeTabFromNotificationQueue(tab);\n    const message: AddLoginQueueMessage = {\n      type: NotificationQueueMessageType.AddLogin,\n      username: loginInfo.username,\n      password: loginInfo.password,\n      domain: loginDomain,\n      uri: loginInfo.url,\n      tabId: tab.id,\n      expires: new Date(new Date().getTime() + 5 * 60000), // 5 minutes\n      wasVaultLocked: isVaultLocked,\n    };\n    this.notificationQueue.push(message);\n    await this.checkNotificationQueue(tab);\n  }\n\n  private async changedPassword(changeData: ChangePasswordRuntimeMessage, tab: chrome.tabs.Tab) {\n    const loginDomain = Utils.getDomain(changeData.url);\n    if (loginDomain == null) {\n      return;\n    }\n\n    if ((await this.authService.getAuthStatus()) < AuthenticationStatus.Unlocked) {\n      this.pushChangePasswordToQueue(null, loginDomain, changeData.newPassword, tab, true);\n      return;\n    }\n\n    let id: string = null;\n    const ciphers = await this.cipherService.getAllDecryptedForUrl(changeData.url);\n    if (changeData.currentPassword != null) {\n      const passwordMatches = ciphers.filter(\n        (c) => c.login.password === changeData.currentPassword\n      );\n      if (passwordMatches.length === 1) {\n        id = passwordMatches[0].id;\n      }\n    } else if (ciphers.length === 1) {\n      id = ciphers[0].id;\n    }\n    if (id != null) {\n      this.pushChangePasswordToQueue(id, loginDomain, changeData.newPassword, tab);\n    }\n  }\n\n  private async pushChangePasswordToQueue(\n    cipherId: string,\n    loginDomain: string,\n    newPassword: string,\n    tab: chrome.tabs.Tab,\n    isVaultLocked = false\n  ) {\n    // remove any old messages for this tab\n    this.removeTabFromNotificationQueue(tab);\n    const message: AddChangePasswordQueueMessage = {\n      type: NotificationQueueMessageType.ChangePassword,\n      cipherId: cipherId,\n      newPassword: newPassword,\n      domain: loginDomain,\n      tabId: tab.id,\n      expires: new Date(new Date().getTime() + 5 * 60000), // 5 minutes\n      wasVaultLocked: isVaultLocked,\n    };\n    this.notificationQueue.push(message);\n    await this.checkNotificationQueue(tab);\n  }\n\n  private async saveOrUpdateCredentials(tab: chrome.tabs.Tab, folderId?: string) {\n    for (let i = this.notificationQueue.length - 1; i >= 0; i--) {\n      const queueMessage = this.notificationQueue[i];\n      if (\n        queueMessage.tabId !== tab.id ||\n        (queueMessage.type !== NotificationQueueMessageType.AddLogin &&\n          queueMessage.type !== NotificationQueueMessageType.ChangePassword)\n      ) {\n        continue;\n      }\n\n      const tabDomain = Utils.getDomain(tab.url);\n      if (tabDomain != null && tabDomain !== queueMessage.domain) {\n        continue;\n      }\n\n      this.notificationQueue.splice(i, 1);\n      BrowserApi.tabSendMessageData(tab, \"closeNotificationBar\");\n\n      if (queueMessage.type === NotificationQueueMessageType.ChangePassword) {\n        const changePasswordMessage = queueMessage as AddChangePasswordQueueMessage;\n        const cipher = await this.getDecryptedCipherById(changePasswordMessage.cipherId);\n        if (cipher == null) {\n          return;\n        }\n        await this.updateCipher(cipher, changePasswordMessage.newPassword);\n        return;\n      }\n\n      if (queueMessage.type === NotificationQueueMessageType.AddLogin) {\n        if (!queueMessage.wasVaultLocked) {\n          await this.createNewCipher(queueMessage as AddLoginQueueMessage, folderId);\n          BrowserApi.tabSendMessageData(tab, \"addedCipher\");\n          return;\n        }\n\n        // If the vault was locked, check if a cipher needs updating instead of creating a new one\n        const addLoginMessage = queueMessage as AddLoginQueueMessage;\n        const ciphers = await this.cipherService.getAllDecryptedForUrl(addLoginMessage.uri);\n        const usernameMatches = ciphers.filter(\n          (c) =>\n            c.login.username != null && c.login.username.toLowerCase() === addLoginMessage.username\n        );\n\n        if (usernameMatches.length >= 1) {\n          await this.updateCipher(usernameMatches[0], addLoginMessage.password);\n          return;\n        }\n\n        await this.createNewCipher(addLoginMessage, folderId);\n        BrowserApi.tabSendMessageData(tab, \"addedCipher\");\n      }\n    }\n  }\n\n  private async createNewCipher(queueMessage: AddLoginQueueMessage, folderId: string) {\n    const loginModel = new LoginView();\n    const loginUri = new LoginUriView();\n    loginUri.uri = queueMessage.uri;\n    loginModel.uris = [loginUri];\n    loginModel.username = queueMessage.username;\n    loginModel.password = queueMessage.password;\n    const model = new CipherView();\n    model.name = Utils.getHostname(queueMessage.uri) || queueMessage.domain;\n    model.name = model.name.replace(/^www\\./, \"\");\n    model.type = CipherType.Login;\n    model.login = loginModel;\n\n    if (!Utils.isNullOrWhitespace(folderId)) {\n      const folders = await firstValueFrom(this.folderService.folderViews$);\n      if (folders.some((x) => x.id === folderId)) {\n        model.folderId = folderId;\n      }\n    }\n\n    const cipher = await this.cipherService.encrypt(model);\n    await this.cipherService.createWithServer(cipher);\n  }\n\n  private async getDecryptedCipherById(cipherId: string) {\n    const cipher = await this.cipherService.get(cipherId);\n    if (cipher != null && cipher.type === CipherType.Login) {\n      return await cipher.decrypt();\n    }\n    return null;\n  }\n\n  private async updateCipher(cipher: CipherView, newPassword: string) {\n    if (cipher != null && cipher.type === CipherType.Login) {\n      cipher.login.password = newPassword;\n      const newCipher = await this.cipherService.encrypt(cipher);\n      await this.cipherService.updateWithServer(newCipher);\n    }\n  }\n\n  private async saveNever(tab: chrome.tabs.Tab) {\n    for (let i = this.notificationQueue.length - 1; i >= 0; i--) {\n      const queueMessage = this.notificationQueue[i];\n      if (\n        queueMessage.tabId !== tab.id ||\n        queueMessage.type !== NotificationQueueMessageType.AddLogin\n      ) {\n        continue;\n      }\n\n      const tabDomain = Utils.getDomain(tab.url);\n      if (tabDomain != null && tabDomain !== queueMessage.domain) {\n        continue;\n      }\n\n      this.notificationQueue.splice(i, 1);\n      BrowserApi.tabSendMessageData(tab, \"closeNotificationBar\");\n\n      const hostname = Utils.getHostname(tab.url);\n      await this.cipherService.saveNeverDomain(hostname);\n    }\n  }\n\n  private async getDataForTab(tab: chrome.tabs.Tab, responseCommand: string) {\n    const responseData: any = {};\n    if (responseCommand === \"notificationBarGetFoldersList\") {\n      responseData.folders = await firstValueFrom(this.folderService.folderViews$);\n    }\n\n    await BrowserApi.tabSendMessageData(tab, responseCommand, responseData);\n  }\n\n  private async allowPersonalOwnership(): Promise<boolean> {\n    return !(await firstValueFrom(\n      this.policyService.policyAppliesToActiveUser$(PolicyType.PersonalOwnership)\n    ));\n  }\n}\n","import MainBackground from \"../../background/main.background\";\n\nimport NotificationBackground from \"./notification.background\";\n\nexport default class TabsBackground {\n  constructor(\n    private main: MainBackground,\n    private notificationBackground: NotificationBackground\n  ) {}\n\n  private focusedWindowId: number;\n\n  async init() {\n    if (!chrome.tabs || !chrome.windows) {\n      return;\n    }\n\n    chrome.windows.onFocusChanged.addListener(async (windowId: number) => {\n      if (windowId === null || windowId < 0) {\n        return;\n      }\n\n      this.focusedWindowId = windowId;\n      this.main.messagingService.send(\"windowChanged\");\n    });\n\n    chrome.tabs.onActivated.addListener(async (activeInfo: chrome.tabs.TabActiveInfo) => {\n      await this.main.refreshBadge();\n      await this.main.refreshMenu();\n      this.main.messagingService.send(\"tabChanged\");\n    });\n\n    chrome.tabs.onReplaced.addListener(async (addedTabId: number, removedTabId: number) => {\n      if (this.main.onReplacedRan) {\n        return;\n      }\n      this.main.onReplacedRan = true;\n\n      await this.notificationBackground.checkNotificationQueue();\n      await this.main.refreshBadge();\n      await this.main.refreshMenu();\n      this.main.messagingService.send(\"tabChanged\");\n    });\n\n    chrome.tabs.onUpdated.addListener(\n      async (tabId: number, changeInfo: chrome.tabs.TabChangeInfo, tab: chrome.tabs.Tab) => {\n        if (this.focusedWindowId > 0 && tab.windowId != this.focusedWindowId) {\n          return;\n        }\n\n        if (!tab.active) {\n          return;\n        }\n\n        if (this.main.onUpdatedRan) {\n          return;\n        }\n        this.main.onUpdatedRan = true;\n\n        await this.notificationBackground.checkNotificationQueue(tab);\n        await this.main.refreshBadge();\n        await this.main.refreshMenu();\n        this.main.messagingService.send(\"tabChanged\");\n      }\n    );\n  }\n}\n","export type CachedServices = Record<string, unknown>;\n\nexport type FactoryOptions = {\n  alwaysInitializeNewService?: boolean;\n  doNotStoreInitializedService?: boolean;\n  [optionsKey: string]: unknown;\n};\n\nexport async function factory<\n  TCache extends CachedServices,\n  TName extends keyof TCache,\n  TOpts extends FactoryOptions\n>(\n  cachedServices: TCache,\n  name: TName,\n  opts: TOpts,\n  factory: () => TCache[TName] | Promise<TCache[TName]>\n): Promise<TCache[TName]> {\n  let instance = cachedServices[name];\n  if (opts.alwaysInitializeNewService || !instance) {\n    const instanceOrPromise = factory();\n    instance = instanceOrPromise instanceof Promise ? await instanceOrPromise : instanceOrPromise;\n  }\n\n  if (!opts.doNotStoreInitializedService) {\n    cachedServices[name] = instance;\n  }\n\n  return instance as TCache[TName];\n}\n","import { AbstractStorageService } from \"@bitwarden/common/abstractions/storage.service\";\n\nexport default abstract class AbstractChromeStorageService implements AbstractStorageService {\n  protected abstract chromeStorageApi: chrome.storage.StorageArea;\n\n  async get<T>(key: string): Promise<T> {\n    return new Promise((resolve) => {\n      this.chromeStorageApi.get(key, (obj: any) => {\n        if (obj != null && obj[key] != null) {\n          resolve(obj[key] as T);\n          return;\n        }\n        resolve(null);\n      });\n    });\n  }\n\n  async has(key: string): Promise<boolean> {\n    return (await this.get(key)) != null;\n  }\n\n  async save(key: string, obj: any): Promise<void> {\n    if (obj == null) {\n      // Fix safari not liking null in set\n      return new Promise<void>((resolve) => {\n        this.chromeStorageApi.remove(key, () => {\n          resolve();\n        });\n      });\n    }\n\n    if (obj instanceof Set) {\n      obj = Array.from(obj);\n    }\n\n    const keyedObj = { [key]: obj };\n    return new Promise<void>((resolve) => {\n      this.chromeStorageApi.set(keyedObj, () => {\n        resolve();\n      });\n    });\n  }\n\n  async remove(key: string): Promise<void> {\n    return new Promise<void>((resolve) => {\n      this.chromeStorageApi.remove(key, () => {\n        resolve();\n      });\n    });\n  }\n}\n","import AbstractChromeStorageService from \"./abstractChromeStorageApi.service\";\n\nexport default class BrowserLocalStorageService extends AbstractChromeStorageService {\n  protected chromeStorageApi = chrome.storage.local;\n}\n","import AbstractChromeStorageService from \"./abstractChromeStorageApi.service\";\n\nexport default class BrowserMemoryStorageService extends AbstractChromeStorageService {\n  protected chromeStorageApi = chrome.storage.session;\n}\n","import { Jsonify } from \"type-fest\";\n\nimport { EncryptService } from \"@bitwarden/common/abstractions/encrypt.service\";\nimport { AbstractMemoryStorageService } from \"@bitwarden/common/abstractions/storage.service\";\nimport { EncString } from \"@bitwarden/common/models/domain/enc-string\";\nimport { MemoryStorageOptions } from \"@bitwarden/common/models/domain/storage-options\";\nimport { SymmetricCryptoKey } from \"@bitwarden/common/models/domain/symmetric-crypto-key\";\n\nimport { devFlag } from \"../decorators/dev-flag.decorator\";\nimport { devFlagEnabled } from \"../flags\";\n\nimport { AbstractKeyGenerationService } from \"./abstractions/abstractKeyGeneration.service\";\nimport BrowserLocalStorageService from \"./browserLocalStorage.service\";\nimport BrowserMemoryStorageService from \"./browserMemoryStorage.service\";\n\nconst keys = {\n  encKey: \"localEncryptionKey\",\n  sessionKey: \"session\",\n};\n\nexport class LocalBackedSessionStorageService extends AbstractMemoryStorageService {\n  private cache = new Map<string, unknown>();\n  private localStorage = new BrowserLocalStorageService();\n  private sessionStorage = new BrowserMemoryStorageService();\n\n  constructor(\n    private encryptService: EncryptService,\n    private keyGenerationService: AbstractKeyGenerationService\n  ) {\n    super();\n  }\n\n  async get<T>(key: string, options?: MemoryStorageOptions<T>): Promise<T> {\n    if (this.cache.has(key)) {\n      return this.cache.get(key) as T;\n    }\n\n    return await this.getBypassCache(key, options);\n  }\n\n  async getBypassCache<T>(key: string, options?: MemoryStorageOptions<T>): Promise<T> {\n    const session = await this.getLocalSession(await this.getSessionEncKey());\n    if (session == null || !Object.keys(session).includes(key)) {\n      return null;\n    }\n\n    let value = session[key];\n    if (options?.deserializer != null) {\n      value = options.deserializer(value as Jsonify<T>);\n    }\n\n    this.cache.set(key, value);\n    return this.cache.get(key) as T;\n  }\n\n  async has(key: string): Promise<boolean> {\n    return (await this.get(key)) != null;\n  }\n\n  async save<T>(key: string, obj: T): Promise<void> {\n    if (obj == null) {\n      this.cache.delete(key);\n    } else {\n      this.cache.set(key, obj);\n    }\n\n    const sessionEncKey = await this.getSessionEncKey();\n    const localSession = (await this.getLocalSession(sessionEncKey)) ?? {};\n    localSession[key] = obj;\n    await this.setLocalSession(localSession, sessionEncKey);\n  }\n\n  async remove(key: string): Promise<void> {\n    await this.save(key, null);\n  }\n\n  async getLocalSession(encKey: SymmetricCryptoKey): Promise<Record<string, unknown>> {\n    const local = await this.localStorage.get<string>(keys.sessionKey);\n\n    if (local == null) {\n      return null;\n    }\n\n    if (devFlagEnabled(\"storeSessionDecrypted\")) {\n      return local as any as Record<string, unknown>;\n    }\n\n    const sessionJson = await this.encryptService.decryptToUtf8(new EncString(local), encKey);\n    if (sessionJson == null) {\n      // Error with decryption -- session is lost, delete state and key and start over\n      await this.setSessionEncKey(null);\n      await this.localStorage.remove(keys.sessionKey);\n      return null;\n    }\n    return JSON.parse(sessionJson);\n  }\n\n  async setLocalSession(session: Record<string, unknown>, key: SymmetricCryptoKey) {\n    if (devFlagEnabled(\"storeSessionDecrypted\")) {\n      await this.setDecryptedLocalSession(session);\n    } else {\n      await this.setEncryptedLocalSession(session, key);\n    }\n  }\n\n  @devFlag(\"storeSessionDecrypted\")\n  async setDecryptedLocalSession(session: Record<string, unknown>): Promise<void> {\n    // Make sure we're storing the jsonified version of the session\n    const jsonSession = JSON.parse(JSON.stringify(session));\n    if (session == null) {\n      await this.localStorage.remove(keys.sessionKey);\n    } else {\n      await this.localStorage.save(keys.sessionKey, jsonSession);\n    }\n  }\n\n  async setEncryptedLocalSession(session: Record<string, unknown>, key: SymmetricCryptoKey) {\n    const jsonSession = JSON.stringify(session);\n    const encSession = await this.encryptService.encrypt(jsonSession, key);\n\n    if (encSession == null) {\n      return await this.localStorage.remove(keys.sessionKey);\n    }\n    await this.localStorage.save(keys.sessionKey, encSession.encryptedString);\n  }\n\n  async getSessionEncKey(): Promise<SymmetricCryptoKey> {\n    let storedKey = await this.sessionStorage.get<SymmetricCryptoKey>(keys.encKey);\n    if (storedKey == null || Object.keys(storedKey).length == 0) {\n      storedKey = await this.keyGenerationService.makeEphemeralKey();\n      await this.setSessionEncKey(storedKey);\n    }\n    return SymmetricCryptoKey.fromJSON(storedKey);\n  }\n\n  async setSessionEncKey(input: SymmetricCryptoKey): Promise<void> {\n    if (input == null) {\n      await this.sessionStorage.remove(keys.encKey);\n    } else {\n      await this.sessionStorage.save(keys.encKey, input);\n    }\n  }\n}\n","import { CryptoFunctionService } from \"@bitwarden/common/abstractions/cryptoFunction.service\";\nimport { WebCryptoFunctionService } from \"@bitwarden/common/services/webCryptoFunction.service\";\n\nimport { CachedServices, factory, FactoryOptions } from \"./factory-options\";\n\ntype CryptoFunctionServiceFactoryOptions = FactoryOptions & {\n  cryptoFunctionServiceOptions: {\n    win: Window | typeof globalThis;\n  };\n};\n\nexport type CryptoFunctionServiceInitOptions = CryptoFunctionServiceFactoryOptions;\n\nexport function cryptoFunctionServiceFactory(\n  cache: { cryptoFunctionService?: CryptoFunctionService } & CachedServices,\n  opts: CryptoFunctionServiceFactoryOptions\n): Promise<CryptoFunctionService> {\n  return factory(\n    cache,\n    \"cryptoFunctionService\",\n    opts,\n    () => new WebCryptoFunctionService(opts.cryptoFunctionServiceOptions.win)\n  );\n}\n","import { LogService } from \"@bitwarden/common/abstractions/log.service\";\nimport { LogLevelType } from \"@bitwarden/common/enums/logLevelType\";\nimport { ConsoleLogService } from \"@bitwarden/common/services/consoleLog.service\";\n\nimport { CachedServices, factory, FactoryOptions } from \"./factory-options\";\n\ntype LogServiceFactoryOptions = FactoryOptions & {\n  logServiceOptions: {\n    isDev: boolean;\n    filter?: (level: LogLevelType) => boolean;\n  };\n};\n\nexport type LogServiceInitOptions = LogServiceFactoryOptions;\n\nexport function logServiceFactory(\n  cache: { logService?: LogService } & CachedServices,\n  opts: LogServiceInitOptions\n): Promise<LogService> {\n  return factory(\n    cache,\n    \"logService\",\n    opts,\n    () => new ConsoleLogService(opts.logServiceOptions.isDev, opts.logServiceOptions.filter)\n  );\n}\n","import { devFlagEnabled, DevFlags } from \"../flags\";\n\nexport function devFlag(flag: keyof DevFlags) {\n  return function (target: any, propertyKey: string, descriptor: PropertyDescriptor) {\n    const originalMethod = descriptor.value;\n    descriptor.value = function (...args: any[]) {\n      if (!devFlagEnabled(flag)) {\n        throw new Error(\n          `This method should not be called, it is protected by a disabled dev flag.`\n        );\n      }\n      return originalMethod.apply(this, args);\n    };\n  };\n}\n","import { EncryptServiceImplementation } from \"@bitwarden/common/services/cryptography/encrypt.service.implementation\";\n\nimport {\n  cryptoFunctionServiceFactory,\n  CryptoFunctionServiceInitOptions,\n} from \"./crypto-function-service.factory\";\nimport { CachedServices, factory, FactoryOptions } from \"./factory-options\";\nimport { LogServiceInitOptions, logServiceFactory } from \"./log-service.factory\";\n\ntype EncryptServiceFactoryOptions = FactoryOptions & {\n  encryptServiceOptions: {\n    logMacFailures: boolean;\n  };\n};\n\nexport type EncryptServiceInitOptions = EncryptServiceFactoryOptions &\n  CryptoFunctionServiceInitOptions &\n  LogServiceInitOptions;\n\nexport function encryptServiceFactory(\n  cache: { encryptService?: EncryptServiceImplementation } & CachedServices,\n  opts: EncryptServiceInitOptions\n): Promise<EncryptServiceImplementation> {\n  return factory(\n    cache,\n    \"encryptService\",\n    opts,\n    async () =>\n      new EncryptServiceImplementation(\n        await cryptoFunctionServiceFactory(cache, opts),\n        await logServiceFactory(cache, opts),\n        opts.encryptServiceOptions.logMacFailures\n      )\n  );\n}\n","import { CryptoFunctionService } from \"@bitwarden/common/abstractions/cryptoFunction.service\";\nimport { SymmetricCryptoKey } from \"@bitwarden/common/models/domain/symmetric-crypto-key\";\n\nimport { AbstractKeyGenerationService } from \"./abstractions/abstractKeyGeneration.service\";\n\nexport class KeyGenerationService implements AbstractKeyGenerationService {\n  constructor(private cryptoFunctionService: CryptoFunctionService) {}\n\n  async makeEphemeralKey(numBytes = 16): Promise<SymmetricCryptoKey> {\n    const keyMaterial = await this.cryptoFunctionService.randomBytes(numBytes);\n    const key = await this.cryptoFunctionService.hkdf(\n      keyMaterial,\n      \"bitwarden-ephemeral\",\n      \"ephemeral\",\n      64,\n      \"sha256\"\n    );\n    return new SymmetricCryptoKey(key);\n  }\n}\n","import {\n  AbstractMemoryStorageService,\n  AbstractStorageService,\n} from \"@bitwarden/common/abstractions/storage.service\";\nimport { MemoryStorageService } from \"@bitwarden/common/services/memoryStorage.service\";\n\nimport { BrowserApi } from \"../../browser/browserApi\";\nimport BrowserLocalStorageService from \"../../services/browserLocalStorage.service\";\nimport { LocalBackedSessionStorageService } from \"../../services/localBackedSessionStorage.service\";\n\nimport { encryptServiceFactory, EncryptServiceInitOptions } from \"./encrypt-service.factory\";\nimport { CachedServices, factory, FactoryOptions } from \"./factory-options\";\nimport {\n  keyGenerationServiceFactory,\n  KeyGenerationServiceInitOptions,\n} from \"./key-generation-service.factory\";\n\ntype StorageServiceFactoryOptions = FactoryOptions;\n\nexport type DiskStorageServiceInitOptions = StorageServiceFactoryOptions;\nexport type SecureStorageServiceInitOptions = StorageServiceFactoryOptions;\nexport type MemoryStorageServiceInitOptions = StorageServiceFactoryOptions &\n  EncryptServiceInitOptions &\n  KeyGenerationServiceInitOptions;\n\nexport function diskStorageServiceFactory(\n  cache: { diskStorageService?: AbstractStorageService } & CachedServices,\n  opts: DiskStorageServiceInitOptions\n): Promise<AbstractStorageService> {\n  return factory(cache, \"diskStorageService\", opts, () => new BrowserLocalStorageService());\n}\n\nexport function secureStorageServiceFactory(\n  cache: { secureStorageService?: AbstractStorageService } & CachedServices,\n  opts: SecureStorageServiceInitOptions\n): Promise<AbstractStorageService> {\n  return factory(cache, \"secureStorageService\", opts, () => new BrowserLocalStorageService());\n}\n\nexport function memoryStorageServiceFactory(\n  cache: { memoryStorageService?: AbstractMemoryStorageService } & CachedServices,\n  opts: MemoryStorageServiceInitOptions\n): Promise<AbstractMemoryStorageService> {\n  return factory(cache, \"memoryStorageService\", opts, async () => {\n    if (BrowserApi.manifestVersion === 3) {\n      return new LocalBackedSessionStorageService(\n        await encryptServiceFactory(cache, opts),\n        await keyGenerationServiceFactory(cache, opts)\n      );\n    }\n    return new MemoryStorageService();\n  });\n}\n","import { KeyGenerationService } from \"../../services/keyGeneration.service\";\n\nimport {\n  cryptoFunctionServiceFactory,\n  CryptoFunctionServiceInitOptions,\n} from \"./crypto-function-service.factory\";\nimport { CachedServices, factory, FactoryOptions } from \"./factory-options\";\n\ntype KeyGenerationServiceFactoryOptions = FactoryOptions;\n\nexport type KeyGenerationServiceInitOptions = KeyGenerationServiceFactoryOptions &\n  CryptoFunctionServiceInitOptions;\n\nexport function keyGenerationServiceFactory(\n  cache: { keyGenerationService?: KeyGenerationService } & CachedServices,\n  opts: KeyGenerationServiceInitOptions\n): Promise<KeyGenerationService> {\n  return factory(\n    cache,\n    \"keyGenerationService\",\n    opts,\n    async () => new KeyGenerationService(await cryptoFunctionServiceFactory(cache, opts))\n  );\n}\n","import { DiskStorageOptions } from \"@koa/multer\";\n\nimport { AppIdService as AbstractAppIdService } from \"@bitwarden/common/abstractions/appId.service\";\nimport { AppIdService } from \"@bitwarden/common/services/appId.service\";\n\nimport { FactoryOptions, CachedServices, factory } from \"./factory-options\";\nimport { diskStorageServiceFactory } from \"./storage-service.factory\";\n\ntype AppIdServiceFactoryOptions = FactoryOptions;\n\nexport type AppIdServiceInitOptions = AppIdServiceFactoryOptions & DiskStorageOptions;\n\nexport function appIdServiceFactory(\n  cache: { appIdService?: AbstractAppIdService } & CachedServices,\n  opts: AppIdServiceInitOptions\n): Promise<AbstractAppIdService> {\n  return factory(\n    cache,\n    \"appIdService\",\n    opts,\n    async () => new AppIdService(await diskStorageServiceFactory(cache, opts))\n  );\n}\n","import { BehaviorSubject, concatMap, ReplaySubject, skip, Subject, Subscription } from \"rxjs\";\n\nimport { AbstractMemoryStorageService } from \"@bitwarden/common/abstractions/storage.service\";\nimport { Utils } from \"@bitwarden/common/misc/utils\";\n\nimport { BrowserApi } from \"../../browser/browserApi\";\n\nimport { SyncedItemMetadata } from \"./sync-item-metadata\";\n\nexport class SessionSyncer {\n  subscription: Subscription;\n  id = Utils.newGuid();\n\n  // ignore initial values\n  private ignoreNUpdates = 0;\n\n  constructor(\n    private subject: Subject<any>,\n    private memoryStorageService: AbstractMemoryStorageService,\n    private metaData: SyncedItemMetadata\n  ) {\n    if (!(subject instanceof Subject)) {\n      throw new Error(\"subject must inherit from Subject\");\n    }\n\n    if (metaData.ctor == null && metaData.initializer == null) {\n      throw new Error(\"ctor or initializer must be provided\");\n    }\n  }\n\n  async init() {\n    switch (this.subject.constructor) {\n      case ReplaySubject:\n        // ignore all updates currently in the buffer\n        this.ignoreNUpdates = (this.subject as any)._buffer.length;\n        break;\n      case BehaviorSubject:\n        this.ignoreNUpdates = 1;\n        break;\n      default:\n        break;\n    }\n\n    await this.observe();\n    // must be synchronous\n    const hasInSessionMemory = await this.memoryStorageService.has(this.metaData.sessionKey);\n    if (hasInSessionMemory) {\n      await this.update();\n    }\n\n    this.listenForUpdates();\n  }\n\n  private async observe() {\n    const stream = this.subject.pipe(skip(this.ignoreNUpdates));\n    this.ignoreNUpdates = 0;\n\n    // This may be a memory leak.\n    // There is no good time to unsubscribe from this observable. Hopefully Manifest V3 clears memory from temporary\n    // contexts. If so, this is handled by destruction of the context.\n    this.subscription = stream\n      .pipe(\n        concatMap(async (next) => {\n          if (this.ignoreNUpdates > 0) {\n            this.ignoreNUpdates -= 1;\n            return;\n          }\n          await this.updateSession(next);\n        })\n      )\n      .subscribe();\n  }\n\n  private listenForUpdates() {\n    // This is an unawaited promise, but it will be executed asynchronously in the background.\n    BrowserApi.messageListener(\n      this.updateMessageCommand,\n      async (message) => await this.updateFromMessage(message)\n    );\n  }\n\n  async updateFromMessage(message: any) {\n    if (message.command != this.updateMessageCommand || message.id === this.id) {\n      return;\n    }\n    this.update();\n  }\n\n  async update() {\n    const builder = SyncedItemMetadata.builder(this.metaData);\n    const value = await this.memoryStorageService.getBypassCache(this.metaData.sessionKey, {\n      deserializer: builder,\n    });\n    this.ignoreNUpdates = 1;\n    this.subject.next(value);\n  }\n\n  private async updateSession(value: any) {\n    await this.memoryStorageService.save(this.metaData.sessionKey, value);\n    await BrowserApi.sendMessage(this.updateMessageCommand, { id: this.id });\n  }\n\n  private get updateMessageCommand() {\n    return `${this.metaData.sessionKey}_update`;\n  }\n}\n","export type InitializeOptions = \"array\" | \"record\" | \"object\";\n\nexport class SyncedItemMetadata {\n  propertyKey: string;\n  sessionKey: string;\n  ctor?: new () => any;\n  initializer?: (keyValuePair: any) => any;\n  initializeAs: InitializeOptions;\n\n  static builder(metadata: SyncedItemMetadata): (o: any) => any {\n    const itemBuilder =\n      metadata.initializer != null\n        ? metadata.initializer\n        : (o: any) => Object.assign(new metadata.ctor(), o);\n    if (metadata.initializeAs === \"array\") {\n      return (keyValuePair: any) => keyValuePair.map((o: any) => itemBuilder(o));\n    } else if (metadata.initializeAs === \"record\") {\n      return (keyValuePair: any) => {\n        const record: Record<any, any> = {};\n        for (const key in keyValuePair) {\n          record[key] = itemBuilder(keyValuePair[key]);\n        }\n        return record;\n      };\n    } else {\n      return (keyValuePair: any) => itemBuilder(keyValuePair);\n    }\n  }\n}\n","import { Constructor } from \"type-fest\";\n\nimport { AbstractMemoryStorageService } from \"@bitwarden/common/abstractions/storage.service\";\n\nimport { SessionStorable } from \"./session-storable\";\nimport { SessionSyncer } from \"./session-syncer\";\nimport { SyncedItemMetadata } from \"./sync-item-metadata\";\n\n/**\n * Mark the class as syncing state across the browser session. This decorator finds rxjs BehaviorSubject properties\n * marked with @sessionSync and syncs these values across the browser session.\n *\n * @param constructor\n * @returns A new constructor that extends the original one to add session syncing.\n */\nexport function browserSession<TCtor extends Constructor<any>>(constructor: TCtor) {\n  return class extends constructor implements SessionStorable {\n    __syncedItemMetadata: SyncedItemMetadata[];\n    __sessionSyncers: SessionSyncer[];\n\n    constructor(...args: any[]) {\n      super(...args);\n\n      // Require state service to be injected\n      const storageService: AbstractMemoryStorageService = this.findStorageService(\n        [this as any].concat(args)\n      );\n\n      if (this.__syncedItemMetadata == null || !(this.__syncedItemMetadata instanceof Array)) {\n        return;\n      }\n\n      this.__sessionSyncers = this.__syncedItemMetadata.map((metadata) =>\n        this.buildSyncer(metadata, storageService)\n      );\n    }\n\n    buildSyncer(metadata: SyncedItemMetadata, storageSerice: AbstractMemoryStorageService) {\n      const syncer = new SessionSyncer(\n        (this as any)[metadata.propertyKey],\n        storageSerice,\n        metadata\n      );\n      syncer.init();\n      return syncer;\n    }\n\n    findStorageService(args: any[]): AbstractMemoryStorageService {\n      const storageService = args.find(this.isMemoryStorageService);\n\n      if (storageService) {\n        return storageService;\n      }\n\n      const stateService = args.find(\n        (arg) =>\n          arg?.memoryStorageService != null && this.isMemoryStorageService(arg.memoryStorageService)\n      );\n      if (stateService) {\n        return stateService.memoryStorageService;\n      }\n\n      throw new Error(\n        `Cannot decorate ${constructor.name} with browserSession, Browser's AbstractMemoryStorageService must be accessible through the observed classes parameters`\n      );\n    }\n\n    isMemoryStorageService(arg: any): arg is AbstractMemoryStorageService {\n      return arg.type != null && arg.type === AbstractMemoryStorageService.TYPE;\n    }\n  };\n}\n","import { Jsonify } from \"type-fest\";\n\nimport { SessionStorable } from \"./session-storable\";\nimport { InitializeOptions } from \"./sync-item-metadata\";\n\nclass BuildOptions<T, TJson = Jsonify<T>> {\n  ctor?: new () => T;\n  initializer?: (keyValuePair: TJson) => T;\n  initializeAs?: InitializeOptions;\n}\n\n// Used to ensure uniqueness for each synced observable\nlet index = 0;\n\n/**\n * A decorator used to indicate the BehaviorSubject should be synced for this browser session across all contexts.\n *\n * >**Note** This decorator does nothing if the enclosing class is not decorated with @browserSession.\n *\n * >**Note** The Behavior subject must be initialized with a default or in the constructor of the class. If it is not, an error will be thrown.\n *\n * >**!!Warning!!** If the property is overwritten at any time, the new value will not be synced across the browser session.\n *\n * @param buildOptions\n * Builders for the value, requires either a constructor (ctor) for your BehaviorSubject type or an\n * initializer function that takes a key value pair representation of the BehaviorSubject data\n * and returns your instantiated BehaviorSubject value. `initializeAs can optionally be used to indicate\n * the provided initializer function should be used to build an array of values. For example,\n * ```ts\n * \\@sessionSync({ initializer: Foo.fromJSON, initializeAs: 'array' })\n * ```\n * is equivalent to\n * ```\n * \\@sessionSync({ initializer: (obj: any[]) => obj.map((f) => Foo.fromJSON })\n * ```\n *\n * @returns decorator function\n */\nexport function sessionSync<T>(buildOptions: BuildOptions<T>) {\n  return (prototype: unknown, propertyKey: string) => {\n    // Force prototype into SessionStorable and implement it.\n    const p = prototype as SessionStorable;\n\n    if (p.__syncedItemMetadata == null) {\n      p.__syncedItemMetadata = [];\n    }\n\n    p.__syncedItemMetadata.push({\n      propertyKey,\n      sessionKey: `${propertyKey}_${index++}`,\n      ctor: buildOptions.ctor,\n      initializer: buildOptions.initializer,\n      initializeAs: buildOptions.initializeAs ?? \"object\",\n    });\n  };\n}\n","import { Jsonify } from \"type-fest\";\n\nimport {\n  Account as BaseAccount,\n  AccountSettings as BaseAccountSettings,\n} from \"@bitwarden/common/models/domain/account\";\n\nimport { BrowserComponentState } from \"./browserComponentState\";\nimport { BrowserGroupingsComponentState } from \"./browserGroupingsComponentState\";\nimport { BrowserSendComponentState } from \"./browserSendComponentState\";\n\nexport class AccountSettings extends BaseAccountSettings {\n  vaultTimeout = -1; // On Restart\n\n  static fromJSON(json: Jsonify<AccountSettings>): AccountSettings {\n    if (json == null) {\n      return null;\n    }\n\n    return Object.assign(new AccountSettings(), json, super.fromJSON(json));\n  }\n}\n\nexport class Account extends BaseAccount {\n  settings?: AccountSettings = new AccountSettings();\n  groupings?: BrowserGroupingsComponentState;\n  send?: BrowserSendComponentState;\n  ciphers?: BrowserComponentState;\n  sendType?: BrowserComponentState;\n\n  constructor(init: Partial<Account>) {\n    super(init);\n    Object.assign(this.settings, {\n      ...new AccountSettings(),\n      ...this.settings,\n    });\n    this.groupings = init?.groupings ?? new BrowserGroupingsComponentState();\n    this.send = init?.send ?? new BrowserSendComponentState();\n    this.ciphers = init?.ciphers ?? new BrowserComponentState();\n    this.sendType = init?.sendType ?? new BrowserComponentState();\n  }\n\n  static fromJSON(json: Jsonify<Account>): Account {\n    if (json == null) {\n      return null;\n    }\n\n    return Object.assign(new Account({}), json, super.fromJSON(json), {\n      settings: AccountSettings.fromJSON(json.settings),\n      groupings: BrowserGroupingsComponentState.fromJSON(json.groupings),\n      send: BrowserSendComponentState.fromJSON(json.send),\n      ciphers: BrowserComponentState.fromJSON(json.ciphers),\n      sendType: BrowserComponentState.fromJSON(json.sendType),\n    });\n  }\n}\n","import { BehaviorSubject } from \"rxjs\";\n\nimport { GlobalState } from \"@bitwarden/common/models/domain/global-state\";\nimport { StorageOptions } from \"@bitwarden/common/models/domain/storage-options\";\nimport { StateService as BaseStateService } from \"@bitwarden/common/services/state.service\";\n\nimport { browserSession, sessionSync } from \"../decorators/session-sync-observable\";\nimport { Account } from \"../models/account\";\nimport { BrowserComponentState } from \"../models/browserComponentState\";\nimport { BrowserGroupingsComponentState } from \"../models/browserGroupingsComponentState\";\nimport { BrowserSendComponentState } from \"../models/browserSendComponentState\";\n\nimport { BrowserStateService as StateServiceAbstraction } from \"./abstractions/browser-state.service\";\n\n@browserSession\nexport class BrowserStateService\n  extends BaseStateService<GlobalState, Account>\n  implements StateServiceAbstraction\n{\n  @sessionSync({\n    initializer: Account.fromJSON as any, // TODO: Remove this any when all any types are removed from Account\n    initializeAs: \"record\",\n  })\n  protected accountsSubject: BehaviorSubject<{ [userId: string]: Account }>;\n  @sessionSync({ ctor: String })\n  protected activeAccountSubject: BehaviorSubject<string>;\n  @sessionSync({ ctor: Boolean })\n  protected activeAccountUnlockedSubject: BehaviorSubject<boolean>;\n  @sessionSync({\n    initializer: Account.fromJSON as any, // TODO: Remove this any when all any types are removed from Account\n    initializeAs: \"record\",\n  })\n  protected accountDiskCache: BehaviorSubject<Record<string, Account>>;\n\n  protected accountDeserializer = Account.fromJSON;\n\n  async addAccount(account: Account) {\n    // Apply browser overrides to default account values\n    account = new Account(account);\n    await super.addAccount(account);\n  }\n\n  async getIsAuthenticated(options?: StorageOptions): Promise<boolean> {\n    // Firefox Private Mode can clash with non-Private Mode because they both read from the same onDiskOptions\n    // Check that there is an account in memory before considering the user authenticated\n    return (\n      (await super.getIsAuthenticated(options)) &&\n      (await this.getAccount(await this.defaultInMemoryOptions())) != null\n    );\n  }\n\n  async getBrowserGroupingComponentState(\n    options?: StorageOptions\n  ): Promise<BrowserGroupingsComponentState> {\n    return (\n      await this.getAccount(this.reconcileOptions(options, await this.defaultInMemoryOptions()))\n    )?.groupings;\n  }\n\n  async setBrowserGroupingComponentState(\n    value: BrowserGroupingsComponentState,\n    options?: StorageOptions\n  ): Promise<void> {\n    const account = await this.getAccount(\n      this.reconcileOptions(options, await this.defaultInMemoryOptions())\n    );\n    account.groupings = value;\n    await this.saveAccount(\n      account,\n      this.reconcileOptions(options, await this.defaultInMemoryOptions())\n    );\n  }\n\n  async getBrowserVaultItemsComponentState(\n    options?: StorageOptions\n  ): Promise<BrowserComponentState> {\n    return (\n      await this.getAccount(this.reconcileOptions(options, await this.defaultInMemoryOptions()))\n    )?.ciphers;\n  }\n\n  async setBrowserVaultItemsComponentState(\n    value: BrowserComponentState,\n    options?: StorageOptions\n  ): Promise<void> {\n    const account = await this.getAccount(\n      this.reconcileOptions(options, await this.defaultInMemoryOptions())\n    );\n    account.ciphers = value;\n    await this.saveAccount(\n      account,\n      this.reconcileOptions(options, await this.defaultInMemoryOptions())\n    );\n  }\n\n  async getBrowserSendComponentState(options?: StorageOptions): Promise<BrowserSendComponentState> {\n    return (\n      await this.getAccount(this.reconcileOptions(options, await this.defaultInMemoryOptions()))\n    )?.send;\n  }\n\n  async setBrowserSendComponentState(\n    value: BrowserSendComponentState,\n    options?: StorageOptions\n  ): Promise<void> {\n    const account = await this.getAccount(\n      this.reconcileOptions(options, await this.defaultInMemoryOptions())\n    );\n    account.send = value;\n    await this.saveAccount(\n      account,\n      this.reconcileOptions(options, await this.defaultInMemoryOptions())\n    );\n  }\n\n  async getBrowserSendTypeComponentState(options?: StorageOptions): Promise<BrowserComponentState> {\n    return (\n      await this.getAccount(this.reconcileOptions(options, await this.defaultInMemoryOptions()))\n    )?.sendType;\n  }\n\n  async setBrowserSendTypeComponentState(\n    value: BrowserComponentState,\n    options?: StorageOptions\n  ): Promise<void> {\n    const account = await this.getAccount(\n      this.reconcileOptions(options, await this.defaultInMemoryOptions())\n    );\n    account.sendType = value;\n    await this.saveAccount(\n      account,\n      this.reconcileOptions(options, await this.defaultInMemoryOptions())\n    );\n  }\n}\n","import { StateFactory } from \"@bitwarden/common/factories/stateFactory\";\nimport { GlobalState } from \"@bitwarden/common/models/domain/global-state\";\n\nimport { Account } from \"../../models/account\";\nimport { BrowserStateService } from \"../../services/browser-state.service\";\n\nimport { CachedServices, factory, FactoryOptions } from \"./factory-options\";\nimport { logServiceFactory, LogServiceInitOptions } from \"./log-service.factory\";\nimport {\n  stateMigrationServiceFactory,\n  StateMigrationServiceInitOptions,\n} from \"./state-migration-service.factory\";\nimport {\n  diskStorageServiceFactory,\n  secureStorageServiceFactory,\n  memoryStorageServiceFactory,\n  DiskStorageServiceInitOptions,\n  SecureStorageServiceInitOptions,\n  MemoryStorageServiceInitOptions,\n} from \"./storage-service.factory\";\n\ntype StateServiceFactoryOptions = FactoryOptions & {\n  stateServiceOptions: {\n    useAccountCache?: boolean;\n    stateFactory: StateFactory<GlobalState, Account>;\n  };\n};\n\nexport type StateServiceInitOptions = StateServiceFactoryOptions &\n  DiskStorageServiceInitOptions &\n  SecureStorageServiceInitOptions &\n  MemoryStorageServiceInitOptions &\n  LogServiceInitOptions &\n  StateMigrationServiceInitOptions;\n\nexport async function stateServiceFactory(\n  cache: { stateService?: BrowserStateService } & CachedServices,\n  opts: StateServiceInitOptions\n): Promise<BrowserStateService> {\n  const service = await factory(\n    cache,\n    \"stateService\",\n    opts,\n    async () =>\n      await new BrowserStateService(\n        await diskStorageServiceFactory(cache, opts),\n        await secureStorageServiceFactory(cache, opts),\n        await memoryStorageServiceFactory(cache, opts),\n        await logServiceFactory(cache, opts),\n        await stateMigrationServiceFactory(cache, opts),\n        opts.stateServiceOptions.stateFactory,\n        opts.stateServiceOptions.useAccountCache\n      )\n  );\n  service.init();\n  return service;\n}\n","import { StateFactory } from \"@bitwarden/common/factories/stateFactory\";\nimport { GlobalState } from \"@bitwarden/common/models/domain/global-state\";\nimport { StateMigrationService } from \"@bitwarden/common/services/stateMigration.service\";\n\nimport { Account } from \"../../models/account\";\n\nimport { CachedServices, factory, FactoryOptions } from \"./factory-options\";\nimport {\n  diskStorageServiceFactory,\n  DiskStorageServiceInitOptions,\n  secureStorageServiceFactory,\n  SecureStorageServiceInitOptions,\n} from \"./storage-service.factory\";\n\ntype StateMigrationServiceFactoryOptions = FactoryOptions & {\n  stateMigrationServiceOptions: {\n    stateFactory: StateFactory<GlobalState, Account>;\n  };\n};\n\nexport type StateMigrationServiceInitOptions = StateMigrationServiceFactoryOptions &\n  DiskStorageServiceInitOptions &\n  SecureStorageServiceInitOptions;\n\nexport function stateMigrationServiceFactory(\n  cache: { stateMigrationService?: StateMigrationService } & CachedServices,\n  opts: StateMigrationServiceInitOptions\n): Promise<StateMigrationService> {\n  return factory(\n    cache,\n    \"stateMigrationService\",\n    opts,\n    async () =>\n      new StateMigrationService(\n        await diskStorageServiceFactory(cache, opts),\n        await secureStorageServiceFactory(cache, opts),\n        opts.stateMigrationServiceOptions.stateFactory\n      )\n  );\n}\n","import { BrowserEnvironmentService } from \"../../services/browser-environment.service\";\n\nimport { CachedServices, factory, FactoryOptions } from \"./factory-options\";\nimport { logServiceFactory, LogServiceInitOptions } from \"./log-service.factory\";\nimport {\n  stateServiceFactory as stateServiceFactory,\n  StateServiceInitOptions,\n} from \"./state-service.factory\";\n\ntype EnvironmentServiceFactoryOptions = FactoryOptions;\n\nexport type EnvironmentServiceInitOptions = EnvironmentServiceFactoryOptions &\n  StateServiceInitOptions &\n  LogServiceInitOptions;\n\nexport function environmentServiceFactory(\n  cache: { environmentService?: BrowserEnvironmentService } & CachedServices,\n  opts: EnvironmentServiceInitOptions\n): Promise<BrowserEnvironmentService> {\n  return factory(\n    cache,\n    \"environmentService\",\n    opts,\n    async () =>\n      new BrowserEnvironmentService(\n        await stateServiceFactory(cache, opts),\n        await logServiceFactory(cache, opts)\n      )\n  );\n}\n","import { MessagingService } from \"@bitwarden/common/abstractions/messaging.service\";\n\nimport { BrowserApi } from \"../browser/browserApi\";\n\nexport default class BrowserMessagingService implements MessagingService {\n  send(subscriber: string, arg: any = {}) {\n    return BrowserApi.sendMessage(subscriber, arg);\n  }\n}\n","import { MessagingService as AbstractMessagingService } from \"@bitwarden/common/abstractions/messaging.service\";\n\nimport BrowserMessagingService from \"../../services/browserMessaging.service\";\n\nimport { CachedServices, factory, FactoryOptions } from \"./factory-options\";\n\ntype MessagingServiceFactoryOptions = FactoryOptions;\n\nexport type MessagingServiceInitOptions = MessagingServiceFactoryOptions;\n\nexport function messagingServiceFactory(\n  cache: { messagingService?: AbstractMessagingService } & CachedServices,\n  opts: MessagingServiceInitOptions\n): Promise<AbstractMessagingService> {\n  return factory(cache, \"messagingService\", opts, () => new BrowserMessagingService());\n}\n","import { PlatformUtilsService } from \"@bitwarden/common/abstractions/platformUtils.service\";\n\nimport BrowserPlatformUtilsService from \"../../services/browserPlatformUtils.service\";\n\nimport { CachedServices, factory, FactoryOptions } from \"./factory-options\";\nimport { MessagingServiceInitOptions, messagingServiceFactory } from \"./messaging-service.factory\";\n\ntype PlatformUtilsServiceFactoryOptions = FactoryOptions & {\n  platformUtilsServiceOptions: {\n    clipboardWriteCallback: (clipboardValue: string, clearMs: number) => Promise<void>;\n    biometricCallback: () => Promise<boolean>;\n    win: Window & typeof globalThis;\n  };\n};\n\nexport type PlatformUtilsServiceInitOptions = PlatformUtilsServiceFactoryOptions &\n  MessagingServiceInitOptions;\n\nexport function platformUtilsServiceFactory(\n  cache: { platformUtilsService?: PlatformUtilsService } & CachedServices,\n  opts: PlatformUtilsServiceInitOptions\n): Promise<PlatformUtilsService> {\n  return factory(\n    cache,\n    \"platformUtilsService\",\n    opts,\n    async () =>\n      new BrowserPlatformUtilsService(\n        await messagingServiceFactory(cache, opts),\n        opts.platformUtilsServiceOptions.clipboardWriteCallback,\n        opts.platformUtilsServiceOptions.biometricCallback,\n        opts.platformUtilsServiceOptions.win\n      )\n  );\n}\n","import { TokenService as AbstractTokenService } from \"@bitwarden/common/abstractions/token.service\";\nimport { TokenService } from \"@bitwarden/common/services/token.service\";\n\nimport { CachedServices, factory, FactoryOptions } from \"./factory-options\";\nimport { stateServiceFactory, StateServiceInitOptions } from \"./state-service.factory\";\n\ntype TokenServiceFactoryOptions = FactoryOptions;\n\nexport type TokenServiceInitOptions = TokenServiceFactoryOptions & StateServiceInitOptions;\n\nexport function tokenServiceFactory(\n  cache: { tokenService?: AbstractTokenService } & CachedServices,\n  opts: TokenServiceInitOptions\n): Promise<AbstractTokenService> {\n  return factory(\n    cache,\n    \"tokenService\",\n    opts,\n    async () => new TokenService(await stateServiceFactory(cache, opts))\n  );\n}\n","import { ApiService as AbstractApiService } from \"@bitwarden/common/abstractions/api.service\";\nimport { ApiService } from \"@bitwarden/common/services/api.service\";\n\nimport { AppIdServiceInitOptions, appIdServiceFactory } from \"./app-id-service.factory\";\nimport {\n  environmentServiceFactory,\n  EnvironmentServiceInitOptions,\n} from \"./environment-service.factory\";\nimport { CachedServices, factory, FactoryOptions } from \"./factory-options\";\nimport {\n  PlatformUtilsServiceInitOptions,\n  platformUtilsServiceFactory,\n} from \"./platform-utils-service.factory\";\nimport { TokenServiceInitOptions, tokenServiceFactory } from \"./token-service.factory\";\n\ntype ApiServiceFactoryOptions = FactoryOptions & {\n  apiServiceOptions: {\n    logoutCallback: (expired: boolean) => Promise<void>;\n    customUserAgent?: string;\n  };\n};\n\nexport type ApiServiceInitOptions = ApiServiceFactoryOptions &\n  TokenServiceInitOptions &\n  PlatformUtilsServiceInitOptions &\n  EnvironmentServiceInitOptions &\n  AppIdServiceInitOptions;\n\nexport function apiServiceFactory(\n  cache: { apiService?: AbstractApiService } & CachedServices,\n  opts: ApiServiceInitOptions\n): Promise<AbstractApiService> {\n  return factory(\n    cache,\n    \"apiService\",\n    opts,\n    async () =>\n      new ApiService(\n        await tokenServiceFactory(cache, opts),\n        await platformUtilsServiceFactory(cache, opts),\n        await environmentServiceFactory(cache, opts),\n        await appIdServiceFactory(cache, opts),\n        opts.apiServiceOptions.logoutCallback,\n        opts.apiServiceOptions.customUserAgent\n      )\n  );\n}\n","import { KeySuffixOptions } from \"@bitwarden/common/enums/keySuffixOptions\";\nimport { CryptoService } from \"@bitwarden/common/services/crypto.service\";\n\nexport class BrowserCryptoService extends CryptoService {\n  protected async retrieveKeyFromStorage(keySuffix: KeySuffixOptions) {\n    if (keySuffix === \"biometric\") {\n      await this.platformUtilService.authenticateBiometric();\n      return (await this.getKey())?.keyB64;\n    }\n\n    return await super.retrieveKeyFromStorage(keySuffix);\n  }\n}\n","import { CryptoService as AbstractCryptoService } from \"@bitwarden/common/abstractions/crypto.service\";\n\nimport { BrowserCryptoService } from \"../../services/browserCrypto.service\";\n\nimport {\n  cryptoFunctionServiceFactory,\n  CryptoFunctionServiceInitOptions,\n} from \"./crypto-function-service.factory\";\nimport { encryptServiceFactory, EncryptServiceInitOptions } from \"./encrypt-service.factory\";\nimport { FactoryOptions, CachedServices, factory } from \"./factory-options\";\nimport { logServiceFactory, LogServiceInitOptions } from \"./log-service.factory\";\nimport {\n  platformUtilsServiceFactory,\n  PlatformUtilsServiceInitOptions,\n} from \"./platform-utils-service.factory\";\nimport { stateServiceFactory, StateServiceInitOptions } from \"./state-service.factory\";\n\ntype CryptoServiceFactoryOptions = FactoryOptions;\n\nexport type CryptoServiceInitOptions = CryptoServiceFactoryOptions &\n  CryptoFunctionServiceInitOptions &\n  EncryptServiceInitOptions &\n  PlatformUtilsServiceInitOptions &\n  LogServiceInitOptions &\n  StateServiceInitOptions;\n\nexport function cryptoServiceFactory(\n  cache: { cryptoService?: AbstractCryptoService } & CachedServices,\n  opts: CryptoServiceInitOptions\n): Promise<AbstractCryptoService> {\n  return factory(\n    cache,\n    \"cryptoService\",\n    opts,\n    async () =>\n      new BrowserCryptoService(\n        await cryptoFunctionServiceFactory(cache, opts),\n        await encryptServiceFactory(cache, opts),\n        await platformUtilsServiceFactory(cache, opts),\n        await logServiceFactory(cache, opts),\n        await stateServiceFactory(cache, opts)\n      )\n  );\n}\n","import { I18nService as BaseI18nService } from \"@bitwarden/common/services/i18n.service\";\n\nexport default class I18nService extends BaseI18nService {\n  constructor(systemLanguage: string) {\n    super(systemLanguage, null, async (formattedLocale: string) => {\n      // Deprecated\n      const file = await fetch(this.localesDirectory + formattedLocale + \"/messages.json\");\n      return await file.json();\n    });\n\n    // Please leave 'en' where it is, as it's our fallback language in case no translation can be found\n    this.supportedTranslationLocales = [\n      \"en\",\n      \"ar\",\n      \"az\",\n      \"be\",\n      \"bg\",\n      \"bn\",\n      \"bs\",\n      \"ca\",\n      \"cs\",\n      \"da\",\n      \"de\",\n      \"el\",\n      \"en-GB\",\n      \"en-IN\",\n      \"es\",\n      \"et\",\n      \"eu\",\n      \"fa\",\n      \"fi\",\n      \"fil\",\n      \"fr\",\n      \"he\",\n      \"hi\",\n      \"hr\",\n      \"hu\",\n      \"id\",\n      \"it\",\n      \"ja\",\n      \"ka\",\n      \"km\",\n      \"kn\",\n      \"ko\",\n      \"lt\",\n      \"lv\",\n      \"ml\",\n      \"nb\",\n      \"nl\",\n      \"nn\",\n      \"pl\",\n      \"pt-BR\",\n      \"pt-PT\",\n      \"ro\",\n      \"ru\",\n      \"si\",\n      \"sk\",\n      \"sl\",\n      \"sr\",\n      \"sv\",\n      \"th\",\n      \"tr\",\n      \"uk\",\n      \"vi\",\n      \"zh-CN\",\n      \"zh-TW\",\n    ];\n  }\n\n  t(id: string, p1?: string, p2?: string, p3?: string): string {\n    return this.translate(id, p1, p2, p3);\n  }\n\n  translate(id: string, p1?: string, p2?: string, p3?: string): string {\n    if (this.localesDirectory == null) {\n      const placeholders: string[] = [];\n      if (p1 != null) {\n        placeholders.push(p1);\n      }\n      if (p2 != null) {\n        placeholders.push(p2);\n      }\n      if (p3 != null) {\n        placeholders.push(p3);\n      }\n\n      if (placeholders.length) {\n        return chrome.i18n.getMessage(id, placeholders);\n      } else {\n        return chrome.i18n.getMessage(id);\n      }\n    }\n\n    return super.translate(id, p1, p2, p3);\n  }\n}\n","import { Observable, ReplaySubject } from \"rxjs\";\n\nimport { I18nService as I18nServiceAbstraction } from \"../abstractions/i18n.service\";\n\nimport { TranslationService } from \"./translation.service\";\n\nexport class I18nService extends TranslationService implements I18nServiceAbstraction {\n  protected _locale = new ReplaySubject<string>(1);\n  private _translationLocale: string;\n  locale$: Observable<string> = this._locale.asObservable();\n\n  constructor(\n    protected systemLanguage: string,\n    protected localesDirectory: string,\n    protected getLocalesJson: (formattedLocale: string) => Promise<any>\n  ) {\n    super(systemLanguage, localesDirectory, getLocalesJson);\n  }\n\n  get translationLocale(): string {\n    return this._translationLocale;\n  }\n\n  set translationLocale(locale: string) {\n    this._translationLocale = locale;\n    this._locale.next(locale);\n  }\n}\n","import { TranslationService as TranslationServiceAbstraction } from \"../abstractions/translation.service\";\n\nexport abstract class TranslationService implements TranslationServiceAbstraction {\n  // First locale is the default (English)\n  supportedTranslationLocales: string[] = [\"en\"];\n  defaultLocale = \"en\";\n  abstract translationLocale: string;\n  collator: Intl.Collator;\n  localeNames = new Map<string, string>([\n    [\"af\", \"Afrikaans\"],\n    [\"ar\", \"العربية الفصحى\"],\n    [\"az\", \"Azərbaycanca\"],\n    [\"be\", \"Беларуская\"],\n    [\"bg\", \"български\"],\n    [\"bn\", \"বাংলা\"],\n    [\"bs\", \"bosanski jezik\"],\n    [\"ca\", \"català\"],\n    [\"cs\", \"čeština\"],\n    [\"da\", \"dansk\"],\n    [\"de\", \"Deutsch\"],\n    [\"el\", \"Ελληνικά\"],\n    [\"en\", \"English\"],\n    [\"en-GB\", \"English (British)\"],\n    [\"en-IN\", \"English (India)\"],\n    [\"eo\", \"Esperanto\"],\n    [\"es\", \"español\"],\n    [\"et\", \"eesti\"],\n    [\"eu\", \"euskara\"],\n    [\"fa\", \"فارسی\"],\n    [\"fi\", \"suomi\"],\n    [\"fil\", \"Wikang Filipino\"],\n    [\"fr\", \"français\"],\n    [\"he\", \"עברית\"],\n    [\"hi\", \"हिन्दी\"],\n    [\"hr\", \"hrvatski\"],\n    [\"hu\", \"magyar\"],\n    [\"id\", \"Bahasa Indonesia\"],\n    [\"it\", \"italiano\"],\n    [\"ja\", \"日本語\"],\n    [\"ka\", \"ქართული\"],\n    [\"km\", \"ខ្មែរ, ខេមរភាសា, ភាសាខ្មែរ\"],\n    [\"kn\", \"ಕನ್ನಡ\"],\n    [\"ko\", \"한국어\"],\n    [\"lt\", \"lietuvių kalba\"],\n    [\"lv\", \"Latvietis\"],\n    [\"me\", \"црногорски\"],\n    [\"ml\", \"മലയാളം\"],\n    [\"nb\", \"norsk (bokmål)\"],\n    [\"nl\", \"Nederlands\"],\n    [\"nn\", \"Norsk Nynorsk\"],\n    [\"pl\", \"polski\"],\n    [\"pt-BR\", \"português do Brasil\"],\n    [\"pt-PT\", \"português\"],\n    [\"ro\", \"română\"],\n    [\"ru\", \"русский\"],\n    [\"si\", \"සිංහල\"],\n    [\"sk\", \"slovenčina\"],\n    [\"sl\", \"Slovenski jezik, Slovenščina\"],\n    [\"sr\", \"Српски\"],\n    [\"sv\", \"svenska\"],\n    [\"th\", \"ไทย\"],\n    [\"tr\", \"Türkçe\"],\n    [\"uk\", \"українська\"],\n    [\"vi\", \"Tiếng Việt\"],\n    [\"zh-CN\", \"中文（中国大陆）\"],\n    [\"zh-TW\", \"中文（台灣）\"],\n  ]);\n\n  protected inited: boolean;\n  protected defaultMessages: any = {};\n  protected localeMessages: any = {};\n\n  constructor(\n    protected systemLanguage: string,\n    protected localesDirectory: string,\n    protected getLocalesJson: (formattedLocale: string) => Promise<any>\n  ) {\n    this.systemLanguage = systemLanguage.replace(\"_\", \"-\");\n  }\n\n  async init(locale?: string) {\n    if (this.inited) {\n      throw new Error(\"i18n already initialized.\");\n    }\n    if (this.supportedTranslationLocales == null || this.supportedTranslationLocales.length === 0) {\n      throw new Error(\"supportedTranslationLocales not set.\");\n    }\n\n    this.inited = true;\n    this.translationLocale = locale != null ? locale : this.systemLanguage;\n\n    try {\n      this.collator = new Intl.Collator(this.translationLocale, {\n        numeric: true,\n        sensitivity: \"base\",\n      });\n    } catch {\n      this.collator = null;\n    }\n\n    if (this.supportedTranslationLocales.indexOf(this.translationLocale) === -1) {\n      this.translationLocale = this.translationLocale.slice(0, 2);\n\n      if (this.supportedTranslationLocales.indexOf(this.translationLocale) === -1) {\n        this.translationLocale = this.defaultLocale;\n      }\n    }\n\n    if (this.localesDirectory != null) {\n      await this.loadMessages(this.translationLocale, this.localeMessages);\n      if (this.translationLocale !== this.defaultLocale) {\n        await this.loadMessages(this.defaultLocale, this.defaultMessages);\n      }\n    }\n  }\n\n  t(id: string, p1?: string, p2?: string, p3?: string): string {\n    return this.translate(id, p1, p2, p3);\n  }\n\n  translate(id: string, p1?: string | number, p2?: string | number, p3?: string | number): string {\n    let result: string;\n    // eslint-disable-next-line\n    if (this.localeMessages.hasOwnProperty(id) && this.localeMessages[id]) {\n      result = this.localeMessages[id];\n      // eslint-disable-next-line\n    } else if (this.defaultMessages.hasOwnProperty(id) && this.defaultMessages[id]) {\n      result = this.defaultMessages[id];\n    } else {\n      result = \"\";\n    }\n\n    if (result !== \"\") {\n      if (p1 != null) {\n        result = result.split(\"__$1__\").join(p1.toString());\n      }\n      if (p2 != null) {\n        result = result.split(\"__$2__\").join(p2.toString());\n      }\n      if (p3 != null) {\n        result = result.split(\"__$3__\").join(p3.toString());\n      }\n    }\n\n    return result;\n  }\n\n  protected async loadMessages(locale: string, messagesObj: any): Promise<any> {\n    const formattedLocale = locale.replace(\"-\", \"_\");\n    const locales = await this.getLocalesJson(formattedLocale);\n    for (const prop in locales) {\n      // eslint-disable-next-line\n      if (!locales.hasOwnProperty(prop)) {\n        continue;\n      }\n      messagesObj[prop] = locales[prop].message;\n\n      if (locales[prop].placeholders) {\n        for (const placeProp in locales[prop].placeholders) {\n          if (\n            !locales[prop].placeholders.hasOwnProperty(placeProp) || // eslint-disable-line\n            !locales[prop].placeholders[placeProp].content\n          ) {\n            continue;\n          }\n\n          const replaceToken = \"\\\\$\" + placeProp.toUpperCase() + \"\\\\$\";\n          let replaceContent = locales[prop].placeholders[placeProp].content;\n          if (replaceContent === \"$1\" || replaceContent === \"$2\" || replaceContent === \"$3\") {\n            replaceContent = \"__$\" + replaceContent + \"__\";\n          }\n          messagesObj[prop] = messagesObj[prop].replace(\n            new RegExp(replaceToken, \"g\"),\n            replaceContent\n          );\n        }\n      }\n    }\n  }\n}\n","import { I18nService as AbstractI18nService } from \"@bitwarden/common/abstractions/i18n.service\";\nimport { I18nService as BaseI18nService } from \"@bitwarden/common/services/i18n.service\";\n\nimport I18nService from \"../../services/i18n.service\";\n\nimport { FactoryOptions, CachedServices, factory } from \"./factory-options\";\n\ntype I18nServiceFactoryOptions = FactoryOptions & {\n  i18nServiceOptions: {\n    systemLanguage: string;\n  };\n};\n\nexport type I18nServiceInitOptions = I18nServiceFactoryOptions;\n\nexport async function i18nServiceFactory(\n  cache: { i18nService?: AbstractI18nService } & CachedServices,\n  opts: I18nServiceInitOptions\n): Promise<AbstractI18nService> {\n  const service = await factory(\n    cache,\n    \"i18nService\",\n    opts,\n    () => new I18nService(opts.i18nServiceOptions.systemLanguage)\n  );\n  if (!(service as BaseI18nService as any).inited) {\n    await (service as BaseI18nService).init();\n  }\n  return service;\n}\n","import { BehaviorSubject } from \"rxjs\";\n\nimport { Organization } from \"@bitwarden/common/models/domain/organization\";\nimport { OrganizationService } from \"@bitwarden/common/services/organization/organization.service\";\n\nimport { browserSession, sessionSync } from \"../decorators/session-sync-observable\";\n\n@browserSession\nexport class BrowserOrganizationService extends OrganizationService {\n  @sessionSync({ initializer: Organization.fromJSON, initializeAs: \"array\" })\n  protected _organizations: BehaviorSubject<Organization[]>;\n}\n","import { OrganizationService as AbstractOrganizationService } from \"@bitwarden/common/abstractions/organization/organization.service.abstraction\";\n\nimport { BrowserOrganizationService } from \"../../services/browser-organization.service\";\n\nimport { FactoryOptions, CachedServices, factory } from \"./factory-options\";\nimport { stateServiceFactory, StateServiceInitOptions } from \"./state-service.factory\";\n\ntype OrganizationServiceFactoryOptions = FactoryOptions;\n\nexport type OrganizationServiceInitOptions = OrganizationServiceFactoryOptions &\n  StateServiceInitOptions;\n\nexport function organizationServiceFactory(\n  cache: { organizationService?: AbstractOrganizationService } & CachedServices,\n  opts: OrganizationServiceInitOptions\n): Promise<AbstractOrganizationService> {\n  return factory(\n    cache,\n    \"organizationService\",\n    opts,\n    async () => new BrowserOrganizationService(await stateServiceFactory(cache, opts))\n  );\n}\n","import { AuthService as AbstractAuthService } from \"@bitwarden/common/abstractions/auth.service\";\nimport { AuthService } from \"@bitwarden/common/services/auth.service\";\n\nimport { apiServiceFactory, ApiServiceInitOptions } from \"./api-service.factory\";\nimport { appIdServiceFactory } from \"./app-id-service.factory\";\nimport { cryptoServiceFactory, CryptoServiceInitOptions } from \"./crypto-service.factory\";\nimport { EncryptServiceInitOptions, encryptServiceFactory } from \"./encrypt-service.factory\";\nimport {\n  environmentServiceFactory,\n  EnvironmentServiceInitOptions,\n} from \"./environment-service.factory\";\nimport { CachedServices, factory, FactoryOptions } from \"./factory-options\";\nimport { I18nServiceInitOptions, i18nServiceFactory } from \"./i18n-service.factory\";\nimport {\n  KeyConnectorServiceInitOptions,\n  keyConnectorServiceFactory,\n} from \"./key-connector-service.factory\";\nimport { logServiceFactory, LogServiceInitOptions } from \"./log-service.factory\";\nimport { MessagingServiceInitOptions, messagingServiceFactory } from \"./messaging-service.factory\";\nimport {\n  PlatformUtilsServiceInitOptions,\n  platformUtilsServiceFactory,\n} from \"./platform-utils-service.factory\";\nimport { stateServiceFactory, StateServiceInitOptions } from \"./state-service.factory\";\nimport { TokenServiceInitOptions, tokenServiceFactory } from \"./token-service.factory\";\nimport { TwoFactorServiceInitOptions, twoFactorServiceFactory } from \"./two-factor-service.factory\";\n\ntype AuthServiceFactoyOptions = FactoryOptions;\n\nexport type AuthServiceInitOptions = AuthServiceFactoyOptions &\n  CryptoServiceInitOptions &\n  ApiServiceInitOptions &\n  TokenServiceInitOptions &\n  PlatformUtilsServiceInitOptions &\n  MessagingServiceInitOptions &\n  LogServiceInitOptions &\n  KeyConnectorServiceInitOptions &\n  EnvironmentServiceInitOptions &\n  StateServiceInitOptions &\n  TwoFactorServiceInitOptions &\n  I18nServiceInitOptions &\n  EncryptServiceInitOptions;\n\nexport function authServiceFactory(\n  cache: { authService?: AbstractAuthService } & CachedServices,\n  opts: AuthServiceInitOptions\n): Promise<AbstractAuthService> {\n  return factory(\n    cache,\n    \"authService\",\n    opts,\n    async () =>\n      new AuthService(\n        await cryptoServiceFactory(cache, opts),\n        await apiServiceFactory(cache, opts),\n        await tokenServiceFactory(cache, opts),\n        await appIdServiceFactory(cache, opts),\n        await platformUtilsServiceFactory(cache, opts),\n        await messagingServiceFactory(cache, opts),\n        await logServiceFactory(cache, opts),\n        await keyConnectorServiceFactory(cache, opts),\n        await environmentServiceFactory(cache, opts),\n        await stateServiceFactory(cache, opts),\n        await twoFactorServiceFactory(cache, opts),\n        await i18nServiceFactory(cache, opts),\n        await encryptServiceFactory(cache, opts)\n      )\n  );\n}\n","import { KeyConnectorService as AbstractKeyConnectorService } from \"@bitwarden/common/abstractions/keyConnector.service\";\nimport { KeyConnectorService } from \"@bitwarden/common/services/keyConnector.service\";\n\nimport { apiServiceFactory, ApiServiceInitOptions } from \"./api-service.factory\";\nimport {\n  cryptoFunctionServiceFactory,\n  CryptoFunctionServiceInitOptions,\n} from \"./crypto-function-service.factory\";\nimport { CryptoServiceInitOptions, cryptoServiceFactory } from \"./crypto-service.factory\";\nimport { FactoryOptions, CachedServices, factory } from \"./factory-options\";\nimport { logServiceFactory, LogServiceInitOptions } from \"./log-service.factory\";\nimport {\n  OrganizationServiceInitOptions,\n  organizationServiceFactory,\n} from \"./organization-service.factory\";\nimport { stateServiceFactory, StateServiceInitOptions } from \"./state-service.factory\";\nimport { tokenServiceFactory, TokenServiceInitOptions } from \"./token-service.factory\";\n\ntype KeyConnectorServiceFactoryOptions = FactoryOptions & {\n  keyConnectorServiceOptions: {\n    logoutCallback: (expired: boolean, userId?: string) => Promise<void>;\n  };\n};\n\nexport type KeyConnectorServiceInitOptions = KeyConnectorServiceFactoryOptions &\n  StateServiceInitOptions &\n  CryptoServiceInitOptions &\n  ApiServiceInitOptions &\n  TokenServiceInitOptions &\n  LogServiceInitOptions &\n  OrganizationServiceInitOptions &\n  CryptoFunctionServiceInitOptions;\n\nexport function keyConnectorServiceFactory(\n  cache: { keyConnectorService?: AbstractKeyConnectorService } & CachedServices,\n  opts: KeyConnectorServiceInitOptions\n): Promise<AbstractKeyConnectorService> {\n  return factory(\n    cache,\n    \"keyConnectorService\",\n    opts,\n    async () =>\n      new KeyConnectorService(\n        await stateServiceFactory(cache, opts),\n        await cryptoServiceFactory(cache, opts),\n        await apiServiceFactory(cache, opts),\n        await tokenServiceFactory(cache, opts),\n        await logServiceFactory(cache, opts),\n        await organizationServiceFactory(cache, opts),\n        await cryptoFunctionServiceFactory(cache, opts),\n        opts.keyConnectorServiceOptions.logoutCallback\n      )\n  );\n}\n","import { TwoFactorService as AbstractTwoFactorService } from \"@bitwarden/common/abstractions/twoFactor.service\";\nimport { TwoFactorService } from \"@bitwarden/common/services/twoFactor.service\";\n\nimport { FactoryOptions, CachedServices, factory } from \"./factory-options\";\nimport { I18nServiceInitOptions, i18nServiceFactory } from \"./i18n-service.factory\";\nimport {\n  platformUtilsServiceFactory,\n  PlatformUtilsServiceInitOptions,\n} from \"./platform-utils-service.factory\";\n\ntype TwoFactorServiceFactoryOptions = FactoryOptions;\n\nexport type TwoFactorServiceInitOptions = TwoFactorServiceFactoryOptions &\n  I18nServiceInitOptions &\n  PlatformUtilsServiceInitOptions;\n\nexport async function twoFactorServiceFactory(\n  cache: { twoFactorService?: AbstractTwoFactorService } & CachedServices,\n  opts: TwoFactorServiceInitOptions\n): Promise<AbstractTwoFactorService> {\n  const service = await factory(\n    cache,\n    \"twoFactorService\",\n    opts,\n    async () =>\n      new TwoFactorService(\n        await i18nServiceFactory(cache, opts),\n        await platformUtilsServiceFactory(cache, opts)\n      )\n  );\n  service.init();\n  return service;\n}\n","import { BehaviorSubject } from \"rxjs\";\n\nimport { AccountSettingsSettings } from \"@bitwarden/common/models/domain/account\";\nimport { SettingsService } from \"@bitwarden/common/services/settings.service\";\n\nimport { sessionSync } from \"../decorators/session-sync-observable\";\n\nexport class BrowserSettingsService extends SettingsService {\n  @sessionSync({ initializer: (obj: string[][]) => obj })\n  protected _settings: BehaviorSubject<AccountSettingsSettings>;\n}\n","import { SearchService } from \"@bitwarden/common/abstractions/search.service\";\nimport { CipherService as AbstractCipherService } from \"@bitwarden/common/vault/abstractions/cipher.service\";\nimport { CipherService } from \"@bitwarden/common/vault/services/cipher.service\";\n\nimport {\n  apiServiceFactory,\n  ApiServiceInitOptions,\n} from \"../../../background/service_factories/api-service.factory\";\nimport {\n  cryptoServiceFactory,\n  CryptoServiceInitOptions,\n} from \"../../../background/service_factories/crypto-service.factory\";\nimport {\n  encryptServiceFactory,\n  EncryptServiceInitOptions,\n} from \"../../../background/service_factories/encrypt-service.factory\";\nimport {\n  CachedServices,\n  factory,\n  FactoryOptions,\n} from \"../../../background/service_factories/factory-options\";\nimport {\n  FileUploadServiceInitOptions,\n  fileUploadServiceFactory,\n} from \"../../../background/service_factories/file-upload-service.factory\";\nimport {\n  i18nServiceFactory,\n  I18nServiceInitOptions,\n} from \"../../../background/service_factories/i18n-service.factory\";\nimport {\n  logServiceFactory,\n  LogServiceInitOptions,\n} from \"../../../background/service_factories/log-service.factory\";\nimport {\n  SettingsServiceInitOptions,\n  settingsServiceFactory,\n} from \"../../../background/service_factories/settings-service.factory\";\nimport {\n  stateServiceFactory,\n  StateServiceInitOptions,\n} from \"../../../background/service_factories/state-service.factory\";\n\ntype CipherServiceFactoryOptions = FactoryOptions & {\n  cipherServiceOptions?: {\n    searchServiceFactory?: () => SearchService;\n  };\n};\n\nexport type CipherServiceInitOptions = CipherServiceFactoryOptions &\n  CryptoServiceInitOptions &\n  SettingsServiceInitOptions &\n  ApiServiceInitOptions &\n  FileUploadServiceInitOptions &\n  I18nServiceInitOptions &\n  LogServiceInitOptions &\n  StateServiceInitOptions &\n  EncryptServiceInitOptions;\n\nexport function cipherServiceFactory(\n  cache: { cipherService?: AbstractCipherService } & CachedServices,\n  opts: CipherServiceInitOptions\n): Promise<AbstractCipherService> {\n  return factory(\n    cache,\n    \"cipherService\",\n    opts,\n    async () =>\n      new CipherService(\n        await cryptoServiceFactory(cache, opts),\n        await settingsServiceFactory(cache, opts),\n        await apiServiceFactory(cache, opts),\n        await fileUploadServiceFactory(cache, opts),\n        await i18nServiceFactory(cache, opts),\n        opts.cipherServiceOptions?.searchServiceFactory === undefined\n          ? () => cache.searchService as SearchService\n          : opts.cipherServiceOptions.searchServiceFactory,\n        await logServiceFactory(cache, opts),\n        await stateServiceFactory(cache, opts),\n        await encryptServiceFactory(cache, opts)\n      )\n  );\n}\n","import { SettingsService as AbstractSettingsService } from \"@bitwarden/common/abstractions/settings.service\";\n\nimport { BrowserSettingsService } from \"../../services/browser-settings.service\";\n\nimport { FactoryOptions, CachedServices, factory } from \"./factory-options\";\nimport { stateServiceFactory, StateServiceInitOptions } from \"./state-service.factory\";\n\ntype SettingsServiceFactoryOptions = FactoryOptions;\n\nexport type SettingsServiceInitOptions = SettingsServiceFactoryOptions & StateServiceInitOptions;\n\nexport function settingsServiceFactory(\n  cache: { settingsService?: AbstractSettingsService } & CachedServices,\n  opts: SettingsServiceInitOptions\n): Promise<AbstractSettingsService> {\n  return factory(\n    cache,\n    \"settingsService\",\n    opts,\n    async () => new BrowserSettingsService(await stateServiceFactory(cache, opts))\n  );\n}\n","import { FileUploadService as AbstractFileUploadService } from \"@bitwarden/common/abstractions/fileUpload.service\";\nimport { FileUploadService } from \"@bitwarden/common/services/fileUpload.service\";\n\nimport { apiServiceFactory, ApiServiceInitOptions } from \"./api-service.factory\";\nimport { FactoryOptions, CachedServices, factory } from \"./factory-options\";\nimport { logServiceFactory, LogServiceInitOptions } from \"./log-service.factory\";\n\ntype FileUploadServiceFactoyOptions = FactoryOptions;\n\nexport type FileUploadServiceInitOptions = FileUploadServiceFactoyOptions &\n  LogServiceInitOptions &\n  ApiServiceInitOptions;\n\nexport function fileUploadServiceFactory(\n  cache: { fileUploadService?: AbstractFileUploadService } & CachedServices,\n  opts: FileUploadServiceInitOptions\n): Promise<AbstractFileUploadService> {\n  return factory(\n    cache,\n    \"fileUploadService\",\n    opts,\n    async () =>\n      new FileUploadService(\n        await logServiceFactory(cache, opts),\n        await apiServiceFactory(cache, opts)\n      )\n  );\n}\n","import { SearchService as AbstractSearchService } from \"@bitwarden/common/abstractions/search.service\";\nimport { SearchService } from \"@bitwarden/common/services/search.service\";\n\nimport {\n  cipherServiceFactory,\n  CipherServiceInitOptions,\n} from \"../../vault/background/service_factories/cipher-service.factory\";\n\nimport { CachedServices, factory, FactoryOptions } from \"./factory-options\";\nimport { i18nServiceFactory, I18nServiceInitOptions } from \"./i18n-service.factory\";\nimport { logServiceFactory, LogServiceInitOptions } from \"./log-service.factory\";\n\ntype SearchServiceFactoryOptions = FactoryOptions;\n\nexport type SearchServiceInitOptions = SearchServiceFactoryOptions &\n  CipherServiceInitOptions &\n  LogServiceInitOptions &\n  I18nServiceInitOptions;\n\nexport function searchServiceFactory(\n  cache: { searchService?: AbstractSearchService } & CachedServices,\n  opts: SearchServiceInitOptions\n): Promise<AbstractSearchService> {\n  return factory(\n    cache,\n    \"searchService\",\n    opts,\n    async () =>\n      new SearchService(\n        await cipherServiceFactory(cache, opts),\n        await logServiceFactory(cache, opts),\n        await i18nServiceFactory(cache, opts)\n      )\n  );\n}\n","import { I18nService } from \"@bitwarden/common/abstractions/i18n.service\";\nimport { LogService } from \"@bitwarden/common/abstractions/log.service\";\nimport { StateFactory } from \"@bitwarden/common/factories/stateFactory\";\nimport { Utils } from \"@bitwarden/common/misc/utils\";\nimport { GlobalState } from \"@bitwarden/common/models/domain/global-state\";\nimport { CipherType } from \"@bitwarden/common/vault/enums/cipher-type\";\nimport { CipherView } from \"@bitwarden/common/vault/models/view/cipher.view\";\n\nimport { CachedServices } from \"../../background/service_factories/factory-options\";\nimport {\n  i18nServiceFactory,\n  I18nServiceInitOptions,\n} from \"../../background/service_factories/i18n-service.factory\";\nimport {\n  logServiceFactory,\n  LogServiceInitOptions,\n} from \"../../background/service_factories/log-service.factory\";\nimport {\n  stateServiceFactory,\n  StateServiceInitOptions,\n} from \"../../background/service_factories/state-service.factory\";\nimport { Account } from \"../../models/account\";\nimport { BrowserStateService } from \"../../services/abstractions/browser-state.service\";\n\nexport const ROOT_ID = \"root\";\n\nexport const AUTOFILL_ID = \"autofill\";\nexport const COPY_USERNAME_ID = \"copy-username\";\nexport const COPY_PASSWORD_ID = \"copy-password\";\nexport const COPY_VERIFICATIONCODE_ID = \"copy-totp\";\nexport const COPY_IDENTIFIER_ID = \"copy-identifier\";\n\nconst SEPARATOR_ID = \"separator\";\nexport const GENERATE_PASSWORD_ID = \"generate-password\";\n\nexport const NOOP_COMMAND_SUFFIX = \"noop\";\n\nexport class MainContextMenuHandler {\n  //\n  private initRunning = false;\n\n  create: (options: chrome.contextMenus.CreateProperties) => Promise<void>;\n\n  constructor(\n    private stateService: BrowserStateService,\n    private i18nService: I18nService,\n    private logService: LogService\n  ) {\n    if (chrome.contextMenus) {\n      this.create = (options) => {\n        return new Promise<void>((resolve, reject) => {\n          chrome.contextMenus.create(options, () => {\n            if (chrome.runtime.lastError) {\n              reject(chrome.runtime.lastError);\n              return;\n            }\n            resolve();\n          });\n        });\n      };\n    } else {\n      this.create = (_options) => Promise.resolve();\n    }\n  }\n\n  static async mv3Create(cachedServices: CachedServices) {\n    const stateFactory = new StateFactory(GlobalState, Account);\n    const serviceOptions: StateServiceInitOptions & I18nServiceInitOptions & LogServiceInitOptions =\n      {\n        cryptoFunctionServiceOptions: {\n          win: self,\n        },\n        encryptServiceOptions: {\n          logMacFailures: false,\n        },\n        i18nServiceOptions: {\n          systemLanguage: chrome.i18n.getUILanguage(),\n        },\n        logServiceOptions: {\n          isDev: false,\n        },\n        stateMigrationServiceOptions: {\n          stateFactory: stateFactory,\n        },\n        stateServiceOptions: {\n          stateFactory: stateFactory,\n        },\n      };\n\n    return new MainContextMenuHandler(\n      await stateServiceFactory(cachedServices, serviceOptions),\n      await i18nServiceFactory(cachedServices, serviceOptions),\n      await logServiceFactory(cachedServices, serviceOptions)\n    );\n  }\n\n  /**\n   *\n   * @returns a boolean showing whether or not items were created\n   */\n  async init(): Promise<boolean> {\n    const menuDisabled = await this.stateService.getDisableContextMenuItem();\n    if (menuDisabled) {\n      await MainContextMenuHandler.removeAll();\n      return false;\n    }\n\n    if (this.initRunning) {\n      return true;\n    }\n    this.initRunning = true;\n\n    try {\n      const create = async (options: Omit<chrome.contextMenus.CreateProperties, \"contexts\">) => {\n        await this.create({ ...options, contexts: [\"all\"] });\n      };\n\n      await create({\n        id: ROOT_ID,\n        title: \"Bitwarden\",\n      });\n\n      await create({\n        id: AUTOFILL_ID,\n        parentId: ROOT_ID,\n        title: this.i18nService.t(\"autoFill\"),\n      });\n\n      await create({\n        id: COPY_USERNAME_ID,\n        parentId: ROOT_ID,\n        title: this.i18nService.t(\"copyUsername\"),\n      });\n\n      await create({\n        id: COPY_PASSWORD_ID,\n        parentId: ROOT_ID,\n        title: this.i18nService.t(\"copyPassword\"),\n      });\n\n      if (await this.stateService.getCanAccessPremium()) {\n        await create({\n          id: COPY_VERIFICATIONCODE_ID,\n          parentId: ROOT_ID,\n          title: this.i18nService.t(\"copyVerificationCode\"),\n        });\n      }\n\n      await create({\n        id: SEPARATOR_ID,\n        type: \"separator\",\n        parentId: ROOT_ID,\n      });\n\n      await create({\n        id: GENERATE_PASSWORD_ID,\n        parentId: ROOT_ID,\n        title: this.i18nService.t(\"generatePasswordCopied\"),\n      });\n\n      await create({\n        id: COPY_IDENTIFIER_ID,\n        parentId: ROOT_ID,\n        title: this.i18nService.t(\"copyElementIdentifier\"),\n      });\n    } catch (error) {\n      this.logService.warning(error.message);\n    } finally {\n      this.initRunning = false;\n    }\n    return true;\n  }\n\n  static async removeAll() {\n    return new Promise<void>((resolve, reject) => {\n      chrome.contextMenus.removeAll(() => {\n        if (chrome.runtime.lastError) {\n          reject(chrome.runtime.lastError);\n          return;\n        }\n\n        resolve();\n      });\n    });\n  }\n\n  static remove(menuItemId: string) {\n    return new Promise<void>((resolve, reject) => {\n      chrome.contextMenus.remove(menuItemId, () => {\n        if (chrome.runtime.lastError) {\n          reject(chrome.runtime.lastError);\n          return;\n        }\n\n        resolve();\n      });\n    });\n  }\n\n  async loadOptions(title: string, id: string, url: string, cipher?: CipherView | undefined) {\n    if (cipher != null && cipher.type !== CipherType.Login) {\n      return;\n    }\n\n    try {\n      const sanitizedTitle = MainContextMenuHandler.sanitizeContextMenuTitle(title);\n\n      const createChildItem = async (parent: string) => {\n        const menuItemId = `${parent}_${id}`;\n        return await this.create({\n          type: \"normal\",\n          id: menuItemId,\n          parentId: parent,\n          title: sanitizedTitle,\n          contexts: [\"all\"],\n        });\n      };\n\n      if (cipher == null || !Utils.isNullOrEmpty(cipher.login.password)) {\n        await createChildItem(AUTOFILL_ID);\n        if (cipher?.viewPassword ?? true) {\n          await createChildItem(COPY_PASSWORD_ID);\n        }\n      }\n\n      if (cipher == null || !Utils.isNullOrEmpty(cipher.login.username)) {\n        await createChildItem(COPY_USERNAME_ID);\n      }\n\n      const canAccessPremium = await this.stateService.getCanAccessPremium();\n      if (canAccessPremium && (cipher == null || !Utils.isNullOrEmpty(cipher.login.totp))) {\n        await createChildItem(COPY_VERIFICATIONCODE_ID);\n      }\n    } catch (error) {\n      this.logService.warning(error.message);\n    }\n  }\n\n  static sanitizeContextMenuTitle(title: string): string {\n    return title.replace(/&/g, \"&&\");\n  }\n\n  async noAccess() {\n    if (await this.init()) {\n      const authed = await this.stateService.getIsAuthenticated();\n      await this.loadOptions(\n        this.i18nService.t(authed ? \"unlockVaultMenu\" : \"loginToVaultMenu\"),\n        NOOP_COMMAND_SUFFIX,\n        \"<all_urls>\"\n      );\n    }\n  }\n\n  async noLogins(url: string) {\n    await this.loadOptions(this.i18nService.t(\"noMatchingLogins\"), NOOP_COMMAND_SUFFIX, url);\n  }\n}\n","import { AuthService } from \"@bitwarden/common/abstractions/auth.service\";\nimport { SearchService } from \"@bitwarden/common/abstractions/search.service\";\nimport { AuthenticationStatus } from \"@bitwarden/common/enums/authenticationStatus\";\nimport { StateFactory } from \"@bitwarden/common/factories/stateFactory\";\nimport { Utils } from \"@bitwarden/common/misc/utils\";\nimport { GlobalState } from \"@bitwarden/common/models/domain/global-state\";\nimport { CipherService } from \"@bitwarden/common/vault/abstractions/cipher.service\";\nimport { CipherRepromptType } from \"@bitwarden/common/vault/enums/cipher-reprompt-type\";\nimport { CipherType } from \"@bitwarden/common/vault/enums/cipher-type\";\nimport { CipherView } from \"@bitwarden/common/vault/models/view/cipher.view\";\n\nimport {\n  authServiceFactory,\n  AuthServiceInitOptions,\n} from \"../../background/service_factories/auth-service.factory\";\nimport { CachedServices } from \"../../background/service_factories/factory-options\";\nimport { searchServiceFactory } from \"../../background/service_factories/search-service.factory\";\nimport { BrowserApi } from \"../../browser/browserApi\";\nimport { Account } from \"../../models/account\";\nimport {\n  cipherServiceFactory,\n  CipherServiceInitOptions,\n} from \"../../vault/background/service_factories/cipher-service.factory\";\n\nimport { MainContextMenuHandler } from \"./main-context-menu-handler\";\n\nconst NOT_IMPLEMENTED = (..._args: unknown[]) => Promise.resolve();\n\nconst LISTENED_TO_COMMANDS = [\n  \"loggedIn\",\n  \"unlocked\",\n  \"syncCompleted\",\n  \"bgUpdateContextMenu\",\n  \"editedCipher\",\n  \"addedCipher\",\n  \"deletedCipher\",\n];\n\nexport class CipherContextMenuHandler {\n  constructor(\n    private mainContextMenuHandler: MainContextMenuHandler,\n    private authService: AuthService,\n    private cipherService: CipherService\n  ) {}\n\n  static async create(cachedServices: CachedServices) {\n    const stateFactory = new StateFactory(GlobalState, Account);\n    let searchService: SearchService | null = null;\n    const serviceOptions: AuthServiceInitOptions & CipherServiceInitOptions = {\n      apiServiceOptions: {\n        logoutCallback: NOT_IMPLEMENTED,\n      },\n      cipherServiceOptions: {\n        searchServiceFactory: () => searchService,\n      },\n      cryptoFunctionServiceOptions: {\n        win: self,\n      },\n      encryptServiceOptions: {\n        logMacFailures: false,\n      },\n      i18nServiceOptions: {\n        systemLanguage: chrome.i18n.getUILanguage(),\n      },\n      keyConnectorServiceOptions: {\n        logoutCallback: NOT_IMPLEMENTED,\n      },\n      logServiceOptions: {\n        isDev: false,\n      },\n      platformUtilsServiceOptions: {\n        biometricCallback: () => Promise.resolve(false),\n        clipboardWriteCallback: NOT_IMPLEMENTED,\n        win: self,\n      },\n      stateMigrationServiceOptions: {\n        stateFactory: stateFactory,\n      },\n      stateServiceOptions: {\n        stateFactory: stateFactory,\n      },\n    };\n    searchService = await searchServiceFactory(cachedServices, serviceOptions);\n    return new CipherContextMenuHandler(\n      await MainContextMenuHandler.mv3Create(cachedServices),\n      await authServiceFactory(cachedServices, serviceOptions),\n      await cipherServiceFactory(cachedServices, serviceOptions)\n    );\n  }\n\n  static async tabsOnActivatedListener(\n    activeInfo: chrome.tabs.TabActiveInfo,\n    serviceCache: CachedServices\n  ) {\n    const cipherContextMenuHandler = await CipherContextMenuHandler.create(serviceCache);\n    const tab = await BrowserApi.getTab(activeInfo.tabId);\n    await cipherContextMenuHandler.update(tab.url);\n  }\n\n  static async tabsOnReplacedListener(\n    addedTabId: number,\n    removedTabId: number,\n    serviceCache: CachedServices\n  ) {\n    const cipherContextMenuHandler = await CipherContextMenuHandler.create(serviceCache);\n    const tab = await BrowserApi.getTab(addedTabId);\n    await cipherContextMenuHandler.update(tab.url);\n  }\n\n  static async tabsOnUpdatedListener(\n    tabId: number,\n    changeInfo: chrome.tabs.TabChangeInfo,\n    tab: chrome.tabs.Tab,\n    serviceCache: CachedServices\n  ) {\n    if (changeInfo.status !== \"complete\") {\n      return;\n    }\n    const cipherContextMenuHandler = await CipherContextMenuHandler.create(serviceCache);\n    await cipherContextMenuHandler.update(tab.url);\n  }\n\n  static async messageListener(\n    message: { command: string },\n    sender: chrome.runtime.MessageSender,\n    cachedServices: CachedServices\n  ) {\n    if (!CipherContextMenuHandler.shouldListen(message)) {\n      return;\n    }\n    const cipherContextMenuHandler = await CipherContextMenuHandler.create(cachedServices);\n    await cipherContextMenuHandler.messageListener(message);\n  }\n\n  private static shouldListen(message: { command: string }) {\n    return LISTENED_TO_COMMANDS.includes(message.command);\n  }\n\n  async messageListener(message: { command: string }, sender?: chrome.runtime.MessageSender) {\n    if (!CipherContextMenuHandler.shouldListen(message)) {\n      return;\n    }\n\n    const activeTabs = await BrowserApi.getActiveTabs();\n    if (!activeTabs || activeTabs.length === 0) {\n      return;\n    }\n\n    await this.update(activeTabs[0].url);\n  }\n\n  async update(url: string) {\n    const authStatus = await this.authService.getAuthStatus();\n    await MainContextMenuHandler.removeAll();\n    if (authStatus !== AuthenticationStatus.Unlocked) {\n      // Should I pass in the auth status or even have two seperate methods for this\n      // on MainContextMenuHandler\n      await this.mainContextMenuHandler.noAccess();\n      return;\n    }\n\n    const menuEnabled = await this.mainContextMenuHandler.init();\n    if (!menuEnabled) {\n      return;\n    }\n\n    const ciphers = await this.cipherService.getAllDecryptedForUrl(url);\n    ciphers.sort((a, b) => this.cipherService.sortCiphersByLastUsedThenName(a, b));\n\n    if (ciphers.length === 0) {\n      await this.mainContextMenuHandler.noLogins(url);\n      return;\n    }\n\n    for (const cipher of ciphers) {\n      await this.updateForCipher(url, cipher);\n    }\n  }\n\n  private async updateForCipher(url: string, cipher: CipherView) {\n    if (\n      cipher == null ||\n      cipher.type !== CipherType.Login ||\n      cipher.reprompt !== CipherRepromptType.None\n    ) {\n      return;\n    }\n\n    let title = cipher.name;\n    if (!Utils.isNullOrEmpty(title)) {\n      title += ` (${cipher.login.username})`;\n    }\n\n    await this.mainContextMenuHandler.loadOptions(title, cipher.id, url, cipher);\n  }\n}\n","import { EventCollectionService as AbstractEventCollectionService } from \"@bitwarden/common/abstractions/event/event-collection.service\";\nimport { EventCollectionService } from \"@bitwarden/common/services/event/event-collection.service\";\n\nimport {\n  cipherServiceFactory,\n  CipherServiceInitOptions,\n} from \"../../vault/background/service_factories/cipher-service.factory\";\n\nimport {\n  eventUploadServiceFactory,\n  EventUploadServiceInitOptions,\n} from \"./event-upload-service.factory\";\nimport { FactoryOptions, CachedServices, factory } from \"./factory-options\";\nimport {\n  organizationServiceFactory,\n  OrganizationServiceInitOptions,\n} from \"./organization-service.factory\";\nimport { stateServiceFactory, StateServiceInitOptions } from \"./state-service.factory\";\n\ntype EventCollectionServiceOptions = FactoryOptions;\n\nexport type EventCollectionServiceInitOptions = EventCollectionServiceOptions &\n  CipherServiceInitOptions &\n  StateServiceInitOptions &\n  OrganizationServiceInitOptions &\n  EventUploadServiceInitOptions;\n\nexport function eventCollectionServiceFactory(\n  cache: { eventCollectionService?: AbstractEventCollectionService } & CachedServices,\n  opts: EventCollectionServiceInitOptions\n): Promise<AbstractEventCollectionService> {\n  return factory(\n    cache,\n    \"eventCollectionService\",\n    opts,\n    async () =>\n      new EventCollectionService(\n        await cipherServiceFactory(cache, opts),\n        await stateServiceFactory(cache, opts),\n        await organizationServiceFactory(cache, opts),\n        await eventUploadServiceFactory(cache, opts)\n      )\n  );\n}\n","import { EventUploadService as AbstractEventUploadService } from \"@bitwarden/common/abstractions/event/event-upload.service\";\nimport { EventUploadService } from \"@bitwarden/common/services/event/event-upload.service\";\n\nimport { apiServiceFactory, ApiServiceInitOptions } from \"./api-service.factory\";\nimport { FactoryOptions, CachedServices, factory } from \"./factory-options\";\nimport { logServiceFactory, LogServiceInitOptions } from \"./log-service.factory\";\nimport { stateServiceFactory, StateServiceInitOptions } from \"./state-service.factory\";\n\ntype EventUploadServiceOptions = FactoryOptions;\n\nexport type EventUploadServiceInitOptions = EventUploadServiceOptions &\n  ApiServiceInitOptions &\n  StateServiceInitOptions &\n  LogServiceInitOptions;\n\nexport function eventUploadServiceFactory(\n  cache: { eventUploadService?: AbstractEventUploadService } & CachedServices,\n  opts: EventUploadServiceInitOptions\n): Promise<AbstractEventUploadService> {\n  return factory(\n    cache,\n    \"eventUploadService\",\n    opts,\n    async () =>\n      new EventUploadService(\n        await apiServiceFactory(cache, opts),\n        await stateServiceFactory(cache, opts),\n        await logServiceFactory(cache, opts)\n      )\n  );\n}\n","import { BehaviorSubject } from \"rxjs\";\n\nimport { Policy } from \"@bitwarden/common/models/domain/policy\";\nimport { PolicyService } from \"@bitwarden/common/services/policy/policy.service\";\n\nimport { browserSession, sessionSync } from \"../decorators/session-sync-observable\";\n\n@browserSession\nexport class BrowserPolicyService extends PolicyService {\n  @sessionSync({ ctor: Policy, initializeAs: \"array\" })\n  protected _policies: BehaviorSubject<Policy[]>;\n}\n","import { PasswordGenerationService as AbstractPasswordGenerationService } from \"@bitwarden/common/abstractions/passwordGeneration.service\";\nimport { PasswordGenerationService } from \"@bitwarden/common/services/passwordGeneration.service\";\n\nimport { cryptoServiceFactory, CryptoServiceInitOptions } from \"./crypto-service.factory\";\nimport { CachedServices, factory, FactoryOptions } from \"./factory-options\";\nimport { policyServiceFactory, PolicyServiceInitOptions } from \"./policy-service.factory\";\nimport { stateServiceFactory, StateServiceInitOptions } from \"./state-service.factory\";\n\ntype PasswordGenerationServiceFactoryOptions = FactoryOptions;\n\nexport type PasswordGenerationServiceInitOptions = PasswordGenerationServiceFactoryOptions &\n  CryptoServiceInitOptions &\n  PolicyServiceInitOptions &\n  StateServiceInitOptions;\n\nexport function passwordGenerationServiceFactory(\n  cache: { passwordGenerationService?: AbstractPasswordGenerationService } & CachedServices,\n  opts: PasswordGenerationServiceInitOptions\n): Promise<AbstractPasswordGenerationService> {\n  return factory(\n    cache,\n    \"passwordGenerationService\",\n    opts,\n    async () =>\n      new PasswordGenerationService(\n        await cryptoServiceFactory(cache, opts),\n        await policyServiceFactory(cache, opts),\n        await stateServiceFactory(cache, opts)\n      )\n  );\n}\n","import { PolicyService as AbstractPolicyService } from \"@bitwarden/common/abstractions/policy/policy.service.abstraction\";\n\nimport { BrowserPolicyService } from \"../../services/browser-policy.service\";\n\nimport { CachedServices, factory, FactoryOptions } from \"./factory-options\";\nimport {\n  organizationServiceFactory,\n  OrganizationServiceInitOptions,\n} from \"./organization-service.factory\";\nimport {\n  stateServiceFactory as stateServiceFactory,\n  StateServiceInitOptions,\n} from \"./state-service.factory\";\n\ntype PolicyServiceFactoryOptions = FactoryOptions;\n\nexport type PolicyServiceInitOptions = PolicyServiceFactoryOptions &\n  StateServiceInitOptions &\n  OrganizationServiceInitOptions;\n\nexport function policyServiceFactory(\n  cache: { policyService?: AbstractPolicyService } & CachedServices,\n  opts: PolicyServiceInitOptions\n): Promise<AbstractPolicyService> {\n  return factory(\n    cache,\n    \"policyService\",\n    opts,\n    async () =>\n      new BrowserPolicyService(\n        await stateServiceFactory(cache, opts),\n        await organizationServiceFactory(cache, opts)\n      )\n  );\n}\n","import { TotpService as AbstractTotpService } from \"@bitwarden/common/abstractions/totp.service\";\nimport { TotpService } from \"@bitwarden/common/services/totp.service\";\n\nimport {\n  cryptoFunctionServiceFactory,\n  CryptoFunctionServiceInitOptions,\n} from \"./crypto-function-service.factory\";\nimport { CachedServices, factory, FactoryOptions } from \"./factory-options\";\nimport { logServiceFactory, LogServiceInitOptions } from \"./log-service.factory\";\n\ntype TotpServiceOptions = FactoryOptions;\n\nexport type TotpServiceInitOptions = TotpServiceOptions &\n  CryptoFunctionServiceInitOptions &\n  LogServiceInitOptions;\n\nexport function totpServiceFactory(\n  cache: { totpService?: AbstractTotpService } & CachedServices,\n  opts: TotpServiceInitOptions\n): Promise<AbstractTotpService> {\n  return factory(\n    cache,\n    \"totpService\",\n    opts,\n    async () =>\n      new TotpService(\n        await cryptoFunctionServiceFactory(cache, opts),\n        await logServiceFactory(cache, opts)\n      )\n  );\n}\n","export class AutoFillConstants {\n  static readonly UsernameFieldNames: string[] = [\n    // English\n    \"username\",\n    \"user name\",\n    \"email\",\n    \"email address\",\n    \"e-mail\",\n    \"e-mail address\",\n    \"userid\",\n    \"user id\",\n    \"customer id\",\n    \"login id\",\n    // German\n    \"benutzername\",\n    \"benutzer name\",\n    \"email adresse\",\n    \"e-mail adresse\",\n    \"benutzerid\",\n    \"benutzer id\",\n  ];\n\n  static readonly PasswordFieldIgnoreList: string[] = [\n    \"onetimepassword\",\n    \"captcha\",\n    \"findanything\",\n    \"forgot\",\n  ];\n\n  static readonly ExcludedAutofillTypes: string[] = [\n    \"radio\",\n    \"checkbox\",\n    \"hidden\",\n    \"file\",\n    \"button\",\n    \"image\",\n    \"reset\",\n    \"search\",\n  ];\n}\n\nexport class CreditCardAutoFillConstants {\n  static readonly CardAttributes: string[] = [\n    \"autoCompleteType\",\n    \"data-stripe\",\n    \"htmlName\",\n    \"htmlID\",\n    \"label-tag\",\n    \"placeholder\",\n    \"label-left\",\n    \"label-top\",\n    \"data-recurly\",\n  ];\n\n  static readonly CardAttributesExtended: string[] = [\n    ...CreditCardAutoFillConstants.CardAttributes,\n    \"label-right\",\n  ];\n\n  static readonly CardHolderFieldNames: string[] = [\n    \"cc-name\",\n    \"card-name\",\n    \"cardholder-name\",\n    \"cardholder\",\n    \"name\",\n    \"nom\",\n  ];\n\n  static readonly CardHolderFieldNameValues: string[] = [\n    \"cc-name\",\n    \"card-name\",\n    \"cardholder-name\",\n    \"cardholder\",\n    \"tbName\",\n  ];\n\n  static readonly CardNumberFieldNames: string[] = [\n    \"cc-number\",\n    \"cc-num\",\n    \"card-number\",\n    \"card-num\",\n    \"number\",\n    \"cc\",\n    \"cc-no\",\n    \"card-no\",\n    \"credit-card\",\n    \"numero-carte\",\n    \"carte\",\n    \"carte-credit\",\n    \"num-carte\",\n    \"cb-num\",\n  ];\n\n  static readonly CardNumberFieldNameValues: string[] = [\n    \"cc-number\",\n    \"cc-num\",\n    \"card-number\",\n    \"card-num\",\n    \"cc-no\",\n    \"card-no\",\n    \"numero-carte\",\n    \"num-carte\",\n    \"cb-num\",\n  ];\n\n  static readonly CardExpiryFieldNames: string[] = [\n    \"cc-exp\",\n    \"card-exp\",\n    \"cc-expiration\",\n    \"card-expiration\",\n    \"cc-ex\",\n    \"card-ex\",\n    \"card-expire\",\n    \"card-expiry\",\n    \"validite\",\n    \"expiration\",\n    \"expiry\",\n    \"mm-yy\",\n    \"mm-yyyy\",\n    \"yy-mm\",\n    \"yyyy-mm\",\n    \"expiration-date\",\n    \"payment-card-expiration\",\n    \"payment-cc-date\",\n  ];\n\n  static readonly CardExpiryFieldNameValues: string[] = [\n    \"mm-yy\",\n    \"mm-yyyy\",\n    \"yy-mm\",\n    \"yyyy-mm\",\n    \"expiration-date\",\n    \"payment-card-expiration\",\n  ];\n\n  static readonly ExpiryMonthFieldNames: string[] = [\n    \"exp-month\",\n    \"cc-exp-month\",\n    \"cc-month\",\n    \"card-month\",\n    \"cc-mo\",\n    \"card-mo\",\n    \"exp-mo\",\n    \"card-exp-mo\",\n    \"cc-exp-mo\",\n    \"card-expiration-month\",\n    \"expiration-month\",\n    \"cc-mm\",\n    \"cc-m\",\n    \"card-mm\",\n    \"card-m\",\n    \"card-exp-mm\",\n    \"cc-exp-mm\",\n    \"exp-mm\",\n    \"exp-m\",\n    \"expire-month\",\n    \"expire-mo\",\n    \"expiry-month\",\n    \"expiry-mo\",\n    \"card-expire-month\",\n    \"card-expire-mo\",\n    \"card-expiry-month\",\n    \"card-expiry-mo\",\n    \"mois-validite\",\n    \"mois-expiration\",\n    \"m-validite\",\n    \"m-expiration\",\n    \"expiry-date-field-month\",\n    \"expiration-date-month\",\n    \"expiration-date-mm\",\n    \"exp-mon\",\n    \"validity-mo\",\n    \"exp-date-mo\",\n    \"cb-date-mois\",\n    \"date-m\",\n  ];\n\n  static readonly ExpiryYearFieldNames: string[] = [\n    \"exp-year\",\n    \"cc-exp-year\",\n    \"cc-year\",\n    \"card-year\",\n    \"cc-yr\",\n    \"card-yr\",\n    \"exp-yr\",\n    \"card-exp-yr\",\n    \"cc-exp-yr\",\n    \"card-expiration-year\",\n    \"expiration-year\",\n    \"cc-yy\",\n    \"cc-y\",\n    \"card-yy\",\n    \"card-y\",\n    \"card-exp-yy\",\n    \"cc-exp-yy\",\n    \"exp-yy\",\n    \"exp-y\",\n    \"cc-yyyy\",\n    \"card-yyyy\",\n    \"card-exp-yyyy\",\n    \"cc-exp-yyyy\",\n    \"expire-year\",\n    \"expire-yr\",\n    \"expiry-year\",\n    \"expiry-yr\",\n    \"card-expire-year\",\n    \"card-expire-yr\",\n    \"card-expiry-year\",\n    \"card-expiry-yr\",\n    \"an-validite\",\n    \"an-expiration\",\n    \"annee-validite\",\n    \"annee-expiration\",\n    \"expiry-date-field-year\",\n    \"expiration-date-year\",\n    \"cb-date-ann\",\n    \"expiration-date-yy\",\n    \"expiration-date-yyyy\",\n    \"validity-year\",\n    \"exp-date-year\",\n    \"date-y\",\n  ];\n\n  static readonly CVVFieldNames: string[] = [\n    \"cvv\",\n    \"cvc\",\n    \"cvv2\",\n    \"cc-csc\",\n    \"cc-cvv\",\n    \"card-csc\",\n    \"card-cvv\",\n    \"cvd\",\n    \"cid\",\n    \"cvc2\",\n    \"cnv\",\n    \"cvn2\",\n    \"cc-code\",\n    \"card-code\",\n    \"code-securite\",\n    \"security-code\",\n    \"crypto\",\n    \"card-verif\",\n    \"verification-code\",\n    \"csc\",\n    \"ccv\",\n  ];\n\n  static readonly CardBrandFieldNames: string[] = [\n    \"cc-type\",\n    \"card-type\",\n    \"card-brand\",\n    \"cc-brand\",\n    \"cb-type\",\n  ];\n\n  // Each index represents a language. These three arrays should all be the same length.\n  // 0: English, 1: Danish, 2: German/Dutch, 3: French/Spanish/Italian, 4: Russian, 5: Portuguese\n  static readonly MonthAbbr = [\"mm\", \"mm\", \"mm\", \"mm\", \"мм\", \"mm\"];\n  static readonly YearAbbrShort = [\"yy\", \"åå\", \"jj\", \"aa\", \"гг\", \"rr\"];\n  static readonly YearAbbrLong = [\"yyyy\", \"åååå\", \"jjjj\", \"aa\", \"гггг\", \"rrrr\"];\n}\n\nexport class IdentityAutoFillConstants {\n  static readonly IdentityAttributes: string[] = [\n    \"autoCompleteType\",\n    \"data-stripe\",\n    \"htmlName\",\n    \"htmlID\",\n    \"label-tag\",\n    \"placeholder\",\n    \"label-left\",\n    \"label-top\",\n    \"data-recurly\",\n  ];\n\n  static readonly FullNameFieldNames: string[] = [\"name\", \"full-name\", \"your-name\"];\n\n  static readonly FullNameFieldNameValues: string[] = [\"full-name\", \"your-name\"];\n\n  static readonly TitleFieldNames: string[] = [\"honorific-prefix\", \"prefix\", \"title\"];\n\n  static readonly FirstnameFieldNames: string[] = [\n    // English\n    \"f-name\",\n    \"first-name\",\n    \"given-name\",\n    \"first-n\",\n    // German\n    \"vorname\",\n  ];\n\n  static readonly MiddlenameFieldNames: string[] = [\n    \"m-name\",\n    \"middle-name\",\n    \"additional-name\",\n    \"middle-initial\",\n    \"middle-n\",\n    \"middle-i\",\n  ];\n\n  static readonly LastnameFieldNames: string[] = [\n    // English\n    \"l-name\",\n    \"last-name\",\n    \"s-name\",\n    \"surname\",\n    \"family-name\",\n    \"family-n\",\n    \"last-n\",\n    // German\n    \"nachname\",\n    \"familienname\",\n  ];\n\n  static readonly EmailFieldNames: string[] = [\"e-mail\", \"email-address\"];\n\n  static readonly AddressFieldNames: string[] = [\n    \"address\",\n    \"street-address\",\n    \"addr\",\n    \"street\",\n    \"mailing-addr\",\n    \"billing-addr\",\n    \"mail-addr\",\n    \"bill-addr\",\n  ];\n\n  static readonly AddressFieldNameValues: string[] = [\n    \"mailing-addr\",\n    \"billing-addr\",\n    \"mail-addr\",\n    \"bill-addr\",\n  ];\n\n  static readonly Address1FieldNames: string[] = [\n    \"address-1\",\n    \"address-line-1\",\n    \"addr-1\",\n    \"street-1\",\n  ];\n\n  static readonly Address2FieldNames: string[] = [\n    \"address-2\",\n    \"address-line-2\",\n    \"addr-2\",\n    \"street-2\",\n  ];\n\n  static readonly Address3FieldNames: string[] = [\n    \"address-3\",\n    \"address-line-3\",\n    \"addr-3\",\n    \"street-3\",\n  ];\n\n  static readonly PostalCodeFieldNames: string[] = [\n    \"postal\",\n    \"zip\",\n    \"zip2\",\n    \"zip-code\",\n    \"postal-code\",\n    \"post-code\",\n    \"address-zip\",\n    \"address-postal\",\n    \"address-code\",\n    \"address-postal-code\",\n    \"address-zip-code\",\n  ];\n\n  static readonly CityFieldNames: string[] = [\n    \"city\",\n    \"town\",\n    \"address-level-2\",\n    \"address-city\",\n    \"address-town\",\n  ];\n\n  static readonly StateFieldNames: string[] = [\n    \"state\",\n    \"province\",\n    \"provence\",\n    \"address-level-1\",\n    \"address-state\",\n    \"address-province\",\n  ];\n\n  static readonly CountryFieldNames: string[] = [\n    \"country\",\n    \"country-code\",\n    \"country-name\",\n    \"address-country\",\n    \"address-country-name\",\n    \"address-country-code\",\n  ];\n\n  static readonly PhoneFieldNames: string[] = [\n    \"phone\",\n    \"mobile\",\n    \"mobile-phone\",\n    \"tel\",\n    \"telephone\",\n    \"phone-number\",\n  ];\n\n  static readonly UserNameFieldNames: string[] = [\"user-name\", \"user-id\", \"screen-name\"];\n\n  static readonly CompanyFieldNames: string[] = [\n    \"company\",\n    \"company-name\",\n    \"organization\",\n    \"organization-name\",\n  ];\n\n  static readonly IsoCountries: { [id: string]: string } = {\n    afghanistan: \"AF\",\n    \"aland islands\": \"AX\",\n    albania: \"AL\",\n    algeria: \"DZ\",\n    \"american samoa\": \"AS\",\n    andorra: \"AD\",\n    angola: \"AO\",\n    anguilla: \"AI\",\n    antarctica: \"AQ\",\n    \"antigua and barbuda\": \"AG\",\n    argentina: \"AR\",\n    armenia: \"AM\",\n    aruba: \"AW\",\n    australia: \"AU\",\n    austria: \"AT\",\n    azerbaijan: \"AZ\",\n    bahamas: \"BS\",\n    bahrain: \"BH\",\n    bangladesh: \"BD\",\n    barbados: \"BB\",\n    belarus: \"BY\",\n    belgium: \"BE\",\n    belize: \"BZ\",\n    benin: \"BJ\",\n    bermuda: \"BM\",\n    bhutan: \"BT\",\n    bolivia: \"BO\",\n    \"bosnia and herzegovina\": \"BA\",\n    botswana: \"BW\",\n    \"bouvet island\": \"BV\",\n    brazil: \"BR\",\n    \"british indian ocean territory\": \"IO\",\n    \"brunei darussalam\": \"BN\",\n    bulgaria: \"BG\",\n    \"burkina faso\": \"BF\",\n    burundi: \"BI\",\n    cambodia: \"KH\",\n    cameroon: \"CM\",\n    canada: \"CA\",\n    \"cape verde\": \"CV\",\n    \"cayman islands\": \"KY\",\n    \"central african republic\": \"CF\",\n    chad: \"TD\",\n    chile: \"CL\",\n    china: \"CN\",\n    \"christmas island\": \"CX\",\n    \"cocos (keeling) islands\": \"CC\",\n    colombia: \"CO\",\n    comoros: \"KM\",\n    congo: \"CG\",\n    \"congo, democratic republic\": \"CD\",\n    \"cook islands\": \"CK\",\n    \"costa rica\": \"CR\",\n    \"cote d'ivoire\": \"CI\",\n    croatia: \"HR\",\n    cuba: \"CU\",\n    cyprus: \"CY\",\n    \"czech republic\": \"CZ\",\n    denmark: \"DK\",\n    djibouti: \"DJ\",\n    dominica: \"DM\",\n    \"dominican republic\": \"DO\",\n    ecuador: \"EC\",\n    egypt: \"EG\",\n    \"el salvador\": \"SV\",\n    \"equatorial guinea\": \"GQ\",\n    eritrea: \"ER\",\n    estonia: \"EE\",\n    ethiopia: \"ET\",\n    \"falkland islands\": \"FK\",\n    \"faroe islands\": \"FO\",\n    fiji: \"FJ\",\n    finland: \"FI\",\n    france: \"FR\",\n    \"french guiana\": \"GF\",\n    \"french polynesia\": \"PF\",\n    \"french southern territories\": \"TF\",\n    gabon: \"GA\",\n    gambia: \"GM\",\n    georgia: \"GE\",\n    germany: \"DE\",\n    ghana: \"GH\",\n    gibraltar: \"GI\",\n    greece: \"GR\",\n    greenland: \"GL\",\n    grenada: \"GD\",\n    guadeloupe: \"GP\",\n    guam: \"GU\",\n    guatemala: \"GT\",\n    guernsey: \"GG\",\n    guinea: \"GN\",\n    \"guinea-bissau\": \"GW\",\n    guyana: \"GY\",\n    haiti: \"HT\",\n    \"heard island & mcdonald islands\": \"HM\",\n    \"holy see (vatican city state)\": \"VA\",\n    honduras: \"HN\",\n    \"hong kong\": \"HK\",\n    hungary: \"HU\",\n    iceland: \"IS\",\n    india: \"IN\",\n    indonesia: \"ID\",\n    \"iran, islamic republic of\": \"IR\",\n    iraq: \"IQ\",\n    ireland: \"IE\",\n    \"isle of man\": \"IM\",\n    israel: \"IL\",\n    italy: \"IT\",\n    jamaica: \"JM\",\n    japan: \"JP\",\n    jersey: \"JE\",\n    jordan: \"JO\",\n    kazakhstan: \"KZ\",\n    kenya: \"KE\",\n    kiribati: \"KI\",\n    \"republic of korea\": \"KR\",\n    \"south korea\": \"KR\",\n    \"democratic people's republic of korea\": \"KP\",\n    \"north korea\": \"KP\",\n    kuwait: \"KW\",\n    kyrgyzstan: \"KG\",\n    \"lao people's democratic republic\": \"LA\",\n    latvia: \"LV\",\n    lebanon: \"LB\",\n    lesotho: \"LS\",\n    liberia: \"LR\",\n    \"libyan arab jamahiriya\": \"LY\",\n    liechtenstein: \"LI\",\n    lithuania: \"LT\",\n    luxembourg: \"LU\",\n    macao: \"MO\",\n    macedonia: \"MK\",\n    madagascar: \"MG\",\n    malawi: \"MW\",\n    malaysia: \"MY\",\n    maldives: \"MV\",\n    mali: \"ML\",\n    malta: \"MT\",\n    \"marshall islands\": \"MH\",\n    martinique: \"MQ\",\n    mauritania: \"MR\",\n    mauritius: \"MU\",\n    mayotte: \"YT\",\n    mexico: \"MX\",\n    \"micronesia, federated states of\": \"FM\",\n    moldova: \"MD\",\n    monaco: \"MC\",\n    mongolia: \"MN\",\n    montenegro: \"ME\",\n    montserrat: \"MS\",\n    morocco: \"MA\",\n    mozambique: \"MZ\",\n    myanmar: \"MM\",\n    namibia: \"NA\",\n    nauru: \"NR\",\n    nepal: \"NP\",\n    netherlands: \"NL\",\n    \"netherlands antilles\": \"AN\",\n    \"new caledonia\": \"NC\",\n    \"new zealand\": \"NZ\",\n    nicaragua: \"NI\",\n    niger: \"NE\",\n    nigeria: \"NG\",\n    niue: \"NU\",\n    \"norfolk island\": \"NF\",\n    \"northern mariana islands\": \"MP\",\n    norway: \"NO\",\n    oman: \"OM\",\n    pakistan: \"PK\",\n    palau: \"PW\",\n    \"palestinian territory, occupied\": \"PS\",\n    panama: \"PA\",\n    \"papua new guinea\": \"PG\",\n    paraguay: \"PY\",\n    peru: \"PE\",\n    philippines: \"PH\",\n    pitcairn: \"PN\",\n    poland: \"PL\",\n    portugal: \"PT\",\n    \"puerto rico\": \"PR\",\n    qatar: \"QA\",\n    reunion: \"RE\",\n    romania: \"RO\",\n    \"russian federation\": \"RU\",\n    rwanda: \"RW\",\n    \"saint barthelemy\": \"BL\",\n    \"saint helena\": \"SH\",\n    \"saint kitts and nevis\": \"KN\",\n    \"saint lucia\": \"LC\",\n    \"saint martin\": \"MF\",\n    \"saint pierre and miquelon\": \"PM\",\n    \"saint vincent and grenadines\": \"VC\",\n    samoa: \"WS\",\n    \"san marino\": \"SM\",\n    \"sao tome and principe\": \"ST\",\n    \"saudi arabia\": \"SA\",\n    senegal: \"SN\",\n    serbia: \"RS\",\n    seychelles: \"SC\",\n    \"sierra leone\": \"SL\",\n    singapore: \"SG\",\n    slovakia: \"SK\",\n    slovenia: \"SI\",\n    \"solomon islands\": \"SB\",\n    somalia: \"SO\",\n    \"south africa\": \"ZA\",\n    \"south georgia and sandwich isl.\": \"GS\",\n    spain: \"ES\",\n    \"sri lanka\": \"LK\",\n    sudan: \"SD\",\n    suriname: \"SR\",\n    \"svalbard and jan mayen\": \"SJ\",\n    swaziland: \"SZ\",\n    sweden: \"SE\",\n    switzerland: \"CH\",\n    \"syrian arab republic\": \"SY\",\n    taiwan: \"TW\",\n    tajikistan: \"TJ\",\n    tanzania: \"TZ\",\n    thailand: \"TH\",\n    \"timor-leste\": \"TL\",\n    togo: \"TG\",\n    tokelau: \"TK\",\n    tonga: \"TO\",\n    \"trinidad and tobago\": \"TT\",\n    tunisia: \"TN\",\n    turkey: \"TR\",\n    turkmenistan: \"TM\",\n    \"turks and caicos islands\": \"TC\",\n    tuvalu: \"TV\",\n    uganda: \"UG\",\n    ukraine: \"UA\",\n    \"united arab emirates\": \"AE\",\n    \"united kingdom\": \"GB\",\n    \"united states\": \"US\",\n    \"united states outlying islands\": \"UM\",\n    uruguay: \"UY\",\n    uzbekistan: \"UZ\",\n    vanuatu: \"VU\",\n    venezuela: \"VE\",\n    vietnam: \"VN\",\n    \"virgin islands, british\": \"VG\",\n    \"virgin islands, u.s.\": \"VI\",\n    \"wallis and futuna\": \"WF\",\n    \"western sahara\": \"EH\",\n    yemen: \"YE\",\n    zambia: \"ZM\",\n    zimbabwe: \"ZW\",\n  };\n\n  static readonly IsoStates: { [id: string]: string } = {\n    alabama: \"AL\",\n    alaska: \"AK\",\n    \"american samoa\": \"AS\",\n    arizona: \"AZ\",\n    arkansas: \"AR\",\n    california: \"CA\",\n    colorado: \"CO\",\n    connecticut: \"CT\",\n    delaware: \"DE\",\n    \"district of columbia\": \"DC\",\n    \"federated states of micronesia\": \"FM\",\n    florida: \"FL\",\n    georgia: \"GA\",\n    guam: \"GU\",\n    hawaii: \"HI\",\n    idaho: \"ID\",\n    illinois: \"IL\",\n    indiana: \"IN\",\n    iowa: \"IA\",\n    kansas: \"KS\",\n    kentucky: \"KY\",\n    louisiana: \"LA\",\n    maine: \"ME\",\n    \"marshall islands\": \"MH\",\n    maryland: \"MD\",\n    massachusetts: \"MA\",\n    michigan: \"MI\",\n    minnesota: \"MN\",\n    mississippi: \"MS\",\n    missouri: \"MO\",\n    montana: \"MT\",\n    nebraska: \"NE\",\n    nevada: \"NV\",\n    \"new hampshire\": \"NH\",\n    \"new jersey\": \"NJ\",\n    \"new mexico\": \"NM\",\n    \"new york\": \"NY\",\n    \"north carolina\": \"NC\",\n    \"north dakota\": \"ND\",\n    \"northern mariana islands\": \"MP\",\n    ohio: \"OH\",\n    oklahoma: \"OK\",\n    oregon: \"OR\",\n    palau: \"PW\",\n    pennsylvania: \"PA\",\n    \"puerto rico\": \"PR\",\n    \"rhode island\": \"RI\",\n    \"south carolina\": \"SC\",\n    \"south dakota\": \"SD\",\n    tennessee: \"TN\",\n    texas: \"TX\",\n    utah: \"UT\",\n    vermont: \"VT\",\n    \"virgin islands\": \"VI\",\n    virginia: \"VA\",\n    washington: \"WA\",\n    \"west virginia\": \"WV\",\n    wisconsin: \"WI\",\n    wyoming: \"WY\",\n  };\n\n  static readonly IsoProvinces: { [id: string]: string } = {\n    alberta: \"AB\",\n    \"british columbia\": \"BC\",\n    manitoba: \"MB\",\n    \"new brunswick\": \"NB\",\n    \"newfoundland and labrador\": \"NL\",\n    \"nova scotia\": \"NS\",\n    ontario: \"ON\",\n    \"prince edward island\": \"PE\",\n    quebec: \"QC\",\n    saskatchewan: \"SK\",\n  };\n}\n","export default class AutofillScript {\n  script: string[][] = [];\n  documentUUID: any = {};\n  properties: any = {};\n  options: any = {};\n  metadata: any = {};\n  autosubmit: any = null;\n  savedUrls: string[];\n\n  constructor(documentUUID: string) {\n    this.documentUUID = documentUUID;\n  }\n}\n","import { EventCollectionService } from \"@bitwarden/common/abstractions/event/event-collection.service\";\nimport { LogService } from \"@bitwarden/common/abstractions/log.service\";\nimport { TotpService } from \"@bitwarden/common/abstractions/totp.service\";\nimport { EventType } from \"@bitwarden/common/enums/eventType\";\nimport { FieldType } from \"@bitwarden/common/enums/fieldType\";\nimport { UriMatchType } from \"@bitwarden/common/enums/uriMatchType\";\nimport { CipherService } from \"@bitwarden/common/vault/abstractions/cipher.service\";\nimport { CipherRepromptType } from \"@bitwarden/common/vault/enums/cipher-reprompt-type\";\nimport { CipherType } from \"@bitwarden/common/vault/enums/cipher-type\";\nimport { CipherView } from \"@bitwarden/common/vault/models/view/cipher.view\";\nimport { FieldView } from \"@bitwarden/common/vault/models/view/field.view\";\n\nimport { BrowserApi } from \"../../browser/browserApi\";\nimport { BrowserStateService } from \"../../services/abstractions/browser-state.service\";\nimport {\n  AutoFillConstants,\n  CreditCardAutoFillConstants,\n  IdentityAutoFillConstants,\n} from \"../../services/autofillConstants\";\nimport AutofillField from \"../models/autofill-field\";\nimport AutofillPageDetails from \"../models/autofill-page-details\";\nimport AutofillScript from \"../models/autofill-script\";\n\nimport {\n  AutoFillOptions,\n  AutofillService as AutofillServiceInterface,\n  PageDetail,\n  FormData,\n} from \"./abstractions/autofill.service\";\n\nexport interface GenerateFillScriptOptions {\n  skipUsernameOnlyFill: boolean;\n  onlyEmptyFields: boolean;\n  onlyVisibleFields: boolean;\n  fillNewPassword: boolean;\n  cipher: CipherView;\n}\n\nexport default class AutofillService implements AutofillServiceInterface {\n  constructor(\n    private cipherService: CipherService,\n    private stateService: BrowserStateService,\n    private totpService: TotpService,\n    private eventCollectionService: EventCollectionService,\n    private logService: LogService\n  ) {}\n\n  getFormsWithPasswordFields(pageDetails: AutofillPageDetails): FormData[] {\n    const formData: FormData[] = [];\n\n    const passwordFields = AutofillService.loadPasswordFields(\n      pageDetails,\n      true,\n      true,\n      false,\n      false\n    );\n    if (passwordFields.length === 0) {\n      return formData;\n    }\n\n    for (const formKey in pageDetails.forms) {\n      // eslint-disable-next-line\n      if (!pageDetails.forms.hasOwnProperty(formKey)) {\n        continue;\n      }\n\n      const formPasswordFields = passwordFields.filter((pf) => formKey === pf.form);\n      if (formPasswordFields.length > 0) {\n        let uf = this.findUsernameField(pageDetails, formPasswordFields[0], false, false, false);\n        if (uf == null) {\n          // not able to find any viewable username fields. maybe there are some \"hidden\" ones?\n          uf = this.findUsernameField(pageDetails, formPasswordFields[0], true, true, false);\n        }\n        formData.push({\n          form: pageDetails.forms[formKey],\n          password: formPasswordFields[0],\n          username: uf,\n          passwords: formPasswordFields,\n        });\n      }\n    }\n\n    return formData;\n  }\n\n  async doAutoFill(options: AutoFillOptions) {\n    const tab = options.tab;\n    if (!tab || !options.cipher || !options.pageDetails || !options.pageDetails.length) {\n      throw new Error(\"Nothing to auto-fill.\");\n    }\n\n    let totpPromise: Promise<string> = null;\n\n    const canAccessPremium = await this.stateService.getCanAccessPremium();\n    let didAutofill = false;\n    options.pageDetails.forEach((pd) => {\n      // make sure we're still on correct tab\n      if (pd.tab.id !== tab.id || pd.tab.url !== tab.url) {\n        return;\n      }\n\n      const fillScript = this.generateFillScript(pd.details, {\n        skipUsernameOnlyFill: options.skipUsernameOnlyFill || false,\n        onlyEmptyFields: options.onlyEmptyFields || false,\n        onlyVisibleFields: options.onlyVisibleFields || false,\n        fillNewPassword: options.fillNewPassword || false,\n        cipher: options.cipher,\n      });\n\n      if (!fillScript || !fillScript.script || !fillScript.script.length) {\n        return;\n      }\n\n      // Add a small delay between operations\n      fillScript.properties.delay_between_operations = 20;\n\n      didAutofill = true;\n      if (!options.skipLastUsed) {\n        this.cipherService.updateLastUsedDate(options.cipher.id);\n      }\n\n      BrowserApi.tabSendMessage(\n        tab,\n        {\n          command: \"fillForm\",\n          fillScript: fillScript,\n          url: tab.url,\n        },\n        { frameId: pd.frameId }\n      );\n\n      if (\n        options.cipher.type !== CipherType.Login ||\n        totpPromise ||\n        !options.cipher.login.totp ||\n        (!canAccessPremium && !options.cipher.organizationUseTotp)\n      ) {\n        return;\n      }\n\n      totpPromise = this.stateService.getDisableAutoTotpCopy().then((disabled) => {\n        if (!disabled) {\n          return this.totpService.getCode(options.cipher.login.totp);\n        }\n        return null;\n      });\n    });\n\n    if (didAutofill) {\n      this.eventCollectionService.collect(EventType.Cipher_ClientAutofilled, options.cipher.id);\n      if (totpPromise != null) {\n        return await totpPromise;\n      } else {\n        return null;\n      }\n    } else {\n      throw new Error(\"Did not auto-fill.\");\n    }\n  }\n\n  async doAutoFillOnTab(pageDetails: PageDetail[], tab: chrome.tabs.Tab, fromCommand: boolean) {\n    let cipher: CipherView;\n    if (fromCommand) {\n      cipher = await this.cipherService.getNextCipherForUrl(tab.url);\n    } else {\n      const lastLaunchedCipher = await this.cipherService.getLastLaunchedForUrl(tab.url, true);\n      if (\n        lastLaunchedCipher &&\n        Date.now().valueOf() - lastLaunchedCipher.localData?.lastLaunched?.valueOf() < 30000\n      ) {\n        cipher = lastLaunchedCipher;\n      } else {\n        cipher = await this.cipherService.getLastUsedForUrl(tab.url, true);\n      }\n    }\n\n    if (cipher == null || cipher.reprompt !== CipherRepromptType.None) {\n      return null;\n    }\n\n    const totpCode = await this.doAutoFill({\n      tab: tab,\n      cipher: cipher,\n      pageDetails: pageDetails,\n      skipLastUsed: !fromCommand,\n      skipUsernameOnlyFill: !fromCommand,\n      onlyEmptyFields: !fromCommand,\n      onlyVisibleFields: !fromCommand,\n      fillNewPassword: fromCommand,\n    });\n\n    // Update last used index as autofill has succeed\n    if (fromCommand) {\n      this.cipherService.updateLastUsedIndexForUrl(tab.url);\n    }\n\n    return totpCode;\n  }\n\n  async doAutoFillActiveTab(pageDetails: PageDetail[], fromCommand: boolean) {\n    const tab = await this.getActiveTab();\n    if (!tab || !tab.url) {\n      return;\n    }\n\n    return await this.doAutoFillOnTab(pageDetails, tab, fromCommand);\n  }\n\n  // Helpers\n\n  private async getActiveTab(): Promise<chrome.tabs.Tab> {\n    const tab = await BrowserApi.getTabFromCurrentWindow();\n    if (!tab) {\n      throw new Error(\"No tab found.\");\n    }\n\n    return tab;\n  }\n\n  private generateFillScript(\n    pageDetails: AutofillPageDetails,\n    options: GenerateFillScriptOptions\n  ): AutofillScript {\n    if (!pageDetails || !options.cipher) {\n      return null;\n    }\n\n    let fillScript = new AutofillScript(pageDetails.documentUUID);\n    const filledFields: { [id: string]: AutofillField } = {};\n    const fields = options.cipher.fields;\n\n    if (fields && fields.length) {\n      const fieldNames: string[] = [];\n\n      fields.forEach((f) => {\n        if (AutofillService.hasValue(f.name)) {\n          fieldNames.push(f.name.toLowerCase());\n        }\n      });\n\n      pageDetails.fields.forEach((field) => {\n        // eslint-disable-next-line\n        if (filledFields.hasOwnProperty(field.opid)) {\n          return;\n        }\n\n        if (!field.viewable && field.tagName !== \"span\") {\n          return;\n        }\n\n        const matchingIndex = this.findMatchingFieldIndex(field, fieldNames);\n        if (matchingIndex > -1) {\n          const matchingField: FieldView = fields[matchingIndex];\n          let val: string;\n          if (matchingField.type === FieldType.Linked) {\n            // Assumption: Linked Field is not being used to autofill a boolean value\n            val = options.cipher.linkedFieldValue(matchingField.linkedId) as string;\n          } else {\n            val = matchingField.value;\n            if (val == null && matchingField.type === FieldType.Boolean) {\n              val = \"false\";\n            }\n          }\n\n          filledFields[field.opid] = field;\n          AutofillService.fillByOpid(fillScript, field, val);\n        }\n      });\n    }\n\n    switch (options.cipher.type) {\n      case CipherType.Login:\n        fillScript = this.generateLoginFillScript(fillScript, pageDetails, filledFields, options);\n        break;\n      case CipherType.Card:\n        fillScript = this.generateCardFillScript(fillScript, pageDetails, filledFields, options);\n        break;\n      case CipherType.Identity:\n        fillScript = this.generateIdentityFillScript(\n          fillScript,\n          pageDetails,\n          filledFields,\n          options\n        );\n        break;\n      default:\n        return null;\n    }\n\n    return fillScript;\n  }\n\n  private generateLoginFillScript(\n    fillScript: AutofillScript,\n    pageDetails: AutofillPageDetails,\n    filledFields: { [id: string]: AutofillField },\n    options: GenerateFillScriptOptions\n  ): AutofillScript {\n    if (!options.cipher.login) {\n      return null;\n    }\n\n    const passwords: AutofillField[] = [];\n    const usernames: AutofillField[] = [];\n    let pf: AutofillField = null;\n    let username: AutofillField = null;\n    const login = options.cipher.login;\n    fillScript.savedUrls =\n      login?.uris?.filter((u) => u.match != UriMatchType.Never).map((u) => u.uri) ?? [];\n\n    if (!login.password || login.password === \"\") {\n      // No password for this login. Maybe they just wanted to auto-fill some custom fields?\n      fillScript = AutofillService.setFillScriptForFocus(filledFields, fillScript);\n      return fillScript;\n    }\n\n    let passwordFields = AutofillService.loadPasswordFields(\n      pageDetails,\n      false,\n      false,\n      options.onlyEmptyFields,\n      options.fillNewPassword\n    );\n    if (!passwordFields.length && !options.onlyVisibleFields) {\n      // not able to find any viewable password fields. maybe there are some \"hidden\" ones?\n      passwordFields = AutofillService.loadPasswordFields(\n        pageDetails,\n        true,\n        true,\n        options.onlyEmptyFields,\n        options.fillNewPassword\n      );\n    }\n\n    for (const formKey in pageDetails.forms) {\n      // eslint-disable-next-line\n      if (!pageDetails.forms.hasOwnProperty(formKey)) {\n        continue;\n      }\n\n      const passwordFieldsForForm: AutofillField[] = [];\n      passwordFields.forEach((passField) => {\n        if (formKey === passField.form) {\n          passwordFieldsForForm.push(passField);\n        }\n      });\n\n      passwordFields.forEach((passField) => {\n        pf = passField;\n        passwords.push(pf);\n\n        if (login.username) {\n          username = this.findUsernameField(pageDetails, pf, false, false, false);\n\n          if (!username && !options.onlyVisibleFields) {\n            // not able to find any viewable username fields. maybe there are some \"hidden\" ones?\n            username = this.findUsernameField(pageDetails, pf, true, true, false);\n          }\n\n          if (username) {\n            usernames.push(username);\n          }\n        }\n      });\n    }\n\n    if (passwordFields.length && !passwords.length) {\n      // The page does not have any forms with password fields. Use the first password field on the page and the\n      // input field just before it as the username.\n\n      pf = passwordFields[0];\n      passwords.push(pf);\n\n      if (login.username && pf.elementNumber > 0) {\n        username = this.findUsernameField(pageDetails, pf, false, false, true);\n\n        if (!username && !options.onlyVisibleFields) {\n          // not able to find any viewable username fields. maybe there are some \"hidden\" ones?\n          username = this.findUsernameField(pageDetails, pf, true, true, true);\n        }\n\n        if (username) {\n          usernames.push(username);\n        }\n      }\n    }\n\n    if (!passwordFields.length && !options.skipUsernameOnlyFill) {\n      // No password fields on this page. Let's try to just fuzzy fill the username.\n      pageDetails.fields.forEach((f) => {\n        if (\n          f.viewable &&\n          (f.type === \"text\" || f.type === \"email\" || f.type === \"tel\") &&\n          AutofillService.fieldIsFuzzyMatch(f, AutoFillConstants.UsernameFieldNames)\n        ) {\n          usernames.push(f);\n        }\n      });\n    }\n\n    usernames.forEach((u) => {\n      // eslint-disable-next-line\n      if (filledFields.hasOwnProperty(u.opid)) {\n        return;\n      }\n\n      filledFields[u.opid] = u;\n      AutofillService.fillByOpid(fillScript, u, login.username);\n    });\n\n    passwords.forEach((p) => {\n      // eslint-disable-next-line\n      if (filledFields.hasOwnProperty(p.opid)) {\n        return;\n      }\n\n      filledFields[p.opid] = p;\n      AutofillService.fillByOpid(fillScript, p, login.password);\n    });\n\n    fillScript = AutofillService.setFillScriptForFocus(filledFields, fillScript);\n    return fillScript;\n  }\n\n  private generateCardFillScript(\n    fillScript: AutofillScript,\n    pageDetails: AutofillPageDetails,\n    filledFields: { [id: string]: AutofillField },\n    options: GenerateFillScriptOptions\n  ): AutofillScript {\n    if (!options.cipher.card) {\n      return null;\n    }\n\n    const fillFields: { [id: string]: AutofillField } = {};\n\n    pageDetails.fields.forEach((f) => {\n      if (AutofillService.forCustomFieldsOnly(f)) {\n        return;\n      }\n\n      if (this.isExcludedType(f.type, AutoFillConstants.ExcludedAutofillTypes)) {\n        return;\n      }\n\n      for (let i = 0; i < CreditCardAutoFillConstants.CardAttributes.length; i++) {\n        const attr = CreditCardAutoFillConstants.CardAttributes[i];\n        // eslint-disable-next-line\n        if (!f.hasOwnProperty(attr) || !f[attr] || !f.viewable) {\n          continue;\n        }\n\n        // ref https://html.spec.whatwg.org/multipage/form-control-infrastructure.html#autofill\n        // ref https://developers.google.com/web/fundamentals/design-and-ux/input/forms/\n        if (\n          !fillFields.cardholderName &&\n          AutofillService.isFieldMatch(\n            f[attr],\n            CreditCardAutoFillConstants.CardHolderFieldNames,\n            CreditCardAutoFillConstants.CardHolderFieldNameValues\n          )\n        ) {\n          fillFields.cardholderName = f;\n          break;\n        } else if (\n          !fillFields.number &&\n          AutofillService.isFieldMatch(\n            f[attr],\n            CreditCardAutoFillConstants.CardNumberFieldNames,\n            CreditCardAutoFillConstants.CardNumberFieldNameValues\n          )\n        ) {\n          fillFields.number = f;\n          break;\n        } else if (\n          !fillFields.exp &&\n          AutofillService.isFieldMatch(\n            f[attr],\n            CreditCardAutoFillConstants.CardExpiryFieldNames,\n            CreditCardAutoFillConstants.CardExpiryFieldNameValues\n          )\n        ) {\n          fillFields.exp = f;\n          break;\n        } else if (\n          !fillFields.expMonth &&\n          AutofillService.isFieldMatch(f[attr], CreditCardAutoFillConstants.ExpiryMonthFieldNames)\n        ) {\n          fillFields.expMonth = f;\n          break;\n        } else if (\n          !fillFields.expYear &&\n          AutofillService.isFieldMatch(f[attr], CreditCardAutoFillConstants.ExpiryYearFieldNames)\n        ) {\n          fillFields.expYear = f;\n          break;\n        } else if (\n          !fillFields.code &&\n          AutofillService.isFieldMatch(f[attr], CreditCardAutoFillConstants.CVVFieldNames)\n        ) {\n          fillFields.code = f;\n          break;\n        } else if (\n          !fillFields.brand &&\n          AutofillService.isFieldMatch(f[attr], CreditCardAutoFillConstants.CardBrandFieldNames)\n        ) {\n          fillFields.brand = f;\n          break;\n        }\n      }\n    });\n\n    const card = options.cipher.card;\n    this.makeScriptAction(fillScript, card, fillFields, filledFields, \"cardholderName\");\n    this.makeScriptAction(fillScript, card, fillFields, filledFields, \"number\");\n    this.makeScriptAction(fillScript, card, fillFields, filledFields, \"code\");\n    this.makeScriptAction(fillScript, card, fillFields, filledFields, \"brand\");\n\n    if (fillFields.expMonth && AutofillService.hasValue(card.expMonth)) {\n      let expMonth: string = card.expMonth;\n\n      if (fillFields.expMonth.selectInfo && fillFields.expMonth.selectInfo.options) {\n        let index: number = null;\n        const siOptions = fillFields.expMonth.selectInfo.options;\n        if (siOptions.length === 12) {\n          index = parseInt(card.expMonth, null) - 1;\n        } else if (siOptions.length === 13) {\n          if (\n            siOptions[0][0] != null &&\n            siOptions[0][0] !== \"\" &&\n            (siOptions[12][0] == null || siOptions[12][0] === \"\")\n          ) {\n            index = parseInt(card.expMonth, null) - 1;\n          } else {\n            index = parseInt(card.expMonth, null);\n          }\n        }\n\n        if (index != null) {\n          const option = siOptions[index];\n          if (option.length > 1) {\n            expMonth = option[1];\n          }\n        }\n      } else if (\n        (this.fieldAttrsContain(fillFields.expMonth, \"mm\") ||\n          fillFields.expMonth.maxLength === 2) &&\n        expMonth.length === 1\n      ) {\n        expMonth = \"0\" + expMonth;\n      }\n\n      filledFields[fillFields.expMonth.opid] = fillFields.expMonth;\n      AutofillService.fillByOpid(fillScript, fillFields.expMonth, expMonth);\n    }\n\n    if (fillFields.expYear && AutofillService.hasValue(card.expYear)) {\n      let expYear: string = card.expYear;\n      if (fillFields.expYear.selectInfo && fillFields.expYear.selectInfo.options) {\n        for (let i = 0; i < fillFields.expYear.selectInfo.options.length; i++) {\n          const o: [string, string] = fillFields.expYear.selectInfo.options[i];\n          if (o[0] === card.expYear || o[1] === card.expYear) {\n            expYear = o[1];\n            break;\n          }\n          if (\n            o[1].length === 2 &&\n            card.expYear.length === 4 &&\n            o[1] === card.expYear.substring(2)\n          ) {\n            expYear = o[1];\n            break;\n          }\n          const colonIndex = o[1].indexOf(\":\");\n          if (colonIndex > -1 && o[1].length > colonIndex + 1) {\n            const val = o[1].substring(colonIndex + 2);\n            if (val != null && val.trim() !== \"\" && val === card.expYear) {\n              expYear = o[1];\n              break;\n            }\n          }\n        }\n      } else if (\n        this.fieldAttrsContain(fillFields.expYear, \"yyyy\") ||\n        fillFields.expYear.maxLength === 4\n      ) {\n        if (expYear.length === 2) {\n          expYear = \"20\" + expYear;\n        }\n      } else if (\n        this.fieldAttrsContain(fillFields.expYear, \"yy\") ||\n        fillFields.expYear.maxLength === 2\n      ) {\n        if (expYear.length === 4) {\n          expYear = expYear.substr(2);\n        }\n      }\n\n      filledFields[fillFields.expYear.opid] = fillFields.expYear;\n      AutofillService.fillByOpid(fillScript, fillFields.expYear, expYear);\n    }\n\n    if (\n      fillFields.exp &&\n      AutofillService.hasValue(card.expMonth) &&\n      AutofillService.hasValue(card.expYear)\n    ) {\n      const fullMonth = (\"0\" + card.expMonth).slice(-2);\n\n      let fullYear: string = card.expYear;\n      let partYear: string = null;\n      if (fullYear.length === 2) {\n        partYear = fullYear;\n        fullYear = \"20\" + fullYear;\n      } else if (fullYear.length === 4) {\n        partYear = fullYear.substr(2, 2);\n      }\n\n      let exp: string = null;\n      for (let i = 0; i < CreditCardAutoFillConstants.MonthAbbr.length; i++) {\n        if (\n          this.fieldAttrsContain(\n            fillFields.exp,\n            CreditCardAutoFillConstants.MonthAbbr[i] +\n              \"/\" +\n              CreditCardAutoFillConstants.YearAbbrShort[i]\n          ) &&\n          partYear != null\n        ) {\n          exp = fullMonth + \"/\" + partYear;\n        } else if (\n          this.fieldAttrsContain(\n            fillFields.exp,\n            CreditCardAutoFillConstants.MonthAbbr[i] +\n              \"/\" +\n              CreditCardAutoFillConstants.YearAbbrLong[i]\n          )\n        ) {\n          exp = fullMonth + \"/\" + fullYear;\n        } else if (\n          this.fieldAttrsContain(\n            fillFields.exp,\n            CreditCardAutoFillConstants.YearAbbrShort[i] +\n              \"/\" +\n              CreditCardAutoFillConstants.MonthAbbr[i]\n          ) &&\n          partYear != null\n        ) {\n          exp = partYear + \"/\" + fullMonth;\n        } else if (\n          this.fieldAttrsContain(\n            fillFields.exp,\n            CreditCardAutoFillConstants.YearAbbrLong[i] +\n              \"/\" +\n              CreditCardAutoFillConstants.MonthAbbr[i]\n          )\n        ) {\n          exp = fullYear + \"/\" + fullMonth;\n        } else if (\n          this.fieldAttrsContain(\n            fillFields.exp,\n            CreditCardAutoFillConstants.MonthAbbr[i] +\n              \"-\" +\n              CreditCardAutoFillConstants.YearAbbrShort[i]\n          ) &&\n          partYear != null\n        ) {\n          exp = fullMonth + \"-\" + partYear;\n        } else if (\n          this.fieldAttrsContain(\n            fillFields.exp,\n            CreditCardAutoFillConstants.MonthAbbr[i] +\n              \"-\" +\n              CreditCardAutoFillConstants.YearAbbrLong[i]\n          )\n        ) {\n          exp = fullMonth + \"-\" + fullYear;\n        } else if (\n          this.fieldAttrsContain(\n            fillFields.exp,\n            CreditCardAutoFillConstants.YearAbbrShort[i] +\n              \"-\" +\n              CreditCardAutoFillConstants.MonthAbbr[i]\n          ) &&\n          partYear != null\n        ) {\n          exp = partYear + \"-\" + fullMonth;\n        } else if (\n          this.fieldAttrsContain(\n            fillFields.exp,\n            CreditCardAutoFillConstants.YearAbbrLong[i] +\n              \"-\" +\n              CreditCardAutoFillConstants.MonthAbbr[i]\n          )\n        ) {\n          exp = fullYear + \"-\" + fullMonth;\n        } else if (\n          this.fieldAttrsContain(\n            fillFields.exp,\n            CreditCardAutoFillConstants.YearAbbrShort[i] + CreditCardAutoFillConstants.MonthAbbr[i]\n          ) &&\n          partYear != null\n        ) {\n          exp = partYear + fullMonth;\n        } else if (\n          this.fieldAttrsContain(\n            fillFields.exp,\n            CreditCardAutoFillConstants.YearAbbrLong[i] + CreditCardAutoFillConstants.MonthAbbr[i]\n          )\n        ) {\n          exp = fullYear + fullMonth;\n        } else if (\n          this.fieldAttrsContain(\n            fillFields.exp,\n            CreditCardAutoFillConstants.MonthAbbr[i] + CreditCardAutoFillConstants.YearAbbrShort[i]\n          ) &&\n          partYear != null\n        ) {\n          exp = fullMonth + partYear;\n        } else if (\n          this.fieldAttrsContain(\n            fillFields.exp,\n            CreditCardAutoFillConstants.MonthAbbr[i] + CreditCardAutoFillConstants.YearAbbrLong[i]\n          )\n        ) {\n          exp = fullMonth + fullYear;\n        }\n\n        if (exp != null) {\n          break;\n        }\n      }\n\n      if (exp == null) {\n        exp = fullYear + \"-\" + fullMonth;\n      }\n\n      this.makeScriptActionWithValue(fillScript, exp, fillFields.exp, filledFields);\n    }\n\n    return fillScript;\n  }\n\n  private fieldAttrsContain(field: AutofillField, containsVal: string) {\n    if (!field) {\n      return false;\n    }\n\n    let doesContain = false;\n    CreditCardAutoFillConstants.CardAttributesExtended.forEach((attr) => {\n      // eslint-disable-next-line\n      if (doesContain || !field.hasOwnProperty(attr) || !field[attr]) {\n        return;\n      }\n\n      let val = field[attr];\n      val = val.replace(/ /g, \"\").toLowerCase();\n      doesContain = val.indexOf(containsVal) > -1;\n    });\n\n    return doesContain;\n  }\n\n  private generateIdentityFillScript(\n    fillScript: AutofillScript,\n    pageDetails: AutofillPageDetails,\n    filledFields: { [id: string]: AutofillField },\n    options: GenerateFillScriptOptions\n  ): AutofillScript {\n    if (!options.cipher.identity) {\n      return null;\n    }\n\n    const fillFields: { [id: string]: AutofillField } = {};\n\n    pageDetails.fields.forEach((f) => {\n      if (AutofillService.forCustomFieldsOnly(f)) {\n        return;\n      }\n\n      if (this.isExcludedType(f.type, AutoFillConstants.ExcludedAutofillTypes)) {\n        return;\n      }\n\n      for (let i = 0; i < IdentityAutoFillConstants.IdentityAttributes.length; i++) {\n        const attr = IdentityAutoFillConstants.IdentityAttributes[i];\n        // eslint-disable-next-line\n        if (!f.hasOwnProperty(attr) || !f[attr] || !f.viewable) {\n          continue;\n        }\n\n        // ref https://html.spec.whatwg.org/multipage/form-control-infrastructure.html#autofill\n        // ref https://developers.google.com/web/fundamentals/design-and-ux/input/forms/\n        if (\n          !fillFields.name &&\n          AutofillService.isFieldMatch(\n            f[attr],\n            IdentityAutoFillConstants.FullNameFieldNames,\n            IdentityAutoFillConstants.FullNameFieldNameValues\n          )\n        ) {\n          fillFields.name = f;\n          break;\n        } else if (\n          !fillFields.firstName &&\n          AutofillService.isFieldMatch(f[attr], IdentityAutoFillConstants.FirstnameFieldNames)\n        ) {\n          fillFields.firstName = f;\n          break;\n        } else if (\n          !fillFields.middleName &&\n          AutofillService.isFieldMatch(f[attr], IdentityAutoFillConstants.MiddlenameFieldNames)\n        ) {\n          fillFields.middleName = f;\n          break;\n        } else if (\n          !fillFields.lastName &&\n          AutofillService.isFieldMatch(f[attr], IdentityAutoFillConstants.LastnameFieldNames)\n        ) {\n          fillFields.lastName = f;\n          break;\n        } else if (\n          !fillFields.title &&\n          AutofillService.isFieldMatch(f[attr], IdentityAutoFillConstants.TitleFieldNames)\n        ) {\n          fillFields.title = f;\n          break;\n        } else if (\n          !fillFields.email &&\n          AutofillService.isFieldMatch(f[attr], IdentityAutoFillConstants.EmailFieldNames)\n        ) {\n          fillFields.email = f;\n          break;\n        } else if (\n          !fillFields.address &&\n          AutofillService.isFieldMatch(\n            f[attr],\n            IdentityAutoFillConstants.AddressFieldNames,\n            IdentityAutoFillConstants.AddressFieldNameValues\n          )\n        ) {\n          fillFields.address = f;\n          break;\n        } else if (\n          !fillFields.address1 &&\n          AutofillService.isFieldMatch(f[attr], IdentityAutoFillConstants.Address1FieldNames)\n        ) {\n          fillFields.address1 = f;\n          break;\n        } else if (\n          !fillFields.address2 &&\n          AutofillService.isFieldMatch(f[attr], IdentityAutoFillConstants.Address2FieldNames)\n        ) {\n          fillFields.address2 = f;\n          break;\n        } else if (\n          !fillFields.address3 &&\n          AutofillService.isFieldMatch(f[attr], IdentityAutoFillConstants.Address3FieldNames)\n        ) {\n          fillFields.address3 = f;\n          break;\n        } else if (\n          !fillFields.postalCode &&\n          AutofillService.isFieldMatch(f[attr], IdentityAutoFillConstants.PostalCodeFieldNames)\n        ) {\n          fillFields.postalCode = f;\n          break;\n        } else if (\n          !fillFields.city &&\n          AutofillService.isFieldMatch(f[attr], IdentityAutoFillConstants.CityFieldNames)\n        ) {\n          fillFields.city = f;\n          break;\n        } else if (\n          !fillFields.state &&\n          AutofillService.isFieldMatch(f[attr], IdentityAutoFillConstants.StateFieldNames)\n        ) {\n          fillFields.state = f;\n          break;\n        } else if (\n          !fillFields.country &&\n          AutofillService.isFieldMatch(f[attr], IdentityAutoFillConstants.CountryFieldNames)\n        ) {\n          fillFields.country = f;\n          break;\n        } else if (\n          !fillFields.phone &&\n          AutofillService.isFieldMatch(f[attr], IdentityAutoFillConstants.PhoneFieldNames)\n        ) {\n          fillFields.phone = f;\n          break;\n        } else if (\n          !fillFields.username &&\n          AutofillService.isFieldMatch(f[attr], IdentityAutoFillConstants.UserNameFieldNames)\n        ) {\n          fillFields.username = f;\n          break;\n        } else if (\n          !fillFields.company &&\n          AutofillService.isFieldMatch(f[attr], IdentityAutoFillConstants.CompanyFieldNames)\n        ) {\n          fillFields.company = f;\n          break;\n        }\n      }\n    });\n\n    const identity = options.cipher.identity;\n    this.makeScriptAction(fillScript, identity, fillFields, filledFields, \"title\");\n    this.makeScriptAction(fillScript, identity, fillFields, filledFields, \"firstName\");\n    this.makeScriptAction(fillScript, identity, fillFields, filledFields, \"middleName\");\n    this.makeScriptAction(fillScript, identity, fillFields, filledFields, \"lastName\");\n    this.makeScriptAction(fillScript, identity, fillFields, filledFields, \"address1\");\n    this.makeScriptAction(fillScript, identity, fillFields, filledFields, \"address2\");\n    this.makeScriptAction(fillScript, identity, fillFields, filledFields, \"address3\");\n    this.makeScriptAction(fillScript, identity, fillFields, filledFields, \"city\");\n    this.makeScriptAction(fillScript, identity, fillFields, filledFields, \"postalCode\");\n    this.makeScriptAction(fillScript, identity, fillFields, filledFields, \"company\");\n    this.makeScriptAction(fillScript, identity, fillFields, filledFields, \"email\");\n    this.makeScriptAction(fillScript, identity, fillFields, filledFields, \"phone\");\n    this.makeScriptAction(fillScript, identity, fillFields, filledFields, \"username\");\n\n    let filledState = false;\n    if (fillFields.state && identity.state && identity.state.length > 2) {\n      const stateLower = identity.state.toLowerCase();\n      const isoState =\n        IdentityAutoFillConstants.IsoStates[stateLower] ||\n        IdentityAutoFillConstants.IsoProvinces[stateLower];\n      if (isoState) {\n        filledState = true;\n        this.makeScriptActionWithValue(fillScript, isoState, fillFields.state, filledFields);\n      }\n    }\n\n    if (!filledState) {\n      this.makeScriptAction(fillScript, identity, fillFields, filledFields, \"state\");\n    }\n\n    let filledCountry = false;\n    if (fillFields.country && identity.country && identity.country.length > 2) {\n      const countryLower = identity.country.toLowerCase();\n      const isoCountry = IdentityAutoFillConstants.IsoCountries[countryLower];\n      if (isoCountry) {\n        filledCountry = true;\n        this.makeScriptActionWithValue(fillScript, isoCountry, fillFields.country, filledFields);\n      }\n    }\n\n    if (!filledCountry) {\n      this.makeScriptAction(fillScript, identity, fillFields, filledFields, \"country\");\n    }\n\n    if (fillFields.name && (identity.firstName || identity.lastName)) {\n      let fullName = \"\";\n      if (AutofillService.hasValue(identity.firstName)) {\n        fullName = identity.firstName;\n      }\n      if (AutofillService.hasValue(identity.middleName)) {\n        if (fullName !== \"\") {\n          fullName += \" \";\n        }\n        fullName += identity.middleName;\n      }\n      if (AutofillService.hasValue(identity.lastName)) {\n        if (fullName !== \"\") {\n          fullName += \" \";\n        }\n        fullName += identity.lastName;\n      }\n\n      this.makeScriptActionWithValue(fillScript, fullName, fillFields.name, filledFields);\n    }\n\n    if (fillFields.address && AutofillService.hasValue(identity.address1)) {\n      let address = \"\";\n      if (AutofillService.hasValue(identity.address1)) {\n        address = identity.address1;\n      }\n      if (AutofillService.hasValue(identity.address2)) {\n        if (address !== \"\") {\n          address += \", \";\n        }\n        address += identity.address2;\n      }\n      if (AutofillService.hasValue(identity.address3)) {\n        if (address !== \"\") {\n          address += \", \";\n        }\n        address += identity.address3;\n      }\n\n      this.makeScriptActionWithValue(fillScript, address, fillFields.address, filledFields);\n    }\n\n    return fillScript;\n  }\n\n  private isExcludedType(type: string, excludedTypes: string[]) {\n    return excludedTypes.indexOf(type) > -1;\n  }\n\n  private static isFieldMatch(\n    value: string,\n    options: string[],\n    containsOptions?: string[]\n  ): boolean {\n    value = value\n      .trim()\n      .toLowerCase()\n      .replace(/[^a-zA-Z0-9]+/g, \"\");\n    for (let i = 0; i < options.length; i++) {\n      let option = options[i];\n      const checkValueContains = containsOptions == null || containsOptions.indexOf(option) > -1;\n      option = option.toLowerCase().replace(/-/g, \"\");\n      if (value === option || (checkValueContains && value.indexOf(option) > -1)) {\n        return true;\n      }\n    }\n\n    return false;\n  }\n\n  private makeScriptAction(\n    fillScript: AutofillScript,\n    cipherData: any,\n    fillFields: { [id: string]: AutofillField },\n    filledFields: { [id: string]: AutofillField },\n    dataProp: string,\n    fieldProp?: string\n  ) {\n    fieldProp = fieldProp || dataProp;\n    this.makeScriptActionWithValue(\n      fillScript,\n      cipherData[dataProp],\n      fillFields[fieldProp],\n      filledFields\n    );\n  }\n\n  private makeScriptActionWithValue(\n    fillScript: AutofillScript,\n    dataValue: any,\n    field: AutofillField,\n    filledFields: { [id: string]: AutofillField }\n  ) {\n    let doFill = false;\n    if (AutofillService.hasValue(dataValue) && field) {\n      if (field.type === \"select-one\" && field.selectInfo && field.selectInfo.options) {\n        for (let i = 0; i < field.selectInfo.options.length; i++) {\n          const option = field.selectInfo.options[i];\n          for (let j = 0; j < option.length; j++) {\n            if (\n              AutofillService.hasValue(option[j]) &&\n              option[j].toLowerCase() === dataValue.toLowerCase()\n            ) {\n              doFill = true;\n              if (option.length > 1) {\n                dataValue = option[1];\n              }\n              break;\n            }\n          }\n\n          if (doFill) {\n            break;\n          }\n        }\n      } else {\n        doFill = true;\n      }\n    }\n\n    if (doFill) {\n      filledFields[field.opid] = field;\n      AutofillService.fillByOpid(fillScript, field, dataValue);\n    }\n  }\n\n  static loadPasswordFields(\n    pageDetails: AutofillPageDetails,\n    canBeHidden: boolean,\n    canBeReadOnly: boolean,\n    mustBeEmpty: boolean,\n    fillNewPassword: boolean\n  ) {\n    const arr: AutofillField[] = [];\n    pageDetails.fields.forEach((f) => {\n      if (AutofillService.forCustomFieldsOnly(f)) {\n        return;\n      }\n\n      const isPassword = f.type === \"password\";\n      const valueIsLikePassword = (value: string) => {\n        if (value == null) {\n          return false;\n        }\n        // Removes all whitespace, _ and - characters\n        // eslint-disable-next-line\n        const cleanedValue = value.toLowerCase().replace(/[\\s_\\-]/g, \"\");\n\n        if (cleanedValue.indexOf(\"password\") < 0) {\n          return false;\n        }\n\n        if (AutoFillConstants.PasswordFieldIgnoreList.some((i) => cleanedValue.indexOf(i) > -1)) {\n          return false;\n        }\n\n        return true;\n      };\n      const isLikePassword = () => {\n        if (f.type !== \"text\") {\n          return false;\n        }\n        if (valueIsLikePassword(f.htmlID)) {\n          return true;\n        }\n        if (valueIsLikePassword(f.htmlName)) {\n          return true;\n        }\n        if (valueIsLikePassword(f.placeholder)) {\n          return true;\n        }\n        return false;\n      };\n      if (\n        !f.disabled &&\n        (canBeReadOnly || !f.readonly) &&\n        (isPassword || isLikePassword()) &&\n        (canBeHidden || f.viewable) &&\n        (!mustBeEmpty || f.value == null || f.value.trim() === \"\") &&\n        (fillNewPassword || f.autoCompleteType !== \"new-password\")\n      ) {\n        arr.push(f);\n      }\n    });\n    return arr;\n  }\n\n  private findUsernameField(\n    pageDetails: AutofillPageDetails,\n    passwordField: AutofillField,\n    canBeHidden: boolean,\n    canBeReadOnly: boolean,\n    withoutForm: boolean\n  ) {\n    let usernameField: AutofillField = null;\n    for (let i = 0; i < pageDetails.fields.length; i++) {\n      const f = pageDetails.fields[i];\n      if (AutofillService.forCustomFieldsOnly(f)) {\n        continue;\n      }\n\n      if (f.elementNumber >= passwordField.elementNumber) {\n        break;\n      }\n\n      if (\n        !f.disabled &&\n        (canBeReadOnly || !f.readonly) &&\n        (withoutForm || f.form === passwordField.form) &&\n        (canBeHidden || f.viewable) &&\n        (f.type === \"text\" || f.type === \"email\" || f.type === \"tel\")\n      ) {\n        usernameField = f;\n\n        if (this.findMatchingFieldIndex(f, AutoFillConstants.UsernameFieldNames) > -1) {\n          // We found an exact match. No need to keep looking.\n          break;\n        }\n      }\n    }\n\n    return usernameField;\n  }\n\n  private findMatchingFieldIndex(field: AutofillField, names: string[]): number {\n    for (let i = 0; i < names.length; i++) {\n      if (names[i].indexOf(\"=\") > -1) {\n        if (this.fieldPropertyIsPrefixMatch(field, \"htmlID\", names[i], \"id\")) {\n          return i;\n        }\n        if (this.fieldPropertyIsPrefixMatch(field, \"htmlName\", names[i], \"name\")) {\n          return i;\n        }\n        if (this.fieldPropertyIsPrefixMatch(field, \"label-tag\", names[i], \"label\")) {\n          return i;\n        }\n        if (this.fieldPropertyIsPrefixMatch(field, \"label-aria\", names[i], \"label\")) {\n          return i;\n        }\n        if (this.fieldPropertyIsPrefixMatch(field, \"placeholder\", names[i], \"placeholder\")) {\n          return i;\n        }\n      }\n\n      if (this.fieldPropertyIsMatch(field, \"htmlID\", names[i])) {\n        return i;\n      }\n      if (this.fieldPropertyIsMatch(field, \"htmlName\", names[i])) {\n        return i;\n      }\n      if (this.fieldPropertyIsMatch(field, \"label-tag\", names[i])) {\n        return i;\n      }\n      if (this.fieldPropertyIsMatch(field, \"label-aria\", names[i])) {\n        return i;\n      }\n      if (this.fieldPropertyIsMatch(field, \"placeholder\", names[i])) {\n        return i;\n      }\n    }\n\n    return -1;\n  }\n\n  private fieldPropertyIsPrefixMatch(\n    field: any,\n    property: string,\n    name: string,\n    prefix: string,\n    separator = \"=\"\n  ): boolean {\n    if (name.indexOf(prefix + separator) === 0) {\n      const sepIndex = name.indexOf(separator);\n      const val = name.substring(sepIndex + 1);\n      return val != null && this.fieldPropertyIsMatch(field, property, val);\n    }\n    return false;\n  }\n\n  private fieldPropertyIsMatch(field: any, property: string, name: string): boolean {\n    let fieldVal = field[property] as string;\n    if (!AutofillService.hasValue(fieldVal)) {\n      return false;\n    }\n\n    fieldVal = fieldVal.trim().replace(/(?:\\r\\n|\\r|\\n)/g, \"\");\n    if (name.startsWith(\"regex=\")) {\n      try {\n        const regexParts = name.split(\"=\", 2);\n        if (regexParts.length === 2) {\n          const regex = new RegExp(regexParts[1], \"i\");\n          return regex.test(fieldVal);\n        }\n      } catch (e) {\n        this.logService.error(e);\n      }\n    } else if (name.startsWith(\"csv=\")) {\n      const csvParts = name.split(\"=\", 2);\n      if (csvParts.length === 2) {\n        const csvVals = csvParts[1].split(\",\");\n        for (let i = 0; i < csvVals.length; i++) {\n          const val = csvVals[i];\n          if (val != null && val.trim().toLowerCase() === fieldVal.toLowerCase()) {\n            return true;\n          }\n        }\n        return false;\n      }\n    }\n\n    return fieldVal.toLowerCase() === name;\n  }\n\n  static fieldIsFuzzyMatch(field: AutofillField, names: string[]): boolean {\n    if (AutofillService.hasValue(field.htmlID) && this.fuzzyMatch(names, field.htmlID)) {\n      return true;\n    }\n    if (AutofillService.hasValue(field.htmlName) && this.fuzzyMatch(names, field.htmlName)) {\n      return true;\n    }\n    if (\n      AutofillService.hasValue(field[\"label-tag\"]) &&\n      this.fuzzyMatch(names, field[\"label-tag\"])\n    ) {\n      return true;\n    }\n    if (AutofillService.hasValue(field.placeholder) && this.fuzzyMatch(names, field.placeholder)) {\n      return true;\n    }\n    if (\n      AutofillService.hasValue(field[\"label-left\"]) &&\n      this.fuzzyMatch(names, field[\"label-left\"])\n    ) {\n      return true;\n    }\n    if (\n      AutofillService.hasValue(field[\"label-top\"]) &&\n      this.fuzzyMatch(names, field[\"label-top\"])\n    ) {\n      return true;\n    }\n    if (\n      AutofillService.hasValue(field[\"label-aria\"]) &&\n      this.fuzzyMatch(names, field[\"label-aria\"])\n    ) {\n      return true;\n    }\n\n    return false;\n  }\n\n  private static fuzzyMatch(options: string[], value: string): boolean {\n    if (options == null || options.length === 0 || value == null || value === \"\") {\n      return false;\n    }\n\n    value = value\n      .replace(/(?:\\r\\n|\\r|\\n)/g, \"\")\n      .trim()\n      .toLowerCase();\n\n    for (let i = 0; i < options.length; i++) {\n      if (value.indexOf(options[i]) > -1) {\n        return true;\n      }\n    }\n\n    return false;\n  }\n\n  static hasValue(str: string): boolean {\n    return str && str !== \"\";\n  }\n\n  static setFillScriptForFocus(\n    filledFields: { [id: string]: AutofillField },\n    fillScript: AutofillScript\n  ): AutofillScript {\n    let lastField: AutofillField = null;\n    let lastPasswordField: AutofillField = null;\n\n    for (const opid in filledFields) {\n      // eslint-disable-next-line\n      if (filledFields.hasOwnProperty(opid) && filledFields[opid].viewable) {\n        lastField = filledFields[opid];\n\n        if (filledFields[opid].type === \"password\") {\n          lastPasswordField = filledFields[opid];\n        }\n      }\n    }\n\n    // Prioritize password field over others.\n    if (lastPasswordField) {\n      fillScript.script.push([\"focus_by_opid\", lastPasswordField.opid]);\n    } else if (lastField) {\n      fillScript.script.push([\"focus_by_opid\", lastField.opid]);\n    }\n\n    return fillScript;\n  }\n\n  static fillByOpid(fillScript: AutofillScript, field: AutofillField, value: string): void {\n    if (field.maxLength && value && value.length > field.maxLength) {\n      value = value.substr(0, value.length);\n    }\n    if (field.tagName !== \"span\") {\n      fillScript.script.push([\"click_on_opid\", field.opid]);\n      fillScript.script.push([\"focus_by_opid\", field.opid]);\n    }\n    fillScript.script.push([\"fill_by_opid\", field.opid, value]);\n  }\n\n  static forCustomFieldsOnly(field: AutofillField): boolean {\n    return field.tagName === \"span\";\n  }\n}\n","import { BrowserApi } from \"../../browser/browserApi\";\n\nexport const clearClipboardAlarmName = \"clearClipboard\";\n\nexport class ClearClipboard {\n  /**\n    We currently rely on an active tab with an injected content script (`../content/misc-utils.ts`) to clear the clipboard via `window.navigator.clipboard.writeText(text)`\n    \n    With https://bugs.chromium.org/p/chromium/issues/detail?id=1160302 it was said that service workers,\n    would have access to the clipboard api and then we could migrate to a simpler solution\n    */\n  static async run() {\n    const activeTabs = await BrowserApi.getActiveTabs();\n    if (!activeTabs || activeTabs.length === 0) {\n      return;\n    }\n\n    BrowserApi.sendTabsMessage(activeTabs[0].id, {\n      command: \"clearClipboard\",\n    });\n  }\n}\n","import { BrowserApi } from \"../../browser/browserApi\";\n\n/**\n * Copies text to the clipboard in a MV3 safe way.\n * @param tab - The tab that the text will be sent to so that it can be copied to the users clipboard this needs to be an active tab or the DOM won't be able to be used to do the action. The tab sent in here should be from a user started action or queried for active tabs.\n * @param text - The text that you want added to the users clipboard.\n */\nexport const copyToClipboard = async (tab: chrome.tabs.Tab, text: string) => {\n  if (tab.id == null) {\n    throw new Error(\"Cannot copy text to clipboard with a tab that does not have an id.\");\n  }\n\n  BrowserApi.sendTabsMessage(tab.id, {\n    command: \"copyText\",\n    text: text,\n  });\n};\n","import { clearClipboardAlarmName } from \"../autofill/clipboard\";\nimport { BrowserApi } from \"../browser/browserApi\";\n\nexport const alarmKeys = [clearClipboardAlarmName] as const;\nexport type AlarmKeys = typeof alarmKeys[number];\n\ntype AlarmState = { [T in AlarmKeys]: number | undefined };\n\nconst alarmState: AlarmState = {\n  clearClipboard: null,\n  //TODO once implemented vaultTimeout: null;\n  //TODO once implemented checkNotifications: null;\n  //TODO once implemented (if necessary) processReload: null;\n};\n\n/**\n * Retrieves the set alarm time (planned execution) for a give an commandName {@link AlarmState}\n * @param commandName A command that has been previously registered with {@link AlarmState}\n * @returns {Promise<number>} null or Unix epoch timestamp when the alarm action is supposed to execute\n * @example\n * // getAlarmTime(clearClipboard)\n */\nexport async function getAlarmTime(commandName: AlarmKeys): Promise<number> {\n  let alarmTime: number;\n  if (BrowserApi.manifestVersion == 3) {\n    const fromSessionStore = await chrome.storage.session.get(commandName);\n    alarmTime = fromSessionStore[commandName];\n  } else {\n    alarmTime = alarmState[commandName];\n  }\n\n  return alarmTime;\n}\n\n/**\n * Registers an action that should execute after the given time has passed\n * @param commandName A command that has been previously registered with {@link AlarmState}\n * @param delay_ms The number of ms from now in which the command should execute from\n * @example\n * // setAlarmTime(clearClipboard, 5000) register the clearClipboard action which will execute when at least 5 seconds from now have passed\n */\nexport async function setAlarmTime(commandName: AlarmKeys, delay_ms: number): Promise<void> {\n  if (!delay_ms || delay_ms === 0) {\n    await this.clearAlarmTime(commandName);\n    return;\n  }\n\n  const time = Date.now() + delay_ms;\n  await setAlarmTimeInternal(commandName, time);\n}\n\n/**\n * Clears the time currently set for a given command\n * @param commandName A command that has been previously registered with {@link AlarmState}\n */\nexport async function clearAlarmTime(commandName: AlarmKeys): Promise<void> {\n  await setAlarmTimeInternal(commandName, null);\n}\n\nasync function setAlarmTimeInternal(commandName: AlarmKeys, time: number): Promise<void> {\n  if (BrowserApi.manifestVersion == 3) {\n    await chrome.storage.session.set({ [commandName]: time });\n  } else {\n    alarmState[commandName] = time;\n  }\n}\n","import { PasswordGenerationService } from \"@bitwarden/common/abstractions/passwordGeneration.service\";\n\nimport { setAlarmTime } from \"../../alarms/alarm-state\";\nimport { BrowserStateService } from \"../../services/abstractions/browser-state.service\";\n\nimport { clearClipboardAlarmName } from \"./clear-clipboard\";\nimport { copyToClipboard } from \"./copy-to-clipboard-command\";\n\nexport class GeneratePasswordToClipboardCommand {\n  constructor(\n    private passwordGenerationService: PasswordGenerationService,\n    private stateService: BrowserStateService\n  ) {}\n\n  async generatePasswordToClipboard(tab: chrome.tabs.Tab) {\n    const [options] = await this.passwordGenerationService.getOptions();\n    const password = await this.passwordGenerationService.generatePassword(options);\n\n    copyToClipboard(tab, password);\n\n    const clearClipboard = await this.stateService.getClearClipboard();\n\n    if (clearClipboard != null) {\n      await setAlarmTime(clearClipboardAlarmName, clearClipboard * 1000);\n    }\n  }\n}\n","import { CipherView } from \"@bitwarden/common/vault/models/view/cipher.view\";\n\nimport AutofillPageDetails from \"../models/autofill-page-details\";\nimport { AutofillService } from \"../services/abstractions/autofill.service\";\n\nexport class AutofillTabCommand {\n  constructor(private autofillService: AutofillService) {}\n\n  async doAutofillTabCommand(tab: chrome.tabs.Tab) {\n    if (!tab.id) {\n      throw new Error(\"Tab does not have an id, cannot complete autofill.\");\n    }\n\n    const details = await this.collectPageDetails(tab.id);\n    await this.autofillService.doAutoFillOnTab(\n      [\n        {\n          frameId: 0,\n          tab: tab,\n          details: details,\n        },\n      ],\n      tab,\n      true\n    );\n  }\n\n  async doAutofillTabWithCipherCommand(tab: chrome.tabs.Tab, cipher: CipherView) {\n    if (!tab.id) {\n      throw new Error(\"Tab does not have an id, cannot complete autofill.\");\n    }\n\n    const details = await this.collectPageDetails(tab.id);\n    await this.autofillService.doAutoFill({\n      tab: tab,\n      cipher: cipher,\n      pageDetails: [\n        {\n          frameId: 0,\n          tab: tab,\n          details: details,\n        },\n      ],\n      skipLastUsed: false,\n      skipUsernameOnlyFill: false,\n      onlyEmptyFields: false,\n      onlyVisibleFields: false,\n      fillNewPassword: true,\n    });\n  }\n\n  private async collectPageDetails(tabId: number): Promise<AutofillPageDetails> {\n    return new Promise((resolve, reject) => {\n      chrome.tabs.sendMessage(\n        tabId,\n        {\n          command: \"collectPageDetailsImmediately\",\n        },\n        (response: AutofillPageDetails) => {\n          if (chrome.runtime.lastError) {\n            reject(chrome.runtime.lastError);\n            return;\n          }\n\n          resolve(response);\n        }\n      );\n    });\n  }\n}\n","import { AuthService } from \"@bitwarden/common/abstractions/auth.service\";\nimport { EventCollectionService } from \"@bitwarden/common/abstractions/event/event-collection.service\";\nimport { SearchService } from \"@bitwarden/common/abstractions/search.service\";\nimport { TotpService } from \"@bitwarden/common/abstractions/totp.service\";\nimport { AuthenticationStatus } from \"@bitwarden/common/enums/authenticationStatus\";\nimport { EventType } from \"@bitwarden/common/enums/eventType\";\nimport { StateFactory } from \"@bitwarden/common/factories/stateFactory\";\nimport { GlobalState } from \"@bitwarden/common/models/domain/global-state\";\nimport { CipherService } from \"@bitwarden/common/vault/abstractions/cipher.service\";\nimport { CipherRepromptType } from \"@bitwarden/common/vault/enums/cipher-reprompt-type\";\nimport { CipherView } from \"@bitwarden/common/vault/models/view/cipher.view\";\n\nimport LockedVaultPendingNotificationsItem from \"../../background/models/lockedVaultPendingNotificationsItem\";\nimport {\n  authServiceFactory,\n  AuthServiceInitOptions,\n} from \"../../background/service_factories/auth-service.factory\";\nimport { eventCollectionServiceFactory } from \"../../background/service_factories/event-collection-service.factory\";\nimport { CachedServices } from \"../../background/service_factories/factory-options\";\nimport { passwordGenerationServiceFactory } from \"../../background/service_factories/password-generation-service.factory\";\nimport { searchServiceFactory } from \"../../background/service_factories/search-service.factory\";\nimport { stateServiceFactory } from \"../../background/service_factories/state-service.factory\";\nimport { totpServiceFactory } from \"../../background/service_factories/totp-service.factory\";\nimport { BrowserApi } from \"../../browser/browserApi\";\nimport { Account } from \"../../models/account\";\nimport {\n  cipherServiceFactory,\n  CipherServiceInitOptions,\n} from \"../../vault/background/service_factories/cipher-service.factory\";\nimport { autofillServiceFactory } from \"../background/service_factories/autofill-service.factory\";\nimport { copyToClipboard, GeneratePasswordToClipboardCommand } from \"../clipboard\";\nimport { AutofillTabCommand } from \"../commands/autofill-tab-command\";\n\nimport {\n  AUTOFILL_ID,\n  COPY_IDENTIFIER_ID,\n  COPY_PASSWORD_ID,\n  COPY_USERNAME_ID,\n  COPY_VERIFICATIONCODE_ID,\n  GENERATE_PASSWORD_ID,\n  NOOP_COMMAND_SUFFIX,\n} from \"./main-context-menu-handler\";\n\nexport type CopyToClipboardOptions = { text: string; tab: chrome.tabs.Tab };\nexport type CopyToClipboardAction = (options: CopyToClipboardOptions) => void;\nexport type AutofillAction = (tab: chrome.tabs.Tab, cipher: CipherView) => Promise<void>;\n\nexport type GeneratePasswordToClipboardAction = (tab: chrome.tabs.Tab) => Promise<void>;\n\nconst NOT_IMPLEMENTED = (..._args: unknown[]) =>\n  Promise.reject<never>(\"This action is not implemented inside of a service worker context.\");\n\nexport class ContextMenuClickedHandler {\n  constructor(\n    private copyToClipboard: CopyToClipboardAction,\n    private generatePasswordToClipboard: GeneratePasswordToClipboardAction,\n    private autofillAction: AutofillAction,\n    private authService: AuthService,\n    private cipherService: CipherService,\n    private totpService: TotpService,\n    private eventCollectionService: EventCollectionService\n  ) {}\n\n  static async mv3Create(cachedServices: CachedServices) {\n    const stateFactory = new StateFactory(GlobalState, Account);\n    let searchService: SearchService | null = null;\n    const serviceOptions: AuthServiceInitOptions & CipherServiceInitOptions = {\n      apiServiceOptions: {\n        logoutCallback: NOT_IMPLEMENTED,\n      },\n      cipherServiceOptions: {\n        searchServiceFactory: () => searchService,\n      },\n      cryptoFunctionServiceOptions: {\n        win: self,\n      },\n      encryptServiceOptions: {\n        logMacFailures: false,\n      },\n      i18nServiceOptions: {\n        systemLanguage: chrome.i18n.getUILanguage(),\n      },\n      keyConnectorServiceOptions: {\n        logoutCallback: NOT_IMPLEMENTED,\n      },\n      logServiceOptions: {\n        isDev: false,\n      },\n      platformUtilsServiceOptions: {\n        biometricCallback: NOT_IMPLEMENTED,\n        clipboardWriteCallback: NOT_IMPLEMENTED,\n        win: self,\n      },\n      stateMigrationServiceOptions: {\n        stateFactory: stateFactory,\n      },\n      stateServiceOptions: {\n        stateFactory: stateFactory,\n      },\n    };\n    searchService = await searchServiceFactory(cachedServices, serviceOptions);\n\n    const generatePasswordToClipboardCommand = new GeneratePasswordToClipboardCommand(\n      await passwordGenerationServiceFactory(cachedServices, serviceOptions),\n      await stateServiceFactory(cachedServices, serviceOptions)\n    );\n\n    const autofillCommand = new AutofillTabCommand(\n      await autofillServiceFactory(cachedServices, serviceOptions)\n    );\n\n    return new ContextMenuClickedHandler(\n      (options) => copyToClipboard(options.tab, options.text),\n      (tab) => generatePasswordToClipboardCommand.generatePasswordToClipboard(tab),\n      (tab, cipher) => autofillCommand.doAutofillTabWithCipherCommand(tab, cipher),\n      await authServiceFactory(cachedServices, serviceOptions),\n      await cipherServiceFactory(cachedServices, serviceOptions),\n      await totpServiceFactory(cachedServices, serviceOptions),\n      await eventCollectionServiceFactory(cachedServices, serviceOptions)\n    );\n  }\n\n  static async onClickedListener(\n    info: chrome.contextMenus.OnClickData,\n    tab?: chrome.tabs.Tab,\n    cachedServices: CachedServices = {}\n  ) {\n    const contextMenuClickedHandler = await ContextMenuClickedHandler.mv3Create(cachedServices);\n    await contextMenuClickedHandler.run(info, tab);\n  }\n\n  static async messageListener(\n    message: { command: string; data: LockedVaultPendingNotificationsItem },\n    sender: chrome.runtime.MessageSender,\n    cachedServices: CachedServices\n  ) {\n    if (\n      message.command !== \"unlockCompleted\" ||\n      message.data.target !== \"contextmenus.background\"\n    ) {\n      return;\n    }\n\n    const contextMenuClickedHandler = await ContextMenuClickedHandler.mv3Create(cachedServices);\n    await contextMenuClickedHandler.run(\n      message.data.commandToRetry.msg.data,\n      message.data.commandToRetry.sender.tab\n    );\n  }\n\n  async run(info: chrome.contextMenus.OnClickData, tab?: chrome.tabs.Tab) {\n    switch (info.menuItemId) {\n      case GENERATE_PASSWORD_ID:\n        if (!tab) {\n          return;\n        }\n        await this.generatePasswordToClipboard(tab);\n        break;\n      case COPY_IDENTIFIER_ID:\n        if (!tab) {\n          return;\n        }\n        this.copyToClipboard({ text: await this.getIdentifier(tab, info), tab: tab });\n        break;\n      default:\n        await this.cipherAction(info, tab);\n    }\n  }\n\n  async cipherAction(info: chrome.contextMenus.OnClickData, tab?: chrome.tabs.Tab) {\n    if ((await this.authService.getAuthStatus()) < AuthenticationStatus.Unlocked) {\n      const retryMessage: LockedVaultPendingNotificationsItem = {\n        commandToRetry: {\n          msg: { command: NOOP_COMMAND_SUFFIX, data: info },\n          sender: { tab: tab },\n        },\n        target: \"contextmenus.background\",\n      };\n      await BrowserApi.tabSendMessageData(\n        tab,\n        \"addToLockedVaultPendingNotifications\",\n        retryMessage\n      );\n\n      await BrowserApi.tabSendMessageData(tab, \"promptForLogin\");\n      return;\n    }\n\n    // NOTE: We don't actually use the first part of this ID, we further switch based on the parentMenuItemId\n    // I would really love to not add it but that is a departure from how it currently works.\n    const id = (info.menuItemId as string).split(\"_\")[1]; // We create all the ids, we can guarantee they are strings\n    let cipher: CipherView | undefined;\n    if (id === NOOP_COMMAND_SUFFIX) {\n      // This NOOP item has come through which is generally only for no access state but since we got here\n      // we are actually unlocked we will do our best to find a good match of an item to autofill this is useful\n      // in scenarios like unlock on autofill\n      const ciphers = await this.cipherService.getAllDecryptedForUrl(tab.url);\n      cipher = ciphers.find((c) => c.reprompt === CipherRepromptType.None);\n    } else {\n      const ciphers = await this.cipherService.getAllDecrypted();\n      cipher = ciphers.find((c) => c.id === id);\n    }\n\n    if (cipher == null) {\n      return;\n    }\n\n    switch (info.parentMenuItemId) {\n      case AUTOFILL_ID:\n        if (tab == null) {\n          return;\n        }\n        await this.autofillAction(tab, cipher);\n        break;\n      case COPY_USERNAME_ID:\n        this.copyToClipboard({ text: cipher.login.username, tab: tab });\n        break;\n      case COPY_PASSWORD_ID:\n        this.copyToClipboard({ text: cipher.login.password, tab: tab });\n        this.eventCollectionService.collect(EventType.Cipher_ClientCopiedPassword, cipher.id);\n        break;\n      case COPY_VERIFICATIONCODE_ID:\n        this.copyToClipboard({ text: await this.totpService.getCode(cipher.login.totp), tab: tab });\n        break;\n    }\n  }\n\n  private async getIdentifier(tab: chrome.tabs.Tab, info: chrome.contextMenus.OnClickData) {\n    return new Promise<string>((resolve, reject) => {\n      BrowserApi.sendTabsMessage(\n        tab.id,\n        { command: \"getClickedElement\" },\n        { frameId: info.frameId },\n        (identifier: string) => {\n          if (chrome.runtime.lastError) {\n            reject(chrome.runtime.lastError);\n            return;\n          }\n\n          resolve(identifier);\n        }\n      );\n    });\n  }\n}\n","import {\n  EventCollectionServiceInitOptions,\n  eventCollectionServiceFactory,\n} from \"../../../background/service_factories/event-collection-service.factory\";\nimport {\n  CachedServices,\n  factory,\n  FactoryOptions,\n} from \"../../../background/service_factories/factory-options\";\nimport {\n  logServiceFactory,\n  LogServiceInitOptions,\n} from \"../../../background/service_factories/log-service.factory\";\nimport {\n  stateServiceFactory,\n  StateServiceInitOptions,\n} from \"../../../background/service_factories/state-service.factory\";\nimport {\n  totpServiceFactory,\n  TotpServiceInitOptions,\n} from \"../../../background/service_factories/totp-service.factory\";\nimport {\n  cipherServiceFactory,\n  CipherServiceInitOptions,\n} from \"../../../vault/background/service_factories/cipher-service.factory\";\nimport { AutofillService as AbstractAutoFillService } from \"../../services/abstractions/autofill.service\";\nimport AutofillService from \"../../services/autofill.service\";\n\ntype AutoFillServiceOptions = FactoryOptions;\n\nexport type AutoFillServiceInitOptions = AutoFillServiceOptions &\n  CipherServiceInitOptions &\n  StateServiceInitOptions &\n  TotpServiceInitOptions &\n  EventCollectionServiceInitOptions &\n  LogServiceInitOptions;\n\nexport function autofillServiceFactory(\n  cache: { autofillService?: AbstractAutoFillService } & CachedServices,\n  opts: AutoFillServiceInitOptions\n): Promise<AbstractAutoFillService> {\n  return factory(\n    cache,\n    \"autofillService\",\n    opts,\n    async () =>\n      new AutofillService(\n        await cipherServiceFactory(cache, opts),\n        await stateServiceFactory(cache, opts),\n        await totpServiceFactory(cache, opts),\n        await eventCollectionServiceFactory(cache, opts),\n        await logServiceFactory(cache, opts)\n      )\n  );\n}\n","import { AuthService } from \"@bitwarden/common/abstractions/auth.service\";\nimport { CryptoService } from \"@bitwarden/common/abstractions/crypto.service\";\nimport { EncryptService } from \"@bitwarden/common/abstractions/encrypt.service\";\nimport { AuthenticationStatus } from \"@bitwarden/common/enums/authenticationStatus\";\nimport { StateFactory } from \"@bitwarden/common/factories/stateFactory\";\nimport { Utils } from \"@bitwarden/common/misc/utils\";\nimport { GlobalState } from \"@bitwarden/common/models/domain/global-state\";\nimport { ContainerService } from \"@bitwarden/common/services/container.service\";\nimport { CipherService } from \"@bitwarden/common/vault/abstractions/cipher.service\";\n\nimport { authServiceFactory } from \"../background/service_factories/auth-service.factory\";\nimport { searchServiceFactory } from \"../background/service_factories/search-service.factory\";\nimport { stateServiceFactory } from \"../background/service_factories/state-service.factory\";\nimport { BrowserApi } from \"../browser/browserApi\";\nimport { Account } from \"../models/account\";\nimport { BrowserStateService } from \"../services/abstractions/browser-state.service\";\nimport BrowserPlatformUtilsService from \"../services/browserPlatformUtils.service\";\nimport IconDetails from \"../vault/background/models/icon-details\";\nimport { cipherServiceFactory } from \"../vault/background/service_factories/cipher-service.factory\";\n\nexport type BadgeOptions = {\n  tab?: chrome.tabs.Tab;\n  windowId?: number;\n};\n\nexport class UpdateBadge {\n  private authService: AuthService;\n  private stateService: BrowserStateService;\n  private cipherService: CipherService;\n  private badgeAction: typeof chrome.action;\n  private sidebarAction: OperaSidebarAction | FirefoxSidebarAction;\n  private inited = false;\n  private win: Window & typeof globalThis;\n\n  private static readonly listenedToCommands = [\n    \"updateBadge\",\n    \"loggedIn\",\n    \"unlocked\",\n    \"syncCompleted\",\n    \"bgUpdateContextMenu\",\n    \"editedCipher\",\n    \"addedCipher\",\n    \"deletedCipher\",\n  ];\n\n  static async tabsOnActivatedListener(\n    activeInfo: chrome.tabs.TabActiveInfo,\n    serviceCache: Record<string, unknown>\n  ) {\n    await new UpdateBadge(self).run({\n      tabId: activeInfo.tabId,\n      existingServices: serviceCache,\n      windowId: activeInfo.windowId,\n    });\n  }\n\n  static async tabsOnReplacedListener(\n    addedTabId: number,\n    removedTabId: number,\n    serviceCache: Record<string, unknown>\n  ) {\n    await new UpdateBadge(self).run({ tabId: addedTabId, existingServices: serviceCache });\n  }\n\n  static async tabsOnUpdatedListener(\n    tabId: number,\n    changeInfo: chrome.tabs.TabChangeInfo,\n    tab: chrome.tabs.Tab,\n    serviceCache: Record<string, unknown>\n  ) {\n    await new UpdateBadge(self).run({\n      tabId,\n      existingServices: serviceCache,\n      windowId: tab.windowId,\n    });\n  }\n\n  static async messageListener(\n    message: { command: string; tabId: number },\n    serviceCache: Record<string, unknown>\n  ) {\n    if (!UpdateBadge.listenedToCommands.includes(message.command)) {\n      return;\n    }\n\n    await new UpdateBadge(self).run({ existingServices: serviceCache });\n  }\n\n  constructor(win: Window & typeof globalThis) {\n    this.badgeAction = BrowserApi.getBrowserAction();\n    this.sidebarAction = BrowserApi.getSidebarAction(self);\n    this.win = win;\n  }\n\n  async run(opts?: {\n    tabId?: number;\n    windowId?: number;\n    existingServices?: Record<string, unknown>;\n  }): Promise<void> {\n    await this.initServices(opts?.existingServices);\n\n    const authStatus = await this.authService.getAuthStatus();\n\n    await this.setBadgeBackgroundColor();\n\n    switch (authStatus) {\n      case AuthenticationStatus.LoggedOut: {\n        await this.setLoggedOut();\n        break;\n      }\n      case AuthenticationStatus.Locked: {\n        await this.setLocked();\n        break;\n      }\n      case AuthenticationStatus.Unlocked: {\n        const tab = await this.getTab(opts?.tabId, opts?.windowId);\n        await this.setUnlocked({ tab, windowId: tab?.windowId });\n        break;\n      }\n    }\n  }\n\n  async setLoggedOut(): Promise<void> {\n    await this.setBadgeIcon(\"_gray\");\n    await this.clearBadgeText();\n  }\n\n  async setLocked() {\n    await this.setBadgeIcon(\"_locked\");\n    await this.clearBadgeText();\n  }\n\n  private async clearBadgeText() {\n    const tabs = await BrowserApi.getActiveTabs();\n    if (tabs != null) {\n      tabs.forEach(async (tab) => {\n        if (tab.id != null) {\n          await this.setBadgeText(\"\", tab.id);\n        }\n      });\n    }\n  }\n\n  async setUnlocked(opts: BadgeOptions) {\n    await this.initServices();\n\n    await this.setBadgeIcon(\"\");\n\n    const disableBadgeCounter = await this.stateService.getDisableBadgeCounter();\n    if (disableBadgeCounter) {\n      return;\n    }\n\n    const ciphers = await this.cipherService.getAllDecryptedForUrl(opts?.tab?.url);\n    let countText = ciphers.length == 0 ? \"\" : ciphers.length.toString();\n    if (ciphers.length > 9) {\n      countText = \"9+\";\n    }\n    await this.setBadgeText(countText, opts?.tab?.id);\n  }\n\n  setBadgeBackgroundColor(color = \"#294e5f\") {\n    if (this.badgeAction?.setBadgeBackgroundColor) {\n      this.badgeAction.setBadgeBackgroundColor({ color });\n    }\n    if (this.isOperaSidebar(this.sidebarAction)) {\n      this.sidebarAction.setBadgeBackgroundColor({ color });\n    }\n  }\n\n  setBadgeText(text: string, tabId?: number) {\n    this.setActionText(text, tabId);\n    this.setSideBarText(text, tabId);\n  }\n\n  async setBadgeIcon(iconSuffix: string, windowId?: number) {\n    const options: IconDetails = {\n      path: {\n        19: \"/images/icon19\" + iconSuffix + \".png\",\n        38: \"/images/icon38\" + iconSuffix + \".png\",\n      },\n    };\n    if (windowId && BrowserPlatformUtilsService.isFirefox()) {\n      options.windowId = windowId;\n    }\n\n    await this.setActionIcon(options);\n    await this.setSidebarActionIcon(options);\n  }\n\n  private setActionText(text: string, tabId?: number) {\n    if (this.badgeAction?.setBadgeText) {\n      this.badgeAction.setBadgeText({ text, tabId });\n    }\n  }\n\n  private setSideBarText(text: string, tabId?: number) {\n    if (this.isOperaSidebar(this.sidebarAction)) {\n      this.sidebarAction.setBadgeText({ text, tabId });\n    } else if (this.sidebarAction) {\n      // Firefox\n      const title = `Bitwarden${Utils.isNullOrEmpty(text) ? \"\" : ` [${text}]`}`;\n      this.sidebarAction.setTitle({ title, tabId });\n    }\n  }\n\n  private async setActionIcon(options: IconDetails) {\n    if (!this.badgeAction?.setIcon) {\n      return;\n    }\n\n    if (this.useSyncApiCalls) {\n      this.badgeAction.setIcon(options);\n    } else {\n      await new Promise<void>((resolve) => this.badgeAction.setIcon(options, () => resolve()));\n    }\n  }\n\n  private async setSidebarActionIcon(options: IconDetails) {\n    if (!this.sidebarAction?.setIcon) {\n      return;\n    }\n\n    if (this.useSyncApiCalls) {\n      this.sidebarAction.setIcon(options);\n    } else {\n      await new Promise<void>((resolve) => this.sidebarAction.setIcon(options, () => resolve()));\n    }\n  }\n\n  private async getTab(tabId?: number, windowId?: number) {\n    return (\n      (await BrowserApi.getTab(tabId)) ??\n      (windowId\n        ? await BrowserApi.tabsQueryFirst({ active: true, windowId })\n        : await BrowserApi.tabsQueryFirst({ active: true, currentWindow: true })) ??\n      (await BrowserApi.tabsQueryFirst({ active: true, lastFocusedWindow: true })) ??\n      (await BrowserApi.tabsQueryFirst({ active: true }))\n    );\n  }\n\n  private get useSyncApiCalls() {\n    return (\n      BrowserPlatformUtilsService.isFirefox() || BrowserPlatformUtilsService.isSafari(this.win)\n    );\n  }\n\n  private async initServices(existingServiceCache?: Record<string, unknown>): Promise<UpdateBadge> {\n    if (this.inited) {\n      return this;\n    }\n\n    const serviceCache: Record<string, unknown> = existingServiceCache || {};\n    const opts = {\n      cryptoFunctionServiceOptions: { win: self },\n      encryptServiceOptions: { logMacFailures: false },\n      logServiceOptions: { isDev: false },\n      platformUtilsServiceOptions: {\n        clipboardWriteCallback: (clipboardValue: string, clearMs: number) =>\n          Promise.reject(\"not implemented\"),\n        biometricCallback: () => Promise.reject(\"not implemented\"),\n        win: self,\n      },\n      stateServiceOptions: {\n        stateFactory: new StateFactory(GlobalState, Account),\n      },\n      stateMigrationServiceOptions: {\n        stateFactory: new StateFactory(GlobalState, Account),\n      },\n      apiServiceOptions: {\n        logoutCallback: () => Promise.reject(\"not implemented\"),\n      },\n      keyConnectorServiceOptions: {\n        logoutCallback: () => Promise.reject(\"not implemented\"),\n      },\n      i18nServiceOptions: {\n        systemLanguage: BrowserApi.getUILanguage(self),\n      },\n    };\n    this.stateService = await stateServiceFactory(serviceCache, opts);\n    this.authService = await authServiceFactory(serviceCache, opts);\n    const searchService = await searchServiceFactory(serviceCache, opts);\n\n    this.cipherService = await cipherServiceFactory(serviceCache, {\n      ...opts,\n      cipherServiceOptions: { searchServiceFactory: () => searchService },\n    });\n\n    // Needed for cipher decryption\n    if (!self.bitwardenContainerService) {\n      new ContainerService(\n        serviceCache.cryptoService as CryptoService,\n        serviceCache.encryptService as EncryptService\n      ).attachToGlobal(self);\n    }\n\n    this.inited = true;\n\n    return this;\n  }\n\n  private isOperaSidebar(\n    action: OperaSidebarAction | FirefoxSidebarAction\n  ): action is OperaSidebarAction {\n    return action != null && (action as OperaSidebarAction).setBadgeText != null;\n  }\n}\n","import { ReplaySubject } from \"rxjs\";\n\nimport { StateService } from \"@bitwarden/common/abstractions/state.service\";\n\nimport { browserSession, sessionSync } from \"../decorators/session-sync-observable\";\n\nimport I18nService from \"./i18n.service\";\n\n@browserSession\nexport class BrowserI18nService extends I18nService {\n  @sessionSync({ ctor: String })\n  protected _locale: ReplaySubject<string>;\n\n  constructor(systemLanguage: string, private stateService: StateService) {\n    super(systemLanguage);\n  }\n}\n","import { MessagingService } from \"@bitwarden/common/abstractions/messaging.service\";\n\nexport default class BrowserMessagingPrivateModeBackgroundService implements MessagingService {\n  send(subscriber: string, arg: any = {}) {\n    const message = Object.assign({}, { command: subscriber }, arg);\n    (window as any).bitwardenPopupMainMessageListener(message);\n  }\n}\n","import { VaultTimeoutService as BaseVaultTimeoutService } from \"@bitwarden/common/services/vaultTimeout/vaultTimeout.service\";\n\nimport { SafariApp } from \"../../browser/safariApp\";\n\nexport default class VaultTimeoutService extends BaseVaultTimeoutService {\n  startCheck() {\n    this.checkVaultTimeout();\n    if (this.platformUtilsService.isSafari()) {\n      this.checkSafari();\n    } else {\n      setInterval(() => this.checkVaultTimeout(), 10 * 1000); // check every 10 seconds\n    }\n  }\n\n  // This is a work-around to safari adding an arbitary delay to setTimeout and\n  //  setIntervals. It works by calling the native extension which sleeps for 10s,\n  //  efficiently replicating setInterval.\n  async checkSafari() {\n    // eslint-disable-next-line\n    while (true) {\n      try {\n        await SafariApp.sendMessageToApp(\"sleep\");\n        this.checkVaultTimeout();\n      } catch (e) {\n        // eslint-disable-next-line\n        console.log(\"Exception Safari VaultTimeout\", e);\n      }\n    }\n  }\n}\n","import { BehaviorSubject } from \"rxjs\";\n\nimport { Folder } from \"@bitwarden/common/vault/models/domain/folder\";\nimport { FolderView } from \"@bitwarden/common/vault/models/view/folder.view\";\nimport { FolderService as BaseFolderService } from \"@bitwarden/common/vault/services/folder/folder.service\";\n\nimport { browserSession, sessionSync } from \"../../decorators/session-sync-observable\";\n\n@browserSession\nexport class BrowserFolderService extends BaseFolderService {\n  @sessionSync({ initializer: Folder.fromJSON, initializeAs: \"array\" })\n  protected _folders: BehaviorSubject<Folder[]>;\n  @sessionSync({ initializer: FolderView.fromJSON, initializeAs: \"array\" })\n  protected _folderViews: BehaviorSubject<FolderView[]>;\n}\n","import { AuthService } from \"@bitwarden/common/abstractions/auth.service\";\nimport { PasswordGenerationService } from \"@bitwarden/common/abstractions/passwordGeneration.service\";\nimport { PlatformUtilsService } from \"@bitwarden/common/abstractions/platformUtils.service\";\nimport { VaultTimeoutService } from \"@bitwarden/common/abstractions/vaultTimeout/vaultTimeout.service\";\nimport { AuthenticationStatus } from \"@bitwarden/common/enums/authenticationStatus\";\n\nimport { BrowserApi } from \"../browser/browserApi\";\n\nimport MainBackground from \"./main.background\";\nimport LockedVaultPendingNotificationsItem from \"./models/lockedVaultPendingNotificationsItem\";\n\nexport default class CommandsBackground {\n  private isSafari: boolean;\n  private isVivaldi: boolean;\n\n  constructor(\n    private main: MainBackground,\n    private passwordGenerationService: PasswordGenerationService,\n    private platformUtilsService: PlatformUtilsService,\n    private vaultTimeoutService: VaultTimeoutService,\n    private authService: AuthService\n  ) {\n    this.isSafari = this.platformUtilsService.isSafari();\n    this.isVivaldi = this.platformUtilsService.isVivaldi();\n  }\n\n  async init() {\n    BrowserApi.messageListener(\n      \"commands.background\",\n      async (msg: any, sender: chrome.runtime.MessageSender, sendResponse: any) => {\n        if (msg.command === \"unlockCompleted\" && msg.data.target === \"commands.background\") {\n          await this.processCommand(\n            msg.data.commandToRetry.msg.command,\n            msg.data.commandToRetry.sender\n          );\n        }\n      }\n    );\n\n    if (chrome && chrome.commands) {\n      chrome.commands.onCommand.addListener(async (command: string) => {\n        await this.processCommand(command);\n      });\n    }\n  }\n\n  private async processCommand(command: string, sender?: chrome.runtime.MessageSender) {\n    switch (command) {\n      case \"generate_password\":\n        await this.generatePasswordToClipboard();\n        break;\n      case \"autofill_login\":\n        await this.autoFillLogin(sender ? sender.tab : null);\n        break;\n      case \"open_popup\":\n        await this.openPopup();\n        break;\n      case \"lock_vault\":\n        await this.vaultTimeoutService.lock();\n        break;\n      default:\n        break;\n    }\n  }\n\n  private async generatePasswordToClipboard() {\n    const options = (await this.passwordGenerationService.getOptions())?.[0] ?? {};\n    const password = await this.passwordGenerationService.generatePassword(options);\n    this.platformUtilsService.copyToClipboard(password, { window: window });\n    this.passwordGenerationService.addHistory(password);\n  }\n\n  private async autoFillLogin(tab?: chrome.tabs.Tab) {\n    if (!tab) {\n      tab = await BrowserApi.getTabFromCurrentWindowId();\n    }\n\n    if (tab == null) {\n      return;\n    }\n\n    if ((await this.authService.getAuthStatus()) < AuthenticationStatus.Unlocked) {\n      const retryMessage: LockedVaultPendingNotificationsItem = {\n        commandToRetry: {\n          msg: { command: \"autofill_login\" },\n          sender: { tab: tab },\n        },\n        target: \"commands.background\",\n      };\n      await BrowserApi.tabSendMessageData(\n        tab,\n        \"addToLockedVaultPendingNotifications\",\n        retryMessage\n      );\n\n      BrowserApi.tabSendMessageData(tab, \"promptForLogin\");\n      return;\n    }\n\n    await this.main.collectPageDetailsForContentScript(tab, \"autofill_cmd\");\n  }\n\n  private async openPopup() {\n    // Chrome APIs cannot open popup\n    if (!this.isSafari) {\n      return;\n    }\n\n    this.main.openPopup();\n  }\n}\n","import { NotificationsService } from \"@bitwarden/common/abstractions/notifications.service\";\nimport { VaultTimeoutService } from \"@bitwarden/common/abstractions/vaultTimeout/vaultTimeout.service\";\n\nimport { BrowserStateService } from \"../services/abstractions/browser-state.service\";\n\nconst IdleInterval = 60 * 5; // 5 minutes\n\nexport default class IdleBackground {\n  private idle: any;\n  private idleTimer: number = null;\n  private idleState = \"active\";\n\n  constructor(\n    private vaultTimeoutService: VaultTimeoutService,\n    private stateService: BrowserStateService,\n    private notificationsService: NotificationsService\n  ) {\n    this.idle = chrome.idle || (browser != null ? browser.idle : null);\n  }\n\n  async init() {\n    if (!this.idle) {\n      return;\n    }\n\n    const idleHandler = (newState: string) => {\n      if (newState === \"active\") {\n        this.notificationsService.reconnectFromActivity();\n      } else {\n        this.notificationsService.disconnectFromInactivity();\n      }\n    };\n    if (this.idle.onStateChanged && this.idle.setDetectionInterval) {\n      this.idle.setDetectionInterval(IdleInterval);\n      this.idle.onStateChanged.addListener(idleHandler);\n    } else {\n      this.pollIdle(idleHandler);\n    }\n\n    if (this.idle.onStateChanged) {\n      this.idle.onStateChanged.addListener(async (newState: string) => {\n        if (newState === \"locked\") {\n          // If the screen is locked or the screensaver activates\n          const timeout = await this.stateService.getVaultTimeout();\n          if (timeout === -2) {\n            // On System Lock vault timeout option\n            const action = await this.stateService.getVaultTimeoutAction();\n            if (action === \"logOut\") {\n              await this.vaultTimeoutService.logOut();\n            } else {\n              await this.vaultTimeoutService.lock();\n            }\n          }\n        }\n      });\n    }\n  }\n\n  private pollIdle(handler: (newState: string) => void) {\n    if (this.idleTimer != null) {\n      window.clearTimeout(this.idleTimer);\n      this.idleTimer = null;\n    }\n    this.idle.queryState(IdleInterval, (state: string) => {\n      if (state !== this.idleState) {\n        this.idleState = state;\n        handler(state);\n      }\n      this.idleTimer = window.setTimeout(() => this.pollIdle(handler), 5000);\n    });\n  }\n}\n","import { AppIdService } from \"@bitwarden/common/abstractions/appId.service\";\nimport { AuthService } from \"@bitwarden/common/abstractions/auth.service\";\nimport { CryptoService } from \"@bitwarden/common/abstractions/crypto.service\";\nimport { CryptoFunctionService } from \"@bitwarden/common/abstractions/cryptoFunction.service\";\nimport { I18nService } from \"@bitwarden/common/abstractions/i18n.service\";\nimport { LogService } from \"@bitwarden/common/abstractions/log.service\";\nimport { MessagingService } from \"@bitwarden/common/abstractions/messaging.service\";\nimport { PlatformUtilsService } from \"@bitwarden/common/abstractions/platformUtils.service\";\nimport { StateService } from \"@bitwarden/common/abstractions/state.service\";\nimport { AuthenticationStatus } from \"@bitwarden/common/enums/authenticationStatus\";\nimport { Utils } from \"@bitwarden/common/misc/utils\";\nimport { EncString } from \"@bitwarden/common/models/domain/enc-string\";\nimport { SymmetricCryptoKey } from \"@bitwarden/common/models/domain/symmetric-crypto-key\";\n\nimport { BrowserApi } from \"../browser/browserApi\";\n\nimport RuntimeBackground from \"./runtime.background\";\n\nconst MessageValidTimeout = 10 * 1000;\nconst EncryptionAlgorithm = \"sha1\";\n\ntype Message = {\n  command: string;\n\n  // Filled in by this service\n  userId?: string;\n  timestamp?: number;\n\n  // Used for sharing secret\n  publicKey?: string;\n};\n\ntype OuterMessage = {\n  message: Message | EncString;\n  appId: string;\n};\n\ntype ReceiveMessage = {\n  timestamp: number;\n  command: string;\n  response?: any;\n\n  // Unlock key\n  keyB64?: string;\n};\n\ntype ReceiveMessageOuter = {\n  command: string;\n  appId: string;\n\n  // Should only have one of these.\n  message?: EncString;\n  sharedSecret?: string;\n};\n\nexport class NativeMessagingBackground {\n  private connected = false;\n  private connecting: boolean;\n  private port: browser.runtime.Port | chrome.runtime.Port;\n\n  private resolver: any = null;\n  private privateKey: ArrayBuffer = null;\n  private publicKey: ArrayBuffer = null;\n  private secureSetupResolve: any = null;\n  private sharedSecret: SymmetricCryptoKey;\n  private appId: string;\n  private validatingFingerprint: boolean;\n\n  constructor(\n    private cryptoService: CryptoService,\n    private cryptoFunctionService: CryptoFunctionService,\n    private runtimeBackground: RuntimeBackground,\n    private i18nService: I18nService,\n    private messagingService: MessagingService,\n    private appIdService: AppIdService,\n    private platformUtilsService: PlatformUtilsService,\n    private stateService: StateService,\n    private logService: LogService,\n    private authService: AuthService\n  ) {\n    this.stateService.setBiometricFingerprintValidated(false);\n\n    if (chrome?.permissions?.onAdded) {\n      // Reload extension to activate nativeMessaging\n      chrome.permissions.onAdded.addListener((permissions) => {\n        BrowserApi.reloadExtension(null);\n      });\n    }\n  }\n\n  async connect() {\n    this.appId = await this.appIdService.getAppId();\n    this.stateService.setBiometricFingerprintValidated(false);\n\n    return new Promise<void>((resolve, reject) => {\n      this.port = BrowserApi.connectNative(\"com.8bit.bitwarden\");\n\n      this.connecting = true;\n\n      const connectedCallback = () => {\n        this.connected = true;\n        this.connecting = false;\n        resolve();\n      };\n\n      // Safari has a bundled native component which is always available, no need to\n      // check if the desktop app is running.\n      if (this.platformUtilsService.isSafari()) {\n        connectedCallback();\n      }\n\n      this.port.onMessage.addListener(async (message: ReceiveMessageOuter) => {\n        switch (message.command) {\n          case \"connected\":\n            connectedCallback();\n            break;\n          case \"disconnected\":\n            if (this.connecting) {\n              reject(\"startDesktop\");\n            }\n            this.connected = false;\n            this.port.disconnect();\n            break;\n          case \"setupEncryption\": {\n            // Ignore since it belongs to another device\n            if (message.appId !== this.appId) {\n              return;\n            }\n\n            const encrypted = Utils.fromB64ToArray(message.sharedSecret);\n            const decrypted = await this.cryptoFunctionService.rsaDecrypt(\n              encrypted.buffer,\n              this.privateKey,\n              EncryptionAlgorithm\n            );\n\n            if (this.validatingFingerprint) {\n              this.validatingFingerprint = false;\n              this.stateService.setBiometricFingerprintValidated(true);\n            }\n            this.sharedSecret = new SymmetricCryptoKey(decrypted);\n            this.secureSetupResolve();\n            break;\n          }\n          case \"invalidateEncryption\":\n            // Ignore since it belongs to another device\n            if (message.appId !== this.appId) {\n              return;\n            }\n\n            this.sharedSecret = null;\n            this.privateKey = null;\n            this.connected = false;\n\n            this.messagingService.send(\"showDialog\", {\n              text: this.i18nService.t(\"nativeMessagingInvalidEncryptionDesc\"),\n              title: this.i18nService.t(\"nativeMessagingInvalidEncryptionTitle\"),\n              confirmText: this.i18nService.t(\"ok\"),\n              type: \"error\",\n            });\n            break;\n          case \"verifyFingerprint\": {\n            if (this.sharedSecret == null) {\n              this.validatingFingerprint = true;\n              this.showFingerprintDialog();\n            }\n            break;\n          }\n          case \"wrongUserId\":\n            this.showWrongUserDialog();\n            break;\n          default:\n            // Ignore since it belongs to another device\n            if (!this.platformUtilsService.isSafari() && message.appId !== this.appId) {\n              return;\n            }\n\n            this.onMessage(message.message);\n        }\n      });\n\n      this.port.onDisconnect.addListener((p: any) => {\n        let error;\n        if (BrowserApi.isWebExtensionsApi) {\n          error = p.error.message;\n        } else {\n          error = chrome.runtime.lastError.message;\n        }\n\n        this.sharedSecret = null;\n        this.privateKey = null;\n        this.connected = false;\n\n        const reason = error != null ? \"desktopIntegrationDisabled\" : null;\n        reject(reason);\n      });\n    });\n  }\n\n  showWrongUserDialog() {\n    this.messagingService.send(\"showDialog\", {\n      text: this.i18nService.t(\"nativeMessagingWrongUserDesc\"),\n      title: this.i18nService.t(\"nativeMessagingWrongUserTitle\"),\n      confirmText: this.i18nService.t(\"ok\"),\n      type: \"error\",\n    });\n  }\n\n  async send(message: Message) {\n    if (!this.connected) {\n      await this.connect();\n    }\n\n    message.userId = await this.stateService.getUserId();\n    message.timestamp = Date.now();\n\n    if (this.platformUtilsService.isSafari()) {\n      this.postMessage(message as any);\n    } else {\n      this.postMessage({ appId: this.appId, message: await this.encryptMessage(message) });\n    }\n  }\n\n  async encryptMessage(message: Message) {\n    if (this.sharedSecret == null) {\n      await this.secureCommunication();\n    }\n\n    return await this.cryptoService.encrypt(JSON.stringify(message), this.sharedSecret);\n  }\n\n  getResponse(): Promise<any> {\n    return new Promise((resolve, reject) => {\n      this.resolver = resolve;\n    });\n  }\n\n  private postMessage(message: OuterMessage) {\n    // Wrap in try-catch to when the port disconnected without triggering `onDisconnect`.\n    try {\n      const msg: any = message;\n      if (message.message instanceof EncString) {\n        // Alternative, backwards-compatible serialization of EncString\n        msg.message = {\n          encryptedString: message.message.encryptedString,\n          encryptionType: message.message.encryptionType,\n          data: message.message.data,\n          iv: message.message.iv,\n          mac: message.message.mac,\n        };\n      }\n      this.port.postMessage(msg);\n    } catch (e) {\n      this.logService.error(\"NativeMessaging port disconnected, disconnecting.\");\n\n      this.sharedSecret = null;\n      this.privateKey = null;\n      this.connected = false;\n\n      this.messagingService.send(\"showDialog\", {\n        text: this.i18nService.t(\"nativeMessagingInvalidEncryptionDesc\"),\n        title: this.i18nService.t(\"nativeMessagingInvalidEncryptionTitle\"),\n        confirmText: this.i18nService.t(\"ok\"),\n        type: \"error\",\n      });\n    }\n  }\n\n  private async onMessage(rawMessage: ReceiveMessage | EncString) {\n    let message = rawMessage as ReceiveMessage;\n    if (!this.platformUtilsService.isSafari()) {\n      message = JSON.parse(\n        await this.cryptoService.decryptToUtf8(rawMessage as EncString, this.sharedSecret)\n      );\n    }\n\n    if (Math.abs(message.timestamp - Date.now()) > MessageValidTimeout) {\n      this.logService.error(\"NativeMessage is to old, ignoring.\");\n      return;\n    }\n\n    switch (message.command) {\n      case \"biometricUnlock\": {\n        await this.stateService.setBiometricAwaitingAcceptance(null);\n\n        if (message.response === \"not enabled\") {\n          this.messagingService.send(\"showDialog\", {\n            text: this.i18nService.t(\"biometricsNotEnabledDesc\"),\n            title: this.i18nService.t(\"biometricsNotEnabledTitle\"),\n            confirmText: this.i18nService.t(\"ok\"),\n            type: \"error\",\n          });\n          break;\n        } else if (message.response === \"not supported\") {\n          this.messagingService.send(\"showDialog\", {\n            text: this.i18nService.t(\"biometricsNotSupportedDesc\"),\n            title: this.i18nService.t(\"biometricsNotSupportedTitle\"),\n            confirmText: this.i18nService.t(\"ok\"),\n            type: \"error\",\n          });\n          break;\n        }\n\n        const enabled = await this.stateService.getBiometricUnlock();\n        if (enabled === null || enabled === false) {\n          if (message.response === \"unlocked\") {\n            await this.stateService.setBiometricUnlock(true);\n          }\n          break;\n        }\n\n        // Ignore unlock if already unlocked\n        if ((await this.authService.getAuthStatus()) === AuthenticationStatus.Unlocked) {\n          break;\n        }\n\n        if (message.response === \"unlocked\") {\n          await this.cryptoService.setKey(\n            new SymmetricCryptoKey(Utils.fromB64ToArray(message.keyB64).buffer)\n          );\n\n          // Verify key is correct by attempting to decrypt a secret\n          try {\n            await this.cryptoService.getFingerprint(await this.stateService.getUserId());\n          } catch (e) {\n            this.logService.error(\"Unable to verify key: \" + e);\n            await this.cryptoService.clearKey();\n            this.showWrongUserDialog();\n\n            // Exit early\n            if (this.resolver) {\n              this.resolver(message);\n            }\n            return;\n          }\n\n          this.runtimeBackground.processMessage({ command: \"unlocked\" }, null, null);\n        }\n        break;\n      }\n      default:\n        this.logService.error(\"NativeMessage, got unknown command: \" + message.command);\n        break;\n    }\n\n    if (this.resolver) {\n      this.resolver(message);\n    }\n  }\n\n  private async secureCommunication() {\n    const [publicKey, privateKey] = await this.cryptoFunctionService.rsaGenerateKeyPair(2048);\n    this.publicKey = publicKey;\n    this.privateKey = privateKey;\n\n    this.sendUnencrypted({\n      command: \"setupEncryption\",\n      publicKey: Utils.fromBufferToB64(publicKey),\n      userId: await this.stateService.getUserId(),\n    });\n\n    return new Promise((resolve, reject) => (this.secureSetupResolve = resolve));\n  }\n\n  private async sendUnencrypted(message: Message) {\n    if (!this.connected) {\n      await this.connect();\n    }\n\n    message.timestamp = Date.now();\n\n    this.postMessage({ appId: this.appId, message: message });\n  }\n\n  private async showFingerprintDialog() {\n    const fingerprint = (\n      await this.cryptoService.getFingerprint(await this.stateService.getUserId(), this.publicKey)\n    ).join(\" \");\n\n    this.messagingService.send(\"showDialog\", {\n      html: `${this.i18nService.t(\n        \"desktopIntegrationVerificationText\"\n      )}<br><br><strong>${fingerprint}</strong>`,\n      title: this.i18nService.t(\"desktopSyncVerificationTitle\"),\n      confirmText: this.i18nService.t(\"ok\"),\n      type: \"warning\",\n    });\n  }\n}\n","import { I18nService } from \"@bitwarden/common/abstractions/i18n.service\";\nimport { LogService } from \"@bitwarden/common/abstractions/log.service\";\nimport { MessagingService } from \"@bitwarden/common/abstractions/messaging.service\";\nimport { NotificationsService } from \"@bitwarden/common/abstractions/notifications.service\";\nimport { SystemService } from \"@bitwarden/common/abstractions/system.service\";\nimport { Utils } from \"@bitwarden/common/misc/utils\";\n\nimport { AutofillService } from \"../autofill/services/abstractions/autofill.service\";\nimport { BrowserApi } from \"../browser/browserApi\";\nimport { BrowserEnvironmentService } from \"../services/browser-environment.service\";\nimport BrowserPlatformUtilsService from \"../services/browserPlatformUtils.service\";\n\nimport MainBackground from \"./main.background\";\nimport LockedVaultPendingNotificationsItem from \"./models/lockedVaultPendingNotificationsItem\";\n\nexport default class RuntimeBackground {\n  private autofillTimeout: any;\n  private pageDetailsToAutoFill: any[] = [];\n  private onInstalledReason: string = null;\n  private lockedVaultPendingNotifications: LockedVaultPendingNotificationsItem[] = [];\n\n  constructor(\n    private main: MainBackground,\n    private autofillService: AutofillService,\n    private platformUtilsService: BrowserPlatformUtilsService,\n    private i18nService: I18nService,\n    private notificationsService: NotificationsService,\n    private systemService: SystemService,\n    private environmentService: BrowserEnvironmentService,\n    private messagingService: MessagingService,\n    private logService: LogService\n  ) {\n    // onInstalled listener must be wired up before anything else, so we do it in the ctor\n    chrome.runtime.onInstalled.addListener((details: any) => {\n      this.onInstalledReason = details.reason;\n    });\n  }\n\n  async init() {\n    if (!chrome.runtime) {\n      return;\n    }\n\n    await this.checkOnInstalled();\n    const backgroundMessageListener = async (\n      msg: any,\n      sender: chrome.runtime.MessageSender,\n      sendResponse: any\n    ) => {\n      await this.processMessage(msg, sender, sendResponse);\n    };\n\n    BrowserApi.messageListener(\"runtime.background\", backgroundMessageListener);\n    if (this.main.popupOnlyContext) {\n      (window as any).bitwardenBackgroundMessageListener = backgroundMessageListener;\n    }\n  }\n\n  async processMessage(msg: any, sender: any, sendResponse: any) {\n    switch (msg.command) {\n      case \"loggedIn\":\n      case \"unlocked\": {\n        let item: LockedVaultPendingNotificationsItem;\n\n        if (this.lockedVaultPendingNotifications?.length > 0) {\n          await BrowserApi.closeLoginTab();\n\n          item = this.lockedVaultPendingNotifications.pop();\n          if (item.commandToRetry.sender?.tab?.id) {\n            await BrowserApi.focusSpecifiedTab(item.commandToRetry.sender.tab.id);\n          }\n        }\n\n        await this.main.refreshBadge();\n        await this.main.refreshMenu(false);\n        this.notificationsService.updateConnection(msg.command === \"unlocked\");\n        this.systemService.cancelProcessReload();\n\n        if (item) {\n          await BrowserApi.tabSendMessageData(\n            item.commandToRetry.sender.tab,\n            \"unlockCompleted\",\n            item\n          );\n        }\n        break;\n      }\n      case \"addToLockedVaultPendingNotifications\":\n        this.lockedVaultPendingNotifications.push(msg.data);\n        break;\n      case \"logout\":\n        await this.main.logout(msg.expired, msg.userId);\n        break;\n      case \"syncCompleted\":\n        if (msg.successfully) {\n          setTimeout(async () => {\n            await this.main.refreshBadge();\n            await this.main.refreshMenu();\n          }, 2000);\n          this.main.avatarUpdateService.loadColorFromState();\n        }\n        break;\n      case \"openPopup\":\n        await this.main.openPopup();\n        break;\n      case \"promptForLogin\":\n        await BrowserApi.createNewTab(\"popup/index.html?uilocation=popout\", true, true);\n        break;\n      case \"showDialogResolve\":\n        this.platformUtilsService.resolveDialogPromise(msg.dialogId, msg.confirmed);\n        break;\n      case \"bgCollectPageDetails\":\n        await this.main.collectPageDetailsForContentScript(sender.tab, msg.sender, sender.frameId);\n        break;\n      case \"bgUpdateContextMenu\":\n      case \"editedCipher\":\n      case \"addedCipher\":\n      case \"deletedCipher\":\n        await this.main.refreshBadge();\n        await this.main.refreshMenu();\n        break;\n      case \"bgReseedStorage\":\n        await this.main.reseedStorage();\n        break;\n      case \"collectPageDetailsResponse\":\n        switch (msg.sender) {\n          case \"autofiller\":\n          case \"autofill_cmd\": {\n            const totpCode = await this.autofillService.doAutoFillActiveTab(\n              [\n                {\n                  frameId: sender.frameId,\n                  tab: msg.tab,\n                  details: msg.details,\n                },\n              ],\n              msg.sender === \"autofill_cmd\"\n            );\n            if (totpCode != null) {\n              this.platformUtilsService.copyToClipboard(totpCode, { window: window });\n            }\n            break;\n          }\n          case \"contextMenu\":\n            clearTimeout(this.autofillTimeout);\n            this.pageDetailsToAutoFill.push({\n              frameId: sender.frameId,\n              tab: msg.tab,\n              details: msg.details,\n            });\n            this.autofillTimeout = setTimeout(async () => await this.autofillPage(msg.tab), 300);\n            break;\n          default:\n            break;\n        }\n        break;\n      case \"authResult\": {\n        const vaultUrl = this.environmentService.getWebVaultUrl();\n\n        if (msg.referrer == null || Utils.getHostname(vaultUrl) !== msg.referrer) {\n          return;\n        }\n\n        try {\n          BrowserApi.createNewTab(\n            \"popup/index.html?uilocation=popout#/sso?code=\" +\n              encodeURIComponent(msg.code) +\n              \"&state=\" +\n              encodeURIComponent(msg.state)\n          );\n        } catch {\n          this.logService.error(\"Unable to open sso popout tab\");\n        }\n        break;\n      }\n      case \"webAuthnResult\": {\n        const vaultUrl = this.environmentService.getWebVaultUrl();\n\n        if (msg.referrer == null || Utils.getHostname(vaultUrl) !== msg.referrer) {\n          return;\n        }\n\n        const params =\n          `webAuthnResponse=${encodeURIComponent(msg.data)};` +\n          `remember=${encodeURIComponent(msg.remember)}`;\n        BrowserApi.createNewTab(\n          `popup/index.html?uilocation=popout#/2fa;${params}`,\n          undefined,\n          false\n        );\n        break;\n      }\n      case \"reloadPopup\":\n        this.messagingService.send(\"reloadPopup\");\n        break;\n      case \"emailVerificationRequired\":\n        this.messagingService.send(\"showDialog\", {\n          dialogId: \"emailVerificationRequired\",\n          title: this.i18nService.t(\"emailVerificationRequired\"),\n          text: this.i18nService.t(\"emailVerificationRequiredDesc\"),\n          confirmText: this.i18nService.t(\"ok\"),\n          type: \"info\",\n        });\n        break;\n      case \"getClickedElementResponse\":\n        this.platformUtilsService.copyToClipboard(msg.identifier, { window: window });\n        break;\n      default:\n        break;\n    }\n  }\n\n  private async autofillPage(tabToAutoFill: chrome.tabs.Tab) {\n    const totpCode = await this.autofillService.doAutoFill({\n      tab: tabToAutoFill,\n      cipher: this.main.loginToAutoFill,\n      pageDetails: this.pageDetailsToAutoFill,\n      fillNewPassword: true,\n    });\n\n    if (totpCode != null) {\n      this.platformUtilsService.copyToClipboard(totpCode, { window: window });\n    }\n\n    // reset\n    this.main.loginToAutoFill = null;\n    this.pageDetailsToAutoFill = [];\n  }\n\n  private async checkOnInstalled() {\n    setTimeout(async () => {\n      if (this.onInstalledReason != null) {\n        if (this.onInstalledReason === \"install\") {\n          BrowserApi.createNewTab(\"https://bitwarden.com/browser-start/\");\n\n          if (await this.environmentService.hasManagedEnvironment()) {\n            await this.environmentService.setUrlsToManagedEnvironment();\n          }\n        }\n\n        this.onInstalledReason = null;\n      }\n    }, 100);\n  }\n}\n","import { AuthService } from \"@bitwarden/common/abstractions/auth.service\";\nimport { PlatformUtilsService } from \"@bitwarden/common/abstractions/platformUtils.service\";\nimport { AuthenticationStatus } from \"@bitwarden/common/enums/authenticationStatus\";\nimport { UriMatchType } from \"@bitwarden/common/enums/uriMatchType\";\nimport { CipherService } from \"@bitwarden/common/vault/abstractions/cipher.service\";\n\nimport { BrowserApi } from \"../browser/browserApi\";\n\nexport default class WebRequestBackground {\n  private pendingAuthRequests: any[] = [];\n  private webRequest: any;\n  private isFirefox: boolean;\n\n  constructor(\n    platformUtilsService: PlatformUtilsService,\n    private cipherService: CipherService,\n    private authService: AuthService\n  ) {\n    if (BrowserApi.manifestVersion === 2) {\n      this.webRequest = (window as any).chrome.webRequest;\n    }\n    this.isFirefox = platformUtilsService.isFirefox();\n  }\n\n  async init() {\n    if (!this.webRequest || !this.webRequest.onAuthRequired) {\n      return;\n    }\n\n    this.webRequest.onAuthRequired.addListener(\n      async (details: any, callback: any) => {\n        if (!details.url || this.pendingAuthRequests.indexOf(details.requestId) !== -1) {\n          if (callback) {\n            callback();\n          }\n          return;\n        }\n\n        this.pendingAuthRequests.push(details.requestId);\n\n        if (this.isFirefox) {\n          // eslint-disable-next-line\n          return new Promise(async (resolve, reject) => {\n            await this.resolveAuthCredentials(details.url, resolve, reject);\n          });\n        } else {\n          await this.resolveAuthCredentials(details.url, callback, callback);\n        }\n      },\n      { urls: [\"http://*/*\", \"https://*/*\"] },\n      [this.isFirefox ? \"blocking\" : \"asyncBlocking\"]\n    );\n\n    this.webRequest.onCompleted.addListener((details: any) => this.completeAuthRequest(details), {\n      urls: [\"http://*/*\"],\n    });\n    this.webRequest.onErrorOccurred.addListener(\n      (details: any) => this.completeAuthRequest(details),\n      {\n        urls: [\"http://*/*\"],\n      }\n    );\n  }\n\n  // eslint-disable-next-line\n  private async resolveAuthCredentials(domain: string, success: Function, error: Function) {\n    if ((await this.authService.getAuthStatus()) < AuthenticationStatus.Unlocked) {\n      error();\n      return;\n    }\n\n    try {\n      const ciphers = await this.cipherService.getAllDecryptedForUrl(\n        domain,\n        null,\n        UriMatchType.Host\n      );\n      if (ciphers == null || ciphers.length !== 1) {\n        error();\n        return;\n      }\n\n      success({\n        authCredentials: {\n          username: ciphers[0].login.username,\n          password: ciphers[0].login.password,\n        },\n      });\n    } catch {\n      error();\n    }\n  }\n\n  private completeAuthRequest(details: any) {\n    const i = this.pendingAuthRequests.indexOf(details.requestId);\n    if (i > -1) {\n      this.pendingAuthRequests.splice(i, 1);\n    }\n  }\n}\n","import { AvatarUpdateService as AvatarUpdateServiceAbstraction } from \"@bitwarden/common/abstractions/account/avatar-update.service\";\nimport { ApiService as ApiServiceAbstraction } from \"@bitwarden/common/abstractions/api.service\";\nimport { AppIdService as AppIdServiceAbstraction } from \"@bitwarden/common/abstractions/appId.service\";\nimport { AuditService as AuditServiceAbstraction } from \"@bitwarden/common/abstractions/audit.service\";\nimport { AuthService as AuthServiceAbstraction } from \"@bitwarden/common/abstractions/auth.service\";\nimport { CollectionService as CollectionServiceAbstraction } from \"@bitwarden/common/abstractions/collection.service\";\nimport { CryptoService as CryptoServiceAbstraction } from \"@bitwarden/common/abstractions/crypto.service\";\nimport { CryptoFunctionService as CryptoFunctionServiceAbstraction } from \"@bitwarden/common/abstractions/cryptoFunction.service\";\nimport { EncryptService } from \"@bitwarden/common/abstractions/encrypt.service\";\nimport { EventCollectionService as EventCollectionServiceAbstraction } from \"@bitwarden/common/abstractions/event/event-collection.service\";\nimport { EventUploadService as EventUploadServiceAbstraction } from \"@bitwarden/common/abstractions/event/event-upload.service\";\nimport { ExportService as ExportServiceAbstraction } from \"@bitwarden/common/abstractions/export.service\";\nimport { FileUploadService as FileUploadServiceAbstraction } from \"@bitwarden/common/abstractions/fileUpload.service\";\nimport { I18nService as I18nServiceAbstraction } from \"@bitwarden/common/abstractions/i18n.service\";\nimport { KeyConnectorService as KeyConnectorServiceAbstraction } from \"@bitwarden/common/abstractions/keyConnector.service\";\nimport { LogService as LogServiceAbstraction } from \"@bitwarden/common/abstractions/log.service\";\nimport { MessagingService as MessagingServiceAbstraction } from \"@bitwarden/common/abstractions/messaging.service\";\nimport { NotificationsService as NotificationsServiceAbstraction } from \"@bitwarden/common/abstractions/notifications.service\";\nimport { InternalOrganizationService as InternalOrganizationServiceAbstraction } from \"@bitwarden/common/abstractions/organization/organization.service.abstraction\";\nimport { PasswordGenerationService as PasswordGenerationServiceAbstraction } from \"@bitwarden/common/abstractions/passwordGeneration.service\";\nimport { PlatformUtilsService as PlatformUtilsServiceAbstraction } from \"@bitwarden/common/abstractions/platformUtils.service\";\nimport { PolicyApiServiceAbstraction } from \"@bitwarden/common/abstractions/policy/policy-api.service.abstraction\";\nimport { InternalPolicyService as InternalPolicyServiceAbstraction } from \"@bitwarden/common/abstractions/policy/policy.service.abstraction\";\nimport { ProviderService as ProviderServiceAbstraction } from \"@bitwarden/common/abstractions/provider.service\";\nimport { SearchService as SearchServiceAbstraction } from \"@bitwarden/common/abstractions/search.service\";\nimport { SendService as SendServiceAbstraction } from \"@bitwarden/common/abstractions/send.service\";\nimport { SettingsService as SettingsServiceAbstraction } from \"@bitwarden/common/abstractions/settings.service\";\nimport {\n  AbstractMemoryStorageService,\n  AbstractStorageService,\n} from \"@bitwarden/common/abstractions/storage.service\";\nimport { SystemService as SystemServiceAbstraction } from \"@bitwarden/common/abstractions/system.service\";\nimport { TokenService as TokenServiceAbstraction } from \"@bitwarden/common/abstractions/token.service\";\nimport { TotpService as TotpServiceAbstraction } from \"@bitwarden/common/abstractions/totp.service\";\nimport { TwoFactorService as TwoFactorServiceAbstraction } from \"@bitwarden/common/abstractions/twoFactor.service\";\nimport { UserVerificationApiServiceAbstraction } from \"@bitwarden/common/abstractions/userVerification/userVerification-api.service.abstraction\";\nimport { UserVerificationService as UserVerificationServiceAbstraction } from \"@bitwarden/common/abstractions/userVerification/userVerification.service.abstraction\";\nimport { UsernameGenerationService as UsernameGenerationServiceAbstraction } from \"@bitwarden/common/abstractions/usernameGeneration.service\";\nimport { VaultTimeoutService as VaultTimeoutServiceAbstraction } from \"@bitwarden/common/abstractions/vaultTimeout/vaultTimeout.service\";\nimport { VaultTimeoutSettingsService as VaultTimeoutSettingsServiceAbstraction } from \"@bitwarden/common/abstractions/vaultTimeout/vaultTimeoutSettings.service\";\nimport { StateFactory } from \"@bitwarden/common/factories/stateFactory\";\nimport { GlobalState } from \"@bitwarden/common/models/domain/global-state\";\nimport { AvatarUpdateService } from \"@bitwarden/common/services/account/avatar-update.service\";\nimport { ApiService } from \"@bitwarden/common/services/api.service\";\nimport { AppIdService } from \"@bitwarden/common/services/appId.service\";\nimport { AuditService } from \"@bitwarden/common/services/audit.service\";\nimport { AuthService } from \"@bitwarden/common/services/auth.service\";\nimport { CollectionService } from \"@bitwarden/common/services/collection.service\";\nimport { ConsoleLogService } from \"@bitwarden/common/services/consoleLog.service\";\nimport { ContainerService } from \"@bitwarden/common/services/container.service\";\nimport { EncryptServiceImplementation } from \"@bitwarden/common/services/cryptography/encrypt.service.implementation\";\nimport { MultithreadEncryptServiceImplementation } from \"@bitwarden/common/services/cryptography/multithread-encrypt.service.implementation\";\nimport { EventCollectionService } from \"@bitwarden/common/services/event/event-collection.service\";\nimport { EventUploadService } from \"@bitwarden/common/services/event/event-upload.service\";\nimport { ExportService } from \"@bitwarden/common/services/export.service\";\nimport { FileUploadService } from \"@bitwarden/common/services/fileUpload.service\";\nimport { KeyConnectorService } from \"@bitwarden/common/services/keyConnector.service\";\nimport { MemoryStorageService } from \"@bitwarden/common/services/memoryStorage.service\";\nimport { NotificationsService } from \"@bitwarden/common/services/notifications.service\";\nimport { PasswordGenerationService } from \"@bitwarden/common/services/passwordGeneration.service\";\nimport { PolicyApiService } from \"@bitwarden/common/services/policy/policy-api.service\";\nimport { ProviderService } from \"@bitwarden/common/services/provider.service\";\nimport { SearchService } from \"@bitwarden/common/services/search.service\";\nimport { SendService } from \"@bitwarden/common/services/send.service\";\nimport { StateMigrationService } from \"@bitwarden/common/services/stateMigration.service\";\nimport { SystemService } from \"@bitwarden/common/services/system.service\";\nimport { TokenService } from \"@bitwarden/common/services/token.service\";\nimport { TotpService } from \"@bitwarden/common/services/totp.service\";\nimport { TwoFactorService } from \"@bitwarden/common/services/twoFactor.service\";\nimport { UserVerificationApiService } from \"@bitwarden/common/services/userVerification/userVerification-api.service\";\nimport { UserVerificationService } from \"@bitwarden/common/services/userVerification/userVerification.service\";\nimport { UsernameGenerationService } from \"@bitwarden/common/services/usernameGeneration.service\";\nimport { VaultTimeoutSettingsService } from \"@bitwarden/common/services/vaultTimeout/vaultTimeoutSettings.service\";\nimport { WebCryptoFunctionService } from \"@bitwarden/common/services/webCryptoFunction.service\";\nimport { CipherService as CipherServiceAbstraction } from \"@bitwarden/common/vault/abstractions/cipher.service\";\nimport { FolderApiServiceAbstraction } from \"@bitwarden/common/vault/abstractions/folder/folder-api.service.abstraction\";\nimport { InternalFolderService as InternalFolderServiceAbstraction } from \"@bitwarden/common/vault/abstractions/folder/folder.service.abstraction\";\nimport { SyncNotifierService as SyncNotifierServiceAbstraction } from \"@bitwarden/common/vault/abstractions/sync/sync-notifier.service.abstraction\";\nimport { SyncService as SyncServiceAbstraction } from \"@bitwarden/common/vault/abstractions/sync/sync.service.abstraction\";\nimport { CipherView } from \"@bitwarden/common/vault/models/view/cipher.view\";\nimport { CipherService } from \"@bitwarden/common/vault/services/cipher.service\";\nimport { FolderApiService } from \"@bitwarden/common/vault/services/folder/folder-api.service\";\nimport { SyncNotifierService } from \"@bitwarden/common/vault/services/sync/sync-notifier.service\";\nimport { SyncService } from \"@bitwarden/common/vault/services/sync/sync.service\";\n\nimport ContextMenusBackground from \"../autofill/background/context-menus.background\";\nimport NotificationBackground from \"../autofill/background/notification.background\";\nimport TabsBackground from \"../autofill/background/tabs.background\";\nimport { CipherContextMenuHandler } from \"../autofill/browser/cipher-context-menu-handler\";\nimport { ContextMenuClickedHandler } from \"../autofill/browser/context-menu-clicked-handler\";\nimport { MainContextMenuHandler } from \"../autofill/browser/main-context-menu-handler\";\nimport { AutofillService as AutofillServiceAbstraction } from \"../autofill/services/abstractions/autofill.service\";\nimport AutofillService from \"../autofill/services/autofill.service\";\nimport { BrowserApi } from \"../browser/browserApi\";\nimport { SafariApp } from \"../browser/safariApp\";\nimport { flagEnabled } from \"../flags\";\nimport { UpdateBadge } from \"../listeners/update-badge\";\nimport { Account } from \"../models/account\";\nimport { PopupUtilsService } from \"../popup/services/popup-utils.service\";\nimport { BrowserStateService as StateServiceAbstraction } from \"../services/abstractions/browser-state.service\";\nimport { BrowserEnvironmentService } from \"../services/browser-environment.service\";\nimport { BrowserI18nService } from \"../services/browser-i18n.service\";\nimport { BrowserOrganizationService } from \"../services/browser-organization.service\";\nimport { BrowserPolicyService } from \"../services/browser-policy.service\";\nimport { BrowserSettingsService } from \"../services/browser-settings.service\";\nimport { BrowserStateService } from \"../services/browser-state.service\";\nimport { BrowserCryptoService } from \"../services/browserCrypto.service\";\nimport BrowserLocalStorageService from \"../services/browserLocalStorage.service\";\nimport BrowserMessagingService from \"../services/browserMessaging.service\";\nimport BrowserMessagingPrivateModeBackgroundService from \"../services/browserMessagingPrivateModeBackground.service\";\nimport BrowserPlatformUtilsService from \"../services/browserPlatformUtils.service\";\nimport { KeyGenerationService } from \"../services/keyGeneration.service\";\nimport { LocalBackedSessionStorageService } from \"../services/localBackedSessionStorage.service\";\nimport VaultTimeoutService from \"../services/vaultTimeout/vaultTimeout.service\";\nimport { BrowserFolderService } from \"../vault/services/browser-folder.service\";\nimport { VaultFilterService } from \"../vault/services/vault-filter.service\";\n\nimport CommandsBackground from \"./commands.background\";\nimport IdleBackground from \"./idle.background\";\nimport { NativeMessagingBackground } from \"./nativeMessaging.background\";\nimport RuntimeBackground from \"./runtime.background\";\nimport WebRequestBackground from \"./webRequest.background\";\n\nexport default class MainBackground {\n  messagingService: MessagingServiceAbstraction;\n  storageService: AbstractStorageService;\n  secureStorageService: AbstractStorageService;\n  memoryStorageService: AbstractMemoryStorageService;\n  i18nService: I18nServiceAbstraction;\n  platformUtilsService: PlatformUtilsServiceAbstraction;\n  logService: LogServiceAbstraction;\n  cryptoService: CryptoServiceAbstraction;\n  cryptoFunctionService: CryptoFunctionServiceAbstraction;\n  tokenService: TokenServiceAbstraction;\n  appIdService: AppIdServiceAbstraction;\n  apiService: ApiServiceAbstraction;\n  environmentService: BrowserEnvironmentService;\n  settingsService: SettingsServiceAbstraction;\n  cipherService: CipherServiceAbstraction;\n  folderService: InternalFolderServiceAbstraction;\n  collectionService: CollectionServiceAbstraction;\n  vaultTimeoutService: VaultTimeoutServiceAbstraction;\n  vaultTimeoutSettingsService: VaultTimeoutSettingsServiceAbstraction;\n  syncService: SyncServiceAbstraction;\n  passwordGenerationService: PasswordGenerationServiceAbstraction;\n  totpService: TotpServiceAbstraction;\n  autofillService: AutofillServiceAbstraction;\n  containerService: ContainerService;\n  auditService: AuditServiceAbstraction;\n  authService: AuthServiceAbstraction;\n  exportService: ExportServiceAbstraction;\n  searchService: SearchServiceAbstraction;\n  notificationsService: NotificationsServiceAbstraction;\n  stateService: StateServiceAbstraction;\n  stateMigrationService: StateMigrationService;\n  systemService: SystemServiceAbstraction;\n  eventCollectionService: EventCollectionServiceAbstraction;\n  eventUploadService: EventUploadServiceAbstraction;\n  policyService: InternalPolicyServiceAbstraction;\n  popupUtilsService: PopupUtilsService;\n  sendService: SendServiceAbstraction;\n  fileUploadService: FileUploadServiceAbstraction;\n  organizationService: InternalOrganizationServiceAbstraction;\n  providerService: ProviderServiceAbstraction;\n  keyConnectorService: KeyConnectorServiceAbstraction;\n  userVerificationService: UserVerificationServiceAbstraction;\n  twoFactorService: TwoFactorServiceAbstraction;\n  vaultFilterService: VaultFilterService;\n  usernameGenerationService: UsernameGenerationServiceAbstraction;\n  encryptService: EncryptService;\n  folderApiService: FolderApiServiceAbstraction;\n  policyApiService: PolicyApiServiceAbstraction;\n  userVerificationApiService: UserVerificationApiServiceAbstraction;\n  syncNotifierService: SyncNotifierServiceAbstraction;\n  avatarUpdateService: AvatarUpdateServiceAbstraction;\n  mainContextMenuHandler: MainContextMenuHandler;\n  cipherContextMenuHandler: CipherContextMenuHandler;\n\n  // Passed to the popup for Safari to workaround issues with theming, downloading, etc.\n  backgroundWindow = window;\n\n  onUpdatedRan: boolean;\n  onReplacedRan: boolean;\n  loginToAutoFill: CipherView = null;\n\n  private commandsBackground: CommandsBackground;\n  private contextMenusBackground: ContextMenusBackground;\n  private idleBackground: IdleBackground;\n  private notificationBackground: NotificationBackground;\n  private runtimeBackground: RuntimeBackground;\n  private tabsBackground: TabsBackground;\n  private webRequestBackground: WebRequestBackground;\n\n  private syncTimeout: any;\n  private isSafari: boolean;\n  private nativeMessagingBackground: NativeMessagingBackground;\n  popupOnlyContext: boolean;\n\n  constructor(public isPrivateMode: boolean = false) {\n    this.popupOnlyContext = isPrivateMode || BrowserApi.manifestVersion === 3;\n\n    // Services\n    const lockedCallback = async (userId?: string) => {\n      if (this.notificationsService != null) {\n        this.notificationsService.updateConnection(false);\n      }\n      await this.refreshBadge();\n      await this.refreshMenu(true);\n      if (this.systemService != null) {\n        await this.systemService.clearPendingClipboard();\n        await this.systemService.startProcessReload(this.authService);\n      }\n    };\n\n    const logoutCallback = async (expired: boolean, userId?: string) =>\n      await this.logout(expired, userId);\n\n    this.messagingService = this.popupOnlyContext\n      ? new BrowserMessagingPrivateModeBackgroundService()\n      : new BrowserMessagingService();\n    this.logService = new ConsoleLogService(false);\n    this.cryptoFunctionService = new WebCryptoFunctionService(window);\n    this.storageService = new BrowserLocalStorageService();\n    this.secureStorageService = new BrowserLocalStorageService();\n    this.memoryStorageService =\n      BrowserApi.manifestVersion === 3\n        ? new LocalBackedSessionStorageService(\n            new EncryptServiceImplementation(this.cryptoFunctionService, this.logService, false),\n            new KeyGenerationService(this.cryptoFunctionService)\n          )\n        : new MemoryStorageService();\n    this.stateMigrationService = new StateMigrationService(\n      this.storageService,\n      this.secureStorageService,\n      new StateFactory(GlobalState, Account)\n    );\n    this.stateService = new BrowserStateService(\n      this.storageService,\n      this.secureStorageService,\n      this.memoryStorageService,\n      this.logService,\n      this.stateMigrationService,\n      new StateFactory(GlobalState, Account)\n    );\n    this.platformUtilsService = new BrowserPlatformUtilsService(\n      this.messagingService,\n      (clipboardValue, clearMs) => {\n        if (this.systemService != null) {\n          this.systemService.clearClipboard(clipboardValue, clearMs);\n        }\n      },\n      async () => {\n        if (this.nativeMessagingBackground != null) {\n          const promise = this.nativeMessagingBackground.getResponse();\n\n          try {\n            await this.nativeMessagingBackground.send({ command: \"biometricUnlock\" });\n          } catch (e) {\n            return Promise.reject(e);\n          }\n\n          return promise.then((result) => result.response === \"unlocked\");\n        }\n      },\n      window\n    );\n    this.i18nService = new BrowserI18nService(BrowserApi.getUILanguage(window), this.stateService);\n    this.encryptService = flagEnabled(\"multithreadDecryption\")\n      ? new MultithreadEncryptServiceImplementation(\n          this.cryptoFunctionService,\n          this.logService,\n          true\n        )\n      : new EncryptServiceImplementation(this.cryptoFunctionService, this.logService, true);\n    this.cryptoService = new BrowserCryptoService(\n      this.cryptoFunctionService,\n      this.encryptService,\n      this.platformUtilsService,\n      this.logService,\n      this.stateService\n    );\n    this.tokenService = new TokenService(this.stateService);\n    this.appIdService = new AppIdService(this.storageService);\n    this.environmentService = new BrowserEnvironmentService(this.stateService, this.logService);\n    this.apiService = new ApiService(\n      this.tokenService,\n      this.platformUtilsService,\n      this.environmentService,\n      this.appIdService,\n      (expired: boolean) => this.logout(expired)\n    );\n    this.settingsService = new BrowserSettingsService(this.stateService);\n    this.fileUploadService = new FileUploadService(this.logService, this.apiService);\n    this.cipherService = new CipherService(\n      this.cryptoService,\n      this.settingsService,\n      this.apiService,\n      this.fileUploadService,\n      this.i18nService,\n      () => this.searchService,\n      this.logService,\n      this.stateService,\n      this.encryptService\n    );\n    this.folderService = new BrowserFolderService(\n      this.cryptoService,\n      this.i18nService,\n      this.cipherService,\n      this.stateService\n    );\n    this.folderApiService = new FolderApiService(this.folderService, this.apiService);\n    this.collectionService = new CollectionService(\n      this.cryptoService,\n      this.i18nService,\n      this.stateService\n    );\n    this.searchService = new SearchService(this.cipherService, this.logService, this.i18nService);\n    this.sendService = new SendService(\n      this.cryptoService,\n      this.apiService,\n      this.fileUploadService,\n      this.i18nService,\n      this.cryptoFunctionService,\n      this.stateService\n    );\n    this.syncNotifierService = new SyncNotifierService();\n    this.organizationService = new BrowserOrganizationService(this.stateService);\n    this.policyService = new BrowserPolicyService(this.stateService, this.organizationService);\n    this.policyApiService = new PolicyApiService(\n      this.policyService,\n      this.apiService,\n      this.stateService\n    );\n    this.keyConnectorService = new KeyConnectorService(\n      this.stateService,\n      this.cryptoService,\n      this.apiService,\n      this.tokenService,\n      this.logService,\n      this.organizationService,\n      this.cryptoFunctionService,\n      logoutCallback\n    );\n    this.vaultFilterService = new VaultFilterService(\n      this.stateService,\n      this.organizationService,\n      this.folderService,\n      this.cipherService,\n      this.collectionService,\n      this.policyService\n    );\n\n    this.twoFactorService = new TwoFactorService(this.i18nService, this.platformUtilsService);\n\n    // eslint-disable-next-line\n    const that = this;\n    const backgroundMessagingService = new (class extends MessagingServiceAbstraction {\n      // AuthService should send the messages to the background not popup.\n      send = (subscriber: string, arg: any = {}) => {\n        const message = Object.assign({}, { command: subscriber }, arg);\n        that.runtimeBackground.processMessage(message, that, null);\n      };\n    })();\n    this.authService = new AuthService(\n      this.cryptoService,\n      this.apiService,\n      this.tokenService,\n      this.appIdService,\n      this.platformUtilsService,\n      backgroundMessagingService,\n      this.logService,\n      this.keyConnectorService,\n      this.environmentService,\n      this.stateService,\n      this.twoFactorService,\n      this.i18nService,\n      this.encryptService\n    );\n\n    this.vaultTimeoutSettingsService = new VaultTimeoutSettingsService(\n      this.cryptoService,\n      this.tokenService,\n      this.policyService,\n      this.stateService\n    );\n\n    this.vaultTimeoutService = new VaultTimeoutService(\n      this.cipherService,\n      this.folderService,\n      this.collectionService,\n      this.cryptoService,\n      this.platformUtilsService,\n      this.messagingService,\n      this.searchService,\n      this.keyConnectorService,\n      this.stateService,\n      this.authService,\n      this.vaultTimeoutSettingsService,\n      lockedCallback,\n      logoutCallback\n    );\n\n    this.providerService = new ProviderService(this.stateService);\n    this.syncService = new SyncService(\n      this.apiService,\n      this.settingsService,\n      this.folderService,\n      this.cipherService,\n      this.cryptoService,\n      this.collectionService,\n      this.messagingService,\n      this.policyService,\n      this.sendService,\n      this.logService,\n      this.keyConnectorService,\n      this.stateService,\n      this.providerService,\n      this.folderApiService,\n      this.organizationService,\n      logoutCallback\n    );\n    this.eventUploadService = new EventUploadService(\n      this.apiService,\n      this.stateService,\n      this.logService\n    );\n    this.eventCollectionService = new EventCollectionService(\n      this.cipherService,\n      this.stateService,\n      this.organizationService,\n      this.eventUploadService\n    );\n    this.passwordGenerationService = new PasswordGenerationService(\n      this.cryptoService,\n      this.policyService,\n      this.stateService\n    );\n    this.totpService = new TotpService(this.cryptoFunctionService, this.logService);\n    this.autofillService = new AutofillService(\n      this.cipherService,\n      this.stateService,\n      this.totpService,\n      this.eventCollectionService,\n      this.logService\n    );\n    this.containerService = new ContainerService(this.cryptoService, this.encryptService);\n    this.auditService = new AuditService(this.cryptoFunctionService, this.apiService);\n    this.exportService = new ExportService(\n      this.folderService,\n      this.cipherService,\n      this.apiService,\n      this.cryptoService,\n      this.cryptoFunctionService\n    );\n    this.notificationsService = new NotificationsService(\n      this.syncService,\n      this.appIdService,\n      this.apiService,\n      this.environmentService,\n      logoutCallback,\n      this.logService,\n      this.stateService,\n      this.authService,\n      this.messagingService\n    );\n    this.popupUtilsService = new PopupUtilsService(isPrivateMode);\n\n    this.userVerificationApiService = new UserVerificationApiService(this.apiService);\n\n    this.userVerificationService = new UserVerificationService(\n      this.cryptoService,\n      this.i18nService,\n      this.userVerificationApiService\n    );\n\n    const systemUtilsServiceReloadCallback = () => {\n      const forceWindowReload =\n        this.platformUtilsService.isSafari() ||\n        this.platformUtilsService.isFirefox() ||\n        this.platformUtilsService.isOpera();\n      BrowserApi.reloadExtension(forceWindowReload ? window : null);\n      return Promise.resolve();\n    };\n\n    this.systemService = new SystemService(\n      this.messagingService,\n      this.platformUtilsService,\n      systemUtilsServiceReloadCallback,\n      this.stateService\n    );\n\n    // Other fields\n    this.isSafari = this.platformUtilsService.isSafari();\n\n    // Background\n    this.runtimeBackground = new RuntimeBackground(\n      this,\n      this.autofillService,\n      this.platformUtilsService as BrowserPlatformUtilsService,\n      this.i18nService,\n      this.notificationsService,\n      this.systemService,\n      this.environmentService,\n      this.messagingService,\n      this.logService\n    );\n    this.nativeMessagingBackground = new NativeMessagingBackground(\n      this.cryptoService,\n      this.cryptoFunctionService,\n      this.runtimeBackground,\n      this.i18nService,\n      this.messagingService,\n      this.appIdService,\n      this.platformUtilsService,\n      this.stateService,\n      this.logService,\n      this.authService\n    );\n    this.commandsBackground = new CommandsBackground(\n      this,\n      this.passwordGenerationService,\n      this.platformUtilsService,\n      this.vaultTimeoutService,\n      this.authService\n    );\n    this.notificationBackground = new NotificationBackground(\n      this.autofillService,\n      this.cipherService,\n      this.authService,\n      this.policyService,\n      this.folderService,\n      this.stateService\n    );\n\n    this.tabsBackground = new TabsBackground(this, this.notificationBackground);\n    if (!this.popupOnlyContext) {\n      const contextMenuClickedHandler = new ContextMenuClickedHandler(\n        (options) => this.platformUtilsService.copyToClipboard(options.text, { window: self }),\n        async (_tab) => {\n          const options = (await this.passwordGenerationService.getOptions())?.[0] ?? {};\n          const password = await this.passwordGenerationService.generatePassword(options);\n          this.platformUtilsService.copyToClipboard(password, { window: window });\n          this.passwordGenerationService.addHistory(password);\n        },\n        async (tab, cipher) => {\n          this.loginToAutoFill = cipher;\n          if (tab == null) {\n            return;\n          }\n\n          BrowserApi.tabSendMessage(tab, {\n            command: \"collectPageDetails\",\n            tab: tab,\n            sender: \"contextMenu\",\n          });\n        },\n        this.authService,\n        this.cipherService,\n        this.totpService,\n        this.eventCollectionService\n      );\n\n      this.contextMenusBackground = new ContextMenusBackground(contextMenuClickedHandler);\n    }\n\n    this.idleBackground = new IdleBackground(\n      this.vaultTimeoutService,\n      this.stateService,\n      this.notificationsService\n    );\n    this.webRequestBackground = new WebRequestBackground(\n      this.platformUtilsService,\n      this.cipherService,\n      this.authService\n    );\n\n    this.usernameGenerationService = new UsernameGenerationService(\n      this.cryptoService,\n      this.stateService,\n      this.apiService\n    );\n\n    this.avatarUpdateService = new AvatarUpdateService(this.apiService, this.stateService);\n\n    if (!this.popupOnlyContext) {\n      this.mainContextMenuHandler = new MainContextMenuHandler(\n        this.stateService,\n        this.i18nService,\n        this.logService\n      );\n\n      this.cipherContextMenuHandler = new CipherContextMenuHandler(\n        this.mainContextMenuHandler,\n        this.authService,\n        this.cipherService\n      );\n    }\n  }\n\n  async bootstrap() {\n    this.containerService.attachToGlobal(window);\n\n    await this.stateService.init();\n\n    await (this.vaultTimeoutService as VaultTimeoutService).init(true);\n    await (this.i18nService as BrowserI18nService).init();\n    await (this.eventUploadService as EventUploadService).init(true);\n    await this.runtimeBackground.init();\n    await this.notificationBackground.init();\n    await this.commandsBackground.init();\n\n    this.twoFactorService.init();\n\n    await this.tabsBackground.init();\n    if (!this.popupOnlyContext) {\n      this.contextMenusBackground?.init();\n    }\n    await this.idleBackground.init();\n    await this.webRequestBackground.init();\n\n    if (this.platformUtilsService.isFirefox() && !this.isPrivateMode) {\n      // Set Private Mode windows to the default icon - they do not share state with the background page\n      const privateWindows = await BrowserApi.getPrivateModeWindows();\n      privateWindows.forEach(async (win) => {\n        await new UpdateBadge(self).setBadgeIcon(\"\", win.id);\n      });\n\n      BrowserApi.onWindowCreated(async (win) => {\n        if (win.incognito) {\n          await new UpdateBadge(self).setBadgeIcon(\"\", win.id);\n        }\n      });\n    }\n\n    return new Promise<void>((resolve) => {\n      setTimeout(async () => {\n        await this.environmentService.setUrlsFromStorage();\n        if (!this.isPrivateMode) {\n          await this.refreshBadge();\n        }\n        this.fullSync(true);\n        setTimeout(() => this.notificationsService.init(), 2500);\n        resolve();\n      }, 500);\n    });\n  }\n\n  async refreshBadge() {\n    await new UpdateBadge(self).run({ existingServices: this as any });\n  }\n\n  async refreshMenu(forLocked = false) {\n    if (!chrome.windows || !chrome.contextMenus) {\n      return;\n    }\n\n    await MainContextMenuHandler.removeAll();\n\n    if (forLocked) {\n      await this.mainContextMenuHandler?.noAccess();\n      this.onUpdatedRan = this.onReplacedRan = false;\n      return;\n    }\n\n    await this.mainContextMenuHandler?.init();\n\n    const tab = await BrowserApi.getTabFromCurrentWindow();\n    if (tab) {\n      await this.cipherContextMenuHandler?.update(tab.url);\n      this.onUpdatedRan = this.onReplacedRan = false;\n    }\n  }\n\n  async logout(expired: boolean, userId?: string) {\n    await this.eventUploadService.uploadEvents(userId);\n\n    await Promise.all([\n      this.syncService.setLastSync(new Date(0), userId),\n      this.cryptoService.clearKeys(userId),\n      this.settingsService.clear(userId),\n      this.cipherService.clear(userId),\n      this.folderService.clear(userId),\n      this.collectionService.clear(userId),\n      this.policyService.clear(userId),\n      this.passwordGenerationService.clear(userId),\n      this.vaultTimeoutSettingsService.clear(userId),\n      this.keyConnectorService.clear(),\n      this.vaultFilterService.clear(),\n    ]);\n\n    //Needs to be checked before state is cleaned\n    const needStorageReseed = await this.needsStorageReseed();\n\n    await this.stateService.clean({ userId: userId });\n\n    if (userId == null || userId === (await this.stateService.getUserId())) {\n      this.searchService.clearIndex();\n      this.messagingService.send(\"doneLoggingOut\", { expired: expired, userId: userId });\n    }\n\n    if (needStorageReseed) {\n      await this.reseedStorage();\n    }\n\n    if (BrowserApi.manifestVersion === 3) {\n      BrowserApi.sendMessage(\"updateBadge\");\n    }\n    await this.refreshBadge();\n    await this.mainContextMenuHandler.noAccess();\n    this.notificationsService.updateConnection(false);\n    await this.systemService.clearPendingClipboard();\n    await this.systemService.startProcessReload(this.authService);\n  }\n\n  private async needsStorageReseed(): Promise<boolean> {\n    const currentVaultTimeout = await this.stateService.getVaultTimeout();\n    return currentVaultTimeout == null ? false : true;\n  }\n\n  async collectPageDetailsForContentScript(tab: any, sender: string, frameId: number = null) {\n    if (tab == null || !tab.id) {\n      return;\n    }\n\n    const options: any = {};\n    if (frameId != null) {\n      options.frameId = frameId;\n    }\n\n    BrowserApi.tabSendMessage(\n      tab,\n      {\n        command: \"collectPageDetails\",\n        tab: tab,\n        sender: sender,\n      },\n      options\n    );\n  }\n\n  async openPopup() {\n    // Chrome APIs cannot open popup\n\n    // TODO: Do we need to open this popup?\n    if (!this.isSafari) {\n      return;\n    }\n    await SafariApp.sendMessageToApp(\"showPopover\", null, true);\n  }\n\n  async reseedStorage() {\n    if (\n      !this.platformUtilsService.isChrome() &&\n      !this.platformUtilsService.isVivaldi() &&\n      !this.platformUtilsService.isOpera()\n    ) {\n      return;\n    }\n\n    const getStorage = (): Promise<any> =>\n      new Promise((resolve) => {\n        chrome.storage.local.get(null, (o: any) => resolve(o));\n      });\n\n    const clearStorage = (): Promise<void> =>\n      new Promise((resolve) => {\n        chrome.storage.local.clear(() => resolve());\n      });\n\n    const storage = await getStorage();\n    await clearStorage();\n\n    for (const key in storage) {\n      // eslint-disable-next-line\n      if (!storage.hasOwnProperty(key)) {\n        continue;\n      }\n      await this.storageService.save(key, storage[key]);\n    }\n  }\n\n  private async fullSync(override = false) {\n    const syncInternal = 6 * 60 * 60 * 1000; // 6 hours\n    const lastSync = await this.syncService.getLastSync();\n\n    let lastSyncAgo = syncInternal + 1;\n    if (lastSync != null) {\n      lastSyncAgo = new Date().getTime() - lastSync.getTime();\n    }\n\n    if (override || lastSyncAgo >= syncInternal) {\n      await this.syncService.fullSync(override);\n      this.scheduleNextSync();\n    } else {\n      this.scheduleNextSync();\n    }\n  }\n\n  private scheduleNextSync() {\n    if (this.syncTimeout) {\n      clearTimeout(this.syncTimeout);\n    }\n\n    this.syncTimeout = setTimeout(async () => await this.fullSync(), 5 * 60 * 1000); // check every 5 minutes\n  }\n}\n","import { BehaviorSubject } from \"rxjs\";\n\nimport { ServerConfig } from \"@bitwarden/common/abstractions/config/server-config\";\nimport { ConfigService } from \"@bitwarden/common/services/config/config.service\";\n\nimport { browserSession, sessionSync } from \"../decorators/session-sync-observable\";\n\n@browserSession\nexport class BrowserConfigService extends ConfigService {\n  @sessionSync<ServerConfig>({ initializer: ServerConfig.fromJSON })\n  protected _serverConfig: BehaviorSubject<ServerConfig | null>;\n}\n","import { FileDownloadRequest } from \"./fileDownloadRequest\";\n\nexport class FileDownloadBuilder {\n  get blobOptions(): any {\n    const options = this._request.blobOptions ?? {};\n    if (options.type == null) {\n      options.type = this.fileType;\n    }\n    return options;\n  }\n\n  get blob(): Blob {\n    if (this.blobOptions != null) {\n      return new Blob([this._request.blobData], this.blobOptions);\n    } else {\n      return new Blob([this._request.blobData]);\n    }\n  }\n\n  get downloadMethod(): \"save\" | \"open\" {\n    if (this._request.downloadMethod != null) {\n      return this._request.downloadMethod;\n    }\n    return this.fileType != \"application/pdf\" ? \"save\" : \"open\";\n  }\n\n  private get fileType() {\n    const fileNameLower = this._request.fileName.toLowerCase();\n    if (fileNameLower.endsWith(\".pdf\")) {\n      return \"application/pdf\";\n    } else if (fileNameLower.endsWith(\".xlsx\")) {\n      return \"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet\";\n    } else if (fileNameLower.endsWith(\".docx\")) {\n      return \"application/vnd.openxmlformats-officedocument.wordprocessingml.document\";\n    } else if (fileNameLower.endsWith(\".pptx\")) {\n      return \"application/vnd.openxmlformats-officedocument.presentationml.presentation\";\n    } else if (fileNameLower.endsWith(\".csv\")) {\n      return \"text/csv\";\n    } else if (fileNameLower.endsWith(\".png\")) {\n      return \"image/png\";\n    } else if (fileNameLower.endsWith(\".jpg\") || fileNameLower.endsWith(\".jpeg\")) {\n      return \"image/jpeg\";\n    } else if (fileNameLower.endsWith(\".gif\")) {\n      return \"image/gif\";\n    }\n    return null;\n  }\n\n  constructor(private readonly _request: FileDownloadRequest) {}\n}\n","import { Injectable } from \"@angular/core\";\n\nimport { FileDownloadService } from \"@bitwarden/common/abstractions/fileDownload/fileDownload.service\";\nimport { FileDownloadBuilder } from \"@bitwarden/common/abstractions/fileDownload/fileDownloadBuilder\";\nimport { FileDownloadRequest } from \"@bitwarden/common/abstractions/fileDownload/fileDownloadRequest\";\nimport { Utils } from \"@bitwarden/common/misc/utils\";\n\nimport { BrowserApi } from \"../browser/browserApi\";\nimport { SafariApp } from \"../browser/safariApp\";\n\n@Injectable()\nexport class BrowserFileDownloadService implements FileDownloadService {\n  download(request: FileDownloadRequest): void {\n    const builder = new FileDownloadBuilder(request);\n    if (BrowserApi.isSafariApi) {\n      let data: BlobPart = null;\n      if (builder.blobOptions.type === \"text/plain\" && typeof request.blobData === \"string\") {\n        data = request.blobData;\n      } else {\n        data = Utils.fromBufferToB64(request.blobData as ArrayBuffer);\n      }\n      SafariApp.sendMessageToApp(\n        \"downloadFile\",\n        JSON.stringify({\n          blobData: data,\n          blobOptions: request.blobOptions,\n          fileName: request.fileName,\n        }),\n        true\n      );\n    } else {\n      const a = window.document.createElement(\"a\");\n      a.href = URL.createObjectURL(builder.blob);\n      a.download = request.fileName;\n      window.document.body.appendChild(a);\n      a.click();\n      window.document.body.removeChild(a);\n    }\n  }\n}\n","import { MessagingService } from \"@bitwarden/common/abstractions/messaging.service\";\n\nexport default class BrowserMessagingPrivateModePopupService implements MessagingService {\n  send(subscriber: string, arg: any = {}) {\n    const message = Object.assign({}, { command: subscriber }, arg);\n    (window as any).bitwardenBackgroundMessageListener(message);\n  }\n}\n","import { Component } from \"@angular/core\";\n\nimport { PasswordRepromptComponent as BasePasswordRepromptComponent } from \"@bitwarden/angular/vault/components/password-reprompt.component\";\n\n@Component({\n  templateUrl: \"password-reprompt.component.html\",\n})\nexport class PasswordRepromptComponent extends BasePasswordRepromptComponent {}\n","<div class=\"modal fade\" role=\"dialog\" aria-modal=\"true\">\n  <div class=\"modal-dialog modal-dialog-scrollable\" role=\"document\">\n    <form class=\"modal-content\" #form (ngSubmit)=\"submit()\">\n      <div class=\"modal-body\">\n        <div class=\"box\">\n          <h1 class=\"box-header\">{{ \"passwordConfirmation\" | i18n }}</h1>\n          <div class=\"box-content\">\n            <div class=\"box-content-row box-content-row-flex\" appBoxRow>\n              <div class=\"row-main\">\n                <label for=\"masterPassword\">{{ \"masterPass\" | i18n }}</label>\n                <input\n                  id=\"masterPassword\"\n                  type=\"{{ showPassword ? 'text' : 'password' }}\"\n                  name=\"MasterPassword\"\n                  aria-describedby=\"masterPasswordHelp\"\n                  class=\"monospaced\"\n                  [(ngModel)]=\"masterPassword\"\n                  required\n                  appAutofocus\n                />\n              </div>\n              <div class=\"action-buttons\">\n                <button\n                  type=\"button\"\n                  class=\"row-btn\"\n                  appStopClick\n                  appA11yTitle=\"{{ 'toggleVisibility' | i18n }}\"\n                  (click)=\"togglePassword()\"\n                  [attr.aria-pressed]=\"showPassword\"\n                >\n                  <i\n                    class=\"bwi bwi-lg\"\n                    aria-hidden=\"true\"\n                    [ngClass]=\"{ 'bwi-eye': !showPassword, 'bwi-eye-slash': showPassword }\"\n                  ></i>\n                </button>\n              </div>\n            </div>\n          </div>\n          <div id=\"masterPasswordHelp\" class=\"box-footer\">\n            {{ \"passwordConfirmationDesc\" | i18n }}\n          </div>\n        </div>\n      </div>\n      <div class=\"modal-footer\">\n        <button type=\"submit\" class=\"btn btn-primary btn-submit\">\n          <span>{{ \"ok\" | i18n }}</span>\n        </button>\n        <button type=\"button\" class=\"btn btn-outline-secondary\" data-dismiss=\"modal\">\n          {{ \"cancel\" | i18n }}\n        </button>\n      </div>\n    </form>\n  </div>\n</div>\n","import { Injectable } from \"@angular/core\";\n\nimport { PasswordRepromptService as BasePasswordRepromptService } from \"@bitwarden/angular/vault/services/password-reprompt.service\";\n\nimport { PasswordRepromptComponent } from \"../components/password-reprompt.component\";\n\n@Injectable()\nexport class PasswordRepromptService extends BasePasswordRepromptService {\n  component = PasswordRepromptComponent;\n}\n","import { Injectable } from \"@angular/core\";\n\nimport { AbstractThemingService } from \"@bitwarden/angular/services/theming/theming.service.abstraction\";\nimport { I18nService } from \"@bitwarden/common/abstractions/i18n.service\";\nimport { LogService as LogServiceAbstraction } from \"@bitwarden/common/abstractions/log.service\";\nimport { PlatformUtilsService } from \"@bitwarden/common/abstractions/platformUtils.service\";\n\nimport { BrowserStateService as StateServiceAbstraction } from \"../../services/abstractions/browser-state.service\";\n\nimport { PopupUtilsService } from \"./popup-utils.service\";\n\n@Injectable()\nexport class InitService {\n  constructor(\n    private platformUtilsService: PlatformUtilsService,\n    private i18nService: I18nService,\n    private popupUtilsService: PopupUtilsService,\n    private stateService: StateServiceAbstraction,\n    private logService: LogServiceAbstraction,\n    private themingService: AbstractThemingService\n  ) {}\n\n  init() {\n    return async () => {\n      await this.stateService.init();\n\n      if (!this.popupUtilsService.inPopup(window)) {\n        window.document.body.classList.add(\"body-full\");\n      } else if (window.screen.availHeight < 600) {\n        window.document.body.classList.add(\"body-xs\");\n      } else if (window.screen.availHeight <= 800) {\n        window.document.body.classList.add(\"body-sm\");\n      }\n\n      const htmlEl = window.document.documentElement;\n      await this.themingService.monitorThemeChanges();\n      htmlEl.classList.add(\"locale_\" + this.i18nService.translationLocale);\n\n      // Workaround for slow performance on external monitors on Chrome + MacOS\n      // See: https://bugs.chromium.org/p/chromium/issues/detail?id=971701#c64\n      if (\n        this.platformUtilsService.isChrome() &&\n        navigator.platform.indexOf(\"Mac\") > -1 &&\n        this.popupUtilsService.inPopup(window) &&\n        (window.screenLeft < 0 ||\n          window.screenTop < 0 ||\n          window.screenLeft > window.screen.width ||\n          window.screenTop > window.screen.height)\n      ) {\n        htmlEl.classList.add(\"force_redraw\");\n        this.logService.info(\"Force redraw is on\");\n      }\n    };\n  }\n}\n","import { Injectable } from \"@angular/core\";\n\nimport { LockGuard as BaseLockGuardService } from \"@bitwarden/angular/guards/lock.guard\";\n\n@Injectable()\nexport class LockGuardService extends BaseLockGuardService {\n  protected homepage = \"tabs/current\";\n}\n","import { I18nService } from \"@bitwarden/common/abstractions/i18n.service\";\nimport { ConsoleLogService } from \"@bitwarden/common/services/consoleLog.service\";\nimport { SearchService } from \"@bitwarden/common/services/search.service\";\nimport { CipherService } from \"@bitwarden/common/vault/abstractions/cipher.service\";\n\nexport class PopupSearchService extends SearchService {\n  constructor(\n    private mainSearchService: SearchService,\n    cipherService: CipherService,\n    consoleLogService: ConsoleLogService,\n    i18nService: I18nService\n  ) {\n    super(cipherService, consoleLogService, i18nService);\n  }\n\n  clearIndex() {\n    throw new Error(\"Not available.\");\n  }\n\n  indexCiphers(): Promise<void> {\n    throw new Error(\"Not available.\");\n  }\n\n  getIndexForSearch() {\n    return this.mainSearchService.getIndexForSearch();\n  }\n}\n","import { Injectable } from \"@angular/core\";\n\nimport { UnauthGuard as BaseUnauthGuardService } from \"@bitwarden/angular/guards/unauth.guard\";\n\n@Injectable()\nexport class UnauthGuardService extends BaseUnauthGuardService {\n  protected homepage = \"tabs/current\";\n}\n","import { APP_INITIALIZER, LOCALE_ID, NgModule } from \"@angular/core\";\n\nimport { LockGuard as BaseLockGuardService } from \"@bitwarden/angular/guards/lock.guard\";\nimport { UnauthGuard as BaseUnauthGuardService } from \"@bitwarden/angular/guards/unauth.guard\";\nimport { MEMORY_STORAGE, SECURE_STORAGE } from \"@bitwarden/angular/services/injection-tokens\";\nimport { JslibServicesModule } from \"@bitwarden/angular/services/jslib-services.module\";\nimport { ThemingService } from \"@bitwarden/angular/services/theming/theming.service\";\nimport { AbstractThemingService } from \"@bitwarden/angular/services/theming/theming.service.abstraction\";\nimport { ApiService } from \"@bitwarden/common/abstractions/api.service\";\nimport { AppIdService } from \"@bitwarden/common/abstractions/appId.service\";\nimport { AuditService } from \"@bitwarden/common/abstractions/audit.service\";\nimport { AuthService as AuthServiceAbstraction } from \"@bitwarden/common/abstractions/auth.service\";\nimport { CollectionService } from \"@bitwarden/common/abstractions/collection.service\";\nimport { ConfigApiServiceAbstraction } from \"@bitwarden/common/abstractions/config/config-api.service.abstraction\";\nimport { ConfigServiceAbstraction } from \"@bitwarden/common/abstractions/config/config.service.abstraction\";\nimport { CryptoService } from \"@bitwarden/common/abstractions/crypto.service\";\nimport { CryptoFunctionService } from \"@bitwarden/common/abstractions/cryptoFunction.service\";\nimport { EncryptService } from \"@bitwarden/common/abstractions/encrypt.service\";\nimport { EnvironmentService } from \"@bitwarden/common/abstractions/environment.service\";\nimport { EventCollectionService } from \"@bitwarden/common/abstractions/event/event-collection.service\";\nimport { EventUploadService } from \"@bitwarden/common/abstractions/event/event-upload.service\";\nimport { ExportService } from \"@bitwarden/common/abstractions/export.service\";\nimport { FileDownloadService } from \"@bitwarden/common/abstractions/fileDownload/fileDownload.service\";\nimport { FileUploadService } from \"@bitwarden/common/abstractions/fileUpload.service\";\nimport { I18nService as I18nServiceAbstraction } from \"@bitwarden/common/abstractions/i18n.service\";\nimport { KeyConnectorService } from \"@bitwarden/common/abstractions/keyConnector.service\";\nimport { LogService as LogServiceAbstraction } from \"@bitwarden/common/abstractions/log.service\";\nimport { LoginService as LoginServiceAbstraction } from \"@bitwarden/common/abstractions/login.service\";\nimport { MessagingService } from \"@bitwarden/common/abstractions/messaging.service\";\nimport { NotificationsService } from \"@bitwarden/common/abstractions/notifications.service\";\nimport { OrganizationService } from \"@bitwarden/common/abstractions/organization/organization.service.abstraction\";\nimport { PasswordGenerationService } from \"@bitwarden/common/abstractions/passwordGeneration.service\";\nimport { PlatformUtilsService } from \"@bitwarden/common/abstractions/platformUtils.service\";\nimport { PolicyApiServiceAbstraction } from \"@bitwarden/common/abstractions/policy/policy-api.service.abstraction\";\nimport {\n  InternalPolicyService,\n  PolicyService,\n} from \"@bitwarden/common/abstractions/policy/policy.service.abstraction\";\nimport { ProviderService } from \"@bitwarden/common/abstractions/provider.service\";\nimport { SearchService as SearchServiceAbstraction } from \"@bitwarden/common/abstractions/search.service\";\nimport { SendService } from \"@bitwarden/common/abstractions/send.service\";\nimport { SettingsService } from \"@bitwarden/common/abstractions/settings.service\";\nimport {\n  StateService as BaseStateServiceAbstraction,\n  StateService,\n} from \"@bitwarden/common/abstractions/state.service\";\nimport { StateMigrationService } from \"@bitwarden/common/abstractions/stateMigration.service\";\nimport {\n  AbstractMemoryStorageService,\n  AbstractStorageService,\n} from \"@bitwarden/common/abstractions/storage.service\";\nimport { TokenService } from \"@bitwarden/common/abstractions/token.service\";\nimport { TotpService } from \"@bitwarden/common/abstractions/totp.service\";\nimport { TwoFactorService } from \"@bitwarden/common/abstractions/twoFactor.service\";\nimport { UserVerificationService } from \"@bitwarden/common/abstractions/userVerification/userVerification.service.abstraction\";\nimport { UsernameGenerationService } from \"@bitwarden/common/abstractions/usernameGeneration.service\";\nimport { VaultTimeoutService } from \"@bitwarden/common/abstractions/vaultTimeout/vaultTimeout.service\";\nimport { VaultTimeoutSettingsService } from \"@bitwarden/common/abstractions/vaultTimeout/vaultTimeoutSettings.service\";\nimport { StateFactory } from \"@bitwarden/common/factories/stateFactory\";\nimport { GlobalState } from \"@bitwarden/common/models/domain/global-state\";\nimport { AuthService } from \"@bitwarden/common/services/auth.service\";\nimport { ConsoleLogService } from \"@bitwarden/common/services/consoleLog.service\";\nimport { ContainerService } from \"@bitwarden/common/services/container.service\";\nimport { LoginService } from \"@bitwarden/common/services/login.service\";\nimport { PolicyApiService } from \"@bitwarden/common/services/policy/policy-api.service\";\nimport { SearchService } from \"@bitwarden/common/services/search.service\";\nimport { CipherService } from \"@bitwarden/common/vault/abstractions/cipher.service\";\nimport { FolderApiServiceAbstraction } from \"@bitwarden/common/vault/abstractions/folder/folder-api.service.abstraction\";\nimport {\n  FolderService,\n  InternalFolderService,\n} from \"@bitwarden/common/vault/abstractions/folder/folder.service.abstraction\";\nimport { PasswordRepromptService as PasswordRepromptServiceAbstraction } from \"@bitwarden/common/vault/abstractions/password-reprompt.service\";\nimport { SyncService } from \"@bitwarden/common/vault/abstractions/sync/sync.service.abstraction\";\nimport { FolderApiService } from \"@bitwarden/common/vault/services/folder/folder-api.service\";\n\nimport { AutofillService } from \"../../autofill/services/abstractions/autofill.service\";\nimport MainBackground from \"../../background/main.background\";\nimport { BrowserApi } from \"../../browser/browserApi\";\nimport { Account } from \"../../models/account\";\nimport { BrowserStateService as StateServiceAbstraction } from \"../../services/abstractions/browser-state.service\";\nimport { BrowserConfigService } from \"../../services/browser-config.service\";\nimport { BrowserEnvironmentService } from \"../../services/browser-environment.service\";\nimport { BrowserI18nService } from \"../../services/browser-i18n.service\";\nimport { BrowserOrganizationService } from \"../../services/browser-organization.service\";\nimport { BrowserPolicyService } from \"../../services/browser-policy.service\";\nimport { BrowserSettingsService } from \"../../services/browser-settings.service\";\nimport { BrowserStateService } from \"../../services/browser-state.service\";\nimport { BrowserFileDownloadService } from \"../../services/browserFileDownloadService\";\nimport BrowserMessagingService from \"../../services/browserMessaging.service\";\nimport BrowserMessagingPrivateModePopupService from \"../../services/browserMessagingPrivateModePopup.service\";\nimport { PasswordRepromptService } from \"../../vault/popup/services/password-reprompt.service\";\nimport { BrowserFolderService } from \"../../vault/services/browser-folder.service\";\nimport { VaultFilterService } from \"../../vault/services/vault-filter.service\";\n\nimport { DebounceNavigationService } from \"./debounceNavigationService\";\nimport { InitService } from \"./init.service\";\nimport { LockGuardService } from \"./lock-guard.service\";\nimport { PopupSearchService } from \"./popup-search.service\";\nimport { PopupUtilsService } from \"./popup-utils.service\";\nimport { UnauthGuardService } from \"./unauth-guard.service\";\n\nconst needsBackgroundInit = BrowserApi.getBackgroundPage() == null;\nconst isPrivateMode = needsBackgroundInit && BrowserApi.manifestVersion !== 3;\nconst mainBackground: MainBackground = needsBackgroundInit\n  ? createLocalBgService()\n  : BrowserApi.getBackgroundPage().bitwardenMain;\n\nfunction createLocalBgService() {\n  const localBgService = new MainBackground(isPrivateMode);\n  localBgService.bootstrap();\n  return localBgService;\n}\n\nfunction getBgService<T>(service: keyof MainBackground) {\n  return (): T => {\n    return mainBackground ? (mainBackground[service] as any as T) : null;\n  };\n}\n\n@NgModule({\n  imports: [JslibServicesModule],\n  declarations: [],\n  providers: [\n    InitService,\n    DebounceNavigationService,\n    {\n      provide: LOCALE_ID,\n      useFactory: () => getBgService<I18nServiceAbstraction>(\"i18nService\")().translationLocale,\n      deps: [],\n    },\n    {\n      provide: APP_INITIALIZER,\n      useFactory: (initService: InitService) => initService.init(),\n      deps: [InitService],\n      multi: true,\n    },\n    { provide: BaseLockGuardService, useClass: LockGuardService },\n    { provide: BaseUnauthGuardService, useClass: UnauthGuardService },\n    { provide: PopupUtilsService, useFactory: () => new PopupUtilsService(isPrivateMode) },\n    {\n      provide: MessagingService,\n      useFactory: () => {\n        return needsBackgroundInit\n          ? new BrowserMessagingPrivateModePopupService()\n          : new BrowserMessagingService();\n      },\n    },\n    {\n      provide: TwoFactorService,\n      useFactory: getBgService<TwoFactorService>(\"twoFactorService\"),\n      deps: [],\n    },\n    {\n      provide: AuthServiceAbstraction,\n      useFactory: getBgService<AuthService>(\"authService\"),\n      deps: [],\n    },\n    {\n      provide: SearchServiceAbstraction,\n      useFactory: (\n        cipherService: CipherService,\n        logService: ConsoleLogService,\n        i18nService: I18nServiceAbstraction\n      ) => {\n        return new PopupSearchService(\n          getBgService<SearchService>(\"searchService\")(),\n          cipherService,\n          logService,\n          i18nService\n        );\n      },\n      deps: [CipherService, LogServiceAbstraction, I18nServiceAbstraction],\n    },\n    { provide: AuditService, useFactory: getBgService<AuditService>(\"auditService\"), deps: [] },\n    {\n      provide: FileUploadService,\n      useFactory: getBgService<FileUploadService>(\"fileUploadService\"),\n      deps: [],\n    },\n    { provide: CipherService, useFactory: getBgService<CipherService>(\"cipherService\"), deps: [] },\n    {\n      provide: CryptoFunctionService,\n      useFactory: getBgService<CryptoFunctionService>(\"cryptoFunctionService\"),\n      deps: [],\n    },\n    {\n      provide: FolderService,\n      useFactory: (\n        cryptoService: CryptoService,\n        i18nService: I18nServiceAbstraction,\n        cipherService: CipherService,\n        stateService: StateServiceAbstraction\n      ) => {\n        return new BrowserFolderService(cryptoService, i18nService, cipherService, stateService);\n      },\n      deps: [CryptoService, I18nServiceAbstraction, CipherService, StateServiceAbstraction],\n    },\n    {\n      provide: InternalFolderService,\n      useExisting: FolderService,\n    },\n    {\n      provide: FolderApiServiceAbstraction,\n      useFactory: (folderService: InternalFolderService, apiService: ApiService) => {\n        return new FolderApiService(folderService, apiService);\n      },\n      deps: [InternalFolderService, ApiService],\n    },\n    {\n      provide: CollectionService,\n      useFactory: getBgService<CollectionService>(\"collectionService\"),\n      deps: [],\n    },\n    {\n      provide: LogServiceAbstraction,\n      useFactory: getBgService<ConsoleLogService>(\"logService\"),\n      deps: [],\n    },\n    {\n      provide: BrowserEnvironmentService,\n      useExisting: EnvironmentService,\n    },\n    {\n      provide: EnvironmentService,\n      useFactory: getBgService<EnvironmentService>(\"environmentService\"),\n      deps: [],\n    },\n    { provide: TotpService, useFactory: getBgService<TotpService>(\"totpService\"), deps: [] },\n    { provide: TokenService, useFactory: getBgService<TokenService>(\"tokenService\"), deps: [] },\n    {\n      provide: I18nServiceAbstraction,\n      useFactory: (stateService: BrowserStateService) => {\n        return new BrowserI18nService(BrowserApi.getUILanguage(window), stateService);\n      },\n      deps: [StateService],\n    },\n    {\n      provide: CryptoService,\n      useFactory: (encryptService: EncryptService) => {\n        const cryptoService = getBgService<CryptoService>(\"cryptoService\")();\n        new ContainerService(cryptoService, encryptService).attachToGlobal(self);\n        return cryptoService;\n      },\n      deps: [EncryptService],\n    },\n    {\n      provide: EventUploadService,\n      useFactory: getBgService<EventUploadService>(\"eventUploadService\"),\n      deps: [],\n    },\n    {\n      provide: EventCollectionService,\n      useFactory: getBgService<EventCollectionService>(\"eventCollectionService\"),\n      deps: [],\n    },\n    {\n      provide: PolicyService,\n      useFactory: (\n        stateService: StateServiceAbstraction,\n        organizationService: OrganizationService\n      ) => {\n        return new BrowserPolicyService(stateService, organizationService);\n      },\n      deps: [StateServiceAbstraction, OrganizationService],\n    },\n    {\n      provide: PolicyApiServiceAbstraction,\n      useFactory: (\n        policyService: InternalPolicyService,\n        apiService: ApiService,\n        stateService: StateService\n      ) => {\n        return new PolicyApiService(policyService, apiService, stateService);\n      },\n      deps: [InternalPolicyService, ApiService, StateService],\n    },\n    {\n      provide: PlatformUtilsService,\n      useFactory: getBgService<PlatformUtilsService>(\"platformUtilsService\"),\n      deps: [],\n    },\n    {\n      provide: PasswordGenerationService,\n      useFactory: getBgService<PasswordGenerationService>(\"passwordGenerationService\"),\n      deps: [],\n    },\n    { provide: ApiService, useFactory: getBgService<ApiService>(\"apiService\"), deps: [] },\n    { provide: SyncService, useFactory: getBgService<SyncService>(\"syncService\"), deps: [] },\n    {\n      provide: SettingsService,\n      useFactory: (stateService: StateServiceAbstraction) => {\n        return new BrowserSettingsService(stateService);\n      },\n      deps: [StateServiceAbstraction],\n    },\n    {\n      provide: AbstractStorageService,\n      useFactory: getBgService<AbstractStorageService>(\"storageService\"),\n      deps: [],\n    },\n    { provide: AppIdService, useFactory: getBgService<AppIdService>(\"appIdService\"), deps: [] },\n    {\n      provide: AutofillService,\n      useFactory: getBgService<AutofillService>(\"autofillService\"),\n      deps: [],\n    },\n    { provide: ExportService, useFactory: getBgService<ExportService>(\"exportService\"), deps: [] },\n    { provide: SendService, useFactory: getBgService<SendService>(\"sendService\"), deps: [] },\n    {\n      provide: KeyConnectorService,\n      useFactory: getBgService<KeyConnectorService>(\"keyConnectorService\"),\n      deps: [],\n    },\n    {\n      provide: UserVerificationService,\n      useFactory: getBgService<UserVerificationService>(\"userVerificationService\"),\n      deps: [],\n    },\n    {\n      provide: VaultTimeoutSettingsService,\n      useFactory: getBgService<VaultTimeoutSettingsService>(\"vaultTimeoutSettingsService\"),\n      deps: [],\n    },\n    {\n      provide: VaultTimeoutService,\n      useFactory: getBgService<VaultTimeoutService>(\"vaultTimeoutService\"),\n      deps: [],\n    },\n    {\n      provide: NotificationsService,\n      useFactory: getBgService<NotificationsService>(\"notificationsService\"),\n      deps: [],\n    },\n    {\n      provide: LogServiceAbstraction,\n      useFactory: getBgService<ConsoleLogService>(\"logService\"),\n      deps: [],\n    },\n    { provide: PasswordRepromptServiceAbstraction, useClass: PasswordRepromptService },\n    {\n      provide: OrganizationService,\n      useFactory: (stateService: StateServiceAbstraction) => {\n        return new BrowserOrganizationService(stateService);\n      },\n      deps: [StateServiceAbstraction],\n    },\n    {\n      provide: VaultFilterService,\n      useFactory: (\n        stateService: StateServiceAbstraction,\n        organizationService: OrganizationService,\n        folderService: FolderService,\n        policyService: PolicyService\n      ) => {\n        return new VaultFilterService(\n          stateService,\n          organizationService,\n          folderService,\n          getBgService<CipherService>(\"cipherService\")(),\n          getBgService<CollectionService>(\"collectionService\")(),\n          policyService\n        );\n      },\n      deps: [StateServiceAbstraction, OrganizationService, FolderService, PolicyService],\n    },\n    {\n      provide: ProviderService,\n      useFactory: getBgService<ProviderService>(\"providerService\"),\n      deps: [],\n    },\n    {\n      provide: SECURE_STORAGE,\n      useFactory: getBgService<AbstractStorageService>(\"secureStorageService\"),\n      deps: [],\n    },\n    {\n      provide: MEMORY_STORAGE,\n      useFactory: getBgService<AbstractStorageService>(\"memoryStorageService\"),\n    },\n    {\n      provide: StateMigrationService,\n      useFactory: getBgService<StateMigrationService>(\"stateMigrationService\"),\n      deps: [],\n    },\n    {\n      provide: StateServiceAbstraction,\n      useFactory: (\n        storageService: AbstractStorageService,\n        secureStorageService: AbstractStorageService,\n        memoryStorageService: AbstractMemoryStorageService,\n        logService: LogServiceAbstraction,\n        stateMigrationService: StateMigrationService\n      ) => {\n        return new BrowserStateService(\n          storageService,\n          secureStorageService,\n          memoryStorageService,\n          logService,\n          stateMigrationService,\n          new StateFactory(GlobalState, Account)\n        );\n      },\n      deps: [\n        AbstractStorageService,\n        SECURE_STORAGE,\n        MEMORY_STORAGE,\n        LogServiceAbstraction,\n        StateMigrationService,\n      ],\n    },\n    {\n      provide: UsernameGenerationService,\n      useFactory: getBgService<UsernameGenerationService>(\"usernameGenerationService\"),\n      deps: [],\n    },\n    {\n      provide: BaseStateServiceAbstraction,\n      useExisting: StateServiceAbstraction,\n      deps: [],\n    },\n    {\n      provide: FileDownloadService,\n      useClass: BrowserFileDownloadService,\n    },\n    {\n      provide: LoginServiceAbstraction,\n      useClass: LoginService,\n      deps: [StateServiceAbstraction],\n    },\n    {\n      provide: AbstractThemingService,\n      useFactory: (\n        stateService: StateServiceAbstraction,\n        platformUtilsService: PlatformUtilsService\n      ) => {\n        return new ThemingService(\n          stateService,\n          // Safari doesn't properly handle the (prefers-color-scheme) media query in the popup window, it always returns light.\n          // In Safari we have to use the background page instead, which comes with limitations like not dynamically changing the extension theme when the system theme is changed.\n          platformUtilsService.isSafari() ? getBgService<Window>(\"backgroundWindow\")() : window,\n          document\n        );\n      },\n      deps: [StateServiceAbstraction, PlatformUtilsService],\n    },\n    {\n      provide: ConfigServiceAbstraction,\n      useClass: BrowserConfigService,\n      deps: [StateServiceAbstraction, ConfigApiServiceAbstraction],\n    },\n  ],\n})\nexport class ServicesModule {}\n","import { A11yModule } from \"@angular/cdk/a11y\";\nimport { DragDropModule } from \"@angular/cdk/drag-drop\";\nimport { LayoutModule } from \"@angular/cdk/layout\";\nimport { OverlayModule } from \"@angular/cdk/overlay\";\nimport { ScrollingModule } from \"@angular/cdk/scrolling\";\n// eslint-disable-next-line import/order\nimport { CurrencyPipe, DatePipe } from \"@angular/common\";\n\n// Register the locales for the application\nimport \"./locales\";\n\nimport { NgModule } from \"@angular/core\";\nimport { FormsModule, ReactiveFormsModule } from \"@angular/forms\";\nimport { BrowserModule } from \"@angular/platform-browser\";\nimport { BrowserAnimationsModule } from \"@angular/platform-browser/animations\";\n\nimport { BitwardenToastModule } from \"@bitwarden/angular/components/toastr.component\";\nimport { JslibModule } from \"@bitwarden/angular/jslib.module\";\nimport { ColorPasswordCountPipe } from \"@bitwarden/angular/pipes/color-password-count.pipe\";\nimport { ColorPasswordPipe } from \"@bitwarden/angular/pipes/color-password.pipe\";\n\nimport { CollectionsComponent } from \"../popup/vault/collections.component\";\nimport { ActionButtonsComponent } from \"../vault/popup/components/action-buttons.component\";\nimport { CipherRowComponent } from \"../vault/popup/components/cipher-row.component\";\nimport { PasswordRepromptComponent } from \"../vault/popup/components/password-reprompt.component\";\nimport { AddEditCustomFieldsComponent } from \"../vault/popup/components/vault/add-edit-custom-fields.component\";\nimport { AddEditComponent } from \"../vault/popup/components/vault/add-edit.component\";\nimport { AttachmentsComponent } from \"../vault/popup/components/vault/attachments.component\";\nimport { CurrentTabComponent } from \"../vault/popup/components/vault/current-tab.component\";\nimport { PasswordHistoryComponent } from \"../vault/popup/components/vault/password-history.component\";\nimport { ShareComponent } from \"../vault/popup/components/vault/share.component\";\nimport { VaultFilterComponent } from \"../vault/popup/components/vault/vault-filter.component\";\nimport { VaultItemsComponent } from \"../vault/popup/components/vault/vault-items.component\";\nimport { VaultSelectComponent } from \"../vault/popup/components/vault/vault-select.component\";\nimport { ViewCustomFieldsComponent } from \"../vault/popup/components/vault/view-custom-fields.component\";\nimport { ViewComponent } from \"../vault/popup/components/vault/view.component\";\n\nimport { EnvironmentComponent } from \"./accounts/environment.component\";\nimport { HintComponent } from \"./accounts/hint.component\";\nimport { HomeComponent } from \"./accounts/home.component\";\nimport { LockComponent } from \"./accounts/lock.component\";\nimport { LoginWithDeviceComponent } from \"./accounts/login-with-device.component\";\nimport { LoginComponent } from \"./accounts/login.component\";\nimport { RegisterComponent } from \"./accounts/register.component\";\nimport { RemovePasswordComponent } from \"./accounts/remove-password.component\";\nimport { SetPasswordComponent } from \"./accounts/set-password.component\";\nimport { SsoComponent } from \"./accounts/sso.component\";\nimport { TwoFactorOptionsComponent } from \"./accounts/two-factor-options.component\";\nimport { TwoFactorComponent } from \"./accounts/two-factor.component\";\nimport { UpdateTempPasswordComponent } from \"./accounts/update-temp-password.component\";\nimport { AppRoutingModule } from \"./app-routing.module\";\nimport { AppComponent } from \"./app.component\";\nimport { PopOutComponent } from \"./components/pop-out.component\";\nimport { PrivateModeWarningComponent } from \"./components/private-mode-warning.component\";\nimport { SendListComponent } from \"./components/send-list.component\";\nimport { SetPinComponent } from \"./components/set-pin.component\";\nimport { UserVerificationComponent } from \"./components/user-verification.component\";\nimport { GeneratorComponent } from \"./generator/generator.component\";\nimport { PasswordGeneratorHistoryComponent } from \"./generator/password-generator-history.component\";\nimport { EffluxDatesComponent as SendEffluxDatesComponent } from \"./send/efflux-dates.component\";\nimport { SendAddEditComponent } from \"./send/send-add-edit.component\";\nimport { SendGroupingsComponent } from \"./send/send-groupings.component\";\nimport { SendTypeComponent } from \"./send/send-type.component\";\nimport { ServicesModule } from \"./services/services.module\";\nimport { AboutComponent } from \"./settings/about.component\";\nimport { AutofillComponent } from \"./settings/autofill.component\";\nimport { ExcludedDomainsComponent } from \"./settings/excluded-domains.component\";\nimport { ExportComponent } from \"./settings/export.component\";\nimport { FolderAddEditComponent } from \"./settings/folder-add-edit.component\";\nimport { FoldersComponent } from \"./settings/folders.component\";\nimport { OptionsComponent } from \"./settings/options.component\";\nimport { PremiumComponent } from \"./settings/premium.component\";\nimport { SettingsComponent } from \"./settings/settings.component\";\nimport { SyncComponent } from \"./settings/sync.component\";\nimport { VaultTimeoutInputComponent } from \"./settings/vault-timeout-input.component\";\nimport { TabsComponent } from \"./tabs.component\";\n\n@NgModule({\n  imports: [\n    A11yModule,\n    AppRoutingModule,\n    BitwardenToastModule.forRoot({\n      maxOpened: 2,\n      autoDismiss: true,\n      closeButton: true,\n      positionClass: \"toast-bottom-full-width\",\n    }),\n    BrowserAnimationsModule,\n    BrowserModule,\n    DragDropModule,\n    FormsModule,\n    JslibModule,\n    LayoutModule,\n    OverlayModule,\n    ReactiveFormsModule,\n    ScrollingModule,\n    ServicesModule,\n  ],\n  declarations: [\n    ActionButtonsComponent,\n    AddEditComponent,\n    AddEditCustomFieldsComponent,\n    AppComponent,\n    AttachmentsComponent,\n    CipherRowComponent,\n    VaultItemsComponent,\n    CollectionsComponent,\n    ColorPasswordPipe,\n    ColorPasswordCountPipe,\n    CurrentTabComponent,\n    EnvironmentComponent,\n    ExcludedDomainsComponent,\n    ExportComponent,\n    FolderAddEditComponent,\n    FoldersComponent,\n    VaultFilterComponent,\n    HintComponent,\n    HomeComponent,\n    LockComponent,\n    LoginComponent,\n    LoginWithDeviceComponent,\n    OptionsComponent,\n    GeneratorComponent,\n    PasswordGeneratorHistoryComponent,\n    PasswordHistoryComponent,\n    PasswordRepromptComponent,\n    PopOutComponent,\n    PremiumComponent,\n    PrivateModeWarningComponent,\n    RegisterComponent,\n    SendAddEditComponent,\n    SendEffluxDatesComponent,\n    SendGroupingsComponent,\n    SendListComponent,\n    SendTypeComponent,\n    SetPasswordComponent,\n    SetPinComponent,\n    SettingsComponent,\n    ShareComponent,\n    SsoComponent,\n    SyncComponent,\n    TabsComponent,\n    TwoFactorComponent,\n    TwoFactorOptionsComponent,\n    UpdateTempPasswordComponent,\n    UserVerificationComponent,\n    VaultTimeoutInputComponent,\n    ViewComponent,\n    ViewCustomFieldsComponent,\n    RemovePasswordComponent,\n    VaultSelectComponent,\n    AboutComponent,\n    AutofillComponent,\n  ],\n  providers: [CurrencyPipe, DatePipe],\n  bootstrap: [AppComponent],\n})\nexport class AppModule {}\n","import { enableProdMode } from \"@angular/core\";\nimport { platformBrowserDynamic } from \"@angular/platform-browser-dynamic\";\n\nrequire(\"./scss/popup.scss\");\n\nimport { AppModule } from \"./app.module\";\n\nif (process.env.ENV === \"production\") {\n  enableProdMode();\n}\n\nfunction init() {\n  platformBrowserDynamic().bootstrapModule(AppModule, { preserveWhitespaces: true });\n}\n\ninit();\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\tid: moduleId,\n\t\tloaded: false,\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Flag the module as loaded\n\tmodule.loaded = true;\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n// expose the modules object (__webpack_modules__)\n__webpack_require__.m = __webpack_modules__;\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","// This function allow to reference async chunks\n__webpack_require__.u = (chunkId) => {\n\t// return url for filenames based on template\n\treturn \"\" + \"encrypt-worker\" + \".js\";\n};","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","__webpack_require__.nmd = (module) => {\n\tmodule.paths = [];\n\tif (!module.children) module.children = [];\n\treturn module;\n};","var scriptUrl;\nif (__webpack_require__.g.importScripts) scriptUrl = __webpack_require__.g.location + \"\";\nvar document = __webpack_require__.g.document;\nif (!scriptUrl && document) {\n\tif (document.currentScript)\n\t\tscriptUrl = document.currentScript.src\n\tif (!scriptUrl) {\n\t\tvar scripts = document.getElementsByTagName(\"script\");\n\t\tif(scripts.length) scriptUrl = scripts[scripts.length - 1].src\n\t}\n}\n// When supporting browsers where an automatic publicPath is not supported you must specify an output.publicPath manually via configuration\n// or pass an empty string (\"\") and set the __webpack_public_path__ variable from your code to use your own logic.\nif (!scriptUrl) throw new Error(\"Automatic publicPath is not supported in this browser\");\nscriptUrl = scriptUrl.replace(/#.*$/, \"\").replace(/\\?.*$/, \"\").replace(/\\/[^\\/]+$/, \"/\");\n__webpack_require__.p = scriptUrl + \"../\";","__webpack_require__.b = document.baseURI || self.location.href;\n\n// object to store loaded and loading chunks\n// undefined = chunk not loaded, null = chunk preloaded/prefetched\n// [resolve, reject, Promise] = chunk loading, 0 = chunk loaded\nvar installedChunks = {\n\t347: 0\n};\n\n// no chunk on demand loading\n\n// no prefetching\n\n// no preloaded\n\n// no HMR\n\n// no HMR manifest\n\n__webpack_require__.O.j = (chunkId) => (installedChunks[chunkId] === 0);\n\n// install a JSONP callback for chunk loading\nvar webpackJsonpCallback = (parentChunkLoadingFunction, data) => {\n\tvar [chunkIds, moreModules, runtime] = data;\n\t// add \"moreModules\" to the modules object,\n\t// then flag all \"chunkIds\" as loaded and fire callback\n\tvar moduleId, chunkId, i = 0;\n\tif(chunkIds.some((id) => (installedChunks[id] !== 0))) {\n\t\tfor(moduleId in moreModules) {\n\t\t\tif(__webpack_require__.o(moreModules, moduleId)) {\n\t\t\t\t__webpack_require__.m[moduleId] = moreModules[moduleId];\n\t\t\t}\n\t\t}\n\t\tif(runtime) var result = runtime(__webpack_require__);\n\t}\n\tif(parentChunkLoadingFunction) parentChunkLoadingFunction(data);\n\tfor(;i < chunkIds.length; i++) {\n\t\tchunkId = chunkIds[i];\n\t\tif(__webpack_require__.o(installedChunks, chunkId) && installedChunks[chunkId]) {\n\t\t\tinstalledChunks[chunkId][0]();\n\t\t}\n\t\tinstalledChunks[chunkId] = 0;\n\t}\n\treturn __webpack_require__.O(result);\n}\n\nvar chunkLoadingGlobal = self[\"webpackChunk_bitwarden_browser\"] = self[\"webpackChunk_bitwarden_browser\"] || [];\nchunkLoadingGlobal.forEach(webpackJsonpCallback.bind(null, 0));\nchunkLoadingGlobal.push = webpackJsonpCallback.bind(null, chunkLoadingGlobal.push.bind(chunkLoadingGlobal));","// startup\n// Load entry module and return exports\n// This entry module depends on other loaded chunks and execution need to be delayed\nvar __webpack_exports__ = __webpack_require__.O(undefined, [286,902], () => (__webpack_require__(69118)))\n__webpack_exports__ = __webpack_require__.O(__webpack_exports__);\n"],"names":["deferred","leafPrototypes","getProto","remove","BitwardenToast","constructor","toastrService","toastPackage","super","opacity","BitwardenToastGlobalConfig","toastComponent","BitwardenToastModule","static","config","ngModule","providers","provide","useValue","default","numberFormats","Visa","cardLength","blocks","Mastercard","Maestro","Discover","JCB","UnionPay","Amex","Mir","Other","CreditCardNumberPipe","transform","creditCardNumber","brand","rules","length","matchingRule","find","r","chunks","total","forEach","c","push","slice","join","I18nService","I18nPipe","i18nService","id","p1","p2","p3","this","t","SearchPipe","items","searchText","prop1","prop2","prop3","trim","toLowerCase","filter","i","propValue","toString","indexOf","UserNamePipe","user","name","email","OrganizationUserType","UserTypePipe","value","Owner","Admin","User","Manager","Custom","JslibModule","forRoot","maxOpened","autoDismiss","closeButton","AuthenticationStatus","AuthService","MessagingService","KeyConnectorService","AuthGuard","authService","router","messagingService","keyConnectorService","canActivate","route","routerState","authStatus","getAuthStatus","LoggedOut","send","url","Locked","createUrlTree","queryParams","promptBiometric","includes","getConvertAccountRequired","LockGuard","homepage","loginpage","redirectUrl","UnauthGuard","nodeURL","window","inited","isNode","process","release","isBrowser","isMobileBrowser","isMobile","isAppleMobileBrowser","isAppleMobile","global","g","self","str","Uint8Array","Buffer","from","binaryString","atob","bytes","charCodeAt","fromB64ToArray","fromUrlB64ToB64","parseInt","substr","strUtf8","unescape","encodeURIComponent","arr","buffer","binary","byteLength","String","fromCharCode","btoa","fromB64toUrlB64","fromBufferToB64","b64Str","replace","encodedString","apply","decodeURIComponent","escape","Array","prototype","map","call","x","urlB64Str","output","Error","fromB64ToUtf8","utfStr","fromBufferToUrlB64","fromUtf8ToArray","Math","random","RegExp","test","uriString","isNullOrWhitespace","startsWith","hostname","validHosts","getUrl","host","parseResult","isIp","domain","search","Map","split","pair","parts","set","prop","a","b","collator","compare","localeCompare","obj","undefined","target","source","Object","assign","keys","k","Number","isNaN","getUrlObject","s","charAt","toUpperCase","bgColor","threshold","svgTextFill","bgColorHexNums","substring","hash","color","bitwardenContainerService","fromEntries","record","entries","e","destination","denormalizedPath","win","mobile","navigator","userAgent","vendor","opera","match","ms","Promise","resolve","setTimeout","URL","hasProtocol","anchor","document","createElement","href","isNotProviderUser","org","isProviderUser","regexpEmojiPresentation","init","OrganizationService","EventType","OrganizationUserStatusType","PolicyType","SecureNoteType","UriMatchType","CipherRepromptType","CipherType","LoginLinkedId","CardLinkedId","IdentityLinkedId","LinkedMetadata","propertyKey","_i18nKey","i18nKey","linkedFieldOption","linkedFieldOptions","ItemView","InitializerKey","EncryptionType","CardView","cardholderName","expMonth","expYear","code","_brand","_number","_subTitle","maskedCode","repeat","maskedNumber","number","subTitle","count","expiration","exp","formatYear","year","SymmetricCryptoKey","key","encType","AesCbc256_B64","AesCbc256_HmacSha256_B64","encKey","macKey","AesCbc128_HmacSha256_B64","keyB64","encKeyB64","macKeyB64","toJSON","arrayBuffer","AttachmentView","size","sizeName","fileName","fileSize","fromJSON","FieldView","f","type","newField","showValue","showCount","linkedId","maskedValue","IdentityView","title","middleName","address1","address2","address3","city","state","postalCode","country","company","phone","ssn","username","passportNumber","licenseNumber","_firstName","_lastName","firstName","lastName","fullName","fullAddress","address","fullAddressPart2","addressPart2","CanLaunchWhitelist","LoginUriView","u","_uri","_domain","_hostname","_host","_canLaunch","uri","RegularExpression","hostnameOrUri","hostOrUri","isWebsite","canLaunch","launchUri","LoginView","l","password","passwordRevisionDate","totp","uris","autofillOnPageLoad","hasUris","maskedPassword","some","hasTotp","Date","PasswordHistoryView","ph","lastUsedDate","SecureNoteView","n","CipherView","initializerKey","organizationId","folderId","notes","favorite","organizationUseTotp","edit","viewPassword","login","identity","card","secureNote","attachments","fields","passwordHistory","collectionIds","revisionDate","creationDate","deletedDate","reprompt","None","localData","item","Login","SecureNote","Card","Identity","hasPasswordHistory","hasAttachments","hasOldAttachments","hasFields","passwordRevisionDisplayDate","isDeleted","linkedFieldValue","get","linkedFieldI18nKey","view","CipherService","FolderService","InternalFolderService","PlatformUtilsService","AuditService","StateService","CollectionService","EventCollectionService","PolicyService","InternalPolicyService","LogService","PasswordRepromptService","ClientType","DeviceType","cipherService","folderService","platformUtilsService","auditService","stateService","collectionService","eventCollectionService","policyService","logService","passwordRepromptService","organizationService","cloneMode","onSavedCipher","onDeletedCipher","onRestoredCipher","onCancelled","onEditAttachments","onShareCipher","onEditCollections","onGeneratePassword","onGenerateUsername","editMode","collections","showPassword","showCardNumber","showCardCode","cipherType","ownershipOptions","currentDate","allowPersonal","canUseReprompt","componentName","destroy$","Subject","typeOptions","cardBrandOptions","cardExpMonthOptions","identityTitleOptions","uriMatchOptions","Domain","Host","StartsWith","Exact","Never","autofillOnPageLoadOptions","ngOnInit","writeableCollections","loadCollections","enabled","policyAppliesToActiveUser$","PersonalOwnership","pipe","concatMap","policyAppliesToActiveUser","personalOwnershipPolicyAppliesToActiveUser","takeUntil","subscribe","ngOnDestroy","next","complete","myEmail","getEmail","getAll","sort","o","status","Confirmed","load","cipherId","addEditCipherInfo","getAddEditCipherInfo","cipher","setAddEditCipherInfo","loadCipher","decrypt","Generic","organizationChanged","checked","folders$","folderViews$","previousCipherId","collect","Cipher_ClientViewed","submit","restore","showToast","encryptCipher","formPromise","saveCipher","emit","error","addUri","removeUri","splice","getCardExpMonthDisplay","trackByFunction","index","cancel","share","editCollections","delete","showDialog","deletePromise","deleteCipher","restorePromise","restoreCipher","generateUsername","generatePassword","togglePassword","getElementById","focus","Cipher_ClientToggledPasswordVisible","toggleCardNumber","Cipher_ClientToggledCardNumberVisible","toggleCardCode","Cipher_ClientToggledCardCodeVisible","toggleUriOptions","showOptions","loginUriMatchChanged","useTotp","checkPassword","checkPasswordPromise","passwordLeaked","matches","repromptChanged","Password","getAllDecrypted","readOnly","encrypt","createWithServer","updateWithServer","deleteWithServer","softDeleteWithServer","restoreWithServer","SafariApp","command","data","resolveNow","messageId","getTime","floor","MAX_SAFE_INTEGER","browser","runtime","sendNativeMessage","responseData","response","DialogPromiseExpiration","BrowserPlatformUtilsService","clipboardWriteCallback","biometricCallback","showDialogResolves","passwordDialogResolves","deviceCache","getDevice","isFirefox","FirefoxExtension","isOpera","OperaExtension","isEdge","EdgeExtension","isVivaldi","VivaldiExtension","isChrome","ChromeExtension","isSafari","SafariExtension","getDeviceString","getClientType","Browser","chrome","opr","addons","isIE","isMacAppStore","isViewOpen","sidebarView","sidebarViewName","extension","getViews","lockTimeout","options","extensionPage","getApplicationVersion","getApplicationVersionNumber","supportsWebAuthn","PublicKeyCredential","supportsDuo","text","body","confirmText","cancelText","bodyIsHtml","dialogId","html","date","isDev","isSelfHost","copyToClipboard","doc","clearing","clearMs","sendMessageToApp","then","clipboard","writeText","clipboardData","setData","queryCommandSupported","textarea","textContent","style","position","appendChild","select","execCommand","console","warn","removeChild","readFromClipboard","readText","resolveDialogPromise","confirmed","has","val","resolvePasswordDialogPromise","canceled","result","resolveObj","tryResolve","supportsBiometric","os","getBrowserInfo","version","authenticateBiometric","sidebarAction","supportsSecureStorage","manifestVersion","getManifest","manifest_version","tabsQueryFirst","active","windowId","windows","WINDOW_ID_CURRENT","tabId","tabs","currentWindow","tabsQuery","query","tab","tabSendMessage","sendMessage","lastError","message","responseCallback","incognito","callback","onCreated","addListener","getBackgroundPage","create","onMessage","msg","sender","subscriber","arg","windowType","tabToClose","update","highlighted","isWebExtensionsApi","isFirefoxOnAndroid","finally","close","i18n","getUILanguage","location","reload","w","application","connectNative","isChromeApi","permission","permissions","request","reject","getPlatformInfo","action","browserAction","isSafariApi","PopupUtilsService","privateMode","inSidebar","inTab","inPopout","inPopup","inPrivateMode","getContentScrollY","scrollingContainer","getElementsByTagName","scrollTop","setContentScrollY","scrollY","popOut","hrefParts","bodyRect","querySelector","getBoundingClientRect","width","round","height","A11yTitleDirective","el","renderer","appA11yTitle","nativeElement","hasAttribute","setAttribute","ValidationService","ApiActionDirective","validationService","ngOnChanges","changes","appApiAction","loading","captchaRequired","getSingleMessage","showError","BoxRowDirective","elRef","formEls","querySelectorAll","formEl","addEventListener","classList","add","onClick","event","contains","tagName","inputEl","click","EncString","encryptedStringOrType","iv","mac","initFromData","initFromEncryptedString","ivBytes","macBytes","dataBytes","encryptedString","encryptionType","encPieces","parseEncryptedString","Rsa2048_OaepSha256_B64","Rsa2048_OaepSha1_B64","headerPieces","orgId","decryptedValue","getKeyForDecryption","encryptService","getEncryptService","decryptToUtf8","cryptoService","getCryptoService","getOrgKey","getKeyForUserEncryption","buildDomainModel","dataObj","notEncList","hasOwnProperty","objProp","buildDataModel","notEncStringList","decryptObj","viewModel","promises","theProp","p","mapProp","all","MasterPasswordPolicyOptions","minComplexity","minLength","requireUpper","requireLower","requireNumbers","requireSpecial","CalloutComponent","useAlertRole","calloutStyle","enforcedPolicyMessage","icon","getPasswordScoreAlertDisplay","enforcedPolicyOptions","InputVerbatimDirective","appInputVerbatim","condition","disableComplete","StopClickDirective","$event","preventDefault","FieldType","addFieldType","Text","fieldType","eventType","addFieldTypeOptions","Hidden","Boolean","addFieldLinkedTypeOption","Linked","thisCipherType","setLinkedFieldOptions","firstChange","resetCipherLinkedFields","addField","removeField","field","toggleFieldValue","Cipher_ClientToggledHiddenFieldVisible","drop","previousIndex","currentIndex","TrueFalseValueDirective","elementRef","trueValue","falseValue","propagateChange","_","onHostChange","ev","writeValue","setProperty","registerOnChange","fn","registerOnTouched","setDisabledState","isDisabled","useExisting","multi","AddEditCustomFieldsComponent","toggleUriInput","AddEditComponent","popupUtilsService","showAttachments","first","params","collectionId","collection","selectedVault","openAttachmentsInPopup","currentUris","showAutoFillOnPageLoadOptions","getEnableAutoFillOnPageLoad","navigate","back","destinationUrl","currentBaseUrl","saveCipherState","showCurrentUris","allowOwnershipOptions","EncArrayBuffer","encBytes","minimumLength","ENC_TYPE_LENGTH","throwDecryptionError","b64","BaseResponse","getResponseProperty","propertyName","exactName","otherCasePropertyName","ErrorResponse","identityResponse","errorModel","responseErrorModel","validationErrors","captchaSiteKey","HCaptcha_SiteKey","statusCode","getAllMessages","messages","prefix","lastSep","lastIndexOf","CryptoService","ApiService","FileDownloadService","apiService","fileDownloadService","onUploadedAttachment","onDeletedAttachment","onReuploadedAttachment","deletePromises","reuploadPromises","emergencyAccessId","hasUpdatedKey","fileEl","files","saveCipherAttachment","cipherDomain","attachment","deleteCipherAttachment","download","downloading","canAccessAttachments","getAttachmentData","fetch","Request","cache","encBuf","fromResponse","decBuf","decryptFromBytes","blobData","hasEncKey","canAccessPremium","getCanAccessPremium","reuploadCipherAttachment","admin","saveAttachmentRawWithServer","foundAttachment","a2","file","saveAttachmentWithServer","attachmentId","deleteAttachmentWithServer","reupload","Window","AttachmentsComponent","openedAttachmentsInPopup","history","VaultFilter","selectedCollection","selectedFolder","myVaultOnly","refreshCollectionsAndFolders","resetFilter","selectedCollectionId","selectedFolderId","resetOrganization","selectedOrganizationId","buildFilter","cipherPassesFilter","TreeNode","node","parent","children","ServiceUtils","nodeTree","partIndex","delimiter","end","partName","nestedTraverse","newPartName","getTreeNodeObject","getTreeNodeObjectFromList","FolderView","DynamicTreeNode","hasId","fullList","storeCollapsedFilterNodes","collapsedFilterNodes","setCollapsedGroupings","buildCollapsedFilterNodes","Set","getCollapsedGroupings","buildOrganizations","organizations","buildNestedFolders","transformation","storedFolders","folders","ciphers","orgCiphers","oc","nestedFolders","getAllFoldersNested","nestedList","mergeMap","buildCollections","storedCollections","nestedCollections","getAllNested","checkForSingleOrganizationPolicy","firstValueFrom","SingleOrg","checkForPersonalOwnershipPolicy","nodes","folderCopy","getFolderNested","VaultFilterService","vaultFilter","allVaults","myVault","getVaultFilter","setVaultFilter","clear","filterCipherForSelectedVault","AutofillService","BroadcasterService","SyncService","SearchService","indexedEntityId","AutofocusDirective","ngZone","appAutofocus","autofocus","isStable","onStable","take","EnvironmentService","FallbackSrcDirective","onError","src","appFallbackSrc","cardIcons","RuPay","IconComponent","environmentService","iconsUrl","getIconsUrl","image","fallbackImage","imageEnabled","getDisableFavicon","setLoginIcon","setCardIcon","hostnameUri","TotpService","StopPropDirective","stopPropagation","launchCipher","copy","ActionButtonsComponent","totpService","onView","launchEvent","showView","userHasPremiumAccess","typeI18nKey","aType","protectedFields","showPasswordPrompt","displayTotpCopyButton","getCode","Cipher_ClientCopiedCardCode","CipherRowComponent","onSelected","selectCipher","viewCipher","expand","PopOutComponent","show","openOverlay","selectMyVault","selectOrganization","selectAllVaults","VaultSelectComponent","vaultFilterService","overlay","viewContainerRef","onVaultSelectionChanged","_selectedVault","BehaviorSubject","isOpen","loaded","selectedVault$","asObservable","enforcePersonalOwnership","overlayPostition","originX","originY","overlayX","overlayY","_destroy","shouldShow","handleKeyboardEvent","organizations$","orgs","firstOrganization","selectedOrganization","viewPortHeight","max","documentElement","clientHeight","innerHeight","positionStrategy","flexibleConnectedTo","buttonRef","withFlexibleDimensions","withPush","withViewportMargin","withGrowAfterOpen","withPositions","overlayRef","hasBackdrop","maxHeight","backdropClass","scrollStrategy","scrollStrategies","templatePortal","templateRef","attach","merge","outsidePointerEvents","backdropClick","detachments","dispose","organization","refresh","fillCipher","addCipher","BroadcasterSubscriptionId","CurrentTabComponent","autofillService","broadcasterService","changeDetectorRef","syncService","searchService","pageDetails","searchTypeSearch","isLoading","showOrganizations","search$","run","frameId","webExtSender","details","detectChanges","syncInProgress","loadedTimeout","debounceTime","searchVault","clearTimeout","unsubscribe","totpCode","totpTimeout","doAutoFill","fillNewPassword","isSearchable","closeOnEsc","loginCiphers","otherTypes","dontShowCards","getDontShowCardsCurrentTab","dontShowIdentities","getDontShowIdentitiesCurrentTab","hasOrganizations","getAllDecryptedForUrl","cardCiphers","identityCiphers","sortCiphersByLastUsedThenName","copyOptions","decCipher","ColorPasswordPipe","generateTemplate","character","templateGenerator","passwordArray","colorizedPassword","isSpecial","PasswordHistoryComponent","isChecked","onSharedCipher","allCollections","filterCollections","selectedCollectionIds","cipherView","orgName","shareWithServer","canSave","ShareComponent","success","replaceUrl","BrowserComponentState","json","BrowserGroupingsComponentState","collectionCounts","folderCounts","typeCounts","favoriteCiphers","noFolderCiphers","BrowserStateService","selectFolder","selectCollection","selectTrash","selectType","ComponentId","VaultFilterComponent","popupUtils","browserStateService","showLeftHeader","searchPending","deletedCount","showCollections","preventSelected","noFolderListSize","searchTimeout","hasSearched","hasLoadedAllCiphers","allCiphers","showNoFolderCiphers","folderCount","setBrowserVaultItemsComponentState","restoredScopeState","restoreState","getBrowserGroupingComponentState","replaceState","selectedTimeout","saveState","updateSelectedOrg","loadCollectionsAndFolders","loadCiphers","getCounts","loadFolders","allFolders","timeout","filterDeleted","searchCiphers","folder","deleted","updateLastLaunchedDate","vaultFilterChanged","showSearching","colId","setBrowserGroupingComponentState","activeCipherId","onCipherClicked","onCipherRightClicked","onAddCipher","onAddCipherOptions","searchPlaceholder","accessEvents","_searchText","deletedFilter","applyFilter","indexedCiphers","doSearch","rightClickCipher","addCipherOptions","isSearching","changeVaultSelection","VaultItemsComponent","noneFolder","showVaultFilter","applySavedState","previousPopupUrl","getBrowserVaultItemsComponentState","groupingTitle","folderNode","collectionNode","getNested","successfully","routeDirection","showGroupings","TokenService","tokenService","onEditCipher","onCloneCipher","passwordReprompted","cleanUp","showPremiumRequiredTotp","totpUpdateCode","interval","getTimeInterval","totpTick","totpInterval","setInterval","promptPassword","clone","showPasswordCount","togglePasswordCount","launch","Cipher_ClientCopiedHiddenField","setTextDataOnDrag","dataTransfer","downloadAttachment","clearInterval","half","totpCodeFormatted","intervalSeconds","mod","totpSec","totpDash","totpLow","SelectCopyDirective","onCopy","copyText","selection","getSelection","rangeCount","getRangeAt","stringEndPos","newLinePos","toggleFieldCount","ColorPasswordCountPipe","colorizedPasswordCount","ViewCustomFieldsComponent","fillCipherAndSave","ViewComponent","loadPageDetailsTimeout","loadPageDetails","doAutofill","loginUri","onSaved","showCustom","urls","getUrls","baseUrl","base","webVaultUrl","webVault","apiUrl","api","identityUrl","icons","notificationsUrl","notifications","resUrls","setUrls","saved","toggleCustom","EnvironmentUrls","events","keyConnector","urlsSubject","scimUrl","activeAccount$","setUrlsFromStorage","hasBaseUrl","getNotificationsUrl","getWebVaultUrl","getSendUrl","getApiUrl","getIdentityUrl","getEventsUrl","eventsUrl","getKeyConnectorUrl","keyConnectorUrl","getScimUrl","getEnvironmentUrls","envUrls","formatUrl","scim","setEnvironmentUrls","isCloud","isSelfHosted","getFlags","envFlags","JSON","parse","flagEnabled","flag","flags","BrowserEnvironmentService","hasManagedEnvironment","getManagedEnvironment","settingsHaveChanged","env","storage","managed","environment","setUrlsToManagedEnvironment","resetEnvironment","EnvironmentComponent","showEditedManagedSettings","PasswordHintRequest","LoginService","loginService","successRoute","postPasswordHint","onSuccessfulSubmit","HintComponent","HashPurpose","KeySuffixOptions","HomeComponent","formBuilder","loginInitiated","formGroup","group","rememberEmail","savedEmail","getRememberEmail","patchValue","getRememberedEmail","markAllAsTouched","invalid","setEmail","setRememberEmail","selfHostedDomain","setFormValues","SecretVerificationRequest","VaultTimeoutService","VaultTimeoutSettingsService","vaultTimeoutService","vaultTimeoutSettingsService","masterPassword","pin","pinLock","webVaultHostname","invalidPinAttempts","handlePinRequiredUnlock","handleMasterPasswordRequiredUnlock","logOut","unlockBiometric","biometricLock","getKey","Biometric","doContinue","input","doUnlockWithPin","failed","kdf","getKdfType","kdfConfig","getKdfConfig","pinSet","makeKeyFromPin","getDecryptedPinProtected","getEncKey","protectedPin","getProtectedPin","setKeyAndContinue","doUnlockWithMasterPassword","makeKey","passwordValid","getKeyHash","compareAndUpdateKeyHash","serverKeyHash","hashPassword","ServerAuthorization","masterPasswordHash","postAccountVerifyPassword","localKeyHash","LocalAuthorization","setKeyHash","decPin","pinKey","makePinKey","setDecryptedPinProtected","setKey","setEverBeenUnlocked","disableFavicon","setDisableFavicon","isPinLockSet","isBiometricLockSet","hasKeyStored","biometricText","getBiometricText","usesKeyConnector","getUsesKeyConnector","hideInput","vaultUrl","BiometricErrors","startDesktop","description","desktopIntegrationDisabled","PrivateModeWarningComponent","showWarning","LockComponent","pendingBiometric","isInitialLockScreen","disableAutoBiometricsPrompt","getDisableAutoBiometricsPrompt","biometricError","AuthRequestType","AuthenticationType","PasswordLogInCredentials","captchaToken","twoFactor","SsoLogInCredentials","codeVerifier","PasswordlessLogInCredentials","accessCode","authRequestId","decKey","localPasswordHash","PasswordlessCreateAuthRequest","deviceIdentifier","publicKey","fingerprintPhrase","CaptchaIFrame","path","iframeId","successCallback","errorCallback","infoCallback","parseFunction","parseMessage","bind","connectorLink","stop","start","iframe","contentWindow","postMessage","base64Encode","cleanup","removeEventListener","createParams","URLSearchParams","stringify","v","initComponent","validMessage","origin","parsedMessage","siteKey","locale","translationLocale","CaptchaProtectedComponent","setupCaptcha","captcha","token","info","showCaptcha","handleCaptchaRequired","CryptoFunctionService","AppIdService","PasswordGenerationService","AnonymousHubService","cryptoFunctionService","appIdService","passwordGenerationService","anonymousHubService","showResendNotification","twoFactorRoute","forcePasswordResetRoute","resendTimeout","getCurrentNavigation","getPushNotifcationObs$","confirmResponse","startPasswordlessLogin","buildAuthRequest","reqResponse","postAuthRequest","passwordlessRequest","createHubConnection","stopHubConnection","requestId","getAuthResponse","requestApproved","credentials","buildLoginCredntials","loginResponse","logIn","requiresTwoFactor","onSuccessfulLoginTwoFactorNavigate","forcePasswordReset","onSuccessfulLoginForceResetNavigate","setRememberEmailValues","onSuccessfulLogin","onSuccessfulLoginNavigate","rememberedEmail","setRememberedEmail","clearValues","authRequestKeyPair","rsaGenerateKeyPair","fingerprint","getFingerprint","getAppId","AuthenticateAndUnlock","rsaDecrypt","decMasterPasswordHash","localHashedPassword","LoginWithDeviceComponent","fullSync","FormValidationErrorsService","formValidationErrorService","selfHosted","validatedEmail","paramEmailSet","loggedEmail","queryParamsEmail","setValue","errorText","getErrorToastMessage","saveEmailSettings","clearValidators","updateValueAndValidity","valid","launchSsoBrowser","clientId","ssoRedirectUri","passwordOptions","uppercase","lowercase","numbers","special","ssoCodeVerifier","codeVerifierHash","codeChallenge","setSsoState","setSsoCodeVerifier","webUrl","validateEmail","controls","markAsTouched","toggleValidateEmail","getLoginWithDevice","reset","getFormValidationErrors","shift","errorName","errorTag","controlName","res","getKnownDevice","showLoginWithDevice","LoginComponent","showPasswordless","settings","redirectUri","KdfConfig","iterations","memory","parallelism","KdfType","DEFAULT_KDF_TYPE","PBKDF2_SHA256","DEFAULT_PBKDF2_ITERATIONS","DEFAULT_KDF_CONFIG","KeysRequest","encryptedPrivateKey","RegisterRequest","masterPasswordHint","referenceData","captchaResponse","kdfIterations","kdfMemory","kdfParallelism","InputsFieldMatch","matchTo","errorMessage","control","inputsMatchError","inputsDoesntMatchError","fieldMatchTo","fieldCtrl","fieldMatchToCtrl","setErrors","isInTrialFlow","createdAccount","showTerms","showErrorSummary","confirmMasterPassword","hint","validateInputsDoesntMatch","checkForBreaches","acceptPolicies","acceptPoliciesValidation","validator","validateFormInputsMatch","accountCreated","captchaBypassToken","characterMinimumMessage","registerResponse","registerAccount","buildRegisterRequest","successful","getStrengthResult","passwordStrengthResult","getPasswordScoreText","required","validateRegistration","hasError","isValid","passwordWeak","score","passwordLeak","makeEncKey","hashedPassword","makeKeyPair","orgInvite","getOrganizationInvitation","organizationUserId","postRegister","PasswordStrengthComponent","showText","passwordScoreColor","scoreWidth","updatePasswordStrength","masterPasswordScoreColor","masterPasswordScore","masterPasswordScoreText","masterPasswordStrengthTimeout","setPasswordScoreText","strengthResult","passwordStrength","getPasswordStrengthUserInput","userInput","atPosition","concat","RegisterComponent","OrganizationApiServiceAbstraction","organizationApiService","continuing","leaving","getManagingOrganization","convert","actionPromise","migrateUser","removeConvertAccountRequired","leave","RemovePasswordComponent","OrganizationUserResetPasswordEnrollmentRequest","SetPasswordRequest","orgIdentifier","ChangePasswordComponent","masterPasswordPolicyOptions$","enforcedPasswordPolicyOptions","strongPassword","setupSubmitActions","remakeEncKey","performSubmitActions","masterPasswordRetype","evaluateMasterPassword","PolicyApiServiceAbstraction","OrganizationUserService","policyApiService","organizationUserService","syncLoading","identifier","resetPasswordAutoEnroll","qParams","getAutoEnrollStatus","resetPasswordEnabled","getMasterPasswordPoliciesForInvitedUsers","setPassword","onSetPasswordSuccess","getKeys","userId","getUserId","userEncKey","encryptedKey","rsaEncrypt","resetRequest","resetPasswordKey","putOrganizationUserResetPasswordEnrollment","onSuccessfulChangePassword","confirmField","setKdfType","setKdfConfig","setEncKey","setEncPrivateKey","SetPasswordComponent","loggingIn","changePasswordRoute","getSsoCodeVerifier","getSsoState","checkState","getOrgIdentifierFromState","returnUri","includeUserIdentifier","initiateSsoFormPromise","preValidateSso","authorizeUrl","buildAuthorizeUrl","sameWindow","userIdentifier","getSsoUserIdentifier","orgIdFromState","sso","resetMasterPassword","onSuccessfulLoginChangePasswordNavigate","stateSplit","checkStateSplit","SsoComponent","Unlocked","open","TwoFactorService","twoFactorService","onProviderSelected","onRecoverSelected","getSupportedProviders","choose","recover","TwoFactorOptionsComponent","setSelectedProvider","TwoFactorProviderType","WebAuthnIFrame","webAuthnNewTab","btnText","append","allow","TokenTwoFactorRequest","provider","remember","TwoFactorEmailRequest","TwoFactorProviders","Authenticator","priority","premium","Yubikey","Duo","OrganizationDuo","Email","WebAuthn","selectedTwoFactorProviderType","twoFactorProvidersData","getDefaultProvider","webAuthnSupported","providerType","providerPriority","_value","clearSelectedProvider","setProviders","twoFactorProviders2","clearProviders","getProviders","webAuthnReady","selectedProviderType","webAuthn","twoFactorEmail","loginRoute","webAuthnAllow","authing","needsLock","cleanupWebAuthn","providerData","authWebAuthn","sig_request","Signature","submit_callback","sig","sendEmail","doSubmit","logInTwoFactor","doToast","emailPromise","authRequestAccessCode","postTwoFactorEmail","authingWithPassword","authingWithSso","authingWithUserApiKey","authingWithPasswordless","anotherMethod","TwoFactorComponent","showNewWindowMessage","snapshot","paramMap","isLinux","UpdateTempPasswordRequest","newKey","newPasswordHash","newEncKey","newMasterPasswordHash","putUpdateTempPassword","UpdateTempPasswordComponent","UsernameGenerationService","usernameGenerationService","comingFromAddEdit","usernameOptions","avoidAmbiguous","usernameWebsite","passTypeOptions","usernameTypeOptions","desc","subaddressOptions","catchallOptions","initForwardOptions","passwordOptionsResponse","getOptions","ambiguous","subaddressEmail","subaddressType","catchallType","website","websiteOption","generatorOptions","getGeneratorOptions","regenerateWithoutButtonPress","regenerate","typeChanged","setGeneratorOptions","regeneratePassword","regenerateUsername","sliderChanged","savePasswordOptions","addHistory","sliderInput","normalizePasswordOptions","saveOptions","saveUsernameOptions","usernameGeneratingPromise","toggleOptions","normalizeOptions","forwardOptions","forwardedService","GeneratorComponent","cipherState","SendType","getHistory","PasswordGeneratorHistoryComponent","SendFileView","SendTextView","hidden","maskedText","SendView","accessId","maxAccessCount","accessCount","deletionDate","expirationDate","disabled","hideEmail","urlB64Key","maxAccessCountReached","expired","pendingDelete","cryptoKey","SendService","BrowserPath","DateField","DatePreset","datePipe","sendService","onSavedSend","onDeletedSend","copyLink","disableSend","disableHideEmail","sendType","emailVerified","alertShown","File","sendLinkBaseUrl","link","isDateTimeLocalSupported","DisableSend","SendOptions","sendId","setDates","getEmailVerified","loadSend","setDate","getDate","hasPassword","encryptSend","encSend","uploadPromise","saveWithServer","handleCopyLinkToClipboard","copyLinkToClipboard","sendData","togglePasswordVisible","copySuccess","datesChanged","datesForm","selectedDeletionDatePreset","selectedExpirationDatePreset","defaultDeletionDateTime","defaultExpirationDateTime","fallbackDeletionDate","fallbackDeletionTime","fallbackExpirationDate","fallbackExpirationTime","deletionDatePresets","OneHour","OneDay","TwoDays","ThreeDays","SevenDays","ThirtyDays","expirationDatePresets","browserPath","Firefox","Safari","Default","formattedDeletionDate","now","miliseconds","setTime","formattedExpirationDate","safariDeletionTimePresetOptions","safariTimePresetOptions","DeletionDate","safariExpirationTimePresetOptions","ExpriationDate","nextWeek","setInitialFormValues","emitDates","valueChanges","onDeletionDatePresetSelect","clearExpiration","initialDeletionDate","toISOString","toTimeString","initialExpirationDate","twentyFourHour","noon","midnight","ams","pms","h","m","hour","minutes","midnightOption","twelveHour","noonOption","amOption","pmOption","validTimes","popOutWindow","EffluxDatesComponent","SendAddEditComponent","isUnsupportedMac","showFileSelector","showFilePopoutMessage","showFirefoxFileWarning","showSafariFileWarning","showChromiumFileWarning","appVersion","SendComponent","refreshing","sends","filteredSends","onSuccessfulLoad","selectAll","applyTextSearch","removePassword","removePasswordWithServer","onSuccessfulRemovePassword","onSuccessfulDelete","searchTextChanged","clearSelections","selectedAll","selectedType","searchSends","BrowserSendComponentState","selectSend","copySendLink","SendListComponent","disabledByPolicy","onCopySendLink","onRemovePassword","onDeleteSend","addSend","SendGroupingsComponent","calculateTypeCounts","setBrowserSendTypeComponentState","setBrowserSendComponentState","getBrowserSendComponentState","SendTypeComponent","getBrowserSendTypeComponentState","refreshTimeout","DebounceNavigationService","navigationStartSub","pairwise","lastNavigation","thisNavigation","navigationSuccessSub","lastNavigationSuccessId","navigationTrigger","AutofillComponent","enableAutoFillOnPageLoad","autoFillOnPageLoadDefault","defaultUriMatch","autoFillOnPageLoadOptions","getAutoFillOnPageLoadDefault","getDefaultUriMatch","updateAutoFillOnPageLoad","setEnableAutoFillOnPageLoad","updateAutoFillOnPageLoadDefault","setAutoFillOnPageLoadDefault","saveDefaultUriMatch","setDefaultUriMatch","AboutAutofill","ExcludedDomainsComponent","excludedDomains","existingExcludedDomains","savedDomains","getNeverDomains","loadCurrentUris","loadCurrentUrisTimeout","newExcludedDomains","getNewlyAddedDomians","validDomain","setNeverDomains","newDomain","oldDomain","uriSet","EncryptedExportType","ExportService","UserVerificationService","exportService","userVerificationService","exportForm","format","secret","filePassword","confirmFilePassword","fileEncryptionType","AccountEncrypted","formatOptions","DisablePersonalVaultExport","checkExportDisabled","startWith","adjustValidators","disable","encryptedFormat","doExport","getExportData","downloadFile","collectEvent","warningDialog","verifyUser","FileEncrypted","getPasswordProtectedExport","getExport","getFileName","User_ClientExportedVault","enable","csv","blobOptions","VerificationType","ExportScopeCalloutComponent","scopeConfig","scopeIdentifier","disableRequestOTP","sentCode","processChanges","requestOTP","onChange","OTP","MasterPassword","UserVerificationComponent","ExportComponent","FolderApiServiceAbstraction","folderApiService","onSavedFolder","onDeletedFolder","save","ThemeType","FolderAddEditComponent","folderSelected","FoldersComponent","addFolder","AbstractThemingService","saveClearClipboard","updateAutoTotpCopy","updateAddLoginNotification","updateChangedPasswordNotification","updateContextMenuItem","updateShowCardsCurrentTab","updateShowIdentitiesCurrentTab","updateFavicon","updateBadgeCounter","saveTheme","OptionsComponent","themingService","enableFavicon","enableBadgeCounter","enableAutoTotpCopy","enableContextMenuItem","enableAddLoginNotification","enableChangedPasswordNotification","showCardsCurrentTab","showIdentitiesCurrentTab","showClearClipboard","showGeneral","showAutofill","showDisplay","themeOptions","System","Light","Dark","Nord","SolarizedDark","clearClipboardOptions","getDisableAddLoginNotification","getDisableChangedPasswordNotification","getDisableContextMenuItem","getDisableAutoTotpCopy","getDisableBadgeCounter","theme","getTheme","clearClipboard","getClearClipboard","setDisableAddLoginNotification","setDisableChangedPasswordNotification","setDisableContextMenuItem","setDisableAutoTotpCopy","setDisableBadgeCounter","setDontShowCardsCurrentTab","setDontShowIdentitiesCurrentTab","updateConfiguredTheme","setClearClipboard","isPremium","price","refreshPromise","refreshIdentityToken","purchase","manage","PremiumComponent","currencyPipe","thePrice","priceString","goBack","ModalRef","_onCreated","_onClose","_onClosed","_onShow","_onShown","onClose","onClosed","onShow","onShown","shown","lastResult","closed","created","onClosedPromise","toPromise","DynamicModalComponent","modalService","cd","focusTrapFactory","modalRef","ngAfterViewInit","loadChildComponent","childComponentType","setComponentParameters","componentRef","instance","focusTrap","focusFirstTabbableElementWhenReady","componentType","componentFactory","resolveComponentFactory","modalContentRef","createComponent","destroy","getFocus","autoFocusEl","ModalInjector","_parentInjector","_additionalTokens","notFoundValue","ModalConfig","ModalService","componentFactoryResolver","applicationRef","injector","modalList","factoryResolvers","modalCount","topModal","openViewRef","modalComponentRef","openInternal","insert","hostView","replaceTopModal","allowMultipleModals","registerComponentFactoryResolver","closeAll","modal","attachToDom","createModalComponent","attachView","domElem","rootNodes","detachView","pop","setupHandlers","backdrop","modalEl","dialogEl","className","zIndex","prepend","modals","closeElement","WeakMap","showPin","masterPassOnRestart","showMasterPassOnRestart","toggleVisibility","pinProtectedKey","encPin","setProtectedPin","setEncryptedPinProtected","SetPinComponent","ConfigServiceAbstraction","AboutComponent","configService","getFullYear","serverConfig$","form","vaultTimeout","custom","hours","CUSTOM_VALUE","exceedsMinimumTimout","customTimeInMinutes","MIN_CUSTOM_MINUTES","MaximumVaultTimeout","combineLatestWith","policies$","policies","vaultTimeoutPolicy","policy","applyVaultTimeoutPolicy","getVaultTimeout","current","vaultTimeouts","every","onTouched","validate","policyError","minTimeoutError","registerOnValidatorChange","validatorChange","vaultTimeoutPolicyHours","vaultTimeoutPolicyMinutes","VaultTimeoutInputComponent","updateBiometric","updateAutoBiometricsPrompt","changePassword","RateUrls","SettingsComponent","biometric","enableAutoBiometricsPrompt","previousVaultTimeout","showChangeMasterPass","showOnLocked","vaultTimeoutActions","saveVaultTimeout","getVaultTimeoutAction","vaultTimeoutAction","newValue","setVaultTimeoutOptions","saveVaultTimeoutAction","option","vaultTimeoutActionSelectRef","updatePin","ref","clearPinProtectedKey","granted","submitted","heightAuto","buttonsStyling","titleText","iconHtml","showCancelButton","cancelButtonText","showConfirmButton","allowOutsideClick","setBiometricAwaitingAcceptance","toggleKey","race","dismiss","catch","setBiometricUnlock","setBiometricFingerprintValidated","setDisableAutoBiometricsPrompt","lock","twoStep","import","export","help","about","innerText","div","confirmButtonText","rate","deviceType","SyncComponent","lastSync","setLastSync","sync","syncPromise","last","getLastSync","toLocaleDateString","toLocaleTimeString","TabsComponent","showCurrentTab","allowSelectNone","onSavedCollections","loadCipherCollections","saveCollections","saveCollectionsWithServer","CollectionsComponent","routes","redirectTo","pathMatch","component","runGuardsAndResolvers","NoRouteReuseStrategy","shouldDetach","store","handle","shouldAttach","retrieve","shouldReuseRoute","future","curr","AppRoutingModule","useClass","useHash","onSameUrlNavigation","queryShown","optional","queryChildRoute","queryTranslate","direction","axis","to","boxShadow","speed","queryTranslateX","queryTranslateY","inSlideLeft","outSlideRight","inSlideUp","outSlideDown","inSlideDown","routerTransition","fromState","toState","AppComponent","sanitizer","lastActivity","clearComponentStates","activeUserId","runOutsideAngular","onmousedown","recordActivity","ontouchstart","onclick","onscroll","onkeypress","bitwardenPopupMainMessageListener","sendResponse","forceWindowReload","urlAfterRedirects","getState","outlet","activatedRouteData","activatedRoute","setLastActive","sanitize","enableHtml","trustedHtml","timeOut","iconClasses","timer","getIsAuthenticated","WINDOW","MEMORY_STORAGE","SECURE_STORAGE","STATE_FACTORY","STATE_SERVICE_USE_CACHE","LOGOUT_CALLBACK","LOCKED_CALLBACK","LOCALES_DIRECTORY","SYSTEM_LANGUAGE","LOG_MAC_FAILURES","AccountService","InternalAccountService","StateVersion","ConfigApiServiceAbstraction","EncryptService","EventUploadService","FileUploadService","NotificationsService","ProviderService","SettingsService","StateMigrationService","AbstractStorageService","AbstractMemoryStorageService","TYPE","UserVerificationApiServiceAbstraction","AccountFactory","accountConstructor","args","GlobalStateFactory","globalStateConstructor","StateFactory","globalStateFactory","accountFactory","createGlobal","createAccount","ServerConfigData","serverConfigResponse","gitHash","server","ThirdPartyServerConfigData","utcDate","EnvironmentServerConfigData","vault","EncryptionPair","encrypted","decrypted","ArrayBuffer","decryptedFromJson","encryptedFromJson","DataEncryptionPair","TemporaryDataEncryption","AccountData","passwordGenerationHistory","AccountKeys","cryptoSymmetricKey","organizationKeys","providerKeys","privateKey","cryptoMasterKey","initRecordEncryptionPairsFromJSON","decObj","AccountProfile","environmentUrls","pinProtected","serverConfig","AccountTokens","profile","tokens","WindowState","GlobalState","stateVersion","One","UpdateAvatarRequest","avatarColor","_avatarUpdate$","avatarUpdate$","loadColorFromState","getAvatarColor","pushUpdate","putAvatar","setAvatarColor","NotificationType","NotificationResponse","contextId","payload","SyncCipherCreate","SyncCipherDelete","SyncCipherUpdate","SyncLoginDelete","SyncCipherNotification","SyncFolderCreate","SyncFolderDelete","SyncFolderUpdate","SyncFolderNotification","SyncVault","SyncCiphers","SyncOrgKeys","SyncSettings","LogOut","UserNotification","SyncSendCreate","SyncSendUpdate","SyncSendDelete","SyncSendNotification","AuthRequest","AuthRequestResponse","AuthRequestPushNotification","anonHubConnection","HubConnectionBuilder","withUrl","skipNegotiation","transport","withHubProtocol","MessagePackHubProtocol","build","on","ProcessNotification","notification","authResponsePushNotifiction","DeviceRequest","appId","pushToken","TokenRequest","device","alterIdentityTokenHeaders","headers","setTwoFactor","setPasswordlessAccessCode","passwordlessAuthRequest","toIdentityToken","scope","client_id","deviceName","authRequest","twoFactorToken","twoFactorProvider","twoFactorRemember","UserApiTokenRequest","clientSecret","grant_type","client_secret","ApiKeyResponse","apiKey","requestDeviceType","requestIpAddress","requestFingerprint","responseDate","requestDate","requestDateUTC","UTC","getUTCFullYear","getUTCMonth","getUTCHours","getUTCMinutes","getUTCSeconds","getUTCMilliseconds","dateNow","dateNowUTC","isExpired","isAnswered","RegisterResponse","BillingResponse","invoices","transactions","balance","paymentSource","BillingSourceResponse","BillingTransactionResponse","BillingInvoiceResponse","hasNoHistory","cardBrand","needsVerification","pdfUrl","paid","amount","createdDate","refunded","partiallyRefunded","refundedAmount","paymentMethodType","BillingHistoryResponse","BillingPaymentResponse","BreachAccountResponse","addedDate","breachDate","dataClasses","isActive","isVerified","logoPath","modifiedDate","pwnCount","SelectionReadOnlyResponse","hidePasswords","CollectionResponse","externalId","CollectionDetailsResponse","CollectionAccessDetailsResponse","groups","users","assigned","DeviceVerificationResponse","isDeviceVerificationSectionEnabled","unknownDeviceVerificationEnabled","GlobalDomainResponse","domains","excluded","DomainsResponse","globalEquivalentDomains","equivalentDomains","d","CardApi","FieldApi","IdentityApi","LoginUriApi","LoginApi","SecureNoteApi","AttachmentResponse","PasswordHistoryResponse","CipherResponse","EmergencyAccessGranteeDetailsResponse","granteeId","waitTimeDays","EmergencyAccessGrantorDetailsResponse","grantorId","EmergencyAccessTakeoverResponse","keyEncrypted","EmergencyAccessViewResponse","EventResponse","providerId","groupId","policyId","providerUserId","providerOrganizationId","actingUserId","ipAddress","installationId","systemUser","IdentityCaptchaResponse","IdentityTokenResponse","accessToken","access_token","expiresIn","expires_in","refreshToken","refresh_token","tokenType","token_type","apiUseKeyConnector","IdentityTwoFactorResponse","twoFactorProviders","KeyConnectorUserKeyResponse","ListResponse","dr","continuationToken","OrganizationConnectionResponse","configType","rawConfig","OrganizationExportResponse","OrganizationSponsorshipSyncStatusResponse","lastSyncDate","PermissionsApi","accessEventLogs","accessImportExport","accessReports","createNewCollections","editAnyCollection","deleteAnyCollection","editAssignedCollections","deleteAssignedCollections","manageCiphers","manageGroups","manageSso","managePolicies","manageUsers","manageResetPassword","manageScim","ProfileOrganizationResponse","usePolicies","useGroups","useDirectory","useEvents","use2fa","useApi","useSso","useKeyConnector","useScim","useCustomPermissions","useResetPassword","useSecretsManager","selfHost","usersGetPremium","seats","maxCollections","maxStorageGb","hasPublicAndPrivateKeys","ssoBound","resetPasswordEnrolled","providerName","familySponsorshipFriendlyName","familySponsorshipAvailable","planProductType","keyConnectorEnabled","familySponsorshipLastSyncDateString","familySponsorshipLastSyncDate","familySponsorshipValidUntilString","familySponsorshipValidUntil","familySponsorshipToDelete","accessSecretsManager","ProfileProviderOrganizationResponse","ProfileProviderResponse","ProfileResponse","providerOrganizations","premiumPersonally","premiumFromOrganization","culture","twoFactorEnabled","securityStamp","PaymentResponse","userProfile","paymentIntentClientSecret","PlanResponse","product","isAnnual","nameLocalizationKey","descriptionLocalizationKey","canBeUsedByBusiness","baseSeats","baseStorageGb","maxUsers","hasAdditionalSeatsOption","maxAdditionalSeats","hasAdditionalStorageOption","maxAdditionalStorage","hasPremiumAccessOption","trialPeriodDays","hasSelfHost","hasPolicies","hasGroups","hasDirectory","hasEvents","has2fa","hasApi","hasSso","hasResetPassword","upgradeSortOrder","displaySortOrder","legacyYear","stripePlanId","stripeSeatPlanId","stripeStoragePlanId","stripePremiumAccessPlanId","basePrice","seatPrice","additionalStoragePricePerGb","premiumAccessOptionPrice","PolicyResponse","PreloginResponse","ProviderOrganizationResponse","userCount","plan","ProviderOrganizationOrganizationDetailsResponse","organizationName","OrganizationUserBulkPublicKeyResponse","ProviderUserBulkPublicKeyResponse","ProviderUserBulkResponse","ProviderUserResponse","ProviderUserUserDetailsResponse","ProviderResponse","businessName","billingEmail","SendFileApi","SendTextApi","SendAccessResponse","creatorIdentifier","SendFileDownloadDataResponse","SendResponse","SendFileUploadDataResponse","fileUploadType","SsoPreValidateResponse","SubscriptionResponse","storageName","storageGb","license","usingInAppPurchase","subscription","upcomingInvoice","BillingSubscriptionResponse","BillingSubscriptionUpcomingInvoiceResponse","trialEndDate","periodStartDate","periodEndDate","cancelledDate","cancelAtEndDate","cancelled","BillingSubscriptionItemResponse","quantity","sponsoredSubscriptionItem","TaxInfoResponse","taxId","taxIdType","line1","line2","TaxRateResponse","TwoFactorAuthenticatorResponse","TwoFactorDuoResponse","secretKey","integrationKey","TwoFactorEmailResponse","TwoFactorProviderResponse","TwoFactorRecoverResponse","TwoFactorWebAuthnResponse","KeyResponse","migrated","ChallengeResponse","attestation","authenticatorSelection","challenge","excludeCredentials","extensions","pubKeyCredParams","rp","TwoFactorYubiKeyResponse","key1","key2","key3","key4","key5","nfc","UserKeyResponse","AttachmentUploadDataResponse","cipherResponse","cipherMiniResponse","FolderResponse","SyncResponse","HtmlStorageLocation","logoutCallback","customUserAgent","isWebClient","isDesktopClient","IEBrowser","ChromeBrowser","EdgeBrowser","FirefoxBrowser","OperaBrowser","SafariBrowser","UnknownBrowser","VivaldiBrowser","WindowsDesktop","MacOsDesktop","LinuxDesktop","postIdentityToken","Headers","Accept","identityToken","qsStringify","getCredentials","method","responseJson","isJsonResponse","TwoFactorProviders2","clearTwoFactorToken","doAuthRefresh","getAuthRequest","putAuthRequest","getAuthRequests","getLastAuthRequest","activeRequests","getProfile","getUserSubscription","getTaxInfo","putProfile","putTaxInfo","postPrelogin","postEmailToken","postEmail","postPassword","postSetKeyConnectorKey","postSecurityStamp","getAccountRevisionDate","postPremium","postIapCheck","postReinstatePremium","postCancelPremium","postAccountStorage","postAccountPayment","postAccountLicense","postAccountKeys","postAccountKey","postAccountVerifyEmail","postAccountVerifyEmailToken","postAccountRecoverDelete","postAccountRecoverDeleteToken","postAccountKdf","deleteSsoUser","postUserApiKey","postUserRotateApiKey","postConvertToKeyConnector","getUserBillingHistory","getUserBillingPayment","getSend","postSendAccess","getSendFileDownloadData","getSends","postSend","postFileTypeSend","renewSendFileUploadUrl","fileId","postSendFile","postSendFileLegacy","putSend","putSendRemovePassword","deleteSend","getCipher","getFullCipherDetails","getCipherAdmin","getCiphersOrganization","postCipher","postCipherCreate","postCipherAdmin","putCipher","putPartialCipher","putCipherAdmin","deleteCipherAdmin","deleteManyCiphers","deleteManyCiphersAdmin","putMoveCiphers","putShareCipher","putShareCiphers","putCipherCollections","putCipherCollectionsAdmin","postPurgeCiphers","putDeleteCipher","putDeleteCipherAdmin","putDeleteManyCiphers","putDeleteManyCiphersAdmin","putRestoreCipher","putRestoreCipherAdmin","putRestoreManyCiphers","postCipherAttachment","postCipherAttachmentLegacy","postCipherAttachmentAdminLegacy","deleteCipherAttachmentAdmin","postShareCipherAttachment","renewAttachmentUploadUrl","postAttachmentFile","getCollectionAccessDetails","getUserCollections","getCollections","getManyCollectionsWithAccessDetails","getCollectionUsers","postCollection","putCollection","putCollectionUsers","deleteCollection","deleteManyCollections","deleteCollectionUser","getGroupUsers","putGroupUsers","deleteGroupUser","getPlans","postPublicImportDirectory","getTaxRates","getSettingsDomains","putSettingsDomains","getSync","getTwoFactorProviders","getTwoFactorOrganizationProviders","getTwoFactorAuthenticator","getTwoFactorEmail","getTwoFactorDuo","getTwoFactorOrganizationDuo","getTwoFactorYubiKey","getTwoFactorWebAuthn","getTwoFactorWebAuthnChallenge","getTwoFactorRecover","putTwoFactorAuthenticator","putTwoFactorEmail","putTwoFactorDuo","putTwoFactorOrganizationDuo","putTwoFactorYubiKey","putTwoFactorWebAuthn","deviceResponse","rawId","getClientExtensionResults","AttestationObject","attestationObject","clientDataJson","clientDataJSON","deleteTwoFactorWebAuthn","putTwoFactorDisable","putTwoFactorOrganizationDisable","postTwoFactorRecover","postTwoFactorEmailSetup","getDeviceVerificationSettings","putDeviceVerificationSettings","getEmergencyAccessTrusted","getEmergencyAccessGranted","getEmergencyAccess","getEmergencyGrantorPolicies","putEmergencyAccess","deleteEmergencyAccess","postEmergencyAccessInvite","postEmergencyAccessReinvite","postEmergencyAccessAccept","postEmergencyAccessConfirm","postEmergencyAccessInitiate","postEmergencyAccessApprove","postEmergencyAccessReject","postEmergencyAccessTakeover","postEmergencyAccessPassword","postEmergencyAccessView","getCloudCommunicationsEnabled","getOrganizationConnection","createOrganizationConnection","updateOrganizationConnection","organizationConnectionId","deleteOrganizationConnection","postProviderSetup","getProvider","putProvider","getProviderUsers","getProviderUser","postProviderUserInvite","postProviderUserReinvite","postManyProviderUserReinvite","postProviderUserBulkConfirm","deleteManyProviderUsers","postProviderUserAccept","postProviderUserConfirm","postProviderUsersPublicKey","putProviderUser","deleteProviderUser","getProviderClients","postProviderAddOrganization","postProviderCreateOrganization","deleteProviderOrganization","getEvents","addEventParameters","getEventsCipher","getEventsOrganization","getEventsOrganizationUser","getEventsProvider","getEventsProviderUser","postEventsCollect","authHeader","getActiveBearerToken","Authorization","getUserPublicKey","getHibpBreach","postBitPayInvoice","postSetupPayment","getUserKeyFromKeyConnector","handleError","postUserKeyToKeyConnector","getKeyConnectorAlive","getOrganizationExport","getToken","tokenNeedsRefresh","nativeFetch","postCreateSponsorship","sponsoredOrgId","getSponsorshipSyncStatus","deleteRevokeSponsorship","sponsoringOrganizationId","deleteRemoveSponsorship","sponsoringOrgId","postPreValidateSponsorshipToken","sponsorshipToken","postRedeemSponsorship","postResendSponsorshipOffer","getRefreshToken","doRefreshToken","getClientId","getClientSecret","doApiTokenRefresh","decodedToken","decodeToken","tokenResponse","setTokens","deviceRequest","tokenRequest","setToken","authed","hasResponse","alterHeaders","pathParts","requestUrl","requestInit","FormData","responseType","responseIsJson","tokenError","isTextResponse","Message","typeHeader","storageService","makeAndGetAppId","getAnonymousAppId","existingId","htmlStorageLocation","Local","guid","hashBytes","hashStart","hashEnding","breachedAccounts","limit","throttleKey","descriptor","originalMethod","allThrottles","throttles","getThrottles","argsThrottleKey","queue","exec","onFinally","err","PasswordTokenRequest","AuthResult","requiresCaptcha","LogInStrategy","startLogIn","processTwoFactorResponse","processCaptchaResponse","processTokenResponse","buildDeviceRequest","buildTwoFactor","userProvidedTwoFactor","storedTwoFactorToken","getTwoFactorToken","Remember","saveAccountInformation","accountInformation","addAccount","sub","hasPremiumPersonally","kdfType","setTwoFactorToken","setUserKey","createKeyPairForOldAccount","PasswordLogInStrategy","makePreloginKey","PasswordlessLogInStrategy","passwordlessCredentials","SsoTokenRequest","code_verifier","redirect_uri","SsoLogInStrategy","newSsoUser","convertNewSsoUserToKeyConnector","getAndSetKey","UserApiLogInStrategy","setApiKeyClientId","setApiKeyClientSecret","PasswordlessAuthRequest","PreloginRequest","pushNotificationSubject","logInStrategy","strategy","clearState","Auto","getEverBeenUnlocked","hasKeyInMemory","preloginResponse","passwordlessLogin","pubKey","encryptedMasterPassword","startSessionTimeout","clearSessionTimeout","sessionTimeout","CollectionData","CollectionView","Collection","clearCache","setDecryptedCollections","model","decryptMany","decCollections","getEncryptedCollections","decryptedCollections","getDecryptedCollections","hasKey","collectionCopy","upsert","setEncryptedCollections","ServerConfigResponse","ThirdPartyServerConfigResponse","EnvironmentServerConfigResponse","ServerConfig","serverConfigData","getAgeInMilliseconds","expiresSoon","LogLevelType","ConfigService","configApiService","_serverConfig","activeAccountUnlocked$","switchMap","unlocked","E","buildServerConfig","getServerConfig","fetchServerConfig","setServerConfig","ConsoleLogService","timersMap","debug","write","Debug","Info","warning","Warning","level","log","sequentialize","cacheKey","caches","getCache","argsCacheKey","EFFLongWordList","BaseEncryptedOrganizationKey","EncryptedOrganizationKey","ProviderEncryptedOrganizationKey","decValue","toData","providerKey","getProviderKey","decryptToBytes","platformUtilService","setCryptoMasterKey","storeKey","keyHash","setDecryptedCryptoSymmetricKey","setEncryptedCryptoSymmetricKey","encPrivateKey","setDecryptedPrivateKey","setEncryptedPrivateKey","setOrgKeys","providerOrgs","encOrgKeyData","setDecryptedOrganizationKeys","setEncryptedOrganizationKeys","setProviderKeys","setDecryptedProviderKeys","setEncryptedProviderKeys","keySuffix","inMemoryKey","getCryptoMasterKey","symmetricKey","getKeyFromStorage","retrieveKeyFromStorage","validateKey","clearSecretKeyStore","storedKeyHash","getEncKeyHelper","getPublicKey","inMemoryPublicKey","getPrivateKey","rsaExtractPublicKey","setPublicKey","decryptedPrivateKey","getDecryptedPrivateKey","getEncryptedPrivateKey","keyFingerprint","userFingerprint","hkdfExpand","hashPhrase","getOrgKeys","decryptedOrganizationKeys","getDecryptedOrganizationKeys","getEncryptedOrganizationKeys","encOrgKey","fromData","decOrgKey","orgKeys","getProviderKeys","decryptedProviderKeys","getDecryptedProviderKeys","encProviderKeys","getEncryptedProviderKeys","getCryptoMasterKeyAuto","hasCryptoMasterKeyBiometric","getEncryptedCryptoSymmetricKey","clearKey","clearSecretStorage","clearStoredKey","setCryptoMasterKeyAuto","setCryptoMasterKeyBiometric","clearKeyHash","clearEncKey","memoryOnly","clearKeyPair","keysToClear","clearOrgKeys","clearProviderKeys","clearKeys","salt","pbkdf2","Argon2id","saltHash","argon2","protectedKeyCs","getEncryptedPinProtected","makeShareKey","shareKey","randomBytes","keyPair","stretchKey","makeSendKey","keyMaterial","sendKey","hkdf","hashPurpose","theKey","buildEncKey","plainValue","encryptToBytes","encValue","privateKeyValue","Rsa2048_OaepSha256_HmacSha256_B64","Rsa2048_OaepSha1_HmacSha256_B64","alg","encString","keyForEnc","encBuffer","randomNumber","min","rval","range","bitsNeeded","ceil","log2","bytesNeeded","mask","pow","byteArray","shouldStoreKey","getBiometricUnlock","getCryptoMasterKeyBiometric","minimumEntropy","entropyPerWord","numWords","hashArr","phrase","hashNumber","remainder","divide","encKeyEnc","getDecryptedCryptoSymmetricKey","decEncKey","encKeyCipher","symmetricCryptoKey","EncryptedObject","EncryptServiceImplementation","logMacFailures","plainBuf","encObj","aesEncrypt","macLen","resolveLegacyKey","fastParams","aesDecryptFastParameters","computedMac","hmacFast","macData","compareFast","logMacFailed","aesDecryptFast","encThing","hmac","aesDecrypt","decryptItems","AttachmentData","CardData","FieldData","IdentityData","LoginUriData","LoginData","PasswordHistoryData","SecureNoteData","CipherData","Attachment","decryptAttachmentKey","toAttachmentData","toCardData","Field","toFieldData","toIdentityData","LoginUri","toLoginUriData","toLoginData","toPasswordHistoryData","toSecureNoteData","Cipher","reduce","promise","decAttachment","decField","decPh","toCipherData","classInitializers","MultithreadEncryptServiceImplementation","clear$","worker","Worker","restartTimeout","fromEvent","jsonItem","defaultIfEmpty","terminate","EventData","eventUploadService","uploadImmediately","orgIds","eventCollection","getEventCollection","setEventCollection","uploadEvents","EventRequest","checkOnInterval","req","clearEvents","CardExport","FieldExport","IdentityExport","LoginUriExport","LoginExport","toView","toDomain","SecureNoteExport","CipherExport","values","CipherWithIdExport","CollectionExport","CollectionWithIdExport","EventExport","humanReadableMessage","appIcon","appName","userName","userEmail","ip","Folder","FolderExport","FolderWithIdExport","FileUploadType","getEncryptedExport","getDecryptedExport","clearText","encKeyValidation","encText","jsonDoc","passwordProtected","encKeyValidation_DO_NOT_EDIT","getOrganizationEncryptedExport","getOrganizationDecryptedExport","getEventExport","padNumber","getMonth","getHours","getMinutes","getSeconds","decFolders","decCiphers","getAllDecryptedFromState","foldersMap","exportCiphers","buildCommonCipher","getAllFromState","exportData","exportPromises","decCol","collectionsMap","orgKey","num","padCharacter","numString","login_uri","login_username","login_password","login_totp","AzureFileUploadService","upload","renewalCallback","azureUploadBlob","azureUploadBlocks","urlObject","toUTCString","searchParams","blobResponse","blockSize","getMaxBlockSize","blockIndex","numBlocks","blocksStaged","renewUrlIfNecessary","blockUrl","blockId","encodedBlockId","blockData","blockHeaders","blockRequest","blockResponse","blockListUrl","blockListXml","expiry","utfBlockId","blockIdList","xml","Version","month","day","compareTo","BitwardenFileUploadService","encryptedFileName","encryptedFileData","apiCall","fd","blob","Blob","filepath","contentType","azureFileUploadService","bitwardenFileUploadService","uploadSendFile","uploadData","Direct","Azure","uploadCipherAttachment","SetKeyConnectorKeyRequest","KeyConnectorUserKeyRequest","setUsesKeyConnector","userNeedsMigration","loggedInUsingSso","getIsExternal","requiredByOrganization","userIsNotUsingKeyConnector","keyConnectorRequest","handleKeyConnectorError","userKeyResponse","keyArr","privKey","setPasswordRequest","setConvertAccountRequired","setConvertAccountToKeyConnector","getConvertAccountToKeyConnector","_email","_rememberEmail","connected","inactive","reconnectTimer","signalrConnection","off","accessTokenFactory","processNotification","onclose","reconnect","isAuthedAndUnlocked","updateConnection","reconnectFromActivity","disconnectFromInactivity","isAuthenticated","payloadUserId","UserId","myUserId","syncUpsertCipher","syncDeleteCipher","syncUpsertFolder","syncDeleteFolder","syncUpsertSend","syncDeleteSend","getApproveLoginRequests","notificationId","OrganizationUserResponse","accessAll","OrganizationUserUserDetailsResponse","OrganizationUserDetailsResponse","OrganizationUserResetPasswordDetailsReponse","OrganizationUserBulkResponse","OrganizationUserBulkRequest","ids","SsoType","OpenIdConnectRedirectBehavior","Saml2BindingType","Saml2NameIdFormat","Saml2SigningBehavior","OrganizationApiKeyInformationResponse","keyType","OrganizationAutoEnrollStatusResponse","KeysResponse","OrganizationKeysResponse","OrganizationResponse","businessAddress1","businessAddress2","businessAddress3","businessCountry","businessTaxNumber","planType","maxAutoscaleSeats","OrganizationSubscriptionResponse","SsoConfigApi","authority","metadataAddress","redirectBehavior","getClaimsFromUserInfoEndpoint","additionalScopes","additionalUserIdClaimTypes","additionalEmailClaimTypes","additionalNameClaimTypes","acrValues","expectedReturnAcrValue","spNameIdFormat","spOutboundSigningAlgorithm","spSigningBehavior","spMinIncomingSigningAlgorithm","spWantAssertionsSigned","spValidateCertificates","idpEntityId","idpBindingType","idpSingleSignOnServiceUrl","idpSingleLogoutServiceUrl","idpX509PublicCert","idpOutboundSigningAlgorithm","idpAllowUnsolicitedAuthnResponse","idpDisableOutboundLogoutRequests","idpWantAuthnRequestsSigned","OpenIdConnect","openId","Saml2","saml","idpAllowOutboundLogoutRequests","OrganizationSsoResponse","SsoUrls","callbackPath","signedOutCallbackPath","spEntityId","spMetadataUrl","spAcsUrl","Organization","canAccess","isManager","isAdmin","isOwner","canAccessEventLogs","canAccessImportExport","canAccessReports","canCreateNewCollections","canEditAnyCollection","canUseAdminCollections","canDeleteAnyCollection","canViewAllCollections","canEditAssignedCollections","canDeleteAssignedCollections","canViewAssignedCollections","canManageGroups","canManageSso","canManageScim","canManagePolicies","canManageUsers","canManageUsersPassword","isExemptFromPolicies","canManageBilling","hasProvider","canAccessSecretsManager","_organizations","getOrganizations","updateObservables","organizationsMap","canManageSponsorships","getValue","getFromState","getByIdentifier","setOrganizations","GeneratedPasswordHistory","PasswordGeneratorPolicyOptions","defaultType","useUppercase","useLowercase","useNumbers","numberCount","useSpecial","specialCount","minNumberWords","capitalize","includeNumber","inEffect","DefaultOptions","minNumber","minUppercase","minLowercase","minSpecial","wordSeparator","generatePassphrase","sanitizePasswordLength","positions","shuffleArray","allCharSet","lowercaseCharSet","uppercaseCharSet","numberCharSet","specialCharSet","positionChars","randomCharIndex","listLength","wordList","wordIndex","appendRandomNumberToRandomWord","getPasswordGenerationOptions","setPasswordGenerationOptions","enforcedOptions","enforcePasswordGeneratorPoliciesOnOptions","getPasswordGeneratorPolicyOptions","PasswordGenerator","currentPolicy","useUpper","useLower","minNumbers","getDecryptedPasswordGenerationHistory","getEncryptedPasswordGenerationHistory","decryptHistory","setDecryptedPasswordGenerationHistory","currentHistory","matchesPrevious","unshift","newHistory","encryptHistory","setEncryptedPasswordGenerationHistory","userInputs","globalUserInputs","finalUserInputs","array","j","forGeneration","minUppercaseCalc","minLowercaseCalc","minNumberCalc","minSpecialCalc","PolicyData","PolicyApiService","getPolicy","getPolicies","getPoliciesByToken","getPoliciesByInvitedUser","mapPoliciesFromToken","putPolicy","Policy","ResetPasswordPolicyOptions","autoEnrollEnabled","ProviderUserStatusType","ProviderUserType","_policies","getEncryptedPolicies","decryptedPolicies","getDecryptedPolicies","diskPolicies","setDecryptedPolicies","of","obsPolicies","filteredPolicies","policyType","policyFilter","checkPoliciesThatApplyToUser","newPassword","toLocaleLowerCase","toLocaleUpperCase","getResetPasswordPolicyOptions","resetPasswordPolicyOptions","ResetPassword","policiesResponse","policyAppliesToUser","setEncryptedPolicies","isExcemptFromPolicies","policiesMap","policySet","Accepted","Provider","isProviderAdmin","canCreateOrganizations","ProviderAdmin","indexing","immediateSearchLocales","defaultSearchableMinLength","searchableMinLength","locale$","registeredPipeline","lunr","Pipeline","registerFunction","normalizeAccentsPipelineFunction","clearIndex","normalizeSearchQuery","indexCiphers","builder","Builder","pipeline","boost","extractor","uriExtractor","fieldExtractor","attachmentExtractor","results","isArray","getIndexForSearch","searchCiphersBasic","ciphersMap","searchResults","soWild","Query","wildcard","LEADING","TRAILING","q","tokenizer","term","sendsMatched","lowPriorityMatched","joined","protocolIndex","queryIndex","searchableFields","metadata","normalize","SendFileData","SendTextData","SendData","SendFile","SendText","Send","SendRequest","fileLength","fileUploadService","setDecryptedSends","fileData","passwordHash","encryptFileData","parseFile","getEncryptedSends","decSends","getDecryptedSends","uploadDataResponse","legacyServerSendFileUpload","setEncryptedSends","reader","FileReader","readAsArrayBuffer","onload","evt","onerror","StorageLocation","_settings","settings$","getSettings","setEquivalentDomains","setSettings","ProviderData","State","globals","accounts","authenticatedAccounts","accountActivity","accountDeserializer","buildAccountMapFromJSON","jsonAccounts","FolderData","partialKeys","DDG_SHARED_KEY","secureStorageService","memoryStorageService","stateMigrationService","stateFactory","useAccountCache","accountsSubject","accounts$","activeAccountSubject","activeAccountUnlockedSubject","hasBeenInited","isRecoveredSession","accountDiskCache","needsMigration","migrate","setState","createGlobals","initAccountState","updateState","syncAccountFromDisk","storedActiveUser","pushAccounts","diskAccount","getAccountFromDisk","account","setAccountEnvironmentUrls","scaffoldNewAccountStorage","setActiveUser","clearDecryptedDataForActiveUser","clean","reconcileOptions","defaultInMemoryOptions","deAuthenticateAccount","dynamicallySetActiveUser","removeAccountFromDisk","removeAccountFromMemory","getAccessToken","getTimeoutBasedStorageOptions","getAccount","setAccessToken","saveAccount","getAlwaysShowDock","getGlobals","defaultOnDiskOptions","alwaysShowDock","setAlwaysShowDock","saveGlobals","getApiKeyClientId","apiKeyClientId","getApiKeyClientSecret","apiKeyClientSecret","getAutoConfirmFingerPrints","autoConfirmFingerPrints","setAutoConfirmFingerprints","getBiometricAwaitingAcceptance","biometricAwaitingAcceptance","getBiometricFingerprintValidated","biometricFingerprintValidated","setBiometricText","biometricUnlock","getHasPremiumPersonally","getHasPremiumFromOrganization","setHasPremiumPersonally","hasPremiumFromOrganization","setHasPremiumFromOrganization","defaultOnDiskLocalOptions","collapsedGroupings","convertAccountToKeyConnector","nextValue","defaultSecureStorageOptions","saveSecureStorageKey","getCryptoMasterKeyB64","setCryptoMasterKeyB64","getDecryptedCiphers","setDecryptedCiphers","disableAddLoginNotification","disableAutoTotpCopy","disableBadgeCounter","disableChangedPasswordNotification","disableContextMenuItem","getDisableGa","disableGa","setDisableGa","dontShowCardsCurrentTab","dontShowIdentitiesCurrentTab","getDuckDuckGoSharedKey","setDuckDuckGoSharedKey","setEmailVerified","getEnableAlwaysOnTop","accountPreference","enableAlwaysOnTop","globalPreference","setEnableAlwaysOnTop","getEnableBiometric","enableBiometrics","setEnableBiometric","getEnableBrowserIntegration","enableBrowserIntegration","setEnableBrowserIntegration","getEnableBrowserIntegrationFingerprint","enableBrowserIntegrationFingerprint","setEnableBrowserIntegrationFingerprint","getEnableCloseToTray","enableCloseToTray","setEnableCloseToTray","getEnableDuckDuckGoBrowserIntegration","enableDuckDuckGoBrowserIntegration","setEnableDuckDuckGoBrowserIntegration","getEnableFullWidth","enableFullWidth","setEnableFullWidth","getEnableMinimizeToTray","enableMinimizeToTray","setEnableMinimizeToTray","getEnableStartToTray","enableStartToTray","setEnableStartToTray","getEnableTray","enableTray","setEnableTray","getEncryptedCiphers","defaultOnDiskMemoryOptions","setEncryptedCiphers","getEncryptedFolders","setEncryptedFolders","getEntityId","entityId","setEntityId","getEntityType","entityType","setEntityType","getGlobalEnvironmentUrls","getEquivalentDomains","everBeenUnlocked","getForcePasswordReset","setForcePasswordReset","getInstalledVersion","installedVersion","setInstalledVersion","getLastActive","getLocalData","setLocalData","getLocale","setLocale","getMainWindowSize","mainWindowSize","setMainWindowSize","getMinimizeOnCopyToClipboard","minimizeOnCopyToClipboard","setMinimizeOnCopyToClipboard","neverDomains","getNoAutoPromptBiometrics","noAutoPromptBiometrics","setNoAutoPromptBiometrics","getNoAutoPromptBiometricsText","noAutoPromptBiometricsText","setNoAutoPromptBiometricsText","getOpenAtLogin","openAtLogin","setOpenAtLogin","organizationInvitation","setOrganizationInvitation","passwordGenerationOptions","getUsernameGenerationOptions","usernameGenerationOptions","setUsernameGenerationOptions","setRefreshToken","getSecurityStamp","setSecurityStamp","getSsoOrgIdentifier","ssoOrganizationIdentifier","setSsoOrganizationIdentifier","ssoState","setTheme","setVaultTimeout","accountVaultTimeoutAction","globalVaultTimeoutAction","setVaultTimeoutAction","approveLoginRequests","setApproveLoginRequests","getStateVersion","setStateVersion","getWindow","setWindow","useMemory","storageLocation","getGlobalsFromMemory","useDisk","getGlobalsFromDisk","saveGlobalsToMemory","saveGlobalsToDisk","useSecureStorage","getAccountFromMemory","getUserIdFromMemory","cachedAccount","setDiskCache","Memory","Both","Disk","saveAccountToMemory","saveAccountToDisk","deleteDiskCache","deepClone","scaffoldNewAccountLocalStorage","scaffoldNewAccountSessionStorage","scaffoldNewAccountMemoryStorage","storedAccount","pruneInMemoryAccounts","requestedOptions","defaultOptions","Session","getActiveUserIdFromStorage","removeAccountFromLocalStorage","resetAccount","removeAccountFromSessionStorage","removeAccountFromSecureStorage","persistentAccountInformation","timeoutAction","deserializer","stateUpdater","updatedState","withPrototypeForArrayMembers","memberConstructor","memberConverter","originalResult","getOwnPropertyDescriptors","withPrototypeForObjectValues","valuesConstructor","valuesConverter","decoded","clientIdClientSecret","setClientId","setClientSecret","clearToken","getTokenExpirationDate","setUTCSeconds","tokenSecondsRemaining","offsetSeconds","msRemaining","valueOf","email_verified","getName","getIssuer","iss","amr","v1Keys","autoConfirmFingerprints","enableBiometric","encOrgKeys","encPrivate","lastActive","ssoIdentifier","stamp","usesConnector","v1KeyPrefixes","currentStateVersion","getCurrentStateVersion","Latest","migrateStateFrom1To2","Two","migrateStateFrom2To3","Three","migrateStateFrom3To4","Four","getAuthenticatedAccounts","migratedAccount","migrateAccountFrom4To5","setCurrentStateVersion","Five","migrateAccountFrom5To6","Six","clearV1Keys","clearingUserId","keyPrefix","defaultAccount","accountSettings","cryptoMasterKeyAuto","cryptoMasterKeyB64","cryptoMasterKeyBiometric","legacyEtmKey","authenticationStatus","authenticatedUserIds","encryptedOrgKeys","newVersion","B32Chars","SteamChars","period","digits","keyB32","isOtpAuth","isSteamAuth","digitParams","periodParam","algParam","epoch","timeHex","leftPad","decToHex","timeBytes","keyBytes","b32ToBytes","sign","offset","otp","fullCode","trunc","b32ToHex","cleanedInput","bits","hex","byteIndex","chunk","signature","UserVerificationApiService","postAccountVerifyOTP","postAccountRequestOTP","VerifyOTPRequest","userVerificationApiService","buildRequest","verification","requestClass","alreadyHashed","validateInput","AnonAddyForwarder","generate","anonaddy","redirect","DuckDuckGoForwarder","FastmailForwarder","accountId","getAccountId","using","methodCalls","emailPrefix","fastmail","methodResponses","notCreated","primaryAccounts","FirefoxRelayForwarder","generated_for","full_address","ForwarderOptions","FastmailForwarderOptions","AnonAddyForwarderOptions","SimpleLoginForwarder","Authentication","note","alias","wordCapitalize","wordIncludeNumber","forwardedAnonAddyDomain","generateCatchall","generateSubaddress","generateForwarded","generateWord","word","zeroPad","atIndex","emailBeginning","emailEnding","subaddressString","randomString","catchallDomain","startString","forwarder","forwarderOptions","forwardedSimpleLoginApiKey","forwardedAnonAddyApiToken","forwardedFirefoxApiToken","forwardedFastmailApiToken","forwardedDuckDuckGoToken","charSet","lockedCallback","loggedOutCallback","startCheck","checkVaultTimeout","shouldLock","executeTimeoutAction","vaultTimeoutSeconds","currentAction","DecryptParameters","WebCryptoFunctionService","crypto","subtle","wasmSupported","checkIfWasmSupported","algorithm","wcLen","passwordBuf","toBuf","pbkdf2Params","toWebCryptoAlgorithm","impKey","importKey","deriveBits","passwordArr","saltArr","pass","time","mem","hashLen","ArgonType","ikm","outputByteSize","hkdfParams","prk","infoBuf","infoArr","runningOkmLength","previousT","okm","md","valueBytes","toByteString","digest","valueBuf","signingAlgorithm","mac1","mac2","arr1","arr2","getBytes","rand","Uint32Array","putInt32","meta","encKeyByteString","macKeyByteString","parameters","dataBuffer","decipher","finish","rsaParams","impPrivateKey","jwkPrivateKey","exportKey","jwkPublicKeyParams","kty","ext","impPublicKey","modulusLength","publicExponent","generateKey","getRandomValues","buf","WebAssembly","instantiate","module","Module","Instance","SyncNotifierService","SortedCiphersCache","comparator","sortedCiphersByUrl","timeouts","isCached","addCiphers","Ciphers","resetTimer","getLastUsed","getLastLaunched","getNext","updateLastUsedIndex","lastUsedIndex","lastLaunched","y","getNextIndex","CipherBulkDeleteRequest","CipherBulkMoveRequest","CipherBulkRestoreRequest","AttachmentRequest","CipherRequest","lastKnownRevisionDate","attachments2","attachmentRequest","CipherWithIdRequest","CipherBulkShareRequest","CipherCollectionsRequest","CipherCreateRequest","CipherPartialRequest","CipherShareRequest","DomainMatchBlacklist","settingsService","sortedCiphersCache","sortCiphersByLastUsed","getDecryptedCipherCache","setDecryptedCipherCache","clearDecryptedCiphersState","originalCipher","existingCipher","existingHiddenFields","hiddenFields","ef","matchedField","encryptObjProperty","encryptCipherData","encryptFields","encryptPasswordHistories","encryptAttachments","attachmentsModel","encAttachments","fieldsModel","encFields","encField","encryptField","fieldModel","phModels","encPhs","encPh","encryptPasswordHistory","phModel","reindexCiphers","userKey","grouped","agg","groupedCiphers","flat","getLocaleSortingFunction","getAllDecryptedForGrouping","groupingId","includeOtherTypes","defaultMatch","eqDomainsPromise","eqDomain","matchingDomains","domainUrlHost","urlHost","getAllFromApiForOrganization","cr","getLastUsedForUrl","getCipherForUrl","getLastLaunchedForUrl","getNextCipherForUrl","updateLastUsedIndexForUrl","updateLastUsedDate","ciphersLocalData","decryptedCipherCache","cached","saveNeverDomain","attachmentPromises","shareAttachmentWithServer","encCipher","shareManyWithServer","encCiphers","unencryptedFile","cData","filename","encFileName","dataEncKey","encData","adminRequest","legacyServerAttachmentFileUpload","clearEncryptedCiphersState","moveManyWithServer","deleteManyWithServer","deleteAttachment","aLastUsed","bLastUsed","bothNotNull","aName","bName","softDelete","setDeletedDate","softDeleteManyWithServer","clearDeletedDate","restoreManyWithServer","restores","attachmentView","attachmentResponse","theObj","modelProp","lastUsed","autofillOnPageLoadDefault","clearSortedCiphers","FolderRequest","FolderApiService","postFolder","putFolder","deleteFolder","_folders","_folderViews","decryptFolders","updates","cId","decryptFolderPromises","decryptedFolders","_sync","sync$","OrganizationData","providerService","forceSync","allowThrowOnError","syncStarted","syncCompleted","needsSync","needsSyncing","syncProfile","syncFolders","syncCollections","syncCiphers","syncSends","syncSettings","syncPolicies","isEdit","localFolder","remoteFolder","shouldUpdate","localCipher","checkCollections","remoteCipher","localSend","remoteSend","eqDomains","subscribers","messageCallback","ThemeBuilder","configuredTheme","systemTheme","effectiveTheme","updateSystemTheme","ThemingService","_theme","theme$","monitorThemeChanges","getSystemTheme","monitorConfiguredThemeChanges","monitorSystemThemeChanges","matchMedia","JslibServicesModule","useFactory","deps","language","accountService","deleteAccount","verificationRequest","Observable","cryptoFunctionservice","getOrganizationUser","includeGroups","getOrganizationUserGroups","getAllUsers","includeCollections","getOrganizationUserResetPasswordDetails","postOrganizationUserInvite","postOrganizationUserReinvite","postManyOrganizationUserReinvite","postOrganizationUserAccept","postOrganizationUserConfirm","postOrganizationUsersPublicKey","postOrganizationUserBulkConfirm","putOrganizationUser","putOrganizationUserGroups","putOrganizationUserResetPassword","deleteOrganizationUser","deleteManyOrganizationUsers","revokeOrganizationUser","revokeManyOrganizationUsers","restoreOrganizationUser","restoreManyOrganizationUsers","errors","controlErrors","keyError","getBilling","getSubscription","getLicense","createLicense","updatePayment","upgrade","updateSubscription","updateSeats","updateStorage","verifyBank","reinstate","updateLicense","importDirectory","getOrCreateApiKey","getApiKeyInformation","organizationApiKeyType","rotateApiKey","updateTaxInfo","updateKeys","getSso","updateSso","selfHostedSyncLicense","defaultErrorMessage","ContainerService","attachToGlobal","MemoryStorageService","getBypassCache","SystemService","reloadCallback","reloadInterval","clearClipboardTimeout","clearClipboardTimeoutFunction","startProcessReload","cancelProcessReload","executeProcessReload","inactiveMoreThanSeconds","seconds","doRefresh","biometricLockedFingerprintValidated","clipboardValue","timeoutMs","clearSeconds","clipboardValueNow","clearPendingClipboard","NotificationQueueMessageType","ContextMenusBackground","contextMenuClickedHandler","contextMenus","onClicked","cipherAction","commandToRetry","NotificationBackground","notificationQueue","processMessage","cleanupNotificationQueue","getDataForTab","responseCommand","addLogin","changedPassword","removeTabFromNotificationQueue","retryMessage","saveOrUpdateCredentials","saveNever","forms","getFormsWithPasswordFields","checkNotificationQueue","doNotificationQueueCheck","currentTab","expires","tabDomain","AddLogin","typeData","isVaultLocked","wasVaultLocked","getCurrentTheme","ChangePassword","loginInfo","loginDomain","normalizedUsername","disabledAddLogin","allowPersonalOwnership","pushAddLoginToQueue","usernameMatches","pushChangePasswordToQueue","changeData","currentPassword","passwordMatches","queueMessage","changePasswordMessage","getDecryptedCipherById","updateCipher","createNewCipher","addLoginMessage","loginModel","newCipher","TabsBackground","main","notificationBackground","onFocusChanged","focusedWindowId","onActivated","activeInfo","refreshBadge","refreshMenu","onReplaced","addedTabId","removedTabId","onReplacedRan","onUpdated","changeInfo","onUpdatedRan","factory","cachedServices","opts","alwaysInitializeNewService","instanceOrPromise","doNotStoreInitializedService","AbstractChromeStorageService","chromeStorageApi","keyedObj","BrowserLocalStorageService","local","BrowserMemoryStorageService","session","LocalBackedSessionStorageService","keyGenerationService","localStorage","sessionStorage","getLocalSession","getSessionEncKey","sessionEncKey","localSession","setLocalSession","sessionJson","setSessionEncKey","setEncryptedLocalSession","setDecryptedLocalSession","jsonSession","encSession","storedKey","makeEphemeralKey","cryptoFunctionServiceFactory","cryptoFunctionServiceOptions","logServiceFactory","logServiceOptions","encryptServiceOptions","KeyGenerationService","numBytes","diskStorageServiceFactory","secureStorageServiceFactory","memoryStorageServiceFactory","keyGenerationServiceFactory","appIdServiceFactory","SessionSyncer","subject","metaData","ignoreNUpdates","ctor","initializer","ReplaySubject","_buffer","observe","sessionKey","listenForUpdates","stream","skip","updateSession","updateMessageCommand","updateFromMessage","itemBuilder","initializeAs","keyValuePair","browserSession","findStorageService","__syncedItemMetadata","__sessionSyncers","buildSyncer","storageSerice","syncer","isMemoryStorageService","sessionSync","buildOptions","AccountSettings","Account","groupings","stateServiceFactory","service","stateMigrationServiceOptions","stateMigrationServiceFactory","stateServiceOptions","environmentServiceFactory","BrowserMessagingService","messagingServiceFactory","platformUtilsServiceFactory","platformUtilsServiceOptions","tokenServiceFactory","apiServiceFactory","apiServiceOptions","BrowserCryptoService","cryptoServiceFactory","systemLanguage","localesDirectory","getLocalesJson","supportedTranslationLocales","defaultLocale","localeNames","defaultMessages","localeMessages","Intl","Collator","numeric","sensitivity","loadMessages","translate","messagesObj","formattedLocale","locales","placeholders","placeProp","content","replaceToken","replaceContent","_locale","_translationLocale","getMessage","i18nServiceFactory","i18nServiceOptions","BrowserOrganizationService","organizationServiceFactory","authServiceFactory","keyConnectorServiceOptions","keyConnectorServiceFactory","twoFactorServiceFactory","BrowserSettingsService","cipherServiceFactory","settingsServiceFactory","fileUploadServiceFactory","cipherServiceOptions","searchServiceFactory","ROOT_ID","AUTOFILL_ID","COPY_USERNAME_ID","COPY_PASSWORD_ID","COPY_VERIFICATIONCODE_ID","COPY_IDENTIFIER_ID","GENERATE_PASSWORD_ID","NOOP_COMMAND_SUFFIX","MainContextMenuHandler","initRunning","_options","serviceOptions","removeAll","contexts","parentId","menuItemId","loadOptions","sanitizedTitle","sanitizeContextMenuTitle","createChildItem","noAccess","noLogins","NOT_IMPLEMENTED","_args","LISTENED_TO_COMMANDS","CipherContextMenuHandler","mainContextMenuHandler","mv3Create","serviceCache","cipherContextMenuHandler","shouldListen","messageListener","activeTabs","updateForCipher","eventCollectionServiceFactory","eventUploadServiceFactory","BrowserPolicyService","passwordGenerationServiceFactory","policyServiceFactory","totpServiceFactory","AutoFillConstants","UsernameFieldNames","PasswordFieldIgnoreList","ExcludedAutofillTypes","CreditCardAutoFillConstants","CardAttributes","CardAttributesExtended","CardHolderFieldNames","CardHolderFieldNameValues","CardNumberFieldNames","CardNumberFieldNameValues","CardExpiryFieldNames","CardExpiryFieldNameValues","ExpiryMonthFieldNames","ExpiryYearFieldNames","CVVFieldNames","CardBrandFieldNames","MonthAbbr","YearAbbrShort","YearAbbrLong","IdentityAutoFillConstants","IdentityAttributes","FullNameFieldNames","FullNameFieldNameValues","TitleFieldNames","FirstnameFieldNames","MiddlenameFieldNames","LastnameFieldNames","EmailFieldNames","AddressFieldNames","AddressFieldNameValues","Address1FieldNames","Address2FieldNames","Address3FieldNames","PostalCodeFieldNames","CityFieldNames","StateFieldNames","CountryFieldNames","PhoneFieldNames","UserNameFieldNames","CompanyFieldNames","IsoCountries","afghanistan","albania","algeria","andorra","angola","anguilla","antarctica","argentina","armenia","aruba","australia","austria","azerbaijan","bahamas","bahrain","bangladesh","barbados","belarus","belgium","belize","benin","bermuda","bhutan","bolivia","botswana","brazil","bulgaria","burundi","cambodia","cameroon","canada","chad","chile","china","colombia","comoros","congo","croatia","cuba","cyprus","denmark","djibouti","dominica","ecuador","egypt","eritrea","estonia","ethiopia","fiji","finland","france","gabon","gambia","georgia","germany","ghana","gibraltar","greece","greenland","grenada","guadeloupe","guam","guatemala","guernsey","guinea","guyana","haiti","honduras","hungary","iceland","india","indonesia","iraq","ireland","israel","italy","jamaica","japan","jersey","jordan","kazakhstan","kenya","kiribati","kuwait","kyrgyzstan","latvia","lebanon","lesotho","liberia","liechtenstein","lithuania","luxembourg","macao","macedonia","madagascar","malawi","malaysia","maldives","mali","malta","martinique","mauritania","mauritius","mayotte","mexico","moldova","monaco","mongolia","montenegro","montserrat","morocco","mozambique","myanmar","namibia","nauru","nepal","netherlands","nicaragua","niger","nigeria","niue","norway","oman","pakistan","palau","panama","paraguay","peru","philippines","pitcairn","poland","portugal","qatar","reunion","romania","rwanda","samoa","senegal","serbia","seychelles","singapore","slovakia","slovenia","somalia","spain","sudan","suriname","swaziland","sweden","switzerland","taiwan","tajikistan","tanzania","thailand","togo","tokelau","tonga","tunisia","turkey","turkmenistan","tuvalu","uganda","ukraine","uruguay","uzbekistan","vanuatu","venezuela","vietnam","yemen","zambia","zimbabwe","IsoStates","alabama","alaska","arizona","arkansas","california","colorado","connecticut","delaware","florida","hawaii","idaho","illinois","indiana","iowa","kansas","kentucky","louisiana","maine","maryland","massachusetts","michigan","minnesota","mississippi","missouri","montana","nebraska","nevada","ohio","oklahoma","oregon","pennsylvania","tennessee","texas","utah","vermont","virginia","washington","wisconsin","wyoming","IsoProvinces","alberta","manitoba","ontario","quebec","saskatchewan","AutofillScript","documentUUID","script","properties","autosubmit","formData","passwordFields","loadPasswordFields","formKey","formPasswordFields","pf","uf","findUsernameField","passwords","totpPromise","didAutofill","pd","fillScript","generateFillScript","skipUsernameOnlyFill","onlyEmptyFields","onlyVisibleFields","delay_between_operations","skipLastUsed","Cipher_ClientAutofilled","doAutoFillOnTab","fromCommand","lastLaunchedCipher","doAutoFillActiveTab","getActiveTab","filledFields","fieldNames","hasValue","opid","viewable","matchingIndex","findMatchingFieldIndex","matchingField","fillByOpid","generateLoginFillScript","generateCardFillScript","generateIdentityFillScript","usernames","savedUrls","setFillScriptForFocus","passwordFieldsForForm","passField","elementNumber","fieldIsFuzzyMatch","fillFields","forCustomFieldsOnly","isExcludedType","attr","isFieldMatch","makeScriptAction","selectInfo","siOptions","fieldAttrsContain","maxLength","colonIndex","fullMonth","fullYear","partYear","makeScriptActionWithValue","containsVal","doesContain","filledState","stateLower","isoState","filledCountry","countryLower","isoCountry","excludedTypes","containsOptions","checkValueContains","cipherData","dataProp","fieldProp","dataValue","doFill","canBeHidden","canBeReadOnly","mustBeEmpty","isPassword","valueIsLikePassword","cleanedValue","readonly","htmlID","htmlName","placeholder","autoCompleteType","passwordField","withoutForm","usernameField","names","fieldPropertyIsPrefixMatch","fieldPropertyIsMatch","property","separator","sepIndex","fieldVal","regexParts","csvParts","csvVals","fuzzyMatch","lastField","lastPasswordField","clearClipboardAlarmName","alarmState","setAlarmTimeInternal","commandName","GeneratePasswordToClipboardCommand","generatePasswordToClipboard","delay_ms","clearAlarmTime","setAlarmTime","AutofillTabCommand","doAutofillTabCommand","collectPageDetails","doAutofillTabWithCipherCommand","ContextMenuClickedHandler","autofillAction","generatePasswordToClipboardCommand","autofillCommand","autofillServiceFactory","getIdentifier","parentMenuItemId","Cipher_ClientCopiedPassword","UpdateBadge","badgeAction","existingServices","listenedToCommands","initServices","setBadgeBackgroundColor","setLoggedOut","setLocked","getTab","setUnlocked","setBadgeIcon","clearBadgeText","setBadgeText","countText","isOperaSidebar","setActionText","setSideBarText","iconSuffix","setActionIcon","setSidebarActionIcon","setTitle","setIcon","useSyncApiCalls","lastFocusedWindow","existingServiceCache","BrowserI18nService","BrowserMessagingPrivateModeBackgroundService","checkSafari","BrowserFolderService","CommandsBackground","processCommand","commands","onCommand","autoFillLogin","openPopup","collectPageDetailsForContentScript","IdleBackground","notificationsService","idleTimer","idleState","idle","idleHandler","newState","onStateChanged","setDetectionInterval","pollIdle","handler","queryState","NativeMessagingBackground","runtimeBackground","resolver","secureSetupResolve","onAdded","connect","port","connecting","connectedCallback","disconnect","sharedSecret","validatingFingerprint","showFingerprintDialog","showWrongUserDialog","onDisconnect","timestamp","encryptMessage","secureCommunication","getResponse","rawMessage","abs","sendUnencrypted","RuntimeBackground","systemService","pageDetailsToAutoFill","onInstalledReason","lockedVaultPendingNotifications","onInstalled","reason","checkOnInstalled","backgroundMessageListener","popupOnlyContext","bitwardenBackgroundMessageListener","logout","avatarUpdateService","reseedStorage","autofillTimeout","autofillPage","referrer","tabToAutoFill","loginToAutoFill","WebRequestBackground","pendingAuthRequests","webRequest","onAuthRequired","resolveAuthCredentials","onCompleted","completeAuthRequest","onErrorOccurred","authCredentials","MainBackground","isPrivateMode","backgroundWindow","nativeMessagingBackground","syncNotifierService","that","backgroundMessagingService","containerService","commandsBackground","tabsBackground","_tab","contextMenusBackground","idleBackground","webRequestBackground","bootstrap","forLocked","needStorageReseed","needsStorageReseed","override","syncInternal","lastSyncAgo","scheduleNextSync","syncTimeout","BrowserConfigService","FileDownloadBuilder","_request","fileType","downloadMethod","fileNameLower","endsWith","BrowserFileDownloadService","createObjectURL","BrowserMessagingPrivateModePopupService","PasswordRepromptComponent","InitService","screen","availHeight","htmlEl","platform","screenLeft","screenTop","LockGuardService","PopupSearchService","mainSearchService","consoleLogService","UnauthGuardService","needsBackgroundInit","mainBackground","localBgService","createLocalBgService","bitwardenMain","getBgService","ServicesModule","initService","AppModule","positionClass","bootstrapModule","preserveWhitespaces","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","exports","__webpack_modules__","O","chunkIds","notFulfilled","Infinity","fulfilled","getter","__esModule","getPrototypeOf","mode","ns","def","getOwnPropertyNames","definition","defineProperty","enumerable","chunkId","globalThis","Function","Symbol","toStringTag","nmd","paths","scriptUrl","importScripts","currentScript","scripts","baseURI","installedChunks","webpackJsonpCallback","parentChunkLoadingFunction","moreModules","chunkLoadingGlobal","__webpack_exports__"],"sourceRoot":""}